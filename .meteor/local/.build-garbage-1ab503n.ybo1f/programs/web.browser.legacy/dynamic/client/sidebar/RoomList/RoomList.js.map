{"version":3,"sources":["meteor://ðŸ’»app/client/sidebar/RoomList/RoomList.js"],"names":["Box","module","link","v","useResizeObserver","React","useRef","useEffect","useMemo","Virtuoso","useSession","useTranslation","useUserPreference","useUserId","useAvatarTemplate","usePreventDefault","useRoomList","useShortcutOpenMenu","useSidebarPaletteColor","useTemplateByViewMode","Row","ScrollerWithCustomProps","RoomList","listRef","debounceDelay","ref","openedRoom","sidebarViewMode","sideBarItemTemplate","avatarTemplate","extended","isAnonymous","t","roomsList","itemData","SideBarItemTemplate","AvatarTemplate","current","resetAfterIndex","length","Scroller","index","data","exportDefault"],"mappings":"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","file":"dynamic/client/sidebar/RoomList/RoomList.js","sourcesContent":["import { Box } from '@rocket.chat/fuselage';\nimport { useResizeObserver } from '@rocket.chat/fuselage-hooks';\nimport React, { useRef, useEffect, useMemo } from 'react';\nimport { Virtuoso } from 'react-virtuoso';\n\nimport { useSession } from '../../contexts/SessionContext';\nimport { useTranslation } from '../../contexts/TranslationContext';\nimport { useUserPreference, useUserId } from '../../contexts/UserContext';\nimport { useAvatarTemplate } from '../hooks/useAvatarTemplate';\nimport { usePreventDefault } from '../hooks/usePreventDefault';\nimport { useRoomList } from '../hooks/useRoomList';\nimport { useShortcutOpenMenu } from '../hooks/useShortcutOpenMenu';\nimport { useSidebarPaletteColor } from '../hooks/useSidebarPaletteColor';\nimport { useTemplateByViewMode } from '../hooks/useTemplateByViewMode';\nimport Row from './Row';\nimport ScrollerWithCustomProps from './ScrollerWithCustomProps';\n\nconst RoomList = () => {\n\tuseSidebarPaletteColor();\n\tconst listRef = useRef();\n\tconst { ref } = useResizeObserver({ debounceDelay: 100 });\n\n\tconst openedRoom = useSession('openedRoom');\n\n\tconst sidebarViewMode = useUserPreference('sidebarViewMode');\n\tconst sideBarItemTemplate = useTemplateByViewMode();\n\tconst avatarTemplate = useAvatarTemplate();\n\tconst extended = sidebarViewMode === 'extended';\n\tconst isAnonymous = !useUserId();\n\n\tconst t = useTranslation();\n\n\tconst roomsList = useRoomList();\n\tconst itemData = useMemo(\n\t\t() => ({\n\t\t\textended,\n\t\t\tt,\n\t\t\tSideBarItemTemplate: sideBarItemTemplate,\n\t\t\tAvatarTemplate: avatarTemplate,\n\t\t\topenedRoom,\n\t\t\tsidebarViewMode,\n\t\t\tisAnonymous,\n\t\t}),\n\t\t[avatarTemplate, extended, isAnonymous, openedRoom, sideBarItemTemplate, sidebarViewMode, t],\n\t);\n\n\tusePreventDefault(ref);\n\tuseShortcutOpenMenu(ref);\n\n\tuseEffect(() => {\n\t\tlistRef.current?.resetAfterIndex(0);\n\t}, [sidebarViewMode]);\n\n\treturn (\n\t\t<Box h='full' w='full' ref={ref}>\n\t\t\t<Virtuoso\n\t\t\t\ttotalCount={roomsList.length}\n\t\t\t\tdata={roomsList}\n\t\t\t\tcomponents={{ Scroller: ScrollerWithCustomProps }}\n\t\t\t\titemContent={(index, data) => <Row data={itemData} item={data} />}\n\t\t\t/>\n\t\t</Box>\n\t);\n};\n\nexport default RoomList;\n"]}