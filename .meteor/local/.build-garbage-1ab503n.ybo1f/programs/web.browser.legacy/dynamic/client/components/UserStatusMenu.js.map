{"version":3,"sources":["meteor://ğŸ’»app/client/components/UserStatusMenu.js"],"names":["_extends","module","link","default","v","_slicedToArray","_objectWithoutProperties","Button","PositionAnimated","Options","useCursor","Box","React","useRef","useCallback","useState","useMemo","useEffect","useSetting","useTranslation","UserStatus","UserStatusMenu","onChange","optionWidth","undefined","initialStatus","placement","props","t","status","setStatus","allowInvisibleStatus","options","renderOption","label","statuses","push","selected","hide","reset","cursor","handleKeyDown","handleKeyUp","visible","show","ref","onClick","current","focus","classList","add","handleSelection","exportDefault"],"mappings":"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","file":"dynamic/client/components/UserStatusMenu.js","sourcesContent":["import { Button, PositionAnimated, Options, useCursor, Box } from '@rocket.chat/fuselage';\nimport React, { useRef, useCallback, useState, useMemo, useEffect } from 'react';\n\nimport { useSetting } from '../contexts/SettingsContext';\nimport { useTranslation } from '../contexts/TranslationContext';\nimport { UserStatus } from './UserStatus';\n\nconst UserStatusMenu = ({ onChange, optionWidth = undefined, initialStatus = 'offline', placement = 'bottom-end', ...props }) => {\n\tconst t = useTranslation();\n\tconst [status, setStatus] = useState(initialStatus);\n\tconst allowInvisibleStatus = useSetting('Accounts_AllowInvisibleStatusOption');\n\n\tconst options = useMemo(() => {\n\t\tconst renderOption = (status, label) => (\n\t\t\t<Box display='flex' flexDirection='row' alignItems='center'>\n\t\t\t\t<Box marginInlineEnd='x8'>\n\t\t\t\t\t<UserStatus status={status} />\n\t\t\t\t</Box>\n\t\t\t\t{label}\n\t\t\t</Box>\n\t\t);\n\n\t\tconst statuses = [\n\t\t\t['online', renderOption('online', t('Online'))],\n\t\t\t['away', renderOption('away', t('Away'))],\n\t\t\t['busy', renderOption('busy', t('Busy'))],\n\t\t];\n\n\t\tif (allowInvisibleStatus) {\n\t\t\tstatuses.push(['offline', renderOption('offline', t('Invisible'))]);\n\t\t}\n\n\t\treturn statuses;\n\t}, [t, allowInvisibleStatus]);\n\n\tconst [cursor, handleKeyDown, handleKeyUp, reset, [visible, hide, show]] = useCursor(-1, options, ([selected], [, hide]) => {\n\t\tsetStatus(selected);\n\t\treset();\n\t\thide();\n\t});\n\n\tconst ref = useRef();\n\tconst onClick = useCallback(() => {\n\t\tref.current.focus() & show();\n\t\tref.current.classList.add('focus-visible');\n\t}, [show]);\n\n\tconst handleSelection = useCallback(\n\t\t([selected]) => {\n\t\t\tsetStatus(selected);\n\t\t\treset();\n\t\t\thide();\n\t\t},\n\t\t[hide, reset],\n\t);\n\n\tuseEffect(() => onChange(status), [status, onChange]);\n\n\treturn (\n\t\t<>\n\t\t\t<Button ref={ref} small square ghost onClick={onClick} onBlur={hide} onKeyUp={handleKeyUp} onKeyDown={handleKeyDown} {...props}>\n\t\t\t\t<UserStatus status={status} />\n\t\t\t</Button>\n\t\t\t<PositionAnimated width='auto' visible={visible} anchor={ref} placement={placement}>\n\t\t\t\t<Options width={optionWidth} onSelect={handleSelection} options={options} cursor={cursor} />\n\t\t\t</PositionAnimated>\n\t\t</>\n\t);\n};\n\nexport default UserStatusMenu;\n"]}