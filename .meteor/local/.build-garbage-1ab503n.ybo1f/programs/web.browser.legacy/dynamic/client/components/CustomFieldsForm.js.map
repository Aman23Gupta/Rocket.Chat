{"version":3,"sources":["meteor://ðŸ’»app/client/components/CustomFieldsForm.js"],"names":["_extends","module","link","default","v","_objectSpread","_objectWithoutProperties","_toConsumableArray","_slicedToArray","export","CustomFieldsForm","TextInput","Select","Field","capitalize","React","useMemo","useEffect","useState","useSetting","useTranslation","useComponentDidUpdate","useForm","CustomTextInput","label","name","required","minLength","maxLength","setState","state","className","setCustomFieldsError","t","inputError","setInputError","verify","errors","push","length","join","oldErrors","filter","item","e","currentTarget","value","CustomSelect","options","selectError","setSelectError","mappedOptions","Object","values","map","val","CustomFieldsAssembler","formValues","formHandlers","customFields","props","entries","key","extraProps","type","jsonCustomFields","customFieldsData","setCustomFieldsData","onLoadFields","accountsCustomFieldsJson","JSON","parse","hasCustomFields","Boolean","defaultFields","reduce","data","defaultValue","handlers"],"mappings":"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","file":"dynamic/client/components/CustomFieldsForm.js","sourcesContent":["import { TextInput, Select, Field } from '@rocket.chat/fuselage';\nimport { capitalize } from '@rocket.chat/string-helpers';\nimport React, { useMemo, useEffect, useState } from 'react';\n\nimport { useSetting } from '../contexts/SettingsContext';\nimport { useTranslation } from '../contexts/TranslationContext';\nimport { useComponentDidUpdate } from '../hooks/useComponentDidUpdate';\nimport { useForm } from '../hooks/useForm';\n\nconst CustomTextInput = ({ label, name, required, minLength, maxLength, setState, state, className, setCustomFieldsError = () => [] }) => {\n\tconst t = useTranslation();\n\n\tconst [inputError, setInputError] = useState('');\n\n\tconst verify = useMemo(() => {\n\t\tconst errors = [];\n\t\tif (!state && required) {\n\t\t\terrors.push(t('The_field_is_required', label || name));\n\t\t}\n\n\t\tif (state.length < minLength && state.length > 0) {\n\t\t\terrors.push(t('Min_length_is', minLength));\n\t\t}\n\n\t\treturn errors.join(', ');\n\t}, [state, required, minLength, t, label, name]);\n\n\tuseEffect(() => {\n\t\tsetCustomFieldsError((oldErrors) => (verify ? [...oldErrors, { name }] : oldErrors.filter((item) => item.name !== name)));\n\t}, [name, setCustomFieldsError, verify]);\n\n\tuseComponentDidUpdate(() => {\n\t\tsetInputError(verify);\n\t}, [verify]);\n\n\treturn useMemo(\n\t\t() => (\n\t\t\t<Field className={className}>\n\t\t\t\t<Field.Label>\n\t\t\t\t\t{label || t(name)}\n\t\t\t\t\t{required && '*'}\n\t\t\t\t</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\tname={name}\n\t\t\t\t\t\terror={inputError}\n\t\t\t\t\t\tmaxLength={maxLength}\n\t\t\t\t\t\tflexGrow={1}\n\t\t\t\t\t\tvalue={state}\n\t\t\t\t\t\tonChange={(e) => setState(e.currentTarget.value)}\n\t\t\t\t\t/>\n\t\t\t\t</Field.Row>\n\t\t\t\t<Field.Error>{inputError}</Field.Error>\n\t\t\t</Field>\n\t\t),\n\t\t[className, label, t, name, required, inputError, maxLength, state, setState],\n\t);\n};\n\nconst CustomSelect = ({ label, name, required, options = {}, setState, state, className, setCustomFieldsError = () => [] }) => {\n\tconst t = useTranslation();\n\tconst [selectError, setSelectError] = useState('');\n\n\tconst mappedOptions = useMemo(() => Object.values(options).map((value) => [value, value]), [options]);\n\tconst verify = useMemo(\n\t\t() => (!state.length && required ? t('The_field_is_required', label || name) : ''),\n\t\t[name, label, required, state.length, t],\n\t);\n\n\tuseEffect(() => {\n\t\tsetCustomFieldsError((oldErrors) => (verify ? [...oldErrors, { name }] : oldErrors.filter((item) => item.name !== name)));\n\t}, [name, setCustomFieldsError, verify]);\n\n\tuseComponentDidUpdate(() => {\n\t\tsetSelectError(verify);\n\t}, [verify]);\n\n\treturn useMemo(\n\t\t() => (\n\t\t\t<Field className={className}>\n\t\t\t\t<Field.Label>\n\t\t\t\t\t{label || t(name)}\n\t\t\t\t\t{required && '*'}\n\t\t\t\t</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<Select name={name} error={selectError} flexGrow={1} value={state} options={mappedOptions} onChange={(val) => setState(val)} />\n\t\t\t\t</Field.Row>\n\t\t\t\t<Field.Error>{selectError}</Field.Error>\n\t\t\t</Field>\n\t\t),\n\t\t[className, label, t, name, required, selectError, state, mappedOptions, setState],\n\t);\n};\n\nconst CustomFieldsAssembler = ({ formValues, formHandlers, customFields, ...props }) =>\n\tObject.entries(customFields).map(([key, value]) => {\n\t\tconst extraProps = {\n\t\t\tkey,\n\t\t\tname: key,\n\t\t\tsetState: formHandlers[`handle${capitalize(key)}`],\n\t\t\tstate: formValues[key],\n\t\t\t...value,\n\t\t};\n\n\t\tif (value.type === 'select') {\n\t\t\treturn <CustomSelect {...extraProps} {...props} />;\n\t\t}\n\n\t\tif (value.type === 'text') {\n\t\t\treturn <CustomTextInput {...extraProps} {...props} />;\n\t\t}\n\n\t\treturn null;\n\t});\n\nexport default function CustomFieldsForm({ jsonCustomFields, customFieldsData, setCustomFieldsData, onLoadFields = () => {}, ...props }) {\n\tconst accountsCustomFieldsJson = useSetting('Accounts_CustomFields');\n\n\tconst [customFields] = useState(() => {\n\t\ttry {\n\t\t\treturn jsonCustomFields || JSON.parse(accountsCustomFieldsJson || '{}');\n\t\t} catch {\n\t\t\treturn {};\n\t\t}\n\t});\n\n\tconst hasCustomFields = Boolean(Object.values(customFields).length);\n\tconst defaultFields = useMemo(\n\t\t() =>\n\t\t\tObject.entries(customFields).reduce((data, [key, value]) => {\n\t\t\t\tdata[key] = value.defaultValue ?? '';\n\t\t\t\treturn data;\n\t\t\t}, {}),\n\t\t[customFields],\n\t);\n\n\tconst { values, handlers } = useForm({ ...defaultFields, ...customFieldsData });\n\n\tuseEffect(() => {\n\t\tonLoadFields(hasCustomFields);\n\t\tif (hasCustomFields) {\n\t\t\tsetCustomFieldsData(values);\n\t\t}\n\t}, [hasCustomFields, onLoadFields, setCustomFieldsData, values]);\n\n\tif (!hasCustomFields) {\n\t\treturn null;\n\t}\n\n\treturn <CustomFieldsAssembler formValues={values} formHandlers={handlers} customFields={customFields} {...props} />;\n}\n"]}