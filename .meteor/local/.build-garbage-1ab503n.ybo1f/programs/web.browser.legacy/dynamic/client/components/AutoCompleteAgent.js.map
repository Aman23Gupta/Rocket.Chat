{"version":3,"sources":["meteor://ðŸ’»app/client/components/AutoCompleteAgent.js"],"names":["_slicedToArray","module","link","default","v","PaginatedSelectFiltered","useDebouncedValue","React","memo","useMemo","useState","useRecordList","AsyncStatePhase","useAgentsList","AutoCompleteAgent","props","value","onChange","haveAll","agentsFilter","setAgentsFilter","debouncedAgentsFilter","text","AgentsList","itemsList","loadMoreAgents","loadMoreItems","agentsPhase","phase","agentsItems","items","agentsTotal","itemCount","sortedByName","sort","a","b","usename","LOADING","start","Math","min","exportDefault"],"mappings":"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","file":"dynamic/client/components/AutoCompleteAgent.js","sourcesContent":["import { PaginatedSelectFiltered } from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport React, { memo, useMemo, useState } from 'react';\n\nimport { useRecordList } from '../hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../lib/asyncState';\nimport { useAgentsList } from './Omnichannel/hooks/useAgentsList';\n\nconst AutoCompleteAgent = (props) => {\n\tconst { value, onChange = () => {}, haveAll = false } = props;\n\tconst [agentsFilter, setAgentsFilter] = useState('');\n\n\tconst debouncedAgentsFilter = useDebouncedValue(agentsFilter, 500);\n\n\tconst { itemsList: AgentsList, loadMoreItems: loadMoreAgents } = useAgentsList(\n\t\tuseMemo(() => ({ text: debouncedAgentsFilter, haveAll }), [debouncedAgentsFilter, haveAll]),\n\t);\n\n\tconst { phase: agentsPhase, items: agentsItems, itemCount: agentsTotal } = useRecordList(AgentsList);\n\n\tconst sortedByName = agentsItems.sort((a, b) => {\n\t\tif (a.value === 'all') {\n\t\t\treturn -1;\n\t\t}\n\n\t\tif (a.usename > b.usename) {\n\t\t\treturn 1;\n\t\t}\n\t\tif (a.usename < b.usename) {\n\t\t\treturn -1;\n\t\t}\n\n\t\treturn 0;\n\t});\n\n\treturn (\n\t\t<PaginatedSelectFiltered\n\t\t\tvalue={value}\n\t\t\tonChange={onChange}\n\t\t\tflexShrink={0}\n\t\t\tfilter={agentsFilter}\n\t\t\tsetFilter={setAgentsFilter}\n\t\t\toptions={sortedByName}\n\t\t\tendReached={agentsPhase === AsyncStatePhase.LOADING ? () => {} : (start) => loadMoreAgents(start, Math.min(50, agentsTotal))}\n\t\t/>\n\t);\n};\n\nexport default memo(AutoCompleteAgent);\n"]}