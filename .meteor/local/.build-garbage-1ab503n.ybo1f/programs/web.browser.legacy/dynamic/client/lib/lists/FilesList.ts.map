{"version":3,"sources":["meteor://ðŸ’»app/client/lib/lists/FilesList.ts"],"names":[],"mappings":";;;;;;;;AACA;;AAAS,MAAa,KAAb,CAAmB,oCAAnB,EAAmC;AAAA;AAAA;AAAA;AAAA,CAAnC,EAAmC,CAAnC;;AAAmC;;AAAA;AAAA;AAAA;AAAA;AAAA;AAA5C,OAAO,MAAP,CAAS;AAAA,WAAa,cAAM;AAAA,WAAe,SAAf;AAAgB;AAAnC,CAAT;AAA4C;AAAA;AAAA;AAAA;AAAA;AAAA;;AAU5C,IAAM,mBAAmB,GAAG,UAAC,OAAD,EAAoB,GAApB;AAAA,SAAsE,OAAO,CAAC,GAAR,KAAgB,GAAhB,IAAuB,SAAS,OAAtG;AAAA,CAA5B;;IAEa,S;;;AACZ,qBAA2B,QAA3B,EAAqD;AAAA;;AACpD;AADoD,UAA1B,QAA0B;AAA1B;AAA0B;AAEpD;;;;SAMM,a;AAAA,2BAAc,OAAd,EAAuC;AAC7C,WAAK,QAAL,GAAgB,OAAhB;AACA,WAAK,KAAL;AACA;;;;;SAES,M;AAAA,oBAAO,OAAP,EAAwB;AACjC,UAAQ,GAAR,GAAgB,KAAK,QAArB,CAAQ,GAAR;;AAEA,UAAI,CAAC,mBAAmB,CAAC,OAAD,EAAU,GAAV,CAAxB,EAAwC;AACvC,eAAO,KAAP;AACA;;AAED,aAAO,IAAP;AACA;;;;;SAES,O;AAAA,qBAAQ,CAAR,EAAqB,CAArB,EAAgC;AAAA;;AACzC,aAAO,WAAC,CAAC,CAAC,GAAH,2CAAU,CAAC,CAAC,EAAZ,EAAgB,OAAhB,KAA4B,WAAC,CAAC,CAAC,GAAH,2CAAU,CAAC,CAAC,EAAZ,EAAgB,OAAhB,EAAnC;AACA;;;;;;;SArBD,YAAkB;AACjB,aAAO,KAAK,QAAZ;AACA;;;;EAP6B,W","file":"dynamic/client/lib/lists/FilesList.ts","sourcesContent":["import type { IMessage } from '../../../definition/IMessage';\nimport { MessageList } from './MessageList';\n\ntype FilesMessage = Omit<IMessage, 'rid'> & Required<Pick<IMessage, 'rid'>>;\n\nexport type FilesListOptions = {\n\trid: IMessage['rid'];\n\ttype: string;\n\ttext: string;\n};\n\nconst isFileMessageInRoom = (message: IMessage, rid: IMessage['rid']): message is FilesMessage => message.rid === rid && 'rid' in message;\n\nexport class FilesList extends MessageList {\n\tpublic constructor(private _options: FilesListOptions) {\n\t\tsuper();\n\t}\n\n\tpublic get options(): FilesListOptions {\n\t\treturn this._options;\n\t}\n\n\tpublic updateFilters(options: FilesListOptions): void {\n\t\tthis._options = options;\n\t\tthis.clear();\n\t}\n\n\tprotected filter(message: IMessage): boolean {\n\t\tconst { rid } = this._options;\n\n\t\tif (!isFileMessageInRoom(message, rid)) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tprotected compare(a: IMessage, b: IMessage): number {\n\t\treturn (b.tlm ?? b.ts).getTime() - (a.tlm ?? a.ts).getTime();\n\t}\n}\n"]}