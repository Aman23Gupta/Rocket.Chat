{"version":3,"sources":["meteor://ðŸ’»app/client/hooks/lists/useScrollableRecordList.ts"],"names":[],"mappings":";;;;;;;;AAAA,OAAO,MAAP,CAAS;AAAA,yBAAwB,EAAM,YAAQ;AAAA;AAAA;AAAtC,CAAT;AAA+C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAM/C,IAAM,kBAAkB,GAAG,EAA3B;;AAEO,IAAM,uBAAuB,GAAG,UACtC,UADsC,EAEtC,iBAFsC,EAOnC;AAAA,MAJH,gBAIG,uEAJwB,kBAIxB;AACH,MAAM,aAAa,GAAG,WAAW,CAChC,UAAC,KAAD,EAAkB;AACjB,QAAI,UAAU,CAAC,KAAX,KAAqB,eAAe,CAAC,OAArC,IAAgD,KAAK,GAAG,CAAR,GAAY,UAAU,CAAC,SAA3E,EAAsF;AACrF,gBAAU,CAAC,WAAX,CAAuB;AAAA,eAAM,iBAAiB,CAAC,KAAD,EAAQ,gBAAR,CAAvB;AAAA,OAAvB;AACA;AACD,GAL+B,EAMhC,CAAC,UAAD,EAAa,iBAAb,EAAgC,gBAAhC,CANgC,CAAjC;AASA,WAAS,CAAC,YAAK;AACd,iBAAa,CAAC,CAAD,CAAb;AACA,GAFQ,EAEN,CAAC,aAAD,CAFM,CAAT;AAIA,SAAO;AAAE,iBAAa,EAAb,aAAF;AAAiB,oBAAgB,EAAhB;AAAjB,GAAP;AACA,CAtBM,C","file":"dynamic/client/hooks/lists/useScrollableRecordList.ts","sourcesContent":["import { useCallback, useEffect } from 'react';\n\nimport { IRocketChatRecord } from '../../../definition/IRocketChatRecord';\nimport { AsyncStatePhase } from '../../lib/asyncState';\nimport { RecordList, RecordListBatchChanges } from '../../lib/lists/RecordList';\n\nconst INITIAL_ITEM_COUNT = 25;\n\nexport const useScrollableRecordList = <T extends IRocketChatRecord>(\n\trecordList: RecordList<T>,\n\tfetchBatchChanges: (start: number, end: number) => Promise<RecordListBatchChanges<T>>,\n\tinitialItemCount: number = INITIAL_ITEM_COUNT,\n): {\n\tloadMoreItems: (start: number) => void;\n\tinitialItemCount: number;\n} => {\n\tconst loadMoreItems = useCallback(\n\t\t(start: number) => {\n\t\t\tif (recordList.phase === AsyncStatePhase.LOADING || start + 1 < recordList.itemCount) {\n\t\t\t\trecordList.batchHandle(() => fetchBatchChanges(start, initialItemCount));\n\t\t\t}\n\t\t},\n\t\t[recordList, fetchBatchChanges, initialItemCount],\n\t);\n\n\tuseEffect(() => {\n\t\tloadMoreItems(0);\n\t}, [loadMoreItems]);\n\n\treturn { loadMoreItems, initialItemCount };\n};\n"]}