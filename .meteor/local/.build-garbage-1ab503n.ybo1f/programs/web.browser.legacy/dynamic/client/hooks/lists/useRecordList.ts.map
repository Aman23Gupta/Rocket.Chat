{"version":3,"sources":["meteor://ðŸ’»app/client/hooks/lists/useRecordList.ts"],"names":[],"mappings":";;;;;;;;AAAA;;AAAkB,MAAE,KAAF,CAAY,sCAAZ,EAA0B;AAAA;AAAA;AAAA;AAAA,CAA1B,EAA0B,CAA1B;;AAA0B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAA5C,OAAO,MAAP,CAAS;AAAA,eAAmB,cAAQ;AAAA,WAAQ,aAAR;AAAQ;AAAnC,CAAT;AAA4C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAarC,IAAM,aAAa,GAAG,UAA8B,UAA9B,EAA+E;AAC3G,kBAA0B,QAAQ,CAAqB;AAAA,WAAO;AAC7D,WAAK,EAAE,UAAU,CAAC,KAD2C;AAE7D,WAAK,EAAE,UAAU,CAAC,KAF2C;AAG7D,eAAS,EAAE,UAAU,CAAC,SAHuC;AAI7D,WAAK,EAAE;AAJsD,KAAP;AAAA,GAArB,CAAlC;AAAA;AAAA,MAAO,KAAP;AAAA,MAAc,QAAd;;AAOA,WAAS,CAAC,YAAK;AACd,QAAM,uBAAuB,GAAG,UAAU,CAAC,EAAX,CAAc,UAAd,EAA0B,YAAK;AAC9D,cAAQ,CAAC;AAAA,eAAO;AACf,eAAK,EAAE,UAAU,CAAC,KADH;AAEf,eAAK,EAAE,UAAU,CAAC,KAFH;AAGf,mBAAS,EAAE,UAAU,CAAC,SAHP;AAIf,eAAK,EAAE;AAJQ,SAAP;AAAA,OAAD,CAAR;AAMA,KAP+B,CAAhC;AASA,QAAM,sBAAsB,GAAG,UAAU,CAAC,EAAX,CAAc,SAAd,EAAyB,YAAK;AAC5D,cAAQ,CAAC,UAAC,SAAD;AAAA,eAAgB;AACxB,eAAK,EAAE,UAAU,CAAC,KADM;AAExB,eAAK,EAAE,UAAU,CAAC,KAFM;AAGxB,mBAAS,EAAE,UAAU,CAAC,SAHE;AAIxB,eAAK,EAAE,SAAS,CAAC;AAJO,SAAhB;AAAA,OAAD,CAAR;AAMA,KAP8B,CAA/B;AASA,QAAM,sBAAsB,GAAG,UAAU,CAAC,EAAX,CAAc,SAAd,EAAyB,YAAK;AAC5D,cAAQ,CAAC;AAAA,eAAO;AACf,eAAK,EAAE,UAAU,CAAC,KADH;AAEf,eAAK,EAAE,UAAU,CAAC,KAFH;AAGf,mBAAS,EAAE,UAAU,CAAC,SAHP;AAIf,eAAK,EAAE;AAJQ,SAAP;AAAA,OAAD,CAAR;AAMA,KAP8B,CAA/B;AASA,QAAM,sBAAsB,GAAG,UAAU,CAAC,EAAX,CAAc,SAAd,EAAyB,UAAC,KAAD,EAAU;AACjE,cAAQ,CAAC,UAAC,KAAD;AAAA,+CAAiB,KAAjB;AAAwB,eAAK,EAAL;AAAxB;AAAA,OAAD,CAAR;AACA,KAF8B,CAA/B;AAIA,WAAO,YAAW;AACjB,6BAAuB;AACvB,4BAAsB;AACtB,4BAAsB;AACtB,4BAAsB;AACtB,KALD;AAMA,GAtCQ,EAsCN,CAAC,UAAD,CAtCM,CAAT;AAwCA,SAAO,KAAP;AACA,CAjDM,C","file":"dynamic/client/hooks/lists/useRecordList.ts","sourcesContent":["import { useEffect, useState } from 'react';\n\nimport { IRocketChatRecord } from '../../../definition/IRocketChatRecord';\nimport { AsyncStatePhase } from '../../lib/asyncState';\nimport { RecordList } from '../../lib/lists/RecordList';\n\ntype RecordListValue<T> = {\n\tphase: AsyncStatePhase;\n\titems: T[];\n\titemCount: number;\n\terror: Error | undefined;\n};\n\nexport const useRecordList = <T extends IRocketChatRecord>(recordList: RecordList<T>): RecordListValue<T> => {\n\tconst [state, setState] = useState<RecordListValue<T>>(() => ({\n\t\tphase: recordList.phase,\n\t\titems: recordList.items,\n\t\titemCount: recordList.itemCount,\n\t\terror: undefined,\n\t}));\n\n\tuseEffect(() => {\n\t\tconst disconnectMutatingEvent = recordList.on('mutating', () => {\n\t\t\tsetState(() => ({\n\t\t\t\tphase: recordList.phase,\n\t\t\t\titems: recordList.items,\n\t\t\t\titemCount: recordList.itemCount,\n\t\t\t\terror: undefined,\n\t\t\t}));\n\t\t});\n\n\t\tconst disconnectMutatedEvent = recordList.on('mutated', () => {\n\t\t\tsetState((prevState) => ({\n\t\t\t\tphase: recordList.phase,\n\t\t\t\titems: recordList.items,\n\t\t\t\titemCount: recordList.itemCount,\n\t\t\t\terror: prevState.error,\n\t\t\t}));\n\t\t});\n\n\t\tconst disconnectClearedEvent = recordList.on('cleared', () => {\n\t\t\tsetState(() => ({\n\t\t\t\tphase: recordList.phase,\n\t\t\t\titems: recordList.items,\n\t\t\t\titemCount: recordList.itemCount,\n\t\t\t\terror: undefined,\n\t\t\t}));\n\t\t});\n\n\t\tconst disconnectErroredEvent = recordList.on('errored', (error) => {\n\t\t\tsetState((state) => ({ ...state, error }));\n\t\t});\n\n\t\treturn (): void => {\n\t\t\tdisconnectMutatingEvent();\n\t\t\tdisconnectMutatedEvent();\n\t\t\tdisconnectClearedEvent();\n\t\t\tdisconnectErroredEvent();\n\t\t};\n\t}, [recordList]);\n\n\treturn state;\n};\n"]}