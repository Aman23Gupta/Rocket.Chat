{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/queueList/hooks/useQuery.ts"],"names":[],"mappings":";;;;;;;;AAAA;;AAAkB,MAAM,KAAN,CAAa,sCAAb,EAAc;AAAA;AAAA;AAAA;AAAA,CAAd,EAAc,CAAd;AAAlB,OAAO,MAAP,CAAS;AAAA,UAAS,EAAM,YAAQ;AAAA;AAAA;AAAvB,CAAT;AAAgC;AAAA;AAAA;AAAA;AAAA;AAAA;;AAuBhC,IAAM,OAAO,GAAG,UAAC,OAAD;AAAA,SAA8B,OAAO,KAAK,KAAZ,GAAoB,CAApB,GAAwB,CAAC,CAAvD;AAAA,CAAhB;;AAEO,IAAM,QAAQ,GAAiB;AAAA,MAAG,QAAH,QAAG,QAAH;AAAA,MAAa,MAAb,QAAa,MAAb;AAAA,MAAqB,YAArB,QAAqB,YAArB;AAAA,MAAmC,YAAnC,QAAmC,YAAnC;AAAA,MAAiD,OAAjD,QAAiD,OAAjD;;AAAA;AAAA,MAA6D,MAA7D;AAAA,MAAqE,SAArE;;AAAA,SACrC,OAAO,CAAC,YAAK;AAAA;;AACZ,QAAM,KAAK,GAOP;AACH,UAAI,EAAE,IAAI,CAAC,SAAL,wCACJ,MADI,IACK,OAAO,CAAC,SAAD,CADZ,mBADH;AAIH,WAAK,EAAE,YAJJ;AAKH,YAAM,EAAE;AALL,KAPJ;;AAeA,QAAI,MAAM,KAAK,QAAf,EAAyB;AACxB,WAAK,CAAC,mBAAN,GAA4B,IAA5B;AACA;;AACD,QAAI,QAAJ,EAAc;AACb,WAAK,CAAC,OAAN,GAAgB,QAAhB;AACA;;AACD,QAAI,YAAJ,EAAkB;AACjB,WAAK,CAAC,YAAN,GAAqB,YAArB;AACA;;AAED,WAAO,KAAP;AACA,GA3BM,EA2BJ,CAAC,MAAD,EAAS,SAAT,EAAoB,YAApB,EAAkC,OAAlC,EAA2C,MAA3C,EAAmD,QAAnD,EAA6D,YAA7D,CA3BI,CAD8B;AAAA,CAA/B,C","file":"dynamic/client/views/omnichannel/queueList/hooks/useQuery.ts","sourcesContent":["import { useMemo } from 'react';\n\nimport { ILivechatAgent } from '../../../../../definition/ILivechatAgent';\nimport { ILivechatDepartment } from '../../../../../definition/ILivechatDepartment';\n\ntype useQueryType = (\n\tdebouncedParams: {\n\t\tservedBy: string;\n\t\tstatus: string;\n\t\tdepartmentId: ILivechatDepartment['_id'];\n\t\titemsPerPage: number;\n\t\tcurrent: number;\n\t},\n\tdebouncedSort: [string, 'asc' | 'desc'],\n) => {\n\tagentId?: ILivechatAgent['_id'];\n\tincludeOfflineAgents?: boolean;\n\tdepartmentId?: ILivechatAgent['_id'];\n\toffset: number;\n\tcount: number;\n\tsort: string;\n};\n\nconst sortDir = (sortDir: string): number => (sortDir === 'asc' ? 1 : -1);\n\nexport const useQuery: useQueryType = ({ servedBy, status, departmentId, itemsPerPage, current }, [column, direction]) =>\n\tuseMemo(() => {\n\t\tconst query: {\n\t\t\tagentId?: string;\n\t\t\tincludeOflineAgents?: boolean;\n\t\t\tdepartmentId?: string;\n\t\t\tsort: string;\n\t\t\tcount: number;\n\t\t\toffset: number;\n\t\t} = {\n\t\t\tsort: JSON.stringify({\n\t\t\t\t[column]: sortDir(direction),\n\t\t\t}),\n\t\t\tcount: itemsPerPage,\n\t\t\toffset: current,\n\t\t};\n\n\t\tif (status !== 'online') {\n\t\t\tquery.includeOflineAgents = true;\n\t\t}\n\t\tif (servedBy) {\n\t\t\tquery.agentId = servedBy;\n\t\t}\n\t\tif (departmentId) {\n\t\t\tquery.departmentId = departmentId;\n\t\t}\n\n\t\treturn query;\n\t}, [column, direction, itemsPerPage, current, status, servedBy, departmentId]);\n"]}