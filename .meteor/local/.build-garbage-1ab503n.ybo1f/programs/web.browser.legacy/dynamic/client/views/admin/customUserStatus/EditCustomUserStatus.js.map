{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/customUserStatus/EditCustomUserStatus.js"],"names":["_regeneratorRuntime","module","link","default","v","_slicedToArray","_objectWithoutProperties","export","EditCustomUserStatus","Button","ButtonGroup","TextInput","Field","Select","Icon","React","useCallback","useState","useMemo","useEffect","GenericModal","VerticalBar","useSetModal","useMethod","useToastMessageDispatch","useTranslation","close","onChange","data","props","t","dispatchToastMessage","setModal","_id","previousName","name","previousStatusType","statusType","setName","setStatusType","saveStatus","deleteStatus","hasUnsavedChanges","handleSave","type","message","handleDeleteButtonClick","handleClose","handleDelete","handleCancel","presenceOptions","e","currentTarget","value","exportDefault"],"mappings":"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","file":"dynamic/client/views/admin/customUserStatus/EditCustomUserStatus.js","sourcesContent":["import { Button, ButtonGroup, TextInput, Field, Select, Icon } from '@rocket.chat/fuselage';\nimport React, { useCallback, useState, useMemo, useEffect } from 'react';\n\nimport GenericModal from '../../../components/GenericModal';\nimport VerticalBar from '../../../components/VerticalBar';\nimport { useSetModal } from '../../../contexts/ModalContext';\nimport { useMethod } from '../../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\n\nexport function EditCustomUserStatus({ close, onChange, data, ...props }) {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst setModal = useSetModal();\n\n\tconst { _id, name: previousName, statusType: previousStatusType } = data || {};\n\n\tconst [name, setName] = useState(() => data?.name ?? '');\n\tconst [statusType, setStatusType] = useState(() => data?.statusType ?? '');\n\n\tuseEffect(() => {\n\t\tsetName(previousName || '');\n\t\tsetStatusType(previousStatusType || '');\n\t}, [previousName, previousStatusType, _id]);\n\n\tconst saveStatus = useMethod('insertOrUpdateUserStatus');\n\tconst deleteStatus = useMethod('deleteCustomUserStatus');\n\n\tconst hasUnsavedChanges = useMemo(\n\t\t() => previousName !== name || previousStatusType !== statusType,\n\t\t[name, previousName, previousStatusType, statusType],\n\t);\n\tconst handleSave = useCallback(async () => {\n\t\ttry {\n\t\t\tawait saveStatus({\n\t\t\t\t_id,\n\t\t\t\tpreviousName,\n\t\t\t\tpreviousStatusType,\n\t\t\t\tname,\n\t\t\t\tstatusType,\n\t\t\t});\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: t('Custom_User_Status_Updated_Successfully'),\n\t\t\t});\n\t\t\tonChange();\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t}, [saveStatus, _id, previousName, previousStatusType, name, statusType, dispatchToastMessage, t, onChange]);\n\n\tconst handleDeleteButtonClick = useCallback(() => {\n\t\tconst handleClose = () => {\n\t\t\tsetModal(null);\n\t\t\tclose();\n\t\t\tonChange();\n\t\t};\n\n\t\tconst handleDelete = async () => {\n\t\t\ttry {\n\t\t\t\tawait deleteStatus(_id);\n\t\t\t\tsetModal(() => (\n\t\t\t\t\t<GenericModal variant='success' onClose={handleClose} onConfirm={handleClose}>\n\t\t\t\t\t\t{t('Custom_User_Status_Has_Been_Deleted')}\n\t\t\t\t\t</GenericModal>\n\t\t\t\t));\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\tonChange();\n\t\t\t}\n\t\t};\n\n\t\tconst handleCancel = () => {\n\t\t\tsetModal(null);\n\t\t};\n\n\t\tsetModal(() => (\n\t\t\t<GenericModal variant='danger' onConfirm={handleDelete} onCancel={handleCancel} confirmText={t('Delete')}>\n\t\t\t\t{t('Custom_User_Status_Delete_Warning')}\n\t\t\t</GenericModal>\n\t\t));\n\t}, [_id, close, deleteStatus, dispatchToastMessage, onChange, setModal, t]);\n\n\tconst presenceOptions = [\n\t\t['online', t('Online')],\n\t\t['busy', t('Busy')],\n\t\t['away', t('Away')],\n\t\t['offline', t('Offline')],\n\t];\n\n\treturn (\n\t\t<VerticalBar.ScrollableContent {...props}>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Name')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<TextInput value={name} onChange={(e) => setName(e.currentTarget.value)} placeholder={t('Name')} />\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Presence')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<Select value={statusType} onChange={(value) => setStatusType(value)} placeholder={t('Presence')} options={presenceOptions} />\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<ButtonGroup stretch w='full'>\n\t\t\t\t\t\t<Button onClick={close}>{t('Cancel')}</Button>\n\t\t\t\t\t\t<Button primary onClick={handleSave} disabled={!hasUnsavedChanges}>\n\t\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<ButtonGroup stretch w='full'>\n\t\t\t\t\t\t<Button primary danger onClick={handleDeleteButtonClick}>\n\t\t\t\t\t\t\t<Icon name='trash' mie='x4' />\n\t\t\t\t\t\t\t{t('Delete')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t</VerticalBar.ScrollableContent>\n\t);\n}\n\nexport default EditCustomUserStatus;\n"]}