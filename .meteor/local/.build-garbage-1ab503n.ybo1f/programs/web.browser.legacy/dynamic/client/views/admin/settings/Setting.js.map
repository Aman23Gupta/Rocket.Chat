{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/settings/Setting.js"],"names":["_extends","module","link","default","v","_slicedToArray","_objectSpread","useDebouncedCallback","React","useEffect","useMemo","useState","useCallback","MarkdownText","useEditableSetting","useEditableSettingsDispatch","useSettingStructure","useTranslation","MemoizedSetting","SettingSkeleton","Setting","className","settingId","sectionChanged","setting","persistedSetting","dispatch","update","value","editor","_id","undefined","changed","JSON","stringify","t","setValue","setEditor","onChangeValue","onChangeEditor","onResetButtonClick","packageValue","packageEditor","disabled","disableReset","readonly","type","i18nLabel","i18nDescription","alert","invisible","label","hint","has","callout","__html","hasResetButton","exportDefault","Object","assign","Memoized","Skeleton"],"mappings":"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","file":"dynamic/client/views/admin/settings/Setting.js","sourcesContent":["import { useDebouncedCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useEffect, useMemo, useState, useCallback } from 'react';\n\nimport MarkdownText from '../../../components/MarkdownText';\nimport { useEditableSetting, useEditableSettingsDispatch } from '../../../contexts/EditableSettingsContext';\nimport { useSettingStructure } from '../../../contexts/SettingsContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport MemoizedSetting from './MemoizedSetting';\nimport SettingSkeleton from './SettingSkeleton';\n\nfunction Setting({ className, settingId, sectionChanged }) {\n\tconst setting = useEditableSetting(settingId);\n\n\tconst persistedSetting = useSettingStructure(settingId);\n\tconst dispatch = useEditableSettingsDispatch();\n\n\tconst update = useDebouncedCallback(\n\t\t({ value, editor }) => {\n\t\t\tif (!persistedSetting) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdispatch([\n\t\t\t\t{\n\t\t\t\t\t_id: persistedSetting._id,\n\t\t\t\t\t...(value !== undefined && { value }),\n\t\t\t\t\t...(editor !== undefined && { editor }),\n\t\t\t\t\tchanged:\n\t\t\t\t\t\tJSON.stringify(persistedSetting.value) !== JSON.stringify(value) ||\n\t\t\t\t\t\tJSON.stringify(persistedSetting.editor) !== JSON.stringify(editor),\n\t\t\t\t},\n\t\t\t]);\n\t\t},\n\t\t230,\n\t\t[persistedSetting, dispatch],\n\t);\n\n\tconst t = useTranslation();\n\n\tconst [value, setValue] = useState(setting.value);\n\tconst [editor, setEditor] = useState(setting.editor);\n\n\tuseEffect(() => {\n\t\tsetValue(setting.value);\n\t}, [setting.value]);\n\n\tuseEffect(() => {\n\t\tsetEditor(setting.editor);\n\t}, [setting.editor]);\n\n\tconst onChangeValue = useCallback(\n\t\t(value) => {\n\t\t\tsetValue(value);\n\t\t\tupdate({ value });\n\t\t},\n\t\t[update],\n\t);\n\n\tconst onChangeEditor = useCallback(\n\t\t(editor) => {\n\t\t\tsetEditor(editor);\n\t\t\tupdate({ editor });\n\t\t},\n\t\t[update],\n\t);\n\n\tconst onResetButtonClick = useCallback(() => {\n\t\tsetValue(setting.value);\n\t\tsetEditor(setting.editor);\n\t\tupdate({\n\t\t\tvalue: persistedSetting.packageValue,\n\t\t\teditor: persistedSetting.packageEditor,\n\t\t});\n\t}, [setting.value, setting.editor, update, persistedSetting]);\n\n\tconst { _id, disabled, disableReset, readonly, type, packageEditor, packageValue, i18nLabel, i18nDescription, alert, invisible } =\n\t\tsetting;\n\n\tconst label = (i18nLabel && t(i18nLabel)) || _id || t(_id);\n\tconst hint = useMemo(\n\t\t() => t.has(i18nDescription) && <MarkdownText preserveHtml={true} content={t(i18nDescription)} />,\n\t\t[i18nDescription, t],\n\t);\n\tconst callout = useMemo(() => alert && <span dangerouslySetInnerHTML={{ __html: t(alert) }} />, [alert, t]);\n\tconst hasResetButton =\n\t\t!disableReset &&\n\t\t!readonly &&\n\t\ttype !== 'asset' &&\n\t\t(JSON.stringify(packageEditor) !== JSON.stringify(editor) || JSON.stringify(value) !== JSON.stringify(packageValue)) &&\n\t\t!disabled;\n\n\treturn (\n\t\t<MemoizedSetting\n\t\t\tclassName={className}\n\t\t\ttype={type}\n\t\t\tlabel={label}\n\t\t\thint={hint}\n\t\t\tcallout={callout}\n\t\t\tsectionChanged={sectionChanged}\n\t\t\t{...setting}\n\t\t\tvalue={value}\n\t\t\teditor={editor}\n\t\t\thasResetButton={hasResetButton}\n\t\t\tonChangeValue={onChangeValue}\n\t\t\tonChangeEditor={onChangeEditor}\n\t\t\tonResetButtonClick={onResetButtonClick}\n\t\t\tinvisible={invisible}\n\t\t/>\n\t);\n}\n\nexport default Object.assign(Setting, {\n\tMemoized: MemoizedSetting,\n\tSkeleton: SettingSkeleton,\n});\n"]}