{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/Threads/Row.tsx"],"names":[],"mappings":";;;;;;;;AAAA,WAAO,IAAP;AAAc,MAAU,CAAc,IAAxB,CAAwB,OAAxB,EAAqC;AAAC;AAAA;AAAA,GAAD;AAAC;AAAA;AAAA;AAAD,CAArC,EAAsC,CAAtC;AAAsC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAWpD,IAAM,MAAM,gBAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,iBAAD,CAAd,CAAT,CAAnB;;AAEA,IAAM,kBAAkB,GAAG,UAAC,CAAD,EAA6B,QAA7B,EAAuD;AACjF,GAAC,CAAC,cAAF;AACA,GAAC,CAAC,eAAF;AACA,MAAQ,SAAR,GAAsB,CAAC,CAAC,aAAF,CAAgB,OAAtC,CAAQ,SAAR;AAEA,WAAS,IACR,qBAAqB,CAAC,CAAC,CAAC,IAAD,EAAO,MAAP,EAAe,QAAf,CAAwB,SAAxB,CAAD,GAAsC,eAAtC,GAAwD,iBAAzD,EAA4E;AAChG,OAAG,EAAE;AAD2F,GAA5E,CADtB;AAIA,CATD;;AAqBA,IAAM,GAAG,gBAAuB,IAAI;AAAC,WAAS,GAAT,OAAwF;AAAA,QAAzE,MAAyE,QAAzE,MAAyE;AAAA,QAAjE,aAAiE,QAAjE,aAAiE;AAAA,QAAlD,MAAkD,QAAlD,MAAkD;AAAA,QAA1C,UAA0C,QAA1C,UAA0C;AAAA,QAA9B,WAA8B,QAA9B,WAA8B;AAAA,QAAjB,MAAiB,QAAjB,MAAiB;AAAA,QAAT,OAAS,QAAT,OAAS;AAC5H,QAAM,CAAC,GAAG,cAAc,EAAxB;AACA,QAAM,UAAU,GAAG,UAAU,EAA7B;AAEA,QAAM,GAAG,GAAG,sBAAsB,CAAC,MAAD,CAAlC;AAEA,yBAAqC,MAAM,CAAC,CAA5C,CAAQ,IAAR;AAAA,QAAQ,IAAR,+BAAe,MAAM,CAAC,CAAP,CAAS,QAAxB;AAEA,wBACC,oBAAC,MAAD;AACC,YAAM,EAAE,MAAM,CAAC,MADhB;AAEC,SAAG,EAAE,MAAM,CAAC,GAFb;AAGC,QAAE,EAAE,MAAM,CAAC,EAHZ;AAIC,OAAC,EAAE,MAAM,CAAC,CAJX;AAKC,aAAO,EAAE,MAAM,CAAC,OALjB;AAMC,UAAI,EAAE,aAAa,GAAG,IAAH,GAAU,MAAM,CAAC,CAAP,CAAS,QANvC;AAOC,cAAQ,EAAE,MAAM,CAAC,CAAP,CAAS,QAPpB;AAQC,YAAM,EAAE,MAAM,CAAC,QAAP,CAAgB,MAAM,CAAC,GAAvB,CART;AASC,aAAO,EAAE,UAAU,CAAC,QAAX,CAAoB,MAAM,CAAC,GAA3B,CATV;AAUC,SAAG,EAAE,WAAW,CAAC,QAAZ,CAAqB,MAAM,CAAC,GAA5B,CAVN;AAWC,eAAS,EAAE,MAAM,CAAC,OAAP,IAAkB,MAAM,CAAC,OAAP,CAAe,QAAf,CAAwB,MAAxB,CAX9B;AAYC,iBAAS,MAAM,CAAC,GAZjB;AAaC,SAAG,EAAE,GAbN;AAcC,OAAC,EAAE,CAdJ;AAeC,gBAAU,EAAE,UAfb;AAgBC,wBAAkB,EAAE,UAAC,CAAD;AAAA,eAAyC,kBAAkB,CAAC,CAAD,EAAI,MAAM,CAAC,GAAX,CAA3D;AAAA,OAhBrB;AAiBC,aAAO,EAAE;AAjBV,MADD;AAqBA;;AA7BmC,SAAU,GAAV;AAAA,IAApC;AAlCA,OAAO,aAAP,CAiEe,GAjEf,E","file":"dynamic/client/views/room/contextualBar/Threads/Row.tsx","sourcesContent":["import React, { FC, memo, MouseEvent } from 'react';\n\nimport { IMessage } from '../../../../../definition/IMessage';\nimport { useTranslation } from '../../../../contexts/TranslationContext';\nimport { useTimeAgo } from '../../../../hooks/useTimeAgo';\nimport { clickableItem } from '../../../../lib/clickableItem';\nimport { callWithErrorHandling } from '../../../../lib/utils/callWithErrorHandling';\nimport ThreadListMessage from './components/Message';\nimport { mapProps } from './mapProps';\nimport { normalizeThreadMessage } from './normalizeThreadMessage';\n\nconst Thread = memo(mapProps(clickableItem(ThreadListMessage)));\n\nconst handleFollowButton = (e: MouseEvent<HTMLElement>, threadId: string): void => {\n\te.preventDefault();\n\te.stopPropagation();\n\tconst { following } = e.currentTarget.dataset;\n\n\tfollowing &&\n\t\tcallWithErrorHandling(![true, 'true'].includes(following) ? 'followMessage' : 'unfollowMessage', {\n\t\t\tmid: threadId,\n\t\t});\n};\n\ntype ThreadRowProps = {\n\tthread: IMessage;\n\tshowRealNames: boolean;\n\tunread: string[];\n\tunreadUser: string[];\n\tunreadGroup: string[];\n\tuserId: string;\n\tonClick: (threadId: string) => void;\n};\n\nconst Row: FC<ThreadRowProps> = memo(function Row({ thread, showRealNames, unread, unreadUser, unreadGroup, userId, onClick }) {\n\tconst t = useTranslation();\n\tconst formatDate = useTimeAgo();\n\n\tconst msg = normalizeThreadMessage(thread);\n\n\tconst { name = thread.u.username } = thread.u;\n\n\treturn (\n\t\t<Thread\n\t\t\ttcount={thread.tcount}\n\t\t\ttlm={thread.tlm}\n\t\t\tts={thread.ts}\n\t\t\tu={thread.u}\n\t\t\treplies={thread.replies}\n\t\t\tname={showRealNames ? name : thread.u.username}\n\t\t\tusername={thread.u.username}\n\t\t\tunread={unread.includes(thread._id)}\n\t\t\tmention={unreadUser.includes(thread._id)}\n\t\t\tall={unreadGroup.includes(thread._id)}\n\t\t\tfollowing={thread.replies && thread.replies.includes(userId)}\n\t\t\tdata-id={thread._id}\n\t\t\tmsg={msg}\n\t\t\tt={t}\n\t\t\tformatDate={formatDate}\n\t\t\thandleFollowButton={(e: MouseEvent<HTMLElement>): unknown => handleFollowButton(e, thread._id)}\n\t\t\tonClick={onClick}\n\t\t/>\n\t);\n});\n\nexport default Row;\n"]}