{"version":3,"sources":["meteor://ðŸ’»app/client/views/teams/ConvertToChannelModal/BaseConvertToChannelModal.tsx"],"names":[],"mappings":"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","file":"dynamic/client/views/teams/ConvertToChannelModal/BaseConvertToChannelModal.tsx","sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { FC, useState, useCallback } from 'react';\n\nimport { IRoom } from '../../../../definition/IRoom';\nimport { Serialized } from '../../../../definition/Serialized';\nimport FirstStep from './ModalSteps/FirstStep';\nimport SecondStep from './ModalSteps/SecondStep';\n\nconst STEPS = {\n\tLIST_ROOMS: 'LIST_ROOMS',\n\tCONFIRM_CONVERT: 'CONFIRM_CONVERT',\n};\n\ntype BaseConvertToChannelModalProps = {\n\tonClose: () => void;\n\tonCancel: () => void;\n\tonConfirm: () => Serialized<IRoom>[];\n\tcurrentStep?: string;\n\trooms?: (Serialized<IRoom> & { isLastOwner?: string })[];\n};\n\nconst BaseConvertToChannelModal: FC<BaseConvertToChannelModalProps> = ({\n\tonClose,\n\tonCancel,\n\tonConfirm,\n\trooms,\n\tcurrentStep = rooms?.length === 0 ? STEPS.CONFIRM_CONVERT : STEPS.LIST_ROOMS,\n}) => {\n\tconst [step, setStep] = useState(currentStep);\n\tconst [selectedRooms, setSelectedRooms] = useState<{ [key: string]: Serialized<IRoom> }>({});\n\n\tconst onContinue = useMutableCallback(() => setStep(STEPS.CONFIRM_CONVERT));\n\tconst onReturn = useMutableCallback(() => setStep(STEPS.LIST_ROOMS));\n\n\tconst eligibleRooms = rooms;\n\n\tconst onChangeRoomSelection = useCallback((room) => {\n\t\tsetSelectedRooms((selectedRooms) => {\n\t\t\tif (selectedRooms[room._id]) {\n\t\t\t\tdelete selectedRooms[room._id];\n\t\t\t\treturn { ...selectedRooms };\n\t\t\t}\n\t\t\treturn { ...selectedRooms, [room._id]: room };\n\t\t});\n\t}, []);\n\n\tconst onToggleAllRooms = useMutableCallback(() => {\n\t\tif (Object.values(selectedRooms).filter(Boolean).length === 0 && eligibleRooms) {\n\t\t\treturn setSelectedRooms(Object.fromEntries(eligibleRooms.map((room) => [room._id, room])));\n\t\t}\n\t\tsetSelectedRooms({});\n\t});\n\n\tif (step === STEPS.CONFIRM_CONVERT) {\n\t\treturn (\n\t\t\t<SecondStep\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tonClose={onClose}\n\t\t\t\tonCancel={rooms && rooms.length > 0 ? onReturn : onCancel}\n\t\t\t\tdeletedRooms={selectedRooms}\n\t\t\t\trooms={rooms}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<FirstStep\n\t\t\tonConfirm={onContinue}\n\t\t\tonClose={onClose}\n\t\t\tonCancel={onCancel}\n\t\t\trooms={rooms}\n\t\t\tselectedRooms={selectedRooms}\n\t\t\tonToggleAllRooms={onToggleAllRooms}\n\t\t\tonChangeRoomSelection={onChangeRoomSelection}\n\t\t\teligibleRoomsLength={eligibleRooms?.length}\n\t\t/>\n\t);\n};\n\nexport default BaseConvertToChannelModal;\n"]}