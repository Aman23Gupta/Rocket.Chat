{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/users/UsersTable.js"],"names":["_extends","module","link","default","v","_slicedToArray","_objectWithoutProperties","useMediaQuery","React","useCallback","FilterByText","GenericTable","useRoute","useTranslation","UserRow","UsersTable","params","onChangeParams","sort","onChangeSort","props","t","usersRoute","onClick","username","push","context","id","onHeaderClick","preparedSort","sortBy","sortDirection","mediaQuery","users","total","onChange","_id","exportDefault"],"mappings":"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","file":"dynamic/client/views/admin/users/UsersTable.js","sourcesContent":["import { useMediaQuery } from '@rocket.chat/fuselage-hooks';\nimport React, { useCallback } from 'react';\n\nimport FilterByText from '../../../components/FilterByText';\nimport GenericTable from '../../../components/GenericTable';\nimport { useRoute } from '../../../contexts/RouterContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport UserRow from './UserRow';\n\nfunction UsersTable({ params, onChangeParams, sort, onChangeSort, ...props }) {\n\tconst t = useTranslation();\n\n\tconst usersRoute = useRoute('admin-users');\n\n\tconst onClick = useCallback(\n\t\t(username) => () =>\n\t\t\tusersRoute.push({\n\t\t\t\tcontext: 'info',\n\t\t\t\tid: username,\n\t\t\t}),\n\t\t[usersRoute],\n\t);\n\n\tconst onHeaderClick = useCallback(\n\t\t(id) => {\n\t\t\tconst preparedSort = [];\n\n\t\t\tconst [[sortBy, sortDirection]] = sort;\n\n\t\t\tif (sortBy === id) {\n\t\t\t\tpreparedSort.push([id, sortDirection === 'asc' ? 'desc' : 'asc']);\n\t\t\t} else {\n\t\t\t\tpreparedSort.push([id, 'asc']);\n\t\t\t}\n\n\t\t\t//\n\t\t\t// Special cases\n\n\t\t\t// If the sortable field is `name`, we should also add `usernames`\n\t\t\tif (id === 'name') {\n\t\t\t\tpreparedSort.push(['usernames', sortDirection]);\n\t\t\t}\n\n\t\t\t// If the sortable field is `name`, we should also add `usernames`\n\t\t\tif (id === 'status') {\n\t\t\t\tpreparedSort.push(['active', sortDirection === 'asc' ? 'desc' : 'asc']);\n\t\t\t}\n\n\t\t\tonChangeSort(preparedSort);\n\t\t},\n\t\t[onChangeSort, sort],\n\t);\n\n\tconst mediaQuery = useMediaQuery('(min-width: 1024px)');\n\n\treturn (\n\t\t<GenericTable\n\t\t\theader={\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable.HeaderCell\n\t\t\t\t\t\tkey={'name'}\n\t\t\t\t\t\tdirection={sort[0][1]}\n\t\t\t\t\t\tactive={sort[0][0] === 'name'}\n\t\t\t\t\t\tonClick={onHeaderClick}\n\t\t\t\t\t\tsort='name'\n\t\t\t\t\t\tw='x200'\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('Name')}\n\t\t\t\t\t</GenericTable.HeaderCell>\n\t\t\t\t\t{mediaQuery && (\n\t\t\t\t\t\t<GenericTable.HeaderCell\n\t\t\t\t\t\t\tkey={'username'}\n\t\t\t\t\t\t\tdirection={sort[0][1]}\n\t\t\t\t\t\t\tactive={sort[0][0] === 'username'}\n\t\t\t\t\t\t\tonClick={onHeaderClick}\n\t\t\t\t\t\t\tsort='username'\n\t\t\t\t\t\t\tw='x140'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('Username')}\n\t\t\t\t\t\t</GenericTable.HeaderCell>\n\t\t\t\t\t)}\n\t\t\t\t\t<GenericTable.HeaderCell\n\t\t\t\t\t\tkey={'email'}\n\t\t\t\t\t\tdirection={sort[0][1]}\n\t\t\t\t\t\tactive={sort[0][0] === 'emails.adress'}\n\t\t\t\t\t\tonClick={onHeaderClick}\n\t\t\t\t\t\tsort='emails.address'\n\t\t\t\t\t\tw='x120'\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('Email')}\n\t\t\t\t\t</GenericTable.HeaderCell>\n\t\t\t\t\t{mediaQuery && (\n\t\t\t\t\t\t<GenericTable.HeaderCell\n\t\t\t\t\t\t\tkey={'roles'}\n\t\t\t\t\t\t\tdirection={sort[0][1]}\n\t\t\t\t\t\t\tactive={sort[0][0] === 'roles'}\n\t\t\t\t\t\t\tonClick={onHeaderClick}\n\t\t\t\t\t\t\tsort='roles'\n\t\t\t\t\t\t\tw='x120'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('Roles')}\n\t\t\t\t\t\t</GenericTable.HeaderCell>\n\t\t\t\t\t)}\n\t\t\t\t\t<GenericTable.HeaderCell\n\t\t\t\t\t\tkey={'status'}\n\t\t\t\t\t\tdirection={sort[0][1]}\n\t\t\t\t\t\tactive={sort[0][0] === 'status'}\n\t\t\t\t\t\tonClick={onHeaderClick}\n\t\t\t\t\t\tsort='status'\n\t\t\t\t\t\tw='x100'\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('Status')}\n\t\t\t\t\t</GenericTable.HeaderCell>\n\t\t\t\t</>\n\t\t\t}\n\t\t\tresults={props.users}\n\t\t\ttotal={props.total}\n\t\t\tsetParams={onChangeParams}\n\t\t\tparams={params}\n\t\t\trenderFilter={({ onChange, ...props }) => <FilterByText placeholder={t('Search_Users')} onChange={onChange} {...props} />}\n\t\t>\n\t\t\t{(props) => <UserRow key={props._id} onClick={onClick} mediaQuery={mediaQuery} {...props} />}\n\t\t</GenericTable>\n\t);\n}\n\nexport default UsersTable;\n"]}