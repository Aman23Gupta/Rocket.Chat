{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/hooks/useAppsContextualBar.ts"],"names":[],"mappings":";;;;;;;;AACA;;AAAoB,MAAU,KAAV,CAAgB,4BAAhB,EAAwB;AAAA;AAAA;AAAA;AAAA,CAAxB,EAAwB,CAAxB;;AAAwB;;AAAA;AAAA;AAAA;AAAA;AAAA;AAA5C,OAAO,MAAP,CAAS;AAAA,sBAAqB,EAAM,YAAQ;AAAA;AAAA;AAAnC,CAAT;AAA4C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAerC,IAAM,oBAAoB,GAAG,YAAwC;AAC3E,yBAAmB,eAAe,EAAlC;AAAA;AAAA,MAAS,MAAT;;AACA,kBAA8B,QAAQ,EAAtC;AAAA;AAAA,MAAO,OAAP;AAAA,MAAgB,UAAhB;;AACA,mBAA8B,QAAQ,EAAtC;AAAA;AAAA,MAAO,OAAP;AAAA,MAAgB,UAAhB;;AAEA,iBAAwB,OAAO,EAA/B;AAAA,MAAa,MAAb,YAAQ,GAAR;;AAEA,MAAM,MAAM,GAAG,MAAH,aAAG,MAAH,uBAAG,MAAM,CAAE,OAAvB;AAEA,WAAS,CAAC,YAAK;AACd,aAAe,UAAf,CAA0B,KAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iDACmB,IAAI,CAAC,MAAL,CAAY,KAAZ,CADnB;;AAAA;AACO,mBADP;AAEC,0BAAU,CAAC,GAAD,CAAV;;AAFD;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAKA,QAAI,MAAJ,EAAY;AACX,gBAAU,CAAC,iCAAiC,CAAC,MAAD,CAAlC,CAAV;AACA;;AAED,QAAI,OAAJ,aAAI,OAAJ,eAAI,OAAO,CAAE,KAAb,EAAoB;AACnB,gBAAU,CAAC,OAAO,CAAC,KAAT,CAAV;AACA;;AAED,WAAO,YAAW;AACjB,gBAAU,CAAC,SAAD,CAAV;AACA,gBAAU,CAAC,SAAD,CAAV;AACA,KAHD;AAIA,GAlBQ,EAkBN,CAAC,MAAD,EAAS,OAAT,aAAS,OAAT,uBAAS,OAAO,CAAE,KAAlB,CAlBM,CAAT;;AAoBA,MAAI,MAAM,IAAI,OAAV,IAAqB,OAAzB,EAAkC;AACjC,WAAO;AACN,YAAM,EAAN,MADM;AAEN,YAAM,EAAN,MAFM;AAGN,aAAO,EAAP,OAHM;AAIN,aAAO,EAAP;AAJM,KAAP;AAMA;;AAED,SAAO,SAAP;AACA,CAvCM,C","file":"dynamic/client/views/room/hooks/useAppsContextualBar.ts","sourcesContent":["import { IUIKitContextualBarInteraction } from '@rocket.chat/apps-engine/definition/uikit';\nimport { useEffect, useState } from 'react';\n\nimport { Apps } from '../../../../app/apps/client/orchestrator';\nimport { getUserInteractionPayloadByViewId } from '../../../../app/ui-message/client/ActionManager';\nimport { useCurrentRoute } from '../../../contexts/RouterContext';\nimport { App } from '../../admin/apps/types';\nimport { useRoom } from '../contexts/RoomContext';\n\ntype AppsContextualBarData = {\n\tviewId: string;\n\troomId: string;\n\tpayload: IUIKitContextualBarInteraction;\n\tappInfo: App;\n};\n\nexport const useAppsContextualBar = (): AppsContextualBarData | undefined => {\n\tconst [, params] = useCurrentRoute();\n\tconst [payload, setPayload] = useState<IUIKitContextualBarInteraction>();\n\tconst [appInfo, setAppInfo] = useState<App>();\n\n\tconst { _id: roomId } = useRoom();\n\n\tconst viewId = params?.context;\n\n\tuseEffect(() => {\n\t\tasync function getAppData(appId: string): Promise<void> {\n\t\t\tconst app = await Apps.getApp(appId);\n\t\t\tsetAppInfo(app);\n\t\t}\n\n\t\tif (viewId) {\n\t\t\tsetPayload(getUserInteractionPayloadByViewId(viewId) as IUIKitContextualBarInteraction);\n\t\t}\n\n\t\tif (payload?.appId) {\n\t\t\tgetAppData(payload.appId);\n\t\t}\n\n\t\treturn (): void => {\n\t\t\tsetPayload(undefined);\n\t\t\tsetAppInfo(undefined);\n\t\t};\n\t}, [viewId, payload?.appId]);\n\n\tif (viewId && payload && appInfo) {\n\t\treturn {\n\t\t\tviewId,\n\t\t\troomId,\n\t\t\tpayload,\n\t\t\tappInfo,\n\t\t};\n\t}\n\n\treturn undefined;\n};\n"]}