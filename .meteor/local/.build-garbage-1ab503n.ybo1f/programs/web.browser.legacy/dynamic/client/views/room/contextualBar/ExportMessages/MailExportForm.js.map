{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/ExportMessages/MailExportForm.js"],"names":["_regeneratorRuntime","module","link","default","v","_toConsumableArray","_slicedToArray","_taggedTemplateLiteralLoose","css","Field","TextInput","ButtonGroup","Button","Box","Icon","Callout","FieldGroup","useMutableCallback","React","useState","useEffect","roomTypes","validateEmail","UserAutoCompleteMultiple","useEndpoint","useToastMessageDispatch","useTranslation","useForm","useUserRoom","clickable","MailExportForm","onCancel","rid","t","room","roomName","getRoomName","selectedMessages","setSelected","errorMessage","setErrorMessage","dateFrom","dateTo","toUsers","additionalEmails","subject","values","handlers","dispatchToastMessage","reset","$","removeClass","$root","addClass","handler","id","classList","contains","remove","filter","message","add","concat","on","off","handleToUsers","handleAdditionalEmails","handleSubject","onChangeUsers","value","action","includes","current","roomsExport","handleSubmit","length","type","toEmails","split","messages","exportDefault"],"mappings":";;;;;;;;;;AAAA,IAAIA,mBAAJ;;AAAwBC,MAAM,CAACC,IAAP,CAAY,4BAAZ,EAAyC;AAACC,SAAO,EAAC,UAASC,CAAT,EAAW;AAACJ,uBAAmB,GAACI,CAApB;AAAsB;AAA3C,CAAzC,EAAsF,CAAtF;;AAAyF,IAAIC,kBAAJ;;AAAuBJ,MAAM,CAACC,IAAP,CAAY,0CAAZ,EAAuD;AAACC,SAAO,EAAC,UAASC,CAAT,EAAW;AAACC,sBAAkB,GAACD,CAAnB;AAAqB;AAA1C,CAAvD,EAAmG,CAAnG;;AAAsG,IAAIE,cAAJ;;AAAmBL,MAAM,CAACC,IAAP,CAAY,sCAAZ,EAAmD;AAACC,SAAO,EAAC,UAASC,CAAT,EAAW;AAACE,kBAAc,GAACF,CAAf;AAAiB;AAAtC,CAAnD,EAA2F,CAA3F;;AAA8F,IAAIG,2BAAJ;;AAAgCN,MAAM,CAACC,IAAP,CAAY,mDAAZ,EAAgE;AAACC,SAAO,EAAC,UAASC,CAAT,EAAW;AAACG,+BAA2B,GAACH,CAA5B;AAA8B;AAAnD,CAAhE,EAAqH,CAArH;AAA/X,IAAII,GAAJ;AAAQP,MAAM,CAACC,IAAP,CAAY,wBAAZ,EAAqC;AAACM,KAAG,EAAC,UAASJ,CAAT,EAAW;AAACI,OAAG,GAACJ,CAAJ;AAAM;AAAvB,CAArC,EAA8D,CAA9D;AAAiE,IAAIK,KAAJ,EAAUC,SAAV,EAAoBC,WAApB,EAAgCC,MAAhC,EAAuCC,GAAvC,EAA2CC,IAA3C,EAAgDC,OAAhD,EAAwDC,UAAxD;AAAmEf,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAoC;AAACO,OAAK,EAAC,UAASL,CAAT,EAAW;AAACK,SAAK,GAACL,CAAN;AAAQ,GAA3B;AAA4BM,WAAS,EAAC,UAASN,CAAT,EAAW;AAACM,aAAS,GAACN,CAAV;AAAY,GAA9D;AAA+DO,aAAW,EAAC,UAASP,CAAT,EAAW;AAACO,eAAW,GAACP,CAAZ;AAAc,GAArG;AAAsGQ,QAAM,EAAC,UAASR,CAAT,EAAW;AAACQ,UAAM,GAACR,CAAP;AAAS,GAAlI;AAAmIS,KAAG,EAAC,UAAST,CAAT,EAAW;AAACS,OAAG,GAACT,CAAJ;AAAM,GAAzJ;AAA0JU,MAAI,EAAC,UAASV,CAAT,EAAW;AAACU,QAAI,GAACV,CAAL;AAAO,GAAlL;AAAmLW,SAAO,EAAC,UAASX,CAAT,EAAW;AAACW,WAAO,GAACX,CAAR;AAAU,GAAjN;AAAkNY,YAAU,EAAC,UAASZ,CAAT,EAAW;AAACY,cAAU,GAACZ,CAAX;AAAa;AAAtP,CAApC,EAA4R,CAA5R;AAA+R,IAAIa,kBAAJ;AAAuBhB,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAACe,oBAAkB,EAAC,UAASb,CAAT,EAAW;AAACa,sBAAkB,GAACb,CAAnB;AAAqB;AAArD,CAA1C,EAAiG,CAAjG;AAAoG,IAAIc,KAAJ,EAAUC,QAAV,EAAmBC,SAAnB;AAA6BnB,MAAM,CAACC,IAAP,CAAY,OAAZ,EAAoB;AAAC,aAAQ,UAASE,CAAT,EAAW;AAACc,SAAK,GAACd,CAAN;AAAQ,GAA7B;AAA8Be,UAAQ,EAAC,UAASf,CAAT,EAAW;AAACe,YAAQ,GAACf,CAAT;AAAW,GAA9D;AAA+DgB,WAAS,EAAC,UAAShB,CAAT,EAAW;AAACgB,aAAS,GAAChB,CAAV;AAAY;AAAjG,CAApB,EAAuH,CAAvH;AAA0H,IAAIiB,SAAJ;AAAcpB,MAAM,CAACC,IAAP,CAAY,iCAAZ,EAA8C;AAACmB,WAAS,EAAC,UAASjB,CAAT,EAAW;AAACiB,aAAS,GAACjB,CAAV;AAAY;AAAnC,CAA9C,EAAmF,CAAnF;AAAsF,IAAIkB,aAAJ;AAAkBrB,MAAM,CAACC,IAAP,CAAY,mCAAZ,EAAgD;AAACoB,eAAa,EAAC,UAASlB,CAAT,EAAW;AAACkB,iBAAa,GAAClB,CAAd;AAAgB;AAA3C,CAAhD,EAA6F,CAA7F;AAAgG,IAAImB,wBAAJ;AAA6BtB,MAAM,CAACC,IAAP,CAAY,iDAAZ,EAA8D;AAAC,aAAQ,UAASE,CAAT,EAAW;AAACmB,4BAAwB,GAACnB,CAAzB;AAA2B;AAAhD,CAA9D,EAAgH,CAAhH;AAAmH,IAAIoB,WAAJ;AAAgBvB,MAAM,CAACC,IAAP,CAAY,oCAAZ,EAAiD;AAACsB,aAAW,EAAC,UAASpB,CAAT,EAAW;AAACoB,eAAW,GAACpB,CAAZ;AAAc;AAAvC,CAAjD,EAA0F,CAA1F;AAA6F,IAAIqB,uBAAJ;AAA4BxB,MAAM,CAACC,IAAP,CAAY,2CAAZ,EAAwD;AAACuB,yBAAuB,EAAC,UAASrB,CAAT,EAAW;AAACqB,2BAAuB,GAACrB,CAAxB;AAA0B;AAA/D,CAAxD,EAAyH,CAAzH;AAA4H,IAAIsB,cAAJ;AAAmBzB,MAAM,CAACC,IAAP,CAAY,yCAAZ,EAAsD;AAACwB,gBAAc,EAAC,UAAStB,CAAT,EAAW;AAACsB,kBAAc,GAACtB,CAAf;AAAiB;AAA7C,CAAtD,EAAqG,CAArG;AAAwG,IAAIuB,OAAJ;AAAY1B,MAAM,CAACC,IAAP,CAAY,2BAAZ,EAAwC;AAACyB,SAAO,EAAC,UAASvB,CAAT,EAAW;AAACuB,WAAO,GAACvB,CAAR;AAAU;AAA/B,CAAxC,EAAyE,EAAzE;AAA6E,IAAIwB,WAAJ;AAAgB3B,MAAM,CAACC,IAAP,CAAY,yBAAZ,EAAsC;AAAC0B,aAAW,EAAC,UAASxB,CAAT,EAAW;AAACwB,eAAW,GAACxB,CAAZ;AAAc;AAAvC,CAAtC,EAA+E,EAA/E;AAc5gD,IAAMyB,SAAS,GAAGrB,GAAH,gGAAf;;AAIA,IAAMsB,cAAc,GAAG,gBAAuB;AAAA,MAApBC,QAAoB,QAApBA,QAAoB;AAAA,MAAVC,GAAU,QAAVA,GAAU;AAC7C,MAAMC,CAAC,GAAGP,cAAc,EAAxB;AAEA,MAAMQ,IAAI,GAAGN,WAAW,CAACI,GAAD,CAAxB;AACA,MAAMG,QAAQ,GAAGD,IAAI,IAAIA,IAAI,CAACD,CAAb,IAAkBZ,SAAS,CAACe,WAAV,CAAsBF,IAAI,CAACD,CAA3B,EAA8BC,IAA9B,CAAnC;;AAEA,kBAAwCf,QAAQ,CAAC,EAAD,CAAhD;AAAA;AAAA,MAAOkB,gBAAP;AAAA,MAAyBC,WAAzB;;AAEA,mBAAwCnB,QAAQ,EAAhD;AAAA;AAAA,MAAOoB,YAAP;AAAA,MAAqBC,eAArB;;AAEA,iBAA6Bb,OAAO,CAAC;AACpCc,YAAQ,EAAE,EAD0B;AAEpCC,UAAM,EAAE,EAF4B;AAGpCC,WAAO,EAAE,EAH2B;AAIpCC,oBAAgB,EAAE,EAJkB;AAKpCC,WAAO,EAAEZ,CAAC,CAAC,uBAAD,EAA0BE,QAA1B;AAL0B,GAAD,CAApC;AAAA,MAAQW,MAAR,YAAQA,MAAR;AAAA,MAAgBC,QAAhB,YAAgBA,QAAhB;;AAQA,MAAMC,oBAAoB,GAAGvB,uBAAuB,EAApD;AAEA,MAAQkB,OAAR,GAA+CG,MAA/C,CAAQH,OAAR;AAAA,MAAiBC,gBAAjB,GAA+CE,MAA/C,CAAiBF,gBAAjB;AAAA,MAAmCC,OAAnC,GAA+CC,MAA/C,CAAmCD,OAAnC;AAEA,MAAMI,KAAK,GAAGhC,kBAAkB,CAAC,YAAM;AACtCqB,eAAW,CAAC,EAAD,CAAX;AACAY,KAAC,CAAC,wBAAD,EAA2BA,CAAC,mBAAiBlB,GAAjB,CAA5B,CAAD,CAAsDmB,WAAtD,CAAkE,UAAlE;AACA,GAH+B,CAAhC;AAKA/B,WAAS,CAAC,YAAM;AACf,QAAMgC,KAAK,GAAGF,CAAC,mBAAiBlB,GAAjB,CAAf;AACAkB,KAAC,CAAC,eAAD,EAAkBE,KAAlB,CAAD,CAA0BC,QAA1B,CAAmC,YAAnC;;AAEA,QAAMC,OAAO,GAAG,YAAY;AAC3B,UAAQC,EAAR,GAAe,IAAf,CAAQA,EAAR;;AAEA,UAAI,KAAKC,SAAL,CAAeC,QAAf,CAAwB,UAAxB,CAAJ,EAAyC;AACxC,aAAKD,SAAL,CAAeE,MAAf,CAAsB,UAAtB;AACApB,mBAAW,CAAC,UAACD,gBAAD;AAAA,iBAAsBA,gBAAgB,CAACsB,MAAjB,CAAwB,UAACC,OAAD;AAAA,mBAAaA,OAAO,KAAKL,EAAzB;AAAA,WAAxB,CAAtB;AAAA,SAAD,CAAX;AACA,OAHD,MAGO;AACN,aAAKC,SAAL,CAAeK,GAAf,CAAmB,UAAnB;AACAvB,mBAAW,CAAC,UAACD,gBAAD;AAAA,iBAAsBA,gBAAgB,CAACyB,MAAjB,CAAwBP,EAAxB,CAAtB;AAAA,SAAD,CAAX;AACA;AACD,KAVD;;AAWAL,KAAC,CAAC,wBAAD,EAA2BE,KAA3B,CAAD,CAAmCW,EAAnC,CAAsC,OAAtC,EAA+CT,OAA/C;AAEA,WAAO,YAAM;AACZJ,OAAC,CAAC,eAAD,EAAkBE,KAAlB,CAAD,CAA0BD,WAA1B,CAAsC,YAAtC;AACAD,OAAC,CAAC,wBAAD,EAA2BE,KAA3B,CAAD,CAAmCY,GAAnC,CAAuC,OAAvC,EAAgDV,OAAhD,EAAyDK,MAAzD,CAAgE,WAAhE,EAA6ER,WAA7E,CAAyF,UAAzF;AACA,KAHD;AAIA,GArBQ,EAqBN,CAACnB,GAAD,CArBM,CAAT;AAuBA,MAAQiC,aAAR,GAAiElB,QAAjE,CAAQkB,aAAR;AAAA,MAAuBC,sBAAvB,GAAiEnB,QAAjE,CAAuBmB,sBAAvB;AAAA,MAA+CC,aAA/C,GAAiEpB,QAAjE,CAA+CoB,aAA/C;AAEA,MAAMC,aAAa,GAAGnD,kBAAkB,CAAC,UAACoD,KAAD,EAAQC,MAAR,EAAmB;AAC3D,QAAI,CAACA,MAAL,EAAa;AACZ,UAAI3B,OAAO,CAAC4B,QAAR,CAAiBF,KAAjB,CAAJ,EAA6B;AAC5B;AACA;;AACD,aAAOJ,aAAa,8BAAKtB,OAAL,IAAc0B,KAAd,GAApB;AACA;;AACDJ,iBAAa,CAACtB,OAAO,CAACgB,MAAR,CAAe,UAACa,OAAD;AAAA,aAAaA,OAAO,KAAKH,KAAzB;AAAA,KAAf,CAAD,CAAb;AACA,GARuC,CAAxC;AAUA,MAAMI,WAAW,GAAGjD,WAAW,CAAC,MAAD,EAAS,cAAT,CAA/B;;AAEA,MAAMkD,YAAY;AAAG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAChB/B,OAAO,CAACgC,MAAR,KAAmB,CAAnB,IAAwB/B,gBAAgB,KAAK,EAD7B;AAAA;AAAA;AAAA;;AAEnBJ,+BAAe,CAACP,CAAC,CAAC,yBAAD,CAAF,CAAf;AAFmB;;AAAA;AAAA,sBAKhBW,gBAAgB,KAAK,EAArB,IAA2B,CAACtB,aAAa,CAACsB,gBAAD,CALzB;AAAA;AAAA;AAAA;;AAMnBJ,+BAAe,CAACP,CAAC,CAAC,6BAAD,EAAgCW,gBAAhC,CAAF,CAAf;AANmB;;AAAA;AAAA,sBAShBP,gBAAgB,CAACsC,MAAjB,KAA4B,CATZ;AAAA;AAAA;AAAA;;AAUnBnC,+BAAe,CAACP,CAAC,CAAC,8CAAD,CAAF,CAAf;AAVmB;;AAAA;AAapBO,+BAAe,CAAC,IAAD,CAAf;AAboB;AAAA;AAAA,iDAgBbiC,WAAW,CAAC;AACjBzC,qBAAG,EAAHA,GADiB;AAEjB4C,sBAAI,EAAE,OAFW;AAGjBjC,yBAAO,EAAPA,OAHiB;AAIjBkC,0BAAQ,EAAEjC,gBAAgB,CAACkC,KAAjB,CAAuB,GAAvB,CAJO;AAKjBjC,yBAAO,EAAPA,OALiB;AAMjBkC,0BAAQ,EAAE1C;AANO,iBAAD,CAhBE;;AAAA;AAyBnBW,oCAAoB,CAAC;AACpB4B,sBAAI,EAAE,SADc;AAEpBhB,yBAAO,EAAE3B,CAAC,CAAC,wCAAD;AAFU,iBAAD,CAApB;AAzBmB;AAAA;;AAAA;AAAA;AAAA;AA8BnBe,oCAAoB,CAAC;AACpB4B,sBAAI,EAAE,OADc;AAEpBhB,yBAAO;AAFa,iBAAD,CAApB;;AA9BmB;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAH;AAAA,KAAlB;;AAqCA,sBACC,oBAAC,UAAD,qBACC,oBAAC,KAAD,qBACC,oBAAC,OAAD;AAAS,WAAO,EAAEX,KAAlB;AAAyB,SAAK,EAAEhB,CAAC,CAAC,mBAAD,CAAjC;AAAwD,QAAI,EAAEI,gBAAgB,CAACsC,MAAjB,GAA0B,CAA1B,GAA8B,SAA9B,GAA0C;AAAxG,kBACC,+BAAOtC,gBAAgB,CAACsC,MAAxB,wBADD,EAEEtC,gBAAgB,CAACsC,MAAjB,GAA0B,CAA1B,iBACA,oBAAC,GAAD;AAAK,MAAE,EAAC,GAAR;AAAY,aAAS,EAAE9C;AAAvB,KACEI,CAAC,CAAC,mCAAD,CADH,CAHF,EAOEI,gBAAgB,CAACsC,MAAjB,KAA4B,CAA5B,iBAAiC,oBAAC,GAAD;AAAK,MAAE,EAAC;AAAR,KAAa1C,CAAC,CAAC,oDAAD,CAAd,CAPnC,CADD,CADD,eAYC,oBAAC,KAAD,qBACC,oBAAC,KAAD,CAAO,KAAP,QAAcA,CAAC,CAAC,UAAD,CAAf,CADD,eAEC,oBAAC,KAAD,CAAO,GAAP,qBACC,oBAAC,wBAAD;AAA0B,SAAK,EAAEU,OAAjC;AAA0C,YAAQ,EAAEyB;AAApD,IADD,CAFD,CAZD,eAkBC,oBAAC,KAAD,qBACC,oBAAC,KAAD,CAAO,KAAP,QAAcnC,CAAC,CAAC,sBAAD,CAAf,CADD,eAEC,oBAAC,KAAD,CAAO,GAAP,qBACC,oBAAC,SAAD;AACC,eAAW,EAAEA,CAAC,CAAC,uBAAD,CADf;AAEC,SAAK,EAAEW,gBAFR;AAGC,YAAQ,EAAEsB,sBAHX;AAIC,SAAK,eAAE,oBAAC,IAAD;AAAM,UAAI,EAAC,MAAX;AAAkB,UAAI,EAAC;AAAvB;AAJR,IADD,CAFD,CAlBD,eA6BC,oBAAC,KAAD,qBACC,oBAAC,KAAD,CAAO,KAAP,QAAcjC,CAAC,CAAC,SAAD,CAAf,CADD,eAEC,oBAAC,KAAD,CAAO,GAAP,qBACC,oBAAC,SAAD;AAAW,SAAK,EAAEY,OAAlB;AAA2B,YAAQ,EAAEsB,aAArC;AAAoD,SAAK,eAAE,oBAAC,IAAD;AAAM,UAAI,EAAC,MAAX;AAAkB,UAAI,EAAC;AAAvB;AAA3D,IADD,CAFD,CA7BD,EAoCE5B,YAAY,iBAAI,oBAAC,OAAD;AAAS,QAAI,EAAE,QAAf;AAAyB,SAAK,EAAEA;AAAhC,IApClB,eAsCC,oBAAC,WAAD;AAAa,WAAO,MAApB;AAAqB,MAAE,EAAC;AAAxB,kBACC,oBAAC,MAAD;AAAQ,WAAO,EAAER;AAAjB,KAA4BE,CAAC,CAAC,QAAD,CAA7B,CADD,eAEC,oBAAC,MAAD;AAAQ,WAAO,MAAf;AAAgB,WAAO,EAAE;AAAA,aAAMyC,YAAY,EAAlB;AAAA;AAAzB,KACEzC,CAAC,CAAC,MAAD,CADH,CAFD,CAtCD,CADD;AA+CA,CApJD;;AAlBAhC,MAAM,CAAC+E,aAAP,CAwKelD,cAxKf,E","file":"dynamic/client/views/room/contextualBar/ExportMessages/MailExportForm.js","sourcesContent":["import { css } from '@rocket.chat/css-in-js';\nimport { Field, TextInput, ButtonGroup, Button, Box, Icon, Callout, FieldGroup } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useState, useEffect } from 'react';\n\nimport { roomTypes } from '../../../../../app/utils/client';\nimport { validateEmail } from '../../../../../lib/emailValidator';\nimport UserAutoCompleteMultiple from '../../../../components/UserAutoCompleteMultiple';\nimport { useEndpoint } from '../../../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../../contexts/TranslationContext';\nimport { useForm } from '../../../../hooks/useForm';\nimport { useUserRoom } from '../../hooks/useUserRoom';\n\nconst clickable = css`\n\tcursor: pointer;\n`;\n\nconst MailExportForm = ({ onCancel, rid }) => {\n\tconst t = useTranslation();\n\n\tconst room = useUserRoom(rid);\n\tconst roomName = room && room.t && roomTypes.getRoomName(room.t, room);\n\n\tconst [selectedMessages, setSelected] = useState([]);\n\n\tconst [errorMessage, setErrorMessage] = useState();\n\n\tconst { values, handlers } = useForm({\n\t\tdateFrom: '',\n\t\tdateTo: '',\n\t\ttoUsers: [],\n\t\tadditionalEmails: '',\n\t\tsubject: t('Mail_Messages_Subject', roomName),\n\t});\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst { toUsers, additionalEmails, subject } = values;\n\n\tconst reset = useMutableCallback(() => {\n\t\tsetSelected([]);\n\t\t$('.messages-box .message', $(`#chat-window-${rid}`)).removeClass('selected');\n\t});\n\n\tuseEffect(() => {\n\t\tconst $root = $(`#chat-window-${rid}`);\n\t\t$('.messages-box', $root).addClass('selectable');\n\n\t\tconst handler = function () {\n\t\t\tconst { id } = this;\n\n\t\t\tif (this.classList.contains('selected')) {\n\t\t\t\tthis.classList.remove('selected');\n\t\t\t\tsetSelected((selectedMessages) => selectedMessages.filter((message) => message !== id));\n\t\t\t} else {\n\t\t\t\tthis.classList.add('selected');\n\t\t\t\tsetSelected((selectedMessages) => selectedMessages.concat(id));\n\t\t\t}\n\t\t};\n\t\t$('.messages-box .message', $root).on('click', handler);\n\n\t\treturn () => {\n\t\t\t$('.messages-box', $root).removeClass('selectable');\n\t\t\t$('.messages-box .message', $root).off('click', handler).filter('.selected').removeClass('selected');\n\t\t};\n\t}, [rid]);\n\n\tconst { handleToUsers, handleAdditionalEmails, handleSubject } = handlers;\n\n\tconst onChangeUsers = useMutableCallback((value, action) => {\n\t\tif (!action) {\n\t\t\tif (toUsers.includes(value)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn handleToUsers([...toUsers, value]);\n\t\t}\n\t\thandleToUsers(toUsers.filter((current) => current !== value));\n\t});\n\n\tconst roomsExport = useEndpoint('POST', 'rooms.export');\n\n\tconst handleSubmit = async () => {\n\t\tif (toUsers.length === 0 && additionalEmails === '') {\n\t\t\tsetErrorMessage(t('Mail_Message_Missing_to'));\n\t\t\treturn;\n\t\t}\n\t\tif (additionalEmails !== '' && !validateEmail(additionalEmails)) {\n\t\t\tsetErrorMessage(t('Mail_Message_Invalid_emails', additionalEmails));\n\t\t\treturn;\n\t\t}\n\t\tif (selectedMessages.length === 0) {\n\t\t\tsetErrorMessage(t('Mail_Message_No_messages_selected_select_all'));\n\t\t\treturn;\n\t\t}\n\t\tsetErrorMessage(null);\n\n\t\ttry {\n\t\t\tawait roomsExport({\n\t\t\t\trid,\n\t\t\t\ttype: 'email',\n\t\t\t\ttoUsers,\n\t\t\t\ttoEmails: additionalEmails.split(','),\n\t\t\t\tsubject,\n\t\t\t\tmessages: selectedMessages,\n\t\t\t});\n\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: t('Your_email_has_been_queued_for_sending'),\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: error,\n\t\t\t});\n\t\t}\n\t};\n\n\treturn (\n\t\t<FieldGroup>\n\t\t\t<Field>\n\t\t\t\t<Callout onClick={reset} title={t('Messages selected')} type={selectedMessages.length > 0 ? 'success' : 'info'}>\n\t\t\t\t\t<p>{`${selectedMessages.length} Messages selected`}</p>\n\t\t\t\t\t{selectedMessages.length > 0 && (\n\t\t\t\t\t\t<Box is='p' className={clickable}>\n\t\t\t\t\t\t\t{t('Click here to clear the selection')}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t)}\n\t\t\t\t\t{selectedMessages.length === 0 && <Box is='p'>{t('Click_the_messages_you_would_like_to_send_by_email')}</Box>}\n\t\t\t\t</Callout>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('To_users')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<UserAutoCompleteMultiple value={toUsers} onChange={onChangeUsers} />\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('To_additional_emails')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<TextInput\n\t\t\t\t\t\tplaceholder={t('Email_Placeholder_any')}\n\t\t\t\t\t\tvalue={additionalEmails}\n\t\t\t\t\t\tonChange={handleAdditionalEmails}\n\t\t\t\t\t\taddon={<Icon name='mail' size='x20' />}\n\t\t\t\t\t/>\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Subject')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<TextInput value={subject} onChange={handleSubject} addon={<Icon name='edit' size='x20' />} />\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\n\t\t\t{errorMessage && <Callout type={'danger'} title={errorMessage} />}\n\n\t\t\t<ButtonGroup stretch mb='x12'>\n\t\t\t\t<Button onClick={onCancel}>{t('Cancel')}</Button>\n\t\t\t\t<Button primary onClick={() => handleSubmit()}>\n\t\t\t\t\t{t('Send')}\n\t\t\t\t</Button>\n\t\t\t</ButtonGroup>\n\t\t</FieldGroup>\n\t);\n};\n\nexport default MailExportForm;\n"]}