{"version":3,"sources":["meteor://ðŸ’»app/client/views/account/tokens/AddToken.js"],"names":["_regeneratorRuntime","module","link","default","v","_extends","_objectWithoutProperties","Box","TextInput","Button","Field","FieldGroup","Margins","CheckBox","useUniqueId","React","useCallback","useSetModal","useMethod","useToastMessageDispatch","useTranslation","useUserId","useForm","InfoModal","initialValues","name","bypassTwoFactor","AddToken","onDidAddToken","props","t","createTokenFn","dispatchToastMessage","setModal","userId","values","handlers","reset","handleName","handleBypassTwoFactor","closeModal","handleAdd","tokenName","token","__html","type","message","bypassTwoFactorCheckboxId","length","exportDefault"],"mappings":"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","file":"dynamic/client/views/account/tokens/AddToken.js","sourcesContent":["import { Box, TextInput, Button, Field, FieldGroup, Margins, CheckBox } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport React, { useCallback } from 'react';\n\nimport { useSetModal } from '../../../contexts/ModalContext';\nimport { useMethod } from '../../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { useUserId } from '../../../contexts/UserContext';\nimport { useForm } from '../../../hooks/useForm';\nimport InfoModal from './InfoModal';\n\nconst initialValues = {\n\tname: '',\n\tbypassTwoFactor: false,\n};\n\nconst AddToken = ({ onDidAddToken, ...props }) => {\n\tconst t = useTranslation();\n\tconst createTokenFn = useMethod('personalAccessTokens:generateToken');\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst setModal = useSetModal();\n\n\tconst userId = useUserId();\n\n\tconst { values, handlers, reset } = useForm(initialValues);\n\n\tconst { name, bypassTwoFactor } = values;\n\tconst { handleName, handleBypassTwoFactor } = handlers;\n\n\tconst closeModal = useCallback(() => setModal(null), [setModal]);\n\n\tconst handleAdd = useCallback(async () => {\n\t\ttry {\n\t\t\tconst token = await createTokenFn({ tokenName: name, bypassTwoFactor });\n\n\t\t\tsetModal(\n\t\t\t\t<InfoModal\n\t\t\t\t\ttitle={t('API_Personal_Access_Token_Generated')}\n\t\t\t\t\tcontent={\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t__html: t('API_Personal_Access_Token_Generated_Text_Token_s_UserId_s', {\n\t\t\t\t\t\t\t\t\ttoken,\n\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\tconfirmText={t('ok')}\n\t\t\t\t\tonConfirm={closeModal}\n\t\t\t\t/>,\n\t\t\t);\n\t\t\treset();\n\t\t\tonDidAddToken();\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t}, [bypassTwoFactor, closeModal, createTokenFn, dispatchToastMessage, name, onDidAddToken, reset, setModal, t, userId]);\n\n\tconst bypassTwoFactorCheckboxId = useUniqueId();\n\n\treturn (\n\t\t<FieldGroup is='form' marginBlock='x8' {...props}>\n\t\t\t<Field>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<Margins inlineEnd='x4'>\n\t\t\t\t\t\t<TextInput value={name} onChange={handleName} placeholder={t('API_Add_Personal_Access_Token')} />\n\t\t\t\t\t</Margins>\n\t\t\t\t\t<Button primary disabled={name.length === 0} onClick={handleAdd}>\n\t\t\t\t\t\t{t('Add')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Field.Row>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<CheckBox id={bypassTwoFactorCheckboxId} checked={bypassTwoFactor} onChange={handleBypassTwoFactor} />\n\t\t\t\t\t<Field.Label htmlFor={bypassTwoFactorCheckboxId}>\n\t\t\t\t\t\t{t('Ignore')} {t('Two Factor Authentication')}\n\t\t\t\t\t</Field.Label>\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t</FieldGroup>\n\t);\n};\n\nexport default AddToken;\n"]}