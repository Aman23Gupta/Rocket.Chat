{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/directory/ChatsContextualBar.js"],"names":["Box","module","link","v","React","VerticalBar","useRoute","useRouteParameter","useTranslation","AsyncStatePhase","useEndpointData","FormSkeleton","Chat","ChatInfoDirectory","RoomEditWithData","ChatsContextualBar","chatReload","directoryRoute","bar","id","t","openInRoom","push","page","handleChatsVerticalBarCloseButtonClick","handleChatsVerticalBarBackButtonClick","data","value","state","phase","error","reloadInfo","reload","LOADING","room","exportDefault"],"mappings":"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","file":"dynamic/client/views/omnichannel/directory/ChatsContextualBar.js","sourcesContent":["import { Box } from '@rocket.chat/fuselage';\nimport React from 'react';\n\nimport VerticalBar from '../../../components/VerticalBar';\nimport { useRoute, useRouteParameter } from '../../../contexts/RouterContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { AsyncStatePhase } from '../../../hooks/useAsyncState';\nimport { useEndpointData } from '../../../hooks/useEndpointData';\nimport { FormSkeleton } from './Skeleton';\nimport Chat from './chats/Chat';\nimport ChatInfoDirectory from './chats/contextualBar/ChatInfoDirectory';\nimport RoomEditWithData from './chats/contextualBar/RoomEditWithData';\n\nconst ChatsContextualBar = ({ chatReload }) => {\n\tconst directoryRoute = useRoute('omnichannel-directory');\n\n\tconst bar = useRouteParameter('bar') || 'info';\n\tconst id = useRouteParameter('id');\n\n\tconst t = useTranslation();\n\n\tconst openInRoom = () => {\n\t\tdirectoryRoute.push({ page: 'chats', id, bar: 'view' });\n\t};\n\n\tconst handleChatsVerticalBarCloseButtonClick = () => {\n\t\tdirectoryRoute.push({ page: 'chats' });\n\t};\n\n\tconst handleChatsVerticalBarBackButtonClick = () => {\n\t\tdirectoryRoute.push({ page: 'chats', id, bar: 'info' });\n\t};\n\n\tconst { value: data, phase: state, error, reload: reloadInfo } = useEndpointData(`rooms.info?roomId=${id}`);\n\n\tif (bar === 'view') {\n\t\treturn <Chat rid={id} />;\n\t}\n\n\tif (state === AsyncStatePhase.LOADING) {\n\t\treturn (\n\t\t\t<Box pi='x24'>\n\t\t\t\t<FormSkeleton />\n\t\t\t</Box>\n\t\t);\n\t}\n\n\tif (error || !data || !data.room) {\n\t\treturn <Box mbs='x16'>{t('Room_not_found')}</Box>;\n\t}\n\n\treturn (\n\t\t<VerticalBar className={'contextual-bar'}>\n\t\t\t<VerticalBar.Header>\n\t\t\t\t{bar === 'info' && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<VerticalBar.Icon name='info-circled' />\n\t\t\t\t\t\t<VerticalBar.Text>{t('Room_Info')}</VerticalBar.Text>\n\t\t\t\t\t\t<VerticalBar.Action title={t('View_full_conversation')} name={'new-window'} onClick={openInRoom} />\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{bar === 'edit' && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<VerticalBar.Icon name='pencil' />\n\t\t\t\t\t\t<VerticalBar.Text>{t('edit-room')}</VerticalBar.Text>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t<VerticalBar.Close onClick={handleChatsVerticalBarCloseButtonClick} />\n\t\t\t</VerticalBar.Header>\n\t\t\t{bar === 'info' && <ChatInfoDirectory id={id} room={data.room} />}\n\t\t\t{bar === 'edit' && (\n\t\t\t\t<RoomEditWithData id={id} close={handleChatsVerticalBarBackButtonClick} reload={chatReload} reloadInfo={reloadInfo} />\n\t\t\t)}\n\t\t</VerticalBar>\n\t);\n};\n\nexport default ChatsContextualBar;\n"]}