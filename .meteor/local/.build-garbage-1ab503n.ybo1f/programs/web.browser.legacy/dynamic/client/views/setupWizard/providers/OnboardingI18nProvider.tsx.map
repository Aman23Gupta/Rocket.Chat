{"version":3,"sources":["meteor://ðŸ’»app/client/views/setupWizard/providers/OnboardingI18nProvider.tsx"],"names":[],"mappings":";;;;;;;;AAAA;AAAO,MAAO,KAAP,CAAa,SAAb,EAAuB;AAAA;AAAA;AAAA;AAAA,CAAvB,EAAuB,CAAvB;AAAuB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAS9B,IAAM,iBAAiB,GAAG,YAAqB;AAC9C,MAAM,QAAQ,GAAG,cAAc,GAAG,OAAH,CAA/B;AAEA,MAAM,IAAI,GAAG,QAAQ,CAAC,YAAK;AAC1B,QAAM,IAAI,GAAG,OAAO,CAAC,cAAR,GAAyB,GAAzB,CAA6B,kBAA7B,EAAiD,GAAjD,CAAqD,gBAArD,CAAb;AAEA,QAAI,CAAC,IAAL,CAAU;AACT,iBAAW,EAAE,IADJ;AAET,QAAE,EAAE,CAAC,YAAD,CAFK;AAGT,eAAS,EAAE,YAHF;AAIT,WAAK,EAAE,KAJE;AAKT,aAAO,EAAE;AACR,gBAAQ,EAAK,QAAL,kBADA;AAER,aAAK,EAAE,UAAC,IAAD,EAAe,UAAf,EAA6G;AAAA,cAA9D,UAA8D,uEAA9B,EAA8B;AACnH,cAAM,MAAM,GAAG,IAAI,CAAC,KAAL,CAAW,IAAX,CAAf;AACA,cAAM,MAAM,GAA2B,EAAvC;;AAFmH,gCAIxG,GAJwG;AAKlH,gBAAM,MAAM,GAAG,CAAC,KAAK,CAAC,OAAN,CAAc,UAAd,IAA4B,UAA5B,GAAyC,CAAC,UAAD,CAA1C,EAAwD,IAAxD,CAA6D,UAAC,SAAD;AAAA,qBAAe,GAAG,CAAC,UAAJ,CAAkB,SAAlB,OAAf;AAAA,aAA7D,CAAf;;AAEA,gBAAI,MAAJ,EAAY;AACX,oBAAM,CAAC,GAAG,CAAC,KAAJ,CAAU,MAAM,CAAC,MAAP,GAAgB,CAA1B,CAAD,CAAN,GAAuC,MAAM,CAAC,GAAD,CAA7C;AACA;AATiH;;AAInH,0CAAkB,MAAM,CAAC,IAAP,CAAY,MAAZ,CAAlB,kCAAuC;AAAlC,gBAAM,GAAG,mBAAT;;AAAkC,kBAA5B,GAA4B;AAMtC;;AAED,iBAAO,MAAP;AACA;AAfO;AALA,KAAV;AAwBA,WAAO,IAAP;AACA,GA5BoB,CAAR,CA4BV,CA5BU,CAAb;AA8BA,MAAM,GAAG,GAAG,WAAW,EAAvB;AAEA,WAAS,CAAC,YAAK;AACd,QAAI,CAAC,cAAL,CAAoB,GAApB;AACA,GAFQ,EAEN,CAAC,IAAD,EAAO,GAAP,CAFM,CAAT;AAIA,SAAO,IAAP;AACA,CAxCD;;AA0CA,IAAM,sBAAsB,GAAG,gBAA2D;AAAA,MAAxD,QAAwD,QAAxD,QAAwD;AACzF,MAAM,IAAI,GAAG,iBAAiB,EAA9B;AAEA,sBACC,oBAAC,QAAD;AAAU,YAAQ,eAAE,oBAAC,WAAD;AAApB,kBACC,oBAAC,eAAD;AAAiB,QAAI,EAAE;AAAvB,KAA8B,QAA9B,CADD,CADD;AAKA,CARD;;AAnDA,OAAO,aAAP,eA6De,IAAI,CAAC,sBAAD,CA7DnB,E","file":"dynamic/client/views/setupWizard/providers/OnboardingI18nProvider.tsx","sourcesContent":["import i18next from 'i18next';\nimport i18nextHttpBackend from 'i18next-http-backend';\nimport React, { Suspense, memo, ReactElement, useEffect, useState } from 'react';\nimport { I18nextProvider, initReactI18next } from 'react-i18next';\n\nimport { useAbsoluteUrl } from '../../../contexts/ServerContext';\nimport { useLanguage } from '../../../contexts/TranslationContext';\nimport PageLoading from '../../root/PageLoading';\n\nconst useOnboardingI18n = (): typeof i18next => {\n\tconst basePath = useAbsoluteUrl()('/i18n');\n\n\tconst i18n = useState(() => {\n\t\tconst i18n = i18next.createInstance().use(i18nextHttpBackend).use(initReactI18next);\n\n\t\ti18n.init({\n\t\t\tfallbackLng: 'en',\n\t\t\tns: ['onboarding'],\n\t\t\tdefaultNS: 'onboarding',\n\t\t\tdebug: false,\n\t\t\tbackend: {\n\t\t\t\tloadPath: `${basePath}/{{lng}}.json`,\n\t\t\t\tparse: (data: string, _languages?: string | string[], namespaces: string | string[] = []): { [key: string]: any } => {\n\t\t\t\t\tconst source = JSON.parse(data);\n\t\t\t\t\tconst result: { [key: string]: any } = {};\n\n\t\t\t\t\tfor (const key of Object.keys(source)) {\n\t\t\t\t\t\tconst prefix = (Array.isArray(namespaces) ? namespaces : [namespaces]).find((namespace) => key.startsWith(`${namespace}.`));\n\n\t\t\t\t\t\tif (prefix) {\n\t\t\t\t\t\t\tresult[key.slice(prefix.length + 1)] = source[key];\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn result;\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\n\t\treturn i18n;\n\t})[0];\n\n\tconst lng = useLanguage();\n\n\tuseEffect(() => {\n\t\ti18n.changeLanguage(lng);\n\t}, [i18n, lng]);\n\n\treturn i18n;\n};\n\nconst OnboardingI18nProvider = ({ children }: { children: ReactElement }): ReactElement => {\n\tconst i18n = useOnboardingI18n();\n\n\treturn (\n\t\t<Suspense fallback={<PageLoading />}>\n\t\t\t<I18nextProvider i18n={i18n}>{children}</I18nextProvider>\n\t\t</Suspense>\n\t);\n};\n\nexport default memo(OnboardingI18nProvider);\n"]}