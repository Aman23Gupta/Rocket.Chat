{"version":3,"sources":["meteor://ðŸ’»app/client/views/teams/contextualBar/info/Leave/LeaveTeamModal.js"],"names":["_objectSpread","module","link","default","v","_slicedToArray","export","LeaveTeamModal","useMutableCallback","React","useState","useCallback","StepOne","StepTwo","STEPS","LIST_ROOMS","CONFIRM_LEAVE","onCancel","onConfirm","rooms","length","step","setStep","selectedRooms","setSelectedRooms","lastOwnerRooms","filter","isLastOwner","onContinue","onReturn","onChangeRoomSelection","room","_id","onToggleAllRooms","Object","values","Boolean","fromEntries","map","args","console","log","exportDefault"],"mappings":"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","file":"dynamic/client/views/teams/contextualBar/info/Leave/LeaveTeamModal.js","sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useState, useCallback } from 'react';\n\nimport { StepOne, StepTwo } from '.';\n\nconst STEPS = {\n\tLIST_ROOMS: 'LIST_ROOMS',\n\tCONFIRM_LEAVE: 'CONFIRM_LEAVE',\n};\n\nexport const LeaveTeamModal = ({ onCancel, onConfirm, rooms }) => {\n\tconst [step, setStep] = useState(() => {\n\t\tif (rooms.length === 0) {\n\t\t\treturn STEPS.CONFIRM_LEAVE;\n\t\t}\n\t\treturn STEPS.LIST_ROOMS;\n\t});\n\tconst [selectedRooms, setSelectedRooms] = useState({});\n\n\tconst lastOwnerRooms = rooms.filter(({ isLastOwner }) => isLastOwner);\n\n\tconst onContinue = useCallback(() => setStep(STEPS.CONFIRM_LEAVE), []);\n\n\tconst onReturn = useCallback(() => setStep(STEPS.LIST_ROOMS), []);\n\n\tconst onChangeRoomSelection = useCallback((room) => {\n\t\tsetSelectedRooms((selectedRooms) => {\n\t\t\tif (selectedRooms[room._id]) {\n\t\t\t\tdelete selectedRooms[room._id];\n\t\t\t\treturn { ...selectedRooms };\n\t\t\t}\n\t\t\treturn { ...selectedRooms, [room._id]: room };\n\t\t});\n\t}, []);\n\n\tconst onToggleAllRooms = useMutableCallback(() => {\n\t\tsetSelectedRooms((selectedRooms) => {\n\t\t\tif (Object.values(selectedRooms).filter(Boolean).length === 0) {\n\t\t\t\treturn Object.fromEntries(rooms.filter(({ isLastOwner }) => !isLastOwner).map((room) => [room._id, room]));\n\t\t\t}\n\n\t\t\treturn {};\n\t\t});\n\t});\n\n\tif (step === STEPS.CONFIRM_LEAVE) {\n\t\treturn <StepTwo onConfirm={onConfirm} onCancel={rooms.length > 0 && onReturn} onClose={onCancel} rooms={rooms} />;\n\t}\n\n\treturn (\n\t\t<StepOne\n\t\t\trooms={rooms}\n\t\t\tonCancel={onCancel}\n\t\t\tparams={{}}\n\t\t\teligibleRoomsLength={rooms.length - lastOwnerRooms.length}\n\t\t\tselectedRooms={selectedRooms}\n\t\t\tonToggleAllRooms={onToggleAllRooms}\n\t\t\tonChangeParams={(...args) => console.log(args)}\n\t\t\tonConfirm={onContinue}\n\t\t\tonChangeRoomSelection={onChangeRoomSelection}\n\t\t/>\n\t);\n};\n\nexport default LeaveTeamModal;\n"]}