{"version":3,"sources":["meteor://ðŸ’»app/client/views/teams/contextualBar/members/RemoveUsersModal/BaseRemoveUsersModal.js"],"names":["_objectSpread","module","link","default","v","_slicedToArray","useMutableCallback","React","useState","useCallback","usePermission","RemoveUsersFirstStep","RemoveUsersSecondStep","STEPS","LIST_ROOMS","CONFIRM_DELETE","BaseRemoveUsersModal","onClose","onCancel","onConfirm","rooms","currentStep","length","username","step","setStep","selectedRooms","setSelectedRooms","onContinue","onReturn","canViewUserRooms","eligibleRooms","filter","isLastOwner","onChangeRoomSelection","room","_id","onToggleAllRooms","Object","values","Boolean","fromEntries","map","exportDefault"],"mappings":";;;;;;;;AAAA,IAAIA,aAAJ;;AAAkBC,MAAM,CAACC,IAAP,CAAY,sCAAZ,EAAmD;AAACC,SAAO,EAAC,UAASC,CAAT,EAAW;AAACJ,iBAAa,GAACI,CAAd;AAAgB;AAArC,CAAnD,EAA0F,CAA1F;;AAA6F,IAAIC,cAAJ;;AAAmBJ,MAAM,CAACC,IAAP,CAAY,sCAAZ,EAAmD;AAACC,SAAO,EAAC,UAASC,CAAT,EAAW;AAACC,kBAAc,GAACD,CAAf;AAAiB;AAAtC,CAAnD,EAA2F,CAA3F;AAAlI,IAAIE,kBAAJ;AAAuBL,MAAM,CAACC,IAAP,CAAY,6BAAZ,EAA0C;AAACI,oBAAkB,EAAC,UAASF,CAAT,EAAW;AAACE,sBAAkB,GAACF,CAAnB;AAAqB;AAArD,CAA1C,EAAiG,CAAjG;AAAoG,IAAIG,KAAJ,EAAUC,QAAV,EAAmBC,WAAnB;AAA+BR,MAAM,CAACC,IAAP,CAAY,OAAZ,EAAoB;AAAC,aAAQ,UAASE,CAAT,EAAW;AAACG,SAAK,GAACH,CAAN;AAAQ,GAA7B;AAA8BI,UAAQ,EAAC,UAASJ,CAAT,EAAW;AAACI,YAAQ,GAACJ,CAAT;AAAW,GAA9D;AAA+DK,aAAW,EAAC,UAASL,CAAT,EAAW;AAACK,eAAW,GAACL,CAAZ;AAAc;AAArG,CAApB,EAA2H,CAA3H;AAA8H,IAAIM,aAAJ;AAAkBT,MAAM,CAACC,IAAP,CAAY,8CAAZ,EAA2D;AAACQ,eAAa,EAAC,UAASN,CAAT,EAAW;AAACM,iBAAa,GAACN,CAAd;AAAgB;AAA3C,CAA3D,EAAwG,CAAxG;AAA2G,IAAIO,oBAAJ;AAAyBV,MAAM,CAACC,IAAP,CAAY,wBAAZ,EAAqC;AAAC,aAAQ,UAASE,CAAT,EAAW;AAACO,wBAAoB,GAACP,CAArB;AAAuB;AAA5C,CAArC,EAAmF,CAAnF;AAAsF,IAAIQ,qBAAJ;AAA0BX,MAAM,CAACC,IAAP,CAAY,yBAAZ,EAAsC;AAAC,aAAQ,UAASE,CAAT,EAAW;AAACQ,yBAAqB,GAACR,CAAtB;AAAwB;AAA7C,CAAtC,EAAqF,CAArF;AAO9hB,IAAMS,KAAK,GAAG;AACbC,YAAU,EAAE,YADC;AAEbC,gBAAc,EAAE;AAFH,CAAd;;AAKA,IAAMC,oBAAoB,GAAG,gBAOvB;AAAA,MANLC,OAMK,QANLA,OAMK;AAAA,MALLC,QAKK,QALLA,QAKK;AAAA,MAJLC,SAIK,QAJLA,SAIK;AAAA,MAHLC,KAGK,QAHLA,KAGK;AAAA,8BAFLC,WAEK;AAAA,MAFLA,WAEK,iCAFS,CAAAD,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEE,MAAP,MAAkB,CAAlB,GAAsBT,KAAK,CAACE,cAA5B,GAA6CF,KAAK,CAACC,UAE5D;AAAA,MADLS,QACK,QADLA,QACK;;AACL,kBAAwBf,QAAQ,CAACa,WAAD,CAAhC;AAAA;AAAA,MAAOG,IAAP;AAAA,MAAaC,OAAb;;AAEA,mBAA0CjB,QAAQ,CAAC,EAAD,CAAlD;AAAA;AAAA,MAAOkB,aAAP;AAAA,MAAsBC,gBAAtB;;AAEA,MAAMC,UAAU,GAAGtB,kBAAkB,CAAC;AAAA,WAAMmB,OAAO,CAACZ,KAAK,CAACE,cAAP,CAAb;AAAA,GAAD,CAArC;AACA,MAAMc,QAAQ,GAAGvB,kBAAkB,CAAC;AAAA,WAAMmB,OAAO,CAACZ,KAAK,CAACC,UAAP,CAAb;AAAA,GAAD,CAAnC;AAEA,MAAMgB,gBAAgB,GAAGpB,aAAa,CAAC,wBAAD,CAAtC;AAEA,MAAMqB,aAAa,GAAGX,KAAK,CAACY,MAAN,CAAa;AAAA,QAAGC,WAAH,SAAGA,WAAH;AAAA,WAAqB,CAACA,WAAtB;AAAA,GAAb,CAAtB;AAEA,MAAMC,qBAAqB,GAAGzB,WAAW,CAAC,UAAC0B,IAAD,EAAU;AACnDR,oBAAgB,CAAC,UAACD,aAAD,EAAmB;AAAA;;AACnC,UAAIA,aAAa,CAACS,IAAI,CAACC,GAAN,CAAjB,EAA6B;AAC5B,eAAOV,aAAa,CAACS,IAAI,CAACC,GAAN,CAApB;AACA,iCAAYV,aAAZ;AACA;;AACD,6CAAYA,aAAZ,4CAA4BS,IAAI,CAACC,GAAjC,IAAuCD,IAAvC;AACA,KANe,CAAhB;AAOA,GARwC,EAQtC,EARsC,CAAzC;AAUA,MAAME,gBAAgB,GAAG/B,kBAAkB,CAAC,YAAM;AACjD,QAAIgC,MAAM,CAACC,MAAP,CAAcb,aAAd,EAA6BM,MAA7B,CAAoCQ,OAApC,EAA6ClB,MAA7C,KAAwD,CAA5D,EAA+D;AAC9D,aAAOK,gBAAgB,CAACW,MAAM,CAACG,WAAP,CAAmBV,aAAa,CAACW,GAAd,CAAkB,UAACP,IAAD;AAAA,eAAU,CAACA,IAAI,CAACC,GAAN,EAAWD,IAAX,CAAV;AAAA,OAAlB,CAAnB,CAAD,CAAvB;AACA;;AACDR,oBAAgB,CAAC,EAAD,CAAhB;AACA,GAL0C,CAA3C;;AAOA,MAAIH,IAAI,KAAKX,KAAK,CAACE,cAAf,IAAiC,CAACe,gBAAtC,EAAwD;AACvD,wBACC,oBAAC,qBAAD;AACC,eAAS,EAAEX,SADZ;AAEC,aAAO,EAAEF,OAFV;AAGC,cAAQ,EAAE,CAAAG,KAAK,SAAL,IAAAA,KAAK,WAAL,YAAAA,KAAK,CAAEE,MAAP,IAAgB,CAAhB,GAAoBO,QAApB,GAA+BX,QAH1C;AAIC,kBAAY,EAAEQ,aAJf;AAKC,WAAK,EAAEN,KALR;AAMC,cAAQ,EAAEG;AANX,MADD;AAUA;;AAED,sBACC,oBAAC,oBAAD;AACC,aAAS,EAAEK,UADZ;AAEC,WAAO,EAAEX,OAFV;AAGC,YAAQ,EAAEC,QAHX;AAIC,SAAK,EAAEE,KAJR;AAKC,UAAM,EAAE,EALT;AAMC,iBAAa,EAAEM,aANhB;AAOC,oBAAgB,EAAEW,gBAPnB,CAQC;AARD;AASC,yBAAqB,EAAEH,qBATxB;AAUC,uBAAmB,EAAEH,aAAa,CAACT;AAVpC,IADD;AAcA,CA/DD;;AAZArB,MAAM,CAAC0C,aAAP,CA6Ee3B,oBA7Ef,E","file":"dynamic/client/views/teams/contextualBar/members/RemoveUsersModal/BaseRemoveUsersModal.js","sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useState, useCallback } from 'react';\n\nimport { usePermission } from '../../../../../contexts/AuthorizationContext';\nimport RemoveUsersFirstStep from './RemoveUsersFirstStep';\nimport RemoveUsersSecondStep from './RemoveUsersSecondStep';\n\nconst STEPS = {\n\tLIST_ROOMS: 'LIST_ROOMS',\n\tCONFIRM_DELETE: 'CONFIRM_DELETE',\n};\n\nconst BaseRemoveUsersModal = ({\n\tonClose,\n\tonCancel,\n\tonConfirm,\n\trooms,\n\tcurrentStep = rooms?.length === 0 ? STEPS.CONFIRM_DELETE : STEPS.LIST_ROOMS,\n\tusername,\n}) => {\n\tconst [step, setStep] = useState(currentStep);\n\n\tconst [selectedRooms, setSelectedRooms] = useState({});\n\n\tconst onContinue = useMutableCallback(() => setStep(STEPS.CONFIRM_DELETE));\n\tconst onReturn = useMutableCallback(() => setStep(STEPS.LIST_ROOMS));\n\n\tconst canViewUserRooms = usePermission('view-all-team-channels');\n\n\tconst eligibleRooms = rooms.filter(({ isLastOwner }) => !isLastOwner);\n\n\tconst onChangeRoomSelection = useCallback((room) => {\n\t\tsetSelectedRooms((selectedRooms) => {\n\t\t\tif (selectedRooms[room._id]) {\n\t\t\t\tdelete selectedRooms[room._id];\n\t\t\t\treturn { ...selectedRooms };\n\t\t\t}\n\t\t\treturn { ...selectedRooms, [room._id]: room };\n\t\t});\n\t}, []);\n\n\tconst onToggleAllRooms = useMutableCallback(() => {\n\t\tif (Object.values(selectedRooms).filter(Boolean).length === 0) {\n\t\t\treturn setSelectedRooms(Object.fromEntries(eligibleRooms.map((room) => [room._id, room])));\n\t\t}\n\t\tsetSelectedRooms({});\n\t});\n\n\tif (step === STEPS.CONFIRM_DELETE || !canViewUserRooms) {\n\t\treturn (\n\t\t\t<RemoveUsersSecondStep\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tonClose={onClose}\n\t\t\t\tonCancel={rooms?.length > 0 ? onReturn : onCancel}\n\t\t\t\tdeletedRooms={selectedRooms}\n\t\t\t\trooms={rooms}\n\t\t\t\tusername={username}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<RemoveUsersFirstStep\n\t\t\tonConfirm={onContinue}\n\t\t\tonClose={onClose}\n\t\t\tonCancel={onCancel}\n\t\t\trooms={rooms}\n\t\t\tparams={{}}\n\t\t\tselectedRooms={selectedRooms}\n\t\t\tonToggleAllRooms={onToggleAllRooms}\n\t\t\t// onChangeParams={(...args) => console.log(args)}\n\t\t\tonChangeRoomSelection={onChangeRoomSelection}\n\t\t\teligibleRoomsLength={eligibleRooms.length}\n\t\t/>\n\t);\n};\n\nexport default BaseRemoveUsersModal;\n"]}