{"version":3,"sources":["meteor://ðŸ’»app/client/views/teams/contextualBar/channels/TeamsChannels.js"],"names":["_slicedToArray","module","link","default","v","_extends","useMutableCallback","useLocalStorage","useDebouncedValue","React","useCallback","useMemo","useState","roomTypes","usePermission","useSetModal","useRecordList","AsyncStatePhase","CreateChannelWithData","RoomInfo","useTabBarClose","AddExistingModal","BaseTeamsChannels","useTeamsChannelList","useReactModal","Component","props","setModal","e","preventDefault","handleClose","TeamsChannels","teamId","rid","state","setState","onClickClose","type","setType","text","setText","debouncedText","teamsChannelList","loadMoreItems","reload","phase","items","total","itemCount","handleTextChange","event","currentTarget","value","canAddExistingTeam","addExisting","createNew","goToRoom","room","openRouteLink","t","handleBack","viewRoom","tab","LOADING","exportDefault"],"mappings":"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","file":"dynamic/client/views/teams/contextualBar/channels/TeamsChannels.js","sourcesContent":["import { useMutableCallback, useLocalStorage, useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport { roomTypes } from '../../../../../app/utils/client';\nimport { usePermission } from '../../../../contexts/AuthorizationContext';\nimport { useSetModal } from '../../../../contexts/ModalContext';\nimport { useRecordList } from '../../../../hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../../../../lib/asyncState';\nimport CreateChannelWithData from '../../../../sidebar/header/CreateChannelWithData';\nimport RoomInfo from '../../../room/contextualBar/Info';\nimport { useTabBarClose } from '../../../room/providers/ToolboxProvider';\nimport AddExistingModal from './AddExistingModal';\nimport BaseTeamsChannels from './BaseTeamsChannels';\nimport { useTeamsChannelList } from './hooks/useTeamsChannelList';\n\nconst useReactModal = (Component, props) => {\n\tconst setModal = useSetModal();\n\n\treturn useMutableCallback((e) => {\n\t\te.preventDefault();\n\n\t\tconst handleClose = () => {\n\t\t\tsetModal(null);\n\t\t};\n\n\t\tsetModal(() => <Component onClose={handleClose} {...props} />);\n\t});\n};\n\nconst TeamsChannels = ({ teamId, rid }) => {\n\tconst [state, setState] = useState({});\n\tconst onClickClose = useTabBarClose();\n\n\tconst [type, setType] = useLocalStorage('channels-list-type', 'all');\n\tconst [text, setText] = useState('');\n\n\tconst debouncedText = useDebouncedValue(text, 800);\n\n\tconst { teamsChannelList, loadMoreItems, reload } = useTeamsChannelList(\n\t\tuseMemo(() => ({ teamId, text: debouncedText, type }), [teamId, debouncedText, type]),\n\t);\n\n\tconst { phase, items, itemCount: total } = useRecordList(teamsChannelList);\n\n\tconst handleTextChange = useCallback((event) => {\n\t\tsetText(event.currentTarget.value);\n\t}, []);\n\n\tconst canAddExistingTeam = usePermission('add-team-channel', rid);\n\tconst addExisting = useReactModal(AddExistingModal, { teamId, reload });\n\tconst createNew = useReactModal(CreateChannelWithData, { teamId, reload });\n\n\tconst goToRoom = useCallback((room) => roomTypes.openRouteLink(room.t, room), []);\n\tconst handleBack = useCallback(() => setState({}), [setState]);\n\tconst viewRoom = useMutableCallback((room) => {\n\t\tgoToRoom(room);\n\t});\n\n\tif (state.tab === 'RoomInfo') {\n\t\treturn <RoomInfo rid={state.rid} onClickClose={onClickClose} onClickBack={handleBack} onEnterRoom={goToRoom} resetState={setState} />;\n\t}\n\n\treturn (\n\t\t<BaseTeamsChannels\n\t\t\tloading={phase === AsyncStatePhase.LOADING}\n\t\t\ttype={type}\n\t\t\ttext={text}\n\t\t\tsetType={setType}\n\t\t\tsetText={handleTextChange}\n\t\t\tchannels={items}\n\t\t\ttotal={total}\n\t\t\tonClickClose={onClickClose}\n\t\t\tonClickAddExisting={canAddExistingTeam && addExisting}\n\t\t\tonClickCreateNew={canAddExistingTeam && createNew}\n\t\t\tonClickView={viewRoom}\n\t\t\tloadMoreItems={loadMoreItems}\n\t\t\treload={reload}\n\t\t/>\n\t);\n};\n\nexport default TeamsChannels;\n"]}