{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/Threads/ThreadList.tsx"],"names":[],"mappings":"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","file":"dynamic/client/views/room/contextualBar/Threads/ThreadList.tsx","sourcesContent":["import { Box, Icon, TextInput, Select, Margins, Callout, Throbber } from '@rocket.chat/fuselage';\nimport { useResizeObserver, useMutableCallback, useAutoFocus } from '@rocket.chat/fuselage-hooks';\nimport React, { FC, useMemo } from 'react';\nimport { Virtuoso } from 'react-virtuoso';\n\nimport { IMessage } from '../../../../../definition/IMessage';\nimport { IRoom } from '../../../../../definition/IRoom';\nimport { IUser } from '../../../../../definition/IUser';\nimport ScrollableContentWrapper from '../../../../components/ScrollableContentWrapper';\nimport VerticalBar from '../../../../components/VerticalBar';\nimport { useRoute, useCurrentRoute, useQueryStringParameter } from '../../../../contexts/RouterContext';\nimport { useSetting } from '../../../../contexts/SettingsContext';\nimport { useTranslation } from '../../../../contexts/TranslationContext';\nimport { useTabContext } from '../../providers/ToolboxProvider';\nimport ThreadComponent from '../../threads/ThreadComponent';\nimport Row from './Row';\nimport { withData } from './withData';\n\nexport type ThreadListProps = {\n\ttotal: number;\n\tthreads: IMessage[];\n\troom: IRoom;\n\tunread?: string[];\n\tunreadUser?: string[];\n\tunreadGroup?: string[];\n\tuserId?: IUser['_id'] | null;\n\n\ttype: 'all' | 'following' | 'unread';\n\tsetType: (type: string) => void;\n\n\tloading: boolean;\n\n\terror?: Error;\n\n\ttext: string;\n\tsetText: (text: string) => void;\n\n\tonClose: () => void;\n\n\tloadMoreItems: (min: number, max: number) => void;\n};\n\nexport const ThreadList: FC<ThreadListProps> = function ThreadList({\n\ttotal = 10,\n\tthreads = [],\n\troom,\n\tunread = [],\n\tunreadUser = [],\n\tunreadGroup = [],\n\ttext,\n\ttype,\n\tsetType,\n\tloadMoreItems,\n\tloading,\n\tonClose,\n\terror,\n\tuserId = '',\n\tsetText,\n}) {\n\tconst showRealNames = Boolean(useSetting('UI_Use_Real_Name'));\n\n\tconst t = useTranslation();\n\tconst inputRef = useAutoFocus(true);\n\tconst [name] = useCurrentRoute();\n\n\tif (!name) {\n\t\tthrow new Error('No route name');\n\t}\n\n\tconst channelRoute = useRoute(name);\n\tconst onClick = useMutableCallback((e) => {\n\t\tconst { id: context } = e.currentTarget.dataset;\n\t\tchannelRoute.push({\n\t\t\ttab: 'thread',\n\t\t\tcontext,\n\t\t\trid: room._id,\n\t\t\t...(room.name && { name: room.name }),\n\t\t});\n\t});\n\n\tconst options: [string, string][] = useMemo(\n\t\t() => [\n\t\t\t['all', t('All')],\n\t\t\t['following', t('Following')],\n\t\t\t['unread', t('Unread')],\n\t\t],\n\t\t[t],\n\t);\n\n\tconst { ref, contentBoxSize: { inlineSize = 378, blockSize = 1 } = {} } = useResizeObserver<HTMLElement>({\n\t\tdebounceDelay: 200,\n\t});\n\n\tconst mid = useTabContext();\n\tconst jump = useQueryStringParameter('jump');\n\n\treturn (\n\t\t<>\n\t\t\t<VerticalBar.Header>\n\t\t\t\t<VerticalBar.Icon name='thread' />\n\t\t\t\t<VerticalBar.Text>{t('Threads')}</VerticalBar.Text>\n\t\t\t\t<VerticalBar.Close onClick={onClose} />\n\t\t\t</VerticalBar.Header>\n\n\t\t\t<VerticalBar.Content paddingInline={0} ref={ref}>\n\t\t\t\t<Box\n\t\t\t\t\tdisplay='flex'\n\t\t\t\t\tflexDirection='row'\n\t\t\t\t\tp='x24'\n\t\t\t\t\tborderBlockEndWidth='x2'\n\t\t\t\t\tborderBlockEndStyle='solid'\n\t\t\t\t\tborderBlockEndColor='neutral-200'\n\t\t\t\t\tflexShrink={0}\n\t\t\t\t>\n\t\t\t\t\t<Box display='flex' flexDirection='row' flexGrow={1} mi='neg-x4'>\n\t\t\t\t\t\t<Margins inline='x4'>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tplaceholder={t('Search_Messages')}\n\t\t\t\t\t\t\t\tvalue={text}\n\t\t\t\t\t\t\t\tonChange={setText as any}\n\t\t\t\t\t\t\t\taddon={<Icon name='magnifier' size='x20' />}\n\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Select flexGrow={0} width='110px' onChange={setType} value={type} options={options} />\n\t\t\t\t\t\t</Margins>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\n\t\t\t\t{loading && (\n\t\t\t\t\t<Box pi='x24' pb='x12'>\n\t\t\t\t\t\t<Throbber size='x12' />\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\n\t\t\t\t{error && (\n\t\t\t\t\t<Callout mi='x24' type='danger'>\n\t\t\t\t\t\t{error.toString()}\n\t\t\t\t\t</Callout>\n\t\t\t\t)}\n\n\t\t\t\t{!loading && total === 0 && (\n\t\t\t\t\t<Box p='x24' color='neutral-600' textAlign='center' width='full'>\n\t\t\t\t\t\t{t('No_Threads')}\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\n\t\t\t\t<Box flexGrow={1} flexShrink={1} overflow='hidden' display='flex'>\n\t\t\t\t\t{!error && total > 0 && threads.length > 0 && (\n\t\t\t\t\t\t<Virtuoso\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\theight: blockSize,\n\t\t\t\t\t\t\t\twidth: inlineSize,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttotalCount={total}\n\t\t\t\t\t\t\tendReached={loading ? (): void => undefined : (start): unknown => loadMoreItems(start, Math.min(50, total - start))}\n\t\t\t\t\t\t\toverscan={25}\n\t\t\t\t\t\t\tdata={threads}\n\t\t\t\t\t\t\tcomponents={{ Scroller: ScrollableContentWrapper as any }}\n\t\t\t\t\t\t\titemContent={(_index, data: IMessage): FC<IMessage> =>\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t<Row\n\t\t\t\t\t\t\t\t\t\tthread={data}\n\t\t\t\t\t\t\t\t\t\tshowRealNames={showRealNames}\n\t\t\t\t\t\t\t\t\t\tunread={unread}\n\t\t\t\t\t\t\t\t\t\tunreadUser={unreadUser}\n\t\t\t\t\t\t\t\t\t\tunreadGroup={unreadGroup}\n\t\t\t\t\t\t\t\t\t\tuserId={userId || ''}\n\t\t\t\t\t\t\t\t\t\tonClick={onClick}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) as unknown as FC<IMessage>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Box>\n\t\t\t</VerticalBar.Content>\n\n\t\t\t{typeof mid === 'string' && (\n\t\t\t\t<VerticalBar.InnerContent>\n\t\t\t\t\t<ThreadComponent onClickBack={onClick} mid={mid} jump={jump} room={room} />\n\t\t\t\t</VerticalBar.InnerContent>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default withData(ThreadList);\n"]}