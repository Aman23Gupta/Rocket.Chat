{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/agents/AgentInfo.js"],"names":["_extends","module","link","default","v","_objectWithoutProperties","export","AgentInfo","Box","Margins","ButtonGroup","React","memo","useSubscription","FormSkeleton","UserStatus","VerticalBar","useTranslation","AsyncStatePhase","useEndpointData","UserInfo","formsSubscription","AgentInfoAction","uid","children","props","t","data","value","state","phase","error","eeForms","useMaxChatsPerAgentDisplay","MaxChats","LOADING","user","username","statusLivechat","userStatus","status","exportDefault","Object","assign","Action"],"mappings":"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","file":"dynamic/client/views/omnichannel/agents/AgentInfo.js","sourcesContent":["import { Box, Margins, ButtonGroup } from '@rocket.chat/fuselage';\nimport React, { memo } from 'react';\nimport { useSubscription } from 'use-subscription';\n\nimport { FormSkeleton } from '../../../components/Skeleton';\nimport { UserStatus } from '../../../components/UserStatus';\nimport VerticalBar from '../../../components/VerticalBar';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { AsyncStatePhase } from '../../../hooks/useAsyncState';\nimport { useEndpointData } from '../../../hooks/useEndpointData';\nimport UserInfo from '../../room/contextualBar/UserInfo';\nimport { formsSubscription } from '../additionalForms';\nimport AgentInfoAction from './AgentInfoAction';\n\nexport const AgentInfo = memo(function AgentInfo({ uid, children, ...props }) {\n\tconst t = useTranslation();\n\tconst { value: data, phase: state, error } = useEndpointData(`livechat/users/agent/${uid}`);\n\tconst eeForms = useSubscription(formsSubscription);\n\n\tconst { useMaxChatsPerAgentDisplay = () => {} } = eeForms;\n\n\tconst MaxChats = useMaxChatsPerAgentDisplay();\n\n\tif (state === AsyncStatePhase.LOADING) {\n\t\treturn <FormSkeleton />;\n\t}\n\n\tif (error || !data || !data.user) {\n\t\treturn <Box mbs='x16'>{t('User_not_found')}</Box>;\n\t}\n\n\tconst { user } = data;\n\tconst { username, statusLivechat, status: userStatus } = user;\n\n\treturn (\n\t\t<VerticalBar.ScrollableContent p='x24' {...props}>\n\t\t\t<Box alignSelf='center'>\n\t\t\t\t<UserInfo.Avatar size={'x332'} username={username} />\n\t\t\t</Box>\n\n\t\t\t<ButtonGroup mi='neg-x4' flexShrink={0} flexWrap='nowrap' withTruncatedText justifyContent='center' flexShrink={0}>\n\t\t\t\t{children}\n\t\t\t</ButtonGroup>\n\n\t\t\t<Margins block='x4'>\n\t\t\t\t<Box mb='x2'>\n\t\t\t\t\t<UserInfo.Username name={username} status={<UserStatus status={userStatus} />} />\n\t\t\t\t</Box>\n\n\t\t\t\t{statusLivechat && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<UserInfo.Label>{t('Livechat_status')}</UserInfo.Label>\n\t\t\t\t\t\t<UserInfo.Info>{t(statusLivechat === 'available' ? 'Available' : 'Not_Available')}</UserInfo.Info>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\n\t\t\t\t{MaxChats && <MaxChats data={user} />}\n\t\t\t</Margins>\n\t\t</VerticalBar.ScrollableContent>\n\t);\n});\n\nexport default Object.assign(AgentInfo, {\n\tAction: AgentInfoAction,\n});\n"]}