{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/cloud/TroubleshootingSection.js"],"names":["_regeneratorRuntime","module","link","default","v","_extends","_slicedToArray","_objectWithoutProperties","Box","Button","ButtonGroup","Throbber","useSafely","React","useState","Subtitle","useMethod","useToastMessageDispatch","useTranslation","statusPageUrl","TroubleshootingSection","onRegisterStatusChange","props","t","dispatchToastMessage","isSyncing","setSyncing","syncWorkspace","handleSyncButtonClick","isSynced","Error","type","message","exportDefault"],"mappings":"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","file":"dynamic/client/views/admin/cloud/TroubleshootingSection.js","sourcesContent":["import { Box, Button, ButtonGroup, Throbber } from '@rocket.chat/fuselage';\nimport { useSafely } from '@rocket.chat/fuselage-hooks';\nimport React, { useState } from 'react';\n\nimport Subtitle from '../../../components/Subtitle';\nimport { useMethod } from '../../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { statusPageUrl } from './constants';\n\nfunction TroubleshootingSection({ onRegisterStatusChange, ...props }) {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst [isSyncing, setSyncing] = useSafely(useState(false));\n\n\tconst syncWorkspace = useMethod('cloud:syncWorkspace');\n\n\tconst handleSyncButtonClick = async () => {\n\t\tsetSyncing(true);\n\n\t\ttry {\n\t\t\tconst isSynced = await syncWorkspace();\n\n\t\t\tif (!isSynced) {\n\t\t\t\tthrow Error(t('An error occured syncing'));\n\t\t\t}\n\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Sync Complete') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t} finally {\n\t\t\tawait (onRegisterStatusChange && onRegisterStatusChange());\n\t\t\tsetSyncing(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<Box is='section' {...props}>\n\t\t\t<Subtitle>{t('Cloud_troubleshooting')}</Subtitle>\n\n\t\t\t<Box withRichContent color='neutral-800'>\n\t\t\t\t<p>{t('Cloud_workspace_support')}</p>\n\t\t\t</Box>\n\n\t\t\t<ButtonGroup>\n\t\t\t\t<Button disabled={isSyncing} minHeight='x40' onClick={handleSyncButtonClick}>\n\t\t\t\t\t{isSyncing ? <Throbber is='span' inheritColor /> : t('Sync')}\n\t\t\t\t</Button>\n\t\t\t</ButtonGroup>\n\n\t\t\t<Box withRichContent color='neutral-800'>\n\t\t\t\t<p>\n\t\t\t\t\t{t('Cloud_status_page_description')}:{' '}\n\t\t\t\t\t<a href={statusPageUrl} target='_blank' rel='noopener noreferrer'>\n\t\t\t\t\t\t{statusPageUrl}\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t</Box>\n\t\t</Box>\n\t);\n}\n\nexport default TroubleshootingSection;\n"]}