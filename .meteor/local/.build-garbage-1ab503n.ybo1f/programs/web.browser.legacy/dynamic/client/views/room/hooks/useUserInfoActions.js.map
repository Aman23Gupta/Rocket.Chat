{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/hooks/useUserInfoActions.js"],"names":["_regeneratorRuntime","module","link","default","v","_objectSpread","_toConsumableArray","_objectWithoutProperties","export","useUserInfoActions","Button","ButtonGroup","Icon","Modal","Box","useAutoFocus","useMutableCallback","escapeHTML","React","useCallback","useMemo","RoomRoles","roomTypes","RoomMemberActions","usePermission","useAllPermissions","useSetModal","useRoute","useMethod","useToastMessageDispatch","useTranslation","useUserId","useUserSubscription","useUserSubscriptionByName","useEndpointActionExperimental","useReactiveValue","RemoveUsersModal","useUserRoom","useWebRTC","useUserHasRoomRole","uid","rid","role","findOne","getShouldOpenDirectMessage","currentSubscription","usernameSubscription","canOpenDirectMessage","username","canOpenDm","directMessageIsNotAlreadyOpen","name","getUserIsMuted","room","user","userCanPostReadonly","ro","Array","isArray","unmuted","indexOf","muted","WarningModal","text","confirmText","close","confirm","props","refAutoFocus","t","reload","dispatchToastMessage","directRoute","setModal","_id","ownUserId","closeModal","isLeader","isModerator","isOwner","otherUserCanPostReadonly","isIgnored","ignored","isMuted","endpointPrefix","roomConfig","getConfig","allowMemberAction","SET_AS_OWNER","SET_AS_LEADER","SET_AS_MODERATOR","IGNORE","BLOCK","MUTE","REMOVE_USER","roomCanSetOwner","roomCanSetLeader","roomCanSetModerator","roomCanIgnore","roomCanBlock","roomCanMute","roomCanRemove","roomName","getRoomName","userCanSetOwner","userCanSetLeader","userCanSetModerator","userCanMute","userCanRemove","userCanDirectMessage","shouldAllowCalls","callInProgress","joinCall","startCall","shouldOpenDirectMessage","openDirectDm","push","openDirectMessageOption","label","icon","action","videoCallOption","handleJoinCall","audio","video","handleStartCall","audioCallOption","changeOwnerEndpoint","changeOwnerMessage","changeOwner","room_name","changeOwnerAction","roomId","userId","changeOwnerOption","changeLeaderEndpoint","changeLeaderMessage","changeLeader","changeLeaderAction","changeLeaderOption","changeModeratorEndpoint","changeModeratorMessage","changeModerator","changeModeratorAction","changeModeratorOption","ignoreUser","ignoreUserAction","ignore","type","message","ignoreUserOption","isUserBlocked","blocker","toggleBlock","toggleBlockUserAction","blocked","toggleBlockUserOption","muteFn","muteUserOption","onConfirm","removeFromTeam","removeUserAction","removeUserOptionAction","teamMain","teamId","rooms","roomKeys","Object","keys","length","removeUserOption","openDirectMessage","muteUser","removeUser"],"mappings":"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","file":"dynamic/client/views/room/hooks/useUserInfoActions.js","sourcesContent":["import { Button, ButtonGroup, Icon, Modal, Box } from '@rocket.chat/fuselage';\nimport { useAutoFocus, useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\nimport React, { useCallback, useMemo } from 'react';\n\nimport { RoomRoles } from '../../../../app/models/client';\nimport { roomTypes, RoomMemberActions } from '../../../../app/utils/client';\nimport { usePermission, useAllPermissions } from '../../../contexts/AuthorizationContext';\nimport { useSetModal } from '../../../contexts/ModalContext';\nimport { useRoute } from '../../../contexts/RouterContext';\nimport { useMethod } from '../../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { useUserId, useUserSubscription, useUserSubscriptionByName } from '../../../contexts/UserContext';\nimport { useEndpointActionExperimental } from '../../../hooks/useEndpointActionExperimental';\nimport { useReactiveValue } from '../../../hooks/useReactiveValue';\nimport RemoveUsersModal from '../../teams/contextualBar/members/RemoveUsersModal';\nimport { useUserRoom } from './useUserRoom';\nimport { useWebRTC } from './useWebRTC';\n\nconst useUserHasRoomRole = (uid, rid, role) =>\n\tuseReactiveValue(useCallback(() => !!RoomRoles.findOne({ rid, 'u._id': uid, 'roles': role }), [uid, rid, role]));\n\nconst getShouldOpenDirectMessage = (currentSubscription, usernameSubscription, canOpenDirectMessage, username) => {\n\tconst canOpenDm = canOpenDirectMessage || usernameSubscription;\n\tconst directMessageIsNotAlreadyOpen = currentSubscription && currentSubscription.name !== username;\n\treturn canOpenDm && directMessageIsNotAlreadyOpen;\n};\n\nconst getUserIsMuted = (room, user, userCanPostReadonly) => {\n\tif (room && room.ro) {\n\t\tif (Array.isArray(room.unmuted) && room.unmuted.indexOf(user && user.username) !== -1) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (userCanPostReadonly) {\n\t\t\treturn Array.isArray(room.muted) && room.muted.indexOf(user && user.username) !== -1;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\treturn room && Array.isArray(room.muted) && room.muted.indexOf(user && user.username) > -1;\n};\n\nconst WarningModal = ({ text, confirmText, close, confirm, ...props }) => {\n\tconst refAutoFocus = useAutoFocus(true);\n\tconst t = useTranslation();\n\treturn (\n\t\t<Modal {...props}>\n\t\t\t<Modal.Header>\n\t\t\t\t<Icon color='warning' name='modal-warning' size={20} />\n\t\t\t\t<Modal.Title>{t('Are_you_sure')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={close} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content fontScale='p2'>{text}</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<ButtonGroup align='end'>\n\t\t\t\t\t<Button ghost onClick={close}>\n\t\t\t\t\t\t{t('Cancel')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button ref={refAutoFocus} primary danger onClick={confirm}>\n\t\t\t\t\t\t{confirmText}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport const useUserInfoActions = (user = {}, rid, reload) => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst directRoute = useRoute('direct');\n\n\tconst setModal = useSetModal();\n\n\tconst { _id: uid } = user;\n\tconst ownUserId = useUserId();\n\n\tconst closeModal = useMutableCallback(() => setModal(null));\n\n\tconst room = useUserRoom(rid);\n\tconst currentSubscription = useUserSubscription(rid);\n\tconst usernameSubscription = useUserSubscriptionByName(user.username);\n\n\tconst isLeader = useUserHasRoomRole(uid, rid, 'leader');\n\tconst isModerator = useUserHasRoomRole(uid, rid, 'moderator');\n\tconst isOwner = useUserHasRoomRole(uid, rid, 'owner');\n\n\tconst otherUserCanPostReadonly = useAllPermissions('post-readonly', rid);\n\n\tconst isIgnored = currentSubscription && currentSubscription.ignored && currentSubscription.ignored.indexOf(uid) > -1;\n\tconst isMuted = getUserIsMuted(room, user, otherUserCanPostReadonly);\n\n\tconst endpointPrefix = room.t === 'p' ? 'groups' : 'channels';\n\n\tconst roomConfig = room && room.t && roomTypes.getConfig(room.t);\n\n\tconst [roomCanSetOwner, roomCanSetLeader, roomCanSetModerator, roomCanIgnore, roomCanBlock, roomCanMute, roomCanRemove] = [\n\t\t...(roomConfig && [\n\t\t\troomConfig.allowMemberAction(room, RoomMemberActions.SET_AS_OWNER),\n\t\t\troomConfig.allowMemberAction(room, RoomMemberActions.SET_AS_LEADER),\n\t\t\troomConfig.allowMemberAction(room, RoomMemberActions.SET_AS_MODERATOR),\n\t\t\troomConfig.allowMemberAction(room, RoomMemberActions.IGNORE),\n\t\t\troomConfig.allowMemberAction(room, RoomMemberActions.BLOCK),\n\t\t\troomConfig.allowMemberAction(room, RoomMemberActions.MUTE),\n\t\t\troomConfig.allowMemberAction(room, RoomMemberActions.REMOVE_USER),\n\t\t]),\n\t];\n\n\tconst roomName = room && room.t && escapeHTML(roomTypes.getRoomName(room.t, room));\n\n\tconst userCanSetOwner = usePermission('set-owner', rid);\n\tconst userCanSetLeader = usePermission('set-leader', rid);\n\tconst userCanSetModerator = usePermission('set-moderator', rid);\n\tconst userCanMute = usePermission('mute-user', rid);\n\tconst userCanRemove = usePermission('remove-user', rid);\n\tconst userCanDirectMessage = usePermission('create-d');\n\tconst { shouldAllowCalls, callInProgress, joinCall, startCall } = useWebRTC(rid);\n\n\tconst shouldOpenDirectMessage = getShouldOpenDirectMessage(\n\t\tcurrentSubscription,\n\t\tusernameSubscription,\n\t\tuserCanDirectMessage,\n\t\tuser.username,\n\t);\n\n\tconst openDirectDm = useMutableCallback(() =>\n\t\tdirectRoute.push({\n\t\t\trid: user.username,\n\t\t}),\n\t);\n\n\tconst openDirectMessageOption = useMemo(\n\t\t() =>\n\t\t\tshouldOpenDirectMessage && {\n\t\t\t\tlabel: t('Direct_Message'),\n\t\t\t\ticon: 'balloon',\n\t\t\t\taction: openDirectDm,\n\t\t\t},\n\t\t[openDirectDm, shouldOpenDirectMessage, t],\n\t);\n\n\tconst videoCallOption = useMemo(() => {\n\t\tconst handleJoinCall = () => {\n\t\t\tjoinCall({ audio: true, video: true });\n\t\t};\n\t\tconst handleStartCall = () => {\n\t\t\tstartCall({ audio: true, video: true });\n\t\t};\n\t\tconst action = callInProgress ? handleJoinCall : handleStartCall;\n\n\t\treturn (\n\t\t\tshouldAllowCalls && {\n\t\t\t\tlabel: t(callInProgress ? 'Join_video_call' : 'Start_video_call'),\n\t\t\t\ticon: 'video',\n\t\t\t\taction,\n\t\t\t}\n\t\t);\n\t}, [callInProgress, shouldAllowCalls, t, joinCall, startCall]);\n\n\tconst audioCallOption = useMemo(() => {\n\t\tconst handleJoinCall = () => {\n\t\t\tjoinCall({ audio: true, video: false });\n\t\t};\n\t\tconst handleStartCall = () => {\n\t\t\tstartCall({ audio: true, video: false });\n\t\t};\n\t\tconst action = callInProgress ? handleJoinCall : handleStartCall;\n\n\t\treturn (\n\t\t\tshouldAllowCalls && {\n\t\t\t\tlabel: t(callInProgress ? 'Join_audio_call' : 'Start_audio_call'),\n\t\t\t\ticon: 'mic',\n\t\t\t\taction,\n\t\t\t}\n\t\t);\n\t}, [callInProgress, shouldAllowCalls, t, joinCall, startCall]);\n\n\tconst changeOwnerEndpoint = isOwner ? 'removeOwner' : 'addOwner';\n\tconst changeOwnerMessage = isOwner ? 'User__username__removed_from__room_name__owners' : 'User__username__is_now_a_owner_of__room_name_';\n\tconst changeOwner = useEndpointActionExperimental(\n\t\t'POST',\n\t\t`${endpointPrefix}.${changeOwnerEndpoint}`,\n\t\tt(changeOwnerMessage, { username: user.username, room_name: roomName }),\n\t);\n\tconst changeOwnerAction = useMutableCallback(async () => changeOwner({ roomId: rid, userId: uid }));\n\tconst changeOwnerOption = useMemo(\n\t\t() =>\n\t\t\troomCanSetOwner &&\n\t\t\tuserCanSetOwner && {\n\t\t\t\tlabel: t(isOwner ? 'Remove_as_owner' : 'Set_as_owner'),\n\t\t\t\ticon: 'shield-check',\n\t\t\t\taction: changeOwnerAction,\n\t\t\t},\n\t\t[changeOwnerAction, isOwner, t, roomCanSetOwner, userCanSetOwner],\n\t);\n\n\tconst changeLeaderEndpoint = isLeader ? 'removeLeader' : 'addLeader';\n\tconst changeLeaderMessage = isLeader\n\t\t? 'User__username__removed_from__room_name__leaders'\n\t\t: 'User__username__is_now_a_leader_of__room_name_';\n\tconst changeLeader = useEndpointActionExperimental(\n\t\t'POST',\n\t\t`${endpointPrefix}.${changeLeaderEndpoint}`,\n\t\tt(changeLeaderMessage, { username: user.username, room_name: roomName }),\n\t);\n\tconst changeLeaderAction = useMutableCallback(() => changeLeader({ roomId: rid, userId: uid }));\n\tconst changeLeaderOption = useMemo(\n\t\t() =>\n\t\t\troomCanSetLeader &&\n\t\t\tuserCanSetLeader && {\n\t\t\t\tlabel: t(isLeader ? 'Remove_as_leader' : 'Set_as_leader'),\n\t\t\t\ticon: 'shield-alt',\n\t\t\t\taction: changeLeaderAction,\n\t\t\t},\n\t\t[isLeader, roomCanSetLeader, t, userCanSetLeader, changeLeaderAction],\n\t);\n\n\tconst changeModeratorEndpoint = isModerator ? 'removeModerator' : 'addModerator';\n\tconst changeModeratorMessage = isModerator\n\t\t? 'User__username__removed_from__room_name__moderators'\n\t\t: 'User__username__is_now_a_moderator_of__room_name_';\n\tconst changeModerator = useEndpointActionExperimental(\n\t\t'POST',\n\t\t`${endpointPrefix}.${changeModeratorEndpoint}`,\n\t\tt(changeModeratorMessage, { username: user.username, room_name: roomName }),\n\t);\n\tconst changeModeratorAction = useMutableCallback(() => changeModerator({ roomId: rid, userId: uid }));\n\tconst changeModeratorOption = useMemo(\n\t\t() =>\n\t\t\troomCanSetModerator &&\n\t\t\tuserCanSetModerator && {\n\t\t\t\tlabel: t(isModerator ? 'Remove_as_moderator' : 'Set_as_moderator'),\n\t\t\t\ticon: 'shield',\n\t\t\t\taction: changeModeratorAction,\n\t\t\t},\n\t\t[changeModeratorAction, isModerator, roomCanSetModerator, t, userCanSetModerator],\n\t);\n\n\tconst ignoreUser = useMethod('ignoreUser');\n\tconst ignoreUserAction = useMutableCallback(async () => {\n\t\ttry {\n\t\t\tawait ignoreUser({ rid, userId: uid, ignore: !isIgnored });\n\t\t\tif (isIgnored) {\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('User_has_been_unignored') });\n\t\t\t} else {\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('User_has_been_ignored') });\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t});\n\tconst ignoreUserOption = useMemo(\n\t\t() =>\n\t\t\troomCanIgnore &&\n\t\t\tuid !== ownUserId && {\n\t\t\t\tlabel: t(isIgnored ? 'Unignore' : 'Ignore'),\n\t\t\t\ticon: 'ban',\n\t\t\t\taction: ignoreUserAction,\n\t\t\t},\n\t\t[ignoreUserAction, isIgnored, ownUserId, roomCanIgnore, t, uid],\n\t);\n\n\tconst isUserBlocked = currentSubscription && currentSubscription.blocker;\n\tconst toggleBlock = useMethod(isUserBlocked ? 'unblockUser' : 'blockUser');\n\tconst toggleBlockUserAction = useMutableCallback(async () => {\n\t\ttry {\n\t\t\tawait toggleBlock({ rid, blocked: uid });\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: t(isUserBlocked ? 'User_is_unblocked' : 'User_is_blocked'),\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t});\n\tconst toggleBlockUserOption = useMemo(\n\t\t() =>\n\t\t\troomCanBlock &&\n\t\t\tuid !== ownUserId && {\n\t\t\t\tlabel: t(isUserBlocked ? 'Unblock' : 'Block'),\n\t\t\t\ticon: 'ban',\n\t\t\t\taction: toggleBlockUserAction,\n\t\t\t},\n\t\t[isUserBlocked, ownUserId, roomCanBlock, t, toggleBlockUserAction, uid],\n\t);\n\n\tconst muteFn = useMethod(isMuted ? 'unmuteUserInRoom' : 'muteUserInRoom');\n\tconst muteUserOption = useMemo(() => {\n\t\tconst action = () => {\n\t\t\tconst onConfirm = async () => {\n\t\t\t\ttry {\n\t\t\t\t\tawait muteFn({ rid, username: user.username });\n\t\t\t\t\tcloseModal();\n\t\t\t\t\tdispatchToastMessage({\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\tmessage: t(isMuted ? 'User__username__unmuted_in_room__roomName__' : 'User__username__muted_in_room__roomName__', {\n\t\t\t\t\t\t\tusername: user.username,\n\t\t\t\t\t\t\troomName,\n\t\t\t\t\t\t}),\n\t\t\t\t\t});\n\t\t\t\t} catch (error) {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (isMuted) {\n\t\t\t\treturn onConfirm();\n\t\t\t}\n\n\t\t\tsetModal(\n\t\t\t\t<WarningModal\n\t\t\t\t\ttext={t('The_user_wont_be_able_to_type_in_s', roomName)}\n\t\t\t\t\tclose={closeModal}\n\t\t\t\t\tconfirmText={t('Yes_mute_user')}\n\t\t\t\t\tconfirm={onConfirm}\n\t\t\t\t/>,\n\t\t\t);\n\t\t};\n\n\t\treturn (\n\t\t\troomCanMute &&\n\t\t\tuserCanMute && {\n\t\t\t\tlabel: t(isMuted ? 'Unmute_user' : 'Mute_user'),\n\t\t\t\ticon: isMuted ? 'mic' : 'mic-off',\n\t\t\t\taction,\n\t\t\t}\n\t\t);\n\t}, [closeModal, dispatchToastMessage, isMuted, muteFn, rid, roomCanMute, roomName, setModal, t, user.username, userCanMute]);\n\n\tconst removeFromTeam = useEndpointActionExperimental('POST', 'teams.removeMember', t('User_has_been_removed_from_team'));\n\n\tconst removeUserAction = useEndpointActionExperimental('POST', `${endpointPrefix}.kick`, t('User_has_been_removed_from_s', roomName));\n\tconst removeUserOptionAction = useMutableCallback(() => {\n\t\tif (room.teamMain && room.teamId) {\n\t\t\treturn setModal(\n\t\t\t\t<RemoveUsersModal\n\t\t\t\t\tteamId={room?.teamId}\n\t\t\t\t\tuserId={uid}\n\t\t\t\t\tonClose={closeModal}\n\t\t\t\t\tonCancel={closeModal}\n\t\t\t\t\tonConfirm={async (rooms) => {\n\t\t\t\t\t\tconst roomKeys = Object.keys(rooms);\n\t\t\t\t\t\tawait removeFromTeam({\n\t\t\t\t\t\t\tteamId: room.teamId,\n\t\t\t\t\t\t\tuserId: uid,\n\t\t\t\t\t\t\t...(roomKeys.length && { rooms: roomKeys }),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcloseModal();\n\t\t\t\t\t\treload && reload();\n\t\t\t\t\t}}\n\t\t\t\t/>,\n\t\t\t);\n\t\t}\n\n\t\tsetModal(\n\t\t\t<WarningModal\n\t\t\t\ttext={t('The_user_will_be_removed_from_s', roomName)}\n\t\t\t\tclose={closeModal}\n\t\t\t\tconfirmText={t('Yes_remove_user')}\n\t\t\t\tconfirm={async () => {\n\t\t\t\t\tawait removeUserAction({ roomId: rid, userId: uid });\n\t\t\t\t\tcloseModal();\n\t\t\t\t\treload && reload();\n\t\t\t\t}}\n\t\t\t/>,\n\t\t);\n\t});\n\n\tconst removeUserOption = useMemo(\n\t\t() =>\n\t\t\troomCanRemove &&\n\t\t\tuserCanRemove && {\n\t\t\t\tlabel: <Box color='danger'>{room.teamMain ? t('Remove_from_team') : t('Remove_from_room')}</Box>,\n\t\t\t\ticon: 'sign-out',\n\t\t\t\taction: removeUserOptionAction,\n\t\t\t},\n\t\t[room, roomCanRemove, userCanRemove, removeUserOptionAction, t],\n\t);\n\n\treturn useMemo(\n\t\t() => ({\n\t\t\t...(openDirectMessageOption && { openDirectMessage: openDirectMessageOption }),\n\t\t\t...(videoCallOption && { video: videoCallOption }),\n\t\t\t...(audioCallOption && { audio: audioCallOption }),\n\t\t\t...(changeOwnerOption && { changeOwner: changeOwnerOption }),\n\t\t\t...(changeLeaderOption && { changeLeader: changeLeaderOption }),\n\t\t\t...(changeModeratorOption && { changeModerator: changeModeratorOption }),\n\t\t\t...(ignoreUserOption && { ignoreUser: ignoreUserOption }),\n\t\t\t...(muteUserOption && { muteUser: muteUserOption }),\n\t\t\t...(removeUserOption && { removeUser: removeUserOption }),\n\t\t\t...(toggleBlockUserOption && { toggleBlock: toggleBlockUserOption }),\n\t\t}),\n\t\t[\n\t\t\taudioCallOption,\n\t\t\tchangeLeaderOption,\n\t\t\tchangeModeratorOption,\n\t\t\tchangeOwnerOption,\n\t\t\tignoreUserOption,\n\t\t\tmuteUserOption,\n\t\t\topenDirectMessageOption,\n\t\t\tremoveUserOption,\n\t\t\tvideoCallOption,\n\t\t\ttoggleBlockUserOption,\n\t\t],\n\t);\n};\n"]}