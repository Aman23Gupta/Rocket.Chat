{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/mailer/Mailer.js"],"names":["_slicedToArray","module","link","default","v","export","Mailer","TextInput","TextAreaInput","Field","FieldGroup","CheckBox","Button","Icon","ButtonGroup","React","useState","useCallback","validateEmail","isJSON","Page","useTranslation","sendMail","t","value","fromEmail","setFromEmail","dryRun","setDryRun","query","setQuery","subject","setSubject","emailBody","setEmailBody","e","preventDefault","error","currentTarget","undefined","__html"],"mappings":"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","file":"dynamic/client/views/admin/mailer/Mailer.js","sourcesContent":["import { TextInput, TextAreaInput, Field, FieldGroup, CheckBox, Button, Icon, ButtonGroup } from '@rocket.chat/fuselage';\nimport React, { useState, useCallback } from 'react';\n\nimport { validateEmail } from '../../../../lib/emailValidator';\nimport { isJSON } from '../../../../lib/utils/isJSON';\nimport Page from '../../../components/Page';\nimport { useTranslation } from '../../../contexts/TranslationContext';\n\nexport function Mailer({ sendMail = () => {} }) {\n\tconst t = useTranslation();\n\n\tconst [fromEmail, setFromEmail] = useState({ value: '' });\n\tconst [dryRun, setDryRun] = useState(false);\n\tconst [query, setQuery] = useState({ value: '' });\n\tconst [subject, setSubject] = useState('');\n\tconst [emailBody, setEmailBody] = useState('');\n\n\treturn (\n\t\t<Page>\n\t\t\t<Page.Header title={t('Mailer')}>\n\t\t\t\t<ButtonGroup align='end'>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tprimary\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tsendMail({ fromEmail, dryRun, query, subject, emailBody });\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon name='send' size='x20' mie='x8' />\n\t\t\t\t\t\t{t('Send_email')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Page.Header>\n\t\t\t<Page.ScrollableContentWithShadow alignSelf='center' w='100%' display='flex' flexDirection='column' alignItems='center'>\n\t\t\t\t<FieldGroup maxWidth='x600' is='form' onSubmit={useCallback((e) => e.preventDefault(), [])} method='post'>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('From')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tid='fromEmail'\n\t\t\t\t\t\t\t\tplaceholder={t('Type_your_email')}\n\t\t\t\t\t\t\t\tvalue={fromEmail.value}\n\t\t\t\t\t\t\t\terror={fromEmail.error}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetFromEmail({\n\t\t\t\t\t\t\t\t\t\tvalue: e.currentTarget.value,\n\t\t\t\t\t\t\t\t\t\terror: !validateEmail(e.currentTarget.value) ? t('Invalid_Email') : undefined,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<CheckBox id='dryRun' checked={dryRun} onChange={() => setDryRun(!dryRun)} />\n\t\t\t\t\t\t\t<Field.Label htmlFor='dry-run'>{t('Dry_run')}</Field.Label>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t<Field.Hint>{t('Dry_run_description')}</Field.Hint>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('Query')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tid='query'\n\t\t\t\t\t\t\t\tvalue={query.value}\n\t\t\t\t\t\t\t\terror={query.error}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetQuery({\n\t\t\t\t\t\t\t\t\t\tvalue: e.currentTarget.value,\n\t\t\t\t\t\t\t\t\t\terror: e.currentTarget.value && !isJSON(e.currentTarget.value) ? t('Invalid_JSON') : undefined,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t<Field.Hint>{t('Query_description')}</Field.Hint>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('Subject')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tid='subject'\n\t\t\t\t\t\t\t\tvalue={subject.value}\n\t\t\t\t\t\t\t\terror={subject.error}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetSubject(e.currentTarget.value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('Email_body')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextAreaInput id='emailBody' rows={10} value={emailBody} onChange={(e) => setEmailBody(e.currentTarget.value)} />\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t<Field.Hint dangerouslySetInnerHTML={{ __html: t('Mailer_body_tags') }} />\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</Page.ScrollableContentWithShadow>\n\t\t</Page>\n\t);\n}\n"]}