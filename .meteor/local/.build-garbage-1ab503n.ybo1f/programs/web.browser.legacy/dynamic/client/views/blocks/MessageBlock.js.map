{"version":3,"sources":["meteor://ðŸ’»app/client/views/blocks/MessageBlock.js"],"names":["UIKitIncomingInteractionContainerType","module","link","v","UiKitMessage","UiKitComponent","kitContext","messageParser","React","ActionManager","useBlockRendered","renderMessageBody","mrkdwn","text","__html","msg","MessageBlock","_mid","mid","rid","blocks","appId","ref","className","context","action","actionId","value","blockId","triggerBlockAction","container","type","MESSAGE","id","exportDefault"],"mappings":"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","file":"dynamic/client/views/blocks/MessageBlock.js","sourcesContent":["import { UIKitIncomingInteractionContainerType } from '@rocket.chat/apps-engine/definition/uikit/UIKitIncomingInteractionContainer';\nimport { UiKitMessage, UiKitComponent, kitContext, messageParser } from '@rocket.chat/fuselage-ui-kit';\nimport React from 'react';\n\nimport * as ActionManager from '../../../app/ui-message/client/ActionManager';\nimport { useBlockRendered } from '../../components/Message/hooks/useBlockRendered';\nimport { renderMessageBody } from '../../lib/utils/renderMessageBody';\nimport './textParsers';\n\n// TODO: move this to fuselage-ui-kit itself\nconst mrkdwn = ({ text } = {}) => text && <span dangerouslySetInnerHTML={{ __html: renderMessageBody({ msg: text }) }} />;\n\nmessageParser.mrkdwn = mrkdwn;\nfunction MessageBlock({ mid: _mid, rid, blocks, appId }) {\n\tconst { ref, className } = useBlockRendered();\n\tconst context = {\n\t\taction: ({ actionId, value, blockId, mid = _mid }) => {\n\t\t\tActionManager.triggerBlockAction({\n\t\t\t\tblockId,\n\t\t\t\tactionId,\n\t\t\t\tvalue,\n\t\t\t\tmid,\n\t\t\t\trid,\n\t\t\t\tappId: blocks[0].appId,\n\t\t\t\tcontainer: {\n\t\t\t\t\ttype: UIKitIncomingInteractionContainerType.MESSAGE,\n\t\t\t\t\tid: mid,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tappId,\n\t\trid,\n\t};\n\n\treturn (\n\t\t<kitContext.Provider value={context}>\n\t\t\t<div className={className} ref={ref} />\n\t\t\t<UiKitComponent render={UiKitMessage} blocks={blocks} />\n\t\t</kitContext.Provider>\n\t);\n}\n\nexport default MessageBlock;\n"]}