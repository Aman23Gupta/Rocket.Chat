{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/cloud/CopyStep.tsx"],"names":[],"mappings":"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","file":"dynamic/client/views/admin/cloud/CopyStep.tsx","sourcesContent":["import { Box, Button, ButtonGroup, Icon, Scrollable, Modal } from '@rocket.chat/fuselage';\nimport Clipboard from 'clipboard';\nimport React, { useEffect, useState, useRef, FC } from 'react';\n\nimport MarkdownText from '../../../components/MarkdownText';\nimport { useMethod } from '../../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { cloudConsoleUrl } from './constants';\n\ntype CopyStepProps = {\n\tonNextButtonClick: () => void;\n};\n\nconst CopyStep: FC<CopyStepProps> = ({ onNextButtonClick }) => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst [clientKey, setClientKey] = useState('');\n\n\tconst getWorkspaceRegisterData = useMethod('cloud:getWorkspaceRegisterData');\n\n\tuseEffect(() => {\n\t\tconst loadWorkspaceRegisterData = async (): Promise<void> => {\n\t\t\tconst clientKey = await getWorkspaceRegisterData();\n\t\t\tsetClientKey(clientKey);\n\t\t};\n\n\t\tloadWorkspaceRegisterData();\n\t}, [getWorkspaceRegisterData]);\n\n\tconst copyRef = useRef<Element>();\n\n\tuseEffect(() => {\n\t\tif (!copyRef.current) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst clipboard = new Clipboard(copyRef.current);\n\t\tclipboard.on('success', () => {\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Copied') });\n\t\t});\n\n\t\treturn (): void => {\n\t\t\tclipboard.destroy();\n\t\t};\n\t}, [dispatchToastMessage, t]);\n\n\treturn (\n\t\t<>\n\t\t\t<Modal.Content>\n\t\t\t\t<Box withRichContent>\n\t\t\t\t\t<p>{t('Cloud_register_offline_helper')}</p>\n\t\t\t\t</Box>\n\t\t\t\t<Box display='flex' flexDirection='column' alignItems='stretch' padding='x16' flexGrow={1} backgroundColor='neutral-800'>\n\t\t\t\t\t<Scrollable vertical>\n\t\t\t\t\t\t<Box height='x108' fontFamily='mono' fontScale='p2' color='alternative' style={{ wordBreak: 'break-all' }}>\n\t\t\t\t\t\t\t{clientKey}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Scrollable>\n\t\t\t\t\t<Button ref={copyRef} primary data-clipboard-text={clientKey}>\n\t\t\t\t\t\t<Icon name='copy' /> {t('Copy')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Box>\n\t\t\t\t<MarkdownText preserveHtml={true} content={t('Cloud_click_here', { cloudConsoleUrl })} />\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t<Button primary onClick={onNextButtonClick}>\n\t\t\t\t\t\t{t('Next')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Modal.Footer>\n\t\t</>\n\t);\n};\n\nexport default CopyStep;\n"]}