{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/permissions/hooks/usePermissionsAndRoles.ts"],"names":[],"mappings":";;;;;;;;AAAA,OAAO,MAAP,CAAS;AAAA,wBAA0B;AAAA;AAA8B;AAAxD,CAAT;AAAiE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAQ1D,IAAM,sBAAsB,GAAG,YAAwE;AAAA,MAAvE,IAAuE,uEAAhE,aAAgE;AAAA,MAAjD,MAAiD,uEAAxC,EAAwC;AAAA,MAApC,KAAoC,uEAA5B,EAA4B;AAAA,MAAxB,IAAwB,uEAAjB,CAAiB;AAC7G,MAAM,cAAc,GAAG,WAAW,CAAC,YAAK;AACvC,QAAM,YAAY,GAAG,IAAI,MAAJ,CAAW,MAAX,EAAmB,GAAnB,CAArB;AAEA,WAAO,eAAe,CAAC,IAAhB,CACN;AACC,WAAK,EAAE,IAAI,KAAK,aAAT,GAAyB;AAAE,WAAG,EAAE,SAAS,CAAC;AAAjB,OAAzB,GAA6D,SAAS,CAAC,cAD/E;AAEC,SAAG,EAAE;AAFN,KADM,EAKN;AACC,UAAI,EAAE;AACL,WAAG,EAAE;AADA,OADP;AAIC,UAAI,EAAJ,IAJD;AAKC,WAAK,EAAL;AALD,KALM,CAAP;AAaA,GAhBiC,EAgB/B,CAAC,MAAD,EAAS,KAAT,EAAgB,IAAhB,EAAsB,IAAtB,CAhB+B,CAAlC;AAkBA,MAAM,QAAQ,GAAG,kBAAkB,CAAC;AAAA,WAAM,KAAK,CAAC,IAAN,GAAa,KAAb,EAAN;AAAA,GAAD,CAAnC;AAEA,MAAM,WAAW,GAAG,gBAAgB,CAAC,cAAD,CAApC;AACA,MAAM,KAAK,GAAG,gBAAgB,CAAC,QAAD,CAA9B;AAEA,MAAM,WAAW,GAAG,QAAQ,EAA5B;AAEA,SAAO,CAAC,WAAW,CAAC,KAAZ,EAAD,EAAsB,WAAW,CAAC,KAAZ,CAAkB,KAAlB,CAAtB,EAAgD,KAAhD,EAAuD,WAAvD,CAAP;AACA,CA3BM,C","file":"dynamic/client/views/admin/permissions/hooks/usePermissionsAndRoles.ts","sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { useCallback } from 'react';\n\nimport { ChatPermissions } from '../../../../../app/authorization/client/lib/ChatPermissions';\nimport { CONSTANTS } from '../../../../../app/authorization/lib';\nimport { Roles } from '../../../../../app/models/client';\nimport { useReactiveValue } from '../../../../hooks/useReactiveValue';\n\nexport const usePermissionsAndRoles = (type = 'permissions', filter = '', limit = 25, skip = 0): Array<any> => {\n\tconst getPermissions = useCallback(() => {\n\t\tconst filterRegExp = new RegExp(filter, 'i');\n\n\t\treturn ChatPermissions.find(\n\t\t\t{\n\t\t\t\tlevel: type === 'permissions' ? { $ne: CONSTANTS.SETTINGS_LEVEL } : CONSTANTS.SETTINGS_LEVEL,\n\t\t\t\t_id: filterRegExp,\n\t\t\t},\n\t\t\t{\n\t\t\t\tsort: {\n\t\t\t\t\t_id: 1,\n\t\t\t\t},\n\t\t\t\tskip,\n\t\t\t\tlimit,\n\t\t\t},\n\t\t);\n\t}, [filter, limit, skip, type]);\n\n\tconst getRoles = useMutableCallback(() => Roles.find().fetch());\n\n\tconst permissions = useReactiveValue(getPermissions);\n\tconst roles = useReactiveValue(getRoles);\n\n\tconst reloadRoles = getRoles();\n\n\treturn [permissions.fetch(), permissions.count(false), roles, reloadRoles];\n};\n"]}