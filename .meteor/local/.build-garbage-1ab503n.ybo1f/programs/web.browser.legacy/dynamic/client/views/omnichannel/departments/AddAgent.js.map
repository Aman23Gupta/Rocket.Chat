{"version":3,"sources":["meteor://ğŸ’»app/client/views/omnichannel/departments/AddAgent.js"],"names":["_regeneratorRuntime","module","link","default","v","_extends","_objectSpread","_toConsumableArray","_slicedToArray","_objectWithoutProperties","Box","Button","useMutableCallback","React","useState","AutoCompleteAgent","useToastMessageDispatch","useTranslation","useEndpointAction","AddAgent","agentList","setAgentsAdded","setAgentList","props","t","userId","setUserId","getAgent","dispatchToastMessage","handleAgent","e","handleSave","user","filter","agentId","_id","length","agents","type","message","exportDefault"],"mappings":"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","file":"dynamic/client/views/omnichannel/departments/AddAgent.js","sourcesContent":["import { Box, Button } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useState } from 'react';\n\nimport AutoCompleteAgent from '../../../components/AutoCompleteAgent';\nimport { useToastMessageDispatch } from '../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { useEndpointAction } from '../../../hooks/useEndpointAction';\n\nfunction AddAgent({ agentList, setAgentsAdded, setAgentList, ...props }) {\n\tconst t = useTranslation();\n\tconst [userId, setUserId] = useState();\n\tconst getAgent = useEndpointAction('GET', `livechat/users/agent/${userId}`);\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst handleAgent = useMutableCallback((e) => setUserId(e));\n\n\tconst handleSave = useMutableCallback(async () => {\n\t\tif (!userId) {\n\t\t\treturn;\n\t\t}\n\t\tconst { user } = await getAgent();\n\n\t\tif (agentList.filter((e) => e.agentId === user._id).length === 0) {\n\t\t\tsetAgentList([{ ...user, agentId: user._id }, ...agentList]);\n\t\t\tsetUserId();\n\t\t\tsetAgentsAdded((agents) => [...agents, { agentId: user._id }]);\n\t\t} else {\n\t\t\tdispatchToastMessage({ type: 'error', message: t('This_agent_was_already_selected') });\n\t\t}\n\t});\n\treturn (\n\t\t<Box display='flex' alignItems='center' {...props}>\n\t\t\t<AutoCompleteAgent empty value={userId} onChange={handleAgent} />\n\t\t\t<Button disabled={!userId} onClick={handleSave} mis='x8' primary>\n\t\t\t\t{t('Add')}\n\t\t\t</Button>\n\t\t</Box>\n\t);\n}\n\nexport default AddAgent;\n"]}