{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/apps/IframeModal.js"],"names":["_extends","module","link","default","v","_objectWithoutProperties","Box","Modal","React","useEffect","iframeMsgListener","confirm","cancel","e","data","JSON","parse","result","IframeModal","url","props","listener","window","addEventListener","removeEventListener","border","height","width","exportDefault"],"mappings":";;;;;;;;;;AAAA,IAAIA,QAAJ;;AAAaC,MAAM,CAACC,IAAP,CAAY,gCAAZ,EAA6C;AAACC,SAAO,EAAC,UAASC,CAAT,EAAW;AAACJ,YAAQ,GAACI,CAAT;AAAW;AAAhC,CAA7C,EAA+E,CAA/E;;AAAkF,IAAIC,wBAAJ;;AAA6BJ,MAAM,CAACC,IAAP,CAAY,gDAAZ,EAA6D;AAACC,SAAO,EAAC,UAASC,CAAT,EAAW;AAACC,4BAAwB,GAACD,CAAzB;AAA2B;AAAhD,CAA7D,EAA+G,CAA/G;AAA5H,IAAIE,GAAJ,EAAQC,KAAR;AAAcN,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAoC;AAACI,KAAG,EAAC,UAASF,CAAT,EAAW;AAACE,OAAG,GAACF,CAAJ;AAAM,GAAvB;AAAwBG,OAAK,EAAC,UAASH,CAAT,EAAW;AAACG,SAAK,GAACH,CAAN;AAAQ;AAAlD,CAApC,EAAwF,CAAxF;AAA2F,IAAII,KAAJ,EAAUC,SAAV;AAAoBR,MAAM,CAACC,IAAP,CAAY,OAAZ,EAAoB;AAAC,aAAQ,UAASE,CAAT,EAAW;AAACI,SAAK,GAACJ,CAAN;AAAQ,GAA7B;AAA8BK,WAAS,EAAC,UAASL,CAAT,EAAW;AAACK,aAAS,GAACL,CAAV;AAAY;AAAhE,CAApB,EAAsF,CAAtF;;AAG7H,IAAMM,iBAAiB,GAAG,UAACC,OAAD,EAAUC,MAAV;AAAA,SAAqB,UAACC,CAAD,EAAO;AACrD,QAAIC,IAAJ;;AACA,QAAI;AACHA,UAAI,GAAGC,IAAI,CAACC,KAAL,CAAWH,CAAC,CAACC,IAAb,CAAP;AACA,KAFD,CAEE,OAAOD,CAAP,EAAU;AACX;AACA;;AAEDC,QAAI,CAACG,MAAL,GAAcN,OAAO,CAACG,IAAD,CAArB,GAA8BF,MAAM,EAApC;AACA,GATyB;AAAA,CAA1B;;AAWA,IAAMM,WAAW,GAAG,gBAAwC;AAAA,MAArCC,GAAqC,QAArCA,GAAqC;AAAA,MAAhCR,OAAgC,QAAhCA,OAAgC;AAAA,MAAvBC,MAAuB,QAAvBA,MAAuB;AAAA,MAAZQ,KAAY;;AAC3DX,WAAS,CAAC,YAAM;AACf,QAAMY,QAAQ,GAAGX,iBAAiB,CAACC,OAAD,EAAUC,MAAV,CAAlC;AAEAU,UAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmCF,QAAnC;AAEA,WAAO,YAAM;AACZC,YAAM,CAACE,mBAAP,CAA2B,SAA3B,EAAsCH,QAAtC;AACA,KAFD;AAGA,GARQ,EAQN,CAACV,OAAD,EAAUC,MAAV,CARM,CAAT;AAUA,sBACC,oBAAC,KAAD;AAAO,UAAM,EAAC;AAAd,KAAyBQ,KAAzB,gBACC,oBAAC,GAAD;AAAK,WAAO,EAAC,KAAb;AAAmB,KAAC,EAAC,MAArB;AAA4B,KAAC,EAAC,MAA9B;AAAqC,YAAQ,EAAE;AAA/C,kBACC;AAAQ,SAAK,EAAE;AAAEK,YAAM,EAAE,MAAV;AAAkBC,YAAM,EAAE,MAA1B;AAAkCC,WAAK,EAAE;AAAzC,KAAf;AAAkE,OAAG,EAAER;AAAvE,IADD,CADD,CADD;AAOA,CAlBD;;AAdAlB,MAAM,CAAC2B,aAAP,CAkCeV,WAlCf,E","file":"dynamic/client/views/admin/apps/IframeModal.js","sourcesContent":["import { Box, Modal } from '@rocket.chat/fuselage';\nimport React, { useEffect } from 'react';\n\nconst iframeMsgListener = (confirm, cancel) => (e) => {\n\tlet data;\n\ttry {\n\t\tdata = JSON.parse(e.data);\n\t} catch (e) {\n\t\treturn;\n\t}\n\n\tdata.result ? confirm(data) : cancel();\n};\n\nconst IframeModal = ({ url, confirm, cancel, ...props }) => {\n\tuseEffect(() => {\n\t\tconst listener = iframeMsgListener(confirm, cancel);\n\n\t\twindow.addEventListener('message', listener);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('message', listener);\n\t\t};\n\t}, [confirm, cancel]);\n\n\treturn (\n\t\t<Modal height='x360' {...props}>\n\t\t\t<Box padding='x12' w='full' h='full' flexGrow={1}>\n\t\t\t\t<iframe style={{ border: 'none', height: '100%', width: '100%' }} src={url} />\n\t\t\t</Box>\n\t\t</Modal>\n\t);\n};\n\nexport default IframeModal;\n"]}