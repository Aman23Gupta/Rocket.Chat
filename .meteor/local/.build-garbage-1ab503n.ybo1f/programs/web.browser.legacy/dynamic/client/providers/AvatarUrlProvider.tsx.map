{"version":3,"sources":["meteor://ðŸ’»app/client/providers/AvatarUrlProvider.tsx"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAAgB,MAAO,CAAM,IAAb,CAAa,sCAAb,EAA2B;AAAA;AAAA;AAAA;AAAA,CAA3B,EAA2B,CAA3B;;AAA2B;;AAAA;AAAA;AAAA;AAAA;AAAA;AAA3C,WAAO,OAAP;AAAgB,MAAO,CAAM,IAAb,CAAa,OAAb,EAA0B;AAAC;AAAA;AAAA,GAAD;AAAC;AAAA;AAAA;AAAD,CAA1B,EAA2B,CAA3B;AAA2B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAO3C,IAAM,iBAAiB,GAAO,gBAAiB;AAAA,MAAd,QAAc,QAAd,QAAc;AAC9C,MAAM,YAAY,GAAG,MAAM,CAAC,UAAU,CAAC,YAAD,CAAV,IAA4B,EAA7B,CAA3B;AACA,MAAM,mBAAmB,GAAG,MAAM,CAAC,UAAU,CAAC,oCAAD,CAAV,IAAoD,EAArD,CAAlC;AACA,MAAM,YAAY,GAAG,OAAO,CAC3B;AAAA,WAAO;AACN,uBAAiB,EAAG,YAA+C;AAClE,YAAI,mBAAJ,EAAyB;AACxB,iBAAO,UAAC,GAAD;AAAA,mBAAyB,mBAAmB,CAAC,IAApB,GAA2B,OAA3B,CAAmC,MAAnC,EAA2C,EAA3C,EAA+C,OAA/C,CAAuD,YAAvD,EAAqE,GAArE,CAAzB;AAAA,WAAP;AACA;;AACD,YAAI,YAAJ,EAAkB;AACjB,iBAAO,UAAC,GAAD,EAAc,IAAd;AAAA,mBAA2C,YAA3C,gBAAkE,GAAlE,IAAwE,IAAI,cAAY,IAAZ,GAAqB,EAAjG;AAAA,WAAP;AACA;;AACD,eAAO,UAAC,GAAD,EAAc,IAAd;AAAA,iBAAwC,MAAM,cAAY,GAAZ,IAAkB,IAAI,cAAY,IAAZ,GAAqB,EAA3C,EAA9C;AAAA,SAAP;AACA,OARkB,EADb;AAUN,uBAAiB,EAAE;AAAA,YAAG,IAAH,SAAG,IAAH;AAAA,YAAY,IAAZ;;AAAA,eAClB,SAAS,CAAC,SAAV,CAAoB,IAAI,IAAI,IAAI,CAAC,CAAjC,EAAoC,aAApC;AAAoD,kBAAQ,EAAE,IAAI,CAAC;AAAnE,WAA2E,IAA3E,EADkB;AAAA;AAVb,KAAP;AAAA,GAD2B,EAc3B,CAAC,mBAAD,EAAsB,YAAtB,CAd2B,CAA5B;AAiBA,sBAAO,oBAAC,gBAAD,CAAkB,QAAlB;AAA2B,YAAQ,EAAE,QAArC;AAA+C,SAAK,EAAE;AAAtD,IAAP;AACA,CArBD;;AAPA,OAAO,aAAP,CA8Be,iBA9Bf,E","file":"dynamic/client/providers/AvatarUrlProvider.tsx","sourcesContent":["import React, { useMemo, FC } from 'react';\n\nimport { roomTypes } from '../../app/utils/client';\nimport { getURL } from '../../app/utils/lib/getURL';\nimport { AvatarUrlContext } from '../contexts/AvatarUrlContext';\nimport { useSetting } from '../contexts/SettingsContext';\n\nconst AvatarUrlProvider: FC = ({ children }) => {\n\tconst cdnAvatarUrl = String(useSetting('CDN_PREFIX') || '');\n\tconst externalProviderUrl = String(useSetting('Accounts_AvatarExternalProviderUrl') || '');\n\tconst contextValue = useMemo(\n\t\t() => ({\n\t\t\tgetUserPathAvatar: ((): ((uid: string, etag?: string) => string) => {\n\t\t\t\tif (externalProviderUrl) {\n\t\t\t\t\treturn (uid: string): string => externalProviderUrl.trim().replace(/\\/+$/, '').replace('{username}', uid);\n\t\t\t\t}\n\t\t\t\tif (cdnAvatarUrl) {\n\t\t\t\t\treturn (uid: string, etag?: string): string => `${cdnAvatarUrl}/avatar/${uid}${etag ? `?etag=${etag}` : ''}`;\n\t\t\t\t}\n\t\t\t\treturn (uid: string, etag?: string): string => getURL(`/avatar/${uid}${etag ? `?etag=${etag}` : ''}`);\n\t\t\t})(),\n\t\t\tgetRoomPathAvatar: ({ type, ...room }: any): string =>\n\t\t\t\troomTypes.getConfig(type || room.t).getAvatarPath({ username: room._id, ...room }),\n\t\t}),\n\t\t[externalProviderUrl, cdnAvatarUrl],\n\t);\n\n\treturn <AvatarUrlContext.Provider children={children} value={contextValue} />;\n};\n\nexport default AvatarUrlProvider;\n"]}