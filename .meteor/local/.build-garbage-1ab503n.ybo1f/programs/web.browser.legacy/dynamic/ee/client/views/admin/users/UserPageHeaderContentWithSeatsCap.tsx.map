{"version":3,"sources":["meteor://ðŸ’»app/ee/client/views/admin/users/UserPageHeaderContentWithSeatsCap.tsx"],"names":[],"mappings":"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","file":"dynamic/ee/client/views/admin/users/UserPageHeaderContentWithSeatsCap.tsx","sourcesContent":["import { Button, ButtonGroup, Icon, Margins } from '@rocket.chat/fuselage';\nimport React, { ReactElement } from 'react';\n\nimport ExternalLink from '../../../../../client/components/ExternalLink';\nimport { useSetModal } from '../../../../../client/contexts/ModalContext';\nimport { useRoute } from '../../../../../client/contexts/RouterContext';\nimport { useTranslation } from '../../../../../client/contexts/TranslationContext';\nimport CloseToSeatsCapModal from './CloseToSeatsCapModal';\nimport ReachedSeatsCapModal from './ReachedSeatsCapModal';\nimport SeatsCapUsage from './SeatsCapUsage';\nimport { useRequestSeatsLink } from './useRequestSeatsLink';\n\ntype UserPageHeaderContentWithSeatsCapProps = {\n\tactiveUsers: number;\n\tmaxActiveUsers: number;\n};\n\nconst UserPageHeaderContentWithSeatsCap = ({ activeUsers, maxActiveUsers }: UserPageHeaderContentWithSeatsCapProps): ReactElement => {\n\tconst seatsLinkUrl = useRequestSeatsLink();\n\n\tconst t = useTranslation();\n\tconst usersRoute = useRoute('admin-users');\n\n\tconst setModal = useSetModal();\n\tconst closeModal = (): void => setModal(null);\n\n\tconst isCloseToLimit = (): boolean => {\n\t\tconst ratio = activeUsers / maxActiveUsers;\n\t\treturn ratio >= 0.8;\n\t};\n\n\tconst hasReachedLimit = (): boolean => {\n\t\tconst ratio = activeUsers / maxActiveUsers;\n\t\treturn ratio >= 1;\n\t};\n\n\tconst withPreventionOnReachedLimit = (fn: () => void) => (): void => {\n\t\tif (typeof seatsLinkUrl !== 'string') {\n\t\t\treturn;\n\t\t}\n\t\tif (hasReachedLimit()) {\n\t\t\tsetModal(<ReachedSeatsCapModal members={activeUsers} limit={maxActiveUsers} requestSeatsLink={seatsLinkUrl} onClose={closeModal} />);\n\t\t\treturn;\n\t\t}\n\n\t\tfn();\n\t};\n\n\tconst handleNewButtonClick = withPreventionOnReachedLimit(() => {\n\t\tif (typeof seatsLinkUrl !== 'string') {\n\t\t\treturn;\n\t\t}\n\t\tif (isCloseToLimit()) {\n\t\t\tsetModal(\n\t\t\t\t<CloseToSeatsCapModal\n\t\t\t\t\tmembers={activeUsers}\n\t\t\t\t\tlimit={maxActiveUsers}\n\t\t\t\t\ttitle={t('Create_new_members')}\n\t\t\t\t\trequestSeatsLink={seatsLinkUrl}\n\t\t\t\t\tonConfirm={(): void => {\n\t\t\t\t\t\tusersRoute.push({ context: 'new' });\n\t\t\t\t\t\tcloseModal();\n\t\t\t\t\t}}\n\t\t\t\t\tonClose={closeModal}\n\t\t\t\t/>,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tusersRoute.push({ context: 'new' });\n\t});\n\n\tconst handleInviteButtonClick = withPreventionOnReachedLimit(() => {\n\t\tif (typeof seatsLinkUrl !== 'string') {\n\t\t\treturn;\n\t\t}\n\t\tif (isCloseToLimit()) {\n\t\t\tsetModal(\n\t\t\t\t<CloseToSeatsCapModal\n\t\t\t\t\tmembers={activeUsers}\n\t\t\t\t\tlimit={maxActiveUsers}\n\t\t\t\t\ttitle={t('Invite_Users')}\n\t\t\t\t\trequestSeatsLink={seatsLinkUrl}\n\t\t\t\t\tonConfirm={(): void => {\n\t\t\t\t\t\tusersRoute.push({ context: 'invite' });\n\t\t\t\t\t\tcloseModal();\n\t\t\t\t\t}}\n\t\t\t\t\tonClose={closeModal}\n\t\t\t\t/>,\n\t\t\t);\n\t\t\treturn;\n\t\t}\n\n\t\tusersRoute.push({ context: 'invite' });\n\t});\n\n\treturn (\n\t\t<>\n\t\t\t<Margins inline='x16'>\n\t\t\t\t<SeatsCapUsage members={activeUsers} limit={maxActiveUsers} />\n\t\t\t</Margins>\n\t\t\t<ButtonGroup>\n\t\t\t\t<Button onClick={handleNewButtonClick}>\n\t\t\t\t\t<Icon size='x20' name='user-plus' /> {t('New')}\n\t\t\t\t</Button>\n\t\t\t\t<Button onClick={handleInviteButtonClick}>\n\t\t\t\t\t<Icon size='x20' name='mail' /> {t('Invite')}\n\t\t\t\t</Button>\n\t\t\t\t<ExternalLink to={seatsLinkUrl || ''}>\n\t\t\t\t\t<Button>\n\t\t\t\t\t\t<Icon size='x20' name='new-window' /> {t('Request_seats')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ExternalLink>\n\t\t\t</ButtonGroup>\n\t\t</>\n\t);\n};\n\nexport default UserPageHeaderContentWithSeatsCap;\n"]}