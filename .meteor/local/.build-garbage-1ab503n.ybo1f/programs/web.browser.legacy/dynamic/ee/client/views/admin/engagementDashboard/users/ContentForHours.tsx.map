{"version":3,"sources":["meteor://ðŸ’»app/ee/client/views/admin/engagementDashboard/users/ContentForHours.tsx"],"names":[],"mappings":"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","file":"dynamic/ee/client/views/admin/engagementDashboard/users/ContentForHours.tsx","sourcesContent":["import { ResponsiveBar } from '@nivo/bar';\nimport { Box, Button, Chevron, Skeleton } from '@rocket.chat/fuselage';\nimport { useBreakpoints } from '@rocket.chat/fuselage-hooks';\nimport colors from '@rocket.chat/fuselage-tokens/colors.json';\nimport moment from 'moment';\nimport React, { ReactElement, useMemo } from 'react';\n\nimport { useTranslation } from '../../../../../../client/contexts/TranslationContext';\nimport { useHourlyChatActivity } from './useHourlyChatActivity';\n\ntype ContentForHoursProps = {\n\tdisplacement: number;\n\tonPreviousDateClick: () => void;\n\tonNextDateClick: () => void;\n\ttimezone: 'utc' | 'local';\n};\n\nconst ContentForHours = ({ displacement, onPreviousDateClick, onNextDateClick, timezone }: ContentForHoursProps): ReactElement => {\n\tconst utc = timezone === 'utc';\n\tconst { data } = useHourlyChatActivity({ displacement, utc });\n\n\tconst t = useTranslation();\n\tconst isLgScreen = useBreakpoints().includes('lg');\n\n\tconst values = useMemo(() => {\n\t\tif (!data) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst divider = 2;\n\t\tconst values = Array.from({ length: 24 / divider }, (_, i) => ({\n\t\t\thour: String(divider * i),\n\t\t\tusers: 0,\n\t\t}));\n\n\t\tfor (const { hour, users } of data?.hours ?? []) {\n\t\t\tconst i = Math.floor(hour / divider);\n\t\t\tvalues[i] = values[i] || { hour: String(divider * i), users: 0 };\n\t\t\tvalues[i].users += users;\n\t\t}\n\n\t\treturn values;\n\t}, [data]);\n\n\treturn (\n\t\t<>\n\t\t\t<Box display='flex' alignItems='center' justifyContent='center'>\n\t\t\t\t<Button ghost square small onClick={onPreviousDateClick}>\n\t\t\t\t\t<Chevron left size='x20' style={{ verticalAlign: 'middle' }} />\n\t\t\t\t</Button>\n\t\t\t\t<Box mi='x8' flexBasis='25%' is='span' style={{ textAlign: 'center' }}>\n\t\t\t\t\t{data ? moment(data.day).format(displacement < 7 ? 'dddd' : 'L') : null}\n\t\t\t\t</Box>\n\t\t\t\t<Button ghost square small disabled={displacement === 0} onClick={onNextDateClick}>\n\t\t\t\t\t<Chevron right size='x20' style={{ verticalAlign: 'middle' }} />\n\t\t\t\t</Button>\n\t\t\t</Box>\n\t\t\t{data ? (\n\t\t\t\t<Box display='flex' height='196px'>\n\t\t\t\t\t<Box alignSelf='stretch' flexGrow={1} flexShrink={0} position='relative'>\n\t\t\t\t\t\t<Box position='absolute' width='100%' height='100%'>\n\t\t\t\t\t\t\t<ResponsiveBar\n\t\t\t\t\t\t\t\tdata={values}\n\t\t\t\t\t\t\t\tindexBy='hour'\n\t\t\t\t\t\t\t\tkeys={['users']}\n\t\t\t\t\t\t\t\tgroupMode='grouped'\n\t\t\t\t\t\t\t\tpadding={0.25}\n\t\t\t\t\t\t\t\tmargin={{\n\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\tbottom: 30,\n\t\t\t\t\t\t\t\t\tright: 5,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tcolors={[\n\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\tcolors.b500,\n\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\tenableLabel={false}\n\t\t\t\t\t\t\t\tenableGridY={false}\n\t\t\t\t\t\t\t\taxisTop={null}\n\t\t\t\t\t\t\t\taxisRight={null}\n\t\t\t\t\t\t\t\taxisBottom={{\n\t\t\t\t\t\t\t\t\ttickSize: 0,\n\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\ttickPadding: 4,\n\t\t\t\t\t\t\t\t\ttickRotation: isLgScreen ? 0 : 25,\n\t\t\t\t\t\t\t\t\ttickValues: 'every 2 hours',\n\t\t\t\t\t\t\t\t\tformat: (hour): string => moment().set({ hour, minute: 0, second: 0 }).format('LT'),\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\taxisLeft={null}\n\t\t\t\t\t\t\t\tanimate={true}\n\t\t\t\t\t\t\t\tmotionStiffness={90}\n\t\t\t\t\t\t\t\tmotionDamping={15}\n\t\t\t\t\t\t\t\ttheme={{\n\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\taxis: {\n\t\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\t\ttext: {\n\t\t\t\t\t\t\t\t\t\t\t\tfill: colors.n600,\n\t\t\t\t\t\t\t\t\t\t\t\tfontFamily:\n\t\t\t\t\t\t\t\t\t\t\t\t\t'Inter, -apple-system, system-ui, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Helvetica Neue\", \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Meiryo UI\", Arial, sans-serif',\n\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '10px',\n\t\t\t\t\t\t\t\t\t\t\t\tfontStyle: 'normal',\n\t\t\t\t\t\t\t\t\t\t\t\tfontWeight: 600,\n\t\t\t\t\t\t\t\t\t\t\t\tletterSpacing: '0.2px',\n\t\t\t\t\t\t\t\t\t\t\t\tlineHeight: '12px',\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\ttooltip: {\n\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\tbackgroundColor: colors.n900,\n\t\t\t\t\t\t\t\t\t\tboxShadow: '0px 0px 12px rgba(47, 52, 61, 0.12), 0px 0px 2px rgba(47, 52, 61, 0.08)',\n\t\t\t\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\t\t\t\tpadding: 4,\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\ttooltip={({ value }): ReactElement => (\n\t\t\t\t\t\t\t\t\t<Box fontScale='p1m' color='alternative'>\n\t\t\t\t\t\t\t\t\t\t{t('Value_users', { value })}\n\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t) : (\n\t\t\t\t<Skeleton variant='rect' height={196} />\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default ContentForHours;\n"]}