{"version":3,"sources":["meteor://ðŸ’»app/ee/client/views/admin/engagementDashboard/users/ContentForDays.tsx"],"names":[],"mappings":"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","file":"dynamic/ee/client/views/admin/engagementDashboard/users/ContentForDays.tsx","sourcesContent":["import { ResponsiveBar } from '@nivo/bar';\nimport { Box, Button, Chevron, Flex, Margins, Skeleton } from '@rocket.chat/fuselage';\nimport colors from '@rocket.chat/fuselage-tokens/colors';\nimport moment from 'moment';\nimport React, { ReactElement, useMemo } from 'react';\n\nimport { useWeeklyChatActivity } from './useWeeklyChatActivity';\n\ntype ContentForDaysProps = {\n\tdisplacement: number;\n\tonPreviousDateClick: () => void;\n\tonNextDateClick: () => void;\n\ttimezone: 'utc' | 'local';\n};\n\nconst ContentForDays = ({ displacement, onPreviousDateClick, onNextDateClick, timezone }: ContentForDaysProps): ReactElement => {\n\tconst utc = timezone === 'utc';\n\tconst { data } = useWeeklyChatActivity({ displacement, utc });\n\n\tconst formattedCurrentDate = useMemo(() => {\n\t\tif (!data) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst endOfWeek = moment(data.day);\n\t\tconst startOfWeek = moment(data.day).subtract(6, 'days');\n\t\treturn `${startOfWeek.format('L')} - ${endOfWeek.format('L')}`;\n\t}, [data]);\n\n\tconst values = useMemo(\n\t\t() =>\n\t\t\tdata?.month\n\t\t\t\t?.map(({ users, day, month, year }) => ({\n\t\t\t\t\tusers,\n\t\t\t\t\tday: moment({ year, month: month - 1, day }),\n\t\t\t\t}))\n\t\t\t\t?.sort(({ day: a }, { day: b }) => a.diff(b))\n\t\t\t\t?.map(({ users, day }) => ({ users, day: String(day.valueOf()) })) ?? [],\n\t\t[data],\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t<Flex.Container alignItems='center' justifyContent='center'>\n\t\t\t\t<Box>\n\t\t\t\t\t<Button ghost square small onClick={onPreviousDateClick}>\n\t\t\t\t\t\t<Chevron left size='x20' style={{ verticalAlign: 'middle' }} />\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Flex.Item basis='50%'>\n\t\t\t\t\t\t<Margins inline='x8'>\n\t\t\t\t\t\t\t<Box is='span' style={{ textAlign: 'center' }}>\n\t\t\t\t\t\t\t\t{formattedCurrentDate}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Margins>\n\t\t\t\t\t</Flex.Item>\n\t\t\t\t\t<Button ghost square small disabled={displacement === 0} onClick={onNextDateClick}>\n\t\t\t\t\t\t<Chevron right size='x20' style={{ verticalAlign: 'middle' }} />\n\t\t\t\t\t</Button>\n\t\t\t\t</Box>\n\t\t\t</Flex.Container>\n\t\t\t<Flex.Container>\n\t\t\t\t{data ? (\n\t\t\t\t\t<Box style={{ height: 196 }}>\n\t\t\t\t\t\t<Flex.Item align='stretch' grow={1} shrink={0}>\n\t\t\t\t\t\t\t<Box style={{ position: 'relative' }}>\n\t\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ResponsiveBar\n\t\t\t\t\t\t\t\t\t\tdata={values}\n\t\t\t\t\t\t\t\t\t\tindexBy='day'\n\t\t\t\t\t\t\t\t\t\tkeys={['users']}\n\t\t\t\t\t\t\t\t\t\tgroupMode='grouped'\n\t\t\t\t\t\t\t\t\t\tpadding={0.25}\n\t\t\t\t\t\t\t\t\t\tmargin={{\n\t\t\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\t\t\tbottom: 20,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tcolors={[\n\t\t\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\t\t\tcolors.b500,\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\tenableLabel={false}\n\t\t\t\t\t\t\t\t\t\tenableGridY={false}\n\t\t\t\t\t\t\t\t\t\taxisTop={null}\n\t\t\t\t\t\t\t\t\t\taxisRight={null}\n\t\t\t\t\t\t\t\t\t\taxisBottom={{\n\t\t\t\t\t\t\t\t\t\t\ttickSize: 0,\n\t\t\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\t\t\ttickPadding: 4,\n\t\t\t\t\t\t\t\t\t\t\ttickRotation: 0,\n\t\t\t\t\t\t\t\t\t\t\ttickValues: 'every 3 days',\n\t\t\t\t\t\t\t\t\t\t\tformat: (timestamp): string => moment(parseInt(timestamp, 10)).format('L'),\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\taxisLeft={null}\n\t\t\t\t\t\t\t\t\t\tanimate={true}\n\t\t\t\t\t\t\t\t\t\t// @ts-ignore\n\t\t\t\t\t\t\t\t\t\tmotionStiffness={90}\n\t\t\t\t\t\t\t\t\t\tmotionDamping={15}\n\t\t\t\t\t\t\t\t\t\ttheme={{\n\t\t\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\t\t\taxis: {\n\t\t\t\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill: colors.n600,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontFamily:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Inter, -apple-system, system-ui, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Helvetica Neue\", \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Meiryo UI\", Arial, sans-serif',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '10px',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontStyle: 'normal',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontWeight: 600,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tletterSpacing: '0.2px',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlineHeight: '12px',\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Flex.Item>\n\t\t\t\t\t</Box>\n\t\t\t\t) : (\n\t\t\t\t\t<Skeleton variant='rect' height={196} />\n\t\t\t\t)}\n\t\t\t</Flex.Container>\n\t\t</>\n\t);\n};\n\nexport default ContentForDays;\n"]}