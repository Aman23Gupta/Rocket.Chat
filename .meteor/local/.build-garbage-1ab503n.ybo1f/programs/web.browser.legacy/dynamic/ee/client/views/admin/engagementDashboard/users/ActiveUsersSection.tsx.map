{"version":3,"sources":["meteor://ðŸ’»app/ee/client/views/admin/engagementDashboard/users/ActiveUsersSection.tsx"],"names":[],"mappings":"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","file":"dynamic/ee/client/views/admin/engagementDashboard/users/ActiveUsersSection.tsx","sourcesContent":["import { ResponsiveLine } from '@nivo/line';\nimport { Box, Flex, Skeleton, Tile } from '@rocket.chat/fuselage';\nimport colors from '@rocket.chat/fuselage-tokens/colors.json';\nimport moment from 'moment';\nimport React, { ReactElement, useMemo } from 'react';\n\nimport CounterSet from '../../../../../../client/components/data/CounterSet';\nimport { useTranslation } from '../../../../../../client/contexts/TranslationContext';\nimport { useFormatDate } from '../../../../../../client/hooks/useFormatDate';\nimport Section from '../Section';\nimport DownloadDataButton from '../data/DownloadDataButton';\nimport LegendSymbol from '../data/LegendSymbol';\nimport { useActiveUsers } from './useActiveUsers';\n\ntype ActiveUsersSectionProps = {\n\ttimezone: 'utc' | 'local';\n};\n\nconst ActiveUsersSection = ({ timezone }: ActiveUsersSectionProps): ReactElement => {\n\tconst utc = timezone === 'utc';\n\tconst { data } = useActiveUsers({ utc });\n\n\tconst [\n\t\tcountDailyActiveUsers,\n\t\tdiffDailyActiveUsers,\n\t\tcountWeeklyActiveUsers,\n\t\tdiffWeeklyActiveUsers,\n\t\tcountMonthlyActiveUsers,\n\t\tdiffMonthlyActiveUsers,\n\t\tdauValues = [],\n\t\twauValues = [],\n\t\tmauValues = [],\n\t] = useMemo(() => {\n\t\tif (!data) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst createPoint = (i: number): { x: Date; y: number } => ({\n\t\t\tx: moment(data.start).add(i, 'days').toDate(),\n\t\t\ty: 0,\n\t\t});\n\n\t\tconst createPoints = (): { x: Date; y: number }[] =>\n\t\t\tArray.from({ length: moment(data.end).diff(data.start, 'days') + 1 }, (_, i) => createPoint(i));\n\n\t\tconst dauValues = createPoints();\n\t\tconst prevDauValue = createPoint(-1);\n\t\tconst wauValues = createPoints();\n\t\tconst prevWauValue = createPoint(-1);\n\t\tconst mauValues = createPoints();\n\t\tconst prevMauValue = createPoint(-1);\n\n\t\tconst usersListsMap = data.month.reduce<{ [x: number]: string[] }>((map, dayData) => {\n\t\t\tconst date = utc\n\t\t\t\t? moment.utc({ year: dayData.year, month: dayData.month - 1, day: dayData.day }).endOf('day')\n\t\t\t\t: moment({ year: dayData.year, month: dayData.month - 1, day: dayData.day }).endOf('day');\n\t\t\tconst dateOffset = date.diff(data.start, 'days');\n\t\t\tif (dateOffset >= 0) {\n\t\t\t\tmap[dateOffset] = dayData.usersList;\n\t\t\t\tdauValues[dateOffset].y = dayData.users;\n\t\t\t}\n\t\t\treturn map;\n\t\t}, {});\n\n\t\tconst distributeValueOverPoints = (\n\t\t\tusersListsMap: { [x: number]: string[] },\n\t\t\tdateOffset: number,\n\t\t\tT: number,\n\t\t\tarray: { x: Date; y: number }[],\n\t\t): void => {\n\t\t\tconst usersSet = new Set();\n\t\t\tfor (let k = dateOffset; T > 0; k--, T--) {\n\t\t\t\tif (usersListsMap[k]) {\n\t\t\t\t\tusersListsMap[k].forEach((userId) => usersSet.add(userId));\n\t\t\t\t}\n\t\t\t}\n\t\t\tarray[dateOffset].y = usersSet.size;\n\t\t};\n\n\t\tfor (let i = 0; i < 30; i++) {\n\t\t\tdistributeValueOverPoints(usersListsMap, i, 7, wauValues);\n\t\t\tdistributeValueOverPoints(usersListsMap, i, 30, mauValues);\n\t\t}\n\t\tprevWauValue.y = wauValues[28].y;\n\t\tprevMauValue.y = mauValues[28].y;\n\t\tprevDauValue.y = dauValues[28].y;\n\n\t\treturn [\n\t\t\tdauValues[dauValues.length - 1].y,\n\t\t\tdauValues[dauValues.length - 1].y - prevDauValue.y,\n\t\t\twauValues[wauValues.length - 1].y,\n\t\t\twauValues[wauValues.length - 1].y - prevWauValue.y,\n\t\t\tmauValues[mauValues.length - 1].y,\n\t\t\tmauValues[mauValues.length - 1].y - prevMauValue.y,\n\t\t\tdauValues,\n\t\t\twauValues,\n\t\t\tmauValues,\n\t\t];\n\t}, [data, utc]);\n\n\tconst formatDate = useFormatDate();\n\tconst t = useTranslation();\n\n\treturn (\n\t\t<Section\n\t\t\ttitle={t('Active_users')}\n\t\t\tfilter={\n\t\t\t\t<DownloadDataButton\n\t\t\t\t\tattachmentName={`ActiveUsersSection_start_${data?.start}_end_${data?.end}`}\n\t\t\t\t\theaders={['Date', 'DAU', 'WAU', 'MAU']}\n\t\t\t\t\tdataAvailable={!!data}\n\t\t\t\t\tdataExtractor={(): unknown[][] | undefined => {\n\t\t\t\t\t\tconst values = [];\n\n\t\t\t\t\t\tfor (let i = 0; i < 30; i++) {\n\t\t\t\t\t\t\tvalues.push([dauValues[i].x.toISOString(), dauValues[i].y, wauValues[i].y, mauValues[i].y]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn values;\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t}\n\t\t>\n\t\t\t<CounterSet\n\t\t\t\tcounters={[\n\t\t\t\t\t{\n\t\t\t\t\t\tcount: countDailyActiveUsers ?? <Skeleton variant='rect' width='3ex' height='1em' />,\n\t\t\t\t\t\tvariation: diffDailyActiveUsers ?? 0,\n\t\t\t\t\t\tdescription: (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<LegendSymbol color={colors.b200} /> {t('Daily_Active_Users')}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tcount: countWeeklyActiveUsers ?? <Skeleton variant='rect' width='3ex' height='1em' />,\n\t\t\t\t\t\tvariation: diffWeeklyActiveUsers ?? 0,\n\t\t\t\t\t\tdescription: (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<LegendSymbol color={colors.b300} /> {t('Weekly_Active_Users')}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tcount: countMonthlyActiveUsers ?? <Skeleton variant='rect' width='3ex' height='1em' />,\n\t\t\t\t\t\tvariation: diffMonthlyActiveUsers ?? 0,\n\t\t\t\t\t\tdescription: (\n\t\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t\t<LegendSymbol color={colors.b500} /> {t('Monthly_Active_Users')}\n\t\t\t\t\t\t\t</>\n\t\t\t\t\t\t),\n\t\t\t\t\t},\n\t\t\t\t]}\n\t\t\t/>\n\t\t\t<Flex.Container>\n\t\t\t\t{data ? (\n\t\t\t\t\t<Box style={{ height: 240 }}>\n\t\t\t\t\t\t<Flex.Item align='stretch' grow={1} shrink={0}>\n\t\t\t\t\t\t\t<Box style={{ position: 'relative' }}>\n\t\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\t\t\t\theight: '100%',\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<ResponsiveLine\n\t\t\t\t\t\t\t\t\t\tdata={[\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tid: 'dau',\n\t\t\t\t\t\t\t\t\t\t\t\tdata: dauValues,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tid: 'wau',\n\t\t\t\t\t\t\t\t\t\t\t\tdata: wauValues,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\tid: 'mau',\n\t\t\t\t\t\t\t\t\t\t\t\tdata: mauValues,\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t]}\n\t\t\t\t\t\t\t\t\t\txScale={{\n\t\t\t\t\t\t\t\t\t\t\ttype: 'time',\n\t\t\t\t\t\t\t\t\t\t\tformat: 'native',\n\t\t\t\t\t\t\t\t\t\t\tprecision: 'day',\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\txFormat='time:%Y-%m-%d'\n\t\t\t\t\t\t\t\t\t\tyScale={{\n\t\t\t\t\t\t\t\t\t\t\ttype: 'linear',\n\t\t\t\t\t\t\t\t\t\t\tstacked: true,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tenableGridX={false}\n\t\t\t\t\t\t\t\t\t\tenableGridY={false}\n\t\t\t\t\t\t\t\t\t\tenablePoints={false}\n\t\t\t\t\t\t\t\t\t\tuseMesh\n\t\t\t\t\t\t\t\t\t\tenableArea\n\t\t\t\t\t\t\t\t\t\tareaOpacity={1}\n\t\t\t\t\t\t\t\t\t\tenableCrosshair\n\t\t\t\t\t\t\t\t\t\tcrosshairType='bottom'\n\t\t\t\t\t\t\t\t\t\tmargin={{\n\t\t\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\t\t\ttop: 0,\n\t\t\t\t\t\t\t\t\t\t\tbottom: 20,\n\t\t\t\t\t\t\t\t\t\t\tright: 0,\n\t\t\t\t\t\t\t\t\t\t\tleft: 40,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tcolors={[colors.b200, colors.b300, colors.b500]}\n\t\t\t\t\t\t\t\t\t\taxisLeft={{\n\t\t\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\t\t\ttickSize: 0,\n\t\t\t\t\t\t\t\t\t\t\ttickPadding: 4,\n\t\t\t\t\t\t\t\t\t\t\ttickRotation: 0,\n\t\t\t\t\t\t\t\t\t\t\ttickValues: 3,\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\taxisBottom={{\n\t\t\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\t\t\ttickSize: 0,\n\t\t\t\t\t\t\t\t\t\t\ttickPadding: 4,\n\t\t\t\t\t\t\t\t\t\t\ttickRotation: 0,\n\t\t\t\t\t\t\t\t\t\t\ttickValues: 'every 3 days',\n\t\t\t\t\t\t\t\t\t\t\tformat: (date): string => moment(date).format(dauValues.length === 7 ? 'dddd' : 'L'),\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tanimate={true}\n\t\t\t\t\t\t\t\t\t\tmotionStiffness={90}\n\t\t\t\t\t\t\t\t\t\tmotionDamping={15}\n\t\t\t\t\t\t\t\t\t\ttheme={{\n\t\t\t\t\t\t\t\t\t\t\t// TODO: Get it from theme\n\t\t\t\t\t\t\t\t\t\t\taxis: {\n\t\t\t\t\t\t\t\t\t\t\t\tticks: {\n\t\t\t\t\t\t\t\t\t\t\t\t\ttext: {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfill: '#9EA2A8',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontFamily:\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t'Inter, -apple-system, system-ui, \"Segoe UI\", Roboto, Oxygen, Ubuntu, Cantarell, \"Helvetica Neue\", \"Apple Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\", \"Meiryo UI\", Arial, sans-serif',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '10px',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontStyle: 'normal',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfontWeight: 600,\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tletterSpacing: '0.2px',\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlineHeight: '12px',\n\t\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\ttooltip: {\n\t\t\t\t\t\t\t\t\t\t\t\tcontainer: {\n\t\t\t\t\t\t\t\t\t\t\t\t\tbackgroundColor: '#1F2329',\n\t\t\t\t\t\t\t\t\t\t\t\t\tboxShadow: '0px 0px 12px rgba(47, 52, 61, 0.12), 0px 0px 2px rgba(47, 52, 61, 0.08)',\n\t\t\t\t\t\t\t\t\t\t\t\t\tborderRadius: 2,\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tenableSlices='x'\n\t\t\t\t\t\t\t\t\t\tsliceTooltip={({ slice: { points } }): ReactElement => (\n\t\t\t\t\t\t\t\t\t\t\t<Tile elevation='2'>\n\t\t\t\t\t\t\t\t\t\t\t\t<Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Box>{formatDate(points[0].data.x)}</Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t{points.map(({ serieId, data: { y: activeUsers } }) => (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box key={serieId} fontScale='p1m'>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(serieId === 'dau' && t('DAU_value', { value: activeUsers })) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(serieId === 'wau' && t('WAU_value', { value: activeUsers })) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(serieId === 'mau' && t('MAU_value', { value: activeUsers }))}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t\t\t\t</Tile>\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Flex.Item>\n\t\t\t\t\t</Box>\n\t\t\t\t) : (\n\t\t\t\t\t<Skeleton variant='rect' height={240} />\n\t\t\t\t)}\n\t\t\t</Flex.Container>\n\t\t</Section>\n\t);\n};\n\nexport default ActiveUsersSection;\n"]}