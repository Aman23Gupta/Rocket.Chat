{"version":3,"sources":["meteor://ðŸ’»app/ee/client/omnichannel/additionalForms/CustomFieldsAdditionalFormContainer.js"],"names":["React","useMemo","useEffect","module","link","v","useTranslation","useForm","CustomFieldsAdditionalForm","getInitialValues","data","type","required","defaultValue","options","public","checkInvalidOptions","value","trim","split","every","test","CustomFieldsAdditionalFormContainer","state","onChange","className","t","values","handlers","hasUnsavedChanges","errors","optionsError","undefined","hasError","Object","filter","Boolean","length","exportDefault"],"mappings":"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","file":"dynamic/ee/client/omnichannel/additionalForms/CustomFieldsAdditionalFormContainer.js","sourcesContent":["import React, { useMemo, useEffect } from 'react';\n\nimport { useTranslation } from '../../../../client/contexts/TranslationContext';\nimport { useForm } from '../../../../client/hooks/useForm';\nimport CustomFieldsAdditionalForm from './CustomFieldsAdditionalForm';\n\nconst getInitialValues = (data) => ({\n\ttype: data.type || 'input',\n\trequired: !!data.required,\n\tdefaultValue: data.defaultValue ?? '',\n\toptions: data.options || '',\n\tpublic: !!data.public,\n});\n\nconst checkInvalidOptions = (value) => {\n\tif (!value || value.trim() === '') {\n\t\treturn false;\n\t}\n\n\treturn value.split(',').every((v) => /^[a-zA-Z0-9-_ ]+$/.test(v));\n};\n\nconst CustomFieldsAdditionalFormContainer = ({ data = {}, state, onChange, className }) => {\n\tconst t = useTranslation();\n\n\tconst { values, handlers, hasUnsavedChanges } = useForm(getInitialValues(data));\n\n\tconst errors = useMemo(\n\t\t() => ({\n\t\t\toptionsError: checkInvalidOptions(values.options) ? t('error-invalid-value') : undefined,\n\t\t}),\n\t\t[t, values.options],\n\t);\n\n\tconst hasError = useMemo(() => !!Object.values(errors).filter(Boolean).length, [errors]);\n\n\tuseEffect(() => {\n\t\tonChange({ data: values, hasError, hasUnsavedChanges });\n\t}, [hasError, hasUnsavedChanges, onChange, values]);\n\n\treturn <CustomFieldsAdditionalForm values={values} handlers={handlers} state={state} className={className} errors={errors} />;\n};\n\nexport default CustomFieldsAdditionalFormContainer;\n"]}