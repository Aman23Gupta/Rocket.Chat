{"version":3,"sources":["meteor://ðŸ’»app/app/livechat/client/lib/chartHandler.js"],"names":["_regeneratorRuntime","module","link","default","v","_objectSpread","export","drawLineChart","drawDoughnutChart","updateChart","TAPi18n","lineChartConfiguration","legends","anim","smallTicks","displayColors","tooltipCallbacks","config","layout","padding","top","bottom","legend","display","title","tooltips","enabled","mode","scales","xAxes","scaleLabel","gridLines","color","yAxes","ticks","beginAtZero","hover","animationDuration","responsive","maintainAspectRatio","responsiveAnimationDuration","animation","duration","labels","boxWidth","fontSize","doughnutChartConfiguration","position","text","chart","chartContext","chartLabels","dataLabels","dataSets","options","console","log","destroy","colors","datasets","forEach","chartLabel","index","push","label","__","data","backgroundColor","borderColor","borderWidth","fill","chartImport","Chart","type","dataPoints","c","indexOf","dataset","idx","update"],"mappings":"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","file":"dynamic/app/livechat/client/lib/chartHandler.js","sourcesContent":["import { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nconst lineChartConfiguration = ({ legends = false, anim = false, smallTicks = false, displayColors = false, tooltipCallbacks = {} }) => {\n\tconst config = {\n\t\tlayout: {\n\t\t\tpadding: {\n\t\t\t\ttop: 10,\n\t\t\t\tbottom: 0,\n\t\t\t},\n\t\t},\n\t\tlegend: {\n\t\t\tdisplay: false,\n\t\t},\n\t\ttitle: {\n\t\t\tdisplay: false,\n\t\t},\n\t\ttooltips: {\n\t\t\tenabled: true,\n\t\t\tmode: 'point',\n\t\t\tdisplayColors,\n\t\t\t...tooltipCallbacks,\n\t\t},\n\t\tscales: {\n\t\t\txAxes: [\n\t\t\t\t{\n\t\t\t\t\tscaleLabel: {\n\t\t\t\t\t\tdisplay: false,\n\t\t\t\t\t},\n\t\t\t\t\tgridLines: {\n\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.03)',\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t\tyAxes: [\n\t\t\t\t{\n\t\t\t\t\tscaleLabel: {\n\t\t\t\t\t\tdisplay: false,\n\t\t\t\t\t},\n\t\t\t\t\tgridLines: {\n\t\t\t\t\t\tdisplay: true,\n\t\t\t\t\t\tcolor: 'rgba(0, 0, 0, 0.03)',\n\t\t\t\t\t},\n\t\t\t\t\tticks: {\n\t\t\t\t\t\tbeginAtZero: true,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\thover: {\n\t\t\tanimationDuration: 0, // duration of animations when hovering an item\n\t\t},\n\t\tresponsive: true,\n\t\tmaintainAspectRatio: false,\n\t\tresponsiveAnimationDuration: 0, // animation duration after a resize\n\t};\n\n\tif (!anim) {\n\t\tconfig.animation = {\n\t\t\tduration: 0, // general animation time\n\t\t};\n\t}\n\n\tif (legends) {\n\t\tconfig.legend = {\n\t\t\tdisplay: true,\n\t\t\tlabels: {\n\t\t\t\tboxWidth: 20,\n\t\t\t\tfontSize: 8,\n\t\t\t},\n\t\t};\n\t}\n\n\tif (smallTicks) {\n\t\tconfig.scales.xAxes[0].ticks = {\n\t\t\tfontSize: 8,\n\t\t};\n\n\t\tconfig.scales.yAxes[0].ticks = {\n\t\t\tbeginAtZero: true,\n\t\t\tfontSize: 8,\n\t\t};\n\t}\n\n\treturn config;\n};\n\nconst doughnutChartConfiguration = (title, tooltipCallbacks = {}) => ({\n\tlayout: {\n\t\tpadding: {\n\t\t\ttop: 0,\n\t\t\tbottom: 0,\n\t\t},\n\t},\n\tlegend: {\n\t\tdisplay: true,\n\t\tposition: 'right',\n\t\tlabels: {\n\t\t\tboxWidth: 20,\n\t\t\tfontSize: 8,\n\t\t},\n\t},\n\ttitle: {\n\t\tdisplay: 'true',\n\t\ttext: title,\n\t},\n\ttooltips: {\n\t\tenabled: true,\n\t\tmode: 'point',\n\t\tdisplayColors: false, // hide color box\n\t\t...tooltipCallbacks,\n\t},\n\t// animation: {\n\t// \tduration: 0 // general animation time\n\t// },\n\thover: {\n\t\tanimationDuration: 0, // duration of animations when hovering an item\n\t},\n\tresponsive: true,\n\tmaintainAspectRatio: false,\n\tresponsiveAnimationDuration: 0, // animation duration after a resize\n});\n\n/**\n *\n * @param {Object} chart - chart element\n * @param {Object} chartContext - Context of chart\n * @param {Array(String)} chartLabel\n * @param {Array(String)} dataLabels\n * @param {Array(Array(Double))} dataPoints\n */\nexport const drawLineChart = async (chart, chartContext, chartLabels, dataLabels, dataSets, options = {}) => {\n\tif (!chart) {\n\t\tconsole.log('No chart element');\n\t\treturn;\n\t}\n\tif (chartContext) {\n\t\tchartContext.destroy();\n\t}\n\tconst colors = ['#2de0a5', '#ffd21f', '#f5455c', '#cbced1'];\n\n\tconst datasets = [];\n\n\tchartLabels.forEach(function (chartLabel, index) {\n\t\tdatasets.push({\n\t\t\tlabel: TAPi18n.__(chartLabel), // chart label\n\t\t\tdata: dataSets[index], // data points corresponding to data labels, x-axis points\n\t\t\tbackgroundColor: [colors[index]],\n\t\t\tborderColor: [colors[index]],\n\t\t\tborderWidth: 3,\n\t\t\tfill: false,\n\t\t});\n\t});\n\tconst chartImport = await import('chart.js');\n\tconst Chart = chartImport.default;\n\treturn new Chart(chart, {\n\t\ttype: 'line',\n\t\tdata: {\n\t\t\tlabels: dataLabels, // data labels, y-axis points\n\t\t\tdatasets,\n\t\t},\n\t\toptions: lineChartConfiguration(options),\n\t});\n};\n\n/**\n *\n * @param {Object} chart - chart element\n * @param {Object} chartContext - Context of chart\n * @param {Array(String)} dataLabels\n * @param {Array(Double)} dataPoints\n */\nexport const drawDoughnutChart = async (chart, title, chartContext, dataLabels, dataPoints) => {\n\tif (!chart) {\n\t\treturn;\n\t}\n\tif (chartContext) {\n\t\tchartContext.destroy();\n\t}\n\tconst chartImport = await import('chart.js');\n\tconst Chart = chartImport.default;\n\treturn new Chart(chart, {\n\t\ttype: 'doughnut',\n\t\tdata: {\n\t\t\tlabels: dataLabels, // data labels, y-axis points\n\t\t\tdatasets: [\n\t\t\t\t{\n\t\t\t\t\tdata: dataPoints, // data points corresponding to data labels, x-axis points\n\t\t\t\t\tbackgroundColor: ['#2de0a5', '#cbced1', '#f5455c', '#ffd21f'],\n\t\t\t\t\tborderWidth: 0,\n\t\t\t\t},\n\t\t\t],\n\t\t},\n\t\toptions: doughnutChartConfiguration(title),\n\t});\n};\n\n/**\n * Update chart\n * @param  {Object} chart [Chart context]\n * @param  {String} label [chart label]\n * @param  {Array(Double)} data  [updated data]\n */\nexport const updateChart = async (c, label, data) => {\n\tconst chart = await c;\n\tif (chart.data.labels.indexOf(label) === -1) {\n\t\t// insert data\n\t\tchart.data.labels.push(label);\n\t\tchart.data.datasets.forEach((dataset, idx) => {\n\t\t\tdataset.data.push(data[idx]);\n\t\t});\n\t} else {\n\t\t// update data\n\t\tconst index = chart.data.labels.indexOf(label);\n\t\tchart.data.datasets.forEach((dataset, idx) => {\n\t\t\tdataset.data[index] = data[idx];\n\t\t});\n\t}\n\n\tchart.update();\n};\n"]}