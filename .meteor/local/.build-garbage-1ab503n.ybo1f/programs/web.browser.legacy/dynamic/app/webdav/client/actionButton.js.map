{"version":3,"sources":["meteor://ðŸ’»app/app/webdav/client/actionButton.js"],"names":["_slicedToArray","module","link","default","v","Meteor","t","getURL","WebdavAccounts","settings","MessageAction","modal","messageArgs","startup","addButton","id","icon","label","condition","message","msg","subscription","findOne","file","get","action","attachments","attachment","url","title_link","full","open","data","title","content","showCancelButton","showConfirmButton","closeOnCancel","html","order","group"],"mappings":"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","file":"dynamic/app/webdav/client/actionButton.js","sourcesContent":["import { Meteor } from 'meteor/meteor';\n\nimport { t, getURL } from '../../utils';\nimport { WebdavAccounts } from '../../models/client';\nimport { settings } from '../../settings';\nimport { MessageAction, modal } from '../../ui-utils';\nimport { messageArgs } from '../../ui-utils/client/lib/messageArgs';\n\nMeteor.startup(function () {\n\tMessageAction.addButton({\n\t\tid: 'webdav-upload',\n\t\ticon: 'upload',\n\t\tlabel: t('Save_To_Webdav'),\n\t\tcondition: ({ msg: message, subscription }) => {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (WebdavAccounts.findOne() == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (!message.file) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn settings.get('Webdav_Integration_Enabled');\n\t\t},\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tconst [attachment] = message.attachments;\n\t\t\tconst { file } = message;\n\t\t\tconst url = getURL(attachment.title_link, { full: true });\n\t\t\tmodal.open({\n\t\t\t\tdata: {\n\t\t\t\t\tmessage,\n\t\t\t\t\tattachment,\n\t\t\t\t\tfile,\n\t\t\t\t\turl,\n\t\t\t\t},\n\t\t\t\ttitle: t('Save_To_Webdav'),\n\t\t\t\tcontent: 'selectWebdavAccount',\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tshowConfirmButton: false,\n\t\t\t\tcloseOnCancel: true,\n\t\t\t\thtml: true,\n\t\t\t});\n\t\t},\n\t\torder: 100,\n\t\tgroup: 'menu',\n\t});\n});\n"]}