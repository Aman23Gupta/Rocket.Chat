{"version":3,"sources":["meteor://💻app/app/ui/client/lib/codeMirror/codeMirrorComponent.js","meteor://💻app/app/ui/client/lib/codeMirror/index.js","meteor://💻app/app/ui/client/lib/recorderjs/audioEncoder.js","meteor://💻app/app/ui/client/lib/recorderjs/audioRecorder.js","meteor://💻app/app/ui/client/lib/recorderjs/videoRecorder.js","meteor://💻app/app/ui/client/lib/Tooltip.js","meteor://💻app/app/ui/client/lib/UserAction.ts","meteor://💻app/app/ui/client/lib/UserCard.js","meteor://💻app/app/ui/client/lib/accounts.js","meteor://💻app/app/ui/client/lib/chatMessages.js","meteor://💻app/app/ui/client/lib/collections.js","meteor://💻app/app/ui/client/lib/fileUpload.js","meteor://💻app/app/ui/client/lib/iframeCommands.js","meteor://💻app/app/ui/client/lib/menu.js","meteor://💻app/app/ui/client/lib/notification.js","meteor://💻app/app/ui/client/lib/parentTemplate.js","meteor://💻app/app/ui/client/lib/rocket.js","meteor://💻app/app/ui/client/lib/textarea-cursor.js","meteor://💻app/app/ui/client/lib/userPopoverStatus.js","meteor://💻app/app/ui/client/components/header/header.js","meteor://💻app/app/ui/client/components/icon.js","meteor://💻app/app/ui/client/components/popupList.js","meteor://💻app/app/ui/client/components/table.js","meteor://💻app/app/ui/client/components/tabs.js","meteor://💻app/app/ui/client/components/tooltip.js","meteor://💻app/app/ui/client/views/app/lib/getCommonRoomEvents.js","meteor://💻app/app/ui/client/views/app/burger.js","meteor://💻app/app/ui/client/views/app/home.js","meteor://💻app/app/ui/client/views/app/photoswipeContent.ts","meteor://💻app/app/ui/client/views/app/room.js","meteor://💻app/app/ui/client/views/app/roomSearch.js","meteor://💻app/app/ui/client/index.ts","meteor://💻app/app/ui/index.ts","meteor://💻app/app/lib/client/views/customFieldsForm.js","meteor://💻app/app/lib/client/lib/LoginPresence.js","meteor://💻app/app/lib/client/lib/RocketChatAnnouncement.js","meteor://💻app/app/lib/client/lib/index.js","meteor://💻app/app/lib/client/methods/sendMessage.js","meteor://💻app/app/lib/client/startup/settingsOnLoadSiteUrl.ts","meteor://💻app/app/lib/client/OAuthProxy.js","meteor://💻app/app/lib/client/index.js","meteor://💻app/app/lib/lib/roomTypes/conversation.js","meteor://💻app/app/lib/lib/roomTypes/direct.js","meteor://💻app/app/lib/lib/roomTypes/favorite.js","meteor://💻app/app/lib/lib/roomTypes/index.js","meteor://💻app/app/lib/lib/roomTypes/private.js","meteor://💻app/app/lib/lib/roomTypes/public.js","meteor://💻app/app/lib/lib/roomTypes/unread.js","meteor://💻app/app/lib/lib/MessageTypes.js","meteor://💻app/app/lib/startup/defaultRoomTypes.js","meteor://💻app/app/lib/index.js","meteor://💻app/app/ui-utils/client/lib/AccountBox.js","meteor://💻app/app/ui-utils/client/lib/IframeLogin.js","meteor://💻app/app/ui-utils/client/lib/MessageAction.js","meteor://💻app/app/ui-utils/client/lib/RoomHistoryManager.js","meteor://💻app/app/ui-utils/client/lib/RoomManager.js","meteor://💻app/app/ui-utils/client/lib/SideNav.js","meteor://💻app/app/ui-utils/client/lib/collapseArrow.js","meteor://💻app/app/ui-utils/client/lib/mainReady.js","meteor://💻app/app/ui-utils/client/lib/menu.js","meteor://💻app/app/ui-utils/client/lib/messageArgs.js","meteor://💻app/app/ui-utils/client/lib/messageBox.js","meteor://💻app/app/ui-utils/client/lib/messageContext.js","meteor://💻app/app/ui-utils/client/lib/modal.js","meteor://💻app/app/ui-utils/client/lib/openRoom.js","meteor://💻app/app/ui-utils/client/lib/popout.js","meteor://💻app/app/ui-utils/client/lib/popover.js","meteor://💻app/app/ui-utils/client/lib/readMessages.js","meteor://💻app/app/ui-utils/client/index.js","meteor://💻app/app/ui-utils/lib/Message.js","meteor://💻app/app/ui-utils/lib/MessageProperties.js","meteor://💻app/app/ui-utils/lib/MessageTypes.js","meteor://💻app/app/ui-utils/index.js","meteor://💻app/app/livechat/client/views/app/dialog/closeRoom.js","meteor://💻app/app/livechat/client/views/app/business-hours/BusinessHours.ts","meteor://💻app/app/livechat/client/views/app/business-hours/Single.ts","meteor://💻app/app/livechat/client/views/app/customTemplates/register.js","meteor://💻app/app/livechat/client/externalFrame/crypto.ts","meteor://💻app/app/livechat/client/externalFrame/externalFrameContainer.js","meteor://💻app/app/livechat/client/externalFrame/generateNewKey.ts","meteor://💻app/app/livechat/client/externalFrame/index.js","meteor://💻app/app/livechat/client/externalFrame/tabBar.ts","meteor://💻app/app/livechat/client/lib/messageTypes.js","meteor://💻app/app/livechat/client/collections/LivechatInquiry.js","meteor://💻app/app/livechat/client/startup/notifyUnreadRooms.js","meteor://💻app/app/livechat/client/index.js","meteor://💻app/app/livechat/client/roomType.js","meteor://💻app/app/livechat/client/route.js","meteor://💻app/app/livechat/client/tabBar.ts","meteor://💻app/app/livechat/client/ui.js","meteor://💻app/app/livechat/lib/LivechatRoomType.js","meteor://💻app/app/livechat/lib/messageTypes.js","meteor://💻app/app/message-snippet/client/tabBar/views/snippetedMessages.js","meteor://💻app/app/message-snippet/client/tabBar/tabBar.ts","meteor://💻app/app/message-snippet/client/page/snippetPage.js","meteor://💻app/app/message-snippet/client/actionButton.js","meteor://💻app/app/message-snippet/client/index.js","meteor://💻app/app/message-snippet/client/messageType.js","meteor://💻app/app/message-snippet/client/snippetMessage.js","meteor://💻app/app/apps/client/gameCenter/gameCenter.js","meteor://💻app/app/apps/client/gameCenter/gameContainer.js","meteor://💻app/app/apps/client/gameCenter/invitePlayers.js","meteor://💻app/app/apps/client/gameCenter/tabBar.ts","meteor://💻app/app/apps/client/communication/index.js","meteor://💻app/app/apps/client/communication/websockets.js","meteor://💻app/app/apps/client/RealAppsEngineUIHost.js","meteor://💻app/app/apps/client/i18n.js","meteor://💻app/app/apps/client/index.js","meteor://💻app/app/apps/client/orchestrator.js","meteor://💻app/app/apps/lib/misc/Utilities.js","meteor://💻app/app/chatpal-search/client/template/admin.js","meteor://💻app/app/chatpal-search/client/template/result.js","meteor://💻app/app/chatpal-search/client/template/suggestion.js","meteor://💻app/app/chatpal-search/client/index.js","meteor://💻app/app/livestream/client/views/broadcastView.js","meteor://💻app/app/livestream/client/views/liveStreamTab.js","meteor://💻app/app/livestream/client/views/liveStreamView.js","meteor://💻app/app/livestream/client/index.js","meteor://💻app/app/livestream/client/oauth.js","meteor://💻app/app/livestream/client/tabBar.tsx","meteor://💻app/app/mentions-flextab/client/views/mentionsFlexTab.js","meteor://💻app/app/mentions-flextab/client/actionButton.js","meteor://💻app/app/mentions-flextab/client/index.js","meteor://💻app/app/mentions-flextab/client/tabBar.ts","meteor://💻app/app/message-pin/client/views/pinnedMessages.js","meteor://💻app/app/message-pin/client/actionButton.js","meteor://💻app/app/message-pin/client/index.js","meteor://💻app/app/message-pin/client/messageType.js","meteor://💻app/app/message-pin/client/pinMessage.js","meteor://💻app/app/message-pin/client/tabBar.ts","meteor://💻app/app/message-star/client/views/starredMessages.js","meteor://💻app/app/message-star/client/actionButton.js","meteor://💻app/app/message-star/client/index.js","meteor://💻app/app/message-star/client/starMessage.js","meteor://💻app/app/message-star/client/tabBar.ts","meteor://💻app/app/oauth2-server-config/client/oauth/oauth2-client.js","meteor://💻app/app/oauth2-server-config/client/admin/startup.js","meteor://💻app/app/oauth2-server-config/client/index.js","meteor://💻app/app/search/client/provider/result.js","meteor://💻app/app/search/client/search/search.js","meteor://💻app/app/search/client/index.js","meteor://💻app/app/threads/client/flextab/messageBoxFollow.js","meteor://💻app/app/threads/client/flextab/thread.js","meteor://💻app/app/threads/client/flextab/threadlist.tsx","meteor://💻app/app/threads/client/flextab/threads.js","meteor://💻app/app/threads/client/lib/normalizeThreadTitle.js","meteor://💻app/app/threads/client/messageAction/follow.js","meteor://💻app/app/threads/client/messageAction/replyInThread.js","meteor://💻app/app/threads/client/messageAction/unfollow.js","meteor://💻app/app/threads/client/index.js","meteor://💻app/app/ui-account/client/avatar/avatar.js","meteor://💻app/app/ui-account/client/index.js","meteor://💻app/app/ui-login/client/login/form.js","meteor://💻app/app/ui-login/client/login/layout.js","meteor://💻app/app/ui-login/client/login/services.js","meteor://💻app/app/ui-login/client/username/username.js","meteor://💻app/app/ui-login/client/index.js","meteor://💻app/app/ui-master/client/loading/index.js","meteor://💻app/app/ui-master/client/body.js","meteor://💻app/app/ui-master/client/index.js","meteor://💻app/app/ui-message/client/messageBox/messageBox.js","meteor://💻app/app/ui-message/client/messageBox/messageBoxActions.js","meteor://💻app/app/ui-message/client/messageBox/messageBoxAudioMessage.js","meteor://💻app/app/ui-message/client/messageBox/messageBoxAutogrow.js","meteor://💻app/app/ui-message/client/messageBox/messageBoxFormatting.js","meteor://💻app/app/ui-message/client/messageBox/messageBoxNotSubscribed.js","meteor://💻app/app/ui-message/client/messageBox/messageBoxReadOnly.js","meteor://💻app/app/ui-message/client/messageBox/messageBoxReplyPreview.js","meteor://💻app/app/ui-message/client/messageBox/userActionIndicator.ts","meteor://💻app/app/ui-message/client/popup/customMessagePopups.js","meteor://💻app/app/ui-message/client/popup/messagePopup.js","meteor://💻app/app/ui-message/client/popup/messagePopupChannel.js","meteor://💻app/app/ui-message/client/popup/messagePopupConfig.js","meteor://💻app/app/ui-message/client/popup/messagePopupEmoji.js","meteor://💻app/app/ui-message/client/popup/messagePopupSlashCommandPreview.js","meteor://💻app/app/ui-message/client/actionButtons/lib/applyButtonFilters.ts","meteor://💻app/app/ui-message/client/actionButtons/messageAction.ts","meteor://💻app/app/ui-message/client/actionButtons/messageBox.ts","meteor://💻app/app/ui-message/client/actionButtons/tabbar.ts","meteor://💻app/app/ui-message/client/ActionButtonSyncer.ts","meteor://💻app/app/ui-message/client/ActionManager.js","meteor://💻app/app/ui-message/client/index.js","meteor://💻app/app/ui-message/client/message.js","meteor://💻app/app/ui-message/client/messageThread.js","meteor://💻app/app/videobridge/client/actionLink.js","meteor://💻app/app/videobridge/client/index.js","meteor://💻app/app/videobridge/client/tabBar.tsx","meteor://💻app/app/videobridge/lib/messageType.js","meteor://💻app/app/authorization/client/lib/ChatPermissions.js","meteor://💻app/app/authorization/client/lib/streamer.js","meteor://💻app/app/authorization/client/hasPermission.ts","meteor://💻app/app/authorization/client/hasRole.js","meteor://💻app/app/authorization/client/index.js","meteor://💻app/app/authorization/client/startup.js","meteor://💻app/app/authorization/lib/AuthorizationUtils.ts","meteor://💻app/app/authorization/index.js","meteor://💻app/app/emoji/client/lib/EmojiPicker.js","meteor://💻app/app/emoji/client/emojiParser.js","meteor://💻app/app/emoji/client/index.js","meteor://💻app/app/emoji/lib/rocketchat.js","meteor://💻app/app/emoji/index.js","meteor://💻app/app/lazy-load/client/index.js","meteor://💻app/app/lazy-load/client/lazyloadImage.js","meteor://💻app/app/meteor-autocomplete/client/autocomplete-client.js","meteor://💻app/app/meteor-autocomplete/client/collection.js","meteor://💻app/app/meteor-autocomplete/client/index.js","meteor://💻app/app/meteor-autocomplete/client/templates.js","meteor://💻app/app/oembed/client/baseWidget.js","meteor://💻app/app/oembed/client/index.js","meteor://💻app/app/oembed/client/oembedImageWidget.js","meteor://💻app/app/oembed/client/oembedUrlWidget.js","meteor://💻app/app/oembed/client/oembedVideoWidget.js","meteor://💻app/app/tokenpass/client/index.js","meteor://💻app/app/tokenpass/client/roomType.js","meteor://💻app/app/tokenpass/client/startup.js","meteor://💻app/app/tokenpass/client/tokenChannelsList.js","meteor://💻app/app/tokenpass/client/tokenpassChannelSettings.js","meteor://💻app/app/tokenpass/lib/common.js","meteor://💻app/app/ui-sidenav/client/index.js","meteor://💻app/app/ui-sidenav/client/roomList.js","meteor://💻app/app/ui-sidenav/client/sideNav.js","meteor://💻app/app/ui-sidenav/client/userPresence.js","meteor://💻app/app/ui-vrecord/client/VRecDialog.js","meteor://💻app/app/ui-vrecord/client/index.js","meteor://💻app/app/ui-vrecord/client/vrecord.js","meteor://💻app/app/webdav/client/index.js","meteor://💻app/app/discussion/client/lib/messageTypes/discussionMessage.js","meteor://💻app/app/discussion/client/createDiscussionMessageAction.js","meteor://💻app/app/discussion/client/discussionFromMessageBox.js","meteor://💻app/app/discussion/client/index.js","meteor://💻app/app/discussion/client/tabBar.ts","meteor://💻app/app/discussion/lib/discussionRoomType.js","meteor://💻app/app/markdown/lib/parser/filtered/filtered.js","meteor://💻app/app/markdown/lib/parser/marked/marked.js","meteor://💻app/app/markdown/lib/parser/original/code.js","meteor://💻app/app/markdown/lib/parser/original/markdown.js","meteor://💻app/app/markdown/lib/parser/original/original.js","meteor://💻app/app/markdown/lib/parser/original/token.ts","meteor://💻app/app/markdown/lib/getGlobalWindow.ts","meteor://💻app/app/markdown/lib/hljs.js","meteor://💻app/app/markdown/lib/markdown.js","meteor://💻app/app/markdown/client/getGlobalWindow.ts","meteor://💻app/app/markdown/client/index.js","meteor://💻app/app/action-links/client/lib/actionLinks.js","meteor://💻app/app/action-links/client/index.js","meteor://💻app/app/autotranslate/client/lib/actionButton.js","meteor://💻app/app/autotranslate/client/lib/autotranslate.js","meteor://💻app/app/autotranslate/client/lib/tabBar.ts","meteor://💻app/app/autotranslate/client/index.js","meteor://💻app/app/channel-settings/client/lib/ChannelSettings.js","meteor://💻app/app/channel-settings/client/index.js","meteor://💻app/app/channel-settings/client/tabBar.ts","meteor://💻app/app/channel-settings/index.js","meteor://💻app/app/custom-sounds/client/lib/CustomSounds.js","meteor://💻app/app/custom-sounds/client/notifications/deleteCustomSound.js","meteor://💻app/app/custom-sounds/client/notifications/updateCustomSound.js","meteor://💻app/app/custom-sounds/client/index.js","meteor://💻app/app/emoji-custom/client/lib/emojiCustom.js","meteor://💻app/app/emoji-custom/client/lib/function-isSet.js","meteor://💻app/app/emoji-custom/client/admin/startup.js","meteor://💻app/app/emoji-custom/client/notifications/deleteEmojiCustom.js","meteor://💻app/app/emoji-custom/client/notifications/updateEmojiCustom.js","meteor://💻app/app/emoji-custom/client/index.js","meteor://💻app/app/file-upload/client/lib/fileUploadHandler.js","meteor://💻app/app/file-upload/client/index.js","meteor://💻app/app/file-upload/lib/FileUploadBase.js","meteor://💻app/app/file-upload/index.js","meteor://💻app/app/notifications/client/lib/Notifications.js","meteor://💻app/app/notifications/client/lib/Presence.ts","meteor://💻app/app/notifications/client/index.js","meteor://💻app/app/notifications/index.js","meteor://💻app/app/settings/client/lib/settings.ts","meteor://💻app/app/settings/client/index.ts","meteor://💻app/app/settings/lib/settings.ts","meteor://💻app/app/settings/index.js","meteor://💻app/app/ui-clean-history/client/lib/tabBar.ts","meteor://💻app/app/ui-clean-history/client/index.js","meteor://💻app/app/user-status/client/lib/customUserStatus.js","meteor://💻app/app/user-status/client/lib/userStatus.ts","meteor://💻app/app/user-status/client/admin/startup.js","meteor://💻app/app/user-status/client/notifications/deleteCustomUserStatus.js","meteor://💻app/app/user-status/client/notifications/updateCustomUserStatus.js","meteor://💻app/app/user-status/client/index.js","meteor://💻app/app/utils/client/lib/RestApiClient.js","meteor://💻app/app/utils/client/lib/roomTypes.js","meteor://💻app/app/utils/client/index.js","meteor://💻app/app/utils/lib/RoomTypeConfig.js","meteor://💻app/app/utils/lib/RoomTypesCommon.js","meteor://💻app/app/utils/lib/fileUploadRestrictions.js","meteor://💻app/app/utils/lib/getAvatarColor.js","meteor://💻app/app/utils/lib/getAvatarURL.js","meteor://💻app/app/utils/lib/getDefaultSubscriptionPref.js","meteor://💻app/app/utils/lib/getRoomAvatarURL.js","meteor://💻app/app/utils/lib/getURL.js","meteor://💻app/app/utils/lib/getUserAvatarURL.js","meteor://💻app/app/utils/lib/getUserNotificationPreference.js","meteor://💻app/app/utils/lib/getUserPreference.js","meteor://💻app/app/utils/lib/isURL.js","meteor://💻app/app/utils/lib/placeholders.js","meteor://💻app/app/utils/lib/roomExit.js","meteor://💻app/app/utils/lib/slashCommand.js","meteor://💻app/app/utils/lib/tapi18n.js","meteor://💻app/app/utils/lib/templateVarHandler.js","meteor://💻app/app/utils/lib/timeConverter.js","meteor://💻app/app/utils/stream/constants.js","meteor://💻app/app/utils/index.js","meteor://💻app/app/dolphin/lib/common.js","meteor://💻app/app/dolphin/client/index.js","meteor://💻app/app/drupal/lib/common.js","meteor://💻app/app/drupal/client/index.js","meteor://💻app/app/emoji-emojione/lib/emojiPicker.js","meteor://💻app/app/emoji-emojione/lib/emojioneRender.js","meteor://💻app/app/emoji-emojione/lib/rocketchat.js","meteor://💻app/app/emoji-emojione/client/index.js","meteor://💻app/app/github-enterprise/lib/common.js","meteor://💻app/app/github-enterprise/client/index.js","meteor://💻app/app/gitlab/lib/common.js","meteor://💻app/app/gitlab/client/index.js","meteor://💻app/app/importer/lib/ImporterInfo.js","meteor://💻app/app/importer/lib/ImporterProgressStep.js","meteor://💻app/app/importer/lib/Importers.js","meteor://💻app/app/importer/client/index.js","meteor://💻app/app/importer-csv/lib/info.js","meteor://💻app/app/importer-csv/client/adder.js","meteor://💻app/app/importer-csv/client/index.js","meteor://💻app/app/importer-hipchat-enterprise/lib/info.js","meteor://💻app/app/importer-hipchat-enterprise/client/adder.js","meteor://💻app/app/importer-hipchat-enterprise/client/index.js","meteor://💻app/app/importer-slack/lib/info.js","meteor://💻app/app/importer-slack/client/adder.js","meteor://💻app/app/importer-slack/client/index.js","meteor://💻app/app/importer-slack-users/lib/info.js","meteor://💻app/app/importer-slack-users/client/adder.js","meteor://💻app/app/importer-slack-users/client/index.js","meteor://💻app/app/integrations/client/startup.js","meteor://💻app/app/mentions/lib/MentionsParser.js","meteor://💻app/app/mentions/client/client.js","meteor://💻app/app/nextcloud/lib/common.js","meteor://💻app/app/nextcloud/client/index.js","meteor://💻app/app/slashcommand-asciiarts/lib/gimme.js","meteor://💻app/app/slashcommand-asciiarts/lib/lenny.js","meteor://💻app/app/slashcommand-asciiarts/lib/shrug.js","meteor://💻app/app/slashcommand-asciiarts/lib/tableflip.js","meteor://💻app/app/slashcommand-asciiarts/lib/unflip.js","meteor://💻app/app/slashcommand-asciiarts/client/index.js","meteor://💻app/app/slashcommands-topic/lib/topic.js","meteor://💻app/app/slashcommands-topic/client/index.js","meteor://💻app/app/wordpress/lib/common.js","meteor://💻app/app/wordpress/client/index.js","meteor://💻app/app/theme/client/index.js","meteor://💻app/app/e2e/client/E2ERoomState.ts","meteor://💻app/app/e2e/client/events.js","meteor://💻app/app/e2e/client/helper.js","meteor://💻app/app/e2e/client/index.js","meteor://💻app/app/e2e/client/logger.ts","meteor://💻app/app/e2e/client/rocketchat.e2e.js","meteor://💻app/app/e2e/client/rocketchat.e2e.room.js","meteor://💻app/app/e2e/client/tabbar.ts","meteor://💻app/app/models/client/models/Avatars.js","meteor://💻app/app/models/client/models/CachedChannelList.js","meteor://💻app/app/models/client/models/CachedChatRoom.js","meteor://💻app/app/models/client/models/CachedChatSubscription.js","meteor://💻app/app/models/client/models/CachedUserList.js","meteor://💻app/app/models/client/models/ChatMessage.js","meteor://💻app/app/models/client/models/ChatPermissions.js","meteor://💻app/app/models/client/models/ChatRoom.js","meteor://💻app/app/models/client/models/ChatSubscription.js","meteor://💻app/app/models/client/models/CustomSounds.js","meteor://💻app/app/models/client/models/EmojiCustom.js","meteor://💻app/app/models/client/models/Roles.js","meteor://💻app/app/models/client/models/RoomRoles.js","meteor://💻app/app/models/client/models/Subscriptions.js","meteor://💻app/app/models/client/models/Uploads.js","meteor://💻app/app/models/client/models/UserAndRoom.js","meteor://💻app/app/models/client/models/UserDataFiles.js","meteor://💻app/app/models/client/models/UserRoles.js","meteor://💻app/app/models/client/models/Users.js","meteor://💻app/app/models/client/models/WebdavAccounts.js","meteor://💻app/app/models/client/models/_Base.js","meteor://💻app/app/models/client/index.js","meteor://💻app/app/models/index.js","meteor://💻app/app/otr/client/index.js","meteor://💻app/app/otr/client/rocketchat.otr.js","meteor://💻app/app/otr/client/rocketchat.otr.room.js","meteor://💻app/app/otr/client/tabBar.ts","meteor://💻app/app/reactions/client/methods/setReaction.js","meteor://💻app/app/reactions/client/index.js","meteor://💻app/app/reactions/client/init.js","meteor://💻app/app/ui-cached-collection/client/models/CachedCollection.js","meteor://💻app/app/ui-cached-collection/client/index.js","meteor://💻app/app/ui-cached-collection/index.js","meteor://💻app/app/2fa/client/TOTPCrowd.js","meteor://💻app/app/2fa/client/TOTPGoogle.js","meteor://💻app/app/2fa/client/TOTPLDAP.js","meteor://💻app/app/2fa/client/TOTPOAuth.js","meteor://💻app/app/2fa/client/TOTPPassword.js","meteor://💻app/app/2fa/client/TOTPSaml.js","meteor://💻app/app/2fa/client/index.ts","meteor://💻app/app/2fa/client/overrideMeteorCall.ts","meteor://💻app/app/analytics/client/index.js","meteor://💻app/app/analytics/client/loadScript.js","meteor://💻app/app/analytics/client/trackEvents.js","meteor://💻app/app/blockstack/client/index.js","meteor://💻app/app/blockstack/client/routes.js","meteor://💻app/app/cas/client/cas_client.js","meteor://💻app/app/cas/client/index.js","meteor://💻app/app/cors/client/index.js","meteor://💻app/app/crowd/client/index.js","meteor://💻app/app/crowd/client/loginHelper.js","meteor://💻app/app/custom-oauth/client/custom_oauth_client.js","meteor://💻app/app/custom-oauth/client/swapSessionStorage.js","meteor://💻app/app/custom-oauth/index.js","meteor://💻app/app/favico/client/favico.js","meteor://💻app/app/favico/client/index.js","meteor://💻app/app/favico/index.js","meteor://💻app/app/iframe-login/client/iframe_client.js","meteor://💻app/app/iframe-login/client/index.js","meteor://💻app/app/logger/client/index.js","meteor://💻app/app/logger/client/logger.js","meteor://💻app/app/mail-messages/client/index.js","meteor://💻app/app/mail-messages/client/startup.js","meteor://💻app/app/message-attachments/client/index.js","meteor://💻app/app/message-attachments/client/renderField.js","meteor://💻app/app/message-mark-as-unread/client/actionButton.js","meteor://💻app/app/message-mark-as-unread/client/index.js","meteor://💻app/app/meteor-accounts-saml/client/index.js","meteor://💻app/app/meteor-accounts-saml/client/saml_client.js","meteor://💻app/app/nrr/client/index.js","meteor://💻app/app/nrr/client/nrr.js","meteor://💻app/app/push-notifications/client/index.js","meteor://💻app/app/push-notifications/client/tabBar.ts","meteor://💻app/app/slackbridge/client/index.js","meteor://💻app/app/slackbridge/client/slackbridge_import.client.js","meteor://💻app/app/slashcommands-archiveroom/client/client.js","meteor://💻app/app/slashcommands-archiveroom/client/index.js","meteor://💻app/app/slashcommands-create/client/client.js","meteor://💻app/app/slashcommands-create/client/index.js","meteor://💻app/app/slashcommands-hide/client/hide.js","meteor://💻app/app/slashcommands-hide/client/index.js","meteor://💻app/app/slashcommands-invite/client/client.js","meteor://💻app/app/slashcommands-invite/client/index.js","meteor://💻app/app/slashcommands-inviteall/client/client.js","meteor://💻app/app/slashcommands-inviteall/client/index.js","meteor://💻app/app/slashcommands-join/client/client.ts","meteor://💻app/app/slashcommands-join/client/index.ts","meteor://💻app/app/slashcommands-kick/client/client.js","meteor://💻app/app/slashcommands-kick/client/index.js","meteor://💻app/app/slashcommands-open/client/client.js","meteor://💻app/app/slashcommands-open/client/index.js","meteor://💻app/app/slashcommands-unarchiveroom/client/client.js","meteor://💻app/app/slashcommands-unarchiveroom/client/index.js","meteor://💻app/app/version-check/client/index.js","meteor://💻app/app/webrtc/client/WebRTCClass.js","meteor://💻app/app/webrtc/client/actionLink.tsx","meteor://💻app/app/webrtc/client/adapter.js","meteor://💻app/app/webrtc/client/index.js","meteor://💻app/app/webrtc/client/screenShare.js","meteor://💻app/app/webrtc/client/tabBar.tsx","meteor://💻app/app/webrtc/index.js","meteor://💻app/ee/app/livechat-enterprise/client/views/app/customTemplates/visitorEditCustomFieldsForm.js","meteor://💻app/ee/app/livechat-enterprise/client/views/app/customTemplates/visitorInfoCustomForm.js","meteor://💻app/ee/app/livechat-enterprise/client/views/app/registerCustomTemplates.js","meteor://💻app/ee/app/livechat-enterprise/client/views/business-hours/Multiple.ts","meteor://💻app/ee/app/livechat-enterprise/client/views/livechatSideNavItems.js","meteor://💻app/ee/app/livechat-enterprise/client/SingleBusinessHour.ts","meteor://💻app/ee/app/livechat-enterprise/client/index.js","meteor://💻app/ee/app/livechat-enterprise/client/messageTypes.ts","meteor://💻app/ee/app/livechat-enterprise/client/route.js","meteor://💻app/ee/app/livechat-enterprise/client/startup.ts","meteor://💻app/ee/app/livechat-enterprise/lib/QuickActions/defaultActions.ts","meteor://💻app/ee/app/livechat-enterprise/lib/messageTypes.js","meteor://💻app/ee/app/auditing/client/templates/audit/audit.js","meteor://💻app/ee/app/auditing/client/templates/index.js","meteor://💻app/ee/app/auditing/client/index.js","meteor://💻app/ee/app/auditing/client/utils.js","meteor://💻app/ee/app/canned-responses/client/views/popup/addMessagePopupCannedResponse.js","meteor://💻app/ee/app/canned-responses/client/views/tabbar/cannedResponses.js","meteor://💻app/ee/app/canned-responses/client/views/tabbar/departmentCannedResponses.js","meteor://💻app/ee/app/canned-responses/client/collections/CannedResponse.js","meteor://💻app/ee/app/canned-responses/client/startup/responses.js","meteor://💻app/ee/app/canned-responses/client/index.js","meteor://💻app/ee/app/canned-responses/client/streamer.js","meteor://💻app/ee/app/canned-responses/client/tabBar.ts","meteor://💻app/ee/app/authorization/lib/addRoleRestrictions.js","meteor://💻app/ee/app/authorization/lib/guestPermissions.js","meteor://💻app/ee/app/authorization/client/index.ts","meteor://💻app/ee/app/license/client/index.ts","meteor://💻app/ee/client/lib/fetchFeatures.ts","meteor://💻app/ee/client/lib/onToggledFeature.ts","meteor://💻app/ee/client/omnichannel/additionalForms/register.js","meteor://💻app/ee/client/omnichannel/index.js","meteor://💻app/ee/client/omnichannel/routes.js","meteor://💻app/ee/client/hooks/useHasLicense.js","meteor://💻app/ee/client/startup/engagementDashboard.ts","meteor://💻app/ee/client/startup/index.ts","meteor://💻app/ee/client/startup/routes.ts","meteor://💻app/ee/client/ecdh.ts","meteor://💻app/ee/client/index.ts","meteor://💻app/client/views/room/lib/QuickActions/index.tsx","meteor://💻app/client/views/room/lib/Toolbox/IframeButtons.tsx","meteor://💻app/client/views/room/lib/Toolbox/generator.tsx","meteor://💻app/client/views/room/lib/Toolbox/index.tsx","meteor://💻app/client/views/room/modals/FileUploadModal/FilePreview.tsx","meteor://💻app/client/views/room/modals/FileUploadModal/FileUploadModal.tsx","meteor://💻app/client/views/room/modals/FileUploadModal/GenericPreview.tsx","meteor://💻app/client/views/room/modals/FileUploadModal/ImagePreview.tsx","meteor://💻app/client/views/room/modals/FileUploadModal/MediaPreview.tsx","meteor://💻app/client/views/room/modals/FileUploadModal/PreviewSkeleton.tsx","meteor://💻app/client/views/room/modals/FileUploadModal/index.ts","meteor://💻app/client/views/room/modals/ReactionListModal/ReactionListModal.tsx","meteor://💻app/client/views/room/modals/ReactionListModal/ReactionUserTag.tsx","meteor://💻app/client/views/room/modals/ReactionListModal/Reactions.tsx","meteor://💻app/client/views/room/modals/ReactionListModal/index.ts","meteor://💻app/client/views/room/modals/ReadReceiptsModal/ReadReceiptRow.tsx","meteor://💻app/client/views/room/modals/ReadReceiptsModal/ReadReceiptsModal.tsx","meteor://💻app/client/views/room/modals/ReadReceiptsModal/index.ts","meteor://💻app/client/views/admin/index.ts","meteor://💻app/client/views/admin/routes.js","meteor://💻app/client/views/admin/sidebarItems.js","meteor://💻app/client/views/omnichannel/additionalForms.js","meteor://💻app/client/views/omnichannel/routes.js","meteor://💻app/client/views/omnichannel/sidebarItems.js","meteor://💻app/client/views/teams/contextualBar/channels/tabBar.ts","meteor://💻app/client/views/teams/contextualBar/info/tabBar.ts","meteor://💻app/client/views/teams/index.js","meteor://💻app/client/views/root/AppRoot.tsx","meteor://💻app/client/views/root/PageLoading.tsx","meteor://💻app/client/views/e2e/EnterE2EPasswordModal.tsx","meteor://💻app/client/views/e2e/SaveE2EPasswordModal.tsx","meteor://💻app/client/components/RoomIcon/OmnichannelRoomIcon/lib/OmnichannelRoomIcon.ts","meteor://💻app/client/components/RoomIcon/OmnichannelRoomIcon/context/OmnichannelRoomIconContext.tsx","meteor://💻app/client/components/RoomIcon/OmnichannelRoomIcon/provider/OmnichannelRoomIconProvider.tsx","meteor://💻app/client/components/RoomAutoComplete/Avatar.js","meteor://💻app/client/components/RoomAutoComplete/RoomAutoComplete.js","meteor://💻app/client/components/RoomAutoComplete/index.ts","meteor://💻app/client/components/avatar/BaseAvatar.tsx","meteor://💻app/client/components/avatar/RoomAvatar.js","meteor://💻app/client/components/avatar/UserAvatar.tsx","meteor://💻app/client/components/CreateDiscussion/CreateDiscussion.tsx","meteor://💻app/client/components/CreateDiscussion/DefaultParentRoomField.tsx","meteor://💻app/client/components/Header/Avatar.tsx","meteor://💻app/client/components/Header/Button.tsx","meteor://💻app/client/components/Header/Content.tsx","meteor://💻app/client/components/Header/Header.tsx","meteor://💻app/client/components/Header/HeaderDivider.tsx","meteor://💻app/client/components/Header/HeaderIcon.tsx","meteor://💻app/client/components/Header/HeaderLink.tsx","meteor://💻app/client/components/Header/HeaderTag.tsx","meteor://💻app/client/components/Header/HeaderTagIcon.tsx","meteor://💻app/client/components/Header/HeaderTagSkeleton.tsx","meteor://💻app/client/components/Header/Row.tsx","meteor://💻app/client/components/Header/State.tsx","meteor://💻app/client/components/Header/Subtitle.tsx","meteor://💻app/client/components/Header/Title.tsx","meteor://💻app/client/components/Header/ToolBox.tsx","meteor://💻app/client/components/Header/ToolBoxAction.tsx","meteor://💻app/client/components/Header/ToolBoxActionBadge.tsx","meteor://💻app/client/components/Header/index.ts","meteor://💻app/client/components/TwoFactorModal/TwoFactorEmailModal.tsx","meteor://💻app/client/components/TwoFactorModal/TwoFactorModal.tsx","meteor://💻app/client/components/TwoFactorModal/TwoFactorPasswordModal.tsx","meteor://💻app/client/components/TwoFactorModal/TwoFactorTotpModal.tsx","meteor://💻app/client/components/TwoFactorModal/index.ts","meteor://💻app/client/components/UserAutoCompleteMultiple/UserAutoCompleteMultiple.js","meteor://💻app/client/components/UserAutoCompleteMultiple/index.ts","meteor://💻app/client/components/Emoji.js","meteor://💻app/client/components/GenericModal.tsx","meteor://💻app/client/components/UrlChangeModal.tsx","meteor://💻app/client/components/withDoNotAskAgain.tsx","meteor://💻app/client/lib/2fa/overrideLoginMethod.ts","meteor://💻app/client/lib/2fa/process2faReturn.ts","meteor://💻app/client/lib/2fa/utils.ts","meteor://💻app/client/lib/asyncState/AsyncStatePhase.ts","meteor://💻app/client/lib/asyncState/functions.ts","meteor://💻app/client/lib/asyncState/index.ts","meteor://💻app/client/lib/portals/blazePortals.ts","meteor://💻app/client/lib/portals/createEphemeralPortal.ts","meteor://💻app/client/lib/portals/createLazyElement.ts","meteor://💻app/client/lib/portals/createLazyPortal.ts","meteor://💻app/client/lib/portals/createTemplateForComponent.ts","meteor://💻app/client/lib/portals/portalsSubscription.ts","meteor://💻app/client/lib/settings/PublicSettingsCachedCollection.ts","meteor://💻app/client/lib/utils/applyCustomTranslations.ts","meteor://💻app/client/lib/utils/call.ts","meteor://💻app/client/lib/utils/callWithErrorHandling.ts","meteor://💻app/client/lib/utils/canDeleteMessage.ts","meteor://💻app/client/lib/utils/createAnchor.ts","meteor://💻app/client/lib/utils/domEvents.ts","meteor://💻app/client/lib/utils/filterLanguage.ts","meteor://💻app/client/lib/utils/fireGlobalEvent.ts","meteor://💻app/client/lib/utils/formatBytes.ts","meteor://💻app/client/lib/utils/formatDate.ts","meteor://💻app/client/lib/utils/formatDateAndTime.ts","meteor://💻app/client/lib/utils/formatTime.ts","meteor://💻app/client/lib/utils/getAvatarAsPng.ts","meteor://💻app/client/lib/utils/getConfig.ts","meteor://💻app/client/lib/utils/getUidDirectMessage.ts","meteor://💻app/client/lib/utils/goToRoomById.ts","meteor://💻app/client/lib/utils/handleError.ts","meteor://💻app/client/lib/utils/isIE11.ts","meteor://💻app/client/lib/utils/isIOsDevice.ts","meteor://💻app/client/lib/utils/isLayoutEmbedded.ts","meteor://💻app/client/lib/utils/isRTL.ts","meteor://💻app/client/lib/utils/keyCodes.ts","meteor://💻app/client/lib/utils/prependReplies.ts","meteor://💻app/client/lib/utils/renderEmoji.ts","meteor://💻app/client/lib/utils/renderMessageBody.ts","meteor://💻app/client/lib/utils/timeAgo.ts","meteor://💻app/client/lib/utils/waitUntilFind.ts","meteor://💻app/client/lib/RoomManager.ts","meteor://💻app/client/lib/appLayout.ts","meteor://💻app/client/lib/banners.ts","meteor://💻app/client/lib/baseURI.ts","meteor://💻app/client/lib/createRouteGroup.ts","meteor://💻app/client/lib/createSidebarItems.ts","meteor://💻app/client/lib/getUserDisplayName.ts","meteor://💻app/client/lib/imperativeModal.ts","meteor://💻app/client/lib/meteorCallWrapper.ts","meteor://💻app/client/lib/onClientBeforeSendMessage.ts","meteor://💻app/client/lib/onClientMessageReceived.ts","meteor://💻app/client/lib/presence.ts","meteor://💻app/client/lib/queryClient.ts","meteor://💻app/client/lib/toast.ts","meteor://💻app/client/lib/userData.ts","meteor://💻app/client/contexts/ServerContext/ServerContext.ts","meteor://💻app/client/contexts/ServerContext/index.ts","meteor://💻app/client/contexts/AuthorizationContext.ts","meteor://💻app/client/contexts/AvatarUrlContext.ts","meteor://💻app/client/contexts/LayoutContext.ts","meteor://💻app/client/contexts/RouterContext.ts","meteor://💻app/client/contexts/SettingsContext.ts","meteor://💻app/client/contexts/ToastMessagesContext.ts","meteor://💻app/client/contexts/TranslationContext.ts","meteor://💻app/client/contexts/UserContext.ts","meteor://💻app/client/hooks/useAsyncState.ts","meteor://💻app/client/hooks/useEndpointActionExperimental.ts","meteor://💻app/client/hooks/useEndpointData.ts","meteor://💻app/client/hooks/useForm.ts","meteor://💻app/client/hooks/useFormatDateAndTime.js","meteor://💻app/client/hooks/useMethodData.ts","meteor://💻app/client/hooks/useReactiveValue.ts","meteor://💻app/client/hooks/useUserDisplayName.ts","meteor://💻app/client/startup/afterLogoutCleanUp/customScriptOnLogout.ts","meteor://💻app/client/startup/afterLogoutCleanUp/index.ts","meteor://💻app/client/startup/contextualBar/exportMessages.ts","meteor://💻app/client/startup/contextualBar/index.ts","meteor://💻app/client/startup/notifications/index.ts","meteor://💻app/client/startup/notifications/konchatNotifications.ts","meteor://💻app/client/startup/notifications/updateAvatar.ts","meteor://💻app/client/startup/notifications/usersNameChanged.ts","meteor://💻app/client/startup/renderMessage/autolinker.ts","meteor://💻app/client/startup/renderMessage/autotranslate.ts","meteor://💻app/client/startup/renderMessage/emoji.ts","meteor://💻app/client/startup/renderMessage/hexcolor.ts","meteor://💻app/client/startup/renderMessage/highlightWords.ts","meteor://💻app/client/startup/renderMessage/index.ts","meteor://💻app/client/startup/renderMessage/issuelink.ts","meteor://💻app/client/startup/renderMessage/katex.ts","meteor://💻app/client/startup/renderMessage/markdown.ts","meteor://💻app/client/startup/renderMessage/mentionsMessage.ts","meteor://💻app/client/startup/renderNotification/index.ts","meteor://💻app/client/startup/renderNotification/markdown.ts","meteor://💻app/client/startup/streamMessage/autotranslate.ts","meteor://💻app/client/startup/streamMessage/index.ts","meteor://💻app/client/startup/UserDeleted.ts","meteor://💻app/client/startup/absoluteUrl.ts","meteor://💻app/client/startup/appRoot.tsx","meteor://💻app/client/startup/banners.ts","meteor://💻app/client/startup/callbacks.ts","meteor://💻app/client/startup/customOAuth.ts","meteor://💻app/client/startup/customTranslations.ts","meteor://💻app/client/startup/e2e.ts","meteor://💻app/client/startup/emailVerification.ts","meteor://💻app/client/startup/i18n.ts","meteor://💻app/client/startup/index.ts","meteor://💻app/client/startup/ldap.ts","meteor://💻app/client/startup/loginViaQuery.ts","meteor://💻app/client/startup/messageTypes.ts","meteor://💻app/client/startup/oauth.ts","meteor://💻app/client/startup/readReceipt.ts","meteor://💻app/client/startup/roomObserve.ts","meteor://💻app/client/startup/rootUrlChange.ts","meteor://💻app/client/startup/routes.tsx","meteor://💻app/client/startup/setupWizard.ts","meteor://💻app/client/startup/slashCommands.ts","meteor://💻app/client/startup/startup.ts","meteor://💻app/client/startup/theme.ts","meteor://💻app/client/startup/unread.ts","meteor://💻app/client/startup/userRoles.ts","meteor://💻app/client/startup/userSetUtcOffset.ts","meteor://💻app/client/startup/userStatusManuallySet.ts","meteor://💻app/client/startup/usersObserve.ts","meteor://💻app/client/methods/deleteMessage.js","meteor://💻app/client/methods/hideRoom.js","meteor://💻app/client/methods/openRoom.js","meteor://💻app/client/methods/setUserActiveStatus.js","meteor://💻app/client/methods/toggleFavorite.js","meteor://💻app/client/methods/updateMessage.js","meteor://💻app/client/polyfills/childNodeRemove.ts","meteor://💻app/client/polyfills/cssVars.ts","meteor://💻app/client/polyfills/customEventPolyfill.ts","meteor://💻app/client/polyfills/hoverTouchClick.ts","meteor://💻app/client/polyfills/index.ts","meteor://💻app/client/polyfills/objectFromEntries.ts","meteor://💻app/client/templateHelpers/avatarUrlFromUsername.ts","meteor://💻app/client/templateHelpers/emojiUrlFromName.ts","meteor://💻app/client/templateHelpers/hasPermission.ts","meteor://💻app/client/templateHelpers/index.ts","meteor://💻app/client/templateHelpers/log.ts","meteor://💻app/client/templateHelpers/nrrargs.ts","meteor://💻app/client/templateHelpers/renderEmoji.ts","meteor://💻app/client/templateHelpers/userHasAllPermission.ts","meteor://💻app/client/importPackages.ts","meteor://💻app/client/templates.ts","meteor://💻app/client/main.ts","meteor://💻app/lib/callbacks.ts","meteor://💻app/lib/emailValidator.ts","meteor://💻app/lib/getImageExtensionFromMime.ts","meteor://💻app/lib/random.ts","meteor://💻app/lib/transforms.ts","meteor://💻app/definition/rest/v1/settings.ts","meteor://💻app/definition/IBanner.ts","meteor://💻app/definition/ILivechatBusinessHour.ts","meteor://💻app/definition/IRoom.ts","meteor://💻app/definition/UIKit.ts","meteor://💻app/definition/UserStatus.ts"],"names":["_regeneratorRuntime","module","link","default","v","Meteor","Session","Template","CodeMirrors","CodeMirror","onRendered","options","data","lineNumbers","textarea","find","editor","fromTextArea","autorun","c","currentData","code","undefined","stop","setValue","id","editorOnBlur","name","self","on","doc","val","getValue","value","reactiveVar","set","get","defer","refresh","destroyed","$","next","remove","helpers","editorId","editorName","_inheritsLoose","export","AudioEncoder","Emitter","settings","source","bufferLen","numChannels","bitRate","handleWorkerMessage","event","command","blob","Blob","buffer","type","emit","worker","terminate","handleAudioProcess","channel","inputBuffer","numberOfChannels","getChannelData","postMessage","workerPath","absoluteUrl","Worker","onmessage","config","sampleRate","context","scriptNode","createScriptProcessor","createJavaScriptNode","call","onaudioprocess","connect","destination","close","AudioRecorder","instance","getUserMedia","navigator","mediaDevices","bind","legacyGetUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","Promise","resolve","reject","window","AudioContext","webkitAudioContext","isSupported","Boolean","createAudioContext","audioContext","destroyAudioContext","createStream","stream","audio","destroyStream","getAudioTracks","forEach","track","createEncoder","encoder","input","createMediaStreamSource","destroyEncoder","start","cb","console","error","VideoRecorder","ReactiveVar","started","cameraStarted","recording","recordingAvailable","videoel","handleSuccess","startUserMedia","handleError","oldGetUserMedia","video","then","record","chunks","mediaRecorder","MediaRecorder","ondataavailable","blobev","push","srcObject","URL","webkitURL","src","createObjectURL","muted","onloadedmetadata","play","stopRecording","vtracks","getVideoTracks","Array","from","vtrack","atracks","atrack","pause","recorder","closeTooltip","openToolTip","Tracker","createEphemeralPortal","createAnchor","Dep","Dependency","state","dom","unregister","props","depend","title","anchor","changed","matchMedia","matches","document","body","addEventListener","timeout","e","clearTimeout","setTimeout","element","target","dataset","closest","removeAttribute","_objectSpread","closeUserCard","openUserCard","FlowRouter","container","routeComputation","createContainer","div","createElement","appendChild","afterFlush","args","onClose","watchPathChange","firstRun","Accounts","t","dispatchToastMessage","onEmailVerificationLink","token","done","verifyEmail","message","ChatMessages","moment","_","Random","TAPi18n","escapeHTML","KonchatNotification","UserAction","USER_ACTIVITIES","fileUpload","slashCommands","messageProperties","MessageTypes","readMessage","callbacks","hasAtLeastOnePermission","Messages","Rooms","ChatMessage","ChatSubscription","emoji","generateTriggerId","imperativeModal","GenericModal","keyCodes","prependReplies","callWithErrorHandling","onClientBeforeSendMessage","messageBoxState","saveValue","debounce","rid","tmid","key","filter","join","_localStorage","setItem","removeItem","restoreValue","getItem","restore","save","trigger","purgeAll","Object","keys","indexOf","add","priority","MEDIUM","collection","editing","records","initializeWrapper","wrapper","initializeInput","$input","restoreReplies","requestInputFocus","mid","getQueryParam","findOne","focus","recordInputAsDraft","draft","msg","clearCurrentDraft","hasValue","resetToDraft","oldValue","toPrevMessage","messages","querySelectorAll","pop","edit","previous","previousElementSibling","clearEditing","toNextMessage","nextElementSibling","isEditingTheNextOne","hasPermission","editAllowed","editOwn","u","_id","userId","classList","contains","blockEditInMinutes","currentTsDiff","msgTs","ts","diff","parentElement","attachments","description","cursorPosition","setCursorPosition","saved","savedCursor","selectionEnd","send","tshow","threadsEnabled","USER_TYPING","trim","mention","replies","length","originalMessage","fields","reactive","readNow","refreshUnreadMark","processMessageSend","removeData","isDescription","processMessageEditing","confirmDeleteMsg","processSetReaction","processTooLongMessage","removeRoomNotification","processSlashCommand","slice","reaction","list","lastMessage","sort","adjustedMessage","messageWithoutEmojiShortnames","Error","onConfirm","contentType","messageBlob","fileName","user","username","Date","file","File","lastModified","now","open","component","children","onCancel","variant","isSystemMessage","msgObject","match","commands","commandOptions","param","permission","clientOnly","callback","triggerId","appId","cmd","params","err","result","invalidCommandMsg","__","upsert","room","drid","prid","$exists","deleteMsg","onCloseModal","confirmText","forceDelete","blockDeleteInMinutes","keydown","currentTarget","keyCode","which","ESCAPE","preventDefault","stopPropagation","ARROW_UP","ARROW_DOWN","shiftKey","altKey","keyup","values","includes","onDestroyed","cancel","CachedChatRoom","CachedChatSubscription","startup","init","ready","uploadFileWithMessage","fileUploadIsValidContentType","APIClient","FileUploadModal","FormData","append","uploads","upload","percentage","progress","Math","round","xhr","promise","performContinuously","USER_UPLOADING","computation","isCanceling","delete","abort","remainingUploads","responseJSON","files","concat","uploadNextFile","onSubmit","invalidContentType","_typeof","_slicedToArray","ServiceConfiguration","s","escapeRegExp","AccountBox","baseURI","path","newUrl","rtrim","ltrim","newParams","searchParams","entries","reduce","ret","newPath","pathname","replace","RegExp","__meteor_runtime_config__","ROOT_URL_PATH_PREFIX","go","current","queryParams","setStatus","status","customOAuthCallback","response","origin","siteUrl","Site_Url","redirectUrl","startsWith","service","customOauth","configurations","customLoginWith","capitalize","customRedirectUri","loginWithToken","log","logout","run","icon","label","externalCommand","origins","split","menu","lastState","futureState","e2e","Users","getUserPreference","getUserAvatarURL","CustomSounds","getAvatarAsPng","onClientMessageReceived","notificationStatus","getDesktopPermission","Notification","requestPermission","notify","notification","payload","text","requireInteraction","n","sender","stripTags","tag","canReply","silent","notificationDuration","duration","onclick","tab","jump","showDesktop","hasFocus","getInstanceByRoomId","e2eRoom","decrypt","avatarAsPng","newMessage","equals","newMessageNotification","audioVolume","sub","audioNotificationValue","volume","Number","toPrecision","newRoom","nonreactive","newRoomSound","union","without","removeClass","newRoomNotification","Blaze","TemplateInstance","prototype","parentTemplate","levels","view","currentView","substring","templateInstance","parentView","Login","Button","onClick","el","$el","addClass","onBlur","parents","check","form","$form","inputs","each","time","loading","attr","html","reset","fn","pos","index","p","setSelectionRange","createTextRange","range","collapse","moveEnd","moveStart","select","getPopoverStatusConfig","actionCallback","items","modifier","action","prop","popoverClass","columns","groups","offsetVertical","clientHeight","fireGlobalEvent","header","back","buttons","events","querySelector","blur","baseUrlFix","isMozillaFirefoxBelowVersion","upperVersion","userAgent","version","parseInt","isGoogleChromeBelowVersion","isBaseUrlFixNeeded","baseUrl","popupList","template","template_list","noMatchTemplate","template_item","popupList_default","item","popupList_item_default","showRealNames","table","dummyTr","prepend","onResize","onItemClick","onScroll","onSort","tabs","onCreated","activeTab","active","onChange","condition","isActive","ariaSelected","tooltip","initiated","render","opened","placeTip","arrowSize","sourceWidth","outerWidth","sourceHeight","outerHeight","offset","left","top","tip","tipWidth","tipHeight","css","toggleClass","showElement","sourceElement","elementClone","clone","empty","show","hide","getCommonRoomEvents","Clipboard","popover","MessageAction","addMessageToList","isURL","messageArgs","chatMessages","EmojiEvents","goToRoomById","isLayoutEmbedded","mountPopover","i","outerContext","messageContext","menuItems","getButtons","map","color","messageItems","deleteItem","activeElement","touchMoved","lastTouchX","lastTouchY","touchtime","touches","originalEvent","pageX","pagey","hasClass","nodeName","getAttribute","doLongTouch","href","deltaX","abs","deltaY","pageY","button","getButtonById","messageAction","tabBar","getRouteName","update","$set","openUserInfo","msgId","_chatMessages","ctx","actionContext","allItems","itemsBelowDivider","alertsItem","group","burger","unread","userUnreadAlert","hideUnreadStatus","$ne","archived","alert","unreadAlert","fetch","unreadCount","alertType","isMenuOpen","embeddedVersion","toggle","home","_toConsumableArray","dropzoneHelpers","dropzoneEvents","ReactiveDict","roomTypes","WebRTC","RoomRoles","Subscriptions","RoomHistoryManager","RoomManager","hasAllPermission","hasRole","NewRoomManager","userCanDrop","readOnly","wipeFailedUploads","roomHasGlobalPurge","roomHasPurge","retention","enabled","roomFilesOnly","overrideGlobal","filesOnly","roomExcludePinned","excludePinned","roomMaxAge","maxAge","createFileFromUrl","url","metadata","mime","format","extension","addToInput","openedRoom","initText","selectionStart","finalText","change","dragAndDrop","isDropzoneDisabled","dragAndDropLabel","roomOld","subscribed","messagesHistory","showInMainThread","sysMes","hideSettings","settingValues","isArray","hideMessagesOfType","Set","array","query","_hidden","$or","$eq","size","$nin","hasMore","hasMoreNext","isLoading","windowId","uploading","roomLeader","roles","leader","statusText","statusDisplay","chatNowLink","getRouteLink","announcement","announcementDetails","roomData","messageboxData","sendToBottomIfNecessary","subscription","isEmbedded","showFormattingTips","onInputChanged","onKeyUp","apply","onKeyDown","onSend","getAnnouncementStyle","style","maxMessageLength","unreadData","count","getOpenedRoomByRid","since","unreadSince","containerBarsShow","hasUnreadData","isUploading","formatUnreadSince","calendar","sameDay","adminClass","messageViewMode","viewMode","modes","selectable","hideUsername","hideAvatar","canPreview","hideLeaderHeader","hasLeader","hasPurge","purgeTimeout","relativeTimeThreshold","humanize","openedThread","getParam","usernames","uids","types","dataTransfer","some","parentNode","dropzone","effectAllowed","dropEffect","transferData","getData","imgURL","filesToUpload","defineProperty","lookup","onFile","selection","getSelection","removeAllRanges","selectablePointer","selectedMessages","getSelectedMessages","selectedRange","selectMessages","difference","atBottom","clear","getRoom","firstUnread","$gt","ls","limit","getSurroundingMessages","throttle","$roomLeader","scrollTop","lastScrollTop","isAtBottom","height","getMore","ceil","scrollHeight","getMoreNext","repliedMessageId","message_link","hash","userDetail","getConfig","isGroupChat","autoTranslate","autoTranslateLanguage","showUsersOffline","flexTemplate","groupDetail","resetSelection","to","message1","message2","minTs","min","maxTs","max","pluck","$gte","$lte","previewMessages","addMessages","compact","uniq","clearUserDetail","setData","results","rolesObserve","observe","added","role","$addToSet","multi","$inc","rerender","removed","$pull","sendToBottom","off","removeEventListener","onWindowResize","observer","disconnect","chatMessage","scrollThreshold","store","getStore","afterMessageGroup","scroll","wrapperUl","messageBox","className","scrollTo","checkIfScrollIsAtBottom","ResizeObserver","wheelHandler","rtl","getElementFromPoint","topOffset","messageBoxOffset","elementFromPoint","width","updateUnreadCount","lastInvisibleMessageOnScreen","read","openCustomProfileTab","route","unreadNotLoaded","firstNode","webrtc","remoteItems","localUrl","editedAt","isAReplyInDMFromChannel","roomSearch","roomIcon","getIcon","userStatus","customFieldsForm","new","customFields","customFieldsArray","hideFromForm","fieldName","field","selectedField","formData","defaultValue","fieldValue","Accounts_CustomFields","JSON","parse","LoginPresence","awayTime","startTimer","stopTimer","timer","reconnect","RocketChatAnnouncement","announcementObject","getMessage","getCallback","getStyle","getByRoom","TimeSync","methods","sendMessage","messageAlreadyExists","isNaN","serverOffset","temp","insert","OAuth","launchLogin","wrap","func","proxy","loginService","redirect_uri","loginUrl","encodeURIComponent","ConversationRoomType","RoomTypeConfig","identifier","order","DirectMessageRoomRoute","DirectMessageRoomType","ChatRoom","openRoom","RoomTypeRouteConfig","RoomSettingsEnum","RoomMemberActions","UiTextContext","getAvatarURL","findRoom","roomName","fname","secondaryRoomName","groupByType","getUserStatus","roomId","getUserStatusText","allowRoomSettingChange","setting","TYPE","NAME","SYSTEM_MESSAGES","DESCRIPTION","READ_ONLY","REACT_WHEN_READ_ONLY","ARCHIVE_OR_UNARCHIVE","JOIN_CODE","E2E","allowMemberAction","BLOCK","enableMembersListProfile","userDetailShowAll","getUiText","HIDE_WARNING","LEAVE_WARNING","getNotificationDetails","notificationMessage","isServer","getAvatarPath","subData","avatarETag","users","includeInDashboard","FavoriteRoomType","PrivateRoomType","PublicRoomType","UnreadRoomType","PrivateRoomRoute","teamMain","canAddUser","canSendMessage","BROADCAST","broadcast","ro","cache","PublicRoomRoute","showJoinLink","includeInRoomSearch","getDiscussionType","MessageTypesValues","registerType","system","room_name","user_by","user_added","user_removed","user_left","user_muted","user_unmuted","i18nLabel","module1","exports","require","isClient","appLayout","SideNav","flexStatus","closeFlex","openFlex","addItem","newItem","actual","checkCondition","getItems","addRoute","newRoute","router","wait","customContainer","routeConfig","center","pageTemplate","i18nPageTitle","pageTitle","renderMainLayout","triggersEnter","sideNav","setFlex","IframeLogin","iframeLogin","Match","HTTP","reactiveIframeUrl","reactiveEnabled","iframeUrl","apiUrl","apiMethod","_storedLoginToken","tryLogin","beforeSend","withCredentials","separator","loginToken","tokenData","test","String","callLoginMethod","methodArguments","iframe","userCallback","mem","modal","ReactionList","canDeleteMessage","messagesList","_getButtons","sortBy","toArray","_getButtonsByGroup","addButton","cacheKey","stringify","btns","removeButton","updateButton","extend","allButtons","resetButtons","getPermaLink","roomURL","getURL","getChatMessagesFrom","openRouteLink","reply","dmRoom","isLivechatRoom","classes","permalink","clipboard","writeText","getElementById","isEditAllowed","Message_AllowEditing","Message_AllowEditing_BlockEditInMinutes","uid","inputPlaceholder","showCancelButton","confirmButtonColor","confirmButtonText","cancelButtonText","closeOnConfirm","inputValue","showInputError","showConfirmButton","reactions","_objectWithoutProperties","_extends","normalizeThreadMessage","waitUntilWrapperExists","upsertMessage","upsertMessageBulk","uuidv4","v4","differenceInMilliseconds","renderMessageBody","filterMarkdown","mentions","attachment","selector","MutationObserver","mutations","obs","childList","subtree","ignored","messageToUpsert","tcount","direct","following","threadMsg","repliesCount","msgs","queries","defaultLimit","waitAfterFlush","histories","requestsList","loaded","queue","requestId","lastRequest","once","unqueue","curValue","typeName","curRoomDoc","showMessageInMainThread","previousHeight","visibleMessages","heightDiff","updateMentionsMarksOfRoom","getView","w","msgElement","animate","moreAfter","moreBefore","getMoreIfIsEmpty","mainReady","Notifications","CachedCollectionManager","ROOM_DATA_STREAM","maxRoomsOpen","onDeleteMessageStream","$unset","onDeleteMessageBulkStream","ignoreDiscussion","pinned","$in","openedRooms","msgStream","Streamer","roomStream","onlineUsers","handleTrackSettingsChange","Cls","initClass","substr","streamActive","isNew","updateUnreadBars","onRoom","removeAllListeners","unRoom","closeOlderRooms","roomsToClose","reverse","roomToClose","closeAllRooms","lastSeen","invalidate","existsDomOfRoom","updateUserStatus","utcOffset","onlineUsersValue","loadMissedMessages","all","connectionWasOnline","connection","connected","currentUsername","roomType","reload","recordBefore","$lt","tick","recordAfter","onUser","private","onLogin","flexNav","animating","openQueue","toggleFlex","DISABLE_ANIMATION","routesNamesForRooms","getTypes","lastRid","getFlex","toggleCurrent","validate","invalid","prev","createCollapseable","getInicialFromInstance","collapsedMedia","collapsed","collapsedMediaVar","collapseArrow","_createClass","isRtl","sideNavW","x","in_min","in_max","out_min","out_max","_open","listOffset","listHeight","showTop","showBottom","touchstart","movestarted","blockmove","touchstartX","touchstartY","sidebarWrap","closePopover","clientX","clientY","mainContent","touchmove","touch","diffX","diffY","absX","absY","sidebar","isOpen","translate","toFixed","touchend","ignore","clientWidth","passClosePopover","_arguments","MessageBoxActions","actions","actionExists","expression","getById","messageActions","AutoTranslate","actionLinks","openThread","runAction","actionlink","openDiscussion","replyBroadcast","_updatedAt","tunread","tunreadUser","tunreadGroup","translateLanguage","getLanguage","autoImageLoad","enableMessageParserEarlyAdoption","saveMobileBandwidth","Device","isPhone","collapseMediaByDefault","showreply","showReplyButton","hasPermissionDeleteMessage","hasPermissionDeleteOwnMessage","hideRoles","UI_Use_Real_Name","Chatops_Username","AutoTranslate_Enabled","Message_ShowEditedStatus","API_Embed","API_EmbedDisabledFor","Message_GroupingPeriod","modalStack","createModal","showFooter","confirmOnEnter","closeOnEscape","inputType","renderedModal","display","renderWithData","rc_modal","destroy","confirm","errorEl","innerHTML","dontAskAgain","dontAskAgainList","dontAsk","hasAction","modalIcon","oldFocus","inputAction","checked","dontAskAgainObject","getElementsByClassName","allowOutsideClick","currentTracker","omit","messageId","setParams","setQueryParams","popout","isAudioOnly","showVideoControls","showStreamControls","y","onCloseCallback","dragstart","popoutElement","dragover","dragend","drop","positionTop","positionLeft","isMinimized","isMuted","isPlaying","getStreamStatus","streamStatus","canOpenExternal","liveStreamPlayer","setSize","streamingSource","offsetX","offsetY","dispatchEvent","Event","playVideo","pauseVideo","mute","unMute","detail","YT","PlayerState","PLAYING","PAUSED","renderedPopover","targetRect","getBoundingClientRect","dataVar","click","offsetHorizontal","originalWidth","innerWidth","popoverContent","position","direction","verticalDirection","rtlDirection","rightDirection","horizontalDirection","customCSSProperties","mousePosition","offsetWidth","offsetHeight","leftDiff","popoverWidth","popoverHeight","windowWidth","windowHeight","innerHeight","property","realTop","overflow","bottom","opacity","visibility","isSafariIos","debug","enable","unreadMark","visible","disable","isEnable","lastReadRecord","firstUnreadRecord","unreadFirstId","Message","language","messageType","getType","GraphemeSplitter","splitter","countGraphemes","validateRoomComment","comment","validateRoomTags","tagsRequired","tags","checkUserTagPermission","availableUserTags","closeRoom","invalidComment","invalidTags","tagsPlaceHolder","placeholder","hasAvailableTags","availableTags","canRemoveTag","clientAction","valueOf","is","tagVal","agentDepartments","onEnterTag","v1","departmentId","department","requestTagBeforeClosingChat","departments","dept","tagsList","isAdmin","customFormTemplate","addCustomFormTemplate","removeCustomTemplate","getCustomFormTemplate","Map","customTemplateName","encrypt","getKeyFromString","ExternalFrameContainer","externalFrameUrl","authToken","frameURLSetting","frameURL","toString","getCredentials","keyStr","register","LivechatInquiry","Mongo","Collection","subs","loop","LivechatRoomType","livechatManagerRoutes","load","prefix","LivechatRoomRoute","notSubscribedTpl","readOnlyTpl","inquiry","INVITE","JOIN","servedBy","showQuickActionButtons","formatDistance","navigation","page","history","location","commentLabel","transferredBy","transferTypes","agent","transferredTo","nextDepartment","transfer","scope","requestData","visitor","requestTypes","guest","transcript","webRtcCallEndTs","callDuration","endTime","LIMIT_DEFAULT","snippetedMessages","hasMessages","snippeted","cursor","total","mentionsFlexTab","Markdown","formatTime","snippetPage","snippet","snippetContent","markdown","tokens","date","snippetId","snippetLink","snippetName","snippetMessage","getExternalComponents","externalComponents","games","openGame","gameManifestInfo","game","GameCenter","isReady","onTableScroll","end","showGame","gameContainerOptions","clearGameManifestInfo","showBackButton","content","Apps","getExternalComponent","externalComponent","realAppClientUIHost","getUIHost","getClientUserInfo","currentUser","getClientRoomInfo","currentRoom","GameContainer","isContextualBar","isModal","post","AutoComplete","InvitePlayers","onSelectUser","selectedUsers","myUsername","unshift","onClickTagUser","deleteLastItemUser","onClickTagRoom","deleteLastItemRoom","selectedRoom","onSelectRoom","roomCollection","roomSelector","$regex","roomModifier","f","part","userModifier","nameSuggestion","discussionName","privateGroupName","warn","arr","SearchInvitePlayers","ac","filteredList","templateItem","autocomplete","KEYCODE_BACKSPACE","KEYCODE_DELETE","deleteLastItem","onFocus","onClickTag","$element","selected","endpoint","onSelect","term","inputDelay","rules","matchAll","doNotChangeWidth","tmplInst","AppWebsocketReceiver","AppEvents","loadButtons","freeze","APP_ADDED","APP_REMOVED","APP_UPDATED","APP_STATUS_CHANGE","APP_SETTING_UPDATED","COMMAND_ADDED","COMMAND_DISABLED","COMMAND_UPDATED","COMMAND_REMOVED","ACTIONS_CHANGED","onCommandAddedOrUpdated","onCommandRemovedOrDisabled","onActionsChanged","streamer","listenStreamerEvents","eventName","registerListener","listener","unregisterListener","RealAppsEngineUIHost","AppsEngineUIHost","_baseURL","getUserAvatarUrl","avatarUrl","slugifiedName","cachedMembers","members","loadAppI18nResources","handleI18nResources","TAPi18next","Utilities","languages","translations","scopedTranslations","getI18nKeyForApp","addResourceBundle","handleAppAdded","getAppLanguages","getAppsLanguages","apps","getWsListener","AppClientManager","createDeferredValue","_resolve","_reject","AppClientOrchestrator","isEnabled","isLoaded","ws","setEnabled","deferredIsEnabled","getAppClientManager","_manager","getApps","getAppsFromMarketplace","marketplace","appsOverviews","latest","price","pricingPlans","purchaseType","isEnterpriseOnly","getAppsOnBundle","bundleId","getApp","app","getAppFromMarketplace","getLatestAppFromMarketplace","appVersion","getAppSettings","setAppSettings","updated","getAppApis","apis","installApp","permissionsGranted","updateApp","uninstallApp","syncApp","setAppStatus","effectiveStatus","enableApp","disableApp","buildExternalUrl","details","getCategories","categories","_appClientUIHost","initialize","curl","method","auth","headers","opts","newLine","verbose","toUpperCase","queryString","headerKeys","toLowerCase","validateEmail","ChatpalAdmin","apiKey","lang","tac","email","readtac","getAvatarUrl","formatDate","getDMUrl","ChatpalSearchResultTemplate","badRequest","resultType","DefaultResultType","parentPayload","evt","search","env","PageSize","rows","searching","navSelected","resultsFoundForAllSearch","numFound","moreMessagesThanDisplayed","docs","resultNumFound","resultMessagesOnly","resultPaging","pageSize","currentPage","numOfPages","ChatpalSearchSingleMessage","r","roomLink","getRoomName","roomNotSubscribed","created","ChatpalSearchSingleRoom","ChatpalSearchSingleUser","cleanUsername","user_username","ChatpalSuggestionItemTemplate","getMedia","createAndConnect","WebSocket","onerror","sendMessageToWebSocket","readyState","delay","waitForStreamStatus","streamId","currentStatus","waitForBroadcastStatus","broadcastActive","broadcastId","broadcastView","broadcastSource","mediaStream","getTracks","localMediaStream","mimeType","isTypeSupported","thumbnail","streamingOptions","popup","checkInterval","setInterval","closed","clearInterval","optionsFromUrl","parsedUrl","liveStreamTab","broadcastEnabled","streamingUnavailableMessage","thumbnailUrl","hasThumbnail","hasSource","canEdit","canDock","livestreamTabSource","popoutSource","isPopoutOpen","popoutOpen","docked","clearedObject","roomAnnouncement","livestream","onYouTubePlayerAPIReady","playerReadyEvent","liveStreamView","Player","videoId","playerVars","autoplay","controls","showinfo","enablejsapi","fs","modestbranding","rel","onStateChange","playerStateChangedEvent","CustomEvent","firstScriptTag","getElementsByTagName","insertBefore","oauthWindow","pinnedMessages","pinMessage","unpinMessage","starredMessages","starred","star","starMessage","findOneByRoomIdAndMessageId","authorize","oauthApp","client_id","getToken","LOGIN_TOKEN_KEY","getClient","oauth","authorizedClients","registerAdminSidebarItem","permissionGranted","DefaultSearchResultTemplate","globalSearchEnabled","GlobalSearchEnabled","searchAll","messageParse","searchedText","customClass","groupable","RocketSearch","provider","suggestions","suggestionActive","_search","_p","assign","suggest","suggestion","supportsSuggestions","suggestionSelected","messageBoxFollow","thread","mainMessage","Threads","messageBoxData","checkboxData","callbackRemove","threadsObserve","loadMore","lastJump","scrollBehavior","scrollIntoView","sendToChannel","normalizeThreadTitle","MentionsParser","emojiParser","filteredMessage","channels","me","pattern","useRealName","userTemplate","roomTemplate","parentMessage","getRoomAvatarURL","getUsername","getRoomETag","avatar","alt","loginForm","userName","namePlaceholder","showFormLogin","btnLoginSave","loginTerms","registrationAllowed","validSecretUrl","validSecretURL","linkReplacementText","passwordResetAllowed","requirePasswordConfirmation","emailOrUsernamePlaceholder","passwordPlaceholder","confirmPasswordPlaceholder","manuallyApproveNewUsers","typedEmail","secretURL","reason","loginWithPassword","pass","loginMethod","emailOrUsername","registrationForm","serializeArray","formObj","validationObj","isEmpty","loginLayout","backgroundUrl","asset","defaultUrl","loginServices","showButton","displayName","loginMethods","loadingIcon","serviceIcon","loginWithService","serviceConfig","clientConfig","error1","validateCustomFields","hasOwnProperty","customField","required","maxLength","minLength","usernameValue","blocked","unavailable","escaped","escape","ctrlKey","handleClearUnreadAllMessages","subscriptions","metaKey","tagName","inputMessage","handleMessageLinkClick","d","script","l","getTime","j","dl","async","setupAutogrow","formattingButtons","applyFormatting","EmojiPicker","getImageExtensionFromMime","isRTL","popupConfig","replyMessageData","isMicrophoneDenied","isSendIconVisible","insertNewLine","autogrow","sel","createRange","newPosition","before","after","inputSetup","isBlockedOrBlocker","mustJoinWithCode","isBlocked","isBlocker","blocker","joinCodeRequired","getInput","shadow","isAnonymousOrMustJoinWithCode","isAnonymous","isWritable","onHold","isReadOnly","isArchived","isEmojiEnabled","canSend","verifyCanSendMessage","actionGroups","actionGroup","isSubscribed","handleFormattingShortcut","isMacOS","platform","isCmdOrCtrlPressed","sendOnEnter","sendOnEnterActive","isDesktop","handleSubmit","isSubmitKey","CARRIAGE_RETURN","NEW_LINE","withModifier","isSending","joinCodeInput","joinCode","isOpened","emojiValue","caretPos","textAreaTxt","execCommand","isEventHandled","clipboardData","kind","fileItem","getAsFile","imageExtension","dir","onValueChanged","propertyName","sendIconDisabled","firstElementChild","VRecDialog","multiple","one","canGetGeolocation","getGeolocationPermission","permissions","getGeolocationPosition","resolvePos","geolocation","getCurrentPosition","enableHighAccuracy","maximumAge","getCoordinates","modalAnswer","resolveModal","closeOnCancel","isConfirm","newStatus","coords","latitude","longitude","coordinates","isMapViewEnabled","isGeolocationCurrentPositionSupported","googleMapsApiKey","startRecording","USER_RECORDING","recordingInterval","recordingRoomId","clearIntervalVariables","cancelRecording","messageBoxAudioMessage","permissionStatus","onchange","enumerateDevices","isAllowed","stateClass","startTime","distance","minutes","floor","seconds","padStart","replaceWhitespaces","whitespaces","repeat","getComputedStyle","font","lineHeight","maxHeightPx","maxHeight","resize","wordWrap","minHeight","lastWidth","lastHeight","textLenght","isMaximumHeightReached","isTextLengthOutdated","wasWidthChanged","shadowText","shadowHeight","updateThrottled","$textarea","selectedText","startPattern","startPatternFound","every","char","endPattern","endPatternFound","messageBoxNotSubscribed","customTemplate","getNotSubscribedTpl","canJoinRoom","verifyShowJoinLink","isJoinCodeRequired","isAnonymousReadAllowed","isAnonymousWriteAllowed","messageBoxReadOnly","getReadOnlyTpl","messageBoxReplyPreview","author_name","filtered","customMessagePopups","addMessagePopup","removeMessagePopup","nonReactiveGetFunc","configGetter","popupName","customMessagePopupsList","findIndex","listWithRemovedElement","TAB","ENTER","ESC","ARROW_LEFT","ARROW_RIGHT","getCursorPosition","selLen","move","messagePopup","textFilter","textFilterDelay","hasData","triggerAnywhere","closeOnEsc","blurOnSelectItem","suffix","matchSelectorRegex","selectorRegex","replaceRegex","up","down","verifySelection","first","onInputKeydown","enterValue","cleanOnEnter","setTextFilter","onInputKeyup","clickingItem","caret","firstPartValue","lastPartValue","filterCallback","getFilter","wasMenuIconClicked","emptyTemplate","subscriptionsReady","toolbar","toolbarData","sidebarHeaderHeight","sidebarWidth","messagePopupChannel","channelIcon","reloadUsersFromRoomMessages","usersFromRoomMessages","uniqueMessageUsersControl","notMapped","fetchUsersFromServer","filterText","nickname","outside","sortA","sortB","fetchRoomsFromServer","rooms","emojiSort","recents","a","b","idA","idB","exactFinalTone","colorBlind","seeColor","getEmojis","packages","emojione","asciiList","regExp","getRecent","addEmojiToRecents","pickerEl","_withTemplateInstanceFunc","addRecent","messagePopupConfig","getCustomConfig","popupUserConfig","suggestionsCount","filterRegex","popupChannelConfig","exp","findWhere","popupSlashCommandsConfig","isMatch","popupEmojiConfig","emojiText","popupReactionEmojiConfig","messagePopupEmoji","messagePopupSlashCommandPreview","preview","selectedItem","commandName","commandArgs","dragging","fetchPreviews","_previewFetcher","i18nTitle","enterKeyAction","selectedId","inputBox","selectionLogic","inputValueAtCursor","providesPreview","_messagePopupSlashCommandPreviewRendered","getArgs","isType","expected","triggerAction","triggerBlockAction","triggerActionButtonAction","triggerSubmitView","triggerCancel","getUserInteractionPayloadByViewId","UIKitIncomingInteractionType","UIKitInteractionTypes","banners","TRIGGER_TIMEOUT","TRIGGER_TIMEOUT_ERROR","triggersId","instances","invalidateTriggerId","handlePayloadUserInteraction","has","viewId","ERRORS","BANNER_UPDATE","MODAL_UPDATE","CONTEXTUAL_BAR_UPDATE","MODAL_OPEN","CONTEXTUAL_BAR_OPEN","BANNER_OPEN","closeById","BANNER_CLOSE","CONTEXTUAL_BAR_CLOSE","MODAL_ClOSE","actionId","rest","interactionType","ACTION_BUTTON","catch","VIEW_SUBMIT","MODAL_CLOSE","VIEW_CLOSED","dompurify","timeAgo","formatDateAndTime","UserRoles","Roles","renderMentions","renderBody","sanitize","str","md","i18nReplyCounter","i18nDiscussionCounter","dcount","encodeURI","isIgnored","ignoredClass","isDecrypting","isBot","bot","hasAttachments","roleTags","userRoles","roomRoles","isGroupable","allowGroup","avatarFromUsername","avatarFromMessage","getName","alias","showUsername","own","timestamp","chatops","useTimeAgo","isTemp","threadMessage","bodyClass","returnClass","showTranslated","autoTranslateFetching","autoTranslateShowInverse","translationProvider","providersMetadata","edited","editTime","editedBy","hasOembed","urls","oembedBaseWidget","myName","myDisplayName","names","displayNames","selectedDisplayNames","userReacted","markUserReaction","hideReactions","hideAddReaction","reactWhenReadOnly","hideMessageActions","actionLink","hideActionLinks","injectMessage","injectIndex","injectSettings","channelName","fromSearch","messageGroup","isSnippet","isThreadReply","_groupable","shouldHideBody","shouldCollapseReplies","isCollapsedThreadReply","collapseSwitchClass","showStar","readReceipt","readByEveryone","hasTempClass","node","getPreviousSentMessage","currentNode","previousValid","isNewDay","previousNode","forceDate","showDateSeparator","currentDataset","previousDataset","previousMessageDate","currentMessageDate","toDateString","isSequential","period","processSequentials","nextNode","bubbles","findParentMessage","waiting","pending","getMessages","_tmp","messageThread","currentTime","jitsiTimeout","ChatPermissions","AuthzCachedCollection","rolesStreamer","roleNames","isUserInRoles","userHasAllPermission","AuthorizationUtils","_collection","_docs","_map","_recomputeResults","updatePositions","recent","tone","pickCallback","scrollingToCategory","currentCategory","emojiPicker","setPosition","setTone","getTone","windowBorder","sourcePos","cssProperties","isLargerThanWindow","containerEl","emojiInput","calculateCategoryPositions","showCategory","emojiCustom","pickEmoji","_emoji","splice","base","emojisByCategory","updateRecent","removeFromRecent","category","emojiPickerImport","updateRecentEmoji","containerScroll","catPositions","getCategoryPositions","createEmojiMessageRenderer","isIE11","emojiPackage","checkEmojiOnly","emojis","hasText","nodeType","Node","ELEMENT_NODE","NodeFilter","FILTER_REJECT","FILTER_ACCEPT","walker","createTreeWalker","SHOW_ELEMENT","SHOW_TEXT","TEXT_NODE","nodeValue","emojiOnly","len","emojioneRender","emojiCategories","i18n","categoryIndex","toneList","renderPicker","emojiToRender","correctPackage","addImage","WeakMap","featureExists","IntersectionObserver","loadImage","img","Image","onload","entry","isIntersecting","unobserve","threshold","trackVisibility","emptyImageEncoded","imgsrcs","lazyloadImage","class","srcUrl","lazySrcUrl","Deps","getCaretCoordinates","AutoCompleteRecords","isServerSearch","rule","isString","validateRule","isWholeField","getRegExp","getFindParams","sortspec","isFunction","$options","getField","obj","string","KEYS","expressions","matched","ruleDep","filterDep","loadingDep","comp","matchedRule","setLoaded","endpointName","teardown","setMatchedRule","setFilter","_timeoutHandler","startpos","getText","breakLoop","hideList","processSelection","onItemHover","ensureSelection","isShowing","showing","positionContainer","replacement","setText","fullStuff","posfix","finalFight","offsetParent","currentItem","currentTemplate","exportDefault","acEvents","attributes","autocompleteHelpers","inputAutocomplete","textareaAutocomplete","autocompleteContainer","onViewReady","With","_autocompleteContainer","rendered","_noMatch","meta","twitterPlayerStreamContentType","oembedHtml","oembedImageWidget","downloadImages","unescapeHTML","getTitle","ogTitle","twitterTitle","getDescription","ogDescription","twitterDescription","oembedUrlWidget","_escape","host","image","decodedOgImage","ogImage","twitterImage","msapplicationTileImage","protocol","oembedVideoWidget","twitterPlayerStream","TokenPassRoomType","hasTokenpass","services","tokenpass","ChannelSettings","addOption","validation","tokenChannelsList","tokenpassRooms","channelSettings__tokenpass","addDisabled","balance","initial","requiredChecked","requireAll","requiredLabel","requiredDisabled","editDisabled","findAll","CustomOAuth","serverURL","identityPath","authorizePath","tokenPath","tokenSentVia","usernameField","mergeUsers","addAutopublishFields","forLoggedInUser","forOtherUsers","accessTokenParam","Tokenpass","configure","roomList","anonymous","lm","favoritesEnabled","$and","isLivechat","shouldAppear","noSubscriptionText","NO_ROOMS_SUBSCRIBED","getLowerCaseNames","nameDefault","fnameDefault","lowerCaseName","lowerCaseFName","mergeSubRoom","topic","encrypted","teamId","metrics","waitingResponse","transcriptRequest","closedAt","responseBy","priorityId","livechatData","queuedAt","lastRoomUpdate","cl","lr","mergeRoomSub","flexData","isCombined","loggedInUser","sidebarViewMode","sidebarHideAvatar","ellipsedElement","isTextEllipsed","scrollWidth","setAttribute","redirectToDefaultChannelIfNeeded","needToBeRedirect","firstChannelAfterLogin","groupedByType","userPref","_createForOfIteratorHelperLoose","Presence","lastEntries","handleEntries","isConnected","restart","onLogout","userPresence","dialogView","vrecDialog","dialog","initializeCamera","recordIcon","okDisabled","recordDisabled","stopVideoRecording","_set","right","CreateDiscussion","defaultParentRoom","parentMessageId","DiscussionRoomType","supportSchemesForLink","schemes","marked","_marked","createDOMPurify","hljs","getGlobalWindow","renderer","Renderer","highlight","out","codespan","blockquote","quote","linkRenderer","gfm","tables","breaks","pedantic","smartLists","smartypants","DomPurify","ADD_ATTR","addAsToken","inlinecode","p1","p2","noHtml","codeblocks","msgParts","codeMatch","singleLine","listLanguages","emptyLanguage","highlightAuto","isToken","validateAllowedTokens","validateUrl","endsWithWhitespace","getParseableMarkersCount","usableMarkers","getTextWrapper","marker","textPrepend","wrappedText","textAppend","getRegexReplacer","replaceFunction","getRegex","getParserWithCustomMarker","p3","finalMarkerCount","parseBold","parseStrike","parseItalic","p4","p5","parseNotEscaped","rootUrl","escapedUrl","original","clean","javascript","registerLanguage","createMarkdownMessageRenderer","createMarkdownNotificationRenderer","parsers","MarkdownClass","mountTokensBack","parseMessageNotEscaped","parser","mountTokensBackRecursively","tokenList","useHtml","missingTokens","filterMarkdownFromMessage","funct","ranClient","method_id","messageIdsToWait","createAutoTranslateMessageRenderer","createAutoTranslateMessageStreamHandler","userLanguage","initialized","supportedLanguages","findSubscriptionByRid","defaultUserLanguage","translateAttachments","observeChanges","getOptions","allOptions","allowedOptions","option","getCustomSoundId","sound","CustomSoundsClass","preload","random","getList","onAll","soundData","getEmojiUrlFromName","deleteEmojiCustom","updateEmojiCustom","isSetNotNull","emojiData","arrayIndex","rocket","arrayIndexList","aliases","aliasIndex","previousExists","previousName","currentAliases","aliasOf","customRender","emojisMatchGroup","_regexpSignature","_regexp","shortname","emojiAlias","dataCheck","currentEmoji","isSet","onLogged","fileUploadHandler","UploadFS","FileUploadBase","Uploads","Avatars","Store","model","directive","secure","cookie","canAccessRoom","process","tmpDir","TMPDIR","defaultStorePermissions","StorePermissions","message_id","getProgress","getFileName","handler","Uploader","onError","onComplete","fileData","pick","onProgress","logged","loginCb","streamAll","streamLogged","streamRoom","streamRoomUsers","streamUser","notifyRoom","notifyUser","notifyUsersOfRoom","visitorId","unUser","unAll","removeListener","unLogged","deleteCustomUserStatus","updateCustomUserStatus","customUserStatus","customUserStatusData","newUserStatus","statusType","localizeName","customStatus","userStatusData","UserStatusProps","jQuery","process2faReturn","_jqueryCall","put","xhrOptions","_jqueryFormDataCall","USER_ID_KEY","_generateQueryFromParams","encodedParams","joinedArray","dataType","_rlRestApiGet","ajax","success","_rlGetSuccess","_rlGetFailure","errorThrown","processTwoFactorError","originalCallback","_jqueryFormDataPromise","XMLHttpRequest","lengthComputable","percentComplete","processData","_jqueryFormDataSuccess","_jqueryFormDataError","errorType","onCode","RoomTypesCommon","roomTypesOrder","getSecondaryRoomName","getIdentifiers","except","getRoomType","unmuted","routeData","getDefaultSubscriptionPref","Info","fileUploadMediaWhiteList","getUserNotificationPreference","getAvatarColor","placeholders","templateVarHandler","secondsToHHMMSS","TOPIC","ANNOUNCEMENT","ARCHIVE","IGNORE","MUTE","SET_AS_OWNER","SET_AS_LEADER","SET_AS_MODERATOR","LEAVE","REMOVE_USER","CLOSE_WARNING","_name","_path","_identifier","_order","_icon","_header","_label","_route","canBeCreated","canBeDeleted","supportMembersList","userDetailShowAdmin","preventRenaming","getMsgSender","senderId","findOneById","canAccessUploadedFile","getReadReceiptsExtraData","roomExit","mainOrder","getTypesToShowOnDashboard","roomConfig","triggersExit","hasCustomLink","getRouteData","getRelativePath","customWhiteList","mediaTypeWhiteList","fileUploadMediaBlackList","blacklist","isTypeOnList","wildCardGlob","wildcards","blackList","whiteList","colors","preferences","desktopNotifications","pushNotifications","emailNotificationMode","highlights","userHighlights","desktopPrefOrigin","mobilePushNotifications","mobilePrefOrigin","emailNotifications","emailPrefOrigin","etag","externalSource","_getURL","getCloudUrl","_site_url","cloudRoute","cloudParams","cloudBaseUrl","cdn","full","cloud","cloud_route","cloud_params","_cdn_prefix","_root_url_path_prefix","_query","cdnPrefix","pathPrefix","finalPath","pref","preferenceKey","serverValue","preference","isRelativeURL","strLeft","strRightBack","password","unsubscribe","testIfPathAreEquals","oldPath","oldRoute","flex","templateData","_addingSlashCommand","previewer","previewCallback","_runningSlashCommand","getPreviews","_executeSlashCommandPreview","executePreview","slashCommand","replaces","isObject","postProcess","sprintf","shift","logger","Logger","variable","object","templateRegex","exec","tmpVariable","tmplVar","tmplAttrName","attrVal","sec","parseFloat","hours","Dolphin","DolphinOnCreateUser","dolphin","NickName","buttonLabelText","buttonColor","buttonLabelColor","clientId","secret","loginStyle","HIGH","Drupal","symbols","activity","objects","nature","food","people","regional","travel","flags","emojioneRenderFromShort","toImage","shortnameToImage","shortnames","regShortNames","emojioneList","uc_base","uc_output","uc_match","uc_greedy","ns","shortnameConversionMap","unicodeCharRegex","convertShortName","unicode","imageTitleTag","ePath","defaultPathPNG","imagePathPNG","emojiSize","unicodeAlt","convert","sprites","fileExtension","convertUnicode","entire","m1","m2","m3","mappedUnicode","mapUnicodeToShort","ascii","asciiRX","riskyMatchAscii","regAsciiRisky","regAscii","GitHubEnterprise","Gitlab","updateConfig","anyChange","ImporterInfo","warnings","importer","ProgressStep","ImportWaitingStates","ImportFileReadyStates","ImportPreparingStartedStates","ImportingStartedStates","ImportingDoneStates","ImportingErrorStates","NEW","UPLOADING","DOWNLOADING_FILE","FILE_LOADED","PREPARING_STARTED","PREPARING_USERS","PREPARING_CHANNELS","PREPARING_MESSAGES","USER_SELECTION","IMPORTING_STARTED","IMPORTING_USERS","IMPORTING_CHANNELS","IMPORTING_MESSAGES","IMPORTING_FILES","FINISHING","DONE","ERROR","CANCELLED","Importers","ImportersContainer","importers","info","getAll","CsvImporterInfo","HipChatEnterpriseImporterInfo","SlackImporterInfo","SlackUsersImporterInfo","userTemplateDefault","roomTemplateDefault","reference","replaceUsers","userMentionRegex","classNames","filterUser","filterTeam","m","mentionObj","replaceChannels","channelMentionRegex","dname","getUserMentions","getChannelMentions","_me","_pattern","_useRealName","createMentionsMessageRenderer","Nextcloud","fillServerURL","bindEnvironment","nextcloudURL","Gimme","LennyFace","Shrug","Tableflip","Unflip","Topic","WordPress","fillSettings","identityTokenSentVia","serverType","watchByRegex","stopClient","toArrayBuffer","joinVectorAndEcryptedData","splitVectorAndEcryptedData","encryptRSA","encryptAES","decryptRSA","decryptAES","generateAESKey","generateRSAKey","exportJWKKey","importRSAKey","importAESKey","importRawKey","deriveKey","readFileAsArrayBuffer","Deferred","ByteBuffer","StaticArrayBufferProto","ArrayBuffer","__proto__","thing","vector","encryptedData","cipherText","Uint8Array","output","crypto","subtle","iv","generateKey","modulusLength","publicExponent","exportKey","keyData","keyUsages","importKey","salt","baseKey","iterations","reader","FileReader","readAsArrayBuffer","EJSON","E2ERoom","logError","waitUntilFind","SaveE2EPasswordModal","EnterE2EPasswordModal","failedToDecodeKey","_ready","instancesByRoomId","decryptSubscriptions","e2eKeyId","removeInstanceByRoomId","startClient","public_key","private_key","loadKeysFromDB","db_public_key","db_private_key","decodePrivateKey","openAlert","modifiers","closable","closeAlert","loadKeys","createAndLoadKeys","encodePrivateKey","createRandomPassword","randomPassword","passwordRevealText","privateKey","changePassword","newPassword","publicKey","requestSubscriptionKeys","getMasterKey","masterKey","getRandomValues","encodedPrivateKey","requestPassword","showModal","showAlert","privKey","decryptMessage","decryptPendingMessages","decryptSubscription","Base64","E2ERoomState","KEY_ID","Symbol","permitedMutations","NOT_STARTED","ESTABLISHING","DISABLED","KEYS_RECEIVED","READY","WAITING_KEYS","filterMutation","currentState","nextState","typeOfRoom","handshake","setState","requestedState","isDisabled","resume","keyReceived","shouldConvertSentMessages","shouldConvertReceivedMessages","isWaitingKeys","groupKey","E2EKey","importGroupKey","CREATING_KEYS","createGroupKey","isSupportedRoomType","decode","decryptedKey","sessionKeyExportedString","keyID","encode","groupSessionKey","sessionKeyExported","encryptKeyForOtherParticipants","encryptForParticipant","userKey","encryptedUserKey","encryptFile","fileArrayBuffer","encryptedFile","decryptFile","encryptText","TextEncoder","ack","fraction","TextDecoder","provideKeyToUser","keyId","Base","_initModel","CachedChannelList","CachedCollection","CachedUserList","setReactions","unsetReactions","eventType","setReactionsInLastMessage","unsetReactionsInLastMessage","EmojiCustom","findByNameOrAlias","Models","findUsersInRole","roleScope","findUsersInRoles","roleName","isUserInRole","UserAndRoom","UserDataFiles","WebdavAccounts","_baseName","allow","deny","ensureIndex","dropIndex","tryEnsureIndex","tryDropIndex","OTR","OTRClass","Room","onUserStream","use","established","otrRoom","otrAck","getUidDirectMessage","peerId","establishing","userOnlineComputation","keyPair","exportedPublicKey","sessionKey","firstPeer","generateKeyPair","acknowledge","$room","$title","namedCurve","importPublicKey","peerPublicKey","deriveBits","bits","digest","hashedBits","sessionKeyData","enc","establishConnection","cancelText","setReaction","isPrivate","_assertThisInitialized","localforage","localforageGetItem","CachedCollectionManagerClass","_syncEnabled","_unstoreLoginToken","clearAllCacheOnLogout","WAITING_FIRST_CONNECTION","WAITING_FIRST_DISCONNECTION","LISTENING_RECONNECTIONS","step","cachedCollection","clearAllCache","clearCache","clearCacheOnLogout","countQueries","onReconnect","nullLog","methodName","syncMethodName","userRelated","listenChangesForLoggedUsersOnly","useSync","maxCacheTime","onSyncData","updatedAt","loadFromCache","loadFromServer","lastTime","loadFromServerAndPopulate","removeRoomFromCacheWhenUserLeaves","setupListener","recordData","trySync","tm","sync","_outstandingMethodBlocks","changes","valueA","_deletedAt","valueB","actionTime","reportError","overrideLoginMethod","loginWithCrowdAndTOTP","loginRequest","crowd","crowdPassword","totp","login","loginWithCrowd","Google","loginWithGoogleAndTOTP","isCordova","signIn","_options","restrictCreationByEmailDomain","loginUrlParameters","hd","credentialRequestCompleteCallback","credentialRequestCompleteHandler","requestCredential","loginWithGoogle","loginWithLDAPAndTOTP","ldapPass","ldapOptions","ldap","loginWithLDAP","Facebook","Github","Twitter","MeteorDeveloperAccounts","Linkedin","convertError","lastCredentialToken","lastCredentialSecret","tryLoginAfterPopupClosed","credentialToken","totpCode","credentialSecret","_retrieveCredentialSecret","methodArgument","credentialTokenOrError","createOAuthTotpLoginMethod","credentialProvider","loginWithOAuthTokenAndTOTP","loginWithFacebookAndTOTP","loginWithFacebook","loginWithGithubAndTOTP","loginWithGithub","loginWithMeteorDeveloperAccountAndTOTP","loginWithMeteorDeveloperAccount","loginWithTwitterAndTOTP","loginWithTwitter","loginWithLinkedinAndTOTP","loginWithLinkedin","onPageLoadLogin","loginAttempt","oAuthArgs","arg","oldConfigureLogin","configureLogin","oldMethod","isTotpInvalidError","loginWithPasswordAndTOTP","_hashPassword","loginWithSamlTokenAndTOTP","saml","loginWithSamlToken","piwikUrl","piwikSiteId","piwikPrependDomain","piwikCookieDomain","piwikDomains","piwikAdditionalTracker","googleId","_paq","hostname","upperLevelDomain","domainsArray","domains","addTrackers","tracker","trackerURL","siteId","g","o","q","arguments","ga","trackEvent","triggers","enter","http","slashes","owner","oldUserId","newUserId","loginWithBlockstack","redirectURI","blockstackIDHost","scopes","ObjectIncluding","manifestURI","redirectToSignIn","meteorLogout","blockstackAuth","signUserOut","blockstackLogin","authResponse","userData","blockstack","isUserSignedIn","loadUserData","isSignInPending","handlePendingSignIn","openCenteredPopup","screenX","screenLeft","screenY","screenTop","features","newwindow","loginWithCas","login_url","popup_width","popup_height","appUrl","delim","checkPopupOpen","popupClosed","cas","defaultOptions","registerService","ConfigError","_loginStyle","_redirectUri","_stateParam","popupOptions","Reload","KEY_NAME","saveDataForRedirect","_migrate","immediateMigration","getDataAfterRedirect","migrationData","_storageTokenPrefix","sessionStorage","_debug","Favico","opt","_def","bgColor","textColor","fontFamily","fontStyle","animation","elementId","dataUrl","win","_opt","_orig","_h","_w","_canvas","_context","_img","_lastBadge","_running","_readyCb","_stop","_browser","_animTimeout","_drawTimeout","_doc","ff","InstallTrigger","chrome","opera","ie","safari","HTMLElement","supported","_queue","merge","hexToRgb","isUp","isLeft","h","getIcons","lastIcon","hasAttribute","getContext","clearRect","drawImage","setIcon","finished","circle","more","beginPath","textAlign","moveTo","lineTo","quadraticCurveTo","arc","PI","fillStyle","fill","closePath","stroke","fillText","rectangle","fillRect","badge","number","imageElement","newImg","ratio","videoElement","drawVideo","webcam","newVideo","oGetUserMedia","paused","ended","elms","getLinks","icons","links","canvas","toDataURL","elm","old","newIcon","removeChild","hex","shorthandRegex","def","mergedOpt","attrname","isPageHidden","hidden","msHidden","webkitHidden","mozHidden","fade","none","popFade","slide","revert","animationType","browser","logMatch","enableLogs","wrapHelpersAndEvents","dict","fn1","Function","completeName","viewName","wrapLifeCycle","registerFieldTemplate","MeteorLogout","logoutBehaviour","TERMINATE_SAML","ONLY_RC","samlService","idpSLORedirectURL","logoutWithSaml","loginWithSaml","HTML","Spacebars","makeCursorReactive","Cursor","_depend","toHTMLWithDataNonReactive","kw","toHTMLWithData","renderNonReactive","templateName","View","Raw","_onViewRendered","onViewRendered","nrr","Open","firstBanner","textArguments","ChromeScreenShare","WEB_RTC_EVENTS","WebRTCTransportClass","webrtcInstance","WEB_RTC","startCall","selfId","CALL","media","monitor","joinCall","sendCandidate","CANDIDATE","sendDescription","sendStatus","STATUS","onRemoteCall","onRemoteJoin","onRemoteCandidate","onRemoteDescription","onRemoteStatus","WebRTCClass","autoAccept","resetCallInProgress","callInProgress","stopPeerConnection","peerConnection","peerConnections","updateRemoteItems","iceServers","TransportClass","servers","server","serverConfig","decodeURIComponent","credential","remoteItemsById","audioEnabled","videoEnabled","overlayEnabled","screenShareEnabled","remoteMonitoring","toLocaleLowerCase","screenShareAvailable","transport","checkPeerConnections","iceConnectionState","createdAt","itemsById","getRemoteStreams","remoteStream","stateText","broadcastStatus","remoteConnections","remoteMedia","callInProgressTimeout","remoteConnection","getPeerConnection","RTCPeerConnection","eventNames","candidate","sdpMLineIndex","sdpMid","_getUserMedia","onSuccess","onSuccessLocal","createGain","peer","createMediaStreamDestination","gain","removeTrack","addTrack","desktop","getScreen","audioStream","isChromeExtensionInstalled","installed","isFirefoxExtensionInstalled","rocketchatscreenshare","webstore","install","_error","getScreenSuccess","mozMediaSource","mediaSource","getSourceId","mandatory","chromeMediaSource","chromeMediaSourceId","maxWidth","getAudioSuccess","getAudioError","getLocalUserMedia","localStream","disableAudio","disableVideo","addStream","stopAllPeerConnections","setAudioEnabled","enableAudio","toggleAudio","setVideoEnabled","disableScreenShare","setScreenShareEnabled","enableScreenShare","enableVideo","toggleVideo","startCallAsMonitor","fromUsername","signalingState","onOffer","offer","onLocalDescription","sdp","setLocalDescription","RTCSessionDescription","createOffer","OfferToReceiveAudio","OfferToReceiveVideo","onRemoteOffer","setRemoteDescription","onAnswer","answer","createAnswer","addIceCandidate","RTCIceCandidate","mozRTCPeerConnection","webkitRTCPeerConnection","mozRTCSessionDescription","webkitRTCSessionDescription","mozRTCIceCandidate","webkitRTCIceCandidate","mozAudioContext","sourceId","visitorEditCustomFieldsForm","availablePriorities","priorities","roomPriority","showPriorities","visitorInfoCustomForm","registerOmnichannelSidebarItem","hasLicense","priorityData","definedBy","loadMessages","startDate","endDate","messagesContext","audit","hasResults","convertDate","perTick","CannedResponse","templateFunc","shortcut","settingValue","cannedResponses","searchText","regex","hasNoCannedResponses","isDetailScreen","isNewResponse","isExistingResponse","isUserContext","isDepartmentContext","cannedResponse","canDeleteResponse","canModifyResponse","createdByString","createdBy","isPreviewMode","startPos","endPos","responseData","departmentCannedResponses","cannedResponsesStreamer","agentsId","responses","addRoleRestrictions","guestPermissions","addRolePermissionWhiteList","useMemo","lazy","registerForm","useCustomFieldsAdditionalForm","useMaxChatsPerAgent","useMaxChatsPerAgentDisplay","useEeNumberInput","useEeTextAreaInput","useEeTextInput","useBusinessHoursMultiple","useBusinessHoursTimeZone","useContactManager","useCurrentChatTags","useDepartmentBusinessHours","useDepartmentForwarding","usePrioritiesSelect","useSelectForwardDepartment","registerOmnichannelRoute","lazyRouteComponent","useHasLicense","useState","useEffect","licenseName","license","setLicense","registerAdminRoute","createRouteGroup","unregisterSidebarItem","itemsSubscription","createSidebarItems","registerSidebarItem","unregisterForm","formsSubscription","createFormSubscription","forms","updateCb","subscribe","getCurrentValue","newForm","Options","React","RoomAvatar","Avatar","AvatarSize","Option","Box","memo","useEndpointData","RoomAutoComplete","useRoomAvatarPath","BaseAvatar","getRoomPathAvatar","Chip","useMutableCallback","useDebouncedValue","UserAvatar","UserAutoCompleteMultiple","debouncedFilter","onClickRemove","renderEmoji","Emoji","emojiHandle","markup","__html","useFormatDateAndTime","useCallback","useSetting","useUserPreference","clockMode","deleteMessage","hideRoom","setUserActiveStatus","toggleFavorite","updateMessage","isNumber","messageObject"],"mappings":"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AAE;AAAE6E,mBAAO,EAAE;AAAX;AAHO,WAIPuyD,UAAU,IAAI;AACjB55C,aAAG,EAAE,CAAC;AAAE3a,oBAAQ,EAAEq2D;AAAZ,WAAD,EAA4B;AAAEzqE,gBAAI,EAAEyqE;AAAR,WAA5B;AADY,SAJP,GAQZ;AACCh2C,eAAK,EAAEk0C,UAAU,GAAG,CAAH,GAAO6B,gBADzB;AAEC72D,cAAI,EAAE;AAAEpC,cAAE,EAAE,CAAC;AAAP;AAFP,SARY,EAaZ0Z,KAbY,GAcZ9C,GAdY,CAcR,UAACpX,CAAD,EAAO;AACXA,WAAC,CAACukD,UAAF,GAAe,IAAf;AACA,iBAAOvkD,CAAP;AACA,SAjBY,CAAd,CAL2C,CAwB3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;;AACA,YAAIyR,KAAK,CAAChQ,MAAN,GAAeg4D,gBAAf,IAAmC7B,UAAU,KAAK,EAAtD,EAA0D;AACzDD,8BAAoB,CAACC,UAAD,EAAanmD,KAAb,EAAoB/U,GAApB,EAAyB5H,EAAzB,CAApB;AACA;;AAED,YAAI,CAAC4kE,WAAD,IAAgBA,WAAW,CAACnmC,IAAZ,CAAiB,KAAjB,CAApB,EAA6C;AAC5C9hB,eAAK,CAACrb,IAAN,CAAW;AACV6J,eAAG,EAAE,KADK;AAEVoD,oBAAQ,EAAE,KAFA;AAGV6sB,kBAAM,EAAE,IAHE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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","file":"/app.js","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\nimport './codeMirrorComponent.html';\n\nconst CodeMirrors = {};\n\nTemplate.CodeMirror.onRendered(async function () {\n\tconst CodeMirror = await import('codemirror/lib/codemirror.js');\n\n\tawait import('./codeMirror');\n\tawait import('codemirror/lib/codemirror.css');\n\n\tconst options = this.data.options || { lineNumbers: true };\n\tconst textarea = this.find('textarea');\n\tconst editor = CodeMirror.fromTextArea(textarea, options);\n\n\tthis.autorun((c) => {\n\t\tconst { code } = Template.currentData();\n\t\tif (code === undefined) {\n\t\t\treturn;\n\t\t}\n\t\tc.stop();\n\t\teditor.setValue(code);\n\t});\n\n\tCodeMirrors[this.data.id || 'code-mirror-textarea'] = editor;\n\tif (this.data && this.data.editorOnBlur) {\n\t\tthis.data.editorOnBlur(this.data.name);\n\t}\n\n\tconst self = this;\n\teditor.on('change', function (doc) {\n\t\tconst val = doc.getValue();\n\t\ttextarea.value = val;\n\t\tif (self.data.reactiveVar) {\n\t\t\tSession.set(self.data.reactiveVar, val);\n\t\t}\n\t});\n\n\tif (this.data.reactiveVar) {\n\t\tthis.autorun(function () {\n\t\t\tconst val = Session.get(self.data.reactiveVar) || '';\n\t\t\tif (val !== editor.getValue()) {\n\t\t\t\teditor.setValue(val);\n\t\t\t}\n\t\t});\n\t}\n\n\tMeteor.defer(function () {\n\t\teditor.refresh();\n\t});\n});\n\nTemplate.CodeMirror.destroyed = function () {\n\tdelete CodeMirrors[this.data.id || 'code-mirror-textarea'];\n\tthis.$(`#${this.data.id || 'code-mirror-textarea'}`)\n\t\t.next('.CodeMirror')\n\t\t.remove();\n};\n\nTemplate.CodeMirror.helpers({\n\teditorId() {\n\t\treturn this.id || 'code-mirror-textarea';\n\t},\n\n\teditorName() {\n\t\treturn this.name || 'code-mirror-textarea';\n\t},\n});\n","import './codeMirrorComponent';\n","import { Meteor } from 'meteor/meteor';\nimport { Emitter } from '@rocket.chat/emitter';\n\nimport { settings } from '../../../../settings';\n\nclass AudioEncoder extends Emitter {\n\tconstructor(source, { bufferLen = 4096, numChannels = 1, bitRate = settings.get('Message_Audio_bitRate') || 32 } = {}) {\n\t\tsuper();\n\n\t\tconst workerPath = Meteor.absoluteUrl('workers/mp3-encoder/index.js');\n\n\t\tthis.worker = new Worker(workerPath);\n\t\tthis.worker.onmessage = this.handleWorkerMessage;\n\n\t\tthis.worker.postMessage({\n\t\t\tcommand: 'init',\n\t\t\tconfig: {\n\t\t\t\tsampleRate: source.context.sampleRate,\n\t\t\t\tnumChannels,\n\t\t\t\tbitRate,\n\t\t\t},\n\t\t});\n\n\t\tthis.scriptNode = (source.context.createScriptProcessor || source.context.createJavaScriptNode).call(\n\t\t\tsource.context,\n\t\t\tbufferLen,\n\t\t\tnumChannels,\n\t\t\tnumChannels,\n\t\t);\n\t\tthis.scriptNode.onaudioprocess = this.handleAudioProcess;\n\n\t\tsource.connect(this.scriptNode);\n\t\tthis.scriptNode.connect(source.context.destination);\n\t}\n\n\tclose() {\n\t\tthis.worker.postMessage({ command: 'finish' });\n\t}\n\n\thandleWorkerMessage = (event) => {\n\t\tswitch (event.data.command) {\n\t\t\tcase 'end': {\n\t\t\t\tconst blob = new Blob(event.data.buffer, { type: 'audio/mpeg' });\n\t\t\t\tthis.emit('encoded', blob);\n\t\t\t\tthis.worker.terminate();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\thandleAudioProcess = (event) => {\n\t\tfor (let channel = 0; channel < event.inputBuffer.numberOfChannels; channel++) {\n\t\t\tconst buffer = event.inputBuffer.getChannelData(channel);\n\t\t\tthis.worker.postMessage({\n\t\t\t\tcommand: 'encode',\n\t\t\t\tbuffer,\n\t\t\t});\n\t\t}\n\t};\n}\n\nexport { AudioEncoder };\n","import { AudioEncoder } from './audioEncoder';\n\nconst getUserMedia = ((navigator) => {\n\tif (navigator.mediaDevices) {\n\t\treturn navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n\t}\n\n\tconst legacyGetUserMedia =\n\t\tnavigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n\n\tif (legacyGetUserMedia) {\n\t\treturn (options) =>\n\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\tlegacyGetUserMedia.call(navigator, options, resolve, reject);\n\t\t\t});\n\t}\n})(window.navigator);\n\nconst AudioContext = window.AudioContext || window.webkitAudioContext;\n\nclass AudioRecorder {\n\tisSupported() {\n\t\treturn Boolean(getUserMedia) && Boolean(AudioContext);\n\t}\n\n\tcreateAudioContext() {\n\t\tif (this.audioContext) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.audioContext = new AudioContext();\n\t}\n\n\tdestroyAudioContext() {\n\t\tif (!this.audioContext) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.audioContext.close();\n\t\tdelete this.audioContext;\n\t}\n\n\tasync createStream() {\n\t\tif (this.stream) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.stream = await getUserMedia({ audio: true });\n\t}\n\n\tdestroyStream() {\n\t\tif (!this.stream) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.stream.getAudioTracks().forEach((track) => track.stop());\n\t\tdelete this.stream;\n\t}\n\n\tasync createEncoder() {\n\t\tif (this.encoder) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst input = this.audioContext.createMediaStreamSource(this.stream);\n\t\tthis.encoder = new AudioEncoder(input);\n\t}\n\n\tdestroyEncoder() {\n\t\tif (!this.encoder) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.encoder.close();\n\t\tdelete this.encoder;\n\t}\n\n\tasync start(cb) {\n\t\ttry {\n\t\t\tawait this.createAudioContext();\n\t\t\tawait this.createStream();\n\t\t\tawait this.createEncoder();\n\t\t\tcb && cb.call(this, true);\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t\tthis.destroyEncoder();\n\t\t\tthis.destroyStream();\n\t\t\tthis.destroyAudioContext();\n\t\t\tcb && cb.call(this, false);\n\t\t}\n\t}\n\n\tstop(cb) {\n\t\tthis.encoder.on('encoded', cb);\n\t\tthis.encoder.close();\n\n\t\tthis.destroyEncoder();\n\t\tthis.destroyStream();\n\t\tthis.destroyAudioContext();\n\t}\n}\n\nconst instance = new AudioRecorder();\n\nexport { instance as AudioRecorder };\n","import { ReactiveVar } from 'meteor/reactive-var';\n\nexport const VideoRecorder = new (class VideoRecorder {\n\tconstructor() {\n\t\tthis.started = false;\n\t\tthis.cameraStarted = new ReactiveVar(false);\n\t\tthis.recording = new ReactiveVar(false);\n\t\tthis.recordingAvailable = new ReactiveVar(false);\n\t}\n\n\tstart(videoel, cb) {\n\t\tthis.videoel = videoel;\n\n\t\tconst handleSuccess = (stream) => {\n\t\t\tthis.startUserMedia(stream);\n\t\t\tcb && cb.call(this, true);\n\t\t};\n\n\t\tconst handleError = (error) => {\n\t\t\tconsole.error(error);\n\t\t\tcb && cb.call(this, false);\n\t\t};\n\n\t\tconst oldGetUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n\n\t\tif (navigator.mediaDevices) {\n\t\t\tnavigator.mediaDevices.getUserMedia({ audio: true, video: true }).then(handleSuccess, handleError);\n\t\t\treturn;\n\t\t}\n\t\tif (oldGetUserMedia) {\n\t\t\toldGetUserMedia.call(navigator, { audio: true, video: true }, handleSuccess, handleError);\n\t\t\treturn;\n\t\t}\n\n\t\tcb && cb.call(this, false);\n\t}\n\n\trecord() {\n\t\tthis.chunks = [];\n\t\tif (this.stream == null) {\n\t\t\treturn;\n\t\t}\n\t\tthis.mediaRecorder = new MediaRecorder(this.stream, { type: 'video/webm' });\n\t\tthis.mediaRecorder.ondataavailable = (blobev) => {\n\t\t\tthis.chunks.push(blobev.data);\n\t\t\tif (!this.recordingAvailable.get()) {\n\t\t\t\treturn this.recordingAvailable.set(true);\n\t\t\t}\n\t\t};\n\t\tthis.mediaRecorder.start();\n\t\treturn this.recording.set(true);\n\t}\n\n\tstartUserMedia(stream) {\n\t\tthis.stream = stream;\n\n\t\ttry {\n\t\t\tthis.videoel.srcObject = stream;\n\t\t} catch (error) {\n\t\t\tconst URL = window.URL || window.webkitURL;\n\t\t\tthis.videoel.src = URL.createObjectURL(stream);\n\t\t}\n\n\t\tthis.videoel.muted = true;\n\t\tthis.videoel.onloadedmetadata = () => {\n\t\t\tthis.videoel && this.videoel.play();\n\t\t};\n\n\t\tthis.started = true;\n\t\treturn this.cameraStarted.set(true);\n\t}\n\n\tstop(cb) {\n\t\tif (!this.started) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.stopRecording();\n\n\t\tif (this.stream) {\n\t\t\tconst vtracks = this.stream.getVideoTracks();\n\t\t\tfor (const vtrack of Array.from(vtracks)) {\n\t\t\t\tvtrack.stop();\n\t\t\t}\n\n\t\t\tconst atracks = this.stream.getAudioTracks();\n\t\t\tfor (const atrack of Array.from(atracks)) {\n\t\t\t\tatrack.stop();\n\t\t\t}\n\t\t}\n\n\t\tif (this.videoel) {\n\t\t\tthis.videoel.pause;\n\t\t\tthis.videoel.src = '';\n\t\t}\n\n\t\tthis.started = false;\n\t\tthis.cameraStarted.set(false);\n\t\tthis.recordingAvailable.set(false);\n\n\t\tif (cb && this.chunks) {\n\t\t\tconst blob = new Blob(this.chunks, { type: 'video/webm' });\n\t\t\tcb(blob);\n\t\t}\n\n\t\tdelete this.recorder;\n\t\tdelete this.stream;\n\t\tdelete this.videoel;\n\t}\n\n\tstopRecording() {\n\t\tif (!this.started || !this.recording || !this.mediaRecorder) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.mediaRecorder.stop();\n\t\tthis.recording.set(false);\n\t\tdelete this.mediaRecorder;\n\t}\n})();\n","import { Tracker } from 'meteor/tracker';\n\nimport { createEphemeralPortal } from '../../../../client/lib/portals/createEphemeralPortal';\nimport { createAnchor } from '../../../../client/lib/utils/createAnchor';\n\nconst Dep = new Tracker.Dependency();\n\nlet state;\nlet dom;\nlet unregister;\n\nconst props = () => {\n\tDep.depend();\n\treturn state;\n};\n\nexport const closeTooltip = () => {\n\tif (!dom) {\n\t\treturn;\n\t}\n\tunregister = unregister && unregister();\n};\n\nexport const openToolTip = (title, anchor) => {\n\tdom = dom || createAnchor('react-tooltip');\n\tstate = {\n\t\ttitle,\n\t\tanchor,\n\t};\n\tDep.changed();\n\tunregister = unregister || createEphemeralPortal(() => import('../../../../client/components/TooltipComponent'), props, dom);\n};\n\nwindow.matchMedia('(hover: none)').matches ||\n\tdocument.body.addEventListener(\n\t\t'mouseover',\n\t\t(() => {\n\t\t\tlet timeout;\n\t\t\treturn (e) => {\n\t\t\t\ttimeout = timeout && clearTimeout(timeout);\n\t\t\t\ttimeout = setTimeout(() => {\n\t\t\t\t\tconst element = e.target.title || e.dataset?.title ? e.target : e.target.closest('[title], [data-title]');\n\t\t\t\t\tif (element) {\n\t\t\t\t\t\telement.dataset.title = element.title || element.dataset.title;\n\t\t\t\t\t\telement.removeAttribute('title');\n\t\t\t\t\t\topenToolTip(element.dataset.title, element);\n\t\t\t\t\t}\n\t\t\t\t}, 300);\n\t\t\t\tcloseTooltip();\n\t\t\t};\n\t\t})(),\n\t);\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveDict } from 'meteor/reactive-dict';\nimport { debounce } from 'lodash';\n\nimport { settings } from '../../../settings/client';\nimport { Notifications } from '../../../notifications/client';\nimport { IExtras, IRoomActivity, IActionsObject, IUser } from '../../../../definition/IUserAction';\n\nconst TIMEOUT = 15000;\nconst RENEW = TIMEOUT / 3;\n\nexport const USER_ACTIVITY = 'user-activity';\n\nexport const USER_ACTIVITIES = {\n\tUSER_RECORDING: 'user-recording',\n\tUSER_TYPING: 'user-typing',\n\tUSER_UPLOADING: 'user-uploading',\n};\n\nconst activityTimeouts = new Map();\nconst activityRenews = new Map();\nconst continuingIntervals = new Map();\nconst roomActivities = new Map<string, Set<string>>();\nconst rooms = new Map<string, Function>();\n\nconst performingUsers = new ReactiveDict<IActionsObject>();\n\nconst shownName = function (user: IUser | null | undefined): string | undefined {\n\tif (!user) {\n\t\treturn;\n\t}\n\tif (settings.get('UI_Use_Real_Name')) {\n\t\treturn user.name;\n\t}\n\treturn user.username;\n};\n\nconst emitActivities = debounce((rid: string, extras: IExtras): void => {\n\tconst activities = roomActivities.get(extras?.tmid || rid) || new Set();\n\tNotifications.notifyRoom(rid, USER_ACTIVITY, shownName(Meteor.user()), [...activities], extras);\n}, 500);\n\nfunction handleStreamAction(rid: string, username: string, activityTypes: string[], extras?: IExtras): void {\n\trid = extras?.tmid || rid;\n\tconst roomActivities = performingUsers.get(rid) || {};\n\n\tfor (const [, activity] of Object.entries(USER_ACTIVITIES)) {\n\t\troomActivities[activity] = roomActivities[activity] || new Map();\n\t\tconst users = roomActivities[activity];\n\t\tconst timeout = users[username];\n\n\t\tif (timeout) {\n\t\t\tclearTimeout(timeout);\n\t\t}\n\n\t\tif (activityTypes.includes(activity)) {\n\t\t\tactivityTypes.splice(activityTypes.indexOf(activity), 1);\n\t\t\tusers[username] = setTimeout(() => handleStreamAction(rid, username, activityTypes, extras), TIMEOUT);\n\t\t} else {\n\t\t\tdelete users[username];\n\t\t}\n\t}\n\n\tperformingUsers.set(rid, roomActivities);\n}\nexport const UserAction = new (class {\n\taddStream(rid: string): void {\n\t\tif (rooms.get(rid)) {\n\t\t\treturn;\n\t\t}\n\t\tconst handler = function (username: string, activityType: string[], extras?: object): void {\n\t\t\tconst user = Meteor.users.findOne(Meteor.userId() || undefined, {\n\t\t\t\tfields: { name: 1, username: 1 },\n\t\t\t});\n\t\t\tif (username === shownName(user)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\thandleStreamAction(rid, username, activityType, extras);\n\t\t};\n\t\trooms.set(rid, handler);\n\t\tNotifications.onRoom(rid, USER_ACTIVITY, handler);\n\t}\n\n\tperformContinuously(rid: string, activityType: string, extras: IExtras = {}): void {\n\t\tconst trid = extras?.tmid || rid;\n\t\tconst key = `${activityType}-${trid}`;\n\n\t\tif (continuingIntervals.get(key)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.start(rid, activityType, extras);\n\n\t\tcontinuingIntervals.set(\n\t\t\tkey,\n\t\t\tsetInterval(() => {\n\t\t\t\tthis.start(rid, activityType, extras);\n\t\t\t}, RENEW),\n\t\t);\n\t}\n\n\tstart(rid: string, activityType: string, extras: IExtras = {}): void {\n\t\tconst trid = extras?.tmid || rid;\n\t\tconst key = `${activityType}-${trid}`;\n\n\t\tif (activityRenews.get(key)) {\n\t\t\treturn;\n\t\t}\n\n\t\tactivityRenews.set(\n\t\t\tkey,\n\t\t\tsetTimeout(() => {\n\t\t\t\tclearTimeout(activityRenews.get(key));\n\t\t\t\tactivityRenews.delete(key);\n\t\t\t}, RENEW),\n\t\t);\n\n\t\tconst activities = roomActivities.get(trid) || new Set();\n\t\tactivities.add(activityType);\n\t\troomActivities.set(trid, activities);\n\n\t\temitActivities(rid, extras);\n\n\t\tif (activityTimeouts.get(key)) {\n\t\t\tclearTimeout(activityTimeouts.get(key));\n\t\t\tactivityTimeouts.delete(key);\n\t\t}\n\n\t\tactivityTimeouts.set(\n\t\t\tkey,\n\t\t\tsetTimeout(() => this.stop(trid, activityType, extras), TIMEOUT),\n\t\t);\n\t\tactivityTimeouts.get(key);\n\t}\n\n\tstop(rid: string, activityType: string, extras: IExtras): void {\n\t\tconst trid = extras?.tmid || rid;\n\t\tconst key = `${activityType}-${trid}`;\n\n\t\tif (activityTimeouts.get(key)) {\n\t\t\tclearTimeout(activityTimeouts.get(key));\n\t\t\tactivityTimeouts.delete(key);\n\t\t}\n\t\tif (activityRenews.get(key)) {\n\t\t\tclearTimeout(activityRenews.get(key));\n\t\t\tactivityRenews.delete(key);\n\t\t}\n\t\tif (continuingIntervals.get(key)) {\n\t\t\tclearInterval(continuingIntervals.get(key));\n\t\t\tcontinuingIntervals.delete(key);\n\t\t}\n\n\t\tconst activities = roomActivities.get(trid) || new Set();\n\t\tactivities.delete(activityType);\n\t\troomActivities.set(trid, activities);\n\t\temitActivities(rid, extras);\n\t}\n\n\tcancel(rid: string): void {\n\t\tif (!rooms.get(rid)) {\n\t\t\treturn;\n\t\t}\n\n\t\tNotifications.unRoom(rid, USER_ACTIVITY, rooms.get(rid));\n\t\trooms.delete(rid);\n\t}\n\n\tget(roomId: string): IRoomActivity | undefined {\n\t\treturn performingUsers.get(roomId);\n\t}\n})();\n","import { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Tracker } from 'meteor/tracker';\n\nimport { createEphemeralPortal } from '../../../../client/lib/portals/createEphemeralPortal';\n\nconst Dep = new Tracker.Dependency();\n\nlet container;\nlet routeComputation;\nlet props;\nlet unregister;\n\nconst createContainer = () => {\n\tconst div = document.createElement('div');\n\tdiv.id = 'react-user-card';\n\tdocument.body.appendChild(div);\n\treturn div;\n};\n\nexport const closeUserCard = () => {\n\tif (!container) {\n\t\treturn;\n\t}\n\n\tif (routeComputation) {\n\t\trouteComputation.stop();\n\t\trouteComputation = undefined;\n\t}\n\n\tTracker.afterFlush(() => {\n\t\tif (unregister) {\n\t\t\tunregister();\n\t\t\tunregister = undefined;\n\t\t}\n\t});\n};\n\nexport const openUserCard = (args) => {\n\tprops = {\n\t\t...args,\n\t\tonClose: closeUserCard,\n\t};\n\n\tDep.changed();\n\n\tcontainer = container || createContainer();\n\n\tunregister =\n\t\tunregister ||\n\t\tcreateEphemeralPortal(\n\t\t\t() => import('../../../../client/views/room/UserCard'),\n\t\t\t() => {\n\t\t\t\tDep.depend();\n\t\t\t\treturn props;\n\t\t\t},\n\t\t\tcontainer,\n\t\t);\n\n\trouteComputation =\n\t\trouteComputation ||\n\t\tTracker.autorun((c) => {\n\t\t\tFlowRouter.watchPathChange();\n\n\t\t\tif (!c.firstRun) {\n\t\t\t\tcloseUserCard();\n\t\t\t}\n\t\t});\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\n\nimport { t } from '../../../utils';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\n\nAccounts.onEmailVerificationLink(function (token, done) {\n\tAccounts.verifyEmail(token, function (error) {\n\t\tif (error == null) {\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Email_verified') });\n\t\t\tMeteor.call('afterVerifyEmail');\n\t\t} else {\n\t\t\tdispatchToastMessage({ type: 'error', message: error.message });\n\t\t}\n\t\treturn done();\n\t});\n});\n","import moment from 'moment';\nimport _ from 'underscore';\nimport { Meteor } from 'meteor/meteor';\nimport { Random } from 'meteor/random';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Session } from 'meteor/session';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\n\nimport { KonchatNotification } from './notification';\nimport { UserAction, USER_ACTIVITIES } from '../index';\nimport { fileUpload } from './fileUpload';\nimport { t, slashCommands } from '../../../utils/client';\nimport { messageProperties, MessageTypes, readMessage } from '../../../ui-utils/client';\nimport { settings } from '../../../settings/client';\nimport { callbacks } from '../../../../lib/callbacks';\nimport { hasAtLeastOnePermission } from '../../../authorization/client';\nimport { Messages, Rooms, ChatMessage, ChatSubscription } from '../../../models/client';\nimport { emoji } from '../../../emoji/client';\nimport { generateTriggerId } from '../../../ui-message/client/ActionManager';\nimport { imperativeModal } from '../../../../client/lib/imperativeModal';\nimport GenericModal from '../../../../client/components/GenericModal';\nimport { keyCodes } from '../../../../client/lib/utils/keyCodes';\nimport { prependReplies } from '../../../../client/lib/utils/prependReplies';\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\nimport { handleError } from '../../../../client/lib/utils/handleError';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\nimport { onClientBeforeSendMessage } from '../../../../client/lib/onClientBeforeSendMessage';\n\nconst messageBoxState = {\n\tsaveValue: _.debounce(({ rid, tmid }, value) => {\n\t\tconst key = ['messagebox', rid, tmid].filter(Boolean).join('_');\n\t\tvalue ? Meteor._localStorage.setItem(key, value) : Meteor._localStorage.removeItem(key);\n\t}, 1000),\n\n\trestoreValue: ({ rid, tmid }) => {\n\t\tconst key = ['messagebox', rid, tmid].filter(Boolean).join('_');\n\t\treturn Meteor._localStorage.getItem(key);\n\t},\n\n\trestore: ({ rid, tmid }, input) => {\n\t\tconst value = messageBoxState.restoreValue({ rid, tmid });\n\t\tif (typeof value === 'string') {\n\t\t\tmessageBoxState.set(input, value);\n\t\t}\n\t},\n\n\tsave: ({ rid, tmid }, input) => {\n\t\tmessageBoxState.saveValue({ rid, tmid }, input.value);\n\t},\n\n\tset: (input, value) => {\n\t\tinput.value = value;\n\t\t$(input).trigger('change').trigger('input');\n\t},\n\n\tpurgeAll: () => {\n\t\tObject.keys(Meteor._localStorage)\n\t\t\t.filter((key) => key.indexOf('messagebox_') === 0)\n\t\t\t.forEach((key) => Meteor._localStorage.removeItem(key));\n\t},\n};\n\ncallbacks.add('afterLogoutCleanUp', messageBoxState.purgeAll, callbacks.priority.MEDIUM, 'chatMessages-after-logout-cleanup');\n\nexport class ChatMessages {\n\tconstructor(collection = ChatMessage) {\n\t\tthis.collection = collection;\n\t}\n\n\tediting = {};\n\n\trecords = {};\n\n\tinitializeWrapper(wrapper) {\n\t\tthis.wrapper = wrapper;\n\t}\n\n\tinitializeInput(input, { rid, tmid }) {\n\t\tthis.input = input;\n\t\tthis.$input = $(this.input);\n\n\t\tif (!input || !rid) {\n\t\t\treturn;\n\t\t}\n\n\t\tmessageBoxState.restore({ rid, tmid }, input);\n\t\tthis.restoreReplies();\n\t\tthis.requestInputFocus();\n\t}\n\n\tasync restoreReplies() {\n\t\tconst mid = FlowRouter.getQueryParam('reply');\n\t\tif (!mid) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst message = Messages.findOne(mid) || (await callWithErrorHandling('getSingleMessage', mid));\n\t\tif (!message) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.$input.data('reply', [message]).trigger('dataChange');\n\t}\n\n\trequestInputFocus() {\n\t\tsetTimeout(() => {\n\t\t\tif (this.input && window.matchMedia('screen and (min-device-width: 500px)').matches) {\n\t\t\t\tthis.input.focus();\n\t\t\t}\n\t\t}, 200);\n\t}\n\n\trecordInputAsDraft() {\n\t\tconst message = this.collection.findOne(this.editing.id);\n\t\tconst record = this.records[this.editing.id] || {};\n\t\tconst draft = this.input.value;\n\n\t\tif (draft === message.msg) {\n\t\t\tthis.clearCurrentDraft();\n\t\t\treturn;\n\t\t}\n\n\t\trecord.draft = draft;\n\t\tthis.records[this.editing.id] = record;\n\t}\n\n\tclearCurrentDraft() {\n\t\tconst hasValue = this.records[this.editing.id];\n\t\tdelete this.records[this.editing.id];\n\t\treturn !!hasValue;\n\t}\n\n\tresetToDraft(id) {\n\t\tconst message = this.collection.findOne(id);\n\t\tconst oldValue = this.input.value;\n\t\tmessageBoxState.set(this.input, message.msg);\n\t\treturn oldValue !== message.msg;\n\t}\n\n\ttoPrevMessage() {\n\t\tconst { element } = this.editing;\n\t\tif (!element) {\n\t\t\tconst messages = Array.from(this.wrapper.querySelectorAll('.own:not(.system)'));\n\t\t\tconst message = messages.pop();\n\t\t\treturn message && this.edit(message, false);\n\t\t}\n\n\t\tfor (let previous = element.previousElementSibling; previous; previous = previous.previousElementSibling) {\n\t\t\tif (previous.matches('.own:not(.system)')) {\n\t\t\t\treturn this.edit(previous, false);\n\t\t\t}\n\t\t}\n\t\tthis.clearEditing();\n\t}\n\n\ttoNextMessage() {\n\t\tconst { element } = this.editing;\n\t\tif (element) {\n\t\t\tlet next;\n\t\t\tfor (next = element.nextElementSibling; next; next = next.nextElementSibling) {\n\t\t\t\tif (next.matches('.own:not(.system)')) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnext ? this.edit(next, true) : this.clearEditing();\n\t\t} else {\n\t\t\tthis.clearEditing();\n\t\t}\n\t}\n\n\tedit(element, isEditingTheNextOne) {\n\t\tconst message = this.collection.findOne(element.dataset.id);\n\n\t\tconst hasPermission = hasAtLeastOnePermission('edit-message', message.rid);\n\t\tconst editAllowed = settings.get('Message_AllowEditing');\n\t\tconst editOwn = message && message.u && message.u._id === Meteor.userId();\n\n\t\tif (!hasPermission && (!editAllowed || !editOwn)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (element.classList.contains('system')) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockEditInMinutes = settings.get('Message_AllowEditing_BlockEditInMinutes');\n\t\tif (blockEditInMinutes && blockEditInMinutes !== 0) {\n\t\t\tlet currentTsDiff;\n\t\t\tlet msgTs;\n\t\t\tif (message.ts) {\n\t\t\t\tmsgTs = moment(message.ts);\n\t\t\t}\n\t\t\tif (msgTs) {\n\t\t\t\tcurrentTsDiff = moment().diff(msgTs, 'minutes');\n\t\t\t}\n\t\t\tif (currentTsDiff > blockEditInMinutes) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst draft = this.records[message._id];\n\t\tlet msg = draft && draft.draft;\n\t\tmsg = msg || message.msg;\n\n\t\tthis.clearEditing();\n\n\t\tthis.editing.element = element;\n\t\tthis.editing.id = message._id;\n\t\tthis.input.parentElement.classList.add('editing');\n\t\telement.classList.add('editing');\n\n\t\tif (message.attachments && message.attachments[0].description) {\n\t\t\tmessageBoxState.set(this.input, message.attachments[0].description);\n\t\t} else {\n\t\t\tmessageBoxState.set(this.input, msg);\n\t\t}\n\n\t\tconst cursorPosition = isEditingTheNextOne ? 0 : -1;\n\t\tthis.input.focus();\n\t\tthis.$input.setCursorPosition(cursorPosition);\n\t}\n\n\tclearEditing() {\n\t\tif (!this.editing.element) {\n\t\t\tthis.editing.saved = this.input.value;\n\t\t\tthis.editing.savedCursor = this.input.selectionEnd;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.recordInputAsDraft();\n\t\tthis.input.parentElement.classList.remove('editing');\n\t\tthis.editing.element.classList.remove('editing');\n\t\tdelete this.editing.id;\n\t\tdelete this.editing.element;\n\n\t\tmessageBoxState.set(this.input, this.editing.saved || '');\n\t\tconst cursorPosition = this.editing.savedCursor ? this.editing.savedCursor : -1;\n\t\tthis.$input.setCursorPosition(cursorPosition);\n\t}\n\n\tasync send(event, { rid, tmid, value, tshow }, done = () => {}) {\n\t\tconst threadsEnabled = settings.get('Threads_enabled');\n\n\t\tUserAction.stop(rid, USER_ACTIVITIES.USER_TYPING, { tmid });\n\n\t\tif (!ChatSubscription.findOne({ rid })) {\n\t\t\tawait callWithErrorHandling('joinRoom', rid);\n\t\t}\n\n\t\tmessageBoxState.save({ rid, tmid }, this.input);\n\n\t\tlet msg = value.trim();\n\t\tif (msg) {\n\t\t\tconst mention = this.$input.data('mention-user') || false;\n\t\t\tconst replies = this.$input.data('reply') || [];\n\t\t\tif (!mention || !threadsEnabled) {\n\t\t\t\tmsg = await prependReplies(msg, replies, mention);\n\t\t\t}\n\n\t\t\tif (mention && threadsEnabled && replies.length) {\n\t\t\t\ttmid = replies[0]._id;\n\t\t\t}\n\t\t}\n\n\t\t// don't add tmid or tshow if the message isn't part of a thread (it can happen if editing the main message of a thread)\n\t\tconst originalMessage = this.collection.findOne({ _id: this.editing.id }, { fields: { tmid: 1 }, reactive: false });\n\t\tif (originalMessage && tmid && !originalMessage.tmid) {\n\t\t\ttmid = undefined;\n\t\t\ttshow = undefined;\n\t\t}\n\n\t\tif (msg) {\n\t\t\treadMessage.readNow(rid);\n\t\t\treadMessage.refreshUnreadMark(rid);\n\n\t\t\tconst message = await onClientBeforeSendMessage({\n\t\t\t\t_id: Random.id(),\n\t\t\t\trid,\n\t\t\t\ttshow,\n\t\t\t\ttmid,\n\t\t\t\tmsg,\n\t\t\t});\n\n\t\t\ttry {\n\t\t\t\tawait this.processMessageSend(message);\n\t\t\t\tthis.$input.removeData('reply').trigger('dataChange');\n\t\t\t} catch (error) {\n\t\t\t\thandleError(error);\n\t\t\t}\n\t\t\treturn done();\n\t\t}\n\n\t\tif (this.editing.id) {\n\t\t\tconst message = this.collection.findOne(this.editing.id);\n\t\t\tconst isDescription = message.attachments && message.attachments[0] && message.attachments[0].description;\n\n\t\t\ttry {\n\t\t\t\tif (isDescription) {\n\t\t\t\t\tawait this.processMessageEditing({ _id: this.editing.id, rid, msg: '' });\n\t\t\t\t\treturn done();\n\t\t\t\t}\n\n\t\t\t\tthis.resetToDraft(this.editing.id);\n\t\t\t\tthis.confirmDeleteMsg(message, done);\n\t\t\t\treturn;\n\t\t\t} catch (error) {\n\t\t\t\thandleError(error);\n\t\t\t}\n\t\t}\n\n\t\treturn done();\n\t}\n\n\tasync processMessageSend(message) {\n\t\tif (await this.processSetReaction(message)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.clearCurrentDraft();\n\n\t\tif (await this.processTooLongMessage(message)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (await this.processMessageEditing({ ...message, _id: this.editing.id })) {\n\t\t\treturn;\n\t\t}\n\n\t\tKonchatNotification.removeRoomNotification(message.rid);\n\n\t\tif (await this.processSlashCommand(message)) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait callWithErrorHandling('sendMessage', message);\n\t}\n\n\tasync processSetReaction({ rid, tmid, msg }) {\n\t\tif (msg.slice(0, 2) !== '+:') {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst reaction = msg.slice(1).trim();\n\t\tif (!emoji.list[reaction]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst lastMessage = this.collection.findOne({ rid, tmid }, { fields: { ts: 1 }, sort: { ts: -1 } });\n\t\tawait callWithErrorHandling('setReaction', reaction, lastMessage._id);\n\t\treturn true;\n\t}\n\n\tasync processTooLongMessage({ msg, rid, tmid }) {\n\t\tconst adjustedMessage = messageProperties.messageWithoutEmojiShortnames(msg);\n\t\tif (messageProperties.length(adjustedMessage) <= settings.get('Message_MaxAllowedSize') && msg) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!settings.get('FileUpload_Enabled') || !settings.get('Message_AllowConvertLongMessagesToAttachment') || this.editing.id) {\n\t\t\tthrow new Error({ error: 'Message_too_long' });\n\t\t}\n\n\t\tconst onConfirm = () => {\n\t\t\tconst contentType = 'text/plain';\n\t\t\tconst messageBlob = new Blob([msg], { type: contentType });\n\t\t\tconst fileName = `${Meteor.user().username} - ${new Date()}.txt`;\n\t\t\tconst file = new File([messageBlob], fileName, {\n\t\t\t\ttype: contentType,\n\t\t\t\tlastModified: Date.now(),\n\t\t\t});\n\t\t\tfileUpload([{ file, name: fileName }], this.input, { rid, tmid });\n\t\t\timperativeModal.close();\n\t\t};\n\n\t\tconst onClose = () => {\n\t\t\tmessageBoxState.set(this.input, msg);\n\t\t\timperativeModal.close();\n\t\t};\n\n\t\timperativeModal.open({\n\t\t\tcomponent: GenericModal,\n\t\t\tprops: {\n\t\t\t\ttitle: t('Message_too_long'),\n\t\t\t\tchildren: t('Send_it_as_attachment_instead_question'),\n\t\t\t\tonConfirm,\n\t\t\t\tonClose,\n\t\t\t\tonCancel: onClose,\n\t\t\t\tvariant: 'warning',\n\t\t\t},\n\t\t});\n\n\t\treturn true;\n\t}\n\n\tasync processMessageEditing(message) {\n\t\tif (!message._id) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (MessageTypes.isSystemMessage(message)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.clearEditing();\n\t\tawait callWithErrorHandling('updateMessage', message);\n\t\treturn true;\n\t}\n\n\tasync processSlashCommand(msgObject) {\n\t\tif (msgObject.msg[0] === '/') {\n\t\t\tconst match = msgObject.msg.match(/^\\/([^\\s]+)(?:\\s+(.*))?$/m);\n\t\t\tif (match) {\n\t\t\t\tlet command;\n\t\t\t\tif (slashCommands.commands[match[1]]) {\n\t\t\t\t\tconst commandOptions = slashCommands.commands[match[1]];\n\t\t\t\t\tcommand = match[1];\n\t\t\t\t\tconst param = match[2] || '';\n\n\t\t\t\t\tif (!commandOptions.permission || hasAtLeastOnePermission(commandOptions.permission, Session.get('openedRoom'))) {\n\t\t\t\t\t\tif (commandOptions.clientOnly) {\n\t\t\t\t\t\t\tcommandOptions.callback(command, param, msgObject);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst triggerId = generateTriggerId(slashCommands.commands[command].appId);\n\t\t\t\t\t\t\tMeteor.call('slashCommand', { cmd: command, params: param, msg: msgObject, triggerId }, (err, result) => {\n\t\t\t\t\t\t\t\ttypeof commandOptions.result === 'function' &&\n\t\t\t\t\t\t\t\t\tcommandOptions.result(err, result, {\n\t\t\t\t\t\t\t\t\t\tcmd: command,\n\t\t\t\t\t\t\t\t\t\tparams: param,\n\t\t\t\t\t\t\t\t\t\tmsg: msgObject,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!settings.get('Message_AllowUnrecognizedSlashCommand')) {\n\t\t\t\t\tconst invalidCommandMsg = {\n\t\t\t\t\t\t_id: Random.id(),\n\t\t\t\t\t\trid: msgObject.rid,\n\t\t\t\t\t\tts: new Date(),\n\t\t\t\t\t\tmsg: TAPi18n.__('No_such_command', { command: escapeHTML(match[1]) }),\n\t\t\t\t\t\tu: {\n\t\t\t\t\t\t\tusername: settings.get('InternalHubot_Username') || 'rocket.cat',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprivate: true,\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.collection.upsert({ _id: invalidCommandMsg._id }, invalidCommandMsg);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tconfirmDeleteMsg(message, done = () => {}) {\n\t\tif (MessageTypes.isSystemMessage(message)) {\n\t\t\treturn done();\n\t\t}\n\n\t\tconst room =\n\t\t\tmessage.drid &&\n\t\t\tRooms.findOne({\n\t\t\t\t_id: message.drid,\n\t\t\t\tprid: { $exists: true },\n\t\t\t});\n\n\t\tconst onConfirm = () => {\n\t\t\tif (this.editing.id === message._id) {\n\t\t\t\tthis.clearEditing();\n\t\t\t}\n\n\t\t\tthis.deleteMsg(message);\n\n\t\t\tthis.$input.focus();\n\t\t\tdone();\n\n\t\t\timperativeModal.close();\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Your_entry_has_been_deleted') });\n\t\t};\n\n\t\tconst onCloseModal = () => {\n\t\t\timperativeModal.close();\n\t\t\tif (this.editing.id === message._id) {\n\t\t\t\tthis.clearEditing();\n\t\t\t}\n\t\t\tthis.$input.focus();\n\t\t\tdone();\n\t\t};\n\n\t\timperativeModal.open({\n\t\t\tcomponent: GenericModal,\n\t\t\tprops: {\n\t\t\t\ttitle: t('Are_you_sure'),\n\t\t\t\tchildren: room ? t('The_message_is_a_discussion_you_will_not_be_able_to_recover') : t('You_will_not_be_able_to_recover'),\n\t\t\t\tvariant: 'danger',\n\t\t\t\tconfirmText: t('Yes_delete_it'),\n\t\t\t\tonConfirm,\n\t\t\t\tonClose: onCloseModal,\n\t\t\t\tonCancel: onCloseModal,\n\t\t\t},\n\t\t});\n\t}\n\n\tasync deleteMsg({ _id, rid, ts }) {\n\t\tconst forceDelete = hasAtLeastOnePermission('force-delete-message', rid);\n\t\tconst blockDeleteInMinutes = settings.get('Message_AllowDeleting_BlockDeleteInMinutes');\n\t\tif (blockDeleteInMinutes && forceDelete === false) {\n\t\t\tlet msgTs;\n\t\t\tif (ts) {\n\t\t\t\tmsgTs = moment(ts);\n\t\t\t}\n\t\t\tlet currentTsDiff;\n\t\t\tif (msgTs) {\n\t\t\t\tcurrentTsDiff = moment().diff(msgTs, 'minutes');\n\t\t\t}\n\t\t\tif (currentTsDiff > blockDeleteInMinutes) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: t('Message_deleting_blocked') });\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tawait callWithErrorHandling('deleteMessage', { _id });\n\t}\n\n\tkeydown(event) {\n\t\tconst { currentTarget: input, which: keyCode } = event;\n\n\t\tif (keyCode === keyCodes.ESCAPE && this.editing.element) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tif (!this.resetToDraft(this.editing.id)) {\n\t\t\t\tthis.clearCurrentDraft();\n\t\t\t\tthis.clearEditing();\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (keyCode === keyCodes.ARROW_UP || keyCode === keyCodes.ARROW_DOWN) {\n\t\t\tif (event.shiftKey) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst cursorPosition = input.selectionEnd;\n\n\t\t\tif (keyCode === keyCodes.ARROW_UP) {\n\t\t\t\tif (cursorPosition === 0) {\n\t\t\t\t\tthis.toPrevMessage();\n\t\t\t\t} else if (!event.altKey) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (event.altKey) {\n\t\t\t\t\tthis.$input.setCursorPosition(0);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (cursorPosition === input.value.length) {\n\t\t\t\t\tthis.toNextMessage();\n\t\t\t\t} else if (!event.altKey) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (event.altKey) {\n\t\t\t\t\tthis.$input.setCursorPosition(-1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t}\n\t}\n\n\tkeyup(event, { rid, tmid }) {\n\t\tconst { currentTarget: input, which: keyCode } = event;\n\n\t\tif (!Object.values(keyCodes).includes(keyCode)) {\n\t\t\tif (input.value.trim()) {\n\t\t\t\tUserAction.start(rid, USER_ACTIVITIES.USER_TYPING, { tmid });\n\t\t\t} else {\n\t\t\t\tUserAction.stop(rid, USER_ACTIVITIES.USER_TYPING, { tmid });\n\t\t\t}\n\t\t}\n\n\t\tmessageBoxState.save({ rid, tmid }, input);\n\t}\n\n\tonDestroyed(rid, tmid) {\n\t\tUserAction.cancel(rid);\n\t\t// TODO: check why we need too many ?. here :(\n\t\tif (this.input?.parentElement?.classList.contains('editing') === true) {\n\t\t\tif (!tmid) {\n\t\t\t\tthis.clearCurrentDraft();\n\t\t\t\tthis.clearEditing();\n\t\t\t}\n\t\t\tmessageBoxState.set(this.input, '');\n\t\t\tmessageBoxState.save({ rid, tmid }, this.$input);\n\t\t}\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../../settings';\nimport { CachedChatRoom, CachedChatSubscription } from '../../../models';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tif (!Meteor.userId() && settings.get('Accounts_AllowAnonymousRead') === true) {\n\t\t\tCachedChatRoom.init();\n\t\t\tCachedChatSubscription.ready.set(true);\n\t\t}\n\t});\n});\n","import { Tracker } from 'meteor/tracker';\nimport { Session } from 'meteor/session';\nimport { Random } from 'meteor/random';\n\nimport { settings } from '../../../settings/client';\nimport { UserAction, USER_ACTIVITIES } from '../index';\nimport { fileUploadIsValidContentType, APIClient } from '../../../utils';\nimport { imperativeModal } from '../../../../client/lib/imperativeModal';\nimport FileUploadModal from '../../../../client/views/room/modals/FileUploadModal';\nimport { prependReplies } from '../../../../client/lib/utils/prependReplies';\n\nexport const uploadFileWithMessage = async (rid, tmid, { description, fileName, msg, file }) => {\n\tconst data = new FormData();\n\tdescription && data.append('description', description);\n\tmsg && data.append('msg', msg);\n\ttmid && data.append('tmid', tmid);\n\tdata.append('file', file.file, fileName);\n\n\tconst uploads = Session.get('uploading') || [];\n\n\tconst upload = {\n\t\tid: Random.id(),\n\t\tname: fileName,\n\t\tpercentage: 0,\n\t};\n\n\tuploads.push(upload);\n\tSession.set('uploading', uploads);\n\n\tconst { xhr, promise } = APIClient.upload(`v1/rooms.upload/${rid}`, {}, data, {\n\t\tprogress(progress) {\n\t\t\tconst uploads = Session.get('uploading') || [];\n\n\t\t\tif (progress === 100) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tuploads\n\t\t\t\t.filter((u) => u.id === upload.id)\n\t\t\t\t.forEach((u) => {\n\t\t\t\t\tu.percentage = Math.round(progress) || 0;\n\t\t\t\t});\n\t\t\tSession.set('uploading', uploads);\n\t\t},\n\t\terror(error) {\n\t\t\tconst uploads = Session.get('uploading') || [];\n\t\t\tuploads\n\t\t\t\t.filter((u) => u.id === upload.id)\n\t\t\t\t.forEach((u) => {\n\t\t\t\t\tu.error = error.message;\n\t\t\t\t\tu.percentage = 0;\n\t\t\t\t});\n\t\t\tSession.set('uploading', uploads);\n\t\t},\n\t});\n\tif (Session.get('uploading').length) {\n\t\tUserAction.performContinuously(rid, USER_ACTIVITIES.USER_UPLOADING, { tmid });\n\t}\n\n\tTracker.autorun((computation) => {\n\t\tconst isCanceling = Session.get(`uploading-cancel-${upload.id}`);\n\t\tif (!isCanceling) {\n\t\t\treturn;\n\t\t}\n\t\tcomputation.stop();\n\t\tSession.delete(`uploading-cancel-${upload.id}`);\n\n\t\txhr.abort();\n\n\t\tconst uploads = Session.get('uploading') || {};\n\t\tSession.set(\n\t\t\t'uploading',\n\t\t\tuploads.filter((u) => u.id !== upload.id),\n\t\t);\n\t});\n\n\ttry {\n\t\tawait promise;\n\t\tconst uploads = Session.get('uploading') || [];\n\t\tconst remainingUploads = Session.set(\n\t\t\t'uploading',\n\t\t\tuploads.filter((u) => u.id !== upload.id),\n\t\t);\n\n\t\tif (!Session.get('uploading').length) {\n\t\t\tUserAction.stop(rid, USER_ACTIVITIES.USER_UPLOADING, { tmid });\n\t\t}\n\t\treturn remainingUploads;\n\t} catch (error) {\n\t\tconst uploads = Session.get('uploading') || [];\n\t\tuploads\n\t\t\t.filter((u) => u.id === upload.id)\n\t\t\t.forEach((u) => {\n\t\t\t\tu.error = (error.xhr && error.xhr.responseJSON && error.xhr.responseJSON.error) || error.message;\n\t\t\t\tu.percentage = 0;\n\t\t\t});\n\t\tif (!uploads.length) {\n\t\t\tUserAction.stop(rid, USER_ACTIVITIES.USER_UPLOADING, { tmid });\n\t\t}\n\t\tSession.set('uploading', uploads);\n\t}\n};\n\nexport const fileUpload = async (files, input, { rid, tmid }) => {\n\tconst threadsEnabled = settings.get('Threads_enabled');\n\n\tfiles = [].concat(files);\n\n\tconst replies = $(input).data('reply') || [];\n\tconst mention = $(input).data('mention-user') || false;\n\n\tlet msg = '';\n\n\tif (!mention || !threadsEnabled) {\n\t\tmsg = await prependReplies('', replies, mention);\n\t}\n\n\tif (mention && threadsEnabled && replies.length) {\n\t\ttmid = replies[0]._id;\n\t}\n\n\tconst uploadNextFile = () => {\n\t\tconst file = files.pop();\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\n\n\t\timperativeModal.open({\n\t\t\tcomponent: FileUploadModal,\n\t\t\tprops: {\n\t\t\t\tfile: file.file,\n\t\t\t\tfileName: file.name,\n\t\t\t\tonClose: () => {\n\t\t\t\t\timperativeModal.close();\n\t\t\t\t\tuploadNextFile();\n\t\t\t\t},\n\t\t\t\tonSubmit: (fileName, description) => {\n\t\t\t\t\tuploadFileWithMessage(rid, tmid, {\n\t\t\t\t\t\tdescription,\n\t\t\t\t\t\tfileName,\n\t\t\t\t\t\tmsg: msg || undefined,\n\t\t\t\t\t\tfile,\n\t\t\t\t\t});\n\t\t\t\t\timperativeModal.close();\n\t\t\t\t\tuploadNextFile();\n\t\t\t\t},\n\t\t\t\tinvalidContentType: file.file.type && !fileUploadIsValidContentType(file.file.type),\n\t\t\t},\n\t\t});\n\t};\n\n\tuploadNextFile();\n};\n","import { Meteor } from 'meteor/meteor';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { ServiceConfiguration } from 'meteor/service-configuration';\nimport s from 'underscore.string';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\n\nimport { AccountBox } from '../../../ui-utils';\nimport { settings } from '../../../settings';\nimport { callbacks } from '../../../../lib/callbacks';\nimport { add, remove } from '../../../../client/views/room/lib/Toolbox/IframeButtons';\nimport { baseURI } from '../../../../client/lib/baseURI';\n\nconst commands = {\n\t'go'(data) {\n\t\tif (typeof data.path !== 'string' || data.path.trim().length === 0) {\n\t\t\treturn console.error('`path` not defined');\n\t\t}\n\t\tconst newUrl = new URL(`${s.rtrim(baseURI, '/')}/${s.ltrim(data.path, '/')}`);\n\n\t\tconst newParams = Array.from(newUrl.searchParams.entries()).reduce((ret, [key, value]) => {\n\t\t\tret[key] = value;\n\t\t\treturn ret;\n\t\t}, {});\n\n\t\tconst newPath = newUrl.pathname.replace(new RegExp(`^${escapeRegExp(__meteor_runtime_config__.ROOT_URL_PATH_PREFIX)}`), '');\n\t\tFlowRouter.go(newPath, null, { ...FlowRouter.current().queryParams, ...newParams });\n\t},\n\n\t'set-user-status'(data) {\n\t\tAccountBox.setStatus(data.status);\n\t},\n\n\t'call-custom-oauth-login'(data, event) {\n\t\tconst customOAuthCallback = (response) => {\n\t\t\tevent.source.postMessage(\n\t\t\t\t{\n\t\t\t\t\tevent: 'custom-oauth-callback',\n\t\t\t\t\tresponse,\n\t\t\t\t},\n\t\t\t\tevent.origin,\n\t\t\t);\n\t\t};\n\n\t\tconst siteUrl = `${Meteor.settings.Site_Url}/`;\n\t\tif (typeof data.redirectUrl !== 'string' || !data.redirectUrl.startsWith(siteUrl)) {\n\t\t\tdata.redirectUrl = null;\n\t\t}\n\n\t\tif (typeof data.service === 'string' && window.ServiceConfiguration) {\n\t\t\tconst customOauth = ServiceConfiguration.configurations.findOne({ service: data.service });\n\n\t\t\tif (customOauth) {\n\t\t\t\tconst customLoginWith = Meteor[`loginWith${s.capitalize(customOauth.service, true)}`];\n\t\t\t\tconst customRedirectUri = data.redirectUrl || siteUrl;\n\t\t\t\tcustomLoginWith.call(Meteor, { redirectUrl: customRedirectUri }, customOAuthCallback);\n\t\t\t}\n\t\t}\n\t},\n\n\t'login-with-token'(data, ...args) {\n\t\tif (typeof data.token === 'string') {\n\t\t\tMeteor.loginWithToken(data.token, function () {\n\t\t\t\tconsole.log('Iframe command [login-with-token]: result', [data, ...args]);\n\t\t\t});\n\t\t}\n\t},\n\n\t'logout'() {\n\t\tconst user = Meteor.user();\n\t\tMeteor.logout(() => {\n\t\t\tcallbacks.run('afterLogoutCleanUp', user);\n\t\t\tMeteor.call('logoutCleanUp', user);\n\t\t\treturn FlowRouter.go('home');\n\t\t});\n\t},\n\n\t'set-toolbar-button'({ id, icon, label }) {\n\t\tadd(id, { id, icon, label });\n\t},\n\t'remove-toolbar-button'({ id }) {\n\t\tremove(id);\n\t},\n};\n\nwindow.addEventListener('message', (e) => {\n\tif (settings.get('Iframe_Integration_receive_enable') !== true) {\n\t\treturn;\n\t}\n\n\tif (typeof e.data !== 'object' || typeof e.data.externalCommand !== 'string') {\n\t\treturn;\n\t}\n\n\tconst origins = settings.get('Iframe_Integration_receive_origin');\n\n\tif (origins !== '*' && origins.split(',').indexOf(e.origin) === -1) {\n\t\treturn console.error('Origin not allowed', e.origin);\n\t}\n\n\tconst command = commands[e.data.externalCommand];\n\tif (command) {\n\t\tcommand(e.data, e);\n\t}\n});\n","import _ from 'underscore';\n\nimport { menu } from '../../../ui-utils';\n\nwindow.addEventListener(\n\t'resize',\n\t_.debounce(\n\t\t(() => {\n\t\t\tlet lastState = window.matchMedia('(min-width: 780px)').matches ? 'mini' : 'large';\n\t\t\tmenu.close();\n\t\t\treturn () => {\n\t\t\t\tconst futureState = window.matchMedia('(min-width: 780px)').matches ? 'mini' : 'large';\n\t\t\t\tif (lastState !== futureState) {\n\t\t\t\t\tlastState = futureState;\n\t\t\t\t\tmenu.close();\n\t\t\t\t}\n\t\t\t};\n\t\t})(),\n\t\t100,\n\t),\n);\n","// @TODO implementar 'clicar na notificacao' abre a janela do chat\nimport { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Random } from 'meteor/random';\nimport { Tracker } from 'meteor/tracker';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Session } from 'meteor/session';\nimport _ from 'underscore';\nimport s from 'underscore.string';\n\nimport { e2e } from '../../../e2e/client';\nimport { Users, ChatSubscription } from '../../../models';\nimport { getUserPreference } from '../../../utils';\nimport { getUserAvatarURL } from '../../../utils/lib/getUserAvatarURL';\nimport { CustomSounds } from '../../../custom-sounds/client/lib/CustomSounds';\nimport { getAvatarAsPng } from '../../../../client/lib/utils/getAvatarAsPng';\nimport { onClientMessageReceived } from '../../../../client/lib/onClientMessageReceived';\n\nexport const KonchatNotification = {\n\tnotificationStatus: new ReactiveVar(),\n\n\t// notificacoes HTML5\n\tgetDesktopPermission() {\n\t\tif (window.Notification && Notification.permission !== 'granted') {\n\t\t\treturn Notification.requestPermission(function (status) {\n\t\t\t\tKonchatNotification.notificationStatus.set(status);\n\t\t\t\tif (Notification.permission !== status) {\n\t\t\t\t\tNotification.permission = status;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\tnotify(notification) {\n\t\tif (window.Notification && Notification.permission === 'granted') {\n\t\t\tconst message = {\n\t\t\t\trid: notification.payload != null ? notification.payload.rid : undefined,\n\t\t\t\tmsg: notification.text,\n\t\t\t\tnotification: true,\n\t\t\t};\n\t\t\treturn onClientMessageReceived(message).then(function (message) {\n\t\t\t\tconst requireInteraction = getUserPreference(Meteor.userId(), 'desktopNotificationRequireInteraction');\n\t\t\t\tconst n = new Notification(notification.title, {\n\t\t\t\t\ticon: notification.icon || getUserAvatarURL(notification.payload.sender.username),\n\t\t\t\t\tbody: s.stripTags(message.msg),\n\t\t\t\t\ttag: notification.payload._id,\n\t\t\t\t\tcanReply: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\trequireInteraction,\n\t\t\t\t});\n\n\t\t\t\tconst notificationDuration = !requireInteraction && (notification.duration - 0 || 10);\n\t\t\t\tif (notificationDuration > 0) {\n\t\t\t\t\tsetTimeout(() => n.close(), notificationDuration * 1000);\n\t\t\t\t}\n\n\t\t\t\tif (notification.payload && notification.payload.rid) {\n\t\t\t\t\tif (n.addEventListener) {\n\t\t\t\t\t\tn.addEventListener('reply', ({ response }) =>\n\t\t\t\t\t\t\tMeteor.call('sendMessage', {\n\t\t\t\t\t\t\t\t_id: Random.id(),\n\t\t\t\t\t\t\t\trid: notification.payload.rid,\n\t\t\t\t\t\t\t\tmsg: response,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tn.onclick = function () {\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\twindow.focus();\n\t\t\t\t\t\tswitch (notification.payload.type) {\n\t\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\t\treturn FlowRouter.go(\n\t\t\t\t\t\t\t\t\t'direct',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\trid: notification.payload.rid,\n\t\t\t\t\t\t\t\t\t\t...(notification.payload.tmid && {\n\t\t\t\t\t\t\t\t\t\t\ttab: 'thread',\n\t\t\t\t\t\t\t\t\t\t\tcontext: notification.payload.tmid,\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{ ...FlowRouter.current().queryParams, jump: notification.payload._id },\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcase 'c':\n\t\t\t\t\t\t\t\treturn FlowRouter.go(\n\t\t\t\t\t\t\t\t\t'channel',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: notification.payload.name,\n\t\t\t\t\t\t\t\t\t\t...(notification.payload.tmid && {\n\t\t\t\t\t\t\t\t\t\t\ttab: 'thread',\n\t\t\t\t\t\t\t\t\t\t\tcontext: notification.payload.tmid,\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{ ...FlowRouter.current().queryParams, jump: notification.payload._id },\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcase 'p':\n\t\t\t\t\t\t\t\treturn FlowRouter.go(\n\t\t\t\t\t\t\t\t\t'group',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: notification.payload.name,\n\t\t\t\t\t\t\t\t\t\t...(notification.payload.tmid && {\n\t\t\t\t\t\t\t\t\t\t\ttab: 'thread',\n\t\t\t\t\t\t\t\t\t\t\tcontext: notification.payload.tmid,\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{ ...FlowRouter.current().queryParams, jump: notification.payload._id },\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\tasync showDesktop(notification) {\n\t\tif (\n\t\t\tnotification.payload.rid === Session.get('openedRoom') &&\n\t\t\t(typeof window.document.hasFocus === 'function' ? window.document.hasFocus() : undefined)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (Meteor.user().status === 'busy') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (notification.payload.message && notification.payload.message.t === 'e2e') {\n\t\t\tconst e2eRoom = await e2e.getInstanceByRoomId(notification.payload.rid);\n\t\t\tif (e2eRoom) {\n\t\t\t\tnotification.text = (await e2eRoom.decrypt(notification.payload.message.msg)).text;\n\t\t\t}\n\t\t}\n\n\t\treturn getAvatarAsPng(notification.payload.sender.username, function (avatarAsPng) {\n\t\t\tnotification.icon = avatarAsPng;\n\t\t\treturn KonchatNotification.notify(notification);\n\t\t});\n\t},\n\n\tnewMessage(rid) {\n\t\tif (Session.equals(`user_${Meteor.user().username}_status`, 'busy')) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst userId = Meteor.userId();\n\t\tconst newMessageNotification = getUserPreference(userId, 'newMessageNotification');\n\t\tconst audioVolume = getUserPreference(userId, 'notificationsSoundVolume');\n\n\t\tconst sub = ChatSubscription.findOne({ rid }, { fields: { audioNotificationValue: 1 } });\n\n\t\tif (!sub || sub.audioNotificationValue === 'none') {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tif (sub.audioNotificationValue && sub.audioNotificationValue !== '0') {\n\t\t\t\tCustomSounds.play(sub.audioNotificationValue, {\n\t\t\t\t\tvolume: Number((audioVolume / 100).toPrecision(2)),\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (newMessageNotification !== 'none') {\n\t\t\t\tCustomSounds.play(newMessageNotification, {\n\t\t\t\t\tvolume: Number((audioVolume / 100).toPrecision(2)),\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// do nothing\n\t\t}\n\t},\n\n\tnewRoom(rid /* , withSound = true*/) {\n\t\tTracker.nonreactive(function () {\n\t\t\tlet newRoomSound = Session.get('newRoomSound');\n\t\t\tif (newRoomSound != null) {\n\t\t\t\tnewRoomSound = _.union(newRoomSound, [rid]);\n\t\t\t} else {\n\t\t\t\tnewRoomSound = [rid];\n\t\t\t}\n\n\t\t\treturn Session.set('newRoomSound', newRoomSound);\n\t\t});\n\t},\n\n\t// $('.link-room-' + rid).addClass('new-room-highlight')\n\n\tremoveRoomNotification(rid) {\n\t\tlet newRoomSound = Session.get('newRoomSound');\n\t\tnewRoomSound = _.without(newRoomSound, rid);\n\t\tTracker.nonreactive(() => Session.set('newRoomSound', newRoomSound));\n\n\t\treturn $(`.link-room-${rid}`).removeClass('new-room-highlight');\n\t},\n};\n\nMeteor.startup(() => {\n\tTracker.autorun(function () {\n\t\tconst user = Users.findOne(Meteor.userId(), {\n\t\t\tfields: {\n\t\t\t\t'settings.preferences.newRoomNotification': 1,\n\t\t\t\t'settings.preferences.notificationsSoundVolume': 1,\n\t\t\t},\n\t\t});\n\t\tconst newRoomNotification = getUserPreference(user, 'newRoomNotification');\n\t\tconst audioVolume = getUserPreference(user, 'notificationsSoundVolume');\n\n\t\tif ((Session.get('newRoomSound') || []).length > 0) {\n\t\t\tMeteor.defer(function () {\n\t\t\t\tif (newRoomNotification !== 'none') {\n\t\t\t\t\tCustomSounds.play(newRoomNotification, {\n\t\t\t\t\t\tvolume: Number((audioVolume / 100).toPrecision(2)),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tCustomSounds.pause(newRoomNotification);\n\t\t}\n\t});\n});\n","import { Blaze } from 'meteor/blaze';\n\n/**\n * Get the parent template instance\n * @param {Number} [levels] How many levels to go up. Default is 1\n * @returns {Blaze.TemplateInstance}\n */\n\nBlaze.TemplateInstance.prototype.parentTemplate = function (levels) {\n\tlet view = Blaze.currentView;\n\tif (typeof levels === 'undefined') {\n\t\tlevels = 1;\n\t}\n\twhile (view) {\n\t\tif (view.name.substring(0, 9) === 'Template.' && !levels--) {\n\t\t\treturn view.templateInstance();\n\t\t}\n\t\tview = view.parentView;\n\t}\n};\n","export const Login = (function () {\n\tfunction onClick(el) {\n\t\tconst $el = $(el);\n\t\tif ($el.length) {\n\t\t\t$el.addClass('active');\n\t\t\treturn $el.find('input').focus();\n\t\t}\n\t}\n\tfunction onBlur(input) {\n\t\tconst $input = $(input);\n\t\tif ($input.length) {\n\t\t\tif (input.value === '') {\n\t\t\t\treturn $input.parents('.input-text').removeClass('active');\n\t\t\t}\n\t\t}\n\t}\n\tfunction check(form) {\n\t\tconst $form = $(form);\n\t\tif ($form.length) {\n\t\t\tconst inputs = $form.find('input');\n\t\t\treturn inputs.each(function () {\n\t\t\t\tif (this.value !== '') {\n\t\t\t\t\tconsole.log(this.value);\n\t\t\t\t\treturn $(this).parents('.input-text').addClass('active');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\treturn { check, onClick, onBlur };\n})();\n\nexport const Button = (function () {\n\tlet time = undefined;\n\tconst loading = function (el) {\n\t\tconst next = el.attr('data-loading-text');\n\t\tconst html = el.find('span').html();\n\t\tel.addClass('-progress').attr('data-def-text', html).find('span').html(next);\n\t\ttime = setTimeout(() => el.addClass('going'), 1);\n\t\treturn time;\n\t};\n\tconst done = function (el) {\n\t\treturn el.addClass('done');\n\t};\n\tconst reset = function (el) {\n\t\tif (time) {\n\t\t\tclearTimeout(time);\n\t\t}\n\t\tconst $el = $(el);\n\t\tconst html = $el.attr('data-def-text');\n\t\tif (html) {\n\t\t\t$el.find('span').html(html);\n\t\t}\n\t\treturn $el.removeClass('-progress going done');\n\t};\n\treturn { done, loading, reset };\n})();\n","// http://stackoverflow.com/a/499158\n\n$.fn.setCursorPosition = function (pos) {\n\tthis.each((index, element) => {\n\t\tconst p = pos < 0 ? element.value.length - pos : pos;\n\t\tif (element.setSelectionRange) {\n\t\t\telement.setSelectionRange(p, p);\n\t\t} else if (element.createTextRange) {\n\t\t\tconst range = element.createTextRange();\n\t\t\trange.collapse(true);\n\t\t\trange.moveEnd('character', p);\n\t\t\trange.moveStart('character', p);\n\t\t\trange.select();\n\t\t}\n\t});\n\n\treturn this;\n};\n","import { t } from '../../../utils';\nimport { settings } from '../../../settings/client';\n\nexport const getPopoverStatusConfig = (currentTarget, actionCallback) => {\n\tconst items = [\n\t\t{\n\t\t\ticon: 'circle',\n\t\t\tname: t('Online'),\n\t\t\tmodifier: 'online',\n\t\t\taction: () => {\n\t\t\t\ttypeof actionCallback === 'function' && actionCallback('online');\n\t\t\t\t$('input[name=statusType]').val('online');\n\t\t\t\t$(currentTarget).prop('class', 'rc-input__icon js-status-type edit-status-type-icon--online');\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ticon: 'circle',\n\t\t\tname: t('Away'),\n\t\t\tmodifier: 'away',\n\t\t\taction: () => {\n\t\t\t\ttypeof actionCallback === 'function' && actionCallback('away');\n\t\t\t\t$('input[name=statusType]').val('away');\n\t\t\t\t$(currentTarget).prop('class', 'rc-input__icon js-status-type edit-status-type-icon--away');\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ticon: 'circle',\n\t\t\tname: t('Busy'),\n\t\t\tmodifier: 'busy',\n\t\t\taction: () => {\n\t\t\t\ttypeof actionCallback === 'function' && actionCallback('busy');\n\t\t\t\t$('input[name=statusType]').val('busy');\n\t\t\t\t$(currentTarget).prop('class', 'rc-input__icon js-status-type edit-status-type-icon--busy');\n\t\t\t},\n\t\t},\n\t];\n\n\tif (settings.get('Accounts_AllowInvisibleStatusOption')) {\n\t\titems.push({\n\t\t\ticon: 'circle',\n\t\t\tname: t('Invisible'),\n\t\t\tmodifier: 'offline',\n\t\t\taction: () => {\n\t\t\t\ttypeof actionCallback === 'function' && actionCallback('offline');\n\t\t\t\t$('input[name=statusType]').val('offline');\n\t\t\t\t$(currentTarget).prop('class', 'rc-input__icon js-status-type edit-status-type-icon--offline');\n\t\t\t},\n\t\t});\n\t}\n\n\treturn {\n\t\tpopoverClass: 'edit-status-type',\n\t\tcolumns: [\n\t\t\t{\n\t\t\t\tgroups: [\n\t\t\t\t\t{\n\t\t\t\t\t\titems,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t\tcurrentTarget,\n\t\toffsetVertical: currentTarget.clientHeight,\n\t};\n};\n","import { Template } from 'meteor/templating';\n\nimport { fireGlobalEvent } from '../../../../../client/lib/utils/fireGlobalEvent';\n\nimport './header.html';\n\nTemplate.header.helpers({\n\tback() {\n\t\treturn Template.instance().data.back;\n\t},\n\tbuttons() {\n\t\tconsole.log('asdasd');\n\t},\n});\n\nTemplate.header.events({\n\t'click .iframe-toolbar .js-iframe-action'(e) {\n\t\tfireGlobalEvent('click-toolbar-button', { id: this.id });\n\t\te.currentTarget.querySelector('button').blur();\n\t\treturn false;\n\t},\n});\n","import { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Template } from 'meteor/templating';\n\nimport { baseURI } from '../../../../client/lib/baseURI';\n\nimport './icon.html';\n\nconst baseUrlFix = () => `${baseURI}${FlowRouter.current().path.substring(1)}`;\n\nconst isMozillaFirefoxBelowVersion = (upperVersion) => {\n\tconst [, version] = navigator.userAgent.match(/Firefox\\/(\\d+)\\.\\d/) || [];\n\treturn parseInt(version, 10) < upperVersion;\n};\n\nconst isGoogleChromeBelowVersion = (upperVersion) => {\n\tconst [, version] = navigator.userAgent.match(/Chrome\\/(\\d+)\\.\\d/) || [];\n\treturn parseInt(version, 10) < upperVersion;\n};\n\nconst isBaseUrlFixNeeded = () => isMozillaFirefoxBelowVersion(55) || isGoogleChromeBelowVersion(55);\n\nTemplate.icon.helpers({\n\tbaseUrl: isBaseUrlFixNeeded() ? baseUrlFix : undefined,\n});\n","import { Template } from 'meteor/templating';\n\nimport { settings } from '../../../settings';\n\nTemplate.popupList.helpers({\n\tconfig() {\n\t\treturn {\n\t\t\ttemplate: this.data.template_list || 'popupList_default',\n\t\t\tdata: {\n\t\t\t\tready: this.ready,\n\t\t\t\tloading: this.ready !== undefined && !this.ready,\n\t\t\t\tnoMatchTemplate: this.data.noMatchTemplate,\n\t\t\t\ttemplate_item: this.data.template_item || 'popupList_item_default',\n\t\t\t\titems: this.items,\n\t\t\t\tonClick: this.data.onClick || function () {},\n\t\t\t\tmodifier:\n\t\t\t\t\tthis.data.modifier ||\n\t\t\t\t\tfunction (text) {\n\t\t\t\t\t\treturn text;\n\t\t\t\t\t},\n\t\t\t},\n\t\t};\n\t},\n\topen() {\n\t\tconst instance = Template.instance();\n\t\treturn instance.data.items.length > 0;\n\t},\n});\n\nTemplate.popupList_default.helpers({\n\tconfig(item) {\n\t\treturn {\n\t\t\ttemplate: this.template_item || 'popupList_item_default',\n\t\t\tdata: {\n\t\t\t\titem,\n\t\t\t\tonClick: this.onClick,\n\t\t\t\tmodifier: this.modifier,\n\t\t\t},\n\t\t};\n\t},\n});\n\nTemplate.popupList_item_default.helpers({\n\tshowRealNames() {\n\t\treturn settings.get('UI_Use_Real_Name');\n\t},\n});\n","import { Template } from 'meteor/templating';\nimport _ from 'underscore';\n\nTemplate.table.onRendered(function () {\n\tconst dummyTr = '<tr class=\"table-tr-dummy\"></tr>';\n\tthis.$('tbody').prepend(dummyTr).append(dummyTr);\n\n\tthis.onResize = this.data.onResize;\n\tif (this.onResize) {\n\t\tthis.onResize();\n\t\t$(window).on('resize', this.onResize);\n\t}\n});\n\nTemplate.table.onDestroyed(function () {\n\t$(window).on('off', this.onResize);\n});\n\nTemplate.table.events({\n\t'click tbody tr:not(.table-no-click)'(e, t) {\n\t\tt.data.onItemClick && t.data.onItemClick(this);\n\t},\n\t'scroll .table-scroll': _.debounce((e, t) => t.data.onScroll && t.data.onScroll(e.currentTarget), 300),\n\t'click .js-sort'(e, t) {\n\t\tt.data.onSort(e.currentTarget.dataset.sort);\n\t},\n});\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nimport './tabs.html';\n\nTemplate.tabs.onCreated(function () {\n\tthis.activeTab = new ReactiveVar(this.data.tabs.tabs.find((tab) => tab.active).value);\n});\n\nTemplate.tabs.events({\n\t'click .tab'(event, instance) {\n\t\tconst { value } = event.currentTarget.dataset;\n\t\tif (value === instance.activeTab.get()) {\n\t\t\treturn;\n\t\t}\n\t\tinstance.activeTab.set(value);\n\t\tinstance.data.tabs.onChange(value);\n\t},\n});\n\nTemplate.tabs.helpers({\n\ttabs() {\n\t\treturn Template.instance().data.tabs.tabs.filter((tab) => (tab.condition ? tab.condition() : tab));\n\t},\n\tisActive(value) {\n\t\treturn Template.instance().activeTab.get() === value;\n\t},\n\tariaSelected(value) {\n\t\treturn Template.instance().activeTab.get() === value ? { 'aria-selected': 'true' } : {};\n\t},\n});\n","import { Template } from 'meteor/templating';\nimport { Blaze } from 'meteor/blaze';\n\nimport './tooltip.html';\nimport './tooltip.css';\n\nlet initiated = false;\n\nconst init = () => {\n\tif (initiated) {\n\t\treturn;\n\t}\n\tinitiated = true;\n\n\tBlaze.render(Template.tooltip, document.body);\n};\n\nlet source = null;\nlet opened = false;\nlet timeout = null;\n\nconst placeTip = () => {\n\tconst arrowSize = 6;\n\tconst sourceWidth = $(source).outerWidth();\n\tconst sourceHeight = $(source).outerHeight();\n\tlet { left, top } = $(source).offset();\n\n\tconst tip = $('.tooltip');\n\tconst tipWidth = tip.outerWidth();\n\tconst tipHeight = tip.outerHeight();\n\n\tleft = left + sourceWidth / 2 - tipWidth / 2;\n\n\t$('.tooltip-arrow', tip).css({\n\t\t'margin-left': left < 0 ? `${left - arrowSize}px` : '',\n\t});\n\n\tif (left < 0) {\n\t\tleft = 0;\n\t}\n\n\ttop = top - tipHeight - arrowSize;\n\n\ttip.toggleClass('below', top < 0);\n\n\tif (top < 0) {\n\t\ttop = top + sourceHeight + arrowSize;\n\t}\n\n\treturn tip.css({\n\t\tleft: `${left}px`,\n\t\ttop: `${top}px`,\n\t});\n};\n\nconst showElement = (element, sourceElement) => {\n\tif (opened) {\n\t\treturn;\n\t}\n\n\tif (timeout) {\n\t\tclearTimeout(timeout);\n\t}\n\n\tconst elementClone = $(element).clone();\n\n\ttimeout = setTimeout(() => {\n\t\ttimeout = null;\n\t\tsource = sourceElement;\n\n\t\t$('.tooltip .content').empty().append(elementClone.show());\n\t\tplaceTip().addClass('show');\n\n\t\topened = true;\n\t}, 300);\n};\n\nconst hide = () => {\n\tif (timeout) {\n\t\tclearTimeout(timeout);\n\t}\n\n\tif (opened) {\n\t\t$('.tooltip').removeClass('show');\n\t\t$('.tooltip .content').empty();\n\t\topened = false;\n\t}\n};\n\nexport const tooltip = {\n\tinit,\n\tshowElement,\n\thide,\n};\n","import Clipboard from 'clipboard';\nimport { Meteor } from 'meteor/meteor';\nimport { Random } from 'meteor/random';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { popover, MessageAction } from '../../../../../ui-utils/client';\nimport { addMessageToList } from '../../../../../ui-utils/client/lib/MessageAction';\nimport { callWithErrorHandling } from '../../../../../../client/lib/utils/callWithErrorHandling';\nimport { isURL } from '../../../../../utils/lib/isURL';\nimport { openUserCard } from '../../../lib/UserCard';\nimport { messageArgs } from '../../../../../ui-utils/client/lib/messageArgs';\nimport { ChatMessage, Rooms, Messages } from '../../../../../models';\nimport { t } from '../../../../../utils/client';\nimport { chatMessages } from '../room';\nimport { EmojiEvents } from '../../../../../reactions/client/init';\nimport { goToRoomById } from '../../../../../../client/lib/utils/goToRoomById';\nimport { fireGlobalEvent } from '../../../../../../client/lib/utils/fireGlobalEvent';\nimport { isLayoutEmbedded } from '../../../../../../client/lib/utils/isLayoutEmbedded';\nimport { onClientBeforeSendMessage } from '../../../../../../client/lib/onClientBeforeSendMessage';\n\nconst mountPopover = (e, i, outerContext) => {\n\tlet context = $(e.target).parents('.message').data('context');\n\tif (!context) {\n\t\tcontext = 'message';\n\t}\n\n\tconst messageContext = messageArgs(outerContext);\n\n\tlet menuItems = MessageAction.getButtons(messageContext, context, 'menu').map((item) => ({\n\t\ticon: item.icon,\n\t\tname: t(item.label),\n\t\ttype: 'message-action',\n\t\tid: item.id,\n\t\tmodifier: item.color,\n\t}));\n\n\tif (window.matchMedia('(max-width: 500px)').matches) {\n\t\tconst messageItems = MessageAction.getButtons(messageContext, context, 'message').map((item) => ({\n\t\t\ticon: item.icon,\n\t\t\tname: t(item.label),\n\t\t\ttype: 'message-action',\n\t\t\tid: item.id,\n\t\t\tmodifier: item.color,\n\t\t}));\n\n\t\tmenuItems = menuItems.concat(messageItems);\n\t}\n\n\tconst [items, deleteItem] = menuItems.reduce(\n\t\t(result, value) => {\n\t\t\tresult[value.id === 'delete-message' ? 1 : 0].push(value);\n\t\t\treturn result;\n\t\t},\n\t\t[[], []],\n\t);\n\tconst groups = [{ items }];\n\n\tif (deleteItem.length) {\n\t\tgroups.push({ items: deleteItem });\n\t}\n\n\tconst config = {\n\t\tcolumns: [\n\t\t\t{\n\t\t\t\tgroups,\n\t\t\t},\n\t\t],\n\t\tinstance: i,\n\t\tcurrentTarget: e.currentTarget,\n\t\tdata: outerContext,\n\t\tactiveElement: $(e.currentTarget).parents('.message')[0],\n\t\tonRendered: () => new Clipboard('.rc-popover__item'),\n\t};\n\n\tpopover.open(config);\n};\n\nexport const getCommonRoomEvents = () => ({\n\t...(() => {\n\t\tlet touchMoved = false;\n\t\tlet lastTouchX = null;\n\t\tlet lastTouchY = null;\n\n\t\tlet touchtime = null;\n\t\treturn {\n\t\t\t...EmojiEvents,\n\t\t\t'click .message img'(e) {\n\t\t\t\tclearTimeout(touchtime);\n\t\t\t\tif (touchMoved === true) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t'touchstart .message'(e) {\n\t\t\t\tconst { touches } = e.originalEvent;\n\t\t\t\tif (touches && touches.length) {\n\t\t\t\t\tlastTouchX = touches[0].pageX;\n\t\t\t\t\tlastTouchY = touches[0].pagey;\n\t\t\t\t}\n\t\t\t\ttouchMoved = false;\n\t\t\t\tif (e.originalEvent.touches.length !== 1) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ($(e.currentTarget).hasClass('system')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (e.target && e.target.nodeName === 'AUDIO') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (e.target && e.target.nodeName === 'A' && isURL(e.target.getAttribute('href'))) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tconst doLongTouch = () => {\n\t\t\t\t\tmountPopover(e, t, this);\n\t\t\t\t};\n\n\t\t\t\tclearTimeout(touchtime);\n\t\t\t\ttouchtime = setTimeout(doLongTouch, 500);\n\t\t\t},\n\n\t\t\t'touchend .message'(e) {\n\t\t\t\tclearTimeout(touchtime);\n\t\t\t\tif (e.target && e.target.nodeName === 'A' && isURL(e.target.getAttribute('href'))) {\n\t\t\t\t\tif (touchMoved === true) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\twindow.open(e.target.href);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t'touchmove .message'(e) {\n\t\t\t\tconst { touches } = e.originalEvent;\n\t\t\t\tif (touches && touches.length) {\n\t\t\t\t\tconst deltaX = Math.abs(lastTouchX - touches[0].pageX);\n\t\t\t\t\tconst deltaY = Math.abs(lastTouchY - touches[0].pageY);\n\t\t\t\t\tif (deltaX > 5 || deltaY > 5) {\n\t\t\t\t\t\ttouchMoved = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tclearTimeout(touchtime);\n\t\t\t},\n\n\t\t\t'touchcancel .message'() {\n\t\t\t\tclearTimeout(touchtime);\n\t\t\t},\n\t\t};\n\t})(),\n\t'click [data-message-action]'(event, template) {\n\t\tconst button = MessageAction.getButtonById(event.currentTarget.dataset.messageAction);\n\t\tif ((button != null ? button.action : undefined) != null) {\n\t\t\tbutton.action.call(this, event, { tabBar: template.tabBar, rid: template.data.rid });\n\t\t}\n\t},\n\t'click .js-follow-thread'(e) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tconst { msg } = messageArgs(this);\n\t\tcallWithErrorHandling('followMessage', { mid: msg._id });\n\t},\n\t'click .js-unfollow-thread'(e) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tconst { msg } = messageArgs(this);\n\t\tcallWithErrorHandling('unfollowMessage', { mid: msg._id });\n\t},\n\t'click .js-open-thread'(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconst {\n\t\t\tmsg: { rid, _id, tmid },\n\t\t} = messageArgs(this);\n\t\tconst room = Rooms.findOne({ _id: rid });\n\n\t\tFlowRouter.go(\n\t\t\tFlowRouter.getRouteName(),\n\t\t\t{\n\t\t\t\trid,\n\t\t\t\tname: room.name,\n\t\t\t\ttab: 'thread',\n\t\t\t\tcontext: tmid || _id,\n\t\t\t},\n\t\t\t{\n\t\t\t\tjump: tmid && tmid !== _id && _id && _id,\n\t\t\t},\n\t\t);\n\t},\n\n\t'click .image-to-download'(event) {\n\t\tconst { msg } = messageArgs(this);\n\t\tChatMessage.update({ '_id': msg._id, 'urls.url': $(event.currentTarget).data('url') }, { $set: { 'urls.$.downloadImages': true } });\n\t\tChatMessage.update(\n\t\t\t{ '_id': msg._id, 'attachments.image_url': $(event.currentTarget).data('url') },\n\t\t\t{ $set: { 'attachments.$.downloadImages': true } },\n\t\t);\n\t},\n\t'click .user-card-message'(e, instance) {\n\t\tconst { msg } = messageArgs(this);\n\t\tif (!Meteor.userId()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { username } = msg.u;\n\n\t\tif (username) {\n\t\t\topenUserCard({\n\t\t\t\tusername,\n\t\t\t\trid: instance.data.rid,\n\t\t\t\ttarget: e.currentTarget,\n\t\t\t\topen: (e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tinstance.data.tabBar.openUserInfo(username);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t},\n\t'click .js-actionButton-respondWithMessage'(event, instance) {\n\t\tconst { rid } = instance.data;\n\t\tconst msg = event.currentTarget.value;\n\t\tif (!msg) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { input } = chatMessages[rid];\n\t\tinput.value = msg;\n\t\tinput.focus();\n\t},\n\tasync 'click .js-actionButton-respondWithQuotedMessage'(event, instance) {\n\t\tconst { rid } = instance.data;\n\t\tconst { id: msgId } = event.currentTarget;\n\t\tconst { $input } = chatMessages[rid];\n\n\t\tif (!msgId) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst message = Messages.findOne({ _id: msgId });\n\n\t\tlet messages = $input.data('reply') || [];\n\t\tmessages = addMessageToList(messages, message);\n\n\t\t$input.focus().data('mention-user', false).data('reply', messages).trigger('dataChange');\n\t},\n\tasync 'click .js-actionButton-sendMessage'(event, instance) {\n\t\tconst { rid } = instance.data;\n\t\tconst msg = event.currentTarget.value;\n\t\tlet msgObject = { _id: Random.id(), rid, msg };\n\t\tif (!msg) {\n\t\t\treturn;\n\t\t}\n\n\t\tmsgObject = await onClientBeforeSendMessage(msgObject);\n\n\t\tconst _chatMessages = chatMessages[rid];\n\t\tif (_chatMessages && (await _chatMessages.processSlashCommand(msgObject))) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait callWithErrorHandling('sendMessage', msgObject);\n\t},\n\t'click .message-actions__menu'(e, template) {\n\t\tconst messageContext = messageArgs(this);\n\t\tconst { msg: message, context: ctx } = messageContext;\n\t\tconst context = ctx || message.context || message.actionContext || 'message';\n\n\t\tconst allItems = MessageAction.getButtons(messageContext, context, 'menu').map((item) => ({\n\t\t\ticon: item.icon,\n\t\t\tname: t(item.label),\n\t\t\ttype: 'message-action',\n\t\t\tid: item.id,\n\t\t\tmodifier: item.color,\n\t\t}));\n\n\t\tconst itemsBelowDivider = ['delete-message', 'report-message'];\n\t\tconst [items, alertsItem] = allItems.reduce(\n\t\t\t(result, value) => {\n\t\t\t\tresult[itemsBelowDivider.includes(value.id) ? 1 : 0].push(value);\n\t\t\t\treturn result;\n\t\t\t},\n\t\t\t[[], []],\n\t\t);\n\t\tconst groups = [{ items }];\n\n\t\tif (alertsItem.length) {\n\t\t\tgroups.push({ items: alertsItem });\n\t\t}\n\t\tconst config = {\n\t\t\tcolumns: [\n\t\t\t\t{\n\t\t\t\t\tgroups,\n\t\t\t\t},\n\t\t\t],\n\t\t\tinstance: template,\n\t\t\trid: template.data.rid,\n\t\t\tdata: this,\n\t\t\tcurrentTarget: e.currentTarget,\n\t\t\tactiveElement: $(e.currentTarget).parents('.message')[0],\n\t\t\tonRendered: () => new Clipboard('.rc-popover__item'),\n\t\t};\n\n\t\tpopover.open(config);\n\t},\n\t'click .mention-link'(e, instance) {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\n\t\tif (!Meteor.userId()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst {\n\t\t\tcurrentTarget: {\n\t\t\t\tdataset: { channel, group, username },\n\t\t\t},\n\t\t} = e;\n\n\t\tif (channel) {\n\t\t\tif (isLayoutEmbedded()) {\n\t\t\t\tfireGlobalEvent('click-mention-link', {\n\t\t\t\t\tpath: FlowRouter.path('channel', { name: channel }),\n\t\t\t\t\tchannel,\n\t\t\t\t});\n\t\t\t}\n\t\t\tgoToRoomById(channel);\n\t\t\treturn;\n\t\t}\n\n\t\tif (group) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (username) {\n\t\t\topenUserCard({\n\t\t\t\tusername,\n\t\t\t\trid: instance.data.rid,\n\t\t\t\ttarget: e.currentTarget,\n\t\t\t\topen: (e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tinstance.data.tabBar.openUserInfo(username);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\n\nimport { ChatSubscription } from '../../../../models/client';\nimport { menu } from '../../../../ui-utils/client';\nimport { isLayoutEmbedded } from '../../../../../client/lib/utils/isLayoutEmbedded';\nimport { getUserPreference } from '../../../../utils';\n\nTemplate.burger.helpers({\n\tunread() {\n\t\tconst userUnreadAlert = getUserPreference(Meteor.userId(), 'unreadAlert');\n\t\tconst [unreadCount, unreadAlert] = ChatSubscription.find(\n\t\t\t{\n\t\t\t\topen: true,\n\t\t\t\thideUnreadStatus: { $ne: true },\n\t\t\t\trid: { $ne: Session.get('openedRoom') },\n\t\t\t\tarchived: { $ne: true },\n\t\t\t},\n\t\t\t{\n\t\t\t\tfields: {\n\t\t\t\t\tunread: 1,\n\t\t\t\t\talert: 1,\n\t\t\t\t\tunreadAlert: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t)\n\t\t\t.fetch()\n\t\t\t.reduce(\n\t\t\t\t([unreadCount, unreadAlert], { alert, unread, unreadAlert: alertType }) => {\n\t\t\t\t\tif (alert || unread > 0) {\n\t\t\t\t\t\tunreadCount += unread;\n\t\t\t\t\t\tif (alert === true && alertType !== 'nothing') {\n\t\t\t\t\t\t\tif (alertType === 'all' || userUnreadAlert !== false) {\n\t\t\t\t\t\t\t\tunreadAlert = '•';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn [unreadCount, unreadAlert];\n\t\t\t\t},\n\t\t\t\t[0, false],\n\t\t\t);\n\n\t\tif (unreadCount > 0) {\n\t\t\treturn unreadCount > 99 ? '99+' : unreadCount;\n\t\t}\n\n\t\treturn unreadAlert || '';\n\t},\n\n\tisMenuOpen() {\n\t\tif (Session.equals('isMenuOpen', true)) {\n\t\t\treturn 'menu-opened';\n\t\t}\n\t},\n\n\tembeddedVersion() {\n\t\treturn isLayoutEmbedded();\n\t},\n});\n\nTemplate.burger.events({\n\t'click div.burger'() {\n\t\treturn menu.toggle();\n\t},\n});\n","import { Template } from 'meteor/templating';\n\nimport { settings } from '../../../../settings';\n\nTemplate.home.helpers({\n\ttitle() {\n\t\treturn settings.get('Layout_Home_Title');\n\t},\n\tbody() {\n\t\treturn settings.get('Layout_Home_Body');\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Blaze } from 'meteor/blaze';\nimport { Template } from 'meteor/templating';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\nimport type PhotoSwipe from 'photoswipe';\nimport type PhotoSwipeUiDefault from 'photoswipe/dist/photoswipe-ui-default';\n\nconst parseLength = (x: unknown): number | undefined => {\n\tconst length = typeof x === 'string' ? parseInt(x, 10) : undefined;\n\treturn Number.isFinite(length) ? length : undefined;\n};\n\nconst getImageSize = (src: string): Promise<[w: number, h: number]> =>\n\tnew Promise((resolve, reject) => {\n\t\tconst img = new Image();\n\n\t\timg.addEventListener('load', () => {\n\t\t\tresolve([img.naturalWidth, img.naturalHeight]);\n\t\t});\n\n\t\timg.addEventListener('error', (error) => {\n\t\t\treject(error.error);\n\t\t});\n\n\t\timg.src = src;\n\t});\n\ntype Slide = PhotoSwipeUiDefault.Item & { description?: string };\n\nconst fromElementToSlide = async (element: Element): Promise<Slide | null> => {\n\tif (!(element instanceof HTMLElement)) {\n\t\treturn null;\n\t}\n\n\tconst title = element.dataset.title || element.title;\n\tconst { description } = element.dataset;\n\n\tif (element instanceof HTMLAnchorElement) {\n\t\tconst src = element.dataset.src || element.href;\n\t\tlet w = parseLength(element.dataset.width);\n\t\tlet h = parseLength(element.dataset.height);\n\n\t\tif (w === undefined || h === undefined) {\n\t\t\t[w, h] = await getImageSize(src);\n\t\t}\n\n\t\treturn { src, w, h, title, description };\n\t}\n\n\tif (element instanceof HTMLImageElement) {\n\t\tlet msrc: string | undefined;\n\t\tlet { src } = element;\n\t\tlet w: number | undefined = element.naturalWidth;\n\t\tlet h: number | undefined = element.naturalHeight;\n\n\t\tif (element.dataset.src) {\n\t\t\tmsrc = element.src;\n\t\t\tsrc = element.dataset.src;\n\t\t\tw = parseLength(element.dataset.width);\n\t\t\th = parseLength(element.dataset.height);\n\n\t\t\tif (w === undefined || h === undefined) {\n\t\t\t\t[w, h] = await getImageSize(src);\n\t\t\t}\n\t\t}\n\n\t\treturn { msrc, src, w, h, title, description };\n\t}\n\n\treturn null;\n};\n\nlet currentGallery: PhotoSwipe<PhotoSwipeUiDefault.Options> | null = null;\n\nconst initGallery = async (items: Slide[], options: PhotoSwipeUiDefault.Options): Promise<void> => {\n\tconst [\n\t\t{ default: PhotoSwipe },\n\t\t{ default: PhotoSwipeUiDefault }, // eslint-disable-line @typescript-eslint/camelcase\n\t] = await Promise.all([\n\t\timport('photoswipe'),\n\t\timport('photoswipe/dist/photoswipe-ui-default'),\n\t\t// @ts-ignore\n\t\timport('photoswipe/dist/photoswipe.css'),\n\t\t// @ts-ignore\n\t\timport('./photoswipeContent.html'),\n\t]);\n\n\tBlaze.render(Template.photoswipeContent, document.body);\n\n\tif (!currentGallery) {\n\t\tconst container = document.getElementById('pswp');\n\n\t\tif (!container) {\n\t\t\tthrow new Error('Photoswipe container element not found');\n\t\t}\n\n\t\tcurrentGallery = new PhotoSwipe(container, PhotoSwipeUiDefault, items, options);\n\n\t\tcurrentGallery.listen('destroy', () => {\n\t\t\tcurrentGallery = null;\n\t\t});\n\n\t\tcurrentGallery.init();\n\t}\n};\n\nconst defaultGalleryOptions: PhotoSwipeUiDefault.Options = {\n\tbgOpacity: 0.7,\n\tshowHideOpacity: true,\n\tcounterEl: false,\n\tshareEl: false,\n\tclickToCloseNonZoomable: false,\n\tindex: 0,\n\taddCaptionHTMLFn(item: Slide, captionEl: HTMLElement): boolean {\n\t\tcaptionEl.children[0].innerHTML = `\n\t\t\t${escapeHTML(item.title ?? '')}<br/>\n\t\t\t<small>${escapeHTML(item.description ?? '')}</small>\n\t\t`;\n\t\treturn true;\n\t},\n};\n\nconst createEventListenerFor =\n\t(className: string) =>\n\t(event: JQuery.ClickEvent): void => {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconst { currentTarget } = event;\n\n\t\tArray.from(document.querySelectorAll(className))\n\t\t\t.sort((a, b) => {\n\t\t\t\tif (a === currentTarget) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\n\t\t\t\tif (b === currentTarget) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\n\t\t\t\treturn 0;\n\t\t\t})\n\t\t\t.map((element) => fromElementToSlide(element))\n\t\t\t.reduce(\n\t\t\t\t(p, curr) =>\n\t\t\t\t\tp\n\t\t\t\t\t\t.then(() => curr)\n\t\t\t\t\t\t.then(async (slide) => {\n\t\t\t\t\t\t\tif (!slide) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!currentGallery) {\n\t\t\t\t\t\t\t\treturn initGallery([slide], defaultGalleryOptions);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcurrentGallery.items.push(slide);\n\t\t\t\t\t\t\tcurrentGallery.invalidateCurrItems();\n\t\t\t\t\t\t\tcurrentGallery.updateSize(true);\n\t\t\t\t\t\t}),\n\t\t\t\tPromise.resolve(),\n\t\t\t);\n\t};\n\nMeteor.startup(() => {\n\t$(document).on('click', '.gallery-item', createEventListenerFor('.gallery-item'));\n});\n","import _ from 'underscore';\nimport moment from 'moment';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { ReactiveDict } from 'meteor/reactive-dict';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Random } from 'meteor/random';\nimport { Blaze } from 'meteor/blaze';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\n\nimport { t, roomTypes, getUserPreference } from '../../../../utils/client';\nimport { WebRTC } from '../../../../webrtc/client';\nimport { ChatMessage, RoomRoles, Users, Subscriptions, Rooms } from '../../../../models';\nimport { RoomHistoryManager, RoomManager, readMessage } from '../../../../ui-utils/client';\nimport { messageContext } from '../../../../ui-utils/client/lib/messageContext';\nimport { messageArgs } from '../../../../ui-utils/client/lib/messageArgs';\nimport { settings } from '../../../../settings/client';\nimport { callbacks } from '../../../../../lib/callbacks';\nimport { hasAllPermission, hasRole } from '../../../../authorization/client';\nimport { ChatMessages } from '../../lib/chatMessages';\nimport { fileUpload } from '../../lib/fileUpload';\nimport './room.html';\nimport { getCommonRoomEvents } from './lib/getCommonRoomEvents';\nimport { RoomManager as NewRoomManager } from '../../../../../client/lib/RoomManager';\nimport { isLayoutEmbedded } from '../../../../../client/lib/utils/isLayoutEmbedded';\nimport { handleError } from '../../../../../client/lib/utils/handleError';\n\nexport const chatMessages = {};\n\nconst userCanDrop = (_id) => !roomTypes.readOnly(_id, Users.findOne({ _id: Meteor.userId() }, { fields: { username: 1 } }));\n\nconst wipeFailedUploads = () => {\n\tconst uploads = Session.get('uploading');\n\n\tif (uploads) {\n\t\tSession.set(\n\t\t\t'uploading',\n\t\t\tuploads.filter((upload) => !upload.error),\n\t\t);\n\t}\n};\n\nfunction roomHasGlobalPurge(room) {\n\tif (!settings.get('RetentionPolicy_Enabled')) {\n\t\treturn false;\n\t}\n\n\tswitch (room.t) {\n\t\tcase 'c':\n\t\t\treturn settings.get('RetentionPolicy_AppliesToChannels');\n\t\tcase 'p':\n\t\t\treturn settings.get('RetentionPolicy_AppliesToGroups');\n\t\tcase 'd':\n\t\t\treturn settings.get('RetentionPolicy_AppliesToDMs');\n\t}\n\treturn false;\n}\n\nfunction roomHasPurge(room) {\n\tif (!room || !settings.get('RetentionPolicy_Enabled')) {\n\t\treturn false;\n\t}\n\n\tif (room.retention && room.retention.enabled !== undefined) {\n\t\treturn room.retention.enabled;\n\t}\n\n\treturn roomHasGlobalPurge(room);\n}\n\nfunction roomFilesOnly(room) {\n\tif (!room) {\n\t\treturn false;\n\t}\n\n\tif (room.retention && room.retention.overrideGlobal) {\n\t\treturn room.retention.filesOnly;\n\t}\n\n\treturn settings.get('RetentionPolicy_FilesOnly');\n}\n\nfunction roomExcludePinned(room) {\n\tif (!room) {\n\t\treturn false;\n\t}\n\n\tif (room.retention && room.retention.overrideGlobal) {\n\t\treturn room.retention.excludePinned;\n\t}\n\n\treturn settings.get('RetentionPolicy_DoNotPrunePinned');\n}\n\nfunction roomMaxAge(room) {\n\tif (!room) {\n\t\treturn;\n\t}\n\tif (!roomHasPurge(room)) {\n\t\treturn;\n\t}\n\n\tif (room.retention && room.retention.overrideGlobal) {\n\t\treturn room.retention.maxAge;\n\t}\n\n\tif (room.t === 'c') {\n\t\treturn settings.get('RetentionPolicy_MaxAge_Channels');\n\t}\n\tif (room.t === 'p') {\n\t\treturn settings.get('RetentionPolicy_MaxAge_Groups');\n\t}\n\tif (room.t === 'd') {\n\t\treturn settings.get('RetentionPolicy_MaxAge_DMs');\n\t}\n}\n\nasync function createFileFromUrl(url) {\n\tlet response;\n\ttry {\n\t\tresponse = await fetch(url);\n\t} catch (error) {\n\t\tthrow error;\n\t}\n\n\tconst data = await response.blob();\n\tconst metadata = {\n\t\ttype: data.type,\n\t};\n\tconst { mime } = await import('../../../../utils/lib/mimeTypes');\n\tconst file = new File(\n\t\t[data],\n\t\t`File - ${moment().format(settings.get('Message_TimeAndDateFormat'))}.${mime.extension(data.type)}`,\n\t\tmetadata,\n\t);\n\treturn file;\n}\n\nfunction addToInput(text) {\n\tconst { input } = chatMessages[RoomManager.openedRoom];\n\tconst initText = input.value.slice(0, input.selectionStart);\n\tconst finalText = input.value.slice(input.selectionEnd, input.value.length);\n\n\tinput.value = initText + text + finalText;\n\t$(input).change().trigger('input');\n}\n\ncallbacks.add('enter-room', wipeFailedUploads);\n\nexport const dropzoneHelpers = {\n\tdragAndDrop() {\n\t\treturn settings.get('FileUpload_Enabled') && 'dropzone--disabled';\n\t},\n\n\tisDropzoneDisabled() {\n\t\treturn settings.get('FileUpload_Enabled') ? 'dropzone-overlay--enabled' : 'dropzone-overlay--disabled';\n\t},\n\n\tdragAndDropLabel() {\n\t\tif (!userCanDrop(this._id)) {\n\t\t\treturn 'error-not-allowed';\n\t\t}\n\t\tif (!settings.get('FileUpload_Enabled')) {\n\t\t\treturn 'FileUpload_Disabled';\n\t\t}\n\t\treturn 'Drop_to_upload_file';\n\t},\n};\n\nTemplate.roomOld.helpers({\n\t...dropzoneHelpers,\n\ttabBar() {\n\t\treturn Template.instance().tabBar;\n\t},\n\tsubscribed() {\n\t\tconst { state } = Template.instance();\n\t\treturn state.get('subscribed');\n\t},\n\tmessagesHistory() {\n\t\tconst showInMainThread = getUserPreference(Meteor.userId(), 'showMessageInMainThread', false);\n\t\tconst { rid } = Template.instance();\n\t\tconst room = Rooms.findOne(rid, { fields: { sysMes: 1 } });\n\t\tconst hideSettings = settings.collection.findOne('Hide_System_Messages') || {};\n\t\tconst settingValues = Array.isArray(room?.sysMes) ? room.sysMes : hideSettings.value || [];\n\t\tconst hideMessagesOfType = new Set(\n\t\t\tsettingValues.reduce((array, value) => [...array, ...(value === 'mute_unmute' ? ['user-muted', 'user-unmuted'] : [value])], []),\n\t\t);\n\t\tconst query = {\n\t\t\trid,\n\t\t\t_hidden: { $ne: true },\n\t\t\t...(!showInMainThread && {\n\t\t\t\t$or: [{ tmid: { $exists: 0 } }, { tshow: { $eq: true } }],\n\t\t\t}),\n\t\t};\n\n\t\tif (hideMessagesOfType.size) {\n\t\t\tquery.t = { $nin: Array.from(hideMessagesOfType.values()) };\n\t\t}\n\n\t\tconst options = {\n\t\t\tsort: {\n\t\t\t\tts: 1,\n\t\t\t},\n\t\t};\n\n\t\treturn ChatMessage.find(query, options);\n\t},\n\n\thasMore() {\n\t\treturn RoomHistoryManager.hasMore(this._id);\n\t},\n\n\thasMoreNext() {\n\t\treturn RoomHistoryManager.hasMoreNext(this._id);\n\t},\n\n\tisLoading() {\n\t\treturn RoomHistoryManager.isLoading(this._id);\n\t},\n\n\twindowId() {\n\t\treturn `chat-window-${this._id}`;\n\t},\n\n\tuploading() {\n\t\treturn Session.get('uploading');\n\t},\n\n\troomLeader() {\n\t\tconst roles = RoomRoles.findOne({\n\t\t\t'rid': this._id,\n\t\t\t'roles': 'leader',\n\t\t\t'u._id': { $ne: Meteor.userId() },\n\t\t});\n\t\tif (roles) {\n\t\t\tconst leader = Users.findOne({ _id: roles.u._id }, { fields: { status: 1, statusText: 1 } }) || {};\n\n\t\t\treturn {\n\t\t\t\t...roles.u,\n\t\t\t\tname: settings.get('UI_Use_Real_Name') ? roles.u.name || roles.u.username : roles.u.username,\n\t\t\t\tstatus: leader.status || 'offline',\n\t\t\t\tstatusDisplay: leader.statusText || t(leader.status || 'offline'),\n\t\t\t};\n\t\t}\n\t},\n\n\tchatNowLink() {\n\t\treturn roomTypes.getRouteLink('d', { name: this.username });\n\t},\n\n\tannouncement() {\n\t\treturn Template.instance().state.get('announcement');\n\t},\n\n\tannouncementDetails() {\n\t\tconst roomData = Session.get(`roomData${this._id}`);\n\t\tif (!roomData) {\n\t\t\treturn false;\n\t\t}\n\t\tif (roomData.announcementDetails != null && roomData.announcementDetails.callback != null) {\n\t\t\treturn () => callbacks.run(roomData.announcementDetails.callback, this._id);\n\t\t}\n\t},\n\n\tmessageboxData() {\n\t\tconst { sendToBottomIfNecessary, subscription } = Template.instance();\n\t\tconst { _id: rid } = this;\n\t\tconst isEmbedded = isLayoutEmbedded();\n\t\tconst showFormattingTips = settings.get('Message_ShowFormattingTips');\n\n\t\treturn {\n\t\t\trid,\n\t\t\tsubscription: subscription.get(),\n\t\t\tisEmbedded,\n\t\t\tshowFormattingTips: showFormattingTips && !isEmbedded,\n\t\t\tonInputChanged: (input) => {\n\t\t\t\tif (!chatMessages[rid]) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tchatMessages[rid].initializeInput(input, { rid });\n\t\t\t},\n\t\t\tonResize: () => sendToBottomIfNecessary && sendToBottomIfNecessary(),\n\t\t\tonKeyUp: (...args) => chatMessages[rid] && chatMessages[rid].keyup.apply(chatMessages[rid], args),\n\t\t\tonKeyDown: (...args) => chatMessages[rid] && chatMessages[rid].keydown.apply(chatMessages[rid], args),\n\t\t\tonSend: (...args) => chatMessages[rid] && chatMessages[rid].send.apply(chatMessages[rid], args),\n\t\t};\n\t},\n\n\tgetAnnouncementStyle() {\n\t\tconst { room } = Template.instance();\n\t\tif (!room) {\n\t\t\treturn '';\n\t\t}\n\t\treturn room.announcementDetails && room.announcementDetails.style !== undefined ? room.announcementDetails.style : '';\n\t},\n\n\tmaxMessageLength() {\n\t\treturn settings.get('Message_MaxAllowedSize');\n\t},\n\n\tunreadData() {\n\t\tconst data = { count: Template.instance().state.get('count') };\n\n\t\tconst room = RoomManager.getOpenedRoomByRid(this._id);\n\t\tif (room) {\n\t\t\tdata.since = room.unreadSince.get();\n\t\t}\n\n\t\treturn data;\n\t},\n\n\tcontainerBarsShow(unreadData, uploading) {\n\t\tconst hasUnreadData = unreadData && unreadData.count && unreadData.since;\n\t\tconst isUploading = uploading && uploading.length;\n\n\t\tif (hasUnreadData || isUploading) {\n\t\t\treturn 'show';\n\t\t}\n\t},\n\n\tformatUnreadSince() {\n\t\tif (!this.since) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn moment(this.since).calendar(null, { sameDay: 'LT' });\n\t},\n\tadminClass() {\n\t\tif (hasRole(Meteor.userId(), 'admin')) {\n\t\t\treturn 'admin';\n\t\t}\n\t},\n\n\tmessageViewMode() {\n\t\tconst viewMode = getUserPreference(Meteor.userId(), 'messageViewMode');\n\t\tconst modes = ['', 'cozy', 'compact'];\n\t\treturn modes[viewMode] || modes[0];\n\t},\n\n\tselectable() {\n\t\treturn Template.instance().selectable.get();\n\t},\n\n\thideUsername() {\n\t\treturn getUserPreference(Meteor.userId(), 'hideUsernames') ? 'hide-usernames' : undefined;\n\t},\n\n\thideAvatar() {\n\t\treturn getUserPreference(Meteor.userId(), 'displayAvatars') ? undefined : 'hide-avatars';\n\t},\n\tcanPreview() {\n\t\tconst { room, state } = Template.instance();\n\n\t\tif (room && room.t !== 'c') {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (settings.get('Accounts_AllowAnonymousRead') === true) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (hasAllPermission('preview-c-room')) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn state.get('subscribed');\n\t},\n\thideLeaderHeader() {\n\t\treturn Template.instance().hideLeaderHeader.get() ? 'animated-hidden' : '';\n\t},\n\thasLeader() {\n\t\tif (RoomRoles.findOne({ 'rid': this._id, 'roles': 'leader', 'u._id': { $ne: Meteor.userId() } }, { fields: { _id: 1 } })) {\n\t\t\treturn 'has-leader';\n\t\t}\n\t},\n\thasPurge() {\n\t\tconst { room } = Template.instance();\n\t\treturn roomHasPurge(room);\n\t},\n\tfilesOnly() {\n\t\tconst { room } = Template.instance();\n\t\treturn roomFilesOnly(room);\n\t},\n\texcludePinned() {\n\t\tconst { room } = Template.instance();\n\t\treturn roomExcludePinned(room);\n\t},\n\tpurgeTimeout() {\n\t\tconst { room } = Template.instance();\n\t\tmoment.relativeTimeThreshold('s', 60);\n\t\tmoment.relativeTimeThreshold('ss', 0);\n\t\tmoment.relativeTimeThreshold('m', 60);\n\t\tmoment.relativeTimeThreshold('h', 24);\n\t\tmoment.relativeTimeThreshold('d', 31);\n\t\tmoment.relativeTimeThreshold('M', 12);\n\n\t\treturn moment.duration(roomMaxAge(room) * 1000 * 60 * 60 * 24).humanize();\n\t},\n\tmessageContext,\n\topenedThread() {\n\t\tFlowRouter.watchPathChange();\n\t\tconst tab = FlowRouter.getParam('tab');\n\t\tconst mid = FlowRouter.getParam('context');\n\t\tconst rid = Template.currentData()._id;\n\t\tconst jump = FlowRouter.getQueryParam('jump');\n\t\tconst subscription = Template.instance().subscription.get();\n\n\t\tif (tab !== 'thread' || !mid || rid !== Session.get('openedRoom')) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst room = Rooms.findOne(\n\t\t\t{ _id: rid },\n\t\t\t{\n\t\t\t\tfields: {\n\t\t\t\t\tt: 1,\n\t\t\t\t\tusernames: 1,\n\t\t\t\t\tuids: 1,\n\t\t\t\t\tname: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\n\t\treturn {\n\t\t\trid,\n\t\t\tmid,\n\t\t\troom,\n\t\t\tjump,\n\t\t\tsubscription,\n\t\t};\n\t},\n});\n\nexport const dropzoneEvents = {\n\t'dragenter .dropzone'(e) {\n\t\tconst types = e.originalEvent && e.originalEvent.dataTransfer && e.originalEvent.dataTransfer.types;\n\n\t\tif (\n\t\t\ttypes != null &&\n\t\t\ttypes.length > 0 &&\n\t\t\t_.some(types, (type) => type.indexOf('text/') === -1 || type.indexOf('text/uri-list') !== -1 || type.indexOf('text/plain') !== -1) &&\n\t\t\tuserCanDrop(this._id)\n\t\t) {\n\t\t\te.currentTarget.classList.add('over');\n\t\t}\n\t\te.stopPropagation();\n\t},\n\n\t'dragleave .dropzone-overlay'(e) {\n\t\te.currentTarget.parentNode.classList.remove('over');\n\t\te.stopPropagation();\n\t},\n\n\t'dragover .dropzone-overlay'(e) {\n\t\tdocument.querySelectorAll('.over.dropzone').forEach((dropzone) => {\n\t\t\tif (dropzone !== e.currentTarget.parentNode) {\n\t\t\t\tdropzone.classList.remove('over');\n\t\t\t}\n\t\t});\n\t\te = e.originalEvent || e;\n\t\tif (['move', 'linkMove'].includes(e.dataTransfer.effectAllowed)) {\n\t\t\te.dataTransfer.dropEffect = 'move';\n\t\t} else {\n\t\t\te.dataTransfer.dropEffect = 'copy';\n\t\t}\n\t\te.stopPropagation();\n\t},\n\n\tasync 'dropped .dropzone-overlay'(event, instance) {\n\t\tevent.currentTarget.parentNode.classList.remove('over');\n\n\t\tconst e = event.originalEvent || event;\n\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\n\t\tif (!userCanDrop(this._id) || !settings.get('FileUpload_Enabled')) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet files = (e.dataTransfer && e.dataTransfer.files) || [];\n\n\t\tif (files.length < 1) {\n\t\t\tconst transferData = e.dataTransfer.getData('text') || e.dataTransfer.getData('url');\n\n\t\t\tif (e.dataTransfer.types.includes('text/uri-list')) {\n\t\t\t\tconst url = e.dataTransfer.getData('text/html').match('<img.+src=(?:\"|\\')(.+?)(?:\"|\\')(?:.+?)>');\n\t\t\t\tconst imgURL = url && url[1];\n\n\t\t\t\tif (!imgURL) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst file = await createFileFromUrl(imgURL);\n\t\t\t\tif (typeof file === 'string') {\n\t\t\t\t\treturn addToInput(file);\n\t\t\t\t}\n\t\t\t\tfiles = [file];\n\t\t\t}\n\t\t\tif (e.dataTransfer.types.includes('text/plain') && !e.dataTransfer.types.includes('text/x-moz-url')) {\n\t\t\t\treturn addToInput(transferData.trim());\n\t\t\t}\n\t\t}\n\t\tconst { mime } = await import('../../../../utils/lib/mimeTypes');\n\t\tconst filesToUpload = Array.from(files).map((file) => {\n\t\t\tObject.defineProperty(file, 'type', { value: mime.lookup(file.name) });\n\t\t\treturn {\n\t\t\t\tfile,\n\t\t\t\tname: file.name,\n\t\t\t};\n\t\t});\n\n\t\treturn instance.onFile && instance.onFile(filesToUpload);\n\t},\n};\nMeteor.startup(() => {\n\tTemplate.roomOld.events({\n\t\t...getCommonRoomEvents(),\n\t\t...dropzoneEvents,\n\t\t'click .toggle-hidden'(e) {\n\t\t\tconst id = e.currentTarget.dataset.message;\n\t\t\tdocument.querySelector(`#${id}`).classList.toggle('message--ignored');\n\t\t},\n\n\t\t'click .message'(e, template) {\n\t\t\tif (template.selectable.get()) {\n\t\t\t\t(document.selection != null ? document.selection.empty() : undefined) ||\n\t\t\t\t\t(typeof window.getSelection === 'function' ? window.getSelection().removeAllRanges() : undefined);\n\t\t\t\tconst data = Blaze.getData(e.currentTarget);\n\t\t\t\tconst {\n\t\t\t\t\tmsg: { _id },\n\t\t\t\t} = messageArgs(data);\n\n\t\t\t\tif (!template.selectablePointer) {\n\t\t\t\t\ttemplate.selectablePointer = _id;\n\t\t\t\t}\n\n\t\t\t\tif (!e.shiftKey) {\n\t\t\t\t\ttemplate.selectedMessages = template.getSelectedMessages();\n\t\t\t\t\ttemplate.selectedRange = [];\n\t\t\t\t\ttemplate.selectablePointer = _id;\n\t\t\t\t}\n\n\t\t\t\ttemplate.selectMessages(_id);\n\n\t\t\t\tconst selectedMessages = $('.messages-box .message.selected').map((i, message) => message.id);\n\t\t\t\tconst removeClass = _.difference(selectedMessages, template.getSelectedMessages());\n\t\t\t\tconst addClass = _.difference(template.getSelectedMessages(), selectedMessages);\n\t\t\t\tremoveClass.forEach((message) => $(`.messages-box #${message}`).removeClass('selected'));\n\t\t\t\taddClass.forEach((message) => $(`.messages-box #${message}`).addClass('selected'));\n\t\t\t}\n\t\t},\n\t\t'click .jump-recent button'(e, template) {\n\t\t\te.preventDefault();\n\t\t\ttemplate.atBottom = true;\n\t\t\tRoomHistoryManager.clear(template && template.data && template.data._id);\n\t\t},\n\t\t'load .gallery-item'(e, template) {\n\t\t\ttemplate.sendToBottomIfNecessary();\n\t\t},\n\n\t\t'rendered .js-block-wrapper'(e, template) {\n\t\t\ttemplate.sendToBottomIfNecessary();\n\t\t},\n\t\t'click .new-message'(event, instance) {\n\t\t\tinstance.atBottom = true;\n\t\t\tinstance.sendToBottomIfNecessary();\n\t\t\tchatMessages[RoomManager.openedRoom].input.focus();\n\t\t},\n\t\t'click .upload-progress-close'(e) {\n\t\t\te.preventDefault();\n\t\t\tSession.set(`uploading-cancel-${this.id}`, true);\n\t\t},\n\t\t'click .unread-bar > button.mark-read'(e, t) {\n\t\t\treadMessage.readNow(t.data._id);\n\t\t},\n\n\t\t'click .unread-bar > button.jump-to'(e, t) {\n\t\t\tconst { _id } = t.data;\n\t\t\tconst room = RoomHistoryManager.getRoom(_id);\n\t\t\tlet message = room && room.firstUnread.get();\n\t\t\tif (!message) {\n\t\t\t\tconst subscription = Subscriptions.findOne({ rid: _id });\n\t\t\t\tmessage = ChatMessage.find(\n\t\t\t\t\t{ rid: _id, ts: { $gt: subscription != null ? subscription.ls : undefined } },\n\t\t\t\t\t{ sort: { ts: 1 }, limit: 1 },\n\t\t\t\t).fetch()[0];\n\t\t\t}\n\t\t\tRoomHistoryManager.getSurroundingMessages(message, 50);\n\t\t},\n\t\t'scroll .wrapper': _.throttle(function (e, t) {\n\t\t\tconst $roomLeader = $('.room-leader');\n\t\t\tif ($roomLeader.length) {\n\t\t\t\tif (e.target.scrollTop < t.lastScrollTop) {\n\t\t\t\t\tt.hideLeaderHeader.set(false);\n\t\t\t\t} else if (t.isAtBottom(100) === false && e.target.scrollTop > $roomLeader.height()) {\n\t\t\t\t\tt.hideLeaderHeader.set(true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tt.lastScrollTop = e.target.scrollTop;\n\t\t\tconst height = e.target.clientHeight;\n\t\t\tconst isLoading = RoomHistoryManager.isLoading(this._id);\n\t\t\tconst hasMore = RoomHistoryManager.hasMore(this._id);\n\t\t\tconst hasMoreNext = RoomHistoryManager.hasMoreNext(this._id);\n\n\t\t\tif ((isLoading === false && hasMore === true) || hasMoreNext === true) {\n\t\t\t\tif (hasMore === true && t.lastScrollTop <= height / 3) {\n\t\t\t\t\tRoomHistoryManager.getMore(this._id);\n\t\t\t\t} else if (hasMoreNext === true && Math.ceil(t.lastScrollTop) >= e.target.scrollHeight - height) {\n\t\t\t\t\tRoomHistoryManager.getMoreNext(this._id);\n\t\t\t\t}\n\t\t\t}\n\t\t}, 100),\n\n\t\t'click .time a'(e) {\n\t\t\te.preventDefault();\n\t\t\tconst { msg } = messageArgs(this);\n\t\t\tconst repliedMessageId = msg.attachments[0].message_link.split('?msg=')[1];\n\t\t\tFlowRouter.go(FlowRouter.current().context.pathname, null, {\n\t\t\t\tmsg: repliedMessageId,\n\t\t\t\thash: Random.id(),\n\t\t\t});\n\t\t},\n\t});\n\n\tTemplate.roomOld.onCreated(function () {\n\t\t// this.scrollOnBottom = true\n\t\t// this.typing = new msgTyping this.data._id\n\t\tconst rid = this.data._id;\n\t\tthis.tabBar = this.data.tabBar;\n\n\t\tthis.onFile = (filesToUpload) => {\n\t\t\tfileUpload(filesToUpload, chatMessages[rid].input, { rid });\n\t\t};\n\n\t\tthis.rid = rid;\n\n\t\tthis.subscription = new ReactiveVar();\n\t\tthis.state = new ReactiveDict();\n\t\tthis.userDetail = new ReactiveVar('');\n\t\tconst user = Meteor.user();\n\t\tthis.autorun((c) => {\n\t\t\tconst room = Rooms.findOne(\n\t\t\t\t{ _id: rid },\n\t\t\t\t{\n\t\t\t\t\tfields: {\n\t\t\t\t\t\tt: 1,\n\t\t\t\t\t\tusernames: 1,\n\t\t\t\t\t\tuids: 1,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tif (room.t !== 'd') {\n\t\t\t\treturn c.stop();\n\t\t\t}\n\n\t\t\tif (roomTypes.getConfig(room.t).isGroupChat(room)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst usernames = Array.from(new Set(room.usernames));\n\t\t\tthis.userDetail.set(\n\t\t\t\tthis.userDetail.get() || (usernames.length === 1 ? usernames[0] : usernames.filter((username) => username !== user.username)[0]),\n\t\t\t);\n\t\t});\n\n\t\tthis.autorun(() => {\n\t\t\tconst rid = Template.currentData()._id;\n\t\t\tconst room = Rooms.findOne({ _id: rid }, { fields: { announcement: 1 } });\n\t\t\tthis.state.set('announcement', room.announcement);\n\t\t});\n\n\t\tthis.autorun(() => {\n\t\t\tconst subscription = Subscriptions.findOne({ rid });\n\t\t\tthis.subscription.set(subscription);\n\t\t\tthis.state.set({\n\t\t\t\tsubscribed: !!subscription,\n\t\t\t\tautoTranslate: subscription && subscription.autoTranslate,\n\t\t\t\tautoTranslateLanguage: subscription && subscription.autoTranslateLanguage,\n\t\t\t});\n\t\t});\n\n\t\tthis.showUsersOffline = new ReactiveVar(false);\n\t\tthis.atBottom = !FlowRouter.getQueryParam('msg');\n\t\tthis.unreadCount = new ReactiveVar(0);\n\n\t\tthis.selectable = new ReactiveVar(false);\n\t\tthis.selectedMessages = [];\n\t\tthis.selectedRange = [];\n\t\tthis.selectablePointer = null;\n\n\t\tthis.flexTemplate = new ReactiveVar();\n\n\t\tthis.groupDetail = new ReactiveVar();\n\n\t\tthis.hideLeaderHeader = new ReactiveVar(false);\n\n\t\tthis.resetSelection = (enabled) => {\n\t\t\tthis.selectable.set(enabled);\n\t\t\t$('.messages-box .message.selected').removeClass('selected');\n\t\t\tthis.selectedMessages = [];\n\t\t\tthis.selectedRange = [];\n\t\t\tthis.selectablePointer = null;\n\t\t};\n\n\t\tthis.selectMessages = (to) => {\n\t\t\tif (this.selectablePointer === to && this.selectedRange.length > 0) {\n\t\t\t\tthis.selectedRange = [];\n\t\t\t} else {\n\t\t\t\tconst message1 = ChatMessage.findOne(this.selectablePointer);\n\t\t\t\tconst message2 = ChatMessage.findOne(to);\n\n\t\t\t\tconst minTs = _.min([message1.ts, message2.ts]);\n\t\t\t\tconst maxTs = _.max([message1.ts, message2.ts]);\n\n\t\t\t\tthis.selectedRange = _.pluck(ChatMessage.find({ rid: message1.rid, ts: { $gte: minTs, $lte: maxTs } }).fetch(), '_id');\n\t\t\t}\n\t\t};\n\n\t\tthis.getSelectedMessages = () => {\n\t\t\tlet previewMessages;\n\t\t\tconst messages = this.selectedMessages;\n\t\t\tlet addMessages = false;\n\t\t\tfor (const message of Array.from(this.selectedRange)) {\n\t\t\t\tif (messages.indexOf(message) === -1) {\n\t\t\t\t\taddMessages = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (addMessages) {\n\t\t\t\tpreviewMessages = _.compact(_.uniq(this.selectedMessages.concat(this.selectedRange)));\n\t\t\t} else {\n\t\t\t\tpreviewMessages = _.compact(_.difference(this.selectedMessages, this.selectedRange));\n\t\t\t}\n\n\t\t\treturn previewMessages;\n\t\t};\n\n\t\tthis.clearUserDetail = () => {\n\t\t\tthis.userDetail.set(null);\n\t\t\tthis.tabBar.setData({});\n\t\t\tthis.tabBar.close();\n\t\t};\n\n\t\tMeteor.call('getRoomRoles', this.data._id, function (error, results) {\n\t\t\tif (error) {\n\t\t\t\thandleError(error);\n\t\t\t}\n\n\t\t\treturn Array.from(results).forEach((record) => {\n\t\t\t\tdelete record._id;\n\t\t\t\tRoomRoles.upsert({ 'rid': record.rid, 'u._id': record.u._id }, record);\n\t\t\t});\n\t\t});\n\n\t\tthis.rolesObserve = RoomRoles.find({ rid: this.data._id }).observe({\n\t\t\tadded: (role) => {\n\t\t\t\tif (!role.u || !role.u._id) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tChatMessage.update({ 'rid': this.data._id, 'u._id': role.u._id }, { $addToSet: { roles: role._id } }, { multi: true });\n\t\t\t}, // Update message to re-render DOM\n\t\t\tchanged: (role) => {\n\t\t\t\tif (!role.u || !role.u._id) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tChatMessage.update({ 'rid': this.data._id, 'u._id': role.u._id }, { $inc: { rerender: 1 } }, { multi: true });\n\t\t\t}, // Update message to re-render DOM\n\t\t\tremoved: (role) => {\n\t\t\t\tif (!role.u || !role.u._id) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tChatMessage.update({ 'rid': this.data._id, 'u._id': role.u._id }, { $pull: { roles: role._id } }, { multi: true });\n\t\t\t},\n\t\t});\n\n\t\tthis.sendToBottomIfNecessary = () => {\n\t\t\tif (this.atBottom === true) {\n\t\t\t\tthis.sendToBottom();\n\t\t\t}\n\t\t};\n\t}); // Update message to re-render DOM\n\n\tTemplate.roomOld.onDestroyed(function () {\n\t\tif (this.rolesObserve) {\n\t\t\tthis.rolesObserve.stop();\n\t\t}\n\n\t\treadMessage.off(this.data._id);\n\n\t\twindow.removeEventListener('resize', this.onWindowResize);\n\n\t\tthis.observer && this.observer.disconnect();\n\n\t\tconst chatMessage = chatMessages[this.data._id];\n\t\tchatMessage.onDestroyed && chatMessage.onDestroyed(this.data._id);\n\n\t\tcallbacks.remove('streamNewMessage', this.data._id);\n\t});\n\n\tconst isAtBottom = function (element, scrollThreshold = 0) {\n\t\treturn element.scrollTop + scrollThreshold >= element.scrollHeight - element.clientHeight;\n\t};\n\n\tTemplate.roomOld.onRendered(function () {\n\t\tconst { _id: rid } = this.data;\n\n\t\tif (!chatMessages[rid]) {\n\t\t\tchatMessages[rid] = new ChatMessages();\n\t\t}\n\n\t\tconst wrapper = this.find('.wrapper');\n\n\t\tconst store = NewRoomManager.getStore(rid);\n\n\t\tconst afterMessageGroup = () => {\n\t\t\tif (store.scroll && !store.atBottom) {\n\t\t\t\twrapper.scrollTop = store.scroll;\n\t\t\t} else {\n\t\t\t\tthis.sendToBottom();\n\t\t\t}\n\t\t\twrapper.removeEventListener('MessageGroup', afterMessageGroup);\n\n\t\t\twrapper.addEventListener(\n\t\t\t\t'scroll',\n\t\t\t\t_.throttle(() => {\n\t\t\t\t\tstore.update({ scroll: wrapper.scrollTop, atBottom: isAtBottom(wrapper, 50) });\n\t\t\t\t}, 30),\n\t\t\t);\n\t\t};\n\n\t\twrapper.addEventListener('MessageGroup', afterMessageGroup);\n\n\t\tchatMessages[rid].initializeWrapper(this.find('.wrapper'));\n\t\tchatMessages[rid].initializeInput(this.find('.js-input-message'), { rid });\n\n\t\tconst wrapperUl = this.find('.wrapper > ul');\n\t\tconst newMessage = this.find('.new-message');\n\n\t\tconst template = this;\n\n\t\tconst messageBox = $('.messages-box');\n\n\t\ttemplate.isAtBottom = function (scrollThreshold = 0) {\n\t\t\tif (isAtBottom(wrapper, scrollThreshold)) {\n\t\t\t\tnewMessage.className = 'new-message background-primary-action-color color-content-background-color not';\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\ttemplate.sendToBottom = function () {\n\t\t\twrapper.scrollTo(30, wrapper.scrollHeight);\n\t\t\tnewMessage.className = 'new-message background-primary-action-color color-content-background-color not';\n\t\t};\n\n\t\ttemplate.checkIfScrollIsAtBottom = function () {\n\t\t\ttemplate.atBottom = template.isAtBottom(100);\n\t\t};\n\n\t\ttemplate.observer = new ResizeObserver(() => template.sendToBottomIfNecessary());\n\n\t\ttemplate.observer.observe(wrapperUl);\n\n\t\tconst wheelHandler = _.throttle(function () {\n\t\t\ttemplate.checkIfScrollIsAtBottom();\n\t\t}, 100);\n\n\t\twrapper.addEventListener('mousewheel', wheelHandler);\n\n\t\twrapper.addEventListener('wheel', wheelHandler);\n\n\t\twrapper.addEventListener('touchstart', () => {\n\t\t\ttemplate.atBottom = false;\n\t\t});\n\n\t\twrapper.addEventListener('touchend', function () {\n\t\t\ttemplate.checkIfScrollIsAtBottom();\n\t\t\tsetTimeout(() => template.checkIfScrollIsAtBottom(), 1000);\n\t\t\tsetTimeout(() => template.checkIfScrollIsAtBottom(), 2000);\n\t\t});\n\n\t\tTracker.afterFlush(() => {\n\t\t\twrapper.addEventListener('scroll', wheelHandler);\n\t\t});\n\n\t\tthis.lastScrollTop = $('.messages-box .wrapper').scrollTop();\n\n\t\tconst rtl = $('html').hasClass('rtl');\n\n\t\tconst getElementFromPoint = function (topOffset = 0) {\n\t\t\tconst messageBoxOffset = messageBox.offset();\n\n\t\t\tlet element;\n\t\t\tif (rtl) {\n\t\t\t\telement = document.elementFromPoint(messageBoxOffset.left + messageBox.width() - 1, messageBoxOffset.top + topOffset + 1);\n\t\t\t} else {\n\t\t\t\telement = document.elementFromPoint(messageBoxOffset.left + 1, messageBoxOffset.top + topOffset + 1);\n\t\t\t}\n\n\t\t\tif (element && element.classList.contains('message')) {\n\t\t\t\treturn element;\n\t\t\t}\n\t\t};\n\n\t\tconst updateUnreadCount = _.throttle(() => {\n\t\t\tTracker.afterFlush(() => {\n\t\t\t\tconst lastInvisibleMessageOnScreen = getElementFromPoint(0) || getElementFromPoint(20) || getElementFromPoint(40);\n\n\t\t\t\tif (!lastInvisibleMessageOnScreen || !lastInvisibleMessageOnScreen.id) {\n\t\t\t\t\treturn this.unreadCount.set(0);\n\t\t\t\t}\n\n\t\t\t\tconst lastMessage = ChatMessage.findOne(lastInvisibleMessageOnScreen.id);\n\t\t\t\tif (!lastMessage) {\n\t\t\t\t\treturn this.unreadCount.set(0);\n\t\t\t\t}\n\n\t\t\t\tthis.state.set('lastMessage', lastMessage.ts);\n\t\t\t});\n\t\t}, 300);\n\n\t\tconst read = _.debounce(function () {\n\t\t\tif (rid !== Session.get('openedRoom')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treadMessage.read(rid);\n\t\t}, 500);\n\n\t\tthis.autorun(() => {\n\t\t\tif (rid !== Session.get('openedRoom')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet room = Rooms.findOne({ _id: rid }, { fields: { t: 1 } });\n\n\t\t\tif (room?.t === 'l') {\n\t\t\t\troom = Tracker.nonreactive(() => Rooms.findOne({ _id: rid }));\n\t\t\t\troomTypes.getConfig(room.t).openCustomProfileTab(this, room, room.v.username);\n\t\t\t}\n\t\t});\n\n\t\tthis.autorun(() => {\n\t\t\tif (\n\t\t\t\t!Object.values(roomTypes.roomTypes)\n\t\t\t\t\t.map(({ route }) => route && route.name)\n\t\t\t\t\t.filter(Boolean)\n\t\t\t\t\t.includes(FlowRouter.getRouteName())\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (rid !== Session.get('openedRoom')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst subscription = Subscriptions.findOne({ rid }, { fields: { alert: 1, unread: 1 } });\n\t\t\tread();\n\t\t\treturn subscription && (subscription.alert || subscription.unread) && readMessage.refreshUnreadMark(rid);\n\t\t});\n\n\t\tthis.autorun(() => {\n\t\t\tconst lastMessage = this.state.get('lastMessage');\n\n\t\t\tconst subscription = Subscriptions.findOne({ rid }, { fields: { ls: 1 } });\n\t\t\tif (!subscription) {\n\t\t\t\tthis.unreadCount.set(0);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst count = ChatMessage.find({\n\t\t\t\trid,\n\t\t\t\tts: { $lte: lastMessage, $gt: subscription && subscription.ls },\n\t\t\t}).count();\n\n\t\t\tthis.unreadCount.set(count);\n\t\t});\n\n\t\tthis.autorun(() => {\n\t\t\tconst count = RoomHistoryManager.getRoom(rid).unreadNotLoaded.get() + this.unreadCount.get();\n\t\t\tthis.state.set('count', count);\n\t\t});\n\n\t\tthis.autorun(() => {\n\t\t\tRooms.findOne(rid);\n\t\t\tconst count = this.state.get('count');\n\t\t\tif (count === 0) {\n\t\t\t\treturn read();\n\t\t\t}\n\t\t\treadMessage.refreshUnreadMark(rid);\n\t\t});\n\n\t\treadMessage.on(template.data._id, () => this.unreadCount.set(0));\n\n\t\twrapper.addEventListener('scroll', updateUnreadCount);\n\t\t// salva a data da renderização para exibir alertas de novas mensagens\n\t\t$.data(this.firstNode, 'renderedAt', new Date());\n\n\t\tconst webrtc = WebRTC.getInstanceByRoomId(template.data._id);\n\t\tif (webrtc) {\n\t\t\tthis.autorun(() => {\n\t\t\t\tconst remoteItems = webrtc.remoteItems.get();\n\t\t\t\tif ((remoteItems && remoteItems.length > 0) || webrtc.localUrl.get()) {\n\t\t\t\t\treturn this.tabBar.openUserInfo();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tcallbacks.add(\n\t\t\t'streamNewMessage',\n\t\t\t(msg) => {\n\t\t\t\tif (rid !== msg.rid || msg.editedAt || msg.tmid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (msg.u._id === Meteor.userId()) {\n\t\t\t\t\treturn template.sendToBottom();\n\t\t\t\t}\n\n\t\t\t\tif (!template.isAtBottom()) {\n\t\t\t\t\tnewMessage.classList.remove('not');\n\t\t\t\t}\n\t\t\t},\n\t\t\tcallbacks.priority.MEDIUM,\n\t\t\trid,\n\t\t);\n\n\t\tthis.autorun(function () {\n\t\t\tif (template.data._id !== RoomManager.openedRoom) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst room = Rooms.findOne({ _id: template.data._id });\n\t\t\tif (!room) {\n\t\t\t\treturn FlowRouter.go('home');\n\t\t\t}\n\t\t});\n\t});\n});\n\ncallbacks.add('enter-room', (sub) => {\n\tif (!sub) {\n\t\treturn;\n\t}\n\tconst isAReplyInDMFromChannel = FlowRouter.getQueryParam('reply') && sub.t === 'd';\n\tif (isAReplyInDMFromChannel && chatMessages[sub.rid]) {\n\t\tchatMessages[sub.rid].restoreReplies();\n\t}\n\tsetTimeout(() => readMessage.read(sub.rid), 1000);\n});\n","import { Template } from 'meteor/templating';\n\nimport { roomTypes } from '../../../../utils';\n\nTemplate.roomSearch.helpers({\n\troomIcon() {\n\t\tif (this.type === 'u') {\n\t\t\treturn 'icon-at';\n\t\t}\n\t\tif (this.type === 'r') {\n\t\t\treturn roomTypes.getIcon(this);\n\t\t}\n\t},\n\tuserStatus() {\n\t\tif (this.type === 'u') {\n\t\t\treturn `status-${this.status}`;\n\t\t}\n\t},\n});\n","import './lib/accounts';\nimport './lib/collections';\nimport './lib/iframeCommands';\nimport './lib/menu';\nimport './lib/parentTemplate';\nimport './lib/codeMirror';\nimport './lib/textarea-cursor';\nimport './views/app/burger.html';\nimport './views/app/home.html';\nimport './views/app/notAuthorized.html';\nimport './views/app/pageContainer.html';\nimport './views/app/pageCustomContainer.html';\nimport './views/app/roomSearch.html';\nimport './views/app/userSearch.html';\nimport './views/app/burger';\nimport './views/app/home';\nimport './views/app/roomSearch';\nimport './views/app/photoswipeContent.ts'; // without the *.ts extension, *.html gets loaded first\nimport './components/icon';\nimport './components/table.html';\nimport './components/table';\nimport './components/tabs';\nimport './components/popupList.html';\nimport './components/popupList';\nimport './components/selectDropdown.html';\n\nimport './components/header/header';\nimport './components/tooltip';\nimport './lib/Tooltip';\n\nexport { ChatMessages } from './lib/chatMessages';\nexport { fileUpload } from './lib/fileUpload';\nexport { UserAction, USER_ACTIVITIES } from './lib/UserAction';\nexport { KonchatNotification } from './lib/notification';\nexport { Login, Button } from './lib/rocket';\nexport { AudioRecorder } from './lib/recorderjs/audioRecorder';\nexport { VideoRecorder } from './lib/recorderjs/videoRecorder';\nexport { chatMessages } from './views/app/room';\nexport * from './lib/userPopoverStatus';\n","export * from './client/index';\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport { Template } from 'meteor/templating';\n\nimport { settings } from '../../../settings';\n\nTemplate.customFieldsForm.helpers({\n\tnew() {\n\t\treturn this.new;\n\t},\n\tcustomFields() {\n\t\tconst customFields = Template.instance().customFields.get();\n\n\t\tif (!customFields) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst customFieldsArray = [];\n\n\t\tObject.keys(customFields).forEach((key) => {\n\t\t\tconst value = customFields[key];\n\t\t\tif (value.hideFromForm === true && Template.instance().hideFromForm === true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcustomFieldsArray.push({\n\t\t\t\tfieldName: key,\n\t\t\t\tfield: value,\n\t\t\t});\n\t\t});\n\n\t\treturn customFieldsArray;\n\t},\n\tselectedField(current, field) {\n\t\tconst { formData } = Template.instance();\n\n\t\tif (typeof formData[field.fieldName] !== 'undefined') {\n\t\t\treturn formData[field.fieldName] === current;\n\t\t}\n\t\tif (typeof field.defaultValue !== 'undefined') {\n\t\t\treturn field.defaultValue === current;\n\t\t}\n\t},\n\tfieldValue() {\n\t\tconst { formData } = Template.instance();\n\n\t\treturn formData[this.fieldName];\n\t},\n});\n\nTemplate.customFieldsForm.onCreated(function () {\n\tthis.customFields = new ReactiveVar();\n\n\tconst currentData = Template.currentData();\n\tthis.hideFromForm = currentData && currentData.hideFromForm;\n\tthis.formData = (currentData && currentData.formData) || {};\n\n\tTracker.autorun(() => {\n\t\tconst Accounts_CustomFields = settings.get('Accounts_CustomFields');\n\t\tif (typeof Accounts_CustomFields === 'string' && Accounts_CustomFields.trim() !== '') {\n\t\t\ttry {\n\t\t\t\tthis.customFields.set(JSON.parse(settings.get('Accounts_CustomFields')));\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('Invalid JSON for Accounts_CustomFields');\n\t\t\t}\n\t\t} else {\n\t\t\tthis.customFields.set(undefined);\n\t\t}\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { settings } from '../../../settings';\n\nexport const LoginPresence = {\n\tawayTime: 600000, // 10 minutes\n\tstarted: false,\n\n\tstartTimer() {\n\t\tLoginPresence.stopTimer();\n\t\tif (!LoginPresence.awayTime) {\n\t\t\treturn;\n\t\t}\n\t\tthis.timer = setTimeout(LoginPresence.disconnect, LoginPresence.awayTime);\n\t},\n\tstopTimer() {\n\t\tclearTimeout(this.timer);\n\t},\n\tdisconnect() {\n\t\tconst status = Meteor.status();\n\t\tif (status && status.status !== 'offline') {\n\t\t\tif (!Meteor.userId() && settings.get('Accounts_AllowAnonymousRead') !== true) {\n\t\t\t\tMeteor.disconnect();\n\t\t\t}\n\t\t}\n\t\tLoginPresence.stopTimer();\n\t},\n\tconnect() {\n\t\tconst status = Meteor.status();\n\t\tif (status && status.status === 'offline') {\n\t\t\tMeteor.reconnect();\n\t\t}\n\t},\n\tstart() {\n\t\tif (LoginPresence.started) {\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('focus', () => {\n\t\t\tLoginPresence.stopTimer();\n\t\t\tLoginPresence.connect();\n\t\t});\n\n\t\twindow.addEventListener('blur', () => {\n\t\t\tLoginPresence.startTimer();\n\t\t});\n\n\t\tif (!window.document.hasFocus()) {\n\t\t\tLoginPresence.startTimer();\n\t\t}\n\n\t\tLoginPresence.started = true;\n\t},\n};\n\nLoginPresence.start();\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Session } from 'meteor/session';\n\nexport class RocketChatAnnouncement {\n\tconstructor(args = {}) {\n\t\tthis.room = new ReactiveVar(args.room);\n\t\tthis.message = new ReactiveVar(args.message);\n\t\tthis.callback = new ReactiveVar(args.callback);\n\t\tthis.style = new ReactiveVar(args.style);\n\t}\n\n\tsave() {\n\t\tconst announcementObject = {\n\t\t\tmessage: this.message.get(),\n\t\t\tcallback: this.callback.get(),\n\t\t\tstyle: this.style.get(),\n\t\t};\n\t\tMeteor.call('saveRoomSettings', this.room.get(), 'roomAnnouncement', announcementObject);\n\t}\n\n\tgetMessage() {\n\t\treturn this.message.get();\n\t}\n\n\tgetCallback() {\n\t\treturn this.callback.get();\n\t}\n\n\tgetStyle() {\n\t\treturn this.callback.get();\n\t}\n\n\tgetByRoom(rid) {\n\t\tconst roomData = Session.get(`roomData${rid}`);\n\t\tif (!roomData) {\n\t\t\treturn null;\n\t\t}\n\t\tthis.room.set(rid);\n\t\tthis.message.set(roomData.announcement);\n\t\tthis.callback.set(roomData.announcementDetails ? roomData.announcementDetails.callback : null);\n\t\tthis.style.set(roomData.announcementDetails ? roomData.announcementDetails.style : null);\n\t\treturn this;\n\t}\n\n\tclear() {\n\t\tthis.message.set(null);\n\t\tthis.callback.set(null);\n\t\tthis.style.set(null);\n\t\tMeteor.call('saveRoomSettings', this.room.get(), 'roomAnnouncement', {});\n\t}\n}\n","export { RocketChatAnnouncement } from './RocketChatAnnouncement';\nexport { LoginPresence } from './LoginPresence';\n","import { Meteor } from 'meteor/meteor';\nimport { TimeSync } from 'meteor/mizzao:timesync';\nimport s from 'underscore.string';\n\nimport { ChatMessage } from '../../../models';\nimport { settings } from '../../../settings';\nimport { callbacks } from '../../../../lib/callbacks';\nimport { t } from '../../../utils/client';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\nimport { onClientMessageReceived } from '../../../../client/lib/onClientMessageReceived';\n\nMeteor.methods({\n\tsendMessage(message) {\n\t\tif (!Meteor.userId() || s.trim(message.msg) === '') {\n\t\t\treturn false;\n\t\t}\n\t\tconst messageAlreadyExists = message._id && ChatMessage.findOne({ _id: message._id });\n\t\tif (messageAlreadyExists) {\n\t\t\treturn dispatchToastMessage({ type: 'error', message: t('Message_Already_Sent') });\n\t\t}\n\t\tconst user = Meteor.user();\n\t\tmessage.ts = isNaN(TimeSync.serverOffset()) ? new Date() : new Date(Date.now() + TimeSync.serverOffset());\n\t\tmessage.u = {\n\t\t\t_id: Meteor.userId(),\n\t\t\tusername: user.username,\n\t\t};\n\t\tif (settings.get('UI_Use_Real_Name')) {\n\t\t\tmessage.u.name = user.name;\n\t\t}\n\t\tmessage.temp = true;\n\t\tif (settings.get('Message_Read_Receipt_Enabled')) {\n\t\t\tmessage.unread = true;\n\t\t}\n\t\tmessage = callbacks.run('beforeSaveMessage', message);\n\t\tonClientMessageReceived(message).then(function (message) {\n\t\t\tChatMessage.insert(message);\n\t\t\treturn callbacks.run('afterSaveMessage', message);\n\t\t});\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../../settings/client';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst value = settings.get('Site_Url');\n\t\tif (value == null || value.trim() === '') {\n\t\t\treturn;\n\t\t}\n\t\t(window as any).__meteor_runtime_config__.ROOT_URL = value;\n\t});\n});\n","import _ from 'underscore';\nimport { OAuth } from 'meteor/oauth';\n\nimport { settings } from '../../settings';\n\nOAuth.launchLogin = _.wrap(OAuth.launchLogin, function (func, options) {\n\tconst proxy = settings.get('Accounts_OAuth_Proxy_services').replace(/\\s/g, '').split(',');\n\tif (proxy.includes(options.loginService)) {\n\t\tconst redirect_uri = options.loginUrl.match(/(&redirect_uri=)([^&]+|$)/)[2];\n\t\toptions.loginUrl = options.loginUrl.replace(\n\t\t\t/(&redirect_uri=)([^&]+|$)/,\n\t\t\t`$1${encodeURIComponent(settings.get('Accounts_OAuth_Proxy_host'))}/oauth_redirect`,\n\t\t);\n\t\toptions.loginUrl = options.loginUrl.replace(/(&state=)([^&]+|$)/, `$1${redirect_uri}!$2`);\n\t\toptions.loginUrl = `${settings.get('Accounts_OAuth_Proxy_host')}/redirect/${encodeURIComponent(options.loginUrl)}`;\n\t}\n\n\treturn func(options);\n});\n","import './startup/settingsOnLoadSiteUrl';\nimport '../lib/MessageTypes';\nimport './OAuthProxy';\nimport './methods/sendMessage';\nimport './views/customFieldsForm.html';\nimport './views/customFieldsForm';\nimport '../startup/defaultRoomTypes';\n\nexport * from './lib';\n","import { Meteor } from 'meteor/meteor';\n\nimport { getUserPreference, RoomTypeConfig } from '../../../utils';\n\nexport class ConversationRoomType extends RoomTypeConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tidentifier: 'merged',\n\t\t\torder: 30,\n\t\t\tlabel: 'Conversations',\n\t\t});\n\t}\n\n\tcondition() {\n\t\t// returns true only if sidebarGroupByType is not set\n\t\treturn !getUserPreference(Meteor.userId(), 'sidebarGroupByType');\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport { ChatRoom, Subscriptions } from '../../../models';\nimport { openRoom } from '../../../ui-utils';\nimport { getUserPreference, RoomTypeConfig, RoomTypeRouteConfig, RoomSettingsEnum, RoomMemberActions, UiTextContext } from '../../../utils';\nimport { hasPermission, hasAtLeastOnePermission } from '../../../authorization';\nimport { settings } from '../../../settings';\nimport { getUserAvatarURL } from '../../../utils/lib/getUserAvatarURL';\nimport { getAvatarURL } from '../../../utils/lib/getAvatarURL';\n\nexport class DirectMessageRoomRoute extends RoomTypeRouteConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tname: 'direct',\n\t\t\tpath: '/direct/:rid/:tab?/:context?',\n\t\t});\n\t}\n\n\taction(params) {\n\t\treturn openRoom('d', params.rid);\n\t}\n\n\tlink(sub) {\n\t\treturn { rid: sub.rid || sub.name };\n\t}\n}\n\nexport class DirectMessageRoomType extends RoomTypeConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tidentifier: 'd',\n\t\t\torder: 50,\n\t\t\ticon: 'at',\n\t\t\tlabel: 'Direct_Messages',\n\t\t\troute: new DirectMessageRoomRoute(),\n\t\t});\n\t}\n\n\tgetIcon(roomData) {\n\t\tif (this.isGroupChat(roomData)) {\n\t\t\treturn 'balloon';\n\t\t}\n\t\treturn this.icon;\n\t}\n\n\tfindRoom(identifier) {\n\t\tif (!hasPermission('view-d-room')) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst query = {\n\t\t\tt: 'd',\n\t\t\t$or: [{ name: identifier }, { rid: identifier }],\n\t\t};\n\n\t\tconst subscription = Subscriptions.findOne(query);\n\t\tif (subscription && subscription.rid) {\n\t\t\treturn ChatRoom.findOne(subscription.rid);\n\t\t}\n\t}\n\n\troomName(roomData) {\n\t\t// this function can receive different types of data\n\t\t// if it doesn't have fname and name properties, should be a Room object\n\t\t// so, need to find the related subscription\n\t\tconst subscription = roomData && (roomData.fname || roomData.name) ? roomData : Subscriptions.findOne({ rid: roomData._id });\n\n\t\tif (subscription === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (settings.get('UI_Use_Real_Name') && subscription.fname) {\n\t\t\treturn subscription.fname;\n\t\t}\n\n\t\treturn subscription.name;\n\t}\n\n\tsecondaryRoomName(roomData) {\n\t\tif (settings.get('UI_Use_Real_Name')) {\n\t\t\tconst subscription = Subscriptions.findOne({ rid: roomData._id }, { fields: { name: 1 } });\n\t\t\treturn subscription && subscription.name;\n\t\t}\n\t}\n\n\tcondition() {\n\t\tconst groupByType = getUserPreference(Meteor.userId(), 'sidebarGroupByType');\n\t\treturn groupByType && hasAtLeastOnePermission(['view-d-room', 'view-joined-room']);\n\t}\n\n\tgetUserStatus(roomId) {\n\t\tconst subscription = Subscriptions.findOne({ rid: roomId });\n\t\tif (subscription == null) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn Session.get(`user_${subscription.name}_status`);\n\t}\n\n\tgetUserStatusText(roomId) {\n\t\tconst subscription = Subscriptions.findOne({ rid: roomId });\n\t\tif (subscription == null) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn Session.get(`user_${subscription.name}_status_text`);\n\t}\n\n\tallowRoomSettingChange(room, setting) {\n\t\tswitch (setting) {\n\t\t\tcase RoomSettingsEnum.TYPE:\n\t\t\tcase RoomSettingsEnum.NAME:\n\t\t\tcase RoomSettingsEnum.SYSTEM_MESSAGES:\n\t\t\tcase RoomSettingsEnum.DESCRIPTION:\n\t\t\tcase RoomSettingsEnum.READ_ONLY:\n\t\t\tcase RoomSettingsEnum.REACT_WHEN_READ_ONLY:\n\t\t\tcase RoomSettingsEnum.ARCHIVE_OR_UNARCHIVE:\n\t\t\tcase RoomSettingsEnum.JOIN_CODE:\n\t\t\t\treturn false;\n\t\t\tcase RoomSettingsEnum.E2E:\n\t\t\t\treturn settings.get('E2E_Enable') === true;\n\t\t\tdefault:\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tallowMemberAction(room, action) {\n\t\tswitch (action) {\n\t\t\tcase RoomMemberActions.BLOCK:\n\t\t\t\treturn !this.isGroupChat(room);\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t}\n\n\tenableMembersListProfile() {\n\t\treturn true;\n\t}\n\n\tuserDetailShowAll(/* room */) {\n\t\treturn true;\n\t}\n\n\tgetUiText(context) {\n\t\tswitch (context) {\n\t\t\tcase UiTextContext.HIDE_WARNING:\n\t\t\t\treturn 'Hide_Private_Warning';\n\t\t\tcase UiTextContext.LEAVE_WARNING:\n\t\t\t\treturn 'Leave_Private_Warning';\n\t\t\tdefault:\n\t\t\t\treturn '';\n\t\t}\n\t}\n\n\t/**\n\t * Returns details to use on notifications\n\t *\n\t * @param {object} room\n\t * @param {object} user\n\t * @param {string} notificationMessage\n\t * @return {object} Notification details\n\t */\n\tgetNotificationDetails(room, user, notificationMessage) {\n\t\tif (!Meteor.isServer) {\n\t\t\treturn {};\n\t\t}\n\n\t\tif (this.isGroupChat(room)) {\n\t\t\treturn {\n\t\t\t\ttitle: this.roomName(room),\n\t\t\t\ttext: `${(settings.get('UI_Use_Real_Name') && user.name) || user.username}: ${notificationMessage}`,\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\ttitle: (settings.get('UI_Use_Real_Name') && user.name) || user.username,\n\t\t\ttext: notificationMessage,\n\t\t};\n\t}\n\n\tgetAvatarPath(roomData, subData) {\n\t\tif (!roomData && !subData) {\n\t\t\treturn '';\n\t\t}\n\n\t\t// if coming from sidenav search\n\t\tif (roomData.name && roomData.avatarETag) {\n\t\t\treturn getUserAvatarURL(roomData.name, roomData.avatarETag);\n\t\t}\n\n\t\tif (this.isGroupChat(roomData)) {\n\t\t\treturn getAvatarURL({ username: roomData.uids.length + roomData.usernames.join() });\n\t\t}\n\n\t\tconst sub = subData || Subscriptions.findOne({ rid: roomData._id }, { fields: { name: 1 } });\n\n\t\tif (sub && sub.name) {\n\t\t\tconst user = Meteor.users.findOne({ username: sub.name }, { fields: { username: 1, avatarETag: 1 } });\n\t\t\treturn getUserAvatarURL(user?.username || sub.name, user?.avatarETag);\n\t\t}\n\n\t\tif (roomData) {\n\t\t\treturn getUserAvatarURL(roomData.name || this.roomName(roomData)); // rooms should have no name for direct messages...\n\t\t}\n\t}\n\n\tincludeInDashboard() {\n\t\treturn true;\n\t}\n\n\tisGroupChat(room) {\n\t\treturn room && room.uids && room.uids.length > 2;\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\n\nimport { settings } from '../../../settings';\nimport { getUserPreference, RoomTypeConfig } from '../../../utils';\n\nexport class FavoriteRoomType extends RoomTypeConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tidentifier: 'f',\n\t\t\torder: 20,\n\t\t\theader: 'favorite',\n\t\t\ticon: 'star',\n\t\t\tlabel: 'Favorites',\n\t\t});\n\t}\n\n\tcondition() {\n\t\treturn settings.get('Favorite_Rooms') && getUserPreference(Meteor.userId(), 'sidebarShowFavorites');\n\t}\n}\n","import { ConversationRoomType } from './conversation';\nimport { DirectMessageRoomType } from './direct';\nimport { FavoriteRoomType } from './favorite';\nimport { PrivateRoomType } from './private';\nimport { PublicRoomType } from './public';\nimport { UnreadRoomType } from './unread';\n\nexport { ConversationRoomType, DirectMessageRoomType, FavoriteRoomType, PrivateRoomType, PublicRoomType, UnreadRoomType };\n","import { Meteor } from 'meteor/meteor';\n\nimport { ChatRoom, ChatSubscription } from '../../../models';\nimport { openRoom } from '../../../ui-utils';\nimport { settings } from '../../../settings';\nimport { hasAtLeastOnePermission, hasPermission } from '../../../authorization';\nimport { getUserPreference, RoomSettingsEnum, RoomTypeConfig, RoomTypeRouteConfig, UiTextContext, RoomMemberActions } from '../../../utils';\nimport { getAvatarURL } from '../../../utils/lib/getAvatarURL';\n\nexport class PrivateRoomRoute extends RoomTypeRouteConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tname: 'group',\n\t\t\tpath: '/group/:name/:tab?/:context?',\n\t\t});\n\t}\n\n\taction(params) {\n\t\treturn openRoom('p', params.name);\n\t}\n}\n\nexport class PrivateRoomType extends RoomTypeConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tidentifier: 'p',\n\t\t\torder: 40,\n\t\t\ticon: 'hashtag-lock',\n\t\t\tlabel: 'Private_Groups',\n\t\t\troute: new PrivateRoomRoute(),\n\t\t});\n\t}\n\n\tgetIcon(roomData) {\n\t\tif (roomData.prid) {\n\t\t\treturn 'discussion';\n\t\t}\n\t\tif (roomData.teamMain) {\n\t\t\treturn 'team-lock';\n\t\t}\n\t\treturn this.icon;\n\t}\n\n\tfindRoom(identifier) {\n\t\tconst query = {\n\t\t\tt: 'p',\n\t\t\tname: identifier,\n\t\t};\n\n\t\treturn ChatRoom.findOne(query);\n\t}\n\n\troomName(roomData) {\n\t\tif (roomData.prid) {\n\t\t\treturn roomData.fname;\n\t\t}\n\t\tif (settings.get('UI_Allow_room_names_with_special_chars')) {\n\t\t\treturn roomData.fname || roomData.name;\n\t\t}\n\n\t\treturn roomData.name;\n\t}\n\n\tcondition() {\n\t\tconst groupByType = getUserPreference(Meteor.userId(), 'sidebarGroupByType');\n\t\treturn groupByType && hasPermission('view-p-room');\n\t}\n\n\tisGroupChat() {\n\t\treturn true;\n\t}\n\n\tcanAddUser(room) {\n\t\treturn hasAtLeastOnePermission(['add-user-to-any-p-room', 'add-user-to-joined-room'], room._id);\n\t}\n\n\tcanSendMessage(roomId) {\n\t\t// TODO: remove duplicated code\n\t\treturn (\n\t\t\tChatSubscription.find({\n\t\t\t\trid: roomId,\n\t\t\t}).count() > 0\n\t\t);\n\t}\n\n\tallowRoomSettingChange(room, setting) {\n\t\tswitch (setting) {\n\t\t\tcase RoomSettingsEnum.JOIN_CODE:\n\t\t\t\treturn false;\n\t\t\tcase RoomSettingsEnum.BROADCAST:\n\t\t\t\treturn room.broadcast;\n\t\t\tcase RoomSettingsEnum.READ_ONLY:\n\t\t\t\treturn !room.broadcast;\n\t\t\tcase RoomSettingsEnum.REACT_WHEN_READ_ONLY:\n\t\t\t\treturn !room.broadcast && room.ro;\n\t\t\tcase RoomSettingsEnum.E2E:\n\t\t\t\treturn settings.get('E2E_Enable') === true;\n\t\t\tcase RoomSettingsEnum.SYSTEM_MESSAGES:\n\t\t\tdefault:\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tallowMemberAction(room, action) {\n\t\tswitch (action) {\n\t\t\tcase RoomMemberActions.BLOCK:\n\t\t\t\treturn false;\n\t\t\tdefault:\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tenableMembersListProfile() {\n\t\treturn true;\n\t}\n\n\tgetUiText(context) {\n\t\tswitch (context) {\n\t\t\tcase UiTextContext.HIDE_WARNING:\n\t\t\t\treturn 'Hide_Group_Warning';\n\t\t\tcase UiTextContext.LEAVE_WARNING:\n\t\t\t\treturn 'Leave_Group_Warning';\n\t\t\tdefault:\n\t\t\t\treturn '';\n\t\t}\n\t}\n\n\tgetAvatarPath(roomData) {\n\t\treturn getAvatarURL({ roomId: roomData._id, cache: roomData.avatarETag });\n\t}\n\n\tincludeInDashboard() {\n\t\treturn true;\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\n\nimport { openRoom } from '../../../ui-utils';\nimport { ChatRoom, ChatSubscription } from '../../../models';\nimport { settings } from '../../../settings';\nimport { hasAtLeastOnePermission } from '../../../authorization';\nimport { getUserPreference, RoomTypeConfig, RoomTypeRouteConfig, RoomSettingsEnum, UiTextContext, RoomMemberActions } from '../../../utils';\nimport { getAvatarURL } from '../../../utils/lib/getAvatarURL';\n\nexport class PublicRoomRoute extends RoomTypeRouteConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tname: 'channel',\n\t\t\tpath: '/channel/:name/:tab?/:context?',\n\t\t});\n\t}\n\n\taction(params) {\n\t\treturn openRoom('c', params.name);\n\t}\n}\n\nexport class PublicRoomType extends RoomTypeConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tidentifier: 'c',\n\t\t\torder: 30,\n\t\t\ticon: 'hashtag',\n\t\t\tlabel: 'Channels',\n\t\t\troute: new PublicRoomRoute(),\n\t\t});\n\t}\n\n\tgetIcon(roomData) {\n\t\tif (roomData.prid) {\n\t\t\treturn 'discussion';\n\t\t}\n\t\tif (roomData.teamMain) {\n\t\t\treturn 'team';\n\t\t}\n\t\treturn this.icon;\n\t}\n\n\tfindRoom(identifier) {\n\t\tconst query = {\n\t\t\tt: 'c',\n\t\t\tname: identifier,\n\t\t};\n\t\treturn ChatRoom.findOne(query);\n\t}\n\n\troomName(roomData) {\n\t\tif (roomData.prid) {\n\t\t\treturn roomData.fname;\n\t\t}\n\t\tif (settings.get('UI_Allow_room_names_with_special_chars')) {\n\t\t\treturn roomData.fname || roomData.name;\n\t\t}\n\t\treturn roomData.name;\n\t}\n\n\tcondition() {\n\t\tconst groupByType = getUserPreference(Meteor.userId(), 'sidebarGroupByType');\n\t\treturn (\n\t\t\tgroupByType && (hasAtLeastOnePermission(['view-c-room', 'view-joined-room']) || settings.get('Accounts_AllowAnonymousRead') === true)\n\t\t);\n\t}\n\n\tshowJoinLink(roomId) {\n\t\treturn !!ChatRoom.findOne({ _id: roomId, t: 'c' });\n\t}\n\n\tincludeInRoomSearch() {\n\t\treturn true;\n\t}\n\n\tisGroupChat() {\n\t\treturn true;\n\t}\n\n\tincludeInDashboard() {\n\t\treturn true;\n\t}\n\n\tcanAddUser(room) {\n\t\treturn hasAtLeastOnePermission(['add-user-to-any-c-room', 'add-user-to-joined-room'], room._id);\n\t}\n\n\tcanSendMessage(roomId) {\n\t\tconst room = ChatRoom.findOne({ _id: roomId, t: 'c' }, { fields: { prid: 1 } });\n\t\tif (room.prid) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// TODO: remove duplicated code\n\t\treturn (\n\t\t\tChatSubscription.find({\n\t\t\t\trid: roomId,\n\t\t\t}).count() > 0\n\t\t);\n\t}\n\n\tenableMembersListProfile() {\n\t\treturn true;\n\t}\n\n\tallowRoomSettingChange(room, setting) {\n\t\tswitch (setting) {\n\t\t\tcase RoomSettingsEnum.BROADCAST:\n\t\t\t\treturn room.broadcast;\n\t\t\tcase RoomSettingsEnum.READ_ONLY:\n\t\t\t\treturn !room.broadcast;\n\t\t\tcase RoomSettingsEnum.REACT_WHEN_READ_ONLY:\n\t\t\t\treturn !room.broadcast && room.ro;\n\t\t\tcase RoomSettingsEnum.E2E:\n\t\t\t\treturn false;\n\t\t\tcase RoomSettingsEnum.SYSTEM_MESSAGES:\n\t\t\tdefault:\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tallowMemberAction(room, action) {\n\t\tswitch (action) {\n\t\t\tcase RoomMemberActions.BLOCK:\n\t\t\t\treturn false;\n\t\t\tdefault:\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tgetUiText(context) {\n\t\tswitch (context) {\n\t\t\tcase UiTextContext.HIDE_WARNING:\n\t\t\t\treturn 'Hide_Room_Warning';\n\t\t\tcase UiTextContext.LEAVE_WARNING:\n\t\t\t\treturn 'Leave_Room_Warning';\n\t\t\tdefault:\n\t\t\t\treturn '';\n\t\t}\n\t}\n\n\tgetAvatarPath(roomData) {\n\t\treturn getAvatarURL({ roomId: roomData._id, cache: roomData.avatarETag });\n\t}\n\n\tgetDiscussionType() {\n\t\treturn 'c';\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\n\nimport { getUserPreference, RoomTypeConfig } from '../../../utils';\n\nexport class UnreadRoomType extends RoomTypeConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tidentifier: 'unread',\n\t\t\torder: 10,\n\t\t\tlabel: 'Unread',\n\t\t});\n\n\t\tthis.unread = true;\n\t}\n\n\tcondition() {\n\t\treturn getUserPreference(Meteor.userId(), 'sidebarShowUnread');\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\n\nimport { MessageTypes } from '../../ui-utils';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(function () {\n\tMessageTypes.registerType({\n\t\tid: 'r',\n\t\tsystem: true,\n\t\tmessage: 'Room_name_changed',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\troom_name: message.msg,\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'au',\n\t\tsystem: true,\n\t\tmessage: 'User_added_by',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser_added: message.msg,\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'ru',\n\t\tsystem: true,\n\t\tmessage: 'User_removed_by',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser_removed: message.msg,\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'ul',\n\t\tsystem: true,\n\t\tmessage: 'User_left',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser_left: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'ult',\n\t\tsystem: true,\n\t\tmessage: 'User_left_team',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser_left: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'uj',\n\t\tsystem: true,\n\t\tmessage: 'User_joined_channel',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'ujt',\n\t\tsystem: true,\n\t\tmessage: 'User_joined_team',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'ut',\n\t\tsystem: true,\n\t\tmessage: 'User_joined_conversation',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'wm',\n\t\tsystem: true,\n\t\tmessage: 'Welcome',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'rm',\n\t\tsystem: true,\n\t\tmessage: 'Message_removed',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'rtc',\n\t\trender(message) {\n\t\t\treturn callbacks.run('renderRtcMessage', message);\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'user-muted',\n\t\tsystem: true,\n\t\tmessage: 'User_muted_by',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser_muted: message.msg,\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'user-unmuted',\n\t\tsystem: true,\n\t\tmessage: 'User_unmuted_by',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser_unmuted: message.msg,\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'subscription-role-added',\n\t\tsystem: true,\n\t\tmessage: '__username__was_set__role__by__user_by_',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tusername: message.msg,\n\t\t\t\trole: message.role,\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'subscription-role-removed',\n\t\tsystem: true,\n\t\tmessage: '__username__is_no_longer__role__defined_by__user_by_',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tusername: message.msg,\n\t\t\t\trole: message.role,\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'room-archived',\n\t\tsystem: true,\n\t\tmessage: 'This_room_has_been_archived_by__username_',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tusername: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'room-unarchived',\n\t\tsystem: true,\n\t\tmessage: 'This_room_has_been_unarchived_by__username_',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tusername: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'room-removed-read-only',\n\t\tsystem: true,\n\t\tmessage: 'room_removed_read_only',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'room-set-read-only',\n\t\tsystem: true,\n\t\tmessage: 'room_set_read_only',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'room-allowed-reacting',\n\t\tsystem: true,\n\t\tmessage: 'room_allowed_reacting',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'room-disallowed-reacting',\n\t\tsystem: true,\n\t\tmessage: 'room_disallowed_reacting',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'room_e2e_enabled',\n\t\tsystem: true,\n\t\tmessage: 'This_room_encryption_has_been_enabled_by__username_',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tusername: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'room_e2e_disabled',\n\t\tsystem: true,\n\t\tmessage: 'This_room_encryption_has_been_disabled_by__username_',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tusername: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n});\n\nexport const MessageTypesValues = [\n\t{\n\t\tkey: 'uj',\n\t\ti18nLabel: 'Message_HideType_uj',\n\t},\n\t{\n\t\tkey: 'ul',\n\t\ti18nLabel: 'Message_HideType_ul',\n\t},\n\t{\n\t\tkey: 'ru',\n\t\ti18nLabel: 'Message_HideType_ru',\n\t},\n\t{\n\t\tkey: 'au',\n\t\ti18nLabel: 'Message_HideType_au',\n\t},\n\t{\n\t\tkey: 'mute_unmute',\n\t\ti18nLabel: 'Message_HideType_mute_unmute',\n\t},\n\t{\n\t\tkey: 'r',\n\t\ti18nLabel: 'Message_HideType_r',\n\t},\n\t{\n\t\tkey: 'ut',\n\t\ti18nLabel: 'Message_HideType_ut',\n\t},\n\t{\n\t\tkey: 'wm',\n\t\ti18nLabel: 'Message_HideType_wm',\n\t},\n\t{\n\t\tkey: 'rm',\n\t\ti18nLabel: 'Message_HideType_rm',\n\t},\n\t{\n\t\tkey: 'subscription-role-added',\n\t\ti18nLabel: 'Message_HideType_subscription_role_added',\n\t},\n\t{\n\t\tkey: 'subscription-role-removed',\n\t\ti18nLabel: 'Message_HideType_subscription_role_removed',\n\t},\n\t{\n\t\tkey: 'room_archived',\n\t\ti18nLabel: 'Message_HideType_room_archived',\n\t},\n\t{\n\t\tkey: 'room_unarchived',\n\t\ti18nLabel: 'Message_HideType_room_unarchived',\n\t},\n\t{\n\t\tkey: 'room_changed_privacy',\n\t\ti18nLabel: 'Message_HideType_room_changed_privacy',\n\t},\n\t{\n\t\tkey: 'room_changed_avatar',\n\t\ti18nLabel: 'Message_HideType_room_changed_avatar',\n\t},\n\t{\n\t\tkey: 'room_changed_topic',\n\t\ti18nLabel: 'Message_HideType_room_changed_topic',\n\t},\n\t{\n\t\tkey: 'room_e2e_enabled',\n\t\ti18nLabel: 'Message_HideType_room_enabled_encryption',\n\t},\n\t{\n\t\tkey: 'room_e2e_disabled',\n\t\ti18nLabel: 'Message_HideType_room_disabled_encryption',\n\t},\n\t{\n\t\tkey: 'room-removed-read-only',\n\t\ti18nLabel: 'Message_HideType_room_removed_read_only',\n\t},\n\t{\n\t\tkey: 'room-set-read-only',\n\t\ti18nLabel: 'Message_HideType_room_set_read_only',\n\t},\n\t{\n\t\tkey: 'room-disallowed-reacting',\n\t\ti18nLabel: 'Message_HideType_room_disallowed_reacting',\n\t},\n\t{\n\t\tkey: 'room-allowed-reacting',\n\t\ti18nLabel: 'Message_HideType_room_allowed_reacting',\n\t},\n];\n","import { roomTypes } from '../../utils';\nimport {\n\tConversationRoomType,\n\tDirectMessageRoomType,\n\tFavoriteRoomType,\n\tPrivateRoomType,\n\tPublicRoomType,\n\tUnreadRoomType,\n} from '../lib/roomTypes';\n\nroomTypes.add(new UnreadRoomType());\nroomTypes.add(new FavoriteRoomType());\nroomTypes.add(new ConversationRoomType());\nroomTypes.add(new PublicRoomType());\nroomTypes.add(new PrivateRoomType());\nroomTypes.add(new DirectMessageRoomType());\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/index.js');\n}\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/index.js');\n}\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Session } from 'meteor/session';\nimport _ from 'underscore';\n\nimport { appLayout } from '../../../../client/lib/appLayout';\nimport { SideNav } from './SideNav';\n\nexport const AccountBox = (function () {\n\tlet status = 0;\n\tconst items = new ReactiveVar([]);\n\tfunction setStatus(status, statusText) {\n\t\treturn Meteor.call('setUserStatus', status, statusText);\n\t}\n\tfunction open() {\n\t\tif (SideNav.flexStatus()) {\n\t\t\tSideNav.closeFlex();\n\t\t\treturn;\n\t\t}\n\t\tstatus = 1;\n\t}\n\tfunction close() {\n\t\tstatus = 0;\n\t}\n\tfunction toggle() {\n\t\tif (status) {\n\t\t\treturn close();\n\t\t}\n\t\treturn open();\n\t}\n\tfunction openFlex() {\n\t\tstatus = 0;\n\t}\n\n\t/*\n\t * @param newOption:\n\t *   name: Button label\n\t *   icon: Button icon\n\t *   class: Class of the item\n\t *   permissions: Which permissions a user should have (all of them) to see this item\n\t */\n\tfunction addItem(newItem) {\n\t\treturn Tracker.nonreactive(function () {\n\t\t\tconst actual = items.get();\n\t\t\tactual.push(newItem);\n\t\t\treturn items.set(actual);\n\t\t});\n\t}\n\tfunction checkCondition(item) {\n\t\treturn item.condition == null || item.condition();\n\t}\n\tfunction getItems() {\n\t\treturn _.filter(items.get(), function (item) {\n\t\t\tif (checkCondition(item)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t}\n\tfunction addRoute(newRoute, router, wait = () => {}) {\n\t\tif (router == null) {\n\t\t\trouter = FlowRouter;\n\t\t}\n\t\tconst container = newRoute.customContainer ? 'pageCustomContainer' : 'pageContainer';\n\t\tconst routeConfig = {\n\t\t\tcenter: container,\n\t\t\tpageTemplate: newRoute.pageTemplate,\n\t\t};\n\t\tif (newRoute.i18nPageTitle != null) {\n\t\t\trouteConfig.i18nPageTitle = newRoute.i18nPageTitle;\n\t\t}\n\t\tif (newRoute.pageTitle != null) {\n\t\t\trouteConfig.pageTitle = newRoute.pageTitle;\n\t\t}\n\t\treturn router.route(newRoute.path, {\n\t\t\tname: newRoute.name,\n\t\t\tasync action() {\n\t\t\t\tawait wait();\n\t\t\t\tSession.set('openedRoom');\n\t\t\t\tappLayout.renderMainLayout(routeConfig);\n\t\t\t},\n\t\t\ttriggersEnter: [\n\t\t\t\tfunction () {\n\t\t\t\t\tif (newRoute.sideNav != null) {\n\t\t\t\t\t\tSideNav.setFlex(newRoute.sideNav);\n\t\t\t\t\t\tSideNav.openFlex();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\treturn {\n\t\tsetStatus,\n\t\ttoggle,\n\t\topen,\n\t\tclose,\n\t\topenFlex,\n\t\taddRoute,\n\t\taddItem,\n\t\tgetItems,\n\t};\n})();\n","import { Meteor } from 'meteor/meteor';\nimport { Match } from 'meteor/check';\nimport { Accounts } from 'meteor/accounts-base';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport { HTTP } from 'meteor/http';\n\nimport { settings } from '../../../settings';\n\nexport class IframeLogin {\n\tconstructor() {\n\t\tthis.enabled = false;\n\t\tthis.reactiveIframeUrl = new ReactiveVar();\n\t\tthis.reactiveEnabled = new ReactiveVar();\n\t\tthis.iframeUrl = undefined;\n\t\tthis.apiUrl = undefined;\n\t\tthis.apiMethod = undefined;\n\n\t\tTracker.autorun((c) => {\n\t\t\tthis.enabled = settings.get('Accounts_iframe_enabled');\n\t\t\tthis.reactiveEnabled.set(this.enabled);\n\n\t\t\tthis.iframeUrl = settings.get('Accounts_iframe_url');\n\t\t\tthis.apiUrl = settings.get('Accounts_Iframe_api_url');\n\t\t\tthis.apiMethod = settings.get('Accounts_Iframe_api_method');\n\n\t\t\tif (this.enabled === false) {\n\t\t\t\treturn c.stop();\n\t\t\t}\n\n\t\t\tif (this.enabled === true && this.iframeUrl && this.apiUrl && this.apiMethod) {\n\t\t\t\tc.stop();\n\t\t\t\tif (!Accounts._storedLoginToken()) {\n\t\t\t\t\tthis.tryLogin(() => {});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\ttryLogin(callback) {\n\t\tif (!this.enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.iframeUrl || !this.apiUrl || !this.apiMethod) {\n\t\t\treturn;\n\t\t}\n\n\t\tconsole.log('tryLogin');\n\t\tconst options = {\n\t\t\tbeforeSend: (xhr) => {\n\t\t\t\txhr.withCredentials = true;\n\t\t\t},\n\t\t};\n\n\t\tlet { iframeUrl } = this;\n\t\tlet separator = '?';\n\t\tif (iframeUrl.indexOf('?') > -1) {\n\t\t\tseparator = '&';\n\t\t}\n\n\t\tif (navigator.userAgent.indexOf('Electron') > -1) {\n\t\t\tiframeUrl += `${separator}client=electron`;\n\t\t}\n\n\t\tHTTP.call(this.apiMethod, this.apiUrl, options, (error, result) => {\n\t\t\tconsole.log(error, result);\n\t\t\tif (result && result.data && (result.data.token || result.data.loginToken)) {\n\t\t\t\tthis.loginWithToken(result.data, (error, result) => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\tthis.reactiveIframeUrl.set(iframeUrl);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.reactiveIframeUrl.set();\n\t\t\t\t\t}\n\t\t\t\t\tcallback(error, result);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.reactiveIframeUrl.set(iframeUrl);\n\t\t\t\tcallback(error, result);\n\t\t\t}\n\t\t});\n\t}\n\n\tloginWithToken(tokenData, callback) {\n\t\tif (!this.enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (Match.test(tokenData, String)) {\n\t\t\ttokenData = {\n\t\t\t\ttoken: tokenData,\n\t\t\t};\n\t\t}\n\n\t\tconsole.log('loginWithToken');\n\n\t\tif (tokenData.loginToken) {\n\t\t\treturn Meteor.loginWithToken(tokenData.loginToken, callback);\n\t\t}\n\n\t\tAccounts.callLoginMethod({\n\t\t\tmethodArguments: [\n\t\t\t\t{\n\t\t\t\t\tiframe: true,\n\t\t\t\t\ttoken: tokenData.token,\n\t\t\t\t},\n\t\t\t],\n\t\t\tuserCallback: callback,\n\t\t});\n\t}\n}\n\nexport const iframeLogin = new IframeLogin();\n","import _ from 'underscore';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport moment from 'moment';\nimport mem from 'mem';\nimport { Meteor } from 'meteor/meteor';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport { Session } from 'meteor/session';\n\nimport { messageArgs } from './messageArgs';\nimport { roomTypes } from '../../../utils/client';\nimport { Messages, Rooms, Subscriptions } from '../../../models/client';\nimport { hasAtLeastOnePermission, hasPermission } from '../../../authorization/client';\nimport { modal } from './modal';\nimport { imperativeModal } from '../../../../client/lib/imperativeModal';\nimport ReactionList from '../../../../client/views/room/modals/ReactionListModal';\nimport { call } from '../../../../client/lib/utils/call';\nimport { canDeleteMessage } from '../../../../client/lib/utils/canDeleteMessage';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\n\nexport const addMessageToList = (messagesList, message) => {\n\t// checks if the message is not already on the list\n\tif (!messagesList.find(({ _id }) => _id === message._id)) {\n\t\tmessagesList.push(message);\n\t}\n\n\treturn messagesList;\n};\n\nexport const MessageAction = new (class {\n\t/*\n  \tconfig expects the following keys (only id is mandatory):\n  \t\tid (mandatory)\n  \t\ticon: string\n  \t\tlabel: string\n  \t\taction: function(event, instance)\n  \t\tcondition: function(message)\n\t\t\torder: integer\n\t\t\tgroup: string (message or menu)\n   */\n\n\tconstructor() {\n\t\tthis.buttons = new ReactiveVar({});\n\t}\n\n\taddButton(config) {\n\t\tif (!config || !config.id) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!config.group) {\n\t\t\tconfig.group = 'menu';\n\t\t}\n\n\t\tif (config.condition) {\n\t\t\tconfig.condition = mem(config.condition, { maxAge: 1000, cacheKey: JSON.stringify });\n\t\t}\n\n\t\treturn Tracker.nonreactive(() => {\n\t\t\tconst btns = this.buttons.get();\n\t\t\tbtns[config.id] = config;\n\t\t\tmem.clear(this._getButtons);\n\t\t\tmem.clear(this._getButtonsByGroup);\n\t\t\treturn this.buttons.set(btns);\n\t\t});\n\t}\n\n\tremoveButton(id) {\n\t\treturn Tracker.nonreactive(() => {\n\t\t\tconst btns = this.buttons.get();\n\t\t\tdelete btns[id];\n\t\t\tmem.clear(this._getButtons);\n\t\t\tmem.clear(this._getButtonsByGroup);\n\t\t\treturn this.buttons.set(btns);\n\t\t});\n\t}\n\n\tupdateButton(id, config) {\n\t\treturn Tracker.nonreactive(() => {\n\t\t\tconst btns = this.buttons.get();\n\t\t\tif (btns[id]) {\n\t\t\t\tbtns[id] = _.extend(btns[id], config);\n\t\t\t\tmem.clear(this._getButtons);\n\t\t\t\tmem.clear(this._getButtonsByGroup);\n\t\t\t\treturn this.buttons.set(btns);\n\t\t\t}\n\t\t});\n\t}\n\n\tgetButtonById(id) {\n\t\tconst allButtons = this.buttons.get();\n\t\treturn allButtons[id];\n\t}\n\n\t_getButtons = mem(function () {\n\t\treturn _.sortBy(_.toArray(this.buttons.get()), 'order');\n\t});\n\n\t_getButtonsByGroup = mem(function (group) {\n\t\treturn this._getButtons().filter((button) => (Array.isArray(button.group) ? button.group.includes(group) : button.group === group));\n\t});\n\n\tgetButtons(message, context, group) {\n\t\tconst allButtons = group ? this._getButtonsByGroup(group) : this._getButtons();\n\n\t\tif (message) {\n\t\t\treturn allButtons.filter(function (button) {\n\t\t\t\tif (button.context == null || button.context.includes(context)) {\n\t\t\t\t\treturn button.condition == null || button.condition(message, context);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\t\treturn allButtons;\n\t}\n\n\tresetButtons() {\n\t\tmem.clear(this._getButtons);\n\t\tmem.clear(this._getButtonsByGroup);\n\t\treturn this.buttons.set({});\n\t}\n\n\tasync getPermaLink(msgId) {\n\t\tif (!msgId) {\n\t\t\tthrow new Error('invalid-parameter');\n\t\t}\n\n\t\tconst msg = Messages.findOne(msgId) || (await call('getSingleMessage', msgId));\n\t\tif (!msg) {\n\t\t\tthrow new Error('message-not-found');\n\t\t}\n\t\tconst roomData = Rooms.findOne({\n\t\t\t_id: msg.rid,\n\t\t});\n\n\t\tif (!roomData) {\n\t\t\tthrow new Error('room-not-found');\n\t\t}\n\n\t\tconst subData = Subscriptions.findOne({ 'rid': roomData._id, 'u._id': Meteor.userId() });\n\t\tconst roomURL = roomTypes.getURL(roomData.t, subData || roomData);\n\t\treturn `${roomURL}?msg=${msgId}`;\n\t}\n})();\n\nMeteor.startup(async function () {\n\tconst { chatMessages } = await import('../../../ui');\n\n\tconst getChatMessagesFrom = (msg) => {\n\t\tconst { rid = Session.get('openedRoom'), tmid = msg._id } = msg;\n\n\t\treturn chatMessages[`${rid}-${tmid}`] || chatMessages[rid];\n\t};\n\n\tMessageAction.addButton({\n\t\tid: 'reply-directly',\n\t\ticon: 'reply-directly',\n\t\tlabel: 'Reply_in_direct_message',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\taction() {\n\t\t\tconst { msg } = messageArgs(this);\n\t\t\troomTypes.openRouteLink(\n\t\t\t\t'd',\n\t\t\t\t{ name: msg.u.username },\n\t\t\t\t{\n\t\t\t\t\t...FlowRouter.current().queryParams,\n\t\t\t\t\treply: msg._id,\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\tcondition({ subscription, room, msg, u }) {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (room.t === 'd' || room.t === 'l') {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Check if we already have a DM started with the message user (not ourselves) or we can start one\n\t\t\tif (u._id !== msg.u._id && !hasPermission('create-d')) {\n\t\t\t\tconst dmRoom = Rooms.findOne({ _id: [u._id, msg.u._id].sort().join('') });\n\t\t\t\tif (!dmRoom || !Subscriptions.findOne({ 'rid': dmRoom._id, 'u._id': u._id })) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\torder: 0,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'quote-message',\n\t\ticon: 'quote',\n\t\tlabel: 'Quote',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tconst { input } = getChatMessagesFrom(message);\n\t\t\tconst $input = $(input);\n\n\t\t\tlet messages = $input.data('reply') || [];\n\n\t\t\tmessages = addMessageToList(messages, message, input);\n\n\t\t\t$input.focus().data('mention-user', false).data('reply', messages).trigger('dataChange');\n\t\t},\n\t\tcondition({ subscription, room }) {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst isLivechatRoom = roomTypes.isLivechatRoom(room.t);\n\t\t\tif (isLivechatRoom) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\torder: -3,\n\t\tgroup: ['message', 'menu'],\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'permalink',\n\t\ticon: 'permalink',\n\t\tlabel: 'Get_link',\n\t\tclasses: 'clipboard',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\tasync action() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tconst permalink = await MessageAction.getPermaLink(message._id);\n\t\t\tnavigator.clipboard.writeText(permalink);\n\t\t\tdispatchToastMessage({ type: 'success', message: TAPi18n.__('Copied') });\n\t\t},\n\t\tcondition({ subscription }) {\n\t\t\treturn !!subscription;\n\t\t},\n\t\torder: 4,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'copy',\n\t\ticon: 'copy',\n\t\tlabel: 'Copy',\n\t\tclasses: 'clipboard',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\taction() {\n\t\t\tconst {\n\t\t\t\tmsg: { msg },\n\t\t\t} = messageArgs(this);\n\t\t\tnavigator.clipboard.writeText(msg);\n\t\t\tdispatchToastMessage({ type: 'success', message: TAPi18n.__('Copied') });\n\t\t},\n\t\tcondition({ subscription }) {\n\t\t\treturn !!subscription;\n\t\t},\n\t\torder: 5,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'edit-message',\n\t\ticon: 'edit',\n\t\tlabel: 'Edit',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\taction() {\n\t\t\tconst { msg } = messageArgs(this);\n\t\t\tgetChatMessagesFrom(msg).edit(document.getElementById(msg.tmid ? `thread-${msg._id}` : msg._id));\n\t\t},\n\t\tcondition({ msg: message, subscription, settings }) {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst hasPermission = hasAtLeastOnePermission('edit-message', message.rid);\n\t\t\tconst isEditAllowed = settings.Message_AllowEditing;\n\t\t\tconst editOwn = message.u && message.u._id === Meteor.userId();\n\t\t\tif (!(hasPermission || (isEditAllowed && editOwn))) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst blockEditInMinutes = settings.Message_AllowEditing_BlockEditInMinutes;\n\t\t\tif (blockEditInMinutes) {\n\t\t\t\tlet msgTs;\n\t\t\t\tif (message.ts != null) {\n\t\t\t\t\tmsgTs = moment(message.ts);\n\t\t\t\t}\n\t\t\t\tlet currentTsDiff;\n\t\t\t\tif (msgTs != null) {\n\t\t\t\t\tcurrentTsDiff = moment().diff(msgTs, 'minutes');\n\t\t\t\t}\n\t\t\t\treturn currentTsDiff < blockEditInMinutes;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\torder: 6,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'delete-message',\n\t\ticon: 'trash',\n\t\tlabel: 'Delete',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\tcolor: 'alert',\n\t\taction() {\n\t\t\tconst { msg } = messageArgs(this);\n\t\t\tgetChatMessagesFrom(msg).confirmDeleteMsg(msg);\n\t\t},\n\t\tcondition({ msg: message, subscription, room }) {\n\t\t\tif (!subscription) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst isLivechatRoom = roomTypes.isLivechatRoom(room.t);\n\t\t\tif (isLivechatRoom) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn canDeleteMessage({\n\t\t\t\trid: message.rid,\n\t\t\t\tts: message.ts,\n\t\t\t\tuid: message.u._id,\n\t\t\t});\n\t\t},\n\t\torder: 18,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'report-message',\n\t\ticon: 'report',\n\t\tlabel: 'Report',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\tcolor: 'alert',\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tmodal.open(\n\t\t\t\t{\n\t\t\t\t\ttitle: TAPi18n.__('Report_this_message_question_mark'),\n\t\t\t\t\ttext: message.msg,\n\t\t\t\t\tinputPlaceholder: TAPi18n.__('Why_do_you_want_to_report_question_mark'),\n\t\t\t\t\ttype: 'input',\n\t\t\t\t\tshowCancelButton: true,\n\t\t\t\t\tconfirmButtonColor: '#DD6B55',\n\t\t\t\t\tconfirmButtonText: TAPi18n.__('Report_exclamation_mark'),\n\t\t\t\t\tcancelButtonText: TAPi18n.__('Cancel'),\n\t\t\t\t\tcloseOnConfirm: false,\n\t\t\t\t\thtml: false,\n\t\t\t\t},\n\t\t\t\t(inputValue) => {\n\t\t\t\t\tif (inputValue === false) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!inputValue.trim()) {\n\t\t\t\t\t\tmodal.showInputError(TAPi18n.__('You_need_to_write_something'));\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tMeteor.call('reportMessage', message._id, inputValue);\n\n\t\t\t\t\tmodal.open({\n\t\t\t\t\t\ttitle: TAPi18n.__('Report_sent'),\n\t\t\t\t\t\ttext: TAPi18n.__('Thank_you_exclamation_mark'),\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\ttimer: 1000,\n\t\t\t\t\t\tshowConfirmButton: false,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\tcondition({ subscription, room }) {\n\t\t\tconst isLivechatRoom = roomTypes.isLivechatRoom(room.t);\n\t\t\tif (isLivechatRoom) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn Boolean(subscription);\n\t\t},\n\t\torder: 17,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'reaction-list',\n\t\ticon: 'emoji',\n\t\tlabel: 'Reactions',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\taction(_, { tabBar, rid }) {\n\t\t\tconst {\n\t\t\t\tmsg: { reactions },\n\t\t\t} = messageArgs(this);\n\n\t\t\timperativeModal.open({\n\t\t\t\tcomponent: ReactionList,\n\t\t\t\tprops: { reactions, rid, tabBar, onClose: imperativeModal.close },\n\t\t\t});\n\t\t},\n\t\tcondition({ msg: { reactions } }) {\n\t\t\treturn !!reactions;\n\t\t},\n\t\torder: 18,\n\t\tgroup: 'menu',\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Blaze } from 'meteor/blaze';\nimport { v4 as uuidv4 } from 'uuid';\nimport differenceInMilliseconds from 'date-fns/differenceInMilliseconds';\nimport { Emitter } from '@rocket.chat/emitter';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\n\nimport { RoomManager } from './RoomManager';\nimport { readMessage } from './readMessages';\nimport { renderMessageBody } from '../../../../client/lib/utils/renderMessageBody';\nimport { getConfig } from '../../../../client/lib/utils/getConfig';\nimport { ChatMessage, ChatSubscription, ChatRoom } from '../../../models';\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\nimport { filterMarkdown } from '../../../markdown/lib/markdown';\nimport { getUserPreference } from '../../../utils/client';\nimport { onClientMessageReceived } from '../../../../client/lib/onClientMessageReceived';\n\nexport const normalizeThreadMessage = ({ ...message }) => {\n\tif (message.msg) {\n\t\tmessage.msg = filterMarkdown(message.msg);\n\t\tdelete message.mentions;\n\t\treturn renderMessageBody(message).replace(/<br\\s?\\\\?>/g, ' ');\n\t}\n\n\tif (message.attachments) {\n\t\tconst attachment = message.attachments.find((attachment) => attachment.title || attachment.description);\n\n\t\tif (attachment && attachment.description) {\n\t\t\treturn escapeHTML(attachment.description);\n\t\t}\n\n\t\tif (attachment && attachment.title) {\n\t\t\treturn escapeHTML(attachment.title);\n\t\t}\n\t}\n};\n\nexport const waitUntilWrapperExists = async (selector = '.messages-box .wrapper') =>\n\tdocument.querySelector(selector) ||\n\tnew Promise((resolve) => {\n\t\tconst observer = new MutationObserver(function (mutations, obs) {\n\t\t\tconst element = document.querySelector(selector);\n\t\t\tif (element) {\n\t\t\t\tobs.disconnect(); // stop observing\n\t\t\t\treturn resolve(element);\n\t\t\t}\n\t\t});\n\t\tobserver.observe(document, {\n\t\t\tchildList: true,\n\t\t\tsubtree: true,\n\t\t});\n\t});\n\nexport const upsertMessage = async ({ msg, subscription, uid = Tracker.nonreactive(() => Meteor.userId()) }, collection = ChatMessage) => {\n\tconst userId = msg.u && msg.u._id;\n\n\tif (subscription && subscription.ignored && subscription.ignored.indexOf(userId) > -1) {\n\t\tmsg.ignored = true;\n\t}\n\n\t// const roles = [\n\t// \t(userId && UserRoles.findOne(userId, { fields: { roles: 1 } })) || {},\n\t// \t(userId && RoomRoles.findOne({ rid: msg.rid, 'u._id': userId })) || {},\n\t// ].map((e) => e.roles);\n\t// msg.roles = _.union.apply(_.union, roles);\n\n\tif (msg.t === 'e2e' && !msg.file) {\n\t\tmsg.e2e = 'pending';\n\t}\n\tmsg = (await onClientMessageReceived(msg)) || msg;\n\n\tconst { _id, ...messageToUpsert } = msg;\n\n\tif (msg.tcount) {\n\t\tcollection.direct.update(\n\t\t\t{ tmid: _id },\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\tfollowing: msg.replies && msg.replies.indexOf(uid) > -1,\n\t\t\t\t\tthreadMsg: normalizeThreadMessage(messageToUpsert),\n\t\t\t\t\trepliesCount: msg.tcount,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{ multi: true },\n\t\t);\n\t}\n\n\treturn collection.direct.upsert({ _id }, messageToUpsert);\n};\n\nexport function upsertMessageBulk({ msgs, subscription }, collection = ChatMessage) {\n\tconst uid = Tracker.nonreactive(() => Meteor.userId());\n\tconst { queries } = ChatMessage;\n\tcollection.queries = [];\n\tmsgs.forEach((msg, index) => {\n\t\tif (index === msgs.length - 1) {\n\t\t\tChatMessage.queries = queries;\n\t\t}\n\t\tupsertMessage({ msg, subscription, uid }, collection);\n\t});\n}\n\nconst defaultLimit = parseInt(getConfig('roomListLimit')) || 50;\n\nconst waitAfterFlush = (fn) => setTimeout(() => Tracker.afterFlush(fn), 10);\n\nexport const RoomHistoryManager = new (class extends Emitter {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.histories = {};\n\t\tthis.requestsList = [];\n\t}\n\n\tgetRoom(rid) {\n\t\tif (!this.histories[rid]) {\n\t\t\tthis.histories[rid] = {\n\t\t\t\thasMore: new ReactiveVar(true),\n\t\t\t\thasMoreNext: new ReactiveVar(false),\n\t\t\t\tisLoading: new ReactiveVar(false),\n\t\t\t\tunreadNotLoaded: new ReactiveVar(0),\n\t\t\t\tfirstUnread: new ReactiveVar(),\n\t\t\t\tloaded: undefined,\n\t\t\t};\n\t\t}\n\n\t\treturn this.histories[rid];\n\t}\n\n\tasync queue() {\n\t\treturn new Promise((resolve) => {\n\t\t\tconst requestId = uuidv4();\n\t\t\tconst done = () => {\n\t\t\t\tthis.lastRequest = new Date();\n\t\t\t\tresolve();\n\t\t\t};\n\t\t\tif (this.requestsList.length === 0) {\n\t\t\t\treturn this.run(done);\n\t\t\t}\n\t\t\tthis.requestsList.push(requestId);\n\t\t\tthis.once(requestId, done);\n\t\t});\n\t}\n\n\trun(fn) {\n\t\tconst difference = differenceInMilliseconds(new Date(), this.lastRequest);\n\t\tif (!this.lastRequest || difference > 500) {\n\t\t\treturn fn();\n\t\t}\n\t\treturn setTimeout(fn, 500 - difference);\n\t}\n\n\tunqueue() {\n\t\tconst requestId = this.requestsList.pop();\n\t\tif (!requestId) {\n\t\t\treturn;\n\t\t}\n\t\tthis.run(() => this.emit(requestId));\n\t}\n\n\tasync getMore(rid, limit = defaultLimit) {\n\t\tlet ts;\n\t\tconst room = this.getRoom(rid);\n\n\t\tif (room.hasMore.curValue !== true) {\n\t\t\treturn;\n\t\t}\n\n\t\troom.isLoading.set(true);\n\n\t\tawait this.queue();\n\n\t\t// ScrollListener.setLoader true\n\t\tconst lastMessage = ChatMessage.findOne({ rid, _hidden: { $ne: true } }, { sort: { ts: 1 } });\n\t\t// lastMessage ?= ChatMessage.findOne({rid: rid}, {sort: {ts: 1}})\n\n\t\tif (lastMessage) {\n\t\t\t({ ts } = lastMessage);\n\t\t} else {\n\t\t\tts = undefined;\n\t\t}\n\n\t\tlet ls = undefined;\n\t\tlet typeName = undefined;\n\n\t\tconst subscription = ChatSubscription.findOne({ rid });\n\t\tif (subscription) {\n\t\t\t({ ls } = subscription);\n\t\t\ttypeName = subscription.t + subscription.name;\n\t\t} else {\n\t\t\tconst curRoomDoc = ChatRoom.findOne({ _id: rid });\n\t\t\ttypeName = (curRoomDoc ? curRoomDoc.t : undefined) + (curRoomDoc ? curRoomDoc.name : undefined);\n\t\t}\n\n\t\tconst showMessageInMainThread = getUserPreference(Meteor.userId(), 'showMessageInMainThread', false);\n\t\tconst result = await callWithErrorHandling('loadHistory', rid, ts, limit, ls, showMessageInMainThread);\n\n\t\tthis.unqueue();\n\n\t\tlet previousHeight;\n\t\tlet scroll;\n\t\tconst { messages = [] } = result;\n\t\troom.unreadNotLoaded.set(result.unreadNotLoaded);\n\t\troom.firstUnread.set(result.firstUnread);\n\n\t\tconst wrapper = await waitUntilWrapperExists();\n\n\t\tif (wrapper) {\n\t\t\tpreviousHeight = wrapper.scrollHeight;\n\t\t\tscroll = wrapper.scrollTop;\n\t\t}\n\n\t\tupsertMessageBulk({\n\t\t\tmsgs: messages.filter((msg) => msg.t !== 'command'),\n\t\t\tsubscription,\n\t\t});\n\n\t\tif (!room.loaded) {\n\t\t\troom.loaded = 0;\n\t\t}\n\n\t\tconst visibleMessages = messages.filter((msg) => !msg.tmid || showMessageInMainThread || msg.tshow);\n\n\t\troom.loaded += visibleMessages.length;\n\n\t\tif (messages.length < limit) {\n\t\t\troom.hasMore.set(false);\n\t\t}\n\n\t\tif (room.hasMore.get() && (visibleMessages.length === 0 || room.loaded < limit)) {\n\t\t\treturn this.getMore(rid);\n\t\t}\n\n\t\twaitAfterFlush(() => {\n\t\t\tconst heightDiff = wrapper.scrollHeight - previousHeight;\n\t\t\twrapper.scrollTop = scroll + heightDiff;\n\t\t});\n\n\t\troom.isLoading.set(false);\n\t\twaitAfterFlush(() => {\n\t\t\treadMessage.refreshUnreadMark(rid);\n\t\t\treturn RoomManager.updateMentionsMarksOfRoom(typeName);\n\t\t});\n\t}\n\n\tasync getMoreNext(rid, limit = defaultLimit) {\n\t\tconst room = this.getRoom(rid);\n\t\tif (room.hasMoreNext.curValue !== true) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait this.queue();\n\t\tconst instance = Blaze.getView($('.messages-box .wrapper')[0]).templateInstance();\n\t\tinstance.atBottom = false;\n\n\t\troom.isLoading.set(true);\n\n\t\tconst lastMessage = ChatMessage.findOne({ rid, _hidden: { $ne: true } }, { sort: { ts: -1 } });\n\n\t\tlet typeName = undefined;\n\n\t\tconst subscription = ChatSubscription.findOne({ rid });\n\t\tif (subscription) {\n\t\t\t// const { ls } = subscription;\n\t\t\ttypeName = subscription.t + subscription.name;\n\t\t} else {\n\t\t\tconst curRoomDoc = ChatRoom.findOne({ _id: rid });\n\t\t\ttypeName = (curRoomDoc ? curRoomDoc.t : undefined) + (curRoomDoc ? curRoomDoc.name : undefined);\n\t\t}\n\n\t\tconst { ts } = lastMessage;\n\n\t\tif (ts) {\n\t\t\tconst result = await callWithErrorHandling('loadNextMessages', rid, ts, limit);\n\t\t\tupsertMessageBulk({\n\t\t\t\tmsgs: Array.from(result.messages).filter((msg) => msg.t !== 'command'),\n\t\t\t\tsubscription,\n\t\t\t});\n\n\t\t\tMeteor.defer(() => RoomManager.updateMentionsMarksOfRoom(typeName));\n\n\t\t\troom.isLoading.set(false);\n\t\t\tif (!room.loaded) {\n\t\t\t\troom.loaded = 0;\n\t\t\t}\n\n\t\t\troom.loaded += result.messages.length;\n\t\t\tif (result.messages.length < limit) {\n\t\t\t\troom.hasMoreNext.set(false);\n\t\t\t}\n\t\t}\n\t\tawait this.unqueue();\n\t}\n\n\tasync getSurroundingMessages(message, limit = defaultLimit) {\n\t\tif (!message || !message.rid) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst w = await waitUntilWrapperExists();\n\n\t\tconst instance = Blaze.getView(w).templateInstance();\n\n\t\tif (ChatMessage.findOne({ _id: message._id, _hidden: { $ne: true } })) {\n\t\t\tconst msgElement = $(`#${message._id}`, w);\n\t\t\tif (msgElement.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst wrapper = $('.messages-box .wrapper');\n\t\t\tconst pos = wrapper.scrollTop() + msgElement.offset().top - wrapper.height() / 2;\n\t\t\twrapper.animate(\n\t\t\t\t{\n\t\t\t\t\tscrollTop: pos,\n\t\t\t\t},\n\t\t\t\t500,\n\t\t\t);\n\n\t\t\treturn setTimeout(() => msgElement.removeClass('highlight'), 500);\n\t\t}\n\n\t\tconst room = this.getRoom(message.rid);\n\t\troom.isLoading.set(true);\n\t\tlet typeName = undefined;\n\n\t\tconst subscription = ChatSubscription.findOne({ rid: message.rid });\n\t\tif (subscription) {\n\t\t\t// const { ls } = subscription;\n\t\t\ttypeName = subscription.t + subscription.name;\n\t\t} else {\n\t\t\tconst curRoomDoc = ChatRoom.findOne({ _id: message.rid });\n\t\t\ttypeName = (curRoomDoc ? curRoomDoc.t : undefined) + (curRoomDoc ? curRoomDoc.name : undefined);\n\t\t}\n\n\t\treturn Meteor.call('loadSurroundingMessages', message, limit, function (err, result) {\n\t\t\tif (!result || !result.messages) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tChatMessage.remove({ rid: message.rid });\n\t\t\tfor (const msg of Array.from(result.messages)) {\n\t\t\t\tif (msg.t !== 'command') {\n\t\t\t\t\tupsertMessage({ msg, subscription });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treadMessage.refreshUnreadMark(message.rid);\n\t\t\tRoomManager.updateMentionsMarksOfRoom(typeName);\n\n\t\t\tTracker.afterFlush(() => {\n\t\t\t\tconst wrapper = $('.messages-box .wrapper');\n\t\t\t\tconst msgElement = $(`#${message._id}`, wrapper);\n\t\t\t\tconst pos = wrapper.scrollTop() + msgElement.offset().top - wrapper.height() / 2;\n\t\t\t\twrapper.animate(\n\t\t\t\t\t{\n\t\t\t\t\t\tscrollTop: pos,\n\t\t\t\t\t},\n\t\t\t\t\t500,\n\t\t\t\t);\n\n\t\t\t\tmsgElement.addClass('highlight');\n\t\t\t\troom.isLoading.set(false);\n\t\t\t\tconst messages = wrapper[0];\n\t\t\t\tinstance.atBottom = !result.moreAfter && messages.scrollTop >= messages.scrollHeight - messages.clientHeight;\n\t\t\t\tsetTimeout(() => msgElement.removeClass('highlight'), 500);\n\t\t\t});\n\n\t\t\tif (!room.loaded) {\n\t\t\t\troom.loaded = 0;\n\t\t\t}\n\t\t\troom.loaded += result.messages.length;\n\t\t\troom.hasMore.set(result.moreBefore);\n\t\t\treturn room.hasMoreNext.set(result.moreAfter);\n\t\t});\n\t}\n\n\thasMore(rid) {\n\t\tconst room = this.getRoom(rid);\n\t\treturn room.hasMore.get();\n\t}\n\n\thasMoreNext(rid) {\n\t\tconst room = this.getRoom(rid);\n\t\treturn room.hasMoreNext.get();\n\t}\n\n\tgetMoreIfIsEmpty(rid) {\n\t\tconst room = this.getRoom(rid);\n\n\t\tif (room.loaded === undefined) {\n\t\t\treturn this.getMore(rid);\n\t\t}\n\t}\n\n\tisLoading(rid) {\n\t\tconst room = this.getRoom(rid);\n\t\treturn room.isLoading.get();\n\t}\n\n\tclear(rid) {\n\t\tChatMessage.remove({ rid });\n\t\tif (this.histories[rid]) {\n\t\t\tthis.histories[rid].hasMore.set(true);\n\t\t\tthis.histories[rid].isLoading.set(false);\n\t\t\tthis.histories[rid].loaded = undefined;\n\t\t}\n\t}\n})();\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Session } from 'meteor/session';\nimport { Tracker } from 'meteor/tracker';\nimport { Blaze } from 'meteor/blaze';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport _ from 'underscore';\n\nimport { fireGlobalEvent } from '../../../../client/lib/utils/fireGlobalEvent';\nimport { upsertMessage, RoomHistoryManager } from './RoomHistoryManager';\nimport { mainReady } from './mainReady';\nimport { menu } from './menu';\nimport { roomTypes } from '../../../utils';\nimport { callbacks } from '../../../../lib/callbacks';\nimport { Notifications } from '../../../notifications';\nimport { CachedChatRoom, ChatMessage, ChatSubscription, CachedChatSubscription, ChatRoom } from '../../../models';\nimport { CachedCollectionManager } from '../../../ui-cached-collection';\nimport { getConfig } from '../../../../client/lib/utils/getConfig';\nimport { ROOM_DATA_STREAM } from '../../../utils/stream/constants';\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\nimport { RoomManager as NewRoomManager } from '../../../../client/lib/RoomManager';\n\nconst maxRoomsOpen = parseInt(getConfig('maxRoomsOpen')) || 5;\n\nconst onDeleteMessageStream = (msg) => {\n\tChatMessage.remove({ _id: msg._id });\n\n\t// remove thread refenrece from deleted message\n\tChatMessage.update({ tmid: msg._id }, { $unset: { tmid: 1 } }, { multi: true });\n};\nconst onDeleteMessageBulkStream = ({ rid, ts, excludePinned, ignoreDiscussion, users }) => {\n\tconst query = { rid, ts };\n\tif (excludePinned) {\n\t\tquery.pinned = { $ne: true };\n\t}\n\tif (ignoreDiscussion) {\n\t\tquery.drid = { $exists: false };\n\t}\n\tif (users && users.length) {\n\t\tquery['u.username'] = { $in: users };\n\t}\n\tChatMessage.remove(query);\n};\n\nexport const RoomManager = new (function () {\n\tconst openedRooms = {};\n\tconst msgStream = new Meteor.Streamer('room-messages');\n\tconst roomStream = new Meteor.Streamer(ROOM_DATA_STREAM);\n\tconst onlineUsers = new ReactiveVar({});\n\tconst Dep = new Tracker.Dependency();\n\n\tconst handleTrackSettingsChange = (msg) => {\n\t\tconst openedRoom = Tracker.nonreactive(() => Session.get('openedRoom'));\n\t\tif (openedRoom !== msg.rid) {\n\t\t\treturn;\n\t\t}\n\n\t\tTracker.nonreactive(() => {\n\t\t\tif (msg.t === 'room_changed_privacy') {\n\t\t\t\tconst type = FlowRouter.current().route.name === 'channel' ? 'c' : 'p';\n\t\t\t\tRoomManager.close(type + FlowRouter.getParam('name'));\n\n\t\t\t\tconst subscription = ChatSubscription.findOne({ rid: msg.rid });\n\t\t\t\tconst route = subscription.t === 'c' ? 'channel' : 'group';\n\t\t\t\tFlowRouter.go(route, { name: subscription.name }, FlowRouter.current().queryParams);\n\t\t\t}\n\n\t\t\tif (msg.t === 'r') {\n\t\t\t\tconst room = ChatRoom.findOne(msg.rid);\n\t\t\t\tif (room.name !== FlowRouter.getParam('name')) {\n\t\t\t\t\tRoomManager.close(room.t + FlowRouter.getParam('name'));\n\t\t\t\t\troomTypes.openRouteLink(room.t, room, FlowRouter.current().queryParams);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tconst Cls = class {\n\t\tstatic initClass() {\n\t\t\tthis.prototype.openedRooms = openedRooms;\n\t\t\tthis.prototype.onlineUsers = onlineUsers;\n\t\t\tthis.prototype.roomStream = roomStream;\n\t\t\tthis.prototype.computation = Tracker.autorun(() => {\n\t\t\t\tconst ready = CachedChatRoom.ready.get() && mainReady.get();\n\t\t\t\tif (ready !== true) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst user = Meteor.user();\n\t\t\t\tTracker.nonreactive(() =>\n\t\t\t\t\tObject.entries(openedRooms).forEach(([typeName, record]) => {\n\t\t\t\t\t\tif (record.active !== true || record.ready === true) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst type = typeName.substr(0, 1);\n\t\t\t\t\t\tconst name = typeName.substr(1);\n\n\t\t\t\t\t\tconst room = roomTypes.findRoom(type, name, user);\n\n\t\t\t\t\t\tif (room != null) {\n\t\t\t\t\t\t\trecord.rid = room._id;\n\t\t\t\t\t\t\tRoomHistoryManager.getMoreIfIsEmpty(room._id);\n\t\t\t\t\t\t\tif (record.streamActive !== true) {\n\t\t\t\t\t\t\t\trecord.streamActive = true;\n\t\t\t\t\t\t\t\tmsgStream.on(record.rid, async (msg) => {\n\t\t\t\t\t\t\t\t\t// Should not send message to room if room has not loaded all the current messages\n\t\t\t\t\t\t\t\t\tif (RoomHistoryManager.hasMoreNext(record.rid) !== false) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t// Do not load command messages into channel\n\t\t\t\t\t\t\t\t\tif (msg.t !== 'command') {\n\t\t\t\t\t\t\t\t\t\tconst subscription = ChatSubscription.findOne({ rid: record.rid }, { reactive: false });\n\t\t\t\t\t\t\t\t\t\tconst isNew = !ChatMessage.findOne({ _id: msg._id, temp: { $ne: true } });\n\t\t\t\t\t\t\t\t\t\tupsertMessage({ msg, subscription });\n\n\t\t\t\t\t\t\t\t\t\tmsg.room = {\n\t\t\t\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\tif (isNew) {\n\t\t\t\t\t\t\t\t\t\t\tmenu.updateUnreadBars();\n\t\t\t\t\t\t\t\t\t\t\tcallbacks.run('streamNewMessage', msg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tmsg.name = room.name;\n\t\t\t\t\t\t\t\t\tTracker.afterFlush(() => RoomManager.updateMentionsMarksOfRoom(typeName));\n\n\t\t\t\t\t\t\t\t\thandleTrackSettingsChange(msg);\n\n\t\t\t\t\t\t\t\t\tcallbacks.run('streamMessage', msg);\n\n\t\t\t\t\t\t\t\t\treturn fireGlobalEvent('new-message', msg);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tNotifications.onRoom(record.rid, 'deleteMessage', onDeleteMessageStream); // eslint-disable-line no-use-before-define\n\t\t\t\t\t\t\t\tNotifications.onRoom(record.rid, 'deleteMessageBulk', onDeleteMessageBulkStream); // eslint-disable-line no-use-before-define\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trecord.ready = true;\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t\tDep.changed();\n\t\t\t});\n\t\t}\n\n\t\tgetOpenedRoomByRid(rid) {\n\t\t\treturn Object.keys(openedRooms)\n\t\t\t\t.map((typeName) => openedRooms[typeName])\n\t\t\t\t.find((openedRoom) => openedRoom.rid === rid);\n\t\t}\n\n\t\tclose(typeName) {\n\t\t\tif (openedRooms[typeName]) {\n\t\t\t\tif (openedRooms[typeName].rid != null) {\n\t\t\t\t\tmsgStream.removeAllListeners(openedRooms[typeName].rid);\n\t\t\t\t\tNotifications.unRoom(openedRooms[typeName].rid, 'deleteMessage', onDeleteMessageStream); // eslint-disable-line no-use-before-define\n\t\t\t\t\tNotifications.unRoom(openedRooms[typeName].rid, 'deleteMessageBulk', onDeleteMessageBulkStream); // eslint-disable-line no-use-before-define\n\t\t\t\t}\n\n\t\t\t\topenedRooms[typeName].ready = false;\n\t\t\t\topenedRooms[typeName].active = false;\n\t\t\t\tif (openedRooms[typeName].template != null) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tBlaze.remove(openedRooms[typeName].template);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error('Error removing template from DOM', e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdelete openedRooms[typeName].dom;\n\t\t\t\tdelete openedRooms[typeName].template;\n\n\t\t\t\tconst { rid } = openedRooms[typeName];\n\t\t\t\tdelete openedRooms[typeName];\n\n\t\t\t\tif (rid != null) {\n\t\t\t\t\tNewRoomManager.close(rid);\n\t\t\t\t\treturn RoomHistoryManager.clear(rid);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tcloseOlderRooms() {\n\t\t\tif (Object.keys(openedRooms).length <= maxRoomsOpen) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst roomsToClose = _.sortBy(_.values(openedRooms), 'lastSeen').reverse().slice(maxRoomsOpen);\n\t\t\treturn Array.from(roomsToClose).map((roomToClose) => this.close(roomToClose.typeName));\n\t\t}\n\n\t\tcloseAllRooms() {\n\t\t\tObject.keys(openedRooms).forEach((key) => {\n\t\t\t\tconst openedRoom = openedRooms[key];\n\t\t\t\tthis.close(openedRoom.typeName);\n\t\t\t});\n\t\t\tSession.set('openedRoom');\n\t\t}\n\n\t\topen(typeName) {\n\t\t\tif (openedRooms[typeName] == null) {\n\t\t\t\topenedRooms[typeName] = {\n\t\t\t\t\ttypeName,\n\t\t\t\t\tactive: false,\n\t\t\t\t\tready: false,\n\t\t\t\t\tunreadSince: new ReactiveVar(undefined),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\topenedRooms[typeName].lastSeen = new Date();\n\n\t\t\tif (openedRooms[typeName].ready) {\n\t\t\t\tthis.closeOlderRooms();\n\t\t\t}\n\n\t\t\tif (CachedChatSubscription.ready.get() === true) {\n\t\t\t\tif (openedRooms[typeName].active !== true) {\n\t\t\t\t\topenedRooms[typeName].active = true;\n\t\t\t\t\tif (this.computation) {\n\t\t\t\t\t\tthis.computation.invalidate();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tready() {\n\t\t\t\t\tDep.depend();\n\t\t\t\t\treturn openedRooms[typeName].ready;\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\texistsDomOfRoom(typeName) {\n\t\t\tconst room = openedRooms[typeName];\n\t\t\treturn (room != null ? room.dom : undefined) != null;\n\t\t}\n\n\t\tupdateUserStatus(user, status, utcOffset) {\n\t\t\tconst onlineUsersValue = onlineUsers.curValue;\n\n\t\t\tif (status === 'offline') {\n\t\t\t\tdelete onlineUsersValue[user.username];\n\t\t\t} else {\n\t\t\t\tonlineUsersValue[user.username] = {\n\t\t\t\t\t_id: user._id,\n\t\t\t\t\tstatus,\n\t\t\t\t\tutcOffset,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn onlineUsers.set(onlineUsersValue);\n\t\t}\n\n\t\tupdateMentionsMarksOfRoom(/* typeName */) {\n\t\t\t// const [ticksBar] = dom.getElementsByClassName('ticks-bar');\n\t\t\t// const [messagesBox] = dom.getElementsByClassName('messages-box');\n\t\t\t// const scrollTop = $('> .wrapper', messagesBox).scrollTop() - 50;\n\t\t\t// const totalHeight = $(' > .wrapper > ul', messagesBox).height() + 40;\n\t\t\t// if (!ticksBar) {\n\t\t\t// \treturn;\n\t\t\t// }\n\t\t\t// // TODO: thread quotes should NOT have mention links at all\n\t\t\t// const mentionsSelector = '.message .body .mention-link--me, .message .body .mention-link--group';\n\t\t\t// ticksBar.innerHTML = Array.from(messagesBox?.querySelectorAll(mentionsSelector) || [])\n\t\t\t// \t.map((mentionLink) => {\n\t\t\t// \t\tconst topOffset = $(mentionLink).offset().top + scrollTop;\n\t\t\t// \t\tconst percent = (100 / totalHeight) * topOffset;\n\t\t\t// \t\tconst className = [\n\t\t\t// \t\t\t'tick',\n\t\t\t// \t\t\tmentionLink.classList.contains('mention-link--me') && 'tick--me',\n\t\t\t// \t\t\tmentionLink.classList.contains('mention-link--group') && 'tick--group',\n\t\t\t// \t\t].filter(Boolean).join(' ');\n\t\t\t// \t\treturn `<div class=\"${ className }\" style=\"top: ${ percent }%;\"></div>`;\n\t\t\t// \t})\n\t\t\t// \t.join('');\n\t\t}\n\t};\n\tCls.initClass();\n\treturn new Cls();\n})();\n\nconst loadMissedMessages = async function (rid) {\n\tconst lastMessage = ChatMessage.findOne({ rid, _hidden: { $ne: true }, temp: { $exists: false } }, { sort: { ts: -1 }, limit: 1 });\n\n\tif (lastMessage == null) {\n\t\treturn;\n\t}\n\n\ttry {\n\t\tconst result = await callWithErrorHandling('loadMissedMessages', rid, lastMessage.ts);\n\t\tif (result) {\n\t\t\tconst subscription = ChatSubscription.findOne({ rid });\n\t\t\treturn Promise.all(Array.from(result).map((msg) => upsertMessage({ msg, subscription })));\n\t\t}\n\t\treturn [];\n\t} catch (error) {\n\t\treturn [];\n\t}\n};\n\nlet connectionWasOnline = true;\nTracker.autorun(function () {\n\tconst { connected } = Meteor.connection.status();\n\n\tif (connected === true && connectionWasOnline === false && RoomManager.openedRooms != null) {\n\t\tObject.keys(RoomManager.openedRooms).forEach((key) => {\n\t\t\tconst value = RoomManager.openedRooms[key];\n\t\t\tif (value.rid != null) {\n\t\t\t\tloadMissedMessages(value.rid);\n\t\t\t}\n\t\t});\n\t}\n\tconnectionWasOnline = connected;\n});\n\nMeteor.startup(() => {\n\t// Reload rooms after login\n\tlet currentUsername = undefined;\n\tTracker.autorun(() => {\n\t\tconst user = Meteor.user();\n\t\tif (currentUsername === undefined && (user != null ? user.username : undefined) != null) {\n\t\t\tcurrentUsername = user.username;\n\t\t\tRoomManager.closeAllRooms();\n\t\t\tconst { roomTypes: types } = roomTypes;\n\n\t\t\t// Reload only if the current route is a channel route\n\t\t\tconst roomType = Object.keys(types).find((key) => types[key].route && types[key].route.name === FlowRouter.current().route.name);\n\t\t\tif (roomType) {\n\t\t\t\tFlowRouter.reload();\n\t\t\t}\n\t\t}\n\t});\n\n\tChatMessage.find().observe({\n\t\tremoved(record) {\n\t\t\tif (RoomManager.getOpenedRoomByRid(record.rid) != null) {\n\t\t\t\tconst recordBefore = ChatMessage.findOne({ ts: { $lt: record.ts } }, { sort: { ts: -1 } });\n\t\t\t\tif (recordBefore != null) {\n\t\t\t\t\tChatMessage.update({ _id: recordBefore._id }, { $set: { tick: new Date() } });\n\t\t\t\t}\n\n\t\t\t\tconst recordAfter = ChatMessage.findOne({ ts: { $gt: record.ts } }, { sort: { ts: 1 } });\n\t\t\t\tif (recordAfter != null) {\n\t\t\t\t\treturn ChatMessage.update({ _id: recordAfter._id }, { $set: { tick: new Date() } });\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t});\n});\n\nTracker.autorun(function () {\n\tif (Meteor.userId()) {\n\t\treturn Notifications.onUser('message', function (msg) {\n\t\t\tmsg.u = msg.u || { username: 'rocket.cat' };\n\t\t\tmsg.private = true;\n\n\t\t\treturn ChatMessage.upsert({ _id: msg._id }, msg);\n\t\t});\n\t}\n});\n\ncallbacks.add('afterLogoutCleanUp', () => RoomManager.closeAllRooms(), callbacks.priority.MEDIUM, 'roommanager-after-logout-cleanup');\n\nCachedCollectionManager.onLogin(() => {\n\tNotifications.onUser('subscriptions-changed', (action, sub) => {\n\t\tconst ignored = sub && sub.ignored ? { $nin: sub.ignored } : { $exists: true };\n\n\t\tChatMessage.update({ rid: sub.rid, ignored }, { $unset: { ignored: true } }, { multi: true });\n\t\tif (sub && sub.ignored) {\n\t\t\tChatMessage.update(\n\t\t\t\t{ 'rid': sub.rid, 't': { $ne: 'command' }, 'u._id': { $in: sub.ignored } },\n\t\t\t\t{ $set: { ignored: true } },\n\t\t\t\t{ multi: true },\n\t\t\t);\n\t\t}\n\t});\n});\n","import { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Session } from 'meteor/session';\n\nimport { AccountBox } from './AccountBox';\nimport { roomTypes } from '../../../utils/client/lib/roomTypes';\nimport { Subscriptions } from '../../../models';\nimport { RoomManager } from '../../../../client/lib/RoomManager';\n\nexport const SideNav = new (class {\n\tconstructor() {\n\t\tthis.initiated = false;\n\t\tthis.sideNav = {};\n\t\tthis.flexNav = {};\n\t\tthis.animating = false;\n\t\tthis.openQueue = [];\n\t}\n\n\ttoggleFlex(status, callback) {\n\t\tif (this.animating === true) {\n\t\t\treturn;\n\t\t}\n\t\tthis.animating = true;\n\t\tif (status === -1 || (status !== 1 && this.flexNav.opened)) {\n\t\t\tthis.flexNav.opened = false;\n\t\t\tthis.flexNav.addClass('animated-hidden');\n\t\t} else {\n\t\t\tthis.flexNav.opened = true;\n\t\t\tif (window.DISABLE_ANIMATION === true) {\n\t\t\t\tthis.flexNav.removeClass('animated-hidden');\n\t\t\t} else {\n\t\t\t\tsetTimeout(() => this.flexNav.removeClass('animated-hidden'), 50);\n\t\t\t}\n\t\t}\n\n\t\tif (window.DISABLE_ANIMATION === true) {\n\t\t\t!this.flexNav.opened && this.setFlex();\n\t\t\tthis.animating = false;\n\t\t\treturn typeof callback === 'function' && callback();\n\t\t}\n\n\t\treturn setTimeout(() => {\n\t\t\t!this.flexNav.opened && this.setFlex();\n\t\t\tthis.animating = false;\n\t\t\treturn typeof callback === 'function' && callback();\n\t\t}, 500);\n\t}\n\n\tcloseFlex(callback = null) {\n\t\tconst routesNamesForRooms = roomTypes\n\t\t\t.getTypes()\n\t\t\t.filter((i) => i.route)\n\t\t\t.map((i) => i.route.name);\n\t\tif (!routesNamesForRooms.includes(FlowRouter.current().route.name)) {\n\t\t\tconst subscription = Subscriptions.findOne({ rid: RoomManager.lastRid });\n\t\t\tif (subscription) {\n\t\t\t\troomTypes.openRouteLink(subscription.t, subscription, FlowRouter.current().queryParams);\n\t\t\t} else {\n\t\t\t\tFlowRouter.go('home');\n\t\t\t}\n\t\t}\n\t\tif (this.animating === true) {\n\t\t\treturn;\n\t\t}\n\t\tthis.toggleFlex(-1, callback);\n\t}\n\n\tflexStatus() {\n\t\treturn this.flexNav.opened;\n\t}\n\n\tsetFlex(template, data = {}) {\n\t\tSession.set('flex-nav-template', template);\n\t\treturn Session.set('flex-nav-data', data);\n\t}\n\n\tgetFlex() {\n\t\treturn {\n\t\t\ttemplate: Session.get('flex-nav-template'),\n\t\t\tdata: Session.get('flex-nav-data'),\n\t\t};\n\t}\n\n\ttoggleCurrent() {\n\t\tif (this.flexNav && this.flexNav.opened) {\n\t\t\treturn this.closeFlex();\n\t\t}\n\t\treturn AccountBox.toggle();\n\t}\n\n\tvalidate() {\n\t\tconst invalid = [];\n\t\tthis.sideNav.find('input.required').each(function () {\n\t\t\tif (!this.value.length) {\n\t\t\t\treturn invalid.push($(this).prev('label').html());\n\t\t\t}\n\t\t});\n\t\tif (invalid.length) {\n\t\t\treturn invalid;\n\t\t}\n\t\treturn false;\n\t}\n\n\topenFlex(callback = () => {}) {\n\t\tif (!this.initiated) {\n\t\t\treturn this.openQueue.push({\n\t\t\t\tconfig: this.getFlex(),\n\t\t\t\tcallback,\n\t\t\t});\n\t\t}\n\t\tif (this.animating === true) {\n\t\t\treturn;\n\t\t}\n\t\tthis.toggleFlex(1, callback);\n\t}\n\n\tinit() {\n\t\tthis.sideNav = $('.sidebar');\n\t\tthis.flexNav = this.sideNav.find('.flex-nav');\n\t\tthis.setFlex('');\n\t\tthis.initiated = true;\n\t\tif (this.openQueue.length > 0) {\n\t\t\tthis.openQueue.forEach((item) => {\n\t\t\t\tthis.setFlex(item.config.template, item.config.data);\n\t\t\t\treturn this.openFlex(item.callback);\n\t\t\t});\n\t\t\tthis.openQueue = [];\n\t\t}\n\t}\n})();\n","import { Template } from 'meteor/templating';\nimport { ReactiveVar } from 'meteor/reactive-var';\n\nimport './collapseArrow.html';\n\nexport const createCollapseable = (template, getInicialFromInstance = () => false) => {\n\ttemplate.onCreated(function () {\n\t\tthis.collapsedMedia = new ReactiveVar(getInicialFromInstance(Template.instance()));\n\t});\n\ttemplate.helpers({\n\t\tcollapsed() {\n\t\t\treturn Template.instance().collapsedMedia.get();\n\t\t},\n\t\tcollapsedMediaVar() {\n\t\t\treturn Template.instance().collapsedMedia;\n\t\t},\n\t});\n};\n\nTemplate.collapseArrow.events({\n\t'click .collapse-switch'(e, i) {\n\t\te.preventDefault();\n\t\ti.data.collapsedMedia.set(!i.data.collapsedMedia.get());\n\t},\n});\n\nTemplate.collapseArrow.helpers({\n\tcollapsed() {\n\t\treturn this.collapsedMedia.get();\n\t},\n});\n","import { ReactiveVar } from 'meteor/reactive-var';\n\nexport let mainReady = new ReactiveVar(false); // eslint-disable-line\n","import { Session } from 'meteor/session';\nimport { Meteor } from 'meteor/meteor';\nimport _ from 'underscore';\nimport { Emitter } from '@rocket.chat/emitter';\n\nimport { isRtl } from '../../../utils';\n\nconst sideNavW = 280;\nconst map = (x, in_min, in_max, out_min, out_max) => ((x - in_min) * (out_max - out_min)) / (in_max - in_min) + out_min;\n\nexport const menu = new (class extends Emitter {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._open = false;\n\t\tthis.updateUnreadBars = _.throttle(() => {\n\t\t\tif (this.list == null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst listOffset = this.list.offset();\n\t\t\tconst listHeight = this.list.height();\n\t\t\tlet showTop = false;\n\t\t\tlet showBottom = false;\n\t\t\t$('li.sidebar-item--unread').each(function () {\n\t\t\t\tif ($(this).offset().top < listOffset.top - $(this).height()) {\n\t\t\t\t\tshowTop = true;\n\t\t\t\t}\n\t\t\t\tif ($(this).offset().top > listOffset.top + listHeight) {\n\t\t\t\t\tshowBottom = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (showTop === true) {\n\t\t\t\t$('.top-unread-rooms').removeClass('hidden');\n\t\t\t} else {\n\t\t\t\t$('.top-unread-rooms').addClass('hidden');\n\t\t\t}\n\t\t\tif (showBottom === true) {\n\t\t\t\treturn $('.bottom-unread-rooms').removeClass('hidden');\n\t\t\t}\n\t\t\treturn $('.bottom-unread-rooms').addClass('hidden');\n\t\t}, 200);\n\t\tthis.sideNavW = sideNavW;\n\t}\n\n\tget isRtl() {\n\t\treturn isRtl(Meteor._localStorage.getItem('userLanguage'));\n\t}\n\n\ttouchstart(e) {\n\t\tthis.movestarted = false;\n\t\tthis.blockmove = false;\n\t\tthis.touchstartX = undefined;\n\t\tthis.touchstartY = undefined;\n\t\tthis.diff = 0;\n\t\tif (e.target === this.sidebarWrap[0] || $(e.target).closest('.main-content').length > 0) {\n\t\t\tthis.closePopover();\n\t\t\tthis.touchstartX = e.touches[0].clientX;\n\t\t\tthis.touchstartY = e.touches[0].clientY;\n\t\t\tthis.mainContent = $('.main-content');\n\t\t}\n\t}\n\n\ttouchmove(e) {\n\t\tif (this.touchstartX == null) {\n\t\t\treturn;\n\t\t}\n\t\tconst [touch] = e.touches;\n\t\tconst diffX = touch.clientX - this.touchstartX;\n\t\tconst diffY = touch.clientY - this.touchstartY;\n\t\tconst absX = Math.abs(diffX);\n\t\tconst absY = Math.abs(diffY);\n\n\t\tif (!this.movestarted && absY > 5) {\n\t\t\tthis.blockmove = true;\n\t\t}\n\t\tif (this.blockmove) {\n\t\t\treturn;\n\t\t}\n\t\tthis.sidebar.css('transition', 'none');\n\t\tthis.sidebarWrap.css('transition', 'none');\n\t\tif (this.movestarted === true || absX > 5) {\n\t\t\tthis.movestarted = true;\n\t\t\tif (this.isRtl) {\n\t\t\t\tif (this.isOpen()) {\n\t\t\t\t\tthis.diff = -sideNavW + diffX;\n\t\t\t\t} else {\n\t\t\t\t\tthis.diff = diffX;\n\t\t\t\t}\n\t\t\t\tif (this.diff < -sideNavW) {\n\t\t\t\t\tthis.diff = -sideNavW;\n\t\t\t\t}\n\t\t\t\tif (this.diff > 0) {\n\t\t\t\t\tthis.diff = 0;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.isOpen()) {\n\t\t\t\t\tthis.diff = sideNavW + diffX;\n\t\t\t\t} else {\n\t\t\t\t\tthis.diff = diffX;\n\t\t\t\t}\n\t\t\t\tif (this.diff > sideNavW) {\n\t\t\t\t\tthis.diff = sideNavW;\n\t\t\t\t}\n\t\t\t\tif (this.diff < 0) {\n\t\t\t\t\tthis.diff = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// if (map((this.diff / sideNavW), 0, 1, -.1, .8) > 0) {\n\t\t\tthis.sidebar.css('box-shadow', '0 0 15px 1px rgba(0,0,0,.3)');\n\t\t\t// this.sidebarWrap.css('z-index', '9998');\n\t\t\tthis.translate(this.diff);\n\t\t\t// }\n\t\t}\n\t}\n\n\ttranslate(diff, width = sideNavW) {\n\t\tif (diff === undefined) {\n\t\t\tdiff = this.isRtl ? -1 * sideNavW : sideNavW;\n\t\t}\n\t\tthis.sidebarWrap.css('width', '100%');\n\t\tthis.wrapper.css('overflow', 'hidden');\n\t\tthis.sidebarWrap.css('background-color', '#000');\n\t\tthis.sidebarWrap.css('opacity', map(Math.abs(diff) / width, 0, 1, -0.1, 0.8).toFixed(2));\n\t\tthis.isRtl\n\t\t\t? this.sidebar.css('transform', `translate3d(${(sideNavW + diff).toFixed(3)}px, 0 , 0)`)\n\t\t\t: this.sidebar.css('transform', `translate3d(${(diff - sideNavW).toFixed(3)}px, 0 , 0)`);\n\t}\n\n\ttouchend() {\n\t\tconst [max, min] = [sideNavW * 0.76, sideNavW * 0.24];\n\t\tif (this.movestarted !== true) {\n\t\t\treturn;\n\t\t}\n\t\tthis.movestarted = false;\n\t\tif (this.isRtl) {\n\t\t\tif (this.isOpen()) {\n\t\t\t\treturn this.diff >= -max ? this.close() : this.open();\n\t\t\t}\n\t\t\tif (this.diff <= -min) {\n\t\t\t\treturn this.open();\n\t\t\t}\n\t\t\treturn this.close();\n\t\t}\n\t\tif (this.isOpen()) {\n\t\t\tif (this.diff >= max) {\n\t\t\t\treturn this.open();\n\t\t\t}\n\t\t\treturn this.close();\n\t\t}\n\t\tif (this.diff >= min) {\n\t\t\treturn this.open();\n\t\t}\n\t\treturn this.close();\n\t}\n\n\tinit() {\n\t\tthis.menu = $('.sidebar');\n\t\tthis.sidebar = this.menu;\n\t\tthis.sidebarWrap = $('.sidebar-wrap');\n\t\tthis.wrapper = $('.messages-box > .wrapper');\n\t\tconst ignore = (fn) => (event) => document.body.clientWidth <= 780 && fn(event);\n\n\t\tdocument.body.addEventListener(\n\t\t\t'touchstart',\n\t\t\tignore((e) => this.touchstart(e)),\n\t\t);\n\t\tdocument.body.addEventListener(\n\t\t\t'touchmove',\n\t\t\tignore((e) => this.touchmove(e)),\n\t\t);\n\t\tdocument.body.addEventListener(\n\t\t\t'touchend',\n\t\t\tignore((e) => this.touchend(e)),\n\t\t);\n\t\tthis.sidebarWrap.on(\n\t\t\t'click',\n\t\t\tignore((e) => {\n\t\t\t\te.target === this.sidebarWrap[0] && this.isOpen() && this.emit('clickOut', e);\n\t\t\t}),\n\t\t);\n\t\tthis.on('close', () => {\n\t\t\tthis.sidebarWrap.css('width', '');\n\t\t\t// this.sidebarWrap.css('z-index', '');\n\t\t\tthis.sidebarWrap.css('background-color', '');\n\t\t\tthis.sidebar.css('transform', '');\n\t\t\tthis.sidebar.css('box-shadow', '');\n\t\t\tthis.sidebar.css('transition', '');\n\t\t\tthis.sidebarWrap.css('transition', '');\n\t\t\tthis.wrapper && this.wrapper.css('overflow', '');\n\t\t});\n\t\tthis.on(\n\t\t\t'open',\n\t\t\tignore(() => {\n\t\t\t\tthis.sidebar.css('box-shadow', '0 0 15px 1px rgba(0,0,0,.3)');\n\t\t\t\t// this.sidebarWrap.css('z-index', '9998');\n\t\t\t\tthis.translate();\n\t\t\t}),\n\t\t);\n\t\tthis.mainContent = $('.main-content');\n\n\t\tthis.list = $('.rooms-list');\n\t\tthis._open = false;\n\t\tSession.set('isMenuOpen', this._open);\n\t}\n\n\tclosePopover() {\n\t\treturn this.menu.find('[data-popover=\"anchor\"]:checked').prop('checked', false).length > 0;\n\t}\n\n\tisOpen() {\n\t\treturn Session.get('isMenuOpen');\n\t}\n\n\topen() {\n\t\tthis._open = true;\n\t\tSession.set('isMenuOpen', this._open);\n\t\tthis.emit('open');\n\t}\n\n\tclose() {\n\t\tthis._open = false;\n\t\tSession.set('isMenuOpen', this._open);\n\t\tthis.emit('close');\n\t}\n\n\ttoggle() {\n\t\treturn this.isOpen() ? this.close() : this.open();\n\t}\n})();\n\nlet passClosePopover = false;\n\nmenu.on('clickOut', function () {\n\tif (!menu.closePopover()) {\n\t\tpassClosePopover = true;\n\t\tmenu.close();\n\t}\n});\n\nmenu.on('close', function () {\n\tif (!menu.sidebar) {\n\t\treturn;\n\t}\n\n\tmenu.sidebar.css('transition', '');\n\tmenu.sidebarWrap.css('transition', '');\n\tif (passClosePopover) {\n\t\tpassClosePopover = false;\n\t\treturn;\n\t}\n\tmenu.closePopover();\n});\n","export const messageArgs = (context) => (context && context._arguments && context._arguments[1] && context._arguments[1].hash) || context;\n","class MessageBoxActions {\n\tconstructor() {\n\t\tthis.actions = {};\n\t}\n\n\tadd(group, label, config) {\n\t\tif (!group && !label && !config) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.actions[group]) {\n\t\t\tthis.actions[group] = [];\n\t\t}\n\n\t\tconst actionExists = this.actions[group].find((action) => action.label === label);\n\n\t\tif (actionExists) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.actions[group].push({ ...config, label });\n\t}\n\n\tremove(group, expression) {\n\t\tif (!group || !this.actions[group]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.actions[group] = this.actions[group].filter((action) => !expression.test(action.id));\n\t\treturn this.actions[group];\n\t}\n\n\tget(group) {\n\t\tif (!group) {\n\t\t\treturn Object.keys(this.actions).reduce((ret, key) => {\n\t\t\t\tconst actions = this.actions[key].filter((action) => !action.condition || action.condition());\n\t\t\t\tif (actions.length) {\n\t\t\t\t\tret[key] = actions;\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}, {});\n\t\t}\n\n\t\treturn this.actions[group].filter((action) => !action.condition || action.condition());\n\t}\n\n\tgetById(id) {\n\t\tconst messageActions = this.actions;\n\t\tlet actions = [];\n\t\tObject.keys(messageActions).forEach(function (action) {\n\t\t\tactions = actions.concat(messageActions[action]);\n\t\t});\n\n\t\treturn actions.filter((action) => action.id === id);\n\t}\n}\n\nexport const messageBox = {\n\tactions: new MessageBoxActions(),\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Tracker } from 'meteor/tracker';\n\nimport { Subscriptions, Rooms, Users } from '../../../models/client';\nimport { hasPermission } from '../../../authorization/client';\nimport { settings } from '../../../settings/client';\nimport { getUserPreference, roomTypes } from '../../../utils/client';\nimport { AutoTranslate } from '../../../autotranslate/client';\nimport { fireGlobalEvent } from '../../../../client/lib/utils/fireGlobalEvent';\nimport { actionLinks } from '../../../action-links/client';\nimport { goToRoomById } from '../../../../client/lib/utils/goToRoomById';\nimport { isLayoutEmbedded } from '../../../../client/lib/utils/isLayoutEmbedded';\nimport { handleError } from '../../../../client/lib/utils/handleError';\n\nconst fields = {\n\t'name': 1,\n\t'username': 1,\n\t'settings.preferences.enableMessageParserEarlyAdoption': 1,\n\t'settings.preferences.showMessageInMainThread': 1,\n\t'settings.preferences.autoImageLoad': 1,\n\t'settings.preferences.saveMobileBandwidth': 1,\n\t'settings.preferences.collapseMediaByDefault': 1,\n\t'settings.preferences.hideRoles': 1,\n};\n\nexport function messageContext({ rid } = Template.instance()) {\n\tconst uid = Meteor.userId();\n\tconst user = Users.findOne({ _id: uid }, { fields }) || {};\n\tconst instance = Template.instance();\n\tconst openThread = (e) => {\n\t\tconst { rid, mid, tmid } = e.currentTarget.dataset;\n\t\tconst room = Rooms.findOne({ _id: rid });\n\t\tFlowRouter.go(\n\t\t\tFlowRouter.getRouteName(),\n\t\t\t{\n\t\t\t\trid,\n\t\t\t\tname: room.name,\n\t\t\t\ttab: 'thread',\n\t\t\t\tcontext: tmid || mid,\n\t\t\t},\n\t\t\t{\n\t\t\t\tjump: tmid && tmid !== mid && mid && mid,\n\t\t\t},\n\t\t);\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t};\n\n\tconst runAction = isLayoutEmbedded()\n\t\t? (msg, e) => {\n\t\t\t\tconst { actionlink } = e.currentTarget.dataset;\n\t\t\t\treturn fireGlobalEvent('click-action-link', {\n\t\t\t\t\tactionlink,\n\t\t\t\t\tvalue: msg._id,\n\t\t\t\t\tmessage: msg,\n\t\t\t\t});\n\t\t  }\n\t\t: (msg, e) => {\n\t\t\t\tconst { actionlink } = e.currentTarget.dataset;\n\t\t\t\tactionLinks.run(actionlink, msg._id, instance, (err) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\thandleError(err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t  };\n\n\tconst openDiscussion = (e) => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tconst { drid } = e.currentTarget.dataset;\n\t\tgoToRoomById(drid);\n\t};\n\n\tconst replyBroadcast = (e) => {\n\t\tconst { username, mid } = e.currentTarget.dataset;\n\t\troomTypes.openRouteLink('d', { name: username }, { ...FlowRouter.current().queryParams, reply: mid });\n\t};\n\n\treturn {\n\t\tu: user,\n\t\troom: Tracker.nonreactive(() =>\n\t\t\tRooms.findOne(\n\t\t\t\t{ _id: rid },\n\t\t\t\t{\n\t\t\t\t\tfields: {\n\t\t\t\t\t\t_updatedAt: 0,\n\t\t\t\t\t\tlastMessage: 0,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t),\n\t\t),\n\t\tsubscription: Subscriptions.findOne(\n\t\t\t{ rid },\n\t\t\t{\n\t\t\t\tfields: {\n\t\t\t\t\tname: 1,\n\t\t\t\t\tautoTranslate: 1,\n\t\t\t\t\trid: 1,\n\t\t\t\t\ttunread: 1,\n\t\t\t\t\ttunreadUser: 1,\n\t\t\t\t\ttunreadGroup: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t),\n\t\tactions: {\n\t\t\topenThread() {\n\t\t\t\treturn openThread;\n\t\t\t},\n\t\t\trunAction(msg) {\n\t\t\t\treturn () => (e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\trunAction(msg, e);\n\t\t\t\t};\n\t\t\t},\n\t\t\topenDiscussion() {\n\t\t\t\treturn openDiscussion;\n\t\t\t},\n\t\t\treplyBroadcast() {\n\t\t\t\treturn replyBroadcast;\n\t\t\t},\n\t\t},\n\t\tsettings: {\n\t\t\ttranslateLanguage: AutoTranslate.getLanguage(rid),\n\t\t\tshowMessageInMainThread: getUserPreference(user, 'showMessageInMainThread'),\n\t\t\tautoImageLoad: getUserPreference(user, 'autoImageLoad'),\n\t\t\tenableMessageParserEarlyAdoption: getUserPreference(user, 'enableMessageParserEarlyAdoption'),\n\t\t\tsaveMobileBandwidth: Meteor.Device.isPhone() && getUserPreference(user, 'saveMobileBandwidth'),\n\t\t\tcollapseMediaByDefault: getUserPreference(user, 'collapseMediaByDefault'),\n\t\t\tshowreply: true,\n\t\t\tshowReplyButton: true,\n\t\t\thasPermissionDeleteMessage: hasPermission('delete-message', rid),\n\t\t\thasPermissionDeleteOwnMessage: hasPermission('delete-own-message'),\n\t\t\thideRoles: !settings.get('UI_DisplayRoles') || getUserPreference(user, 'hideRoles'),\n\t\t\tUI_Use_Real_Name: settings.get('UI_Use_Real_Name'),\n\t\t\tChatops_Username: settings.get('Chatops_Username'),\n\t\t\tAutoTranslate_Enabled: settings.get('AutoTranslate_Enabled'),\n\t\t\tMessage_AllowEditing: settings.get('Message_AllowEditing'),\n\t\t\tMessage_AllowEditing_BlockEditInMinutes: settings.get('Message_AllowEditing_BlockEditInMinutes'),\n\t\t\tMessage_ShowEditedStatus: settings.get('Message_ShowEditedStatus'),\n\t\t\tAPI_Embed: settings.get('API_Embed'),\n\t\t\tAPI_EmbedDisabledFor: settings.get('API_EmbedDisabledFor'),\n\t\t\tMessage_GroupingPeriod: settings.get('Message_GroupingPeriod') * 1000,\n\t\t},\n\t};\n}\n","import { Meteor } from 'meteor/meteor';\nimport { Blaze } from 'meteor/blaze';\nimport { Template } from 'meteor/templating';\n\nimport { t, getUserPreference } from '../../../utils';\nimport './modal.html';\nimport { handleError } from '../../../../client/lib/utils/handleError';\n\nlet modalStack = [];\n\nconst createModal = (config = {}, fn, onCancel) => {\n\tconfig.confirmButtonText = config.confirmButtonText || (config.type === 'error' ? t('Ok') : t('Send'));\n\tconfig.cancelButtonText = config.cancelButtonText || t('Cancel');\n\tconfig.closeOnConfirm = config.closeOnConfirm == null ? true : config.closeOnConfirm;\n\tconfig.showConfirmButton = config.showConfirmButton == null ? true : config.showConfirmButton;\n\tconfig.showFooter = config.showConfirmButton === true || config.showCancelButton === true;\n\tconfig.confirmOnEnter = config.confirmOnEnter == null ? true : config.confirmOnEnter;\n\tconfig.closeOnEscape = config.closeOnEscape == null ? true : config.closeOnEscape;\n\n\tif (config.type === 'input') {\n\t\tconfig.input = true;\n\t\tconfig.type = false;\n\n\t\tif (!config.inputType) {\n\t\t\tconfig.inputType = 'text';\n\t\t}\n\t}\n\n\tlet renderedModal;\n\tlet timer;\n\n\tconst instance = {\n\t\t...config,\n\n\t\trender: () => {\n\t\t\tif (renderedModal) {\n\t\t\t\trenderedModal.firstNode().style.display = '';\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\trenderedModal = Blaze.renderWithData(Template.rc_modal, instance, document.body);\n\n\t\t\tif (config.timer) {\n\t\t\t\ttimer = setTimeout(() => {\n\t\t\t\t\tinstance.close();\n\t\t\t\t}, config.timer);\n\t\t\t}\n\t\t},\n\n\t\thide: () => {\n\t\t\tif (renderedModal) {\n\t\t\t\trenderedModal.firstNode().style.display = 'none';\n\t\t\t}\n\n\t\t\tif (timer) {\n\t\t\t\tclearTimeout(timer);\n\t\t\t\ttimer = undefined;\n\t\t\t}\n\t\t},\n\n\t\tdestroy: () => {\n\t\t\tif (renderedModal) {\n\t\t\t\tBlaze.remove(renderedModal);\n\t\t\t\trenderedModal = undefined;\n\t\t\t}\n\n\t\t\tif (timer) {\n\t\t\t\tclearTimeout(timer);\n\t\t\t\ttimer = undefined;\n\t\t\t}\n\t\t},\n\n\t\tclose: () => {\n\t\t\tif (onCancel) {\n\t\t\t\tonCancel.call(instance);\n\t\t\t}\n\t\t\tinstance.destroy();\n\t\t\tmodalStack = modalStack.filter((modal) => modal !== instance);\n\t\t\tif (modalStack.length) {\n\t\t\t\tmodalStack[modalStack.length - 1].render();\n\t\t\t}\n\t\t},\n\n\t\tconfirm: (value) => {\n\t\t\tconfig.closeOnConfirm && instance.close();\n\n\t\t\tif (fn) {\n\t\t\t\tfn.call(instance, value);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tinstance.close();\n\t\t},\n\n\t\tcancel: () => {\n\t\t\tinstance.close();\n\t\t},\n\n\t\tshowInputError: (text) => {\n\t\t\tconst errorEl = document.querySelector('.rc-modal__content-error');\n\t\t\terrorEl.innerHTML = text;\n\t\t\terrorEl.style.display = 'block';\n\t\t},\n\t};\n\n\treturn instance;\n};\n\nexport const modal = {\n\topen: (config = {}, fn, onCancel) => {\n\t\tmodalStack.forEach((instance) => {\n\t\t\tinstance.destroy();\n\t\t});\n\t\tmodalStack = [];\n\n\t\tconst instance = createModal(config, fn, onCancel);\n\n\t\tif (config.dontAskAgain) {\n\t\t\tconst dontAskAgainList = getUserPreference(Meteor.userId(), 'dontAskAgainList');\n\n\t\t\tif (dontAskAgainList && dontAskAgainList.some((dontAsk) => dontAsk.action === config.dontAskAgain.action)) {\n\t\t\t\tinstance.confirm(true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tinstance.render();\n\t\tmodalStack.push(instance);\n\t},\n\tpush: (config = {}, fn, onCancel) => {\n\t\tconst instance = createModal(config, fn, onCancel);\n\n\t\tmodalStack.forEach((instance) => {\n\t\t\tinstance.hide();\n\t\t});\n\t\tinstance.render();\n\t\tmodalStack.push(instance);\n\t\treturn instance;\n\t},\n\tcancel: () => {\n\t\tif (modalStack.length) {\n\t\t\tmodalStack[modalStack.length - 1].cancel();\n\t\t}\n\t},\n\tclose: () => {\n\t\tif (modalStack.length) {\n\t\t\tmodalStack[modalStack.length - 1].close();\n\t\t}\n\t},\n\tconfirm: (value) => {\n\t\tif (modalStack.length) {\n\t\t\tmodalStack[modalStack.length - 1].confirm(value);\n\t\t}\n\t},\n\tshowInputError: (text) => {\n\t\tif (modalStack.length) {\n\t\t\tmodalStack[modalStack.length - 1].showInputError(text);\n\t\t}\n\t},\n\tonKeyDown: (event) => {\n\t\tif (!modalStack.length) {\n\t\t\treturn;\n\t\t}\n\t\tconst instance = modalStack[modalStack.length - 1];\n\t\tif (event.key === 'Escape') {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tinstance.close();\n\t\t}\n\n\t\tif (instance && instance.confirmOnEnter && event.key === 'Enter') {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tif (instance.input) {\n\t\t\t\treturn instance.confirm($('.js-modal-input').val());\n\t\t\t}\n\n\t\t\tinstance.confirm(true);\n\t\t}\n\t},\n};\n\nTemplate.rc_modal.helpers({\n\tshowFooter() {\n\t\tconst { showCancelButton, showConfirmButton } = this;\n\t\treturn showCancelButton || showConfirmButton;\n\t},\n\thasAction() {\n\t\treturn !!this.action;\n\t},\n\ttype() {\n\t\treturn this.type && `rc-modal__content-icon rc-modal__content-icon--modal-${this.type}`;\n\t},\n\tmodalIcon() {\n\t\tswitch (this.type) {\n\t\t\tcase 'success':\n\t\t\t\treturn 'checkmark-circled';\n\t\t\tcase 'error':\n\t\t\t\treturn 'circle-cross';\n\t\t\tcase 'info':\n\t\t\t\treturn 'info-circled';\n\t\t\tdefault:\n\t\t\t\treturn `modal-${this.type}`;\n\t\t}\n\t},\n});\n\nTemplate.rc_modal.onRendered(function () {\n\tthis.oldFocus = document.activeElement;\n\tif (this.data.input) {\n\t\t$('.js-modal-input', this.firstNode).focus();\n\t} else if (this.data.showConfirmButton && this.data.confirmOnEnter) {\n\t\t$('.js-confirm', this.firstNode).focus();\n\t}\n\tif (this.data.onRendered) {\n\t\tthis.data.onRendered();\n\t}\n\tthis.data.closeOnEscape && document.addEventListener('keydown', modal.onKeyDown);\n});\n\nTemplate.rc_modal.onDestroyed(function () {\n\tthis.oldFocus && this.oldFocus.focus();\n\tdocument.removeEventListener('keydown', modal.onKeyDown);\n});\n\nTemplate.rc_modal.events({\n\t'click .js-action'(event, instance) {\n\t\t!this.action || this.action.call(instance.data.data, event, instance);\n\t\tevent.stopPropagation();\n\t\tthis.close();\n\t},\n\t'click .js-input-action'(e, instance) {\n\t\t!this.inputAction || this.inputAction.call(instance.data.data, e, instance);\n\t\te.stopPropagation();\n\t},\n\t'click .js-close'(e) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tthis.cancel();\n\t},\n\t'click .js-confirm'(event, instance) {\n\t\tevent.stopPropagation();\n\t\tconst { dontAskAgain } = instance.data;\n\t\tif (dontAskAgain && document.getElementById('dont-ask-me-again').checked) {\n\t\t\tconst dontAskAgainObject = {\n\t\t\t\taction: dontAskAgain.action,\n\t\t\t\tlabel: dontAskAgain.label,\n\t\t\t};\n\n\t\t\tlet dontAskAgainList = getUserPreference(Meteor.userId(), 'dontAskAgainList');\n\t\t\tif (dontAskAgainList) {\n\t\t\t\tdontAskAgainList.push(dontAskAgainObject);\n\t\t\t} else {\n\t\t\t\tdontAskAgainList = [dontAskAgainObject];\n\t\t\t}\n\n\t\t\tMeteor.call('saveUserPreferences', { dontAskAgainList }, function (error) {\n\t\t\t\tif (error) {\n\t\t\t\t\treturn handleError(error);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (instance.data.input) {\n\t\t\tthis.confirm(document.getElementsByClassName('js-modal-input')[0].value);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.confirm(true);\n\t},\n\t'click .rc-modal-wrapper'(event, instance) {\n\t\tif (instance.data.allowOutsideClick === false) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (event.currentTarget === event.target) {\n\t\t\tevent.stopPropagation();\n\t\t\tthis.close();\n\t\t}\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Session } from 'meteor/session';\nimport _ from 'underscore';\n\nimport { appLayout } from '../../../../client/lib/appLayout';\nimport { Messages, ChatSubscription } from '../../../models';\nimport { settings } from '../../../settings';\nimport { callbacks } from '../../../../lib/callbacks';\nimport { roomTypes } from '../../../utils';\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\nimport { call } from '../../../../client/lib/utils/call';\nimport { RoomManager, RoomHistoryManager } from '..';\nimport { RoomManager as NewRoomManager } from '../../../../client/lib/RoomManager';\nimport { Rooms } from '../../../models/client';\nimport { fireGlobalEvent } from '../../../../client/lib/utils/fireGlobalEvent';\n\nwindow.currentTracker = undefined;\n\n// cleanup session when hot reloading\nSession.set('openedRoom', null);\n\nNewRoomManager.on('changed', (rid) => {\n\tSession.set('openedRoom', rid);\n\tRoomManager.openedRoom = rid;\n});\n\nexport const openRoom = async function (type, name, render = true) {\n\twindow.currentTracker && window.currentTracker.stop();\n\twindow.currentTracker = Tracker.autorun(async function (c) {\n\t\tconst user = Meteor.user();\n\t\tif ((user && user.username == null) || (user == null && settings.get('Accounts_AllowAnonymousRead') === false)) {\n\t\t\tappLayout.renderMainLayout();\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst room = roomTypes.findRoom(type, name, user) || (await call('getRoomByTypeAndName', type, name));\n\t\t\tRooms.upsert({ _id: room._id }, _.omit(room, '_id'));\n\n\t\t\tif (room._id !== name && type === 'd') {\n\t\t\t\t// Redirect old url using username to rid\n\t\t\t\tRoomManager.close(type + name);\n\t\t\t\treturn FlowRouter.go('direct', { rid: room._id }, FlowRouter.current().queryParams);\n\t\t\t}\n\n\t\t\tif (room._id === Session.get('openedRoom') && !FlowRouter.getQueryParam('msg')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tRoomManager.open(type + name);\n\n\t\t\tif (render) {\n\t\t\t\tappLayout.renderMainLayout({ center: 'room' });\n\t\t\t}\n\n\t\t\tc.stop();\n\n\t\t\tif (window.currentTracker) {\n\t\t\t\twindow.currentTracker = undefined;\n\t\t\t}\n\n\t\t\tNewRoomManager.open(room._id);\n\n\t\t\tfireGlobalEvent('room-opened', _.omit(room, 'usernames'));\n\n\t\t\tSession.set('editRoomTitle', false);\n\t\t\t// KonchatNotification.removeRoomNotification(params._id)\n\t\t\t// update user's room subscription\n\t\t\tconst sub = ChatSubscription.findOne({ rid: room._id });\n\t\t\tif (sub && sub.open === false) {\n\t\t\t\tcallWithErrorHandling('openRoom', room._id);\n\t\t\t}\n\n\t\t\tif (FlowRouter.getQueryParam('msg')) {\n\t\t\t\tconst messageId = FlowRouter.getQueryParam('msg');\n\t\t\t\tconst msg = { _id: messageId, rid: room._id };\n\n\t\t\t\tconst message = Messages.findOne({ _id: msg._id }) || (await callWithErrorHandling('getMessages', [msg._id]))[0];\n\n\t\t\t\tif (message && (message.tmid || message.tcount)) {\n\t\t\t\t\treturn FlowRouter.setParams({ tab: 'thread', context: message.tmid || message._id });\n\t\t\t\t}\n\n\t\t\t\tRoomHistoryManager.getSurroundingMessages(msg);\n\t\t\t\tFlowRouter.setQueryParams({\n\t\t\t\t\tmsg: undefined,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn callbacks.run('enter-room', sub);\n\t\t} catch (error) {\n\t\t\tc.stop();\n\t\t\tif (type === 'd') {\n\t\t\t\ttry {\n\t\t\t\t\tconst { rid } = await call('createDirectMessage', ...name.split(', '));\n\t\t\t\t\treturn FlowRouter.go('direct', { rid }, FlowRouter.current().queryParams);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t}\n\t\t\t}\n\t\t\tSession.set('roomNotFound', { type, name, error });\n\t\t\tappLayout.renderMainLayout({ center: 'roomNotFound' });\n\t\t}\n\t});\n};\n","import './popout.html';\nimport { Blaze } from 'meteor/blaze';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nimport { callbacks } from '../../../../lib/callbacks';\n\nexport const popout = {\n\tcontext: null,\n\tisAudioOnly: false,\n\tshowVideoControls: true,\n\tshowStreamControls: false,\n\tx: 0,\n\ty: 0,\n\topen(config = {}, fn) {\n\t\tthis.close();\n\t\tthis.context = Blaze.renderWithData(Template.popout, config, document.body);\n\t\tthis.fn = fn;\n\t\tthis.config = config;\n\t\tthis.onCloseCallback = config.onCloseCallback || null;\n\t\tthis.timer = null;\n\t\tif (config.timer) {\n\t\t\tthis.timer = setTimeout(() => this.close(), config.timer);\n\t\t}\n\t\tif (config.data) {\n\t\t\tthis.isAudioOnly = config.data.isAudioOnly;\n\t\t\tthis.showVideoControls = config.data.showVideoControls;\n\t\t\tthis.showStreamControls = config.data.showStreamControls;\n\t\t}\n\t},\n\tclose() {\n\t\tif (this.context) {\n\t\t\tBlaze.remove(this.context);\n\t\t}\n\t\tthis.context = null;\n\t\tthis.fn = null;\n\t\tif (this.timer) {\n\t\t\tclearTimeout(this.timer);\n\t\t}\n\t\tif (typeof this.onCloseCallback === 'function') {\n\t\t\tthis.onCloseCallback();\n\t\t}\n\t},\n\tdragstart(event) {\n\t\tif (!event.target.classList.contains('dropzone-overlay')) {\n\t\t\tconst popoutElement = document.querySelector('.rc-popout-wrapper');\n\t\t\tsetTimeout(function () {\n\t\t\t\tpopoutElement.style.display = 'none';\n\t\t\t}, 0);\n\t\t}\n\t},\n\tdragover(event) {\n\t\tconst e = event.originalEvent || event;\n\t\te.dataTransfer.dropEffect = 'move';\n\t\te.preventDefault();\n\t},\n\tdragend(event) {\n\t\tif (!event.target.classList.contains('dropzone-overlay')) {\n\t\t\tconst popoutElement = document.querySelector('.rc-popout-wrapper');\n\t\t\tpopoutElement.style.display = 'initial';\n\t\t}\n\t},\n\tdrop(event) {\n\t\tconst e = event.originalEvent || event;\n\t\te.preventDefault();\n\t\t// do not mess with the position if we are dropping files in the dropzone\n\t\tif (!event.target.classList.contains('dropzone-overlay')) {\n\t\t\tconst popoutElement = document.querySelector('.rc-popout-wrapper');\n\t\t\tconst positionTop = e.clientY - popout.y;\n\t\t\tconst positionLeft = e.clientX - popout.x;\n\t\t\tpopoutElement.style.left = `${positionLeft >= 0 ? positionLeft : 0}px`;\n\t\t\tpopoutElement.style.top = `${positionTop >= 0 ? positionTop : 0}px`;\n\t\t}\n\t},\n};\n\nTemplate.popout.helpers({\n\tstate() {\n\t\treturn Template.instance().isMinimized.get() ? 'closed' : 'open';\n\t},\n\tisAudioOnly() {\n\t\treturn Template.instance().isAudioOnly.get();\n\t},\n\tisMuted() {\n\t\treturn Template.instance().isMuted.get();\n\t},\n\tisPlaying() {\n\t\treturn Template.instance().isPlaying.get();\n\t},\n\tshowVideoControls() {\n\t\treturn Template.instance().showVideoControls.get();\n\t},\n\tshowStreamControls() {\n\t\treturn Template.instance().showStreamControls.get();\n\t},\n\tgetStreamStatus() {\n\t\treturn Template.instance().streamStatus.get();\n\t},\n});\n\nTemplate.popout.onRendered(function () {\n\tTemplate.instance().isMinimized.set(popout.isAudioOnly);\n\tTemplate.instance().isAudioOnly.set(popout.isAudioOnly);\n\tTemplate.instance().showVideoControls.set(popout.showVideoControls);\n\tTemplate.instance().showStreamControls.set(popout.showStreamControls);\n\n\tif (this.data.onRendered) {\n\t\tthis.data.onRendered();\n\t}\n});\nTemplate.popout.onCreated(function () {\n\tthis.isMinimized = new ReactiveVar(popout.isAudioOnly);\n\tthis.isAudioOnly = new ReactiveVar(popout.isAudioOnly);\n\tthis.canOpenExternal = new ReactiveVar(popout.canOpenExternal);\n\tthis.showVideoControls = new ReactiveVar(popout.showVideoControls);\n\tthis.showStreamControls = new ReactiveVar(popout.showStreamControls);\n\n\tthis.isMuted = new ReactiveVar(false);\n\tthis.isPlaying = new ReactiveVar(true);\n\tthis.streamStatus = new ReactiveVar('preparing');\n\tdocument.body.addEventListener('dragstart', popout.dragstart, true);\n\tdocument.body.addEventListener('dragover', popout.dragover, true);\n\tdocument.body.addEventListener('dragend', popout.dragend, true);\n\tdocument.body.addEventListener('drop', popout.drop, true);\n});\n\nTemplate.popout.onDestroyed(function () {\n\tpopout.context = null;\n\tdocument.body.removeEventListener('dragstart', popout.dragstart, true);\n\tdocument.body.removeEventListener('dragover', popout.dragover, true);\n\tdocument.body.removeEventListener('dragend', popout.dragend, true);\n\tdocument.body.removeEventListener('drop', popout.drop, true);\n});\n\nTemplate.popout.events({\n\t'click .js-action'(e, instance) {\n\t\t!this.action || this.action.call(instance.data.data, e, instance);\n\t\te.stopPropagation();\n\t\tpopout.close();\n\t},\n\t'click .js-close'(e) {\n\t\te.stopPropagation();\n\t\tpopout.close();\n\t},\n\t'click .js-minimize'(e, i) {\n\t\te.stopPropagation();\n\t\tif (i.isMinimized.get()) {\n\t\t\ti.isMinimized.set(false);\n\t\t\twindow.liveStreamPlayer.setSize(380, 214);\n\t\t} else {\n\t\t\ti.isMinimized.set(true);\n\t\t\twindow.liveStreamPlayer.setSize(0, 0);\n\t\t}\n\t},\n\t'dragstart .rc-popout-wrapper'(event) {\n\t\tconst e = event.originalEvent || event;\n\t\tconst url = (this.data && this.data.streamingSource) || '.rc-popout-wrapper';\n\t\tpopout.x = e.offsetX;\n\t\tpopout.y = e.offsetY;\n\t\te.dataTransfer.setData('application/x-moz-node', e.currentTarget);\n\t\te.dataTransfer.setData('text/plain', url);\n\t\te.dataTransfer.effectAllowed = 'move';\n\t},\n\t'dragend .rc-popout-wrapper'(event) {\n\t\tevent.preventDefault();\n\t},\n\t'click .rc-popout__controls--record'(e, i) {\n\t\te.preventDefault();\n\t\tif (i.streamStatus.get() === 'ready') {\n\t\t\tdocument.querySelector('.streaming-popup').dispatchEvent(new Event('startStreaming'));\n\t\t\ti.streamStatus.set('starting');\n\t\t} else if (i.streamStatus.get() === 'broadcasting') {\n\t\t\tdocument.querySelector('.streaming-popup').dispatchEvent(new Event('stopStreaming'));\n\t\t\ti.streamStatus.set('finished');\n\t\t\tsetTimeout(() => popout && popout.close(), 2000);\n\t\t}\n\t},\n\t'broadcastStreamReady .streaming-popup'(e, i) {\n\t\te.preventDefault();\n\t\ti.streamStatus.set('ready');\n\t},\n\t'broadcastStream .streaming-popup'(e, i) {\n\t\te.preventDefault();\n\t\ti.streamStatus.set('broadcasting');\n\t},\n\t'click .rc-popout__controls--play'(e, i) {\n\t\twindow.liveStreamPlayer.playVideo();\n\t\ti.isPlaying.set(true);\n\t},\n\t'click .rc-popout__controls--pause'(e, i) {\n\t\twindow.liveStreamPlayer.pauseVideo();\n\t\ti.isPlaying.set(false);\n\t},\n\t'click .rc-popout__controls--mute'(e, i) {\n\t\twindow.liveStreamPlayer.mute();\n\t\ti.isMuted.set(true);\n\t},\n\t'click .rc-popout__controls--unmute'(e, i) {\n\t\twindow.liveStreamPlayer.unMute();\n\t\ti.isMuted.set(false);\n\t},\n\t'playerStateChanged .rc-popout'(e, i) {\n\t\tif (e.detail === window.YT.PlayerState.PLAYING) {\n\t\t\ti.isPlaying.set(true);\n\t\t} else if (e.detail === window.YT.PlayerState.PAUSED) {\n\t\t\ti.isPlaying.set(false);\n\t\t}\n\t},\n});\n\ncallbacks.add('afterLogoutCleanUp', () => popout.close(), callbacks.priority.MEDIUM, 'popout-close-after-logout-cleanup');\n","import './popover.html';\nimport { Blaze } from 'meteor/blaze';\nimport { Template } from 'meteor/templating';\nimport _ from 'underscore';\n\nimport { messageBox } from './messageBox';\nimport { MessageAction } from './MessageAction';\nimport { isRtl } from '../../../utils/client';\n\nexport const popover = {\n\trenderedPopover: null,\n\topen({ currentTarget, ...config }) {\n\t\t// Popover position must be computed as soon as possible, avoiding DOM changes over currentTarget\n\t\tconst data = {\n\t\t\ttargetRect: currentTarget?.getBoundingClientRect(),\n\t\t\t...config,\n\t\t};\n\t\tthis.renderedPopover = Blaze.renderWithData(Template.popover, data, document.body);\n\t},\n\tclose() {\n\t\tif (!this.renderedPopover) {\n\t\t\treturn false;\n\t\t}\n\n\t\tBlaze.remove(this.renderedPopover);\n\n\t\tconst { activeElement } = this.renderedPopover.dataVar.curValue;\n\t\tif (activeElement) {\n\t\t\t$(activeElement).removeClass('active');\n\t\t}\n\t},\n};\n\nTemplate.popover.helpers({\n\thasAction() {\n\t\treturn !!this.action;\n\t},\n});\n\nTemplate.popover.onRendered(function () {\n\tif (this.data.onRendered) {\n\t\tthis.data.onRendered();\n\t}\n\n\t$('.rc-popover').click(function (e) {\n\t\tif (e.currentTarget === e.target) {\n\t\t\tpopover.close();\n\t\t}\n\t});\n\tconst { offsetVertical = 0, offsetHorizontal = 0 } = this.data;\n\tconst { activeElement } = this.data;\n\tconst originalWidth = window.innerWidth;\n\tconst popoverContent = this.firstNode.children[0];\n\tconst position = _.throttle(() => {\n\t\tconst direction = typeof this.data.direction === 'function' ? this.data.direction() : this.data.direction;\n\n\t\tconst verticalDirection = /top/.test(direction) ? 'top' : 'bottom';\n\t\tconst rtlDirection = isRtl() ^ /inverted/.test(direction) ? 'left' : 'right';\n\t\tconst rightDirection = /right/.test(direction) ? 'right' : rtlDirection;\n\t\tconst horizontalDirection = /left/.test(direction) ? 'left' : rightDirection;\n\n\t\tconst position = typeof this.data.position === 'function' ? this.data.position() : this.data.position;\n\t\tconst customCSSProperties =\n\t\t\ttypeof this.data.customCSSProperties === 'function' ? this.data.customCSSProperties() : this.data.customCSSProperties;\n\n\t\tconst mousePosition =\n\t\t\ttypeof this.data.mousePosition === 'function'\n\t\t\t\t? this.data.mousePosition()\n\t\t\t\t: this.data.mousePosition || {\n\t\t\t\t\t\tx: this.data.targetRect[horizontalDirection === 'left' ? 'right' : 'left'],\n\t\t\t\t\t\ty: this.data.targetRect[verticalDirection],\n\t\t\t\t  };\n\t\tconst offsetWidth = offsetHorizontal * (horizontalDirection === 'left' ? 1 : -1);\n\t\tconst offsetHeight = offsetVertical * (verticalDirection === 'bottom' ? 1 : -1);\n\n\t\tconst leftDiff = window.innerWidth - originalWidth;\n\n\t\tif (position) {\n\t\t\tpopoverContent.style.top = `${position.top}px`;\n\t\t\tpopoverContent.style.left = `${position.left + leftDiff}px`;\n\t\t} else {\n\t\t\tconst clientHeight = this.data.targetRect.height;\n\t\t\tconst popoverWidth = popoverContent.offsetWidth;\n\t\t\tconst popoverHeight = popoverContent.offsetHeight;\n\t\t\tconst windowWidth = window.innerWidth;\n\t\t\tconst windowHeight = window.innerHeight;\n\n\t\t\tlet top = mousePosition.y - clientHeight + offsetHeight;\n\n\t\t\tif (verticalDirection === 'top') {\n\t\t\t\ttop = mousePosition.y - popoverHeight + offsetHeight;\n\n\t\t\t\tif (top < 0) {\n\t\t\t\t\ttop = 10 + offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (top + popoverHeight > windowHeight) {\n\t\t\t\ttop = windowHeight - 10 - popoverHeight - offsetHeight;\n\t\t\t}\n\n\t\t\tlet left = mousePosition.x - popoverWidth + offsetWidth;\n\n\t\t\tif (horizontalDirection === 'right') {\n\t\t\t\tleft = mousePosition.x + offsetWidth;\n\t\t\t}\n\n\t\t\tif (left + popoverWidth >= windowWidth) {\n\t\t\t\tleft = mousePosition.x - popoverWidth + offsetWidth;\n\t\t\t}\n\n\t\t\tif (left <= 0) {\n\t\t\t\tleft = mousePosition.x + offsetWidth;\n\t\t\t}\n\n\t\t\tpopoverContent.style.top = `${top}px`;\n\t\t\tpopoverContent.style.left = `${left + leftDiff}px`;\n\t\t}\n\n\t\tif (customCSSProperties) {\n\t\t\tObject.keys(customCSSProperties).forEach(function (property) {\n\t\t\t\tpopoverContent.style[property] = customCSSProperties[property];\n\t\t\t});\n\t\t}\n\n\t\tconst realTop = Number(popoverContent.style.top.replace('px', ''));\n\t\tif (realTop + popoverContent.offsetHeight > window.innerHeight) {\n\t\t\tpopoverContent.style.overflow = 'scroll';\n\t\t\tpopoverContent.style.bottom = 0;\n\t\t\tpopoverContent.className = 'rc-popover__content rc-popover__content-scroll';\n\t\t}\n\n\t\tif (activeElement) {\n\t\t\t$(activeElement).addClass('active');\n\t\t}\n\t\tpopoverContent.style.opacity = 1;\n\t}, 50);\n\n\tconst observer = new MutationObserver(position);\n\tobserver.observe(popoverContent, { childList: true, subtree: true });\n\n\t$(window).on('resize', position);\n\tposition();\n\tthis.position = position;\n\tthis.observer = observer;\n\n\tthis.firstNode.style.visibility = 'visible';\n});\n\nTemplate.popover.onDestroyed(function () {\n\tif (this.data.onDestroyed) {\n\t\tthis.data.onDestroyed();\n\t}\n\t$(window).off('resize', this.position);\n\tthis.observer?.disconnect();\n});\n\nTemplate.popover.events({\n\t'click .js-action'(e, instance) {\n\t\t!this.action || this.action.call(this, e, instance.data.data);\n\t\tpopover.close();\n\t},\n\t'click .js-close'() {\n\t\tpopover.close();\n\t},\n\t'click [data-type=\"messagebox-action\"]'(event, t) {\n\t\tconst { id } = event.currentTarget.dataset;\n\t\tconst actions = messageBox.actions.getById(id);\n\t\tactions\n\t\t\t.filter(({ action }) => !!action)\n\t\t\t.forEach(({ action }) => {\n\t\t\t\taction.call(null, {\n\t\t\t\t\t...t.data.data,\n\t\t\t\t\tevent,\n\t\t\t\t});\n\t\t\t});\n\t\tpopover.close();\n\t},\n\t'click [data-type=\"message-action\"]'(e, t) {\n\t\tconst button = MessageAction.getButtonById(e.currentTarget.dataset.id);\n\t\tif ((button != null ? button.action : undefined) != null) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\tconst { tabBar, rid } = t.data.instance;\n\t\t\tbutton.action.call(t.data.data, e, { tabBar, rid });\n\t\t\tpopover.close();\n\t\t\treturn false;\n\t\t}\n\t},\n});\n\nTemplate.popover.helpers({\n\tisSafariIos: /iP(ad|hone|od).+Version\\/[\\d\\.]+.*Safari/i.test(navigator.userAgent),\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport { Emitter } from '@rocket.chat/emitter';\n\nimport { RoomHistoryManager } from './RoomHistoryManager';\nimport { RoomManager } from './RoomManager';\nimport { ChatSubscription, ChatMessage } from '../../../models';\n/* DEFINITIONS\n- If window loses focus user needs to scroll or click/touch some place\n- On hit ESC enable read, force read of current room and remove unread mark\n- When user change room disable read until user interaction\n- Only read if mark of *first-unread* is visible for user or if flag *force* was passed\n- Always read the opened room\n- The default method *read* has a delay of 2000ms to prevent multiple reads and to user be able to see the mark\n*/\n\n// Meteor.startup ->\n// window.addEventListener 'focus', ->\n// readMessage.refreshUnreadMark(undefined, true)\n\nexport const readMessage = new (class extends Emitter {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.debug = false;\n\t\tthis.enable();\n\t}\n\n\tread(rid = Session.get('openedRoom')) {\n\t\tif (!this.enabled) {\n\t\t\tthis.log('readMessage -> readNow canceled by enabled: false');\n\t\t\treturn;\n\t\t}\n\n\t\tconst subscription = ChatSubscription.findOne({ rid });\n\t\tif (subscription == null) {\n\t\t\tthis.log('readMessage -> readNow canceled, no subscription found for rid:', rid);\n\t\t\treturn;\n\t\t}\n\n\t\tif (subscription.alert === false && subscription.unread === 0) {\n\t\t\tthis.log('readMessage -> readNow canceled, alert', subscription.alert, 'and unread', subscription.unread);\n\t\t\treturn;\n\t\t}\n\n\t\tconst room = RoomManager.getOpenedRoomByRid(rid);\n\t\tif (room == null) {\n\t\t\tthis.log('readMessage -> readNow canceled, no room found for typeName:', subscription.t + subscription.name);\n\t\t\treturn;\n\t\t}\n\n\t\t// Only read messages if user saw the first unread message\n\t\tconst unreadMark = $('.message.first-unread');\n\t\tif (unreadMark.length > 0) {\n\t\t\tconst position = unreadMark.position();\n\t\t\tconst visible = (position != null ? position.top : undefined) >= 0;\n\t\t\tif (!visible && room.unreadSince.get()) {\n\t\t\t\tthis.log('readMessage -> readNow canceled, unread mark visible:', visible, 'unread since exists', room.unreadSince.get() != null);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// if unread mark is not visible and there is more more not loaded unread messages\n\t\t} else if (RoomHistoryManager.getRoom(rid).unreadNotLoaded.get() > 0) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn this.readNow(rid);\n\t}\n\n\treadNow(rid = Session.get('openedRoom')) {\n\t\tif (rid == null) {\n\t\t\tthis.log('readMessage -> readNow canceled, no rid informed');\n\t\t\treturn;\n\t\t}\n\n\t\tconst subscription = ChatSubscription.findOne({ rid });\n\t\tif (subscription == null) {\n\t\t\tthis.log('readMessage -> readNow canceled, no subscription found for rid:', rid);\n\t\t\treturn;\n\t\t}\n\n\t\treturn Meteor.call('readMessages', rid, () => {\n\t\t\tRoomHistoryManager.getRoom(rid).unreadNotLoaded.set(0);\n\t\t\treturn this.emit(rid);\n\t\t});\n\t}\n\n\tlog(...args) {\n\t\treturn this.debug && console.log(...args);\n\t}\n\n\tdisable() {\n\t\tthis.enabled = false;\n\t}\n\n\tenable() {\n\t\tthis.enabled = document.hasFocus();\n\t}\n\n\tisEnable() {\n\t\treturn this.enabled === true;\n\t}\n\n\trefreshUnreadMark(rid) {\n\t\tif (rid == null) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst subscription = ChatSubscription.findOne({ rid }, { reactive: false });\n\t\tif (subscription == null) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst room = RoomManager.openedRooms[subscription.t + subscription.name];\n\t\tif (room == null) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!subscription.alert && subscription.unread === 0) {\n\t\t\t$('.message.first-unread').removeClass('first-unread');\n\t\t\troom.unreadSince.set(undefined);\n\t\t\treturn;\n\t\t}\n\n\t\tlet lastReadRecord = ChatMessage.findOne(\n\t\t\t{\n\t\t\t\trid: subscription.rid,\n\t\t\t\tts: {\n\t\t\t\t\t$lt: subscription.ls,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tsort: {\n\t\t\t\t\tts: -1,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t\tconst { unreadNotLoaded } = RoomHistoryManager.getRoom(rid);\n\n\t\tif (lastReadRecord == null && unreadNotLoaded.get() === 0) {\n\t\t\tlastReadRecord = { ts: new Date(0) };\n\t\t}\n\n\t\troom.unreadSince.set((lastReadRecord || unreadNotLoaded.get() > 0) && subscription.ls);\n\n\t\tif (!lastReadRecord) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst firstUnreadRecord = ChatMessage.findOne(\n\t\t\t{\n\t\t\t\t'rid': subscription.rid,\n\t\t\t\t'ts': {\n\t\t\t\t\t$gt: lastReadRecord.ts,\n\t\t\t\t},\n\t\t\t\t'u._id': {\n\t\t\t\t\t$ne: Meteor.userId(),\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tsort: {\n\t\t\t\t\tts: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\n\t\tif (firstUnreadRecord) {\n\t\t\troom.unreadFirstId = firstUnreadRecord._id;\n\t\t\t$('.message.first-unread').removeClass('first-unread');\n\t\t\t$(`.message#${firstUnreadRecord._id}`).addClass('first-unread');\n\t\t}\n\t}\n})();\n\nMeteor.startup(function () {\n\t$(window)\n\t\t.on('blur', () => readMessage.disable())\n\t\t.on('focus', () => {\n\t\t\treadMessage.enable();\n\t\t\treadMessage.read();\n\t\t})\n\t\t.on('touchend', () => {\n\t\t\treadMessage.enable();\n\t\t})\n\t\t.on('keyup', (e) => {\n\t\t\tconst key = e.which;\n\t\t\tif (key === 27) {\n\t\t\t\t// ESCAPE KEY\n\t\t\t\tconst rid = Session.get('openedRoom');\n\t\t\t\tif (!rid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treadMessage.readNow(rid);\n\t\t\t\treadMessage.refreshUnreadMark(rid);\n\t\t\t}\n\t\t});\n});\n","export { modal } from './lib/modal';\nexport { SideNav } from './lib/SideNav';\nexport { AccountBox } from './lib/AccountBox';\nexport { menu } from './lib/menu';\nexport { MessageAction } from './lib/MessageAction';\nexport { messageBox } from './lib/messageBox';\nexport { popover } from './lib/popover';\nexport { readMessage } from './lib/readMessages';\nexport { RoomManager } from './lib/RoomManager';\nexport { upsertMessage, RoomHistoryManager, normalizeThreadMessage } from './lib/RoomHistoryManager';\nexport { mainReady } from './lib/mainReady';\nexport { IframeLogin, iframeLogin } from './lib/IframeLogin';\nexport { popout } from './lib/popout';\nexport { messageProperties } from '../lib/MessageProperties';\nexport { MessageTypes } from '../lib/MessageTypes';\nexport { Message } from '../lib/Message';\nexport { openRoom } from './lib/openRoom';\nexport * from './lib/collapseArrow';\nexport * from './lib/messageArgs';\n","import { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { Meteor } from 'meteor/meteor';\nimport s from 'underscore.string';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\n\nimport { MessageTypes } from './MessageTypes';\nimport { settings } from '../../settings';\n\nexport const Message = {\n\tparse(msg, language) {\n\t\tconst messageType = MessageTypes.getType(msg);\n\t\tif (messageType) {\n\t\t\tif (messageType.render) {\n\t\t\t\treturn messageType.render(msg);\n\t\t\t}\n\t\t\tif (messageType.template) {\n\t\t\t\t// Render message\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (messageType.message) {\n\t\t\t\tif (!language) {\n\t\t\t\t\tlanguage = Meteor._localStorage.getItem('userLanguage');\n\t\t\t\t}\n\t\t\t\tconst data = (typeof messageType.data === 'function' && messageType.data(msg)) || {};\n\t\t\t\treturn TAPi18n.__(messageType.message, data, language);\n\t\t\t}\n\t\t}\n\t\tif (msg.u && msg.u.username === settings.get('Chatops_Username')) {\n\t\t\tmsg.html = msg.msg;\n\t\t\treturn msg.html;\n\t\t}\n\t\tmsg.html = msg.msg;\n\t\tif (s.trim(msg.html) !== '') {\n\t\t\tmsg.html = escapeHTML(msg.html);\n\t\t}\n\t\tmsg.html = msg.html.replace(/\\n/gm, '<br/>');\n\t\treturn msg.html;\n\t},\n};\n","import GraphemeSplitter from 'grapheme-splitter';\n\nimport { emoji } from '../../emoji';\n\nconst splitter = new GraphemeSplitter();\n\nexport const messageProperties = {\n\tlength: (message) => splitter.countGraphemes(message),\n\n\tmessageWithoutEmojiShortnames: (message) =>\n\t\tmessage.replace(/:\\w+:/gm, (match) => {\n\t\t\tif (emoji.list[match] !== undefined) {\n\t\t\t\treturn ' ';\n\t\t\t}\n\t\t\treturn match;\n\t\t}),\n};\n","export const MessageTypes = new (class {\n\tconstructor() {\n\t\tthis.types = {};\n\t}\n\n\tregisterType(options) {\n\t\tthis.types[options.id] = options;\n\t\treturn options;\n\t}\n\n\tgetType(message) {\n\t\treturn this.types[message && message.t];\n\t}\n\n\tisSystemMessage(message) {\n\t\tconst type = this.types[message && message.t];\n\t\treturn type && type.system;\n\t}\n})();\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/index.js');\n}\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/index.js');\n}\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { settings } from '../../../../../settings';\nimport { modal } from '../../../../../ui-utils/client';\nimport { APIClient, t } from '../../../../../utils';\nimport { hasRole } from '../../../../../authorization';\nimport './closeRoom.html';\nimport { handleError } from '../../../../../../client/lib/utils/handleError';\n\nconst validateRoomComment = (comment) => {\n\tif (!settings.get('Livechat_request_comment_when_closing_conversation')) {\n\t\treturn true;\n\t}\n\n\treturn comment?.length > 0;\n};\n\nconst validateRoomTags = (tagsRequired, tags) => {\n\tif (!tagsRequired) {\n\t\treturn true;\n\t}\n\n\treturn tags?.length > 0;\n};\n\nconst checkUserTagPermission = (availableUserTags = [], tag) => {\n\tif (hasRole(Meteor.userId(), ['admin', 'livechat-manager'])) {\n\t\treturn true;\n\t}\n\n\treturn availableUserTags.includes(tag);\n};\n\nTemplate.closeRoom.helpers({\n\tinvalidComment() {\n\t\treturn Template.instance().invalidComment.get();\n\t},\n\ttags() {\n\t\treturn Template.instance().tags.get();\n\t},\n\tinvalidTags() {\n\t\treturn Template.instance().invalidTags.get();\n\t},\n\tavailableUserTags() {\n\t\treturn Template.instance().availableUserTags.get();\n\t},\n\ttagsPlaceHolder() {\n\t\tlet placeholder = TAPi18n.__('Enter_a_tag');\n\n\t\tif (!Template.instance().tagsRequired.get()) {\n\t\t\tplaceholder = placeholder.concat(`(${TAPi18n.__('Optional')})`);\n\t\t}\n\n\t\treturn placeholder;\n\t},\n\thasAvailableTags() {\n\t\tconst tags = Template.instance().availableTags.get();\n\t\treturn tags?.length > 0;\n\t},\n\tcanRemoveTag(availableUserTags, tag) {\n\t\treturn checkUserTagPermission(availableUserTags, tag);\n\t},\n});\n\nTemplate.closeRoom.events({\n\tasync 'submit .close-room__content'(e, instance) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tconst comment = instance.$('#comment').val();\n\t\tinstance.invalidComment.set(!validateRoomComment(comment));\n\t\tif (instance.invalidComment.get()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst tagsRequired = instance.tagsRequired.get();\n\t\tconst tags = instance.tags.get();\n\n\t\tinstance.invalidTags.set(!validateRoomTags(tagsRequired, tags));\n\t\tif (instance.invalidTags.get()) {\n\t\t\treturn;\n\t\t}\n\n\t\tMeteor.call('livechat:closeRoom', this.rid, comment, { clientAction: true, tags }, function (error /* , result*/) {\n\t\t\tif (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t\treturn handleError(error);\n\t\t\t}\n\n\t\t\tmodal.open({\n\t\t\t\ttitle: t('Chat_closed'),\n\t\t\t\ttext: t('Chat_closed_successfully'),\n\t\t\t\ttype: 'success',\n\t\t\t\ttimer: 1000,\n\t\t\t\tshowConfirmButton: false,\n\t\t\t});\n\t\t});\n\t},\n\t'click .remove-tag'(e, instance) {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\n\t\tconst tag = this.valueOf();\n\t\tconst availableTags = instance.availableTags.get();\n\t\tconst hasAvailableTags = availableTags?.length > 0;\n\t\tconst availableUserTags = instance.availableUserTags.get();\n\t\tif (hasAvailableTags && !checkUserTagPermission(availableUserTags, tag)) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet tags = instance.tags.get();\n\t\ttags = tags.filter((el) => el !== tag);\n\t\tinstance.tags.set(tags);\n\t},\n\t'click #addTag'(e, instance) {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\n\t\tif ($('#tagSelect').find(':selected').is(':disabled')) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst tags = [...instance.tags.get()];\n\t\tconst tagVal = $('#tagSelect').val();\n\t\tif (tagVal === '' || tags.includes(tagVal)) {\n\t\t\treturn;\n\t\t}\n\n\t\ttags.push(tagVal);\n\t\tinstance.tags.set(tags);\n\t\t$('#tagSelect').val('placeholder');\n\t},\n\t'keydown #tagInput'(e, instance) {\n\t\tif (e.which === 13) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\n\t\t\tconst tags = [...instance.tags.get()];\n\t\t\tconst tagVal = $('#tagInput').val();\n\t\t\tif (tagVal === '' || tags.includes(tagVal)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttags.push(tagVal);\n\t\t\tinstance.tags.set(tags);\n\t\t\t$('#tagInput').val('');\n\t\t}\n\t},\n});\n\nTemplate.closeRoom.onRendered(function () {\n\tthis.find('#comment').focus();\n});\n\nTemplate.closeRoom.onCreated(async function () {\n\tthis.tags = new ReactiveVar([]);\n\tthis.invalidComment = new ReactiveVar(false);\n\tthis.invalidTags = new ReactiveVar(false);\n\tthis.tagsRequired = new ReactiveVar(false);\n\tthis.availableTags = new ReactiveVar([]);\n\tthis.availableUserTags = new ReactiveVar([]);\n\tthis.agentDepartments = new ReactiveVar([]);\n\n\tthis.onEnterTag = () => this.invalidTags.set(!validateRoomTags(this.tagsRequired.get(), this.tags.get()));\n\n\tconst { rid } = Template.currentData();\n\tconst { room } = await APIClient.v1.get(`rooms.info?roomId=${rid}`);\n\tthis.tags.set(room?.tags || []);\n\n\tif (room?.departmentId) {\n\t\tconst { department } = await APIClient.v1.get(`livechat/department/${room.departmentId}?includeAgents=false`);\n\t\tthis.tagsRequired.set(department?.requestTagBeforeClosingChat);\n\t}\n\n\tconst uid = Meteor.userId();\n\tconst { departments } = await APIClient.v1.get(`livechat/agents/${uid}/departments`);\n\tconst agentDepartments = departments.map((dept) => dept.departmentId);\n\tthis.agentDepartments.set(agentDepartments);\n\n\tMeteor.call('livechat:getTagsList', (err, tagsList) => {\n\t\tthis.availableTags.set(tagsList);\n\t\tconst isAdmin = hasRole(uid, ['admin', 'livechat-manager']);\n\t\tconst availableTags = tagsList\n\t\t\t.filter(({ departments }) => isAdmin || departments.length === 0 || departments.some((i) => agentDepartments.includes(i)))\n\t\t\t.map(({ name }) => name);\n\t\tthis.availableUserTags.set(availableTags);\n\t});\n});\n","import { IBusinessHourBehavior } from './IBusinessHourBehavior';\nimport { SingleBusinessHourBehavior } from './Single';\nimport { ILivechatBusinessHour } from '../../../../../../definition/ILivechatBusinessHour';\n\nclass BusinessHoursManager {\n\tprivate behavior: IBusinessHourBehavior;\n\n\tconstructor(businessHour: IBusinessHourBehavior) {\n\t\tthis.setBusinessHourBehavior(businessHour);\n\t}\n\n\tsetBusinessHourBehavior(businessHour: IBusinessHourBehavior): void {\n\t\tthis.registerBusinessHourBehavior(businessHour);\n\t}\n\n\tregisterBusinessHourBehavior(behavior: IBusinessHourBehavior): void {\n\t\tthis.behavior = behavior;\n\t}\n\n\tgetTemplate(): string {\n\t\treturn this.behavior.getView();\n\t}\n\n\tshowCustomTemplate(businessHourData: ILivechatBusinessHour): boolean {\n\t\treturn this.behavior.showCustomTemplate(businessHourData);\n\t}\n\n\tshowBackButton(): boolean {\n\t\treturn this.behavior.showBackButton();\n\t}\n\n\tshowTimezoneTemplate(): boolean {\n\t\treturn this.behavior.showTimezoneTemplate();\n\t}\n}\n\nexport const businessHourManager = new BusinessHoursManager(new SingleBusinessHourBehavior());\n","import { IBusinessHourBehavior } from './IBusinessHourBehavior';\n\nexport class SingleBusinessHourBehavior implements IBusinessHourBehavior {\n\tgetView(): string {\n\t\treturn 'livechatBusinessHoursForm';\n\t}\n\n\tshowCustomTemplate(): boolean {\n\t\treturn false;\n\t}\n\n\tshowBackButton(): boolean {\n\t\treturn false;\n\t}\n\n\tshowTimezoneTemplate(): boolean {\n\t\treturn false;\n\t}\n}\n","export const customFormTemplate = new Map();\n\nexport const addCustomFormTemplate = (form, customTemplateName) => customFormTemplate.set(form, customTemplateName);\n\nexport const removeCustomTemplate = (form) => customFormTemplate.delete(form);\n\nexport const getCustomFormTemplate = (form) => customFormTemplate.get(form);\n","function ab2str(buf: ArrayBuffer): string {\n\treturn String.fromCharCode(...new Uint16Array(buf));\n}\n\nfunction str2ab(str: string): ArrayBuffer {\n\tconst buf = new ArrayBuffer(str.length * 2); // 2 bytes for each char\n\tconst bufView = new Uint16Array(buf);\n\tfor (let i = 0, strLen = str.length; i < strLen; i++) {\n\t\tbufView[i] = str.charCodeAt(i);\n\t}\n\treturn buf;\n}\n\nexport async function generateKey(): Promise<string> {\n\tconst key = await crypto.subtle.generateKey({ name: 'AES-GCM', length: 256 }, true, ['encrypt', 'decrypt']);\n\tconst exportedKey = await crypto.subtle.exportKey('jwk', key);\n\treturn JSON.stringify(exportedKey);\n}\n\nexport async function getKeyFromString(keyStr: string): Promise<CryptoKey> {\n\tconst key = JSON.parse(keyStr);\n\treturn crypto.subtle.importKey('jwk', key, { name: 'AES-GCM', length: 256 }, true, ['encrypt', 'decrypt']);\n}\n\nexport async function encrypt(text: string, key: CryptoKey): Promise<string> {\n\tconst vector = crypto.getRandomValues(new Uint8Array(16));\n\tconst data = new TextEncoder().encode(text);\n\tconst enc = await crypto.subtle.encrypt({ name: 'AES-GCM', iv: vector }, key, data);\n\tconst cipherText = new Uint8Array(enc);\n\treturn encodeURIComponent(btoa(ab2str(vector) + ab2str(cipherText)));\n}\n\nexport async function decrypt(data: string, key: CryptoKey): Promise<string> {\n\tconst binaryData = atob(decodeURIComponent(data));\n\tconst vector = new Uint8Array(new Uint16Array(str2ab(binaryData.slice(0, 16))));\n\tconst buffer = new Uint8Array(new Uint16Array(str2ab(binaryData.slice(16))));\n\tconst decoded = await crypto.subtle.decrypt({ name: 'AES-GCM', iv: vector }, key, buffer);\n\treturn new TextDecoder().decode(decoded);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { Session } from 'meteor/session';\nimport { ReactiveVar } from 'meteor/reactive-var';\n\nimport { APIClient } from '../../../utils/client';\nimport { settings } from '../../../settings/client';\nimport { encrypt, getKeyFromString } from './crypto';\n\nimport './externalFrameContainer.html';\n\nTemplate.ExternalFrameContainer.helpers({\n\texternalFrameUrl() {\n\t\tconst authToken = Template.instance().authToken.get();\n\n\t\tif (!authToken) {\n\t\t\treturn '';\n\t\t}\n\n\t\tconst frameURLSetting = settings.get('Omnichannel_External_Frame_URL');\n\n\t\ttry {\n\t\t\tconst frameURL = new URL(frameURLSetting);\n\n\t\t\tframeURL.searchParams.append('uid', Meteor.userId());\n\t\t\tframeURL.searchParams.append('rid', Session.get('openedRoom'));\n\t\t\tframeURL.searchParams.append('t', authToken);\n\n\t\t\treturn frameURL.toString();\n\t\t} catch {\n\t\t\tconsole.error('Invalid URL provided to external frame');\n\n\t\t\treturn '';\n\t\t}\n\t},\n});\n\nTemplate.ExternalFrameContainer.onCreated(async function () {\n\tthis.authToken = new ReactiveVar();\n\n\tconst { 'X-Auth-Token': authToken } = APIClient.getCredentials();\n\tconst keyStr = settings.get('Omnichannel_External_Frame_Encryption_JWK');\n\n\tif (keyStr) {\n\t\treturn this.authToken.set(await encrypt(authToken, await getKeyFromString(keyStr)));\n\t}\n\n\tthis.authToken.set(authToken);\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { generateKey } from './crypto';\n\nMeteor.methods({\n\tasync omnichannelExternalFrameGenerateKey() {\n\t\tconst key = await generateKey();\n\t\tMeteor.call('saveSetting', 'Omnichannel_External_Frame_Encryption_JWK', key);\n\t},\n});\n","import './generateNewKey';\nimport './tabBar';\nimport './externalFrameContainer';\n","import { useMemo } from 'react';\n\nimport { useSetting } from '../../../../client/contexts/SettingsContext';\nimport { addAction } from '../../../../client/views/room/lib/Toolbox';\n\naddAction('omnichannel-external-frame', () => {\n\tconst enabled = useSetting('Omnichannel_External_Frame_Enabled');\n\n\treturn useMemo(\n\t\t() =>\n\t\t\tenabled\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['live'],\n\t\t\t\t\t\tid: 'omnichannel-external-frame',\n\t\t\t\t\t\ttitle: 'Omnichannel_External_Frame',\n\t\t\t\t\t\ticon: 'cube',\n\t\t\t\t\t\ttemplate: 'ExternalFrameContainer',\n\t\t\t\t\t\torder: -1,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[enabled],\n\t);\n});\n","import { actionLinks } from '../../../action-links/client';\n\nactionLinks.register('createLivechatCall', function (message, params, instance) {\n\tinstance.tabBar.open('video');\n});\n","import { Mongo } from 'meteor/mongo';\n\nexport const LivechatInquiry = new Mongo.Collection(null);\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../../settings';\nimport { getUserPreference } from '../../../utils';\nimport { Subscriptions, Users } from '../../../models';\nimport { CustomSounds } from '../../../custom-sounds/client';\n\nlet audio = null;\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tif (!settings.get('Livechat_continuous_sound_notification_new_livechat_room')) {\n\t\t\taudio && audio.pause();\n\t\t\treturn;\n\t\t}\n\n\t\tconst subs = Subscriptions.find({ t: 'l', ls: { $exists: 0 }, open: true }).count();\n\t\tif (subs === 0) {\n\t\t\taudio && audio.pause();\n\t\t\treturn;\n\t\t}\n\n\t\tconst user = Users.findOne(Meteor.userId(), {\n\t\t\tfields: {\n\t\t\t\t'settings.preferences.newRoomNotification': 1,\n\t\t\t},\n\t\t});\n\n\t\tconst newRoomNotification = getUserPreference(user, 'newRoomNotification');\n\n\t\taudio = CustomSounds.play(newRoomNotification, { loop: true });\n\t});\n});\n","import '../lib/messageTypes';\nimport './roomType';\nimport './route';\nimport './ui';\nimport './tabBar';\nimport './startup/notifyUnreadRooms';\nimport './views/app/dialog/closeRoom';\nimport './stylesheets/livechat.css';\nimport './externalFrame';\nimport './lib/messageTypes';\n","import { roomTypes } from '../../utils';\nimport LivechatRoomType from '../lib/LivechatRoomType';\n\nroomTypes.add(new LivechatRoomType());\n","import { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { AccountBox } from '../../ui-utils';\nimport '../../../client/views/omnichannel/routes';\n\nexport const livechatManagerRoutes = FlowRouter.group({\n\tprefix: '/omnichannel',\n\tname: 'omnichannel',\n});\n\nexport const load = () => import('./views/admin');\n\nAccountBox.addRoute(\n\t{\n\t\tname: 'livechat-dashboard',\n\t\tpath: '/dashboard',\n\t\tsideNav: 'omnichannelFlex',\n\t\ti18nPageTitle: 'Livechat_Dashboard',\n\t\tpageTemplate: 'livechatDashboard',\n\t},\n\tlivechatManagerRoutes,\n\tload,\n);\n\nAccountBox.addRoute(\n\t{\n\t\tname: 'livechat-departments',\n\t\tpath: '/departments',\n\t\tsideNav: 'omnichannelFlex',\n\t\ti18nPageTitle: 'Departments',\n\t\tpageTemplate: 'livechatDepartments',\n\t},\n\tlivechatManagerRoutes,\n\tload,\n);\n\nAccountBox.addRoute(\n\t{\n\t\tname: 'livechat-department-edit',\n\t\tpath: '/departments/:_id/edit',\n\t\tsideNav: 'omnichannelFlex',\n\t\ti18nPageTitle: 'Edit_Department',\n\t\tpageTemplate: 'livechatDepartmentForm',\n\t\tcustomContainer: true,\n\t},\n\tlivechatManagerRoutes,\n\tload,\n);\n\nAccountBox.addRoute(\n\t{\n\t\tname: 'livechat-department-new',\n\t\tpath: '/departments/new',\n\t\tsideNav: 'omnichannelFlex',\n\t\ti18nPageTitle: 'New_Department',\n\t\tpageTemplate: 'livechatDepartmentForm',\n\t\tcustomContainer: true,\n\t},\n\tlivechatManagerRoutes,\n\tload,\n);\n","import { lazy } from 'react';\n\nimport { addAction } from '../../../client/views/room/lib/Toolbox';\n\naddAction('room-info', {\n\tgroups: ['live'],\n\tid: 'room-info',\n\ttitle: 'Room_Info',\n\ticon: 'info-circled',\n\ttemplate: lazy(() => import('../../../client/views/omnichannel/directory/chats/contextualBar/ChatsContextualBar')),\n\torder: 0,\n});\n\naddAction('contact-chat-history', {\n\tgroups: ['live'],\n\tid: 'contact-chat-history',\n\ttitle: 'Contact_Chat_History',\n\ticon: 'clock',\n\ttemplate: 'contactChatHistory',\n\torder: 11,\n});\n","import { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../settings';\nimport { hasAllPermission } from '../../authorization';\nimport { AccountBox, MessageTypes } from '../../ui-utils';\n\nTracker.autorun((c) => {\n\t// import omnichannel tabbar templates right away if omnichannel enabled\n\tif (!settings.get('Livechat_enabled')) {\n\t\treturn;\n\t}\n\timport('./views/regular');\n\tc.stop();\n});\n\nAccountBox.addItem({\n\tname: 'Omnichannel',\n\ticon: 'headset',\n\thref: '/omnichannel/current',\n\tsideNav: 'omnichannelFlex',\n\tcondition: () => settings.get('Livechat_enabled') && hasAllPermission('view-livechat-manager'),\n});\n\nMessageTypes.registerType({\n\tid: 'livechat-close',\n\tsystem: true,\n\tmessage: 'Conversation_closed',\n\tdata(message) {\n\t\treturn {\n\t\t\tcomment: message.msg,\n\t\t};\n\t},\n});\n\nMessageTypes.registerType({\n\tid: 'livechat-started',\n\tsystem: true,\n\tmessage: 'Chat_started',\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport { ChatRoom } from '../../models';\nimport { settings } from '../../settings';\nimport { hasPermission } from '../../authorization';\nimport { openRoom } from '../../ui-utils';\nimport { RoomMemberActions, RoomSettingsEnum, UiTextContext, RoomTypeRouteConfig, RoomTypeConfig } from '../../utils';\nimport { getAvatarURL } from '../../utils/lib/getAvatarURL';\n\nlet LivechatInquiry;\nif (Meteor.isClient) {\n\t({ LivechatInquiry } = require('../client/collections/LivechatInquiry'));\n}\n\nclass LivechatRoomRoute extends RoomTypeRouteConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tname: 'live',\n\t\t\tpath: '/live/:id/:tab?/:context?',\n\t\t});\n\t}\n\n\taction(params) {\n\t\topenRoom('l', params.id);\n\t}\n\n\tlink(sub) {\n\t\treturn {\n\t\t\tid: sub.rid,\n\t\t};\n\t}\n}\n\nexport default class LivechatRoomType extends RoomTypeConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tidentifier: 'l',\n\t\t\torder: 5,\n\t\t\ticon: 'omnichannel',\n\t\t\tlabel: 'Omnichannel',\n\t\t\troute: new LivechatRoomRoute(),\n\t\t});\n\n\t\tthis.notSubscribedTpl = 'livechatNotSubscribed';\n\t\tthis.readOnlyTpl = 'livechatReadOnly';\n\t}\n\n\tenableMembersListProfile() {\n\t\treturn true;\n\t}\n\n\tfindRoom(identifier) {\n\t\treturn ChatRoom.findOne({ _id: identifier });\n\t}\n\n\troomName(roomData) {\n\t\treturn roomData.name || roomData.fname || roomData.label;\n\t}\n\n\tcondition() {\n\t\treturn settings.get('Livechat_enabled') && hasPermission('view-l-room');\n\t}\n\n\tcanSendMessage(rid) {\n\t\tconst room = ChatRoom.findOne({ _id: rid }, { fields: { open: 1 } });\n\t\treturn room && room.open === true;\n\t}\n\n\tgetUserStatus(rid) {\n\t\tconst room = Session.get(`roomData${rid}`);\n\t\tif (room) {\n\t\t\treturn room.v && room.v.status;\n\t\t}\n\t\tconst inquiry = LivechatInquiry.findOne({ rid });\n\t\treturn inquiry && inquiry.v && inquiry.v.status;\n\t}\n\n\tallowRoomSettingChange(room, setting) {\n\t\tswitch (setting) {\n\t\t\tcase RoomSettingsEnum.JOIN_CODE:\n\t\t\t\treturn false;\n\t\t\tdefault:\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tallowMemberAction(room, action) {\n\t\treturn [RoomMemberActions.INVITE, RoomMemberActions.JOIN].includes(action);\n\t}\n\n\tgetUiText(context) {\n\t\tswitch (context) {\n\t\t\tcase UiTextContext.HIDE_WARNING:\n\t\t\t\treturn 'Hide_Livechat_Warning';\n\t\t\tcase UiTextContext.LEAVE_WARNING:\n\t\t\t\treturn 'Hide_Livechat_Warning';\n\t\t\tdefault:\n\t\t\t\treturn '';\n\t\t}\n\t}\n\n\treadOnly(rid) {\n\t\tconst room = ChatRoom.findOne({ _id: rid }, { fields: { open: 1, servedBy: 1 } });\n\t\tif (!room || !room.open) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst inquiry = LivechatInquiry.findOne({ rid }, { fields: { status: 1 } });\n\t\tif (inquiry && inquiry.status === 'queued') {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn !room.servedBy;\n\t}\n\n\tgetAvatarPath(roomData) {\n\t\treturn getAvatarURL({ username: `@${this.roomName(roomData)}` });\n\t}\n\n\topenCustomProfileTab(instance, room, username) {\n\t\tif (!room || !room.v || room.v.username !== username) {\n\t\t\treturn false;\n\t\t}\n\n\t\tinstance.tabBar.openUserInfo();\n\t\treturn true;\n\t}\n\n\tshowQuickActionButtons() {\n\t\treturn true;\n\t}\n\n\tisLivechatRoom() {\n\t\treturn true;\n\t}\n}\n","import formatDistance from 'date-fns/formatDistance';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport moment from 'moment';\n\nimport { MessageTypes } from '../../ui-utils';\n\nMessageTypes.registerType({\n\tid: 'livechat_navigation_history',\n\tsystem: true,\n\tmessage: 'New_visitor_navigation',\n\tdata(message) {\n\t\tif (!message.navigation || !message.navigation.page) {\n\t\t\treturn;\n\t\t}\n\t\treturn {\n\t\t\thistory: `${(message.navigation.page.title ? `${message.navigation.page.title} - ` : '') + message.navigation.page.location.href}`,\n\t\t};\n\t},\n});\n\nMessageTypes.registerType({\n\tid: 'livechat_transfer_history',\n\tsystem: true,\n\tmessage: 'New_chat_transfer',\n\tdata(message) {\n\t\tif (!message.transferData) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { comment } = message.transferData;\n\t\tconst commentLabel = comment && comment !== '' ? '_with_a_comment' : '';\n\t\tconst from =\n\t\t\tmessage.transferData.transferredBy && (message.transferData.transferredBy.name || message.transferData.transferredBy.username);\n\t\tconst transferTypes = {\n\t\t\tagent: () =>\n\t\t\t\tTAPi18n.__(`Livechat_transfer_to_agent${commentLabel}`, {\n\t\t\t\t\tfrom,\n\t\t\t\t\tto:\n\t\t\t\t\t\tmessage.transferData.transferredTo && (message.transferData.transferredTo.name || message.transferData.transferredTo.username),\n\t\t\t\t\t...(comment && { comment }),\n\t\t\t\t}),\n\t\t\tdepartment: () =>\n\t\t\t\tTAPi18n.__(`Livechat_transfer_to_department${commentLabel}`, {\n\t\t\t\t\tfrom,\n\t\t\t\t\tto: message.transferData.nextDepartment && message.transferData.nextDepartment.name,\n\t\t\t\t\t...(comment && { comment }),\n\t\t\t\t}),\n\t\t\tqueue: () =>\n\t\t\t\tTAPi18n.__('Livechat_transfer_return_to_the_queue', {\n\t\t\t\t\tfrom,\n\t\t\t\t}),\n\t\t};\n\t\treturn {\n\t\t\ttransfer: transferTypes[message.transferData.scope](),\n\t\t};\n\t},\n});\n\nMessageTypes.registerType({\n\tid: 'livechat_transcript_history',\n\tsystem: true,\n\tmessage: 'Livechat_chat_transcript_sent',\n\tdata(message) {\n\t\tif (!message.requestData) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { requestData: { type, visitor = {}, user = {} } = {} } = message;\n\t\tconst requestTypes = {\n\t\t\tvisitor: () =>\n\t\t\t\tTAPi18n.__('Livechat_visitor_transcript_request', {\n\t\t\t\t\tguest: visitor.name || visitor.username,\n\t\t\t\t}),\n\t\t\tuser: () =>\n\t\t\t\tTAPi18n.__('Livechat_user_sent_chat_transcript_to_visitor', {\n\t\t\t\t\tagent: user.name || user.username,\n\t\t\t\t\tguest: visitor.name || visitor.username,\n\t\t\t\t}),\n\t\t};\n\n\t\treturn {\n\t\t\ttranscript: requestTypes[type](),\n\t\t};\n\t},\n});\n\nMessageTypes.registerType({\n\tid: 'livechat_video_call',\n\tsystem: true,\n\tmessage: 'New_videocall_request',\n});\n\nMessageTypes.registerType({\n\tid: 'livechat_webrtc_video_call',\n\trender(message) {\n\t\tif (message.msg === 'ended' && message.webRtcCallEndTs && message.ts) {\n\t\t\treturn TAPi18n.__('WebRTC_call_ended_message', {\n\t\t\t\tcallDuration: formatDistance(new Date(message.webRtcCallEndTs), new Date(message.ts)),\n\t\t\t\tendTime: moment(message.webRtcCallEndTs).format('h:mm A'),\n\t\t\t});\n\t\t}\n\t\tif (message.msg === 'declined' && message.webRtcCallEndTs) {\n\t\t\treturn TAPi18n.__('WebRTC_call_declined_message');\n\t\t}\n\t\treturn message.msg;\n\t},\n});\n\nMessageTypes.registerType({\n\tid: 'omnichannel_placed_chat_on_hold',\n\tsystem: true,\n\tmessage: 'Omnichannel_placed_chat_on_hold',\n\tdata(message) {\n\t\treturn {\n\t\t\tcomment: message.comment,\n\t\t};\n\t},\n});\n\nMessageTypes.registerType({\n\tid: 'omnichannel_on_hold_chat_resumed',\n\tsystem: true,\n\tmessage: 'Omnichannel_on_hold_chat_resumed',\n\tdata(message) {\n\t\treturn {\n\t\t\tcomment: message.comment,\n\t\t};\n\t},\n});\n","import _ from 'underscore';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\nimport { Mongo } from 'meteor/mongo';\n\nimport { messageContext } from '../../../../ui-utils/client/lib/messageContext';\nimport { APIClient } from '../../../../utils/client';\nimport { Messages } from '../../../../models/client';\nimport { upsertMessageBulk } from '../../../../ui-utils/client/lib/RoomHistoryManager';\n\nconst LIMIT_DEFAULT = 50;\n\nTemplate.snippetedMessages.helpers({\n\thasMessages() {\n\t\treturn Template.instance().messages.find().count();\n\t},\n\tmessages() {\n\t\tconst instance = Template.instance();\n\t\treturn instance.messages.find({}, { limit: instance.limit.get(), sort: { ts: -1 } });\n\t},\n\thasMore() {\n\t\treturn Template.instance().hasMore.get();\n\t},\n\tmessageContext,\n});\n\nTemplate.snippetedMessages.onCreated(function () {\n\tthis.rid = this.data.rid;\n\tthis.hasMore = new ReactiveVar(true);\n\tthis.messages = new Mongo.Collection(null);\n\tthis.limit = new ReactiveVar(LIMIT_DEFAULT);\n\n\tthis.autorun(() => {\n\t\tconst query = {\n\t\t\t_hidden: { $ne: true },\n\t\t\tsnippeted: true,\n\t\t\trid: this.rid,\n\t\t};\n\n\t\tthis.cursor && this.cursor.stop();\n\n\t\tthis.limit.set(LIMIT_DEFAULT);\n\n\t\tthis.cursor = Messages.find(query).observe({\n\t\t\tadded: ({ _id, ...message }) => {\n\t\t\t\tthis.messages.upsert({ _id }, message);\n\t\t\t},\n\t\t\tchanged: ({ _id, ...message }) => {\n\t\t\t\tthis.messages.upsert({ _id }, message);\n\t\t\t},\n\t\t\tremoved: ({ _id }) => {\n\t\t\t\tthis.messages.remove({ _id });\n\t\t\t},\n\t\t});\n\t});\n\n\tthis.autorun(async () => {\n\t\tconst limit = this.limit.get();\n\t\tconst { messages, total } = await APIClient.v1.get(`chat.getSnippetedMessages?roomId=${this.rid}&count=${limit}`);\n\n\t\tupsertMessageBulk({ msgs: messages }, this.messages);\n\n\t\tthis.hasMore.set(total > limit);\n\t});\n});\n\nTemplate.mentionsFlexTab.onDestroyed(function () {\n\tthis.cursor.stop();\n});\n\nTemplate.snippetedMessages.events({\n\t'scroll .js-list': _.throttle(function (e, instance) {\n\t\tif (e.target.scrollTop >= e.target.scrollHeight - e.target.clientHeight && instance.hasMore.get()) {\n\t\t\treturn instance.limit.set(instance.limit.get() + 50);\n\t\t}\n\t}, 200),\n});\n","import { useMemo } from 'react';\n\nimport { addAction } from '../../../../client/views/room/lib/Toolbox';\nimport { useSetting } from '../../../../client/contexts/SettingsContext';\n\naddAction('snippeted-messages', () => {\n\tconst snippetingEnabled = useSetting('Message_AllowSnippeting');\n\treturn useMemo(\n\t\t() =>\n\t\t\tsnippetingEnabled\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\t\t\t\tid: 'snippeted-messages',\n\t\t\t\t\t\ttitle: 'snippet-message',\n\t\t\t\t\t\ticon: 'code',\n\t\t\t\t\t\ttemplate: 'snippetedMessages',\n\t\t\t\t\t\torder: 20,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[snippetingEnabled],\n\t);\n});\n","import { FlowRouter } from 'meteor/kadira:flow-router';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\nimport moment from 'moment';\n\nimport { settings } from '../../../settings';\nimport { Markdown } from '../../../markdown/client';\nimport { APIClient } from '../../../utils/client';\nimport { formatTime } from '../../../../client/lib/utils/formatTime';\n\nTemplate.snippetPage.helpers({\n\tsnippet() {\n\t\treturn Template.instance().message.get();\n\t},\n\tsnippetContent() {\n\t\tconst message = Template.instance().message.get();\n\t\tif (message === undefined) {\n\t\t\treturn null;\n\t\t}\n\t\tmessage.html = message.msg;\n\t\tconst markdown = Markdown.parse(message);\n\t\treturn markdown.tokens[0].text;\n\t},\n\tdate() {\n\t\tconst snippet = Template.instance().message.get();\n\t\tif (snippet !== undefined) {\n\t\t\treturn moment(snippet.ts).format(settings.get('Message_DateFormat'));\n\t\t}\n\t},\n\ttime() {\n\t\tconst snippet = Template.instance().message.get();\n\t\tif (snippet !== undefined) {\n\t\t\treturn formatTime(snippet.ts);\n\t\t}\n\t},\n});\n\nTemplate.snippetPage.onCreated(async function () {\n\tconst snippetId = FlowRouter.getParam('snippetId');\n\tthis.message = new ReactiveVar({});\n\n\tconst { message } = await APIClient.v1.get(`chat.getSnippetedMessageById?messageId=${snippetId}`);\n\tthis.message.set(message);\n});\n","// import { Meteor } from 'meteor/meteor';\n// import { MessageAction, modal } from '../../ui-utils';\n// import { messageArgs } from '../../ui-utils/client/lib/messageArgs';\n// import { t, handleError } from '../../utils';\n// import { settings } from '../../settings';\n// import { Subscriptions } from '../../models';\n// import { hasAtLeastOnePermission } from '../../authorization';\n//\n// Meteor.startup(function() {\n// \tMessageAction.addButton({\n// \t\tid: 'snippeted-message',\n// \t\ticon: 'code',\n// \t\tlabel: 'Snippet',\n// \t\tcontext: [\n// \t\t\t'snippeted',\n// \t\t\t'message',\n// \t\t\t'message-mobile',\n// \t\t],\n// \t\torder: 10,\n// \t\tgroup: 'menu',\n// \t\taction() {\n// \t\t\tconst { msg: message } = messageArgs(this);\n//\n// \t\t\tmodal.open({\n// \t\t\t\ttitle: 'Create a Snippet',\n// \t\t\t\ttext: 'The name of your snippet (with file extension):',\n// \t\t\t\ttype: 'input',\n// \t\t\t\tshowCancelButton: true,\n// \t\t\t\tcloseOnConfirm: false,\n// \t\t\t\tinputPlaceholder: 'Snippet name',\n// \t\t\t}, function(filename) {\n// \t\t\t\tif (filename === false) {\n// \t\t\t\t\treturn false;\n// \t\t\t\t}\n// \t\t\t\tif (filename === '') {\n// \t\t\t\t\tmodal.showInputError('You need to write something!');\n// \t\t\t\t\treturn false;\n// \t\t\t\t}\n// \t\t\t\tmessage.snippeted = true;\n// \t\t\t\tMeteor.call('snippetMessage', message, filename, function(error) {\n// \t\t\t\t\tif (error) {\n// \t\t\t\t\t\treturn handleError(error);\n// \t\t\t\t\t}\n// \t\t\t\t\tmodal.open({\n// \t\t\t\t\t\ttitle: t('Nice'),\n// \t\t\t\t\t\ttext: `Snippet '${ filename }' created.`,\n// \t\t\t\t\t\ttype: 'success',\n// \t\t\t\t\t\ttimer: 2000,\n// \t\t\t\t\t});\n// \t\t\t\t});\n// \t\t\t});\n//\n// \t\t},\n// \t\tcondition(message) {\n// \t\t\tif (Subscriptions.findOne({ rid: message.rid, 'u._id': Meteor.userId() }) === undefined) {\n// \t\t\t\treturn false;\n// \t\t\t}\n//\n// \t\t\tif (message.snippeted || ((settings.get('Message_AllowSnippeting') === undefined) ||\n// \t\t\t\t(settings.get('Message_AllowSnippeting') === null) ||\n// \t\t\t\t(settings.get('Message_AllowSnippeting')) === false)) {\n// \t\t\t\treturn false;\n// \t\t\t}\n//\n// \t\t\treturn hasAtLeastOnePermission('snippet-message', message.rid);\n// \t\t},\n// \t});\n//\n// });\n","import './actionButton';\nimport './messageType';\nimport './snippetMessage';\nimport './page/snippetPage.html';\nimport './page/snippetPage';\nimport './tabBar/tabBar';\nimport './tabBar/views/snippetedMessages.html';\nimport './tabBar/views/snippetedMessages';\nimport './page/stylesheets/snippetPage.css';\n","import { Meteor } from 'meteor/meteor';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\n\nimport { MessageTypes } from '../../ui-utils';\n\nMeteor.startup(function () {\n\tMessageTypes.registerType({\n\t\tid: 'message_snippeted',\n\t\tsystem: true,\n\t\tmessage: 'Snippeted_a_message',\n\t\tdata(message) {\n\t\t\tconst snippetLink = `<a href=\"/snippet/${message.snippetId}/${encodeURIComponent(message.snippetName)}\">${escapeHTML(\n\t\t\t\tmessage.snippetName,\n\t\t\t)}</a>`;\n\t\t\treturn { snippetLink };\n\t\t},\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { settings } from '../../settings';\nimport { ChatMessage, Subscriptions } from '../../models';\n\nMeteor.methods({\n\tsnippetMessage(message) {\n\t\tif (typeof Meteor.userId() === 'undefined' || Meteor.userId() === null) {\n\t\t\treturn false;\n\t\t}\n\t\tif (\n\t\t\ttypeof settings.get('Message_AllowSnippeting') === 'undefined' ||\n\t\t\tsettings.get('Message_AllowSnippeting') === null ||\n\t\t\tsettings.get('Message_AllowSnippeting') === false\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst subscription = Subscriptions.findOne({ 'rid': message.rid, 'u._id': Meteor.userId() });\n\n\t\tif (subscription === undefined) {\n\t\t\treturn false;\n\t\t}\n\t\tChatMessage.update(\n\t\t\t{\n\t\t\t\t_id: message._id,\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\tsnippeted: true,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t},\n});\n","import { Template } from 'meteor/templating';\nimport { ReactiveVar } from 'meteor/reactive-var';\n\nimport { modal } from '../../../ui-utils/client';\nimport { APIClient, t } from '../../../utils/client';\nimport './gameCenter.html';\nimport { handleError } from '../../../../client/lib/utils/handleError';\n\nconst getExternalComponents = async (instance) => {\n\ttry {\n\t\tconst { externalComponents } = await APIClient.get('apps/externalComponents');\n\t\tinstance.games.set(externalComponents);\n\t} catch (e) {\n\t\thandleError(e);\n\t}\n\n\tinstance.isLoading.set(false);\n\tinstance.ready.set(true);\n};\n\nconst openGame = (gameManifestInfo) => {\n\tconst instance = Template.instance();\n\tconst { location = 'MODAL' } = gameManifestInfo;\n\n\tif (location === 'CONTEXTUAL_BAR') {\n\t\tinstance.gameManifestInfo.set(gameManifestInfo);\n\t} else if (location === 'MODAL') {\n\t\tmodal.open({\n\t\t\tallowOutsideClick: false,\n\t\t\tdata: {\n\t\t\t\tgame: gameManifestInfo,\n\t\t\t},\n\t\t\ttemplate: 'GameContainer',\n\t\t\ttype: 'rc-game',\n\t\t});\n\t}\n};\n\nTemplate.GameCenter.helpers({\n\tisReady() {\n\t\tif (Template.instance().ready != null) {\n\t\t\treturn Template.instance().ready.get();\n\t\t}\n\t\treturn false;\n\t},\n\tgames() {\n\t\treturn Template.instance().games.get();\n\t},\n\tisLoading() {\n\t\treturn Template.instance().isLoading.get();\n\t},\n\tonTableScroll() {\n\t\tconst instance = Template.instance();\n\t\tif (instance.loading || instance.end.get()) {\n\t\t\treturn;\n\t\t}\n\t\treturn function (currentTarget) {\n\t\t\tif (currentTarget.offsetHeight + currentTarget.scrollTop >= currentTarget.scrollHeight - 100) {\n\t\t\t\treturn instance.page.set(instance.page.get() + 1);\n\t\t\t}\n\t\t};\n\t},\n\tshowGame() {\n\t\treturn Template.instance().gameManifestInfo.get();\n\t},\n\tgameContainerOptions() {\n\t\tconst { gameManifestInfo, clearGameManifestInfo } = Template.instance();\n\n\t\treturn {\n\t\t\tgame: gameManifestInfo.get(),\n\t\t\tshowBackButton: true,\n\t\t\tclearGameManifestInfo,\n\t\t};\n\t},\n});\n\nTemplate.GameCenter.onCreated(function () {\n\tthis.ready = new ReactiveVar(false);\n\tthis.games = new ReactiveVar([]);\n\tthis.isLoading = new ReactiveVar(true);\n\tthis.page = new ReactiveVar(0);\n\tthis.end = new ReactiveVar(false);\n\n\tthis.gameManifestInfo = new ReactiveVar(null);\n\n\tthis.clearGameManifestInfo = () => {\n\t\tthis.gameManifestInfo.set(null);\n\t};\n\n\tgetExternalComponents(this);\n});\n\nTemplate.GameCenter.events({\n\t'click .rc-game-center__game'() {\n\t\tconst gameManifestInfo = this;\n\n\t\topenGame(gameManifestInfo);\n\t},\n\t'click .js-invite'(event) {\n\t\tevent.stopPropagation();\n\t\tmodal.open({\n\t\t\ttitle: t('Apps_Game_Center_Invite_Friends'),\n\t\t\tcontent: 'InvitePlayers',\n\t\t\tdata: this,\n\t\t\tconfirmOnEnter: false,\n\t\t\tshowCancelButton: false,\n\t\t\tshowConfirmButton: false,\n\t\t\thtml: false,\n\t\t});\n\t},\n});\n","import { Template } from 'meteor/templating';\n\nimport { modal } from '../../../ui-utils/client';\nimport { Apps } from '../orchestrator';\nimport { APIClient } from '../../../utils/client';\n\nimport './gameContainer.html';\n\nconst getExternalComponent = async () => {\n\tconst {\n\t\tdata: { game: externalComponent },\n\t} = Template.instance();\n\tconst realAppClientUIHost = Apps.getUIHost();\n\tconst currentUser = await realAppClientUIHost.getClientUserInfo();\n\tconst currentRoom = await realAppClientUIHost.getClientRoomInfo();\n\n\texternalComponent.state = {\n\t\tcurrentUser,\n\t\tcurrentRoom,\n\t};\n\n\treturn externalComponent;\n};\n\nTemplate.GameContainer.helpers({\n\tisContextualBar() {\n\t\tconst {\n\t\t\tdata: { game },\n\t\t} = Template.instance();\n\t\tconst { location } = game;\n\n\t\treturn location === 'CONTEXTUAL_BAR';\n\t},\n\tisModal() {\n\t\tconst {\n\t\t\tdata: { game },\n\t\t} = Template.instance();\n\t\tconst { location } = game;\n\n\t\treturn location === 'MODAL';\n\t},\n});\n\nTemplate.GameContainer.events({\n\t'click .rc-game__close'() {\n\t\tconst {\n\t\t\tdata: { clearGameManifestInfo },\n\t\t} = Template.instance();\n\n\t\tclearGameManifestInfo();\n\t\tmodal.cancel();\n\t},\n\t'click .js-back'() {\n\t\tconst {\n\t\t\tdata: { clearGameManifestInfo },\n\t\t} = Template.instance();\n\n\t\tclearGameManifestInfo();\n\t},\n});\n\nTemplate.GameContainer.onCreated(async () => {\n\tconst externalComponent = await getExternalComponent();\n\n\tAPIClient.post('apps/externalComponentEvent', {\n\t\tevent: 'IPostExternalComponentOpened',\n\t\texternalComponent,\n\t});\n});\n\nTemplate.GameContainer.onDestroyed(async () => {\n\tconst externalComponent = await getExternalComponent();\n\n\tAPIClient.post('apps/externalComponentEvent', {\n\t\tevent: 'IPostExternalComponentClosed',\n\t\texternalComponent,\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Random } from 'meteor/random';\nimport { Template } from 'meteor/templating';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Blaze } from 'meteor/blaze';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { Tracker } from 'meteor/tracker';\nimport { Session } from 'meteor/session';\n\nimport { AutoComplete } from '../../../meteor-autocomplete/client';\nimport { roomTypes } from '../../../utils/client';\nimport { ChatRoom } from '../../../models/client';\nimport { modal } from '../../../ui-utils/client';\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\n\nimport './invitePlayers.html';\n\nTemplate.InvitePlayers.helpers({\n\tonSelectUser() {\n\t\treturn Template.instance().onSelectUser;\n\t},\n\tselectedUsers() {\n\t\tconst myUsername = Meteor.user().username;\n\t\tconst { message } = this;\n\t\tconst users = Template.instance()\n\t\t\t.selectedUsers.get()\n\t\t\t.map((e) => e);\n\t\tif (message) {\n\t\t\tusers.unshift(message.u);\n\t\t}\n\t\treturn users.filter(({ username }) => myUsername !== username);\n\t},\n\tonClickTagUser() {\n\t\treturn Template.instance().onClickTagUser;\n\t},\n\tdeleteLastItemUser() {\n\t\treturn Template.instance().deleteLastItemUser;\n\t},\n\tonClickTagRoom() {\n\t\treturn Template.instance().onClickTagRoom;\n\t},\n\tdeleteLastItemRoom() {\n\t\treturn Template.instance().deleteLastItemRoom;\n\t},\n\tselectedRoom() {\n\t\treturn Template.instance().selectedRoom.get();\n\t},\n\tonSelectRoom() {\n\t\treturn Template.instance().onSelectRoom;\n\t},\n\troomCollection() {\n\t\treturn ChatRoom;\n\t},\n\troomSelector() {\n\t\treturn (expression) => ({ name: { $regex: `.*${expression}.*` } });\n\t},\n\troomModifier() {\n\t\treturn (filter, text = '') => {\n\t\t\tconst f = filter.get();\n\t\t\treturn `#${f.length === 0 ? text : text.replace(new RegExp(filter.get(), 'i'), (part) => `<strong>${part}</strong>`)}`;\n\t\t};\n\t},\n\tuserModifier() {\n\t\treturn (filter, text = '') => {\n\t\t\tconst f = filter.get();\n\t\t\treturn `@${f.length === 0 ? text : text.replace(new RegExp(filter.get(), 'i'), (part) => `<strong>${part}</strong>`)}`;\n\t\t};\n\t},\n\tnameSuggestion() {\n\t\treturn Template.instance().discussionName.get();\n\t},\n});\n\nTemplate.InvitePlayers.events({\n\tasync 'submit #invite-players, click .js-invite-players'(e, instance) {\n\t\te.preventDefault();\n\n\t\tconst {\n\t\t\tdata: { name },\n\t\t} = instance;\n\t\tconst users = instance.selectedUsers.get().map(({ username }) => username);\n\t\tconst privateGroupName = `${name.replace(/\\s/g, '-')}-${Random.id(10)}`;\n\n\t\ttry {\n\t\t\tconst result = await callWithErrorHandling('createPrivateGroup', privateGroupName, users);\n\n\t\t\troomTypes.openRouteLink(result.t, result);\n\n\t\t\t// This ensures the message is only sent after the\n\t\t\t// user has been redirected to the new room, preventing a\n\t\t\t// weird bug that made the message appear as unsent until\n\t\t\t// the screen gets refreshed\n\t\t\tTracker.autorun((c) => {\n\t\t\t\tif (Session.get('openedRoom') !== result.rid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tcallWithErrorHandling('sendMessage', {\n\t\t\t\t\t_id: Random.id(),\n\t\t\t\t\trid: result.rid,\n\t\t\t\t\tmsg: TAPi18n.__('Apps_Game_Center_Play_Game_Together', { name }),\n\t\t\t\t});\n\n\t\t\t\tc.stop();\n\t\t\t});\n\n\t\t\tmodal.close();\n\t\t} catch (err) {\n\t\t\tconsole.warn(err);\n\t\t}\n\t},\n});\n\nTemplate.InvitePlayers.onCreated(function () {\n\tthis.selectedUsers = new ReactiveVar([]);\n\tthis.onSelectUser = ({ item: user }) => {\n\t\tif (user.username === Meteor.user().username) {\n\t\t\treturn;\n\t\t}\n\t\tconst users = this.selectedUsers.get();\n\t\tif (!users.find((u) => user.username === u.username)) {\n\t\t\tthis.selectedUsers.set([...users, user]);\n\t\t}\n\t};\n\tthis.onClickTagUser = ({ username }) => {\n\t\tthis.selectedUsers.set(this.selectedUsers.get().filter((user) => user.username !== username));\n\t};\n\tthis.deleteLastItemUser = () => {\n\t\tconst arr = this.selectedUsers.get();\n\t\tarr.pop();\n\t\tthis.selectedUsers.set(arr);\n\t};\n});\n\nTemplate.SearchInvitePlayers.helpers({\n\tlist() {\n\t\treturn this.list;\n\t},\n\titems() {\n\t\treturn Template.instance().ac.filteredList();\n\t},\n\tconfig() {\n\t\tconst { filter } = Template.instance();\n\t\tconst { noMatchTemplate, templateItem, modifier } = Template.instance().data;\n\t\treturn {\n\t\t\tfilter: filter.get(),\n\t\t\ttemplate_item: templateItem,\n\t\t\tnoMatchTemplate,\n\t\t\tmodifier(text) {\n\t\t\t\treturn modifier(filter, text);\n\t\t\t},\n\t\t};\n\t},\n\tautocomplete(key) {\n\t\tconst instance = Template.instance();\n\t\tconst param = instance.ac[key];\n\t\treturn typeof param === 'function' ? param.apply(instance.ac) : param;\n\t},\n});\n\nTemplate.SearchInvitePlayers.events({\n\t'input input'(e, t) {\n\t\tconst input = e.target;\n\t\tconst position = input.selectionEnd || input.selectionStart;\n\t\tconst { length } = input.value;\n\t\tdocument.activeElement === input && e && /input/i.test(e.type) && (input.selectionEnd = position + input.value.length - length);\n\t\tt.filter.set(input.value);\n\t},\n\t'click .rc-popup-list__item'(e, t) {\n\t\tt.ac.onItemClick(this, e);\n\t},\n\t'keydown input'(e, t) {\n\t\tconst KEYCODE_BACKSPACE = 8;\n\t\tconst KEYCODE_DELETE = 46;\n\n\t\tt.ac.onKeyDown(e);\n\t\tif ([KEYCODE_BACKSPACE, KEYCODE_DELETE].includes(e.keyCode) && e.target.value === '') {\n\t\t\tconst { deleteLastItem } = t;\n\t\t\treturn deleteLastItem && deleteLastItem();\n\t\t}\n\t},\n\t'keyup input'(e, t) {\n\t\tt.ac.onKeyUp(e);\n\t},\n\t'focus input'(e, t) {\n\t\tt.ac.onFocus(e);\n\t},\n\t'blur input'(e, t) {\n\t\tt.ac.onBlur(e);\n\t},\n\t'click .rc-tags__tag'({ target }, t) {\n\t\tconst { onClickTag } = t;\n\t\treturn onClickTag & onClickTag(Blaze.getData(target));\n\t},\n});\nTemplate.SearchInvitePlayers.onRendered(function () {\n\tconst { name } = this.data;\n\n\tthis.ac.element = this.firstNode.querySelector(`[name=${name}]`);\n\tthis.ac.$element = $(this.ac.element);\n});\n\nTemplate.SearchInvitePlayers.onCreated(function () {\n\tthis.filter = new ReactiveVar('');\n\tthis.selected = new ReactiveVar([]);\n\tthis.onClickTag = this.data.onClickTag;\n\tthis.deleteLastItem = this.data.deleteLastItem;\n\n\tconst { collection, endpoint, field, sort, onSelect, selector = (match) => ({ term: match }) } = this.data;\n\tthis.ac = new AutoComplete({\n\t\tselector: {\n\t\t\tanchor: '.rc-input__label',\n\t\t\titem: '.rc-popup-list__item',\n\t\t\tcontainer: '.rc-popup-list__list',\n\t\t},\n\t\tonSelect,\n\t\tposition: 'fixed',\n\t\tlimit: 10,\n\t\tinputDelay: 300,\n\t\trules: [\n\t\t\t{\n\t\t\t\tcollection,\n\t\t\t\tendpoint,\n\t\t\t\tfield,\n\t\t\t\tmatchAll: true,\n\t\t\t\tdoNotChangeWidth: false,\n\t\t\t\tselector,\n\t\t\t\tsort,\n\t\t\t},\n\t\t],\n\t});\n\tthis.ac.tmplInst = this;\n});\n","import { useMemo } from 'react';\n\nimport { addAction } from '../../../../client/views/room/lib/Toolbox';\nimport { useEndpointData } from '../../../../client/hooks/useEndpointData';\nimport { AsyncStatePhase } from '../../../../client/hooks/useAsyncState';\n\naddAction('game-center', () => {\n\tconst { value = { externalComponents: [] }, phase: state, error } = useEndpointData('/apps/externalComponents');\n\n\tconst hasExternalComponents = value && value.externalComponents.length > 0;\n\tconst hasError = !!error;\n\treturn useMemo(\n\t\t() =>\n\t\t\tstate === AsyncStatePhase.RESOLVED && !hasError && hasExternalComponents\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\t\t\t\tid: 'game-center',\n\t\t\t\t\t\ttitle: 'Apps_Game_Center',\n\t\t\t\t\t\ticon: 'game',\n\t\t\t\t\t\ttemplate: 'GameCenter',\n\t\t\t\t\t\torder: -1,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[hasError, hasExternalComponents, state],\n\t);\n});\n","export { AppWebsocketReceiver, AppEvents } from './websockets';\n","import { Meteor } from 'meteor/meteor';\nimport { Emitter } from '@rocket.chat/emitter';\n\nimport { slashCommands, APIClient } from '../../../utils';\nimport { CachedCollectionManager } from '../../../ui-cached-collection';\nimport { loadButtons } from '../../../ui-message/client/ActionButtonSyncer';\n\nexport const AppEvents = Object.freeze({\n\tAPP_ADDED: 'app/added',\n\tAPP_REMOVED: 'app/removed',\n\tAPP_UPDATED: 'app/updated',\n\tAPP_STATUS_CHANGE: 'app/statusUpdate',\n\tAPP_SETTING_UPDATED: 'app/settingUpdated',\n\tCOMMAND_ADDED: 'command/added',\n\tCOMMAND_DISABLED: 'command/disabled',\n\tCOMMAND_UPDATED: 'command/updated',\n\tCOMMAND_REMOVED: 'command/removed',\n\tACTIONS_CHANGED: 'actions/changed',\n});\n\nexport class AppWebsocketReceiver extends Emitter {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.streamer = new Meteor.Streamer('apps');\n\n\t\tCachedCollectionManager.onLogin(() => {\n\t\t\tthis.listenStreamerEvents();\n\t\t});\n\t}\n\n\tlistenStreamerEvents() {\n\t\tObject.values(AppEvents).forEach((eventName) => {\n\t\t\tthis.streamer.on(eventName, this.emit.bind(this, eventName));\n\t\t});\n\n\t\tthis.streamer.on(AppEvents.COMMAND_ADDED, this.onCommandAddedOrUpdated);\n\t\tthis.streamer.on(AppEvents.COMMAND_UPDATED, this.onCommandAddedOrUpdated);\n\t\tthis.streamer.on(AppEvents.COMMAND_REMOVED, this.onCommandRemovedOrDisabled);\n\t\tthis.streamer.on(AppEvents.COMMAND_DISABLED, this.onCommandRemovedOrDisabled);\n\t\tthis.streamer.on(AppEvents.ACTIONS_CHANGED, this.onActionsChanged);\n\t}\n\n\tregisterListener(event, listener) {\n\t\tthis.on(event, listener);\n\t}\n\n\tunregisterListener(event, listener) {\n\t\tthis.off(event, listener);\n\t}\n\n\tonCommandAddedOrUpdated = (command) => {\n\t\tAPIClient.v1.get('commands.get', { command }).then((result) => {\n\t\t\tslashCommands.commands[command] = result.command;\n\t\t});\n\t};\n\n\tonCommandRemovedOrDisabled = (command) => {\n\t\tdelete slashCommands.commands[command];\n\t};\n\n\tonActionsChanged = () => loadButtons();\n}\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport { AppsEngineUIHost } from '@rocket.chat/apps-engine/client/AppsEngineUIHost';\n\nimport { Rooms } from '../../models/client';\nimport { APIClient } from '../../utils/client';\nimport { getUserAvatarURL } from '../../utils/lib/getUserAvatarURL';\nimport { baseURI } from '../../../client/lib/baseURI';\n\nexport class RealAppsEngineUIHost extends AppsEngineUIHost {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._baseURL = baseURI.replace(/\\/$/, '');\n\t}\n\n\tgetUserAvatarUrl(username) {\n\t\tconst avatarUrl = getUserAvatarURL(username);\n\n\t\tif (!avatarUrl.startsWith('http') && !avatarUrl.startsWith('data')) {\n\t\t\treturn `${this._baseURL}${avatarUrl}`;\n\t\t}\n\n\t\treturn avatarUrl;\n\t}\n\n\tasync getClientRoomInfo() {\n\t\tconst { name: slugifiedName, _id: id } = Rooms.findOne(Session.get('openedRoom'));\n\n\t\tlet cachedMembers = [];\n\t\ttry {\n\t\t\tconst { members } = await APIClient.get('v1/groups.members', { roomId: id });\n\n\t\t\tcachedMembers = members.map(({ _id, username }) => ({\n\t\t\t\tid: _id,\n\t\t\t\tusername,\n\t\t\t\tavatarUrl: this.getUserAvatarUrl(username),\n\t\t\t}));\n\t\t} catch (error) {\n\t\t\tconsole.warn(error);\n\t\t}\n\n\t\treturn {\n\t\t\tid,\n\t\t\tslugifiedName,\n\t\t\tmembers: cachedMembers,\n\t\t};\n\t}\n\n\tasync getClientUserInfo() {\n\t\tconst { username, _id } = Meteor.user();\n\n\t\treturn {\n\t\t\tid: _id,\n\t\t\tusername,\n\t\t\tavatarUrl: this.getUserAvatarUrl(username),\n\t\t};\n\t}\n}\n","import { TAPi18next } from 'meteor/rocketchat:tap-i18n';\n\nimport { Apps } from './orchestrator';\nimport { Utilities } from '../lib/misc/Utilities';\nimport { AppEvents } from './communication';\n\nexport const loadAppI18nResources = (appId, languages) => {\n\tObject.entries(languages).forEach(([language, translations]) => {\n\t\ttry {\n\t\t\t// Translations keys must be scoped under app id\n\t\t\tconst scopedTranslations = Object.entries(translations).reduce((translations, [key, value]) => {\n\t\t\t\ttranslations[Utilities.getI18nKeyForApp(key, appId)] = value;\n\t\t\t\treturn translations;\n\t\t\t}, {});\n\n\t\t\tTAPi18next.addResourceBundle(language, 'project', scopedTranslations);\n\t\t} catch (error) {\n\t\t\tApps.handleError(error);\n\t\t}\n\t});\n};\n\nconst handleAppAdded = async (appId) => {\n\tconst languages = await Apps.getAppLanguages(appId);\n\tloadAppI18nResources(appId, languages);\n};\n\nexport const handleI18nResources = async () => {\n\tconst apps = await Apps.getAppsLanguages();\n\tapps.forEach(({ id, languages }) => {\n\t\tloadAppI18nResources(id, languages);\n\t});\n\n\tApps.getWsListener().unregisterListener(AppEvents.APP_ADDED, handleAppAdded);\n\tApps.getWsListener().registerListener(AppEvents.APP_ADDED, handleAppAdded);\n};\n","import './gameCenter/tabBar';\nimport './gameCenter/gameContainer';\nimport './gameCenter/gameCenter';\nimport './gameCenter/invitePlayers';\n\nexport { Apps } from './orchestrator';\n","import { AppClientManager } from '@rocket.chat/apps-engine/client/AppClientManager';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { dispatchToastMessage } from '../../../client/lib/toast';\nimport { hasAtLeastOnePermission } from '../../authorization';\nimport { settings } from '../../settings/client';\nimport { CachedCollectionManager } from '../../ui-cached-collection';\nimport { APIClient } from '../../utils';\nimport { AppWebsocketReceiver } from './communication';\nimport { handleI18nResources } from './i18n';\nimport { RealAppsEngineUIHost } from './RealAppsEngineUIHost';\n\nconst createDeferredValue = () => {\n\tlet resolve;\n\tlet reject;\n\tconst promise = new Promise((_resolve, _reject) => {\n\t\tresolve = _resolve;\n\t\treject = _reject;\n\t});\n\n\treturn [promise, resolve, reject];\n};\n\nclass AppClientOrchestrator {\n\tconstructor() {\n\t\tthis._appClientUIHost = new RealAppsEngineUIHost();\n\t\tthis._manager = new AppClientManager(this._appClientUIHost);\n\t\tthis.isLoaded = false;\n\t\t[this.deferredIsEnabled, this.setEnabled] = createDeferredValue();\n\t}\n\n\tload = async (isEnabled) => {\n\t\tif (!this.isLoaded) {\n\t\t\tthis.ws = new AppWebsocketReceiver();\n\t\t\tthis.isLoaded = true;\n\t\t}\n\n\t\tthis.setEnabled(isEnabled);\n\n\t\t// Since the deferred value (a promise) is immutable after resolved,\n\t\t// it need to be recreated to resolve a new value\n\t\t[this.deferredIsEnabled, this.setEnabled] = createDeferredValue();\n\n\t\tawait handleI18nResources();\n\t\tthis.setEnabled(isEnabled);\n\t};\n\n\tgetWsListener = () => this.ws;\n\n\tgetAppClientManager = () => this._manager;\n\n\thandleError = (error) => {\n\t\tconsole.error(error);\n\t\tif (hasAtLeastOnePermission(['manage-apps'])) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: error.message,\n\t\t\t});\n\t\t}\n\t};\n\n\tisEnabled = () => this.deferredIsEnabled;\n\n\tgetApps = async () => {\n\t\tconst { apps } = await APIClient.get('apps');\n\t\treturn apps;\n\t};\n\n\tgetAppsFromMarketplace = async () => {\n\t\tconst appsOverviews = await APIClient.get('apps', { marketplace: 'true' });\n\t\treturn appsOverviews.map(({ latest, price, pricingPlans, purchaseType, isEnterpriseOnly }) => ({\n\t\t\t...latest,\n\t\t\tprice,\n\t\t\tpricingPlans,\n\t\t\tpurchaseType,\n\t\t\tisEnterpriseOnly,\n\t\t}));\n\t};\n\n\tgetAppsOnBundle = async (bundleId) => {\n\t\tconst { apps } = await APIClient.get(`apps/bundles/${bundleId}/apps`);\n\t\treturn apps;\n\t};\n\n\tgetAppsLanguages = async () => {\n\t\tconst { apps } = await APIClient.get('apps/languages');\n\t\treturn apps;\n\t};\n\n\tgetApp = async (appId) => {\n\t\tconst { app } = await APIClient.get(`apps/${appId}`);\n\t\treturn app;\n\t};\n\n\tgetAppFromMarketplace = async (appId, version) => {\n\t\tconst { app } = await APIClient.get(`apps/${appId}`, {\n\t\t\tmarketplace: 'true',\n\t\t\tversion,\n\t\t});\n\t\treturn app;\n\t};\n\n\tgetLatestAppFromMarketplace = async (appId, version) => {\n\t\tconst { app } = await APIClient.get(`apps/${appId}`, {\n\t\t\tmarketplace: 'true',\n\t\t\tupdate: 'true',\n\t\t\tappVersion: version,\n\t\t});\n\t\treturn app;\n\t};\n\n\tgetAppSettings = async (appId) => {\n\t\tconst { settings } = await APIClient.get(`apps/${appId}/settings`);\n\t\treturn settings;\n\t};\n\n\tsetAppSettings = async (appId, settings) => {\n\t\tconst { updated } = await APIClient.post(`apps/${appId}/settings`, undefined, { settings });\n\t\treturn updated;\n\t};\n\n\tgetAppApis = async (appId) => {\n\t\tconst { apis } = await APIClient.get(`apps/${appId}/apis`);\n\t\treturn apis;\n\t};\n\n\tgetAppLanguages = async (appId) => {\n\t\tconst { languages } = await APIClient.get(`apps/${appId}/languages`);\n\t\treturn languages;\n\t};\n\n\tinstallApp = async (appId, version, permissionsGranted) => {\n\t\tconst { app } = await APIClient.post('apps/', {\n\t\t\tappId,\n\t\t\tmarketplace: true,\n\t\t\tversion,\n\t\t\tpermissionsGranted,\n\t\t});\n\t\treturn app;\n\t};\n\n\tupdateApp = async (appId, version, permissionsGranted) => {\n\t\tconst { app } = await APIClient.post(`apps/${appId}`, {\n\t\t\tappId,\n\t\t\tmarketplace: true,\n\t\t\tversion,\n\t\t\tpermissionsGranted,\n\t\t});\n\t\treturn app;\n\t};\n\n\tuninstallApp = (appId) => APIClient.delete(`apps/${appId}`);\n\n\tsyncApp = (appId) => APIClient.post(`apps/${appId}/sync`);\n\n\tsetAppStatus = async (appId, status) => {\n\t\tconst { status: effectiveStatus } = await APIClient.post(`apps/${appId}/status`, { status });\n\t\treturn effectiveStatus;\n\t};\n\n\tenableApp = (appId) => this.setAppStatus(appId, 'manually_enabled');\n\n\tdisableApp = (appId) => this.setAppStatus(appId, 'manually_disabled');\n\n\tbuildExternalUrl = (appId, purchaseType = 'buy', details = false) =>\n\t\tAPIClient.get('apps', {\n\t\t\tbuildExternalUrl: 'true',\n\t\t\tappId,\n\t\t\tpurchaseType,\n\t\t\tdetails,\n\t\t});\n\n\tgetCategories = async () => {\n\t\tconst categories = await APIClient.get('apps', { categories: 'true' });\n\t\treturn categories;\n\t};\n\n\tgetUIHost = () => this._appClientUIHost;\n}\n\nexport const Apps = new AppClientOrchestrator();\n\nMeteor.startup(() => {\n\tCachedCollectionManager.onLogin(() => {\n\t\tMeteor.call('apps/is-enabled', (error, isEnabled) => {\n\t\t\tif (error) {\n\t\t\t\tApps.handleError(error);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tApps.getAppClientManager().initialize();\n\t\t\tApps.load(isEnabled);\n\t\t});\n\t});\n\n\tTracker.autorun(() => {\n\t\tconst isEnabled = settings.get('Apps_Framework_enabled');\n\t\tApps.load(isEnabled);\n\t});\n});\n","export class Utilities {\n\tstatic getI18nKeyForApp(key, appId) {\n\t\treturn key && `apps-${appId}-${key}`;\n\t}\n\n\tstatic curl({ method, params, auth, headers = {}, url, query, content }, opts = {}) {\n\t\tconst newLine = '\\\\\\n   ';\n\n\t\tconst cmd = ['curl'];\n\n\t\t// curl options\n\t\tif (opts.verbose) {\n\t\t\tcmd.push('-v');\n\t\t}\n\t\tif (opts.headers) {\n\t\t\tcmd.push('-i');\n\t\t}\n\n\t\t// method\n\t\tcmd.push('-X');\n\t\tcmd.push((method || 'GET').toUpperCase());\n\n\t\t// URL\n\t\tlet u = url;\n\n\t\tif (typeof params === 'object') {\n\t\t\tObject.entries(params).forEach(([key, value]) => {\n\t\t\t\tu = u.replace(`:${key}`, value);\n\t\t\t});\n\t\t}\n\n\t\tif (typeof query === 'object') {\n\t\t\tconst queryString = Object.entries(query)\n\t\t\t\t.map(([key, value]) => `${key}=${value}`)\n\t\t\t\t.join('&');\n\t\t\tu += `?${queryString}`;\n\t\t}\n\t\tcmd.push(u);\n\n\t\t// username\n\t\tif (auth) {\n\t\t\tcmd.push(newLine);\n\t\t\tcmd.push('-u');\n\t\t\tcmd.push(auth);\n\t\t}\n\n\t\t// headers\n\t\tconst headerKeys = [];\n\t\tObject.entries(headers).forEach(([key, val]) => {\n\t\t\tkey = key.toLowerCase();\n\t\t\theaderKeys.push(key);\n\t\t\tcmd.push(newLine);\n\t\t\tcmd.push('-H');\n\t\t\tcmd.push(`\"${key}${val ? ': ' : ';'}${val || ''}\"`);\n\t\t});\n\n\t\tif (content) {\n\t\t\tif (typeof content === 'object') {\n\t\t\t\tif (!headerKeys.includes('content-type')) {\n\t\t\t\t\tcmd.push(newLine);\n\t\t\t\t\tcmd.push('-H');\n\t\t\t\t\tcmd.push('\"content-type: application/json\"');\n\t\t\t\t}\n\t\t\t\tcontent = JSON.stringify(content);\n\t\t\t}\n\n\t\t\tcmd.push(newLine);\n\t\t\tcmd.push('--data-binary');\n\t\t\tcmd.push(`'${content}'`);\n\t\t}\n\n\t\treturn cmd.join(' ');\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { settings } from '../../../settings';\nimport { hasRole } from '../../../authorization';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\nimport { validateEmail } from '../../../../lib/emailValidator';\n\nTemplate.ChatpalAdmin.onCreated(function () {\n\tthis.validateEmail = validateEmail;\n\n\tthis.apiKey = new ReactiveVar();\n\n\tconst lang = settings.get('Language');\n\n\tthis.lang = lang === 'de' || lang === 'en' ? lang : 'en';\n\n\tthis.tac = new ReactiveVar();\n\n\tMeteor.call('chatpalUtilsGetTaC', this.lang, (err, data) => {\n\t\tthis.tac.set(data);\n\t});\n});\n\nTemplate.ChatpalAdmin.events({\n\t'submit form'(e, t) {\n\t\te.preventDefault();\n\n\t\tconst email = e.target.email.value;\n\t\tconst tac = e.target.readtac.checked;\n\n\t\tif (!tac) {\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: TAPi18n.__('Chatpal_ERROR_TAC_must_be_checked'),\n\t\t\t});\n\t\t}\n\t\tif (!email || email === '') {\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: TAPi18n.__('Chatpal_ERROR_Email_must_be_set'),\n\t\t\t});\n\t\t}\n\t\tif (!t.validateEmail(email)) {\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: TAPi18n.__('Chatpal_ERROR_Email_must_be_valid'),\n\t\t\t});\n\t\t}\n\n\t\t// TODO register\n\t\ttry {\n\t\t\tMeteor.call('chatpalUtilsCreateKey', email, (err, key) => {\n\t\t\t\tif (!key) {\n\t\t\t\t\treturn dispatchToastMessage({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\tmessage: TAPi18n.__('Chatpal_ERROR_username_already_exists'),\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tdispatchToastMessage({\n\t\t\t\t\ttype: 'info',\n\t\t\t\t\tmessage: TAPi18n.__('Chatpal_created_key_successfully'),\n\t\t\t\t});\n\n\t\t\t\tt.apiKey.set(key);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tconsole.log(e);\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: TAPi18n.__('Chatpal_ERROR_username_already_exists'),\n\t\t\t}); // TODO error messages\n\t\t}\n\t},\n});\n\n// template\nTemplate.ChatpalAdmin.helpers({\n\tapiKey() {\n\t\treturn Template.instance().apiKey.get();\n\t},\n\tisAdmin() {\n\t\treturn hasRole(Meteor.userId(), 'admin');\n\t},\n\ttac() {\n\t\treturn Template.instance().tac.get();\n\t},\n});\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { roomTypes, getURL } from '../../../utils';\nimport { Subscriptions } from '../../../models';\nimport { getUserAvatarURL as getAvatarUrl } from '../../../utils/lib/getUserAvatarURL';\nimport { formatTime } from '../../../../client/lib/utils/formatTime';\nimport { formatDate } from '../../../../client/lib/utils/formatDate';\n\nconst getDMUrl = (username) => getURL(`/direct/${username}`);\n\nTemplate.ChatpalSearchResultTemplate.onCreated(function () {\n\tthis.badRequest = new ReactiveVar(false);\n\tthis.resultType = new ReactiveVar(this.data.settings.DefaultResultType);\n\tthis.data.parentPayload.resultType = this.resultType.get();\n});\n\nTemplate.ChatpalSearchResultTemplate.events = {\n\t'click .chatpal-search-typefilter li'(evt, t) {\n\t\tt.data.parentPayload.resultType = evt.currentTarget.getAttribute('value');\n\t\tt.data.payload.start = 0;\n\t\tt.resultType.set(t.data.parentPayload.resultType);\n\t\tt.data.search();\n\t},\n\t'click .chatpal-paging-prev'(env, t) {\n\t\tt.data.payload.start -= t.data.settings.PageSize;\n\t\tt.data.search();\n\t},\n\t'click .chatpal-paging-next'(env, t) {\n\t\tt.data.payload.start = (t.data.payload.start || 0) + t.data.settings.PageSize;\n\t\tt.data.search();\n\t},\n\t'click .chatpal-show-more-messages'(evt, t) {\n\t\tt.data.parentPayload.resultType = 'Messages';\n\t\tt.data.payload.start = 0;\n\t\tt.data.payload.rows = t.data.settings.PageSize;\n\t\tt.resultType.set(t.data.parentPayload.resultType);\n\t\tt.data.search();\n\t},\n};\n\nTemplate.ChatpalSearchResultTemplate.helpers({\n\tresult() {\n\t\treturn Template.instance().data.result.get();\n\t},\n\tsearching() {\n\t\treturn Template.instance().data.searching.get();\n\t},\n\tresultType() {\n\t\treturn Template.instance().resultType.get();\n\t},\n\tnavSelected(type) {\n\t\treturn Template.instance().resultType.get() === type ? 'selected' : '';\n\t},\n\tresultsFoundForAllSearch() {\n\t\tconst result = Template.instance().data.result.get();\n\n\t\tif (!result) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn result.message.numFound > 0 || result.user.numFound > 0 || result.room.numFound > 0;\n\t},\n\tmoreMessagesThanDisplayed() {\n\t\tconst result = Template.instance().data.result.get();\n\n\t\treturn result.message.docs.length < result.message.numFound;\n\t},\n\tresultNumFound() {\n\t\tconst result = Template.instance().data.result.get();\n\t\tif (result) {\n\t\t\tswitch (result.message.numFound) {\n\t\t\t\tcase 0:\n\t\t\t\t\treturn TAPi18n.__('Chatpal_no_search_results');\n\t\t\t\tcase 1:\n\t\t\t\t\treturn TAPi18n.__('Chatpal_one_search_result');\n\t\t\t\tdefault:\n\t\t\t\t\treturn TAPi18n.__('Chatpal_search_results', result.message.numFound);\n\t\t\t}\n\t\t}\n\t},\n\tresultMessagesOnly() {\n\t\treturn Template.instance().resultType.get() === 'Messages' || Template.instance().resultType.get() === 'Room';\n\t},\n\tresultPaging() {\n\t\tconst result = Template.instance().data.result.get();\n\t\tconst pageSize = Template.instance().data.settings.PageSize;\n\t\tif (result) {\n\t\t\treturn {\n\t\t\t\tcurrentPage: 1 + result.message.start / pageSize,\n\t\t\t\tnumOfPages: Math.ceil(result.message.numFound / pageSize),\n\t\t\t};\n\t\t}\n\t},\n});\n\nTemplate.ChatpalSearchSingleMessage.helpers({\n\troomIcon() {\n\t\tconst room = this.r;\n\t\tif (room && room.t === 'd') {\n\t\t\treturn 'at';\n\t\t}\n\t\treturn roomTypes.getIcon(room);\n\t},\n\n\troomLink() {\n\t\treturn roomTypes.getRouteLink(this.r.t, this.r);\n\t},\n\n\troomName() {\n\t\treturn roomTypes.getRoomName(this.r.t, this.r);\n\t},\n\n\troomNotSubscribed() {\n\t\tconst subscription = Subscriptions.findOne({ rid: this.rid });\n\t\treturn typeof subscription === 'undefined';\n\t},\n\n\ttime() {\n\t\treturn formatTime(this.created);\n\t},\n\tdate() {\n\t\treturn formatDate(this.created);\n\t},\n\tgetAvatarUrl,\n});\n\nTemplate.ChatpalSearchSingleRoom.helpers({\n\troomIcon() {\n\t\tif (this.t === 'd') {\n\t\t\treturn 'at';\n\t\t}\n\t\treturn roomTypes.getIcon(this);\n\t},\n\troomLink() {\n\t\treturn roomTypes.getRouteLink(this.t, this);\n\t},\n\troomNotSubscribed() {\n\t\tconst subscription = Subscriptions.findOne({ rid: this.rid });\n\t\treturn typeof subscription === 'undefined';\n\t},\n});\n\nTemplate.ChatpalSearchSingleUser.helpers({\n\tcleanUsername() {\n\t\tconst username = this.user_username || this.username; // varies whether users or messages of users are displayed\n\t\treturn username.replace(/<\\/?em>/gi, '');\n\t},\n\tgetAvatarUrl,\n\tgetDMUrl,\n});\n","import { Template } from 'meteor/templating';\n\nTemplate.ChatpalSuggestionItemTemplate.onCreated(function () {\n\tif (this.data.type === 'link') {\n\t\tthis.data.action = () => {\n\t\t\tconsole.log('an example for an external link');\n\t\t};\n\t}\n});\n","import './template/admin.html';\nimport './template/result.html';\nimport './template/suggestion.html';\nimport './template/admin';\nimport './template/result';\nimport './template/suggestion';\nimport './style.css';\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\n\nimport { handleError } from '../../../../client/lib/utils/handleError';\nimport { settings } from '../../../settings/client';\n\nconst getMedia = () => navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\nconst createAndConnect = (url) => {\n\tif (!('WebSocket' in window)) {\n\t\t// eslint-disable-line no-negated-in-lhs\n\t\treturn false;\n\t}\n\n\tconst ws = new WebSocket(url);\n\tws.onerror = (evt) => console.error(`Error: ${evt.data}`);\n\treturn ws;\n};\nconst sendMessageToWebSocket = (message, ws) => {\n\tif (ws != null) {\n\t\tif (ws.readyState === 1) {\n\t\t\tws.send(message);\n\t\t}\n\t}\n};\nexport const call = (...args) =>\n\tnew Promise(function (resolve, reject) {\n\t\tMeteor.call(...args, function (err, result) {\n\t\t\tif (err) {\n\t\t\t\thandleError(err);\n\t\t\t\treject(err);\n\t\t\t}\n\t\t\tresolve(result);\n\t\t});\n\t});\n\nconst delay = (time) => new Promise((resolve) => setTimeout(resolve, time));\n\nconst waitForStreamStatus = async (id, status) => {\n\tconst streamActive = new Promise(async (resolve) => {\n\t\t// eslint-disable-next-line no-constant-condition\n\t\twhile (true) {\n\t\t\tconst currentStatus = await call('livestreamStreamStatus', { streamId: id }); // eslint-disable-line no-await-in-loop\n\t\t\tif (currentStatus === status) {\n\t\t\t\treturn resolve(status);\n\t\t\t}\n\t\t\tawait delay(1500); // eslint-disable-line no-await-in-loop\n\t\t}\n\t});\n\tawait streamActive;\n};\nconst waitForBroadcastStatus = async (id, status) => {\n\tconst broadcastActive = new Promise(async (resolve) => {\n\t\t// eslint-disable-next-line no-constant-condition\n\t\twhile (true) {\n\t\t\tconst currentStatus = await call('getBroadcastStatus', { broadcastId: id }); // eslint-disable-line no-await-in-loop\n\t\t\tif (currentStatus === status) {\n\t\t\t\treturn resolve(status);\n\t\t\t}\n\t\t\tawait delay(1500); // eslint-disable-line no-await-in-loop\n\t\t}\n\t});\n\tawait broadcastActive;\n};\n\nTemplate.broadcastView.helpers({\n\tbroadcastSource() {\n\t\treturn Template.instance().mediaStream.get() ? window.URL.createObjectURL(Template.instance().mediaStream.get()) : '';\n\t},\n\tmediaRecorder() {\n\t\tTemplate.instance().mediaRecorder.get();\n\t},\n});\n\nTemplate.broadcastView.onCreated(async function () {\n\tconst connection = createAndConnect(`${settings.get('Broadcasting_media_server_url')}/${this.data.id}`);\n\tthis.mediaStream = new ReactiveVar(null);\n\tthis.mediaRecorder = new ReactiveVar(null);\n\tthis.connection = new ReactiveVar(connection);\n});\nTemplate.broadcastView.onDestroyed(function () {\n\tif (this.connection.get()) {\n\t\tthis.connection.get().close();\n\t}\n\tif (this.mediaRecorder.get()) {\n\t\tthis.mediaRecorder.get().stop();\n\t\tthis.mediaRecorder.set(null);\n\t}\n\tif (this.mediaStream.get()) {\n\t\tthis.mediaStream\n\t\t\t.get()\n\t\t\t.getTracks()\n\t\t\t.map((track) => track.stop());\n\t\tthis.mediaStream.set(null);\n\t}\n});\nTemplate.broadcastView.onRendered(async function () {\n\tnavigator.getMedia = getMedia();\n\tif (!navigator.getMedia) {\n\t\treturn alert('getUserMedia() is not supported in your browser!');\n\t}\n\tconst localMediaStream = await new Promise((resolve, reject) => navigator.getMedia({ video: true, audio: true }, resolve, reject));\n\n\tconst connection = this.connection.get();\n\n\tthis.mediaStream.set(localMediaStream);\n\tlet options = { mimeType: 'video/webm;codecs=vp9' };\n\tif (!MediaRecorder.isTypeSupported(options.mimeType)) {\n\t\toptions = { mimeType: 'video/webm;codecs=vp8' };\n\t\tif (!MediaRecorder.isTypeSupported(options.mimeType)) {\n\t\t\toptions = { mimeType: 'video/webm' };\n\t\t\tif (!MediaRecorder.isTypeSupported(options.mimeType)) {\n\t\t\t\toptions = { mimeType: '' };\n\t\t\t}\n\t\t}\n\t}\n\ttry {\n\t\tconst mediaRecorder = new MediaRecorder(localMediaStream, options);\n\t\tmediaRecorder.ondataavailable = (event) => {\n\t\t\tif (!(event.data || event.data.size > 0)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsendMessageToWebSocket(event.data, connection);\n\t\t};\n\t\tmediaRecorder.start(100); // collect 100ms of data\n\t\tthis.mediaRecorder.set(mediaRecorder);\n\n\t\tawait waitForStreamStatus(this.data.stream.id, 'active');\n\t\tawait call('setLivestreamStatus', { broadcastId: this.data.broadcast.id, status: 'testing' });\n\t\tawait waitForBroadcastStatus(this.data.broadcast.id, 'testing');\n\t\tdocument.querySelector('.streaming-popup').dispatchEvent(new Event('broadcastStreamReady'));\n\t} catch (e) {\n\t\tconsole.log(e);\n\t}\n});\n\nTemplate.broadcastView.events({\n\tasync 'startStreaming .streaming-popup'(e, i) {\n\t\tawait call('setLivestreamStatus', { broadcastId: i.data.broadcast.id, status: 'live' });\n\t\tdocument.querySelector('.streaming-popup').dispatchEvent(new Event('broadcastStream'));\n\t\tawait call('saveRoomSettings', Session.get('openedRoom'), 'streamingOptions', {\n\t\t\tid: i.data.broadcast.id,\n\t\t\turl: `https://www.youtube.com/embed/${i.data.broadcast.id}`,\n\t\t\tthumbnail: `https://img.youtube.com/vi/${i.data.broadcast.id}/0.jpg`,\n\t\t});\n\t},\n\tasync 'stopStreaming .streaming-popup'(e, i) {\n\t\tawait call('setBroadcastStatus', { broadcastId: i.data.broadcast.id, status: 'complete' });\n\t\tawait call('saveRoomSettings', Session.get('openedRoom'), 'streamingOptions', {}, (err) => {\n\t\t\tif (err) {\n\t\t\t\treturn handleError(err);\n\t\t\t}\n\t\t\ti.editing.set(false);\n\t\t\ti.streamingOptions.set({});\n\t\t});\n\t\tif (i.mediaRecorder.get()) {\n\t\t\ti.mediaRecorder.get().stop();\n\t\t\ti.mediaRecorder.set(null);\n\t\t}\n\t\tif (i.mediaStream.get()) {\n\t\t\ti.mediaStream\n\t\t\t\t.get()\n\t\t\t\t.getTracks()\n\t\t\t\t.map((track) => track.stop());\n\t\t\ti.mediaStream.set(null);\n\t\t}\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Blaze } from 'meteor/blaze';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { auth } from '../oauth.js';\nimport { RocketChatAnnouncement } from '../../../lib';\nimport { popout } from '../../../ui-utils';\nimport { t } from '../../../utils';\nimport { settings } from '../../../settings';\nimport { callbacks } from '../../../../lib/callbacks';\nimport { hasAllPermission } from '../../../authorization';\nimport { Users, Rooms } from '../../../models';\nimport { handleError } from '../../../../client/lib/utils/handleError';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\n\nexport const call = (...args) =>\n\tnew Promise(function (resolve, reject) {\n\t\tMeteor.call(...args, function (err, result) {\n\t\t\tif (err) {\n\t\t\t\thandleError(err);\n\t\t\t\treject(err);\n\t\t\t}\n\t\t\tresolve(result);\n\t\t});\n\t});\n\nexport const close = (popup) =>\n\tnew Promise(function (resolve) {\n\t\tconst checkInterval = setInterval(() => {\n\t\t\tif (popup.closed) {\n\t\t\t\tclearInterval(checkInterval);\n\t\t\t\tresolve();\n\t\t\t}\n\t\t}, 300);\n\t});\n\nfunction optionsFromUrl(url) {\n\tconst options = {};\n\tconst parsedUrl = url.match(\n\t\t/(http:|https:|)\\/\\/(www.)?(youtu(be\\.com|\\.be|be\\.googleapis\\.com))\\/(video\\/|embed\\/|watch\\?v=|v\\/|embed\\?clip=)?([A-Za-z0-9._%-]*)(\\&\\S+)?/,\n\t);\n\toptions.url = url;\n\tif (parsedUrl != null) {\n\t\toptions.id = parsedUrl[6];\n\t\tif (parsedUrl[3].includes('youtu')) {\n\t\t\toptions.url = `https://www.youtube.com/embed/${parsedUrl[6]}`;\n\t\t\toptions.thumbnail = `https://img.youtube.com/vi/${parsedUrl[6]}/0.jpg`;\n\t\t}\n\t\t// @TODO add support for other urls\n\t}\n\treturn options;\n}\n\nTemplate.liveStreamTab.helpers({\n\tbroadcastEnabled() {\n\t\treturn !!settings.get('Broadcasting_enabled');\n\t},\n\tstreamingSource() {\n\t\treturn Template.instance().streamingOptions.get() ? Template.instance().streamingOptions.get().url : '';\n\t},\n\tstreamingUnavailableMessage() {\n\t\treturn Template.instance().streamingOptions.get() &&\n\t\t\tTemplate.instance().streamingOptions.get().message &&\n\t\t\tTemplate.instance().streamingOptions.get().message !== ''\n\t\t\t? Template.instance().streamingOptions.get().message\n\t\t\t: t('Livestream_not_found');\n\t},\n\tthumbnailUrl() {\n\t\treturn Template.instance().streamingOptions.get() ? Template.instance().streamingOptions.get().thumbnail : '';\n\t},\n\thasThumbnail() {\n\t\treturn (\n\t\t\t!!Template.instance().streamingOptions.get() &&\n\t\t\t!!Template.instance().streamingOptions.get().thumbnail &&\n\t\t\tTemplate.instance().streamingOptions.get().thumbnail !== ''\n\t\t);\n\t},\n\thasSource() {\n\t\treturn (\n\t\t\t!!Template.instance().streamingOptions.get() &&\n\t\t\t!!Template.instance().streamingOptions.get().url &&\n\t\t\tTemplate.instance().streamingOptions.get().url !== ''\n\t\t);\n\t},\n\tcanEdit() {\n\t\treturn hasAllPermission('edit-room', this.rid);\n\t},\n\tediting() {\n\t\treturn (\n\t\t\tTemplate.instance().editing.get() ||\n\t\t\tTemplate.instance().streamingOptions.get() == null ||\n\t\t\t(Template.instance().streamingOptions.get() != null &&\n\t\t\t\t(Template.instance().streamingOptions.get().url == null || Template.instance().streamingOptions.get().url === ''))\n\t\t);\n\t},\n\tcanDock() {\n\t\tconst livestreamTabSource = Template.instance().streamingOptions.get().url;\n\t\tlet popoutSource = null;\n\t\ttry {\n\t\t\tif (popout.context) {\n\t\t\t\tpopoutSource = Blaze.getData(popout.context).data && Blaze.getData(popout.context).data.streamingSource;\n\t\t\t}\n\t\t\tif (popoutSource != null && livestreamTabSource === popoutSource) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t\treturn false;\n\t},\n\tisPopoutOpen() {\n\t\treturn Template.instance().popoutOpen.get();\n\t},\n\tisAudioOnly() {\n\t\treturn Template.instance().streamingOptions.get() ? Template.instance().streamingOptions.get().isAudioOnly : false;\n\t},\n});\n\nTemplate.liveStreamTab.onCreated(function () {\n\tthis.editing = new ReactiveVar(false);\n\tthis.streamingOptions = new ReactiveVar();\n\tthis.popoutOpen = new ReactiveVar(popout.context != null);\n\n\tthis.autorun(() => {\n\t\tconst room = Rooms.findOne(this.data.rid, { fields: { streamingOptions: 1 } });\n\t\tthis.streamingOptions.set(room.streamingOptions);\n\t});\n});\n\nTemplate.liveStreamTab.onDestroyed(function () {\n\tif (popout.docked) {\n\t\tpopout.close();\n\t}\n});\n\nTemplate.liveStreamTab.events({\n\t'click .js-cancel'(e, i) {\n\t\te.preventDefault();\n\t\ti.editing.set(false);\n\t},\n\t'click .js-clear'(e, i) {\n\t\te.preventDefault();\n\n\t\tconst clearedObject = {};\n\n\t\tMeteor.call('saveRoomSettings', this.rid, 'streamingOptions', clearedObject, function (err) {\n\t\t\tif (err) {\n\t\t\t\treturn handleError(err);\n\t\t\t}\n\t\t\ti.editing.set(false);\n\t\t\ti.streamingOptions.set(clearedObject);\n\t\t\tconst roomAnnouncement = new RocketChatAnnouncement().getByRoom(i.data.rid);\n\t\t\tif (roomAnnouncement.getMessage() !== '') {\n\t\t\t\troomAnnouncement.clear();\n\t\t\t}\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: TAPi18n.__('Livestream_source_changed_succesfully'),\n\t\t\t});\n\t\t});\n\t},\n\t'click .js-save'(e, i) {\n\t\te.preventDefault();\n\n\t\tconst streamingOptions = {\n\t\t\t...optionsFromUrl(i.find('[name=streaming-source]').value),\n\t\t\tisAudioOnly: i.find('[name=streaming-audio-only]').checked,\n\t\t\tmessage: i.find('[name=streaming-message]').value,\n\t\t\ttype: 'livestream',\n\t\t};\n\n\t\tMeteor.call('saveRoomSettings', this.rid, 'streamingOptions', streamingOptions, function (err) {\n\t\t\tif (err) {\n\t\t\t\treturn handleError(err);\n\t\t\t}\n\t\t\ti.editing.set(false);\n\t\t\ti.streamingOptions.set(streamingOptions);\n\t\t\tif (streamingOptions.url !== '') {\n\t\t\t\tnew RocketChatAnnouncement({\n\t\t\t\t\troom: i.data.rid,\n\t\t\t\t\tmessage: 'Broadcast is now live. Click here to watch!',\n\t\t\t\t\tcallback: 'openBroadcast',\n\t\t\t\t}).save();\n\t\t\t} else {\n\t\t\t\tconst roomAnnouncement = new RocketChatAnnouncement().getByRoom(i.data.rid);\n\t\t\t\tif (roomAnnouncement.getMessage() !== '') {\n\t\t\t\t\troomAnnouncement.clear();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: TAPi18n.__('Livestream_source_changed_succesfully'),\n\t\t\t});\n\t\t});\n\t},\n\t'click .streaming-source-settings'(e, i) {\n\t\te.preventDefault();\n\t\ti.editing.set(true);\n\t},\n\t'click .js-dock'(e) {\n\t\te.stopPropagation();\n\t\tpopout.docked = true;\n\t},\n\t'click .js-close'(e, i) {\n\t\te.stopPropagation();\n\t\tlet popoutSource = '';\n\t\tif (popout.context) {\n\t\t\tpopoutSource = Blaze.getData(popout.context).data && Blaze.getData(popout.context).data.streamingSource;\n\t\t}\n\t\tpopout.close();\n\t\tif (popoutSource !== Template.instance().streamingOptions.get().url) {\n\t\t\tpopout.open({\n\t\t\t\tcontent: 'liveStreamView',\n\t\t\t\tdata: {\n\t\t\t\t\tstreamingSource: i.streamingOptions.get().url,\n\t\t\t\t\tisAudioOnly: i.streamingOptions.get().isAudioOnly,\n\t\t\t\t\tshowVideoControls: true,\n\t\t\t\t\tstreamingOptions: i.streamingOptions.get(),\n\t\t\t\t},\n\t\t\t\tonCloseCallback: () => i.popoutOpen.set(false),\n\t\t\t});\n\t\t}\n\t},\n\t'submit .liveStreamTab__form'(e, i) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tconst streamingOptions = {\n\t\t\t...optionsFromUrl(i.find('[name=streaming-source]').value),\n\t\t\tisAudioOnly: i.find('[name=streaming-audio-only]').checked,\n\t\t\tmessage: i.find('[name=streaming-message]').value,\n\t\t\ttype: 'livestream',\n\t\t};\n\n\t\tMeteor.call('saveRoomSettings', this.rid, 'streamingOptions', streamingOptions, function (err) {\n\t\t\tif (err) {\n\t\t\t\treturn handleError(err);\n\t\t\t}\n\t\t\ti.editing.set(false);\n\t\t\ti.streamingOptions.set(streamingOptions);\n\t\t\tif (streamingOptions.url !== '') {\n\t\t\t\tnew RocketChatAnnouncement({\n\t\t\t\t\troom: i.data.rid,\n\t\t\t\t\tmessage: 'Broadcast is now live. Click here to watch!',\n\t\t\t\t\tcallback: 'openBroadcast',\n\t\t\t\t}).save();\n\t\t\t} else {\n\t\t\t\tconst roomAnnouncement = new RocketChatAnnouncement().getByRoom(i.data.rid);\n\t\t\t\tif (roomAnnouncement.getMessage() !== '') {\n\t\t\t\t\troomAnnouncement.clear();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: TAPi18n.__('Livestream_source_changed_succesfully'),\n\t\t\t});\n\t\t});\n\t},\n\t'click .js-popout'(e, i) {\n\t\te.preventDefault();\n\t\tpopout.open({\n\t\t\tcontent: 'liveStreamView',\n\t\t\tdata: {\n\t\t\t\tstreamingSource: i.streamingOptions.get().url,\n\t\t\t\tisAudioOnly: i.streamingOptions.get().isAudioOnly,\n\t\t\t\tshowVideoControls: true,\n\t\t\t\tstreamingOptions: i.streamingOptions.get(),\n\t\t\t},\n\t\t\tonCloseCallback: () => i.popoutOpen.set(false),\n\t\t});\n\t\ti.popoutOpen.set(true);\n\t},\n\tasync 'click .js-broadcast'(e, i) {\n\t\te.preventDefault();\n\t\te.currentTarget.classList.add('loading');\n\t\ttry {\n\t\t\tconst user = Users.findOne({ _id: Meteor.userId() }, { fields: { 'settings.livestream': 1 } });\n\t\t\tif (!user.settings || !user.settings.livestream) {\n\t\t\t\tawait auth();\n\t\t\t}\n\t\t\tconst result = await call('livestreamGet', { rid: i.data.rid });\n\t\t\tpopout.open({\n\t\t\t\tcontent: 'broadcastView',\n\t\t\t\tdata: {\n\t\t\t\t\t...result,\n\t\t\t\t\tshowVideoControls: false,\n\t\t\t\t\tshowStreamControls: true,\n\t\t\t\t},\n\t\t\t\tonCloseCallback: () => i.popoutOpen.set(false),\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tconsole.log(e);\n\t\t} finally {\n\t\t\te.currentTarget.classList.remove('loading');\n\t\t}\n\t},\n});\n\ncallbacks.add('openBroadcast', (rid) => {\n\tconst roomData = Session.get(`roomData${rid}`);\n\tif (!roomData) {\n\t\treturn;\n\t}\n\tpopout.open({\n\t\tcontent: 'liveStreamView',\n\t\tdata: {\n\t\t\tstreamingSource: roomData.streamingOptions.url,\n\t\t\tisAudioOnly: roomData.streamingOptions.isAudioOnly,\n\t\t\tshowVideoControls: true,\n\t\t\tstreamingOptions: roomData.streamingOptions,\n\t\t},\n\t});\n});\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nthis.onYouTubePlayerAPIReady = function () {\n\tconst playerReadyEvent = new Event('playerReady');\n\tdocument.querySelector('.streaming-popup').dispatchEvent(playerReadyEvent);\n};\nthis.liveStreamPlayer = null;\n\nTemplate.liveStreamView.onCreated(function () {\n\tthis.streamingOptions = new ReactiveVar(this.data.streamingOptions);\n});\n\nTemplate.liveStreamView.onRendered(function () {\n\tif (window.YT) {\n\t\twindow.liveStreamPlayer = new window.YT.Player('ytplayer', {\n\t\t\twidth: '380',\n\t\t\theight: '214',\n\t\t\tvideoId: this.data.streamingOptions.id || '',\n\t\t\tplayerVars: {\n\t\t\t\tautoplay: 1,\n\t\t\t\tcontrols: 0,\n\t\t\t\tshowinfo: 0,\n\t\t\t\tenablejsapi: 1,\n\t\t\t\tfs: 0,\n\t\t\t\tmodestbranding: 1,\n\t\t\t\trel: 0,\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonStateChange: (e) => {\n\t\t\t\t\tconst playerStateChangedEvent = new CustomEvent('playerStateChanged', { detail: e.data });\n\t\t\t\t\tdocument.querySelector('.rc-popout').dispatchEvent(playerStateChangedEvent);\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t} else {\n\t\tconst tag = document.createElement('script');\n\t\ttag.src = 'https://www.youtube.com/player_api';\n\t\ttag.type = 'text/javascript';\n\t\tconst firstScriptTag = document.body.getElementsByTagName('script')[0];\n\t\tfirstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n\t}\n});\n\nTemplate.liveStreamView.events({\n\t'playerReady .streaming-popup'(e, i) {\n\t\twindow.liveStreamPlayer = new window.YT.Player('ytplayer', {\n\t\t\twidth: '380',\n\t\t\theight: '214',\n\t\t\tvideoId: i.streamingOptions.get().id || '',\n\t\t\tplayerVars: {\n\t\t\t\tautoplay: 1,\n\t\t\t\tcontrols: 0,\n\t\t\t\tshowinfo: 0,\n\t\t\t\tenablejsapi: 1,\n\t\t\t\tfs: 0,\n\t\t\t\tmodestbranding: 1,\n\t\t\t\trel: 0,\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonStateChange: (e) => {\n\t\t\t\t\tconst playerStateChangedEvent = new CustomEvent('playerStateChanged', { detail: e.data });\n\t\t\t\t\tdocument.querySelector('.rc-popout').dispatchEvent(playerStateChangedEvent);\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t},\n});\n","import './views/liveStreamTab.html';\nimport './views/liveStreamTab';\nimport './views/livestreamBroadcast.html';\nimport './views/livestreamBroadcast';\nimport './views/broadcastView.html';\nimport './views/broadcastView';\nimport './views/liveStreamView.html';\nimport './views/liveStreamView';\nimport './tabBar';\nimport './styles/liveStreamTab.css';\n","import { Meteor } from 'meteor/meteor';\n\nimport { settings } from '../../settings';\n\nexport const close = (popup) =>\n\tnew Promise(function (resolve) {\n\t\tconst checkInterval = setInterval(() => {\n\t\t\tif (popup.closed) {\n\t\t\t\tclearInterval(checkInterval);\n\t\t\t\tresolve();\n\t\t\t}\n\t\t}, 300);\n\t});\n\nexport const auth = async () => {\n\tconst oauthWindow = window.open(\n\t\t`${settings.get('Site_Url')}/api/v1/livestream/oauth?userId=${Meteor.userId()}`,\n\t\t'youtube-integration-oauth',\n\t\t'width=400,height=600',\n\t);\n\treturn close(oauthWindow);\n};\n","import React, { ReactNode, useMemo } from 'react';\nimport { Option, Badge } from '@rocket.chat/fuselage';\n\nimport { useSetting } from '../../../client/contexts/SettingsContext';\nimport { useTranslation } from '../../../client/contexts/TranslationContext';\nimport { addAction } from '../../../client/views/room/lib/Toolbox';\nimport Header from '../../../client/components/Header';\n\naddAction('livestream', ({ room }) => {\n\tconst enabled = useSetting('Livestream_enabled');\n\tconst t = useTranslation();\n\n\tconst isLive = room?.streamingOptions?.id && room.streamingOptions.type === 'livestream';\n\n\treturn useMemo(\n\t\t() =>\n\t\t\tenabled\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['channel', 'group', 'team'],\n\t\t\t\t\t\tid: 'livestream',\n\t\t\t\t\t\ttitle: 'Livestream',\n\t\t\t\t\t\ticon: 'podcast',\n\t\t\t\t\t\ttemplate: 'liveStreamTab',\n\t\t\t\t\t\torder: isLive ? -1 : 15,\n\t\t\t\t\t\trenderAction: (props): ReactNode => (\n\t\t\t\t\t\t\t<Header.ToolBoxAction {...props}>\n\t\t\t\t\t\t\t\t{isLive ? (\n\t\t\t\t\t\t\t\t\t<Header.Badge title={t('Livestream_live_now')} variant='danger'>\n\t\t\t\t\t\t\t\t\t\t!\n\t\t\t\t\t\t\t\t\t</Header.Badge>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</Header.ToolBoxAction>\n\t\t\t\t\t\t),\n\t\t\t\t\t\trenderOption: ({ label: { title, icon }, ...props }: any): ReactNode => (\n\t\t\t\t\t\t\t<Option label={title} title={title} icon={icon} {...props}>\n\t\t\t\t\t\t\t\t{isLive ? (\n\t\t\t\t\t\t\t\t\t<Badge title={t('Livestream_live_now')} variant='danger'>\n\t\t\t\t\t\t\t\t\t\t!\n\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t),\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[enabled, isLive, t],\n\t);\n});\n","import _ from 'underscore';\nimport { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nimport { messageContext } from '../../../ui-utils/client/lib/messageContext';\nimport { upsertMessageBulk } from '../../../ui-utils/client/lib/RoomHistoryManager';\nimport { APIClient } from '../../../utils/client';\nimport { Messages, Users } from '../../../models/client';\nimport { getCommonRoomEvents } from '../../../ui/client/views/app/lib/getCommonRoomEvents';\n\nconst LIMIT_DEFAULT = 50;\n\nTemplate.mentionsFlexTab.helpers({\n\thasMessages() {\n\t\treturn Template.instance().messages.find().count();\n\t},\n\tmessages() {\n\t\tconst instance = Template.instance();\n\t\treturn instance.messages.find({}, { limit: instance.limit.get(), sort: { ts: -1 } });\n\t},\n\thasMore() {\n\t\treturn Template.instance().hasMore.get();\n\t},\n\tmessageContext,\n});\n\nTemplate.mentionsFlexTab.onCreated(function () {\n\tthis.messages = new Mongo.Collection(null);\n\n\tthis.hasMore = new ReactiveVar(true);\n\tthis.limit = new ReactiveVar(LIMIT_DEFAULT);\n\n\tthis.autorun(() => {\n\t\tconst query = {\n\t\t\t'_hidden': { $ne: true },\n\t\t\t'mentions.username': Users.findOne(Meteor.userId(), { fields: { username: 1 } }).username,\n\t\t\t'rid': this.data.rid,\n\t\t\t'_updatedAt': {\n\t\t\t\t$gt: new Date(),\n\t\t\t},\n\t\t};\n\n\t\tthis.cursor && this.cursor.stop();\n\n\t\tthis.limit.set(LIMIT_DEFAULT);\n\n\t\tthis.cursor = Messages.find(query).observe({\n\t\t\tadded: ({ _id, ...message }) => {\n\t\t\t\tthis.messages.upsert({ _id }, message);\n\t\t\t},\n\t\t\tchanged: ({ _id, ...message }) => {\n\t\t\t\tthis.messages.upsert({ _id }, message);\n\t\t\t},\n\t\t\tremoved: ({ _id }) => {\n\t\t\t\tthis.messages.remove({ _id });\n\t\t\t},\n\t\t});\n\t});\n\n\tthis.autorun(async () => {\n\t\tconst limit = this.limit.get();\n\t\tconst { messages, total } = await APIClient.v1.get(`chat.getMentionedMessages?roomId=${this.data.rid}&count=${limit}`);\n\n\t\tupsertMessageBulk({ msgs: messages }, this.messages);\n\n\t\tthis.hasMore.set(total > limit);\n\t});\n});\n\nTemplate.mentionsFlexTab.onDestroyed(function () {\n\tthis.cursor.stop();\n});\n\nTemplate.mentionsFlexTab.events({\n\t...getCommonRoomEvents(),\n\t'scroll .js-list': _.throttle(function (e, instance) {\n\t\tif (e.target.scrollTop >= e.target.scrollHeight - e.target.clientHeight && instance.hasMore.get()) {\n\t\t\treturn instance.limit.set(instance.limit.get() + 50);\n\t\t}\n\t}, 200),\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { MessageAction, RoomHistoryManager } from '../../ui-utils';\nimport { messageArgs } from '../../ui-utils/client/lib/messageArgs';\nimport { Rooms } from '../../models/client';\n\nMeteor.startup(function () {\n\tMessageAction.addButton({\n\t\tid: 'jump-to-message',\n\t\ticon: 'jump',\n\t\tlabel: 'Jump_to_message',\n\t\tcontext: ['mentions', 'threads'],\n\t\taction(e) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tif (window.matchMedia('(max-width: 500px)').matches) {\n\t\t\t\tTemplate.instance().tabBar.close();\n\t\t\t}\n\t\t\tif (message.tmid) {\n\t\t\t\treturn FlowRouter.go(\n\t\t\t\t\tFlowRouter.getRouteName(),\n\t\t\t\t\t{\n\t\t\t\t\t\ttab: 'thread',\n\t\t\t\t\t\tcontext: message.tmid,\n\t\t\t\t\t\trid: message.rid,\n\t\t\t\t\t\tname: Rooms.findOne({ _id: message.rid }).name,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tjump: message._id,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tRoomHistoryManager.getSurroundingMessages(message, 50);\n\t\t},\n\t\torder: 100,\n\t\tgroup: ['message', 'menu'],\n\t});\n});\n","import './views/mentionsFlexTab.html';\nimport './views/mentionsFlexTab';\nimport './actionButton';\nimport './tabBar';\n","import { addAction } from '../../../client/views/room/lib/Toolbox';\n\naddAction('mentions', {\n\tgroups: ['channel', 'group', 'team'],\n\tid: 'mentions',\n\ttitle: 'Mentions',\n\ticon: 'at',\n\ttemplate: 'mentionsFlexTab',\n\torder: 9,\n});\n","import _ from 'underscore';\nimport { Mongo } from 'meteor/mongo';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nimport { upsertMessageBulk } from '../../../ui-utils/client/lib/RoomHistoryManager';\nimport { messageContext } from '../../../ui-utils/client/lib/messageContext';\nimport { APIClient } from '../../../utils/client';\nimport { Messages } from '../../../models/client';\nimport { getCommonRoomEvents } from '../../../ui/client/views/app/lib/getCommonRoomEvents';\n\nconst LIMIT_DEFAULT = 50;\n\nTemplate.pinnedMessages.helpers({\n\thasMessages() {\n\t\treturn Template.instance().messages.find().count();\n\t},\n\tmessages() {\n\t\tconst instance = Template.instance();\n\t\treturn instance.messages.find({}, { limit: instance.limit.get(), sort: { ts: -1 } });\n\t},\n\thasMore() {\n\t\treturn Template.instance().hasMore.get();\n\t},\n\tmessageContext,\n});\n\nTemplate.pinnedMessages.onCreated(function () {\n\tthis.pinnedMessages = new ReactiveVar([]);\n\tthis.hasMore = new ReactiveVar(true);\n\tthis.limit = new ReactiveVar(LIMIT_DEFAULT);\n\tthis.rid = this.data.rid;\n\tthis.messages = new Mongo.Collection(null);\n\n\tthis.autorun(() => {\n\t\tconst query = {\n\t\t\tt: { $ne: 'rm' },\n\t\t\t_hidden: { $ne: true },\n\t\t\tpinned: true,\n\t\t\trid: this.data.rid,\n\t\t\t_updatedAt: {\n\t\t\t\t$gte: new Date(),\n\t\t\t},\n\t\t};\n\n\t\tthis.cursor && this.cursor.stop();\n\n\t\tthis.limit.set(LIMIT_DEFAULT);\n\n\t\tthis.cursor = Messages.find(query).observe({\n\t\t\tadded: ({ _id, ...message }) => {\n\t\t\t\tthis.messages.upsert({ _id }, message);\n\t\t\t},\n\t\t\tchanged: ({ _id, ...message }) => {\n\t\t\t\tthis.messages.upsert({ _id }, message);\n\t\t\t},\n\t\t\tremoved: ({ _id }) => {\n\t\t\t\tthis.messages.remove({ _id });\n\t\t\t},\n\t\t});\n\t});\n\n\tthis.autorun(async () => {\n\t\tconst limit = this.limit.get();\n\t\tconst { messages, total } = await APIClient.v1.get(`chat.getPinnedMessages?roomId=${this.rid}&count=${limit}`);\n\n\t\tupsertMessageBulk({ msgs: messages }, this.messages);\n\n\t\tthis.hasMore.set(total > limit);\n\t});\n});\n\nTemplate.mentionsFlexTab.onDestroyed(function () {\n\tthis.cursor.stop();\n});\n\nTemplate.pinnedMessages.events({\n\t...getCommonRoomEvents(),\n\t'scroll .js-list': _.throttle(function (e, instance) {\n\t\tif (e.target.scrollTop >= e.target.scrollHeight - e.target.clientHeight && instance.hasMore.get()) {\n\t\t\treturn instance.limit.set(instance.limit.get() + 50);\n\t\t}\n\t}, 200),\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { RoomHistoryManager, MessageAction } from '../../ui-utils';\nimport { messageArgs } from '../../ui-utils/client/lib/messageArgs';\nimport { settings } from '../../settings';\nimport { hasAtLeastOnePermission } from '../../authorization';\nimport { Rooms } from '../../models/client';\nimport { roomTypes } from '../../utils/client';\nimport { handleError } from '../../../client/lib/utils/handleError';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\n\nMeteor.startup(function () {\n\tMessageAction.addButton({\n\t\tid: 'pin-message',\n\t\ticon: 'pin',\n\t\tlabel: 'Pin',\n\t\tcontext: ['pinned', 'message', 'message-mobile', 'threads', 'direct'],\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tmessage.pinned = true;\n\t\t\tMeteor.call('pinMessage', message, function (error) {\n\t\t\t\tif (error) {\n\t\t\t\t\treturn handleError(error);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tcondition({ msg, subscription, room }) {\n\t\t\tif (!settings.get('Message_AllowPinning') || msg.pinned || !subscription) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst isLivechatRoom = roomTypes.isLivechatRoom(room.t);\n\t\t\tif (isLivechatRoom) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn hasAtLeastOnePermission('pin-message', msg.rid);\n\t\t},\n\t\torder: 7,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'unpin-message',\n\t\ticon: 'pin',\n\t\tlabel: 'Unpin',\n\t\tcontext: ['pinned', 'message', 'message-mobile', 'threads', 'direct'],\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tmessage.pinned = false;\n\t\t\tMeteor.call('unpinMessage', message, function (error) {\n\t\t\t\tif (error) {\n\t\t\t\t\treturn handleError(error);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tcondition({ msg, subscription }) {\n\t\t\tif (!subscription || !settings.get('Message_AllowPinning') || !msg.pinned) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn hasAtLeastOnePermission('pin-message', msg.rid);\n\t\t},\n\t\torder: 8,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'jump-to-pin-message',\n\t\ticon: 'jump',\n\t\tlabel: 'Jump_to_message',\n\t\tcontext: ['pinned', 'message-mobile', 'direct'],\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tif (window.matchMedia('(max-width: 500px)').matches) {\n\t\t\t\tTemplate.instance().tabBar.close();\n\t\t\t}\n\t\t\tif (message.tmid) {\n\t\t\t\treturn FlowRouter.go(\n\t\t\t\t\tFlowRouter.getRouteName(),\n\t\t\t\t\t{\n\t\t\t\t\t\ttab: 'thread',\n\t\t\t\t\t\tcontext: message.tmid,\n\t\t\t\t\t\trid: message.rid,\n\t\t\t\t\t\tjump: message._id,\n\t\t\t\t\t\tname: Rooms.findOne({ _id: message.rid }).name,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tjump: message._id,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn RoomHistoryManager.getSurroundingMessages(message, 50);\n\t\t},\n\t\tcondition({ subscription }) {\n\t\t\treturn !!subscription;\n\t\t},\n\t\torder: 100,\n\t\tgroup: ['message', 'menu'],\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'permalink-pinned',\n\t\ticon: 'permalink',\n\t\tlabel: 'Get_link',\n\t\tclasses: 'clipboard',\n\t\tcontext: ['pinned'],\n\t\tasync action() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tconst permalink = await MessageAction.getPermaLink(message._id);\n\t\t\tnavigator.clipboard.writeText(permalink);\n\t\t\tdispatchToastMessage({ type: 'success', message: TAPi18n.__('Copied') });\n\t\t},\n\t\tcondition({ subscription }) {\n\t\t\treturn !!subscription;\n\t\t},\n\t\torder: 101,\n\t\tgroup: 'menu',\n\t});\n});\n","import './actionButton';\nimport './messageType';\nimport './pinMessage';\nimport './tabBar';\nimport './views/pinnedMessages.html';\nimport './views/pinnedMessages';\nimport './views/stylesheets/messagepin.css';\n","import { Meteor } from 'meteor/meteor';\n\nimport { MessageTypes } from '../../ui-utils';\n\nMeteor.startup(function () {\n\tMessageTypes.registerType({\n\t\tid: 'message_pinned',\n\t\tsystem: true,\n\t\tmessage: 'Pinned_a_message',\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { settings } from '../../settings';\nimport { ChatMessage, Subscriptions } from '../../models';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\n\nMeteor.methods({\n\tpinMessage(message) {\n\t\tif (!Meteor.userId()) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('error-not-authorized') });\n\t\t\treturn false;\n\t\t}\n\t\tif (!settings.get('Message_AllowPinning')) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('pinning-not-allowed') });\n\t\t\treturn false;\n\t\t}\n\t\tif (Subscriptions.findOne({ rid: message.rid }) == null) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('error-pinning-message') });\n\t\t\treturn false;\n\t\t}\n\t\tif (typeof message._id !== 'string') {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('error-pinning-message') });\n\t\t\treturn false;\n\t\t}\n\t\tdispatchToastMessage({ type: 'success', message: TAPi18n.__('Message_has_been_pinned') });\n\t\treturn ChatMessage.update(\n\t\t\t{\n\t\t\t\t_id: message._id,\n\t\t\t\trid: message.rid,\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\tpinned: true,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t},\n\tunpinMessage(message) {\n\t\tif (!Meteor.userId()) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('error-not-authorized') });\n\t\t\treturn false;\n\t\t}\n\t\tif (!settings.get('Message_AllowPinning')) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('unpinning-not-allowed') });\n\t\t\treturn false;\n\t\t}\n\t\tif (Subscriptions.findOne({ rid: message.rid }) == null) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('error-unpinning-message') });\n\t\t\treturn false;\n\t\t}\n\t\tif (typeof message._id !== 'string') {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('error-unpinning-message') });\n\t\t\treturn false;\n\t\t}\n\t\tdispatchToastMessage({ type: 'success', message: TAPi18n.__('Message_has_been_unpinned') });\n\t\treturn ChatMessage.update(\n\t\t\t{\n\t\t\t\t_id: message._id,\n\t\t\t\trid: message.rid,\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\tpinned: false,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t},\n});\n","import { useMemo } from 'react';\n\nimport { addAction } from '../../../client/views/room/lib/Toolbox';\nimport { useSetting } from '../../../client/contexts/SettingsContext';\n\naddAction('pinned-messages', () => {\n\tconst pinningAllowed = useSetting('Message_AllowPinning');\n\treturn useMemo(\n\t\t() =>\n\t\t\tpinningAllowed\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\t\t\t\tid: 'pinned-messages',\n\t\t\t\t\t\ttitle: 'Pinned_Messages',\n\t\t\t\t\t\ticon: 'pin',\n\t\t\t\t\t\ttemplate: 'pinnedMessages',\n\t\t\t\t\t\torder: 11,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[pinningAllowed],\n\t);\n});\n","import _ from 'underscore';\nimport { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\nimport { Mongo } from 'meteor/mongo';\n\nimport { messageContext } from '../../../ui-utils/client/lib/messageContext';\nimport { Messages } from '../../../models/client';\nimport { upsertMessageBulk } from '../../../ui-utils/client/lib/RoomHistoryManager';\nimport { APIClient } from '../../../utils/client';\nimport { getCommonRoomEvents } from '../../../ui/client/views/app/lib/getCommonRoomEvents';\n\nconst LIMIT_DEFAULT = 50;\n\nTemplate.starredMessages.helpers({\n\thasMessages() {\n\t\treturn Template.instance().messages.find().count();\n\t},\n\tmessages() {\n\t\tconst instance = Template.instance();\n\t\treturn instance.messages.find({}, { limit: instance.limit.get(), sort: { ts: -1 } });\n\t},\n\thasMore() {\n\t\treturn Template.instance().hasMore.get();\n\t},\n\tmessageContext,\n});\n\nTemplate.starredMessages.onCreated(function () {\n\tthis.rid = this.data.rid;\n\tthis.messages = new Mongo.Collection(null);\n\tthis.hasMore = new ReactiveVar(true);\n\tthis.limit = new ReactiveVar(LIMIT_DEFAULT);\n\n\tthis.autorun(() => {\n\t\tconst query = {\n\t\t\t'_hidden': { $ne: true },\n\t\t\t'starred._id': Meteor.userId(),\n\t\t\t'rid': this.rid,\n\t\t\t'_updatedAt': {\n\t\t\t\t$gt: new Date(),\n\t\t\t},\n\t\t};\n\n\t\tthis.cursor && this.cursor.stop();\n\n\t\tthis.limit.set(LIMIT_DEFAULT);\n\n\t\tthis.cursor = Messages.find(query).observe({\n\t\t\tadded: ({ _id, ...message }) => {\n\t\t\t\tthis.messages.upsert({ _id }, message);\n\t\t\t},\n\t\t\tchanged: ({ _id, ...message }) => {\n\t\t\t\tthis.messages.upsert({ _id }, message);\n\t\t\t},\n\t\t\tremoved: ({ _id }) => {\n\t\t\t\tthis.messages.remove({ _id });\n\t\t\t},\n\t\t});\n\t});\n\n\tthis.autorun(async () => {\n\t\tconst limit = this.limit.get();\n\t\tconst { messages, total } = await APIClient.v1.get(`chat.getStarredMessages?roomId=${this.rid}&count=${limit}`);\n\n\t\tupsertMessageBulk({ msgs: messages }, this.messages);\n\n\t\tthis.hasMore.set(total > limit);\n\t});\n});\n\nTemplate.mentionsFlexTab.onDestroyed(function () {\n\tthis.cursor.stop();\n});\n\nTemplate.starredMessages.events({\n\t...getCommonRoomEvents(),\n\t'scroll .js-list': _.throttle(function (e, instance) {\n\t\tif (e.target.scrollTop >= e.target.scrollHeight - e.target.clientHeight) {\n\t\t\treturn instance.limit.set(instance.limit.get() + 50);\n\t\t}\n\t}, 200),\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { settings } from '../../settings';\nimport { RoomHistoryManager, MessageAction } from '../../ui-utils';\nimport { messageArgs } from '../../ui-utils/client/lib/messageArgs';\nimport { Rooms } from '../../models/client';\nimport { roomTypes } from '../../utils/client';\nimport { handleError } from '../../../client/lib/utils/handleError';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\n\nMeteor.startup(function () {\n\tMessageAction.addButton({\n\t\tid: 'star-message',\n\t\ticon: 'star',\n\t\tlabel: 'Star',\n\t\tcontext: ['starred', 'message', 'message-mobile', 'threads'],\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tmessage.starred = Meteor.userId();\n\t\t\tMeteor.call('starMessage', message, function (error) {\n\t\t\t\tif (error) {\n\t\t\t\t\treturn handleError(error);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tcondition({ msg: message, subscription, u, room }) {\n\t\t\tif (subscription == null && settings.get('Message_AllowStarring')) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst isLivechatRoom = roomTypes.isLivechatRoom(room.t);\n\t\t\tif (isLivechatRoom) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn !message.starred || !message.starred.find((star) => star._id === u._id);\n\t\t},\n\t\torder: 9,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'unstar-message',\n\t\ticon: 'star',\n\t\tlabel: 'Unstar_Message',\n\t\tcontext: ['starred', 'message', 'message-mobile', 'threads'],\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tmessage.starred = false;\n\t\t\tMeteor.call('starMessage', message, function (error) {\n\t\t\t\tif (error) {\n\t\t\t\t\thandleError(error);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tcondition({ msg: message, subscription, u }) {\n\t\t\tif (subscription == null && settings.get('Message_AllowStarring')) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn message.starred && message.starred.find((star) => star._id === u._id);\n\t\t},\n\t\torder: 9,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'jump-to-star-message',\n\t\ticon: 'jump',\n\t\tlabel: 'Jump_to_message',\n\t\tcontext: ['starred', 'threads', 'message-mobile'],\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tif (window.matchMedia('(max-width: 500px)').matches) {\n\t\t\t\tTemplate.instance().tabBar.close();\n\t\t\t}\n\t\t\tif (message.tmid) {\n\t\t\t\treturn FlowRouter.go(\n\t\t\t\t\tFlowRouter.getRouteName(),\n\t\t\t\t\t{\n\t\t\t\t\t\ttab: 'thread',\n\t\t\t\t\t\tcontext: message.tmid,\n\t\t\t\t\t\trid: message.rid,\n\t\t\t\t\t\tjump: message._id,\n\t\t\t\t\t\tname: Rooms.findOne({ _id: message.rid }).name,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tjump: message._id,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tRoomHistoryManager.getSurroundingMessages(message, 50);\n\t\t},\n\t\tcondition({ msg, subscription, u }) {\n\t\t\tif (subscription == null || !settings.get('Message_AllowStarring')) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn msg.starred && msg.starred.find((star) => star._id === u._id);\n\t\t},\n\t\torder: 100,\n\t\tgroup: ['message', 'menu'],\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'permalink-star',\n\t\ticon: 'permalink',\n\t\tlabel: 'Get_link',\n\t\tclasses: 'clipboard',\n\t\tcontext: ['starred', 'threads'],\n\t\tasync action() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tconst permalink = await MessageAction.getPermaLink(message._id);\n\t\t\tnavigator.clipboard.writeText(permalink);\n\t\t\tdispatchToastMessage({ type: 'success', message: TAPi18n.__('Copied') });\n\t\t},\n\t\tcondition({ msg, subscription, u }) {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn msg.starred && msg.starred.find((star) => star._id === u._id);\n\t\t},\n\t\torder: 101,\n\t\tgroup: 'menu',\n\t});\n});\n","import './actionButton';\nimport './starMessage';\nimport './tabBar';\nimport './views/starredMessages.html';\nimport './views/starredMessages';\nimport './views/stylesheets/messagestar.css';\n","import { Meteor } from 'meteor/meteor';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { settings } from '../../settings';\nimport { ChatMessage, Subscriptions } from '../../models';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\n\nMeteor.methods({\n\tstarMessage(message) {\n\t\tif (!Meteor.userId()) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('error-starring-message') });\n\t\t\treturn false;\n\t\t}\n\t\tif (Subscriptions.findOne({ rid: message.rid }) == null) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('error-starring-message') });\n\t\t\treturn false;\n\t\t}\n\t\tif (!ChatMessage.findOneByRoomIdAndMessageId(message.rid, message._id)) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('error-starring-message') });\n\t\t\treturn false;\n\t\t}\n\t\tif (!settings.get('Message_AllowStarring')) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('error-starring-message') });\n\t\t\treturn false;\n\t\t}\n\t\tif (message.starred) {\n\t\t\tdispatchToastMessage({ type: 'success', message: TAPi18n.__('Message_has_been_starred') });\n\t\t} else {\n\t\t\tdispatchToastMessage({ type: 'success', message: TAPi18n.__('Message_has_been_unstarred') });\n\t\t}\n\t\treturn ChatMessage.update(\n\t\t\t{\n\t\t\t\t_id: message._id,\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\tstarred: !!message.starred,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t},\n});\n","import { addAction } from '../../../client/views/room/lib/Toolbox';\n\naddAction('starred-messages', {\n\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\tid: 'starred-messages',\n\ttitle: 'Starred_Messages',\n\ticon: 'star',\n\ttemplate: 'starredMessages',\n\torder: 10,\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { Accounts } from 'meteor/accounts-base';\nimport { ReactiveVar } from 'meteor/reactive-var';\n\nimport { APIClient } from '../../../utils/client';\n\nTemplate.authorize.onCreated(async function () {\n\tthis.oauthApp = new ReactiveVar({});\n\tconst { oauthApp } = await APIClient.v1.get(`oauth-apps.get?clientId=${this.data.client_id()}`);\n\tthis.oauthApp.set(oauthApp);\n});\n\nTemplate.authorize.helpers({\n\tgetToken() {\n\t\treturn Meteor._localStorage.getItem(Accounts.LOGIN_TOKEN_KEY);\n\t},\n\tgetClient() {\n\t\treturn Template.instance().oauthApp.get();\n\t},\n});\n\nTemplate.authorize.events({\n\t'click #logout-oauth'() {\n\t\treturn Meteor.logout();\n\t},\n\t'click #cancel-oauth'() {\n\t\treturn window.close();\n\t},\n});\n\nTemplate.authorize.onRendered(function () {\n\tconst user = Meteor.user();\n\tif (user && user.oauth && user.oauth.authorizedClients && user.oauth.authorizedClients.includes(this.data.client_id())) {\n\t\t$('button[type=submit]').click();\n\t}\n});\n","import { hasAllPermission } from '../../../authorization';\nimport { registerAdminSidebarItem } from '../../../../client/views/admin';\n\nregisterAdminSidebarItem({\n\thref: 'admin-oauth-apps',\n\ti18nLabel: 'OAuth Apps',\n\ticon: 'discover',\n\tpermissionGranted() {\n\t\treturn hasAllPermission('manage-oauth-apps');\n\t},\n});\n","import './oauth/oauth2-client.html';\nimport './oauth/oauth2-client';\nimport './admin/startup';\nimport './oauth/stylesheets/oauth2.css';\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\nimport _ from 'underscore';\n\nimport { messageContext } from '../../../ui-utils/client/lib/messageContext';\nimport { MessageAction, RoomHistoryManager } from '../../../ui-utils';\nimport { messageArgs } from '../../../ui-utils/client/lib/messageArgs';\nimport { Rooms } from '../../../models/client';\nimport { getCommonRoomEvents } from '../../../ui/client/views/app/lib/getCommonRoomEvents';\nimport { goToRoomById } from '../../../../client/lib/utils/goToRoomById';\n\nMeteor.startup(function () {\n\tMessageAction.addButton({\n\t\tid: 'jump-to-search-message',\n\t\ticon: 'jump',\n\t\tlabel: 'Jump_to_message',\n\t\tcontext: ['search'],\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tif (message.tmid) {\n\t\t\t\treturn FlowRouter.go(\n\t\t\t\t\tFlowRouter.getRouteName(),\n\t\t\t\t\t{\n\t\t\t\t\t\ttab: 'thread',\n\t\t\t\t\t\tcontext: message.tmid,\n\t\t\t\t\t\trid: message.rid,\n\t\t\t\t\t\tname: Rooms.findOne({ _id: message.rid }).name,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tjump: message._id,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (Session.get('openedRoom') === message.rid) {\n\t\t\t\treturn RoomHistoryManager.getSurroundingMessages(message, 50);\n\t\t\t}\n\n\t\t\tgoToRoomById(message.rid);\n\t\t\t// RocketChat.MessageAction.hideDropDown();\n\n\t\t\tif (window.matchMedia('(max-width: 500px)').matches) {\n\t\t\t\tTemplate.instance().tabBar.close();\n\t\t\t}\n\n\t\t\twindow.setTimeout(() => {\n\t\t\t\tRoomHistoryManager.getSurroundingMessages(message, 50);\n\t\t\t}, 400);\n\t\t\t// 400ms is popular among game devs as a good delay before transition starts\n\t\t\t// ie. 50, 100, 200, 400, 800 are the favored timings\n\t\t},\n\t\torder: 100,\n\t\tgroup: 'menu',\n\t});\n});\n\nTemplate.DefaultSearchResultTemplate.onRendered(function () {\n\tconst list = this.firstNode.parentNode.querySelector('.rocket-default-search-results');\n\tthis.autorun(() => {\n\t\tconst result = this.data.result.get();\n\t\tif (result && this.hasMore.get()) {\n\t\t\tTracker.afterFlush(() => {\n\t\t\t\tif (list.scrollHeight < list.offsetHeight) {\n\t\t\t\t\tthis.data.payload.limit = (this.data.payload.limit || this.pageSize) + this.pageSize;\n\t\t\t\t\tthis.data.search();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n});\n\nTemplate.DefaultSearchResultTemplate.onCreated(function () {\n\t// paging\n\tthis.pageSize = this.data.settings.PageSize;\n\n\t// global search\n\tthis.globalSearchEnabled = this.data.settings.GlobalSearchEnabled;\n\tthis.data.parentPayload.searchAll = this.globalSearchEnabled;\n\n\tthis.hasMore = new ReactiveVar(true);\n\n\tthis.autorun(() => {\n\t\tconst result = this.data.result.get();\n\t\tthis.hasMore.set(!(result && result.message.docs.length < (this.data.payload.limit || this.pageSize)));\n\t});\n});\n\nTemplate.DefaultSearchResultTemplate.events({\n\t...getCommonRoomEvents(),\n\t'change #global-search'(e, t) {\n\t\tt.data.parentPayload.searchAll = e.target.checked;\n\t\tt.data.payload.limit = t.pageSize;\n\t\tt.data.result.set(undefined);\n\t\tt.data.search();\n\t},\n\t'scroll .rocket-default-search-results': _.throttle(function (e, t) {\n\t\tif (e.target.scrollTop >= e.target.scrollHeight - e.target.clientHeight && t.hasMore.get()) {\n\t\t\tt.data.payload.limit = (t.data.payload.limit || t.pageSize) + t.pageSize;\n\t\t\tt.data.search();\n\t\t}\n\t}, 200),\n});\n\nTemplate.DefaultSearchResultTemplate.helpers({\n\tresult() {\n\t\treturn Template.instance().data.result.get();\n\t},\n\tglobalSearchEnabled() {\n\t\treturn Template.instance().globalSearchEnabled;\n\t},\n\tsearching() {\n\t\treturn Template.instance().data.searching.get();\n\t},\n\thasMore() {\n\t\treturn Template.instance().hasMore.get();\n\t},\n\tmessageParse(msg) {\n\t\tconst text = Template.instance().data.text.get();\n\t\tmsg.searchedText = text;\n\t\treturn { customClass: 'search', actionContext: 'search', ...msg, groupable: false };\n\t},\n\tmessageContext() {\n\t\tconst result = messageContext.call(this, { rid: Session.get('openedRoom') });\n\t\treturn {\n\t\t\t...result,\n\t\t\tsettings: {\n\t\t\t\t...result.settings,\n\t\t\t\tshowReplyButton: false,\n\t\t\t\tshowreply: false,\n\t\t\t},\n\t\t};\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport _ from 'underscore';\n\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\n\nTemplate.RocketSearch.onCreated(function () {\n\tthis.provider = new ReactiveVar();\n\tthis.isActive = new ReactiveVar(false);\n\tthis.error = new ReactiveVar();\n\tthis.suggestions = new ReactiveVar();\n\tthis.suggestionActive = new ReactiveVar();\n\n\tMeteor.call('rocketchatSearch.getProvider', (error, provider) => {\n\t\tif (!error && provider) {\n\t\t\tthis.scope.settings = provider.settings;\n\t\t\tthis.provider.set(provider);\n\t\t\tthis.isActive.set(true);\n\t\t} else {\n\t\t\tthis.error.set('Search_current_provider_not_active');\n\t\t}\n\t});\n\n\tconst _search = () => {\n\t\tconst _p = Object.assign({}, this.scope.parentPayload, this.scope.payload);\n\n\t\tif (this.scope.text.get()) {\n\t\t\tthis.scope.searching.set(true);\n\n\t\t\tMeteor.call(\n\t\t\t\t'rocketchatSearch.search',\n\t\t\t\tthis.scope.text.get(),\n\t\t\t\t{ rid: Session.get('openedRoom'), uid: Meteor.userId() },\n\t\t\t\t_p,\n\t\t\t\t(err, result) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tdispatchToastMessage({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\tmessage: TAPi18n.__('Search_message_search_failed'),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.scope.searching.set(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.scope.searching.set(false);\n\t\t\t\t\t\tthis.scope.result.set(result);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t};\n\n\tthis.scope = {\n\t\tsearching: new ReactiveVar(false),\n\t\tresult: new ReactiveVar(),\n\t\ttext: new ReactiveVar(),\n\t\tsettings: {},\n\t\tparentPayload: {},\n\t\tpayload: {},\n\t\tsearch: _search,\n\t};\n\n\tthis.search = (value) => {\n\t\tthis.scope.result.set(undefined);\n\t\tthis.scope.payload = {};\n\t\tthis.scope.text.set(value);\n\t\t_search();\n\t};\n\n\tthis.suggest = (value) => {\n\t\tthis.suggestions.set();\n\n\t\tconst _p = Object.assign({}, this.scope.parentPayload, this.scope.payload);\n\n\t\tMeteor.call(\n\t\t\t'rocketchatSearch.suggest',\n\t\t\tvalue,\n\t\t\t{ rid: Session.get('openedRoom'), uid: Meteor.userId() },\n\t\t\tthis.scope.parentPayload,\n\t\t\t_p,\n\t\t\t(err, result) => {\n\t\t\t\tif (err) {\n\t\t\t\t\t// TODO what should happen\n\t\t\t\t} else {\n\t\t\t\t\tthis.suggestionActive.set(undefined);\n\t\t\t\t\tif (value !== this.scope.text.get()) {\n\t\t\t\t\t\tthis.suggestions.set(result);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t};\n});\n\nTemplate.RocketSearch.events = {\n\t'keydown #message-search'(evt, t) {\n\t\tif (evt.keyCode === 13) {\n\t\t\tif (t.suggestionActive.get() !== undefined) {\n\t\t\t\tconst suggestion = t.suggestions.get()[t.suggestionActive.get()];\n\t\t\t\tif (suggestion.action) {\n\t\t\t\t\tconst value = suggestion.action();\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\tt.search(value);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tt.search(suggestion.text);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tt.search(evt.target.value.trim());\n\t\t\t}\n\t\t\tt.suggestions.set();\n\t\t\treturn evt.preventDefault();\n\t\t}\n\n\t\tconst suggestions = t.suggestions.get();\n\t\tconst suggestionActive = t.suggestionActive.get();\n\n\t\tif (evt.keyCode === 40 && suggestions) {\n\t\t\tt.suggestionActive.set(suggestionActive !== undefined && suggestionActive < suggestions.length - 1 ? suggestionActive + 1 : 0);\n\t\t\treturn;\n\t\t}\n\n\t\tif (evt.keyCode === 38 && suggestions) {\n\t\t\tt.suggestionActive.set(suggestionActive !== undefined && suggestionActive === 0 ? suggestions.length - 1 : suggestionActive - 1);\n\t\t}\n\t},\n\t'keyup #message-search': _.debounce(function (evt, t) {\n\t\tif (evt.keyCode === 13) {\n\t\t\treturn evt.preventDefault();\n\t\t}\n\n\t\tconst { value } = evt.target;\n\n\t\tif (evt.keyCode === 40 || evt.keyCode === 38) {\n\t\t\treturn evt.preventDefault();\n\t\t}\n\n\t\tif (!t.provider.get().supportsSuggestions) {\n\t\t\tt.search(value);\n\t\t} else {\n\t\t\tt.suggest(value);\n\t\t}\n\t}, 300),\n\t'click .rocket-search-suggestion-item'(e, t) {\n\t\tif (this.action) {\n\t\t\tconst value = this.action();\n\t\t\tif (value) {\n\t\t\t\tt.search(value);\n\t\t\t} else {\n\t\t\t\tt.suggestions.set();\n\t\t\t}\n\t\t} else {\n\t\t\tt.search(this.text);\n\t\t}\n\t},\n\t'mouseenter .rocket-search-suggestion-item'(e, t) {\n\t\tt.suggestionActive.set(t.suggestions.get().indexOf(this));\n\t},\n};\n\nTemplate.RocketSearch.helpers({\n\terror() {\n\t\treturn Template.instance().error.get();\n\t},\n\tprovider() {\n\t\treturn Template.instance().provider.get();\n\t},\n\tscope() {\n\t\treturn Template.instance().scope;\n\t},\n\ttext() {\n\t\treturn Template.instance().scope.text.get();\n\t},\n\tisActive() {\n\t\treturn Template.instance().isActive.get();\n\t},\n\tsuggestions() {\n\t\treturn Template.instance().suggestions.get();\n\t},\n\tsuggestionActive() {\n\t\treturn Template.instance().suggestionActive.get();\n\t},\n\tsuggestionSelected(index) {\n\t\treturn Template.instance().suggestionActive.get() === index ? 'active' : '';\n\t},\n});\n\n// add closer to suggestions\nTemplate.RocketSearch.onRendered(function () {\n\t$(document).on(`click.suggestionclose.${this.data.rid}`, () => {\n\t\t// if (e.target.id !== 'rocket-search-suggestions' && !$(e.target).parents('#rocket-search-suggestions').length) {\n\t\tthis.suggestions.set();\n\t\t// }\n\t});\n\tTracker.autorun((c) => {\n\t\tif (this.isActive.get() === true) {\n\t\t\tTracker.afterFlush(() => {\n\t\t\t\tdocument.querySelector('#message-search').focus();\n\t\t\t});\n\t\t\tc.stop();\n\t\t}\n\t});\n});\n\nTemplate.RocketSearch.onDestroyed(function () {\n\t$(document).off(`click.suggestionclose.${this.data.rid}`);\n});\n","import './search/search.html';\nimport './search/search';\nimport './provider/suggestion.html';\nimport './provider/result.html';\nimport './provider/result';\nimport './style/style.css';\n","import { Template } from 'meteor/templating';\n\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\nimport './messageBoxFollow.html';\n\nTemplate.messageBoxFollow.events({\n\t'click .js-follow'() {\n\t\tconst { tmid } = this;\n\t\tcallWithErrorHandling('followMessage', { mid: tmid });\n\t},\n});\n","import _ from 'underscore';\nimport { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport { Template } from 'meteor/templating';\nimport { Session } from 'meteor/session';\nimport { ReactiveDict } from 'meteor/reactive-dict';\nimport { Tracker } from 'meteor/tracker';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { chatMessages, ChatMessages } from '../../../ui';\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\nimport { messageContext } from '../../../ui-utils/client/lib/messageContext';\nimport { upsertMessageBulk } from '../../../ui-utils/client/lib/RoomHistoryManager';\nimport { Messages } from '../../../models';\nimport { fileUpload } from '../../../ui/client/lib/fileUpload';\nimport { dropzoneEvents, dropzoneHelpers } from '../../../ui/client/views/app/room';\nimport './thread.html';\nimport { getUserPreference } from '../../../utils';\nimport { settings } from '../../../settings/client';\nimport { callbacks } from '../../../../lib/callbacks';\nimport './messageBoxFollow';\nimport { getCommonRoomEvents } from '../../../ui/client/views/app/lib/getCommonRoomEvents';\nimport { keyCodes } from '../../../../client/lib/utils/keyCodes';\n\nconst sort = { ts: 1 };\n\nTemplate.thread.events({\n\t...dropzoneEvents,\n\t...getCommonRoomEvents(),\n\t'click .js-close'(e) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tconst { close } = this;\n\t\treturn close && close();\n\t},\n\t'scroll .js-scroll-thread': _.throttle(({ currentTarget: e }, i) => {\n\t\ti.atBottom = e.scrollTop >= e.scrollHeight - e.clientHeight;\n\t}, 150),\n\t'click .toggle-hidden'(e) {\n\t\tconst id = e.currentTarget.dataset.message;\n\t\tdocument.querySelector(`#thread-${id}`).classList.toggle('message--ignored');\n\t},\n});\n\nTemplate.thread.helpers({\n\t...dropzoneHelpers,\n\tmainMessage() {\n\t\tconst { Threads, state } = Template.instance();\n\t\tconst tmid = state.get('tmid');\n\t\treturn Threads.findOne({ _id: tmid });\n\t},\n\tisLoading() {\n\t\treturn Template.instance().state.get('loading') !== false;\n\t},\n\tmessages() {\n\t\tconst { Threads, state } = Template.instance();\n\t\tconst tmid = state.get('tmid');\n\n\t\treturn Threads.find({ tmid, _id: { $ne: tmid } }, { sort });\n\t},\n\tmessageContext() {\n\t\tconst result = messageContext.call(this, { rid: this.mainMessage.rid });\n\t\treturn {\n\t\t\t...result,\n\t\t\tsettings: {\n\t\t\t\t...result.settings,\n\t\t\t\tshowReplyButton: false,\n\t\t\t\tshowreply: false,\n\t\t\t},\n\t\t};\n\t},\n\tmessageBoxData() {\n\t\tconst instance = Template.instance();\n\t\tconst {\n\t\t\tmainMessage: { rid, _id: tmid },\n\t\t\tsubscription,\n\t\t} = Template.currentData();\n\n\t\tconst showFormattingTips = settings.get('Message_ShowFormattingTips');\n\t\treturn {\n\t\t\tshowFormattingTips,\n\t\t\ttshow: instance.state.get('sendToChannel'),\n\t\t\tsubscription,\n\t\t\trid,\n\t\t\ttmid,\n\t\t\tonSend: (...args) => {\n\t\t\t\tinstance.sendToBottom();\n\t\t\t\tinstance.state.set('sendToChannel', false);\n\t\t\t\treturn instance.chatMessages && instance.chatMessages.send.apply(instance.chatMessages, args);\n\t\t\t},\n\t\t\tonKeyUp: (...args) => instance.chatMessages && instance.chatMessages.keyup.apply(instance.chatMessages, args),\n\t\t\tonKeyDown: (...args) => {\n\t\t\t\tconst result = instance.chatMessages && instance.chatMessages.keydown.apply(instance.chatMessages, args);\n\t\t\t\tconst [event] = args;\n\n\t\t\t\tconst { which: keyCode } = event;\n\n\t\t\t\tif (keyCode === keyCodes.ESCAPE && !result && !event.target.value.trim()) {\n\t\t\t\t\tconst {\n\t\t\t\t\t\troute: { name },\n\t\t\t\t\t\tparams: { context, tab, ...params },\n\t\t\t\t\t} = FlowRouter.current();\n\t\t\t\t\tFlowRouter.go(name, params);\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t},\n\thideUsername() {\n\t\treturn getUserPreference(Meteor.userId(), 'hideUsernames') ? 'hide-usernames' : undefined;\n\t},\n\tcheckboxData() {\n\t\tconst instance = Template.instance();\n\t\tconst checked = instance.state.get('sendToChannel');\n\t\treturn {\n\t\t\tid: 'sendAlso',\n\t\t\tchecked,\n\t\t\tonChange: () => instance.state.set('sendToChannel', !checked),\n\t\t};\n\t},\n});\n\nTemplate.thread.onRendered(function () {\n\tconst rid = Tracker.nonreactive(() => this.state.get('rid'));\n\tconst tmid = Tracker.nonreactive(() => this.state.get('tmid'));\n\tthis.atBottom = true;\n\n\tthis.chatMessages = new ChatMessages(this.Threads);\n\tthis.chatMessages.initializeWrapper(this.find('.js-scroll-thread'));\n\tthis.chatMessages.initializeInput(this.find('.js-input-message'), { rid, tmid });\n\n\tthis.sendToBottom = _.throttle(() => {\n\t\tthis.atBottom = true;\n\t\tthis.chatMessages.wrapper.scrollTop = this.chatMessages.wrapper.scrollHeight;\n\t}, 300);\n\n\tthis.sendToBottomIfNecessary = () => {\n\t\tthis.atBottom && this.sendToBottom();\n\t};\n\n\tconst observer = new ResizeObserver(this.sendToBottomIfNecessary);\n\tobserver.observe(this.firstNode.querySelector('.js-scroll-thread ul'));\n\n\tthis.onFile = (filesToUpload) => {\n\t\tfileUpload(filesToUpload, this.chatMessages.input, {\n\t\t\trid: this.state.get('rid'),\n\t\t\ttmid: this.state.get('tmid'),\n\t\t});\n\t};\n\n\tthis.autorun(() => {\n\t\tconst rid = this.state.get('rid');\n\t\tconst tmid = this.state.get('tmid');\n\t\tif (!rid) {\n\t\t\treturn;\n\t\t}\n\t\tthis.callbackRemove && this.callbackRemove();\n\n\t\tthis.callbackRemove = () => callbacks.remove('streamNewMessage', `thread-${rid}`);\n\n\t\tcallbacks.add(\n\t\t\t'streamNewMessage',\n\t\t\t_.debounce((msg) => {\n\t\t\t\tif (Session.get('openedRoom') !== msg.rid || rid !== msg.rid || msg.editedAt || msg.tmid !== tmid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tMeteor.call('readThreads', tmid);\n\t\t\t}, 1000),\n\t\t\tcallbacks.priority.MEDIUM,\n\t\t\t`thread-${rid}`,\n\t\t);\n\t});\n\n\tthis.autorun(() => {\n\t\tconst tmid = this.state.get('tmid');\n\t\tthis.threadsObserve && this.threadsObserve.stop();\n\n\t\tthis.threadsObserve = Messages.find(\n\t\t\t{ $or: [{ tmid }, { _id: tmid }], _hidden: { $ne: true } },\n\t\t\t{\n\t\t\t\tfields: {\n\t\t\t\t\tcollapsed: 0,\n\t\t\t\t\tthreadMsg: 0,\n\t\t\t\t\trepliesCount: 0,\n\t\t\t\t},\n\t\t\t},\n\t\t).observe({\n\t\t\tadded: ({ _id, ...message }) => {\n\t\t\t\tthis.Threads.upsert({ _id }, message);\n\t\t\t},\n\t\t\tchanged: ({ _id, ...message }) => {\n\t\t\t\tthis.Threads.update({ _id }, message);\n\t\t\t},\n\t\t\tremoved: ({ _id }) => this.Threads.remove(_id),\n\t\t});\n\n\t\tthis.loadMore();\n\t});\n\n\tthis.autorun(() => {\n\t\tconst rid = this.state.get('rid');\n\t\tconst tmid = this.state.get('tmid');\n\t\tthis.chatMessages.initializeInput(this.find('.js-input-message'), { rid, tmid });\n\t\tif (rid && tmid) {\n\t\t\tchatMessages[`${rid}-${tmid}`] = this.chatMessages;\n\t\t}\n\t});\n\n\tthis.autorun(() => {\n\t\tFlowRouter.watchPathChange();\n\t\tconst jump = FlowRouter.getQueryParam('jump');\n\t\tconst { mainMessage } = Template.currentData();\n\t\tthis.state.set({\n\t\t\ttmid: mainMessage._id,\n\t\t\trid: mainMessage.rid,\n\t\t\tjump,\n\t\t});\n\t});\n\n\tthis.autorun(() => {\n\t\tconst jump = this.state.get('jump');\n\t\tconst loading = this.state.get('loading');\n\n\t\tif (jump && this.lastJump !== jump && loading === false) {\n\t\t\tthis.lastJump = jump;\n\t\t\tthis.find('.js-scroll-thread').style.scrollBehavior = 'smooth';\n\t\t\tthis.state.set('jump', null);\n\t\t\tTracker.afterFlush(() => {\n\t\t\t\tconst message = this.find(`#thread-${jump}`);\n\t\t\t\tmessage.classList.add('highlight');\n\t\t\t\tconst removeClass = () => {\n\t\t\t\t\tmessage.classList.remove('highlight');\n\t\t\t\t\tmessage.removeEventListener('animationend', removeClass);\n\t\t\t\t};\n\t\t\t\tmessage.addEventListener('animationend', removeClass);\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tmessage.scrollIntoView();\n\t\t\t\t}, 300);\n\t\t\t});\n\t\t}\n\t});\n});\n\nTemplate.thread.onCreated(async function () {\n\tthis.Threads = new Mongo.Collection(null);\n\n\tthis.state = new ReactiveDict({\n\t\tsendToChannel: !this.data.mainMessage.tcount,\n\t});\n\n\tthis.loadMore = async () => {\n\t\tconst { tmid } = Tracker.nonreactive(() => this.state.all());\n\t\tif (!tmid) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.state.set('loading', true);\n\n\t\tconst messages = await callWithErrorHandling('getThreadMessages', { tmid });\n\n\t\tupsertMessageBulk({ msgs: messages }, this.Threads);\n\n\t\tTracker.afterFlush(() => {\n\t\t\tthis.state.set('loading', false);\n\t\t});\n\t};\n});\n\nTemplate.thread.onDestroyed(function () {\n\tconst { Threads, threadsObserve, callbackRemove, state, chatMessages } = this;\n\tThreads.remove({});\n\tthreadsObserve && threadsObserve.stop();\n\n\tcallbackRemove && callbackRemove();\n\n\tconst tmid = state.get('tmid');\n\tconst rid = state.get('rid');\n\tif (rid && tmid) {\n\t\tchatMessages.onDestroyed && chatMessages.onDestroyed(rid, tmid);\n\t\tdelete chatMessages[`${rid}-${tmid}`];\n\t}\n});\n","import React, { useMemo, lazy, LazyExoticComponent, FC, ReactNode } from 'react';\nimport { BadgeProps } from '@rocket.chat/fuselage';\n\nimport { addAction } from '../../../../client/views/room/lib/Toolbox';\nimport { useSetting } from '../../../../client/contexts/SettingsContext';\nimport Header from '../../../../client/components/Header';\nimport { ISubscription } from '../../../../definition/ISubscription';\n\nconst getVariant = (tunreadUser: number, tunreadGroup: number): BadgeProps['variant'] => {\n\tif (tunreadUser > 0) {\n\t\treturn 'danger';\n\t}\n\tif (tunreadGroup > 0) {\n\t\treturn 'warning';\n\t}\n\treturn 'primary';\n};\n\nconst template = lazy(() => import('../../../../client/views/room/contextualBar/Threads')) as LazyExoticComponent<FC>;\n\naddAction('thread', (options) => {\n\tconst room = options.room as unknown as ISubscription;\n\tconst threadsEnabled = useSetting('Threads_enabled');\n\treturn useMemo(\n\t\t() =>\n\t\t\tthreadsEnabled\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\t\t\t\tid: 'thread',\n\t\t\t\t\t\tfull: true,\n\t\t\t\t\t\ttitle: 'Threads',\n\t\t\t\t\t\ticon: 'thread',\n\t\t\t\t\t\ttemplate,\n\t\t\t\t\t\trenderAction: (props): ReactNode => {\n\t\t\t\t\t\t\tconst tunread = room.tunread?.length || 0;\n\t\t\t\t\t\t\tconst tunreadUser = room.tunreadUser?.length || 0;\n\t\t\t\t\t\t\tconst tunreadGroup = room.tunreadGroup?.length || 0;\n\t\t\t\t\t\t\tconst unread = tunread > 99 ? '99+' : tunread;\n\t\t\t\t\t\t\tconst variant = getVariant(tunreadUser, tunreadGroup);\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Header.ToolBoxAction {...props}>\n\t\t\t\t\t\t\t\t\t{unread > 0 && <Header.Badge variant={variant}>{unread}</Header.Badge>}\n\t\t\t\t\t\t\t\t</Header.ToolBoxAction>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t},\n\t\t\t\t\t\torder: 2,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[threadsEnabled, room.tunread?.length, room.tunreadUser?.length, room.tunreadGroup?.length],\n\t);\n});\n","import '../threads.css';\n","import { Meteor } from 'meteor/meteor';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\n\nimport { filterMarkdown } from '../../../markdown/lib/markdown';\nimport { Users } from '../../../models/client';\nimport { settings } from '../../../settings/client';\nimport { MentionsParser } from '../../../mentions/lib/MentionsParser';\nimport { emojiParser } from '../../../emoji/client/emojiParser.js';\n\nexport const normalizeThreadTitle = ({ ...message }) => {\n\tif (message.msg) {\n\t\tconst filteredMessage = filterMarkdown(escapeHTML(message.msg));\n\t\tif (!message.channels && !message.mentions) {\n\t\t\treturn filteredMessage;\n\t\t}\n\t\tconst uid = Meteor.userId();\n\t\tconst me = uid && (Users.findOne(uid, { fields: { username: 1 } }) || {}).username;\n\t\tconst pattern = settings.get('UTF8_User_Names_Validation');\n\t\tconst useRealName = settings.get('UI_Use_Real_Name');\n\n\t\tconst instance = new MentionsParser({\n\t\t\tpattern: () => pattern,\n\t\t\tuseRealName: () => useRealName,\n\t\t\tme: () => me,\n\t\t\tuserTemplate: ({ label }) => `<strong> ${label} </strong>`,\n\t\t\troomTemplate: ({ prefix, mention }) => `${prefix}<strong> ${mention} </strong>`,\n\t\t});\n\t\tconst { html } = emojiParser({ html: filteredMessage });\n\t\treturn instance.parse({ ...message, msg: filteredMessage, html }).html;\n\t}\n\n\tif (message.attachments) {\n\t\tconst attachment = message.attachments.find((attachment) => attachment.title || attachment.description);\n\n\t\tif (attachment && attachment.description) {\n\t\t\treturn escapeHTML(attachment.description);\n\t\t}\n\n\t\tif (attachment && attachment.title) {\n\t\t\treturn escapeHTML(attachment.title);\n\t\t}\n\t}\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { Messages } from '../../../models/client';\nimport { settings } from '../../../settings/client';\nimport { MessageAction } from '../../../ui-utils/client';\nimport { messageArgs } from '../../../ui-utils/client/lib/messageArgs';\nimport { roomTypes } from '../../../utils/client';\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\n\nMeteor.startup(function () {\n\tTracker.autorun(() => {\n\t\tif (!settings.get('Threads_enabled')) {\n\t\t\treturn MessageAction.removeButton('follow-message');\n\t\t}\n\t\tMessageAction.addButton({\n\t\t\tid: 'follow-message',\n\t\t\ticon: 'bell',\n\t\t\tlabel: 'Follow_message',\n\t\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\t\tasync action() {\n\t\t\t\tconst { msg } = messageArgs(this);\n\t\t\t\tcallWithErrorHandling('followMessage', { mid: msg._id }).then(() =>\n\t\t\t\t\tdispatchToastMessage({\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\tmessage: TAPi18n.__('You_followed_this_message'),\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t},\n\t\t\tcondition({ msg: { _id, tmid, replies = [] }, u, room }, context) {\n\t\t\t\tif (tmid || context) {\n\t\t\t\t\tconst parentMessage = Messages.findOne({ _id: tmid || _id }, { fields: { replies: 1 } });\n\t\t\t\t\tif (parentMessage) {\n\t\t\t\t\t\treplies = parentMessage.replies || [];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst isLivechatRoom = roomTypes.isLivechatRoom(room.t);\n\t\t\t\tif (isLivechatRoom) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn !replies.includes(u._id);\n\t\t\t},\n\t\t\torder: 2,\n\t\t\tgroup: 'menu',\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { settings } from '../../../settings/client';\nimport { MessageAction } from '../../../ui-utils/client';\nimport { messageArgs } from '../../../ui-utils/client/lib/messageArgs';\nimport { roomTypes } from '../../../utils/client';\n\nMeteor.startup(function () {\n\tTracker.autorun(() => {\n\t\tif (!settings.get('Threads_enabled')) {\n\t\t\treturn MessageAction.removeButton('reply-in-thread');\n\t\t}\n\t\tMessageAction.addButton({\n\t\t\tid: 'reply-in-thread',\n\t\t\ticon: 'thread',\n\t\t\tlabel: 'Reply_in_thread',\n\t\t\tcontext: ['message', 'message-mobile'],\n\t\t\taction(e) {\n\t\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\t\te.stopPropagation();\n\t\t\t\tFlowRouter.setParams({\n\t\t\t\t\ttab: 'thread',\n\t\t\t\t\tcontext: message.tmid || message._id,\n\t\t\t\t});\n\t\t\t},\n\t\t\tcondition({ subscription, room }) {\n\t\t\t\tconst isLivechatRoom = roomTypes.isLivechatRoom(room.t);\n\t\t\t\tif (isLivechatRoom) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn Boolean(subscription);\n\t\t\t},\n\t\t\torder: -1,\n\t\t\tgroup: ['message', 'menu'],\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { Messages } from '../../../models/client';\nimport { settings } from '../../../settings/client';\nimport { MessageAction } from '../../../ui-utils/client';\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\nimport { messageArgs } from '../../../ui-utils/client/lib/messageArgs';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\n\nMeteor.startup(function () {\n\tTracker.autorun(() => {\n\t\tif (!settings.get('Threads_enabled')) {\n\t\t\treturn MessageAction.removeButton('unfollow-message');\n\t\t}\n\t\tMessageAction.addButton({\n\t\t\tid: 'unfollow-message',\n\t\t\ticon: 'bell-off',\n\t\t\tlabel: 'Unfollow_message',\n\t\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\t\tasync action() {\n\t\t\t\tconst { msg } = messageArgs(this);\n\t\t\t\tcallWithErrorHandling('unfollowMessage', { mid: msg._id }).then(() =>\n\t\t\t\t\tdispatchToastMessage({\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\tmessage: TAPi18n.__('You_unfollowed_this_message'),\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t},\n\t\t\tcondition({ msg: { _id, tmid, replies = [] }, u }, context) {\n\t\t\t\tif (tmid || context) {\n\t\t\t\t\tconst parentMessage = Messages.findOne({ _id: tmid || _id }, { fields: { replies: 1 } });\n\t\t\t\t\tif (parentMessage) {\n\t\t\t\t\t\treplies = parentMessage.replies || [];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn replies.includes(u._id);\n\t\t\t},\n\t\t\torder: 2,\n\t\t\tgroup: 'menu',\n\t\t});\n\t});\n});\n","import './flextab/threadlist';\nimport './flextab/thread';\nimport './flextab/threads';\nimport './messageAction/follow';\nimport './messageAction/unfollow';\nimport './messageAction/replyInThread';\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\n\nimport { Rooms } from '../../../models/client';\nimport { getRoomAvatarURL } from '../../../utils/lib/getRoomAvatarURL';\nimport { getUserAvatarURL } from '../../../utils/lib/getUserAvatarURL';\n\nconst getUsername = ({ userId, username }) => {\n\tconst query = {};\n\tif (username) {\n\t\tquery.username = username;\n\t}\n\n\tif (userId) {\n\t\tquery._id = userId;\n\t}\n\n\tconst user = Meteor.users.findOne(query, { fields: { username: 1, avatarETag: 1 } });\n\tif (!user) {\n\t\treturn {};\n\t}\n\n\treturn user;\n};\n\nconst getRoomETag = (rid) => Rooms.findOne({ _id: rid }, { fields: { avatarETag: 1 } });\n\nTemplate.avatar.helpers({\n\tsrc() {\n\t\tconst { url, rid } = Template.instance().data;\n\t\tif (url) {\n\t\t\treturn url;\n\t\t}\n\n\t\tif (rid) {\n\t\t\tconst { avatarETag } = getRoomETag(rid) || {};\n\t\t\treturn getRoomAvatarURL(rid, avatarETag);\n\t\t}\n\n\t\tif (this.roomIcon && this.username) {\n\t\t\treturn getUserAvatarURL(`@${this.username}`);\n\t\t}\n\n\t\tconst { username, avatarETag } = getUsername(this);\n\t\tif (!username) {\n\t\t\tif (this.username) {\n\t\t\t\treturn getUserAvatarURL(this.username);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\treturn getUserAvatarURL(username, avatarETag);\n\t},\n\n\talt() {\n\t\tconst { username } = getUsername(this);\n\t\treturn username;\n\t},\n});\n","import './avatar/avatar.html';\nimport './avatar/avatar';\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\nimport _ from 'underscore';\n\nimport { settings } from '../../../settings';\nimport { callbacks } from '../../../../lib/callbacks';\nimport { t } from '../../../utils';\nimport { handleError } from '../../../../client/lib/utils/handleError';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\n\nTemplate.loginForm.helpers({\n\tuserName() {\n\t\tconst user = Meteor.user();\n\t\treturn user && user.username;\n\t},\n\tnamePlaceholder() {\n\t\tif (settings.get('Accounts_RequireNameForSignUp')) {\n\t\t\treturn t('Name');\n\t\t}\n\t\treturn t('Name_optional');\n\t},\n\tshowFormLogin() {\n\t\treturn settings.get('Accounts_ShowFormLogin');\n\t},\n\tstate(...state) {\n\t\treturn state.indexOf(Template.instance().state.get()) > -1;\n\t},\n\tbtnLoginSave() {\n\t\tif (Template.instance().loading.get()) {\n\t\t\treturn `${t('Please_wait')}...`;\n\t\t}\n\t\tswitch (Template.instance().state.get()) {\n\t\t\tcase 'register':\n\t\t\t\treturn t('Register');\n\t\t\tcase 'login':\n\t\t\t\treturn t('Login');\n\t\t\tcase 'email-verification':\n\t\t\t\treturn t('Send_confirmation_email');\n\t\t\tcase 'forgot-password':\n\t\t\t\treturn t('Reset_password');\n\t\t}\n\t},\n\tloginTerms() {\n\t\treturn settings.get('Layout_Login_Terms');\n\t},\n\tregistrationAllowed() {\n\t\tconst validSecretUrl = Template.instance().validSecretURL;\n\t\treturn settings.get('Accounts_RegistrationForm') === 'Public' || (validSecretUrl && validSecretUrl.get());\n\t},\n\tlinkReplacementText() {\n\t\treturn settings.get('Accounts_RegistrationForm_LinkReplacementText');\n\t},\n\tpasswordResetAllowed() {\n\t\treturn settings.get('Accounts_PasswordReset');\n\t},\n\trequirePasswordConfirmation() {\n\t\treturn settings.get('Accounts_RequirePasswordConfirmation');\n\t},\n\temailOrUsernamePlaceholder() {\n\t\treturn settings.get('Accounts_EmailOrUsernamePlaceholder') || t('Email_or_username');\n\t},\n\tpasswordPlaceholder() {\n\t\treturn settings.get('Accounts_PasswordPlaceholder') || t('Password');\n\t},\n\tconfirmPasswordPlaceholder() {\n\t\treturn settings.get('Accounts_ConfirmPasswordPlaceholder') || t('Confirm_password');\n\t},\n\tmanuallyApproveNewUsers() {\n\t\treturn settings.get('Accounts_ManuallyApproveNewUsers');\n\t},\n\ttypedEmail() {\n\t\treturn Template.instance().typedEmail?.trim();\n\t},\n});\n\nTemplate.loginForm.events({\n\t'submit #login-card'(event, instance) {\n\t\tevent.preventDefault();\n\t\t$(event.target).find('button.login').focus();\n\t\tinstance.loading.set(true);\n\t\tconst formData = instance.validate();\n\t\tconst state = instance.state.get();\n\t\tif (formData) {\n\t\t\tif (state === 'email-verification') {\n\t\t\t\tMeteor.call('sendConfirmationEmail', formData.email?.trim(), () => {\n\t\t\t\t\tinstance.loading.set(false);\n\t\t\t\t\tcallbacks.run('userConfirmationEmailRequested');\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('We_have_sent_registration_email') });\n\t\t\t\t\treturn instance.state.set('login');\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (state === 'forgot-password') {\n\t\t\t\tMeteor.call('sendForgotPasswordEmail', formData.email?.trim(), (err) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\thandleError(err);\n\t\t\t\t\t\treturn instance.state.set('login');\n\t\t\t\t\t}\n\t\t\t\t\tinstance.loading.set(false);\n\t\t\t\t\tcallbacks.run('userForgotPasswordEmailRequested');\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('If_this_email_is_registered') });\n\t\t\t\t\treturn instance.state.set('login');\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (state === 'register') {\n\t\t\t\tformData.secretURL = FlowRouter.getParam('hash');\n\t\t\t\treturn Meteor.call('registerUser', formData, function (error) {\n\t\t\t\t\tinstance.loading.set(false);\n\t\t\t\t\tif (error != null) {\n\t\t\t\t\t\tif (error.reason === 'Email already exists.') {\n\t\t\t\t\t\t\tdispatchToastMessage({ type: 'error', message: t('Email_already_exists') });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\thandleError(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcallbacks.run('userRegistered');\n\t\t\t\t\treturn Meteor.loginWithPassword(formData.email?.trim(), formData.pass, function (error) {\n\t\t\t\t\t\tif (error && error.error === 'error-invalid-email') {\n\t\t\t\t\t\t\treturn instance.state.set('wait-email-activation');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (error && error.error === 'error-user-is-not-activated') {\n\t\t\t\t\t\t\treturn instance.state.set('wait-activation');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tSession.set('forceLogin', false);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tlet loginMethod = 'loginWithPassword';\n\t\t\tif (settings.get('LDAP_Enable')) {\n\t\t\t\tloginMethod = 'loginWithLDAP';\n\t\t\t}\n\t\t\tif (settings.get('CROWD_Enable')) {\n\t\t\t\tloginMethod = 'loginWithCrowd';\n\t\t\t}\n\t\t\treturn Meteor[loginMethod](formData.emailOrUsername?.trim(), formData.pass, function (error) {\n\t\t\t\tinstance.loading.set(false);\n\t\t\t\tif (error != null) {\n\t\t\t\t\tswitch (error.error) {\n\t\t\t\t\t\tcase 'error-user-is-not-activated':\n\t\t\t\t\t\t\treturn dispatchToastMessage({ type: 'error', message: t('Wait_activation_warning') });\n\t\t\t\t\t\tcase 'error-invalid-email':\n\t\t\t\t\t\t\tinstance.typedEmail = formData.emailOrUsername;\n\t\t\t\t\t\t\treturn instance.state.set('email-verification');\n\t\t\t\t\t\tcase 'error-app-user-is-not-allowed-to-login':\n\t\t\t\t\t\t\tdispatchToastMessage({ type: 'error', message: t('App_user_not_allowed_to_login') });\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'error-login-blocked-for-ip':\n\t\t\t\t\t\t\tdispatchToastMessage({ type: 'error', message: t('Error_login_blocked_for_ip') });\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'error-login-blocked-for-user':\n\t\t\t\t\t\t\tdispatchToastMessage({ type: 'error', message: t('Error_login_blocked_for_user') });\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'error-license-user-limit-reached':\n\t\t\t\t\t\t\tdispatchToastMessage({\n\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\tmessage: t('error-license-user-limit-reached'),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn dispatchToastMessage({\n\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\tmessage: t('User_not_found_or_incorrect_password'),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tSession.set('forceLogin', false);\n\t\t\t});\n\t\t}\n\t},\n\t'click .register'() {\n\t\tTemplate.instance().state.set('register');\n\t\treturn callbacks.run('loginPageStateChange', Template.instance().state.get());\n\t},\n\t'click .back-to-login'() {\n\t\tTemplate.instance().state.set('login');\n\t\treturn callbacks.run('loginPageStateChange', Template.instance().state.get());\n\t},\n\t'click .forgot-password'() {\n\t\tTemplate.instance().state.set('forgot-password');\n\t\treturn callbacks.run('loginPageStateChange', Template.instance().state.get());\n\t},\n});\n\nTemplate.loginForm.onCreated(function () {\n\tconst instance = this;\n\tthis.loading = new ReactiveVar(false);\n\n\tif (Session.get('loginDefaultState')) {\n\t\tthis.state = new ReactiveVar(Session.get('loginDefaultState'));\n\t} else {\n\t\tthis.state = new ReactiveVar('login');\n\t}\n\n\tTracker.autorun(() => {\n\t\tconst registrationForm = settings.get('Accounts_RegistrationForm');\n\t\tif (registrationForm === 'Disabled' && this.state.get() === 'register') {\n\t\t\tthis.state.set('login');\n\t\t}\n\t});\n\n\tthis.validSecretURL = new ReactiveVar(false);\n\tthis.validate = function () {\n\t\tconst formData = $('#login-card').serializeArray();\n\t\tconst formObj = {};\n\t\tconst validationObj = {};\n\t\tformData.forEach((field) => {\n\t\t\tformObj[field.name] = field.value;\n\t\t});\n\t\tconst state = instance.state.get();\n\t\tif (state !== 'login') {\n\t\t\tif (!(formObj.email && /\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]+\\b/i.test(formObj.email))) {\n\t\t\t\tvalidationObj.email = t('Invalid_email');\n\t\t\t}\n\t\t}\n\t\tif (state === 'login') {\n\t\t\tif (!formObj.emailOrUsername) {\n\t\t\t\tvalidationObj.emailOrUsername = t('Invalid_email');\n\t\t\t}\n\t\t}\n\t\tif (state !== 'forgot-password' && state !== 'email-verification') {\n\t\t\tif (!formObj.pass) {\n\t\t\t\tvalidationObj.pass = t('Invalid_pass');\n\t\t\t}\n\t\t}\n\t\tif (state === 'register') {\n\t\t\tif (settings.get('Accounts_RequireNameForSignUp') && !formObj.name) {\n\t\t\t\tvalidationObj.name = t('Invalid_name');\n\t\t\t}\n\t\t\tif (settings.get('Accounts_RequirePasswordConfirmation') && formObj['confirm-pass'] !== formObj.pass) {\n\t\t\t\tvalidationObj['confirm-pass'] = t('Invalid_confirm_pass');\n\t\t\t}\n\t\t\tif (settings.get('Accounts_ManuallyApproveNewUsers') && !formObj.reason) {\n\t\t\t\tvalidationObj.reason = t('Invalid_reason');\n\t\t\t}\n\t\t}\n\t\t$('#login-card h2').removeClass('error');\n\t\t$('#login-card input.error, #login-card select.error').removeClass('error');\n\t\t$('#login-card .input-error').text('');\n\t\tif (!_.isEmpty(validationObj)) {\n\t\t\t$('#login-card h2').addClass('error');\n\n\t\t\tObject.keys(validationObj).forEach((key) => {\n\t\t\t\tconst value = validationObj[key];\n\t\t\t\t$(`#login-card input[name=${key}], #login-card select[name=${key}]`).addClass('error');\n\t\t\t\t$(`#login-card input[name=${key}]~.input-error, #login-card select[name=${key}]~.input-error`).text(value);\n\t\t\t});\n\t\t\tinstance.loading.set(false);\n\t\t\treturn false;\n\t\t}\n\t\treturn formObj;\n\t};\n\tif (FlowRouter.getParam('hash')) {\n\t\treturn Meteor.call('checkRegistrationSecretURL', FlowRouter.getParam('hash'), () => this.validSecretURL.set(true));\n\t}\n});\n\nTemplate.loginForm.onRendered(function () {\n\tSession.set('loginDefaultState');\n\treturn Tracker.autorun(() => {\n\t\tcallbacks.run('loginPageStateChange', this.state.get());\n\t\tswitch (this.state.get()) {\n\t\t\tcase 'login':\n\t\t\tcase 'forgot-password':\n\t\t\tcase 'email-verification':\n\t\t\t\treturn Meteor.defer(function () {\n\t\t\t\t\treturn $('input[name=email]').select().focus();\n\t\t\t\t});\n\t\t\tcase 'register':\n\t\t\t\treturn Meteor.defer(function () {\n\t\t\t\t\treturn $('input[name=name]').select().focus();\n\t\t\t\t});\n\t\t}\n\t});\n});\n","import { Template } from 'meteor/templating';\n\nimport { settings } from '../../../settings';\n\nTemplate.loginLayout.helpers({\n\tbackgroundUrl() {\n\t\tconst asset = settings.get('Assets_background');\n\t\tconst prefix = __meteor_runtime_config__.ROOT_URL_PATH_PREFIX || '';\n\t\tif (asset && (asset.url || asset.defaultUrl)) {\n\t\t\treturn `${prefix}/${asset.url || asset.defaultUrl}`;\n\t\t}\n\t},\n});\n","import { capitalize } from '@rocket.chat/string-helpers';\nimport { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { ServiceConfiguration } from 'meteor/service-configuration';\n\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\n\nTemplate.loginServices.helpers({\n\tloginService() {\n\t\treturn ServiceConfiguration.configurations\n\t\t\t.find(\n\t\t\t\t{\n\t\t\t\t\tshowButton: { $ne: false },\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tsort: {\n\t\t\t\t\t\tservice: 1,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t)\n\t\t\t.fetch()\n\t\t\t.map((service) => {\n\t\t\t\tswitch (service.service) {\n\t\t\t\t\tcase 'meteor-developer':\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tservice,\n\t\t\t\t\t\t\tdisplayName: 'Meteor',\n\t\t\t\t\t\t\ticon: 'meteor',\n\t\t\t\t\t\t};\n\n\t\t\t\t\tcase 'github':\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tservice,\n\t\t\t\t\t\t\tdisplayName: 'GitHub',\n\t\t\t\t\t\t\ticon: 'github-circled',\n\t\t\t\t\t\t};\n\n\t\t\t\t\tcase 'gitlab':\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tservice,\n\t\t\t\t\t\t\tdisplayName: 'GitLab',\n\t\t\t\t\t\t\ticon: service.service,\n\t\t\t\t\t\t};\n\n\t\t\t\t\tcase 'wordpress':\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tservice,\n\t\t\t\t\t\t\tdisplayName: 'WordPress',\n\t\t\t\t\t\t\ticon: service.service,\n\t\t\t\t\t\t};\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tservice,\n\t\t\t\t\t\t\tdisplayName: capitalize(String(service.service || '')),\n\t\t\t\t\t\t\ticon: service.service,\n\t\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t});\n\t},\n});\n\nconst loginMethods = {\n\t'meteor-developer': 'MeteorDeveloperAccount',\n\t'linkedin': 'Linkedin',\n};\n\nTemplate.loginServices.events({\n\t'click .external-login'(e) {\n\t\tif (this.service == null || this.service.service == null) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst loadingIcon = $(e.currentTarget).find('.loading-icon');\n\t\tconst serviceIcon = $(e.currentTarget).find('.service-icon');\n\t\tloadingIcon.removeClass('hidden');\n\t\tserviceIcon.addClass('hidden');\n\n\t\tconst loginWithService = `loginWith${loginMethods[this.service.service] || capitalize(String(this.service.service || ''))}`;\n\t\tconst serviceConfig = this.service.clientConfig || {};\n\n\t\tMeteor[loginWithService](serviceConfig, (error) => {\n\t\t\tloadingIcon.addClass('hidden');\n\t\t\tserviceIcon.removeClass('hidden');\n\n\t\t\tif (!error) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (error.reason) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error.reason });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdispatchToastMessage({ type: 'error', message: error.message });\n\t\t});\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\nimport { Tracker } from 'meteor/tracker';\nimport _ from 'underscore';\n\nimport { settings } from '../../../settings';\nimport { Button } from '../../../ui';\nimport { t } from '../../../utils';\nimport { callbacks } from '../../../../lib/callbacks';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\n\nTemplate.username.onCreated(function () {\n\tconst self = this;\n\tself.customFields = new ReactiveVar();\n\tself.username = new ReactiveVar();\n\n\tTracker.autorun(() => {\n\t\tconst Accounts_CustomFields = settings.get('Accounts_CustomFields');\n\t\tif (typeof Accounts_CustomFields === 'string' && Accounts_CustomFields.trim() !== '') {\n\t\t\ttry {\n\t\t\t\treturn this.customFields.set(JSON.parse(settings.get('Accounts_CustomFields')));\n\t\t\t} catch (error1) {\n\t\t\t\treturn console.error('Invalid JSON for Accounts_CustomFields');\n\t\t\t}\n\t\t} else {\n\t\t\treturn this.customFields.set(null);\n\t\t}\n\t});\n\n\tconst validateCustomFields = function (formObj, validationObj) {\n\t\tconst customFields = self.customFields.get();\n\t\tif (!customFields) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const field in formObj) {\n\t\t\tif (formObj.hasOwnProperty(field)) {\n\t\t\t\tconst value = formObj[field];\n\t\t\t\tif (customFields[field] == null) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst customField = customFields[field];\n\t\t\t\tif (customField.required === true && !value) {\n\t\t\t\t\tvalidationObj[field] = t('Field_required');\n\t\t\t\t\treturn validationObj[field];\n\t\t\t\t}\n\t\t\t\tif (customField.maxLength != null && value.length > customField.maxLength) {\n\t\t\t\t\tvalidationObj[field] = t('Max_length_is', customField.maxLength);\n\t\t\t\t\treturn validationObj[field];\n\t\t\t\t}\n\t\t\t\tif (customField.minLength != null && value.length < customField.minLength) {\n\t\t\t\t\tvalidationObj[field] = t('Min_length_is', customField.minLength);\n\t\t\t\t\treturn validationObj[field];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.validate = function () {\n\t\tconst formData = $('#login-card').serializeArray();\n\t\tconst formObj = {};\n\t\tconst validationObj = {};\n\t\tformData.forEach((field) => {\n\t\t\tformObj[field.name] = field.value;\n\t\t});\n\n\t\t$('#login-card h2').removeClass('error');\n\t\t$('#login-card input.error, #login-card select.error').removeClass('error');\n\t\t$('#login-card .input-error').text('');\n\t\tvalidateCustomFields(formObj, validationObj);\n\t\tif (!_.isEmpty(validationObj)) {\n\t\t\t$('#login-card h2').addClass('error');\n\n\t\t\tObject.keys(validationObj).forEach((key) => {\n\t\t\t\tconst value = validationObj[key];\n\t\t\t\t$(`#login-card input[name=${key}], #login-card select[name=${key}]`).addClass('error');\n\t\t\t\t$(`#login-card input[name=${key}]~.input-error, #login-card select[name=${key}]~.input-error`).text(value);\n\t\t\t});\n\n\t\t\treturn false;\n\t\t}\n\t\treturn formObj;\n\t};\n\n\treturn Meteor.call('getUsernameSuggestion', function (error, username) {\n\t\tself.username.set({\n\t\t\tready: true,\n\t\t\tusername,\n\t\t});\n\t\treturn Meteor.defer(() => self.find('input').focus());\n\t});\n});\n\nTemplate.username.helpers({\n\tusername() {\n\t\treturn Template.instance().username.get();\n\t},\n\n\tbackgroundUrl() {\n\t\tconst asset = settings.get('Assets_background');\n\t\tconst prefix = __meteor_runtime_config__.ROOT_URL_PATH_PREFIX || '';\n\t\tif (asset && (asset.url || asset.defaultUrl)) {\n\t\t\treturn `${prefix}/${asset.url || asset.defaultUrl}`;\n\t\t}\n\t},\n});\n\nTemplate.username.events({\n\t'focus .input-text input'(event) {\n\t\treturn $(event.currentTarget).parents('.input-text').addClass('focus');\n\t},\n\n\t'blur .input-text input'(event) {\n\t\tif (event.currentTarget.value === '') {\n\t\t\treturn $(event.currentTarget).parents('.input-text').removeClass('focus');\n\t\t}\n\t},\n\t'reset #login-card'() {\n\t\tMeteor.logout();\n\t},\n\t'submit #login-card'(event, instance) {\n\t\tevent.preventDefault();\n\n\t\tconst formData = instance.validate();\n\n\t\tconst username = instance.username.get();\n\t\tusername.empty = false;\n\t\tusername.error = false;\n\t\tusername.invalid = false;\n\t\tinstance.username.set(username);\n\n\t\tconst button = $(event.target).find('button.login');\n\t\tButton.loading(button);\n\n\t\tif (!formData) {\n\t\t\tButton.reset(button);\n\t\t\treturn;\n\t\t}\n\n\t\tconst usernameValue = $('#username').val().trim();\n\t\tif (usernameValue === '') {\n\t\t\tusername.empty = true;\n\t\t\tinstance.username.set(username);\n\t\t\tButton.reset(button);\n\t\t\treturn;\n\t\t}\n\n\t\tMeteor.call('saveCustomFields', formData, function (err) {\n\t\t\tif (err != null) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: err.error });\n\t\t\t}\n\t\t});\n\n\t\tMeteor.call('setUsername', usernameValue, function (err) {\n\t\t\tif (err != null) {\n\t\t\t\tif (err.error === 'username-invalid') {\n\t\t\t\t\tusername.invalid = true;\n\t\t\t\t} else if (err.error === 'error-blocked-username') {\n\t\t\t\t\tusername.blocked = true;\n\t\t\t\t} else {\n\t\t\t\t\tusername.unavailable = true;\n\t\t\t\t}\n\t\t\t\tusername.username = usernameValue;\n\t\t\t\tusername.escaped = _.escape(usernameValue);\n\t\t\t}\n\n\t\t\tButton.reset(button);\n\t\t\tinstance.username.set(username);\n\t\t\treturn callbacks.run('usernameSet');\n\t\t});\n\t},\n});\n","import './login/form.html';\nimport './login/layout.html';\nimport './login/layout';\nimport './login/services.html';\nimport './username/username.html';\nimport './login/form';\nimport './login/services';\nimport './username/username';\n","import './loading.css';\nimport './loading.html';\n","import Clipboard from 'clipboard';\nimport s from 'underscore.string';\nimport { Meteor } from 'meteor/meteor';\nimport { Match } from 'meteor/check';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\n\nimport { t } from '../../utils/client';\nimport { chatMessages } from '../../ui';\nimport { popover, RoomManager } from '../../ui-utils';\nimport { settings } from '../../settings';\nimport { ChatSubscription } from '../../models';\nimport './body.html';\nimport { imperativeModal } from '../../../client/lib/imperativeModal';\nimport GenericModal from '../../../client/components/GenericModal';\nimport { fireGlobalEvent } from '../../../client/lib/utils/fireGlobalEvent';\nimport { isLayoutEmbedded } from '../../../client/lib/utils/isLayoutEmbedded';\n\nTemplate.body.onRendered(function () {\n\tnew Clipboard('.clipboard');\n\n\t$(document.body).on('keydown', function (e) {\n\t\tconst unread = Session.get('unread');\n\t\tif (e.keyCode === 27 && (e.shiftKey === true || e.ctrlKey === true) && unread != null && unread !== '') {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\n\t\t\tconst handleClearUnreadAllMessages = () => {\n\t\t\t\tconst subscriptions = ChatSubscription.find(\n\t\t\t\t\t{\n\t\t\t\t\t\topen: true,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tunread: 1,\n\t\t\t\t\t\t\talert: 1,\n\t\t\t\t\t\t\trid: 1,\n\t\t\t\t\t\t\tt: 1,\n\t\t\t\t\t\t\tname: 1,\n\t\t\t\t\t\t\tls: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\n\t\t\t\tsubscriptions.forEach((subscription) => {\n\t\t\t\t\tif (subscription.alert || subscription.unread > 0) {\n\t\t\t\t\t\tMeteor.call('readMessages', subscription.rid);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\timperativeModal.close();\n\t\t\t};\n\n\t\t\timperativeModal.open({\n\t\t\t\tcomponent: GenericModal,\n\t\t\t\tprops: {\n\t\t\t\t\tchildren: t('Are_you_sure_you_want_to_clear_all_unread_messages'),\n\t\t\t\t\tvariant: 'warning',\n\t\t\t\t\ttitle: t('Clear_all_unreads_question'),\n\t\t\t\t\tconfirmText: t('Yes_clear_all'),\n\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t\tonCancel: imperativeModal.close,\n\t\t\t\t\tonConfirm: handleClearUnreadAllMessages,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t});\n\n\t$(document.body).on('keydown', function (e) {\n\t\tconst { target } = e;\n\t\tif (e.ctrlKey === true || e.metaKey === true) {\n\t\t\tpopover.close();\n\t\t\treturn;\n\t\t}\n\t\tif (!((e.keyCode > 45 && e.keyCode < 91) || e.keyCode === 8)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (/input|textarea|select/i.test(target.tagName)) {\n\t\t\treturn;\n\t\t}\n\t\tif (target.id === 'pswp') {\n\t\t\treturn;\n\t\t}\n\n\t\tpopover.close();\n\n\t\tif (document.querySelector('.rc-modal-wrapper dialog[open]')) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst inputMessage = chatMessages[RoomManager.openedRoom] && chatMessages[RoomManager.openedRoom].input;\n\t\tif (!inputMessage) {\n\t\t\treturn;\n\t\t}\n\t\tinputMessage.focus();\n\t});\n\n\tconst handleMessageLinkClick = (event) => {\n\t\tconst link = event.currentTarget;\n\t\tif (link.origin === s.rtrim(Meteor.absoluteUrl(), '/') && /msg=([a-zA-Z0-9]+)/.test(link.search)) {\n\t\t\tfireGlobalEvent('click-message-link', { link: link.pathname + link.search });\n\t\t}\n\t};\n\n\tthis.autorun(() => {\n\t\tif (isLayoutEmbedded()) {\n\t\t\t$(document.body).on('click', 'a', handleMessageLinkClick);\n\t\t} else {\n\t\t\t$(document.body).off('click', 'a', handleMessageLinkClick);\n\t\t}\n\t});\n\n\tthis.autorun(function (c) {\n\t\tconst w = window;\n\t\tconst d = document;\n\t\tconst script = 'script';\n\t\tconst l = 'dataLayer';\n\t\tconst i = settings.get('GoogleTagManager_id');\n\t\tif (Match.test(i, String) && i.trim() !== '') {\n\t\t\tc.stop();\n\t\t\treturn (function (w, d, s, l, i) {\n\t\t\t\tw[l] = w[l] || [];\n\t\t\t\tw[l].push({\n\t\t\t\t\t'gtm.start': new Date().getTime(),\n\t\t\t\t\t'event': 'gtm.js',\n\t\t\t\t});\n\t\t\t\tconst f = d.getElementsByTagName(s)[0];\n\t\t\t\tconst j = d.createElement(s);\n\t\t\t\tconst dl = l !== 'dataLayer' ? `&l=${l}` : '';\n\t\t\t\tj.async = true;\n\t\t\t\tj.src = `//www.googletagmanager.com/gtm.js?id=${i}${dl}`;\n\t\t\t\treturn f.parentNode.insertBefore(j, f);\n\t\t\t})(w, d, script, l, i);\n\t\t}\n\t});\n});\n","import './body';\nimport './loading';\nimport './error.html';\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { ReactiveDict } from 'meteor/reactive-dict';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\nimport { Tracker } from 'meteor/tracker';\nimport moment from 'moment';\n\nimport { setupAutogrow } from './messageBoxAutogrow';\nimport { formattingButtons, applyFormatting } from './messageBoxFormatting';\nimport { EmojiPicker } from '../../../emoji';\nimport { Users } from '../../../models';\nimport { settings } from '../../../settings';\nimport { fileUpload, KonchatNotification } from '../../../ui';\nimport { messageBox, popover } from '../../../ui-utils';\nimport { t, roomTypes, getUserPreference } from '../../../utils/client';\nimport './messageBoxActions';\nimport './messageBoxReplyPreview';\nimport './userActionIndicator.ts';\nimport './messageBoxAudioMessage';\nimport './messageBoxNotSubscribed';\nimport './messageBox.html';\nimport './messageBoxReadOnly';\nimport { getImageExtensionFromMime } from '../../../../lib/getImageExtensionFromMime';\nimport { keyCodes } from '../../../../client/lib/utils/keyCodes';\nimport { isRTL } from '../../../../client/lib/utils/isRTL';\nimport { call } from '../../../../client/lib/utils/call';\n\nTemplate.messageBox.onCreated(function () {\n\tthis.state = new ReactiveDict();\n\tthis.popupConfig = new ReactiveVar(null);\n\tthis.replyMessageData = new ReactiveVar();\n\tthis.isMicrophoneDenied = new ReactiveVar(true);\n\tthis.isSendIconVisible = new ReactiveVar(false);\n\n\tthis.set = (value) => {\n\t\tconst { input } = this;\n\t\tif (!input) {\n\t\t\treturn;\n\t\t}\n\n\t\tinput.value = value;\n\t\t$(input).trigger('change').trigger('input');\n\t};\n\n\tthis.insertNewLine = () => {\n\t\tconst { input, autogrow } = this;\n\t\tif (!input) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (document.selection) {\n\t\t\tinput.focus();\n\t\t\tconst sel = document.selection.createRange();\n\t\t\tsel.text = '\\n';\n\t\t} else if (input.selectionStart || input.selectionStart === 0) {\n\t\t\tconst newPosition = input.selectionStart + 1;\n\t\t\tconst before = input.value.substring(0, input.selectionStart);\n\t\t\tconst after = input.value.substring(input.selectionEnd, input.value.length);\n\t\t\tinput.value = `${before}\\n${after}`;\n\t\t\tinput.selectionStart = newPosition;\n\t\t\tinput.selectionEnd = newPosition;\n\t\t} else {\n\t\t\tinput.value += '\\n';\n\t\t}\n\t\t$(input).trigger('change').trigger('input');\n\n\t\tinput.blur();\n\t\tinput.focus();\n\t\tautogrow.update();\n\t};\n\n\tthis.send = (event) => {\n\t\tconst { input } = this;\n\n\t\tif (!input) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst {\n\t\t\tautogrow,\n\t\t\tdata: { rid, tmid, onSend, tshow },\n\t\t} = this;\n\t\tconst { value } = input;\n\t\tthis.set('');\n\n\t\tif (!onSend) {\n\t\t\treturn;\n\t\t}\n\n\t\tonSend.call(this.data, event, { rid, tmid, value, tshow }, () => {\n\t\t\tautogrow.update();\n\t\t\tinput.focus();\n\t\t});\n\t};\n});\n\nTemplate.messageBox.onRendered(function () {\n\tlet inputSetup = false;\n\n\tthis.autorun(() => {\n\t\tconst { rid, subscription } = Template.currentData();\n\t\tconst room = Session.get(`roomData${rid}`);\n\n\t\tif (!inputSetup) {\n\t\t\tconst $input = $(this.find('.js-input-message'));\n\t\t\tthis.source = $input[0];\n\t\t\tif (this.source) {\n\t\t\t\tinputSetup = true;\n\t\t\t}\n\t\t\t$input.on('dataChange', () => {\n\t\t\t\tconst messages = $input.data('reply') || [];\n\t\t\t\tthis.replyMessageData.set(messages);\n\t\t\t});\n\t\t}\n\n\t\tif (!room) {\n\t\t\treturn this.state.set({\n\t\t\t\troom: false,\n\t\t\t\tisBlockedOrBlocker: false,\n\t\t\t\tmustJoinWithCode: false,\n\t\t\t});\n\t\t}\n\n\t\tconst isBlocked = room && room.t === 'd' && subscription && subscription.blocked;\n\t\tconst isBlocker = room && room.t === 'd' && subscription && subscription.blocker;\n\t\tconst isBlockedOrBlocker = isBlocked || isBlocker;\n\n\t\tconst mustJoinWithCode = !subscription && room.joinCodeRequired;\n\n\t\treturn this.state.set({\n\t\t\troom: false,\n\t\t\tisBlockedOrBlocker,\n\t\t\tmustJoinWithCode,\n\t\t});\n\t});\n\n\tthis.autorun(() => {\n\t\tconst { rid, tmid, onInputChanged, onResize } = Template.currentData();\n\n\t\tTracker.afterFlush(() => {\n\t\t\tconst input = this.find('.js-input-message');\n\n\t\t\tif (this.input === input) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.input = input;\n\t\t\tonInputChanged && onInputChanged(input);\n\n\t\t\tif (input && rid) {\n\t\t\t\tthis.popupConfig.set({\n\t\t\t\t\trid,\n\t\t\t\t\ttmid,\n\t\t\t\t\tgetInput: () => input,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.popupConfig.set(null);\n\t\t\t}\n\n\t\t\tif (this.autogrow) {\n\t\t\t\tthis.autogrow.destroy();\n\t\t\t\tthis.autogrow = null;\n\t\t\t}\n\n\t\t\tif (!input) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst shadow = this.find('.js-input-message-shadow');\n\t\t\tthis.autogrow = setupAutogrow(input, shadow, onResize);\n\t\t});\n\t});\n});\n\nTemplate.messageBox.onDestroyed(function () {\n\tif (!this.autogrow) {\n\t\treturn;\n\t}\n\n\tthis.autogrow.destroy();\n});\n\nTemplate.messageBox.helpers({\n\tisAnonymousOrMustJoinWithCode() {\n\t\tconst instance = Template.instance();\n\t\tconst { rid } = Template.currentData();\n\t\tif (!rid) {\n\t\t\treturn false;\n\t\t}\n\t\tconst isAnonymous = !Meteor.userId();\n\t\treturn isAnonymous || instance.state.get('mustJoinWithCode');\n\t},\n\tisWritable() {\n\t\tconst { rid, subscription } = Template.currentData();\n\t\tif (!rid) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst isBlockedOrBlocker = Template.instance().state.get('isBlockedOrBlocker');\n\n\t\tif (isBlockedOrBlocker) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (subscription?.onHold) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst isReadOnly = roomTypes.readOnly(rid, Users.findOne({ _id: Meteor.userId() }, { fields: { username: 1 } }));\n\t\tconst isArchived = roomTypes.archived(rid) || (subscription && subscription.t === 'd' && subscription.archived);\n\n\t\treturn !isReadOnly && !isArchived;\n\t},\n\tpopupConfig() {\n\t\treturn Template.instance().popupConfig.get();\n\t},\n\tinput() {\n\t\treturn Template.instance().input;\n\t},\n\treplyMessageData() {\n\t\treturn Template.instance().replyMessageData.get();\n\t},\n\tisEmojiEnabled() {\n\t\treturn getUserPreference(Meteor.userId(), 'useEmojis');\n\t},\n\tmaxMessageLength() {\n\t\treturn settings.get('Message_AllowConvertLongMessagesToAttachment') ? null : settings.get('Message_MaxAllowedSize');\n\t},\n\tisSendIconVisible() {\n\t\treturn Template.instance().isSendIconVisible.get();\n\t},\n\tcanSend() {\n\t\tconst { rid } = Template.currentData();\n\t\tif (!rid) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn roomTypes.verifyCanSendMessage(rid);\n\t},\n\tactions() {\n\t\tconst actionGroups = messageBox.actions.get();\n\t\treturn Object.values(actionGroups).reduce((actions, actionGroup) => [...actions, ...actionGroup], []);\n\t},\n\tformattingButtons() {\n\t\treturn formattingButtons.filter(({ condition }) => !condition || condition());\n\t},\n\tisBlockedOrBlocker() {\n\t\treturn Template.instance().state.get('isBlockedOrBlocker');\n\t},\n\tonHold() {\n\t\tconst { rid, subscription } = Template.currentData();\n\t\treturn rid && !!subscription?.onHold;\n\t},\n\tisSubscribed() {\n\t\tconst { subscription } = Template.currentData();\n\t\treturn !!subscription;\n\t},\n});\n\nconst handleFormattingShortcut = (event, instance) => {\n\tconst isMacOS = navigator.platform.indexOf('Mac') !== -1;\n\tconst isCmdOrCtrlPressed = (isMacOS && event.metaKey) || (!isMacOS && event.ctrlKey);\n\n\tif (!isCmdOrCtrlPressed) {\n\t\treturn false;\n\t}\n\n\tconst key = event.key.toLowerCase();\n\n\tconst { pattern } = formattingButtons.filter(({ condition }) => !condition || condition()).find(({ command }) => command === key) || {};\n\n\tif (!pattern) {\n\t\treturn false;\n\t}\n\n\tconst { input } = instance;\n\tapplyFormatting(pattern, input);\n\treturn true;\n};\n\nlet sendOnEnter;\nlet sendOnEnterActive;\n\nTracker.autorun(() => {\n\tsendOnEnter = getUserPreference(Meteor.userId(), 'sendOnEnter');\n\tsendOnEnterActive = sendOnEnter == null || sendOnEnter === 'normal' || (sendOnEnter === 'desktop' && Meteor.Device.isDesktop());\n});\n\nconst handleSubmit = (event, instance) => {\n\tconst { which: keyCode } = event;\n\n\tconst isSubmitKey = keyCode === keyCodes.CARRIAGE_RETURN || keyCode === keyCodes.NEW_LINE;\n\n\tif (!isSubmitKey) {\n\t\treturn false;\n\t}\n\n\tconst withModifier = event.shiftKey || event.ctrlKey || event.altKey || event.metaKey;\n\tconst isSending = (sendOnEnterActive && !withModifier) || (!sendOnEnterActive && withModifier);\n\n\tif (isSending) {\n\t\tinstance.send(event);\n\t\treturn true;\n\t}\n\n\tinstance.insertNewLine();\n\treturn true;\n};\n\nTemplate.messageBox.events({\n\tasync 'click .js-join'(event) {\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\n\t\tconst joinCodeInput = Template.instance().find('[name=joinCode]');\n\t\tconst joinCode = joinCodeInput && joinCodeInput.value;\n\n\t\tawait call('joinRoom', this.rid, joinCode);\n\t},\n\t'click .js-emoji-picker'(event, instance) {\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\n\t\tif (!getUserPreference(Meteor.userId(), 'useEmojis')) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (EmojiPicker.isOpened()) {\n\t\t\tEmojiPicker.close();\n\t\t\treturn;\n\t\t}\n\n\t\tEmojiPicker.open(instance.source, (emoji) => {\n\t\t\tconst emojiValue = `:${emoji}: `;\n\n\t\t\tconst { input } = instance;\n\n\t\t\tconst caretPos = input.selectionStart;\n\t\t\tconst textAreaTxt = input.value;\n\n\t\t\tinput.focus();\n\t\t\tif (!document.execCommand || !document.execCommand('insertText', false, emojiValue)) {\n\t\t\t\tinstance.set(textAreaTxt.substring(0, caretPos) + emojiValue + textAreaTxt.substring(caretPos));\n\t\t\t\tinput.focus();\n\t\t\t}\n\n\t\t\tinput.selectionStart = caretPos + emojiValue.length;\n\t\t\tinput.selectionEnd = caretPos + emojiValue.length;\n\t\t});\n\t},\n\t'focus .js-input-message'() {\n\t\tKonchatNotification.removeRoomNotification(this.rid);\n\t},\n\t'keydown .js-input-message'(event, instance) {\n\t\tconst isEventHandled = handleFormattingShortcut(event, instance) || handleSubmit(event, instance);\n\n\t\tif (isEventHandled) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\treturn;\n\t\t}\n\n\t\tconst { rid, tmid, onKeyDown } = this;\n\t\tonKeyDown && onKeyDown.call(this, event, { rid, tmid });\n\t},\n\t'keyup .js-input-message'(event) {\n\t\tconst { rid, tmid, onKeyUp } = this;\n\t\tonKeyUp && onKeyUp.call(this, event, { rid, tmid });\n\t},\n\t'paste .js-input-message'(event, instance) {\n\t\tconst { rid, tmid } = this;\n\t\tconst { input, autogrow } = instance;\n\n\t\tsetTimeout(() => autogrow && autogrow.update(), 50);\n\n\t\tif (!event.originalEvent.clipboardData) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst items = [...event.originalEvent.clipboardData.items];\n\n\t\tif (items.some(({ kind, type }) => kind === 'string' && type === 'text/plain')) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst files = items\n\t\t\t.filter((item) => item.kind === 'file' && item.type.indexOf('image/') !== -1)\n\t\t\t.map((item) => {\n\t\t\t\tconst fileItem = item.getAsFile();\n\n\t\t\t\tconst imageExtension = getImageExtensionFromMime(fileItem.type);\n\n\t\t\t\tconst extension = imageExtension ? `.${imageExtension}` : '';\n\n\t\t\t\treturn {\n\t\t\t\t\tfile: fileItem,\n\t\t\t\t\tname: `Clipboard - ${moment().format(settings.get('Message_TimeAndDateFormat'))}${extension}`,\n\t\t\t\t};\n\t\t\t})\n\t\t\t.filter(({ file }) => file !== null);\n\n\t\tif (files.length) {\n\t\t\tevent.preventDefault();\n\t\t\tfileUpload(files, input, { rid, tmid });\n\t\t}\n\t},\n\t'input .js-input-message'(event, instance) {\n\t\tconst { input } = instance;\n\t\tif (!input) {\n\t\t\treturn;\n\t\t}\n\n\t\tinstance.isSendIconVisible.set(!!input.value);\n\n\t\tif (input.value.length > 0) {\n\t\t\tinput.dir = isRTL(input.value) ? 'rtl' : 'ltr';\n\t\t}\n\n\t\tconst { rid, tmid, onValueChanged } = this;\n\t\tonValueChanged && onValueChanged.call(this, event, { rid, tmid });\n\t},\n\t'propertychange .js-input-message'(event, instance) {\n\t\tif (event.originalEvent.propertyName !== 'value') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { input } = instance;\n\t\tif (!input) {\n\t\t\treturn;\n\t\t}\n\n\t\tinstance.sendIconDisabled.set(!!input.value);\n\n\t\tif (input.value.length > 0) {\n\t\t\tinput.dir = isRTL(input.value) ? 'rtl' : 'ltr';\n\t\t}\n\n\t\tconst { rid, tmid, onValueChanged } = this;\n\t\tonValueChanged && onValueChanged.call(this, event, { rid, tmid });\n\t},\n\tasync 'click .js-send'(event, instance) {\n\t\tinstance.send(event);\n\t},\n\t'click .js-action-menu'(event, instance) {\n\t\tconst groups = messageBox.actions.get();\n\t\tconst config = {\n\t\t\tpopoverClass: 'message-box',\n\t\t\tcolumns: [\n\t\t\t\t{\n\t\t\t\t\tgroups: Object.keys(groups).map((group) => {\n\t\t\t\t\t\tconst items = [];\n\t\t\t\t\t\tgroups[group].forEach((item) => {\n\t\t\t\t\t\t\titems.push({\n\t\t\t\t\t\t\t\ticon: item.icon,\n\t\t\t\t\t\t\t\tname: t(item.label),\n\t\t\t\t\t\t\t\ttype: 'messagebox-action',\n\t\t\t\t\t\t\t\tid: item.id,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttitle: t(group),\n\t\t\t\t\t\t\titems,\n\t\t\t\t\t\t};\n\t\t\t\t\t}),\n\t\t\t\t},\n\t\t\t],\n\t\t\toffsetVertical: 10,\n\t\t\tdirection: 'top-inverted',\n\t\t\tcurrentTarget: event.currentTarget.firstElementChild.firstElementChild,\n\t\t\tdata: {\n\t\t\t\trid: this.rid,\n\t\t\t\ttmid: this.tmid,\n\t\t\t\tprid: this.subscription.prid,\n\t\t\t\tmessageBox: instance.firstNode,\n\t\t\t},\n\t\t\tactiveElement: event.currentTarget,\n\t\t};\n\n\t\tpopover.open(config);\n\t},\n\t'click .js-message-actions .js-message-action'(event, instance) {\n\t\tconst { id } = event.currentTarget.dataset;\n\t\tconst actions = messageBox.actions.getById(id);\n\t\tactions\n\t\t\t.filter(({ action }) => !!action)\n\t\t\t.forEach(({ action }) => {\n\t\t\t\taction.call(null, {\n\t\t\t\t\trid: this.rid,\n\t\t\t\t\ttmid: this.tmid,\n\t\t\t\t\tmessageBox: instance.firstNode,\n\t\t\t\t\tprid: this.subscription.prid,\n\t\t\t\t\tevent,\n\t\t\t\t});\n\t\t\t});\n\t},\n\t'click .js-format'(event, instance) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconst { id } = event.currentTarget.dataset;\n\t\tconst { pattern } = formattingButtons.filter(({ condition }) => !condition || condition()).find(({ label }) => label === id) || {};\n\n\t\tif (!pattern) {\n\t\t\treturn;\n\t\t}\n\n\t\tapplyFormatting(pattern, instance.input);\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Random } from 'meteor/random';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\n\nimport { VRecDialog } from '../../../ui-vrecord/client';\nimport { messageBox, modal } from '../../../ui-utils';\nimport { fileUpload } from '../../../ui';\nimport { settings } from '../../../settings';\nimport { t } from '../../../utils';\n\nmessageBox.actions.add('Create_new', 'Video_message', {\n\tid: 'video-message',\n\ticon: 'video',\n\tcondition: () =>\n\t\t(navigator.mediaDevices ||\n\t\t\tnavigator.getUserMedia ||\n\t\t\tnavigator.webkitGetUserMedia ||\n\t\t\tnavigator.mozGetUserMedia ||\n\t\t\tnavigator.msGetUserMedia) &&\n\t\twindow.MediaRecorder &&\n\t\tsettings.get('FileUpload_Enabled') &&\n\t\tsettings.get('Message_VideoRecorderEnabled') &&\n\t\t(!settings.get('FileUpload_MediaTypeBlackList') || !settings.get('FileUpload_MediaTypeBlackList').match(/video\\/webm|video\\/\\*/i)) &&\n\t\t(!settings.get('FileUpload_MediaTypeWhiteList') || settings.get('FileUpload_MediaTypeWhiteList').match(/video\\/webm|video\\/\\*/i)),\n\taction: ({ rid, tmid, messageBox }) => (VRecDialog.opened ? VRecDialog.close() : VRecDialog.open(messageBox, { rid, tmid })),\n});\n\nmessageBox.actions.add('Add_files_from', 'Computer', {\n\tid: 'file-upload',\n\ticon: 'computer',\n\tcondition: () => settings.get('FileUpload_Enabled'),\n\taction({ rid, tmid, event, messageBox }) {\n\t\tevent.preventDefault();\n\t\tconst $input = $(document.createElement('input'));\n\t\t$input.css('display', 'none');\n\t\t$input.attr({\n\t\t\tid: 'fileupload-input',\n\t\t\ttype: 'file',\n\t\t\tmultiple: 'multiple',\n\t\t});\n\n\t\t$(document.body).append($input);\n\n\t\t$input.one('change', async function (e) {\n\t\t\tconst { mime } = await import('../../../utils/lib/mimeTypes');\n\t\t\tconst filesToUpload = [...e.target.files].map((file) => {\n\t\t\t\tObject.defineProperty(file, 'type', {\n\t\t\t\t\tvalue: mime.lookup(file.name),\n\t\t\t\t});\n\t\t\t\treturn {\n\t\t\t\t\tfile,\n\t\t\t\t\tname: file.name,\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tfileUpload(filesToUpload, $('.js-input-message', messageBox).get(0), { rid, tmid });\n\t\t\t$input.remove();\n\t\t});\n\n\t\t$input.click();\n\n\t\t// Simple hack for iOS aka codegueira\n\t\tif (navigator.userAgent.match(/(iPad|iPhone|iPod)/g)) {\n\t\t\t$input.click();\n\t\t}\n\t},\n});\n\nconst canGetGeolocation = new ReactiveVar(false);\n\nconst getGeolocationPermission = () =>\n\tnew Promise((resolve) => {\n\t\tif (!navigator.permissions) {\n\t\t\tresolve(true);\n\t\t}\n\t\tnavigator.permissions.query({ name: 'geolocation' }).then(({ state }) => {\n\t\t\tresolve(state);\n\t\t});\n\t});\n\nconst getGeolocationPosition = () =>\n\tnew Promise((resolvePos) => {\n\t\tnavigator.geolocation.getCurrentPosition(\n\t\t\tresolvePos,\n\t\t\t() => {\n\t\t\t\tresolvePos(false);\n\t\t\t},\n\t\t\t{\n\t\t\t\tenableHighAccuracy: true,\n\t\t\t\tmaximumAge: 0,\n\t\t\t\ttimeout: 10000,\n\t\t\t},\n\t\t);\n\t});\n\nconst getCoordinates = async () => {\n\tconst status = await getGeolocationPermission();\n\tif (status === 'prompt') {\n\t\tlet resolveModal;\n\t\tconst modalAnswer = new Promise((resolve) => {\n\t\t\tresolveModal = resolve;\n\t\t});\n\t\tmodal.open(\n\t\t\t{\n\t\t\t\ttitle: t('You_will_be_asked_for_permissions'),\n\t\t\t\tconfirmButtonText: t('Continue'),\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tcloseOnConfirm: true,\n\t\t\t\tcloseOnCancel: true,\n\t\t\t},\n\t\t\tasync (isConfirm) => {\n\t\t\t\tif (!isConfirm) {\n\t\t\t\t\tresolveModal(false);\n\t\t\t\t}\n\t\t\t\tconst position = await getGeolocationPosition();\n\t\t\t\tif (!position) {\n\t\t\t\t\tconst newStatus = getGeolocationPermission();\n\t\t\t\t\tresolveModal(newStatus);\n\t\t\t\t}\n\t\t\t\tresolveModal(position);\n\t\t\t},\n\t\t);\n\t\tconst position = await modalAnswer;\n\t\treturn position;\n\t}\n\n\tif (status === 'denied') {\n\t\treturn status;\n\t}\n\n\tconst position = await getGeolocationPosition();\n\treturn position;\n};\n\nmessageBox.actions.add('Share', 'My_location', {\n\tid: 'share-location',\n\ticon: 'map-pin',\n\tcondition: () => canGetGeolocation.get(),\n\tasync action({ rid, tmid }) {\n\t\tconst position = await getCoordinates();\n\n\t\tif (!position) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (position === 'denied') {\n\t\t\tmodal.open({\n\t\t\t\ttitle: t('Cannot_share_your_location'),\n\t\t\t\ttext: t('The_necessary_browser_permissions_for_location_sharing_are_not_granted'),\n\t\t\t\tconfirmButtonText: t('Ok'),\n\t\t\t\tcloseOnConfirm: true,\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tconst {\n\t\t\tcoords: { latitude, longitude },\n\t\t} = position;\n\t\tconst text = `<div class=\"upload-preview\"><div class=\"upload-preview-file\" style=\"background-size: cover; box-shadow: 0 0 0px 1px #dfdfdf; border-radius: 2px; height: 250px; width:100%; max-width: 500px; background-image:url(https://maps.googleapis.com/maps/api/staticmap?zoom=14&size=500x250&markers=color:gray%7Clabel:%7C${latitude},${longitude}&key=${settings.get(\n\t\t\t'MapView_GMapsAPIKey',\n\t\t)})\" ></div></div>`;\n\n\t\tmodal.open(\n\t\t\t{\n\t\t\t\ttitle: t('Share_Location_Title'),\n\t\t\t\ttext,\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tcloseOnConfirm: true,\n\t\t\t\tcloseOnCancel: true,\n\t\t\t\thtml: true,\n\t\t\t},\n\t\t\tfunction (isConfirm) {\n\t\t\t\tif (isConfirm !== true) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tMeteor.call('sendMessage', {\n\t\t\t\t\t_id: Random.id(),\n\t\t\t\t\trid,\n\t\t\t\t\ttmid,\n\t\t\t\t\tmsg: '',\n\t\t\t\t\tlocation: {\n\t\t\t\t\t\ttype: 'Point',\n\t\t\t\t\t\tcoordinates: [longitude, latitude],\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t},\n\t\t);\n\t},\n});\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst isMapViewEnabled = settings.get('MapView_Enabled') === true;\n\t\tconst isGeolocationCurrentPositionSupported = navigator.geolocation && navigator.geolocation.getCurrentPosition;\n\t\tconst googleMapsApiKey = settings.get('MapView_GMapsAPIKey');\n\t\tcanGetGeolocation.set(isMapViewEnabled && isGeolocationCurrentPositionSupported && googleMapsApiKey && googleMapsApiKey.length);\n\t});\n});\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nimport { settings } from '../../../settings';\nimport { AudioRecorder, fileUpload, USER_ACTIVITIES, UserAction } from '../../../ui';\nimport { t } from '../../../utils';\nimport './messageBoxAudioMessage.html';\n\nconst startRecording = async (rid, tmid) => {\n\ttry {\n\t\tawait AudioRecorder.start();\n\t\tUserAction.performContinuously(rid, USER_ACTIVITIES.USER_RECORDING, { tmid });\n\t} catch (error) {\n\t\tthrow error;\n\t}\n};\n\nconst stopRecording = async (rid, tmid) => {\n\tconst result = await new Promise((resolve) => AudioRecorder.stop(resolve));\n\tUserAction.stop(rid, USER_ACTIVITIES.USER_RECORDING, { tmid });\n\treturn result;\n};\n\nconst recordingInterval = new ReactiveVar(null);\nconst recordingRoomId = new ReactiveVar(null);\n\nconst clearIntervalVariables = () => {\n\tif (recordingInterval.get()) {\n\t\tclearInterval(recordingInterval.get());\n\t\trecordingInterval.set(null);\n\t\trecordingRoomId.set(null);\n\t}\n};\n\nconst cancelRecording = async (instance, rid, tmid) => {\n\tclearIntervalVariables();\n\n\tinstance.time.set('00:00');\n\n\tconst blob = await stopRecording(rid, tmid);\n\n\tinstance.state.set(null);\n\n\treturn blob;\n};\n\nTemplate.messageBoxAudioMessage.onCreated(async function () {\n\tthis.state = new ReactiveVar(null);\n\tthis.time = new ReactiveVar('00:00');\n\tthis.isMicrophoneDenied = new ReactiveVar(false);\n\n\tif (navigator.permissions) {\n\t\ttry {\n\t\t\tconst permissionStatus = await navigator.permissions.query({ name: 'microphone' });\n\t\t\tthis.isMicrophoneDenied.set(permissionStatus.state === 'denied');\n\t\t\tpermissionStatus.onchange = () => {\n\t\t\t\tthis.isMicrophoneDenied.set(permissionStatus.state === 'denied');\n\t\t\t};\n\t\t\treturn;\n\t\t} catch (error) {\n\t\t\tconsole.warn(error);\n\t\t}\n\t}\n\n\tif (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\n\t\tthis.isMicrophoneDenied.set(true);\n\t\treturn;\n\t}\n\n\ttry {\n\t\tif (!(await navigator.mediaDevices.enumerateDevices()).some(({ kind }) => kind === 'audioinput')) {\n\t\t\tthis.isMicrophoneDenied.set(true);\n\t\t\treturn;\n\t\t}\n\t} catch (error) {\n\t\tconsole.warn(error);\n\t}\n});\n\nTemplate.messageBoxAudioMessage.onDestroyed(async function () {\n\tif (this.state.get() === 'recording') {\n\t\tconst { rid, tmid } = this.data;\n\t\tawait cancelRecording(this, rid, tmid);\n\t}\n});\n\nTemplate.messageBoxAudioMessage.helpers({\n\tisAllowed() {\n\t\treturn (\n\t\t\tAudioRecorder.isSupported() &&\n\t\t\t!Template.instance().isMicrophoneDenied.get() &&\n\t\t\tsettings.get('FileUpload_Enabled') &&\n\t\t\tsettings.get('Message_AudioRecorderEnabled') &&\n\t\t\t(!settings.get('FileUpload_MediaTypeBlackList') || !settings.get('FileUpload_MediaTypeBlackList').match(/audio\\/mp3|audio\\/\\*/i)) &&\n\t\t\t(!settings.get('FileUpload_MediaTypeWhiteList') || settings.get('FileUpload_MediaTypeWhiteList').match(/audio\\/mp3|audio\\/\\*/i))\n\t\t);\n\t},\n\n\tstateClass() {\n\t\tif (recordingRoomId.get() && recordingRoomId.get() !== Template.currentData().rid) {\n\t\t\treturn 'rc-message-box__audio-message--busy';\n\t\t}\n\n\t\tconst state = Template.instance().state.get();\n\t\treturn state && `rc-message-box__audio-message--${state}`;\n\t},\n\n\ttime() {\n\t\treturn Template.instance().time.get();\n\t},\n});\n\nTemplate.messageBoxAudioMessage.events({\n\tasync 'click .js-audio-message-record'(event, instance) {\n\t\tevent.preventDefault();\n\n\t\tif (recordingRoomId.get() && recordingRoomId.get() !== this.rid) {\n\t\t\treturn;\n\t\t}\n\n\t\tinstance.state.set('recording');\n\n\t\ttry {\n\t\t\tawait startRecording(this.rid, this.tmid);\n\t\t\tconst startTime = new Date();\n\t\t\trecordingInterval.set(\n\t\t\t\tsetInterval(() => {\n\t\t\t\t\tconst now = new Date();\n\t\t\t\t\tconst distance = (now.getTime() - startTime.getTime()) / 1000;\n\t\t\t\t\tconst minutes = Math.floor(distance / 60);\n\t\t\t\t\tconst seconds = Math.floor(distance % 60);\n\t\t\t\t\tinstance.time.set(`${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`);\n\t\t\t\t}, 1000),\n\t\t\t);\n\t\t\trecordingRoomId.set(this.rid);\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t\tinstance.isMicrophoneDenied.set(true);\n\t\t\tinstance.state.set(null);\n\t\t}\n\t},\n\n\tasync 'click .js-audio-message-cancel'(event, instance) {\n\t\tevent.preventDefault();\n\n\t\tawait cancelRecording(instance, this.rid, this.tmid);\n\t},\n\n\tasync 'click .js-audio-message-done'(event, instance) {\n\t\tevent.preventDefault();\n\n\t\tinstance.state.set('loading');\n\n\t\tconst { rid, tmid } = this;\n\t\tconst blob = await cancelRecording(instance, rid, tmid);\n\n\t\tawait fileUpload([{ file: blob, type: 'video', name: `${t('Audio record')}.mp3` }], { input: blob }, { rid, tmid });\n\t},\n});\n","import _ from 'underscore';\n\nconst replaceWhitespaces = (whitespaces) => `${'&nbsp;'.repeat(whitespaces.length - 1)} `;\n\nexport const setupAutogrow = (textarea, shadow, callback) => {\n\tconst width = textarea.clientWidth;\n\tconst height = textarea.clientHeight;\n\tconst { font, lineHeight, maxHeight: maxHeightPx } = window.getComputedStyle(textarea);\n\n\tshadow.style.position = 'fixed';\n\tshadow.style.top = '-10000px';\n\tshadow.style.left = '-10000px';\n\tshadow.style.width = `${width}px`;\n\tshadow.style.font = font;\n\tshadow.style.lineHeight = lineHeight;\n\tshadow.style.resize = 'none';\n\tshadow.style.wordWrap = 'break-word';\n\n\tconst minHeight = height;\n\tconst maxHeight = parseInt(maxHeightPx, 10);\n\n\tlet lastWidth = width;\n\tlet lastHeight = minHeight;\n\tlet textLenght = 0;\n\n\tconst update = () => {\n\t\tconst { clientWidth: width, value: text } = textarea;\n\n\t\tconst isMaximumHeightReached = lastHeight >= maxHeight;\n\t\tconst isTextLengthOutdated = textLenght && textLenght < text.length;\n\t\tconst wasWidthChanged = width !== lastWidth;\n\n\t\tif (isMaximumHeightReached && isTextLengthOutdated && !wasWidthChanged) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst shadowText = text\n\t\t\t.replace(/&/g, '&amp;')\n\t\t\t.replace(/</g, '&lt;')\n\t\t\t.replace(/>/g, '&gt;')\n\t\t\t.replace(/\\n$/, '<br/>&nbsp;')\n\t\t\t.replace(/\\n/g, '<br/>')\n\t\t\t.replace(/ {2,}/g, replaceWhitespaces);\n\t\tif (wasWidthChanged) {\n\t\t\tshadow.style.width = `${width}px`;\n\t\t\tlastWidth = width;\n\t\t}\n\n\t\tshadow.innerHTML = shadowText;\n\n\t\tconst shadowHeight = Math.max(shadow.clientHeight + 1, minHeight) + 1;\n\t\tconst height = Math.min(shadowHeight, maxHeight);\n\n\t\tif (height === lastHeight) {\n\t\t\treturn true;\n\t\t}\n\n\t\tlastHeight = height;\n\n\t\tconst overflow = height < maxHeight ? 'hidden' : '';\n\n\t\tif (height < maxHeight) {\n\t\t\ttextLenght = text.length;\n\t\t}\n\n\t\ttextarea.style.overflow = overflow;\n\t\ttextarea.style.height = `${height}px`;\n\n\t\tcallback && callback();\n\t};\n\n\tconst updateThrottled = _.throttle(update, 300);\n\n\tconst $textarea = $(textarea);\n\t$textarea.on('focus', update);\n\t$textarea.on('change input', updateThrottled);\n\twindow.addEventListener('resize', updateThrottled, false);\n\n\tconst destroy = () => {\n\t\t$textarea.off('focus', update);\n\t\t$textarea.off('change input', updateThrottled);\n\t\twindow.removeEventListener('resize', updateThrottled);\n\t};\n\n\tupdate();\n\n\treturn {\n\t\tupdate,\n\t\tdestroy,\n\t};\n};\n","import { Markdown } from '../../../markdown/client';\nimport { settings } from '../../../settings';\n\nexport const formattingButtons = [\n\t{\n\t\tlabel: 'bold',\n\t\ticon: 'bold',\n\t\tpattern: '*{{text}}*',\n\t\tcommand: 'b',\n\t\tcondition: () => Markdown && settings.get('Markdown_Parser') === 'original',\n\t},\n\t{\n\t\tlabel: 'bold',\n\t\ticon: 'bold',\n\t\tpattern: '**{{text}}**',\n\t\tcommand: 'b',\n\t\tcondition: () => Markdown && settings.get('Markdown_Parser') === 'marked',\n\t},\n\t{\n\t\tlabel: 'italic',\n\t\ticon: 'italic',\n\t\tpattern: '_{{text}}_',\n\t\tcommand: 'i',\n\t\tcondition: () => Markdown && settings.get('Markdown_Parser') !== 'disabled',\n\t},\n\t{\n\t\tlabel: 'strike',\n\t\ticon: 'strike',\n\t\tpattern: '~{{text}}~',\n\t\tcondition: () => Markdown && settings.get('Markdown_Parser') === 'original',\n\t},\n\t{\n\t\tlabel: 'strike',\n\t\ticon: 'strike',\n\t\tpattern: '~~{{text}}~~',\n\t\tcondition: () => Markdown && settings.get('Markdown_Parser') === 'marked',\n\t},\n\t{\n\t\tlabel: 'inline_code',\n\t\ticon: 'code',\n\t\tpattern: '`{{text}}`',\n\t\tcondition: () => Markdown && settings.get('Markdown_Parser') !== 'disabled',\n\t},\n\t{\n\t\tlabel: 'multi_line',\n\t\ticon: 'multiline',\n\t\tpattern: '```\\n{{text}}\\n``` ',\n\t\tcondition: () => Markdown && settings.get('Markdown_Parser') !== 'disabled',\n\t},\n\t{\n\t\tlabel: 'KaTeX',\n\t\ttext: () => {\n\t\t\tif (!settings.get('Katex_Enabled')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (settings.get('Katex_Dollar_Syntax')) {\n\t\t\t\treturn '$$KaTeX$$';\n\t\t\t}\n\t\t\tif (settings.get('Katex_Parenthesis_Syntax')) {\n\t\t\t\treturn '\\\\[KaTeX\\\\]';\n\t\t\t}\n\t\t},\n\t\tlink: 'https://khan.github.io/KaTeX/function-support.html',\n\t\tcondition: () => settings.get('Katex_Enabled'),\n\t},\n];\n\nexport function applyFormatting(pattern, input) {\n\tconst { selectionEnd = input.value.length, selectionStart = 0 } = input;\n\tconst initText = input.value.slice(0, selectionStart);\n\tconst selectedText = input.value.slice(selectionStart, selectionEnd);\n\tconst finalText = input.value.slice(selectionEnd, input.value.length);\n\n\tinput.focus();\n\n\tconst startPattern = pattern.substr(0, pattern.indexOf('{{text}}'));\n\tconst startPatternFound = [...startPattern].reverse().every((char, index) => input.value.substr(selectionStart - index - 1, 1) === char);\n\n\tif (startPatternFound) {\n\t\tconst endPattern = pattern.substr(pattern.indexOf('{{text}}') + '{{text}}'.length);\n\t\tconst endPatternFound = [...endPattern].every((char, index) => input.value.substr(selectionEnd + index, 1) === char);\n\n\t\tif (endPatternFound) {\n\t\t\tinput.selectionStart = selectionStart - startPattern.length;\n\t\t\tinput.selectionEnd = selectionEnd + endPattern.length;\n\n\t\t\tif (!document.execCommand || !document.execCommand('insertText', false, selectedText)) {\n\t\t\t\tinput.value = initText.substr(0, initText.length - startPattern.length) + selectedText + finalText.substr(endPattern.length);\n\t\t\t}\n\n\t\t\tinput.selectionStart = selectionStart - startPattern.length;\n\t\t\tinput.selectionEnd = input.selectionStart + selectedText.length;\n\t\t\t$(input).change();\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (!document.execCommand || !document.execCommand('insertText', false, pattern.replace('{{text}}', selectedText))) {\n\t\tinput.value = initText + pattern.replace('{{text}}', selectedText) + finalText;\n\t}\n\n\tinput.selectionStart = selectionStart + pattern.indexOf('{{text}}');\n\tinput.selectionEnd = input.selectionStart + selectedText.length;\n\t$(input).change();\n}\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\n\nimport { settings } from '../../../settings/client';\nimport { RoomManager, RoomHistoryManager } from '../../../ui-utils/client';\nimport { roomTypes } from '../../../utils/client';\nimport { hasAllPermission } from '../../../authorization/client';\nimport './messageBoxNotSubscribed.html';\nimport { call } from '../../../../client/lib/utils/call';\n\nTemplate.messageBoxNotSubscribed.helpers({\n\tcustomTemplate() {\n\t\treturn roomTypes.getNotSubscribedTpl(this.rid);\n\t},\n\tcanJoinRoom() {\n\t\treturn Meteor.userId() && roomTypes.verifyShowJoinLink(this.rid);\n\t},\n\troomName() {\n\t\tconst room = Session.get(`roomData${this.rid}`);\n\t\treturn roomTypes.getRoomName(room.t, room);\n\t},\n\tisJoinCodeRequired() {\n\t\tconst room = Session.get(`roomData${this.rid}`);\n\t\treturn room && room.joinCodeRequired;\n\t},\n\tisAnonymousReadAllowed() {\n\t\treturn Meteor.userId() == null && settings.get('Accounts_AllowAnonymousRead') === true;\n\t},\n\tisAnonymousWriteAllowed() {\n\t\treturn (\n\t\t\tMeteor.userId() == null &&\n\t\t\tsettings.get('Accounts_AllowAnonymousRead') === true &&\n\t\t\tsettings.get('Accounts_AllowAnonymousWrite') === true\n\t\t);\n\t},\n});\n\nTemplate.messageBoxNotSubscribed.events({\n\tasync 'click .js-join-code'(event) {\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\n\t\tconst joinCodeInput = Template.instance().find('[name=joinCode]');\n\t\tconst joinCode = joinCodeInput && joinCodeInput.value;\n\n\t\tawait call('joinRoom', this.rid, joinCode);\n\n\t\tif (hasAllPermission('preview-c-room') === false && RoomHistoryManager.getRoom(this.rid).loaded === 0) {\n\t\t\tRoomManager.getOpenedRoomByRid(this.rid).streamActive = false;\n\t\t\tRoomManager.getOpenedRoomByRid(this.rid).ready = false;\n\t\t\tRoomHistoryManager.getRoom(this.rid).loaded = null;\n\t\t\tRoomManager.computation.invalidate();\n\t\t}\n\t},\n\t'click .js-register'(event) {\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\n\t\tSession.set('forceLogin', true);\n\t},\n\tasync 'click .js-register-anonymous'(event) {\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\n\t\tconst { token } = await call('registerUser', {});\n\t\tMeteor.loginWithToken(token);\n\t},\n});\n","import { Template } from 'meteor/templating';\n\nimport { roomTypes } from '../../../utils';\nimport './messageBoxReadOnly.html';\n\nTemplate.messageBoxReadOnly.helpers({\n\tcustomTemplate() {\n\t\treturn roomTypes.getReadOnlyTpl(this.rid);\n\t},\n});\n","import { Template } from 'meteor/templating';\nimport './messageBoxReplyPreview.html';\n\nTemplate.messageBoxReplyPreview.helpers({\n\tattachments() {\n\t\tconst { replyMessageData } = this;\n\t\treturn [{ text: replyMessageData.msg, author_name: replyMessageData.u.username }];\n\t},\n});\n\nTemplate.messageBoxReplyPreview.events({\n\t'click .cancel-reply'(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconst { mid } = event.currentTarget.dataset;\n\t\tconst $input = $(this.input);\n\n\t\tthis.input.focus();\n\t\tconst messages = $input.data('reply') || [];\n\t\tconst filtered = messages.filter(({ _id }) => _id !== mid);\n\n\t\t$input.data('reply', filtered).trigger('dataChange');\n\t},\n});\n","import { Template } from 'meteor/templating';\n\nimport { UserAction } from '../../../ui';\nimport { t } from '../../../utils/client';\nimport { getConfig } from '../../../../client/lib/utils/getConfig';\n\nimport './userActionIndicator.html';\n\nconst maxUsernames = parseInt(getConfig('max-usernames-typing') || '2');\n\nTemplate.userActionIndicator.helpers({\n\tdata() {\n\t\tconst roomAction = UserAction.get(this.tmid || this.rid) || {};\n\t\tif (!Object.keys(roomAction).length) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst activities = Object.entries(roomAction);\n\t\tconst userActions = activities\n\t\t\t.map(([key, _users]) => {\n\t\t\t\tconst users = Object.keys(_users);\n\t\t\t\tif (users.length === 0) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tend: false,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tconst action = key.split('-')[1];\n\t\t\t\tif (users.length === 1) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\taction,\n\t\t\t\t\t\tmulti: false,\n\t\t\t\t\t\tusers: users[0],\n\t\t\t\t\t\tend: false,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tlet last = users.pop();\n\t\t\t\tif (users.length >= maxUsernames) {\n\t\t\t\t\tlast = t('others');\n\t\t\t\t}\n\n\t\t\t\tconst usernames = [users.slice(0, maxUsernames - 1).join(', '), last];\n\t\t\t\treturn {\n\t\t\t\t\taction,\n\t\t\t\t\tmulti: true,\n\t\t\t\t\tusers: usernames.join(` ${t('and')} `),\n\t\t\t\t\tend: false,\n\t\t\t\t};\n\t\t\t})\n\t\t\t.filter((i) => i.action);\n\n\t\tif (!Object.keys(userActions).length) {\n\t\t\treturn [];\n\t\t}\n\n\t\t// insert end=true for the last item.\n\t\tuserActions[userActions.length - 1].end = true;\n\t\treturn userActions;\n\t},\n});\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\n\nexport const customMessagePopups = new ReactiveVar([]);\n\nconst nonReactiveGetFunc = () => Tracker.nonreactive(() => customMessagePopups.get());\n\nexport const addMessagePopup = (configGetter, name) => {\n\tcustomMessagePopups.set([\n\t\t...nonReactiveGetFunc(),\n\t\t{\n\t\t\tconfigGetter,\n\t\t\tname,\n\t\t},\n\t]);\n};\n\nexport const removeMessagePopup = (popupName) => {\n\tconst customMessagePopupsList = nonReactiveGetFunc();\n\tconst element = customMessagePopupsList.findIndex(({ name }) => name === popupName);\n\tif (element < 0) {\n\t\treturn;\n\t}\n\tconst listWithRemovedElement = [\n\t\t...customMessagePopupsList.slice(0, element),\n\t\t...customMessagePopupsList.slice(element + 1, customMessagePopupsList.length),\n\t];\n\tcustomMessagePopups.set([...listWithRemovedElement]);\n};\n","// This is not supposed to be a complete list\n// it is just to improve readability in this file\n\nimport _ from 'underscore';\nimport { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nimport './messagePopup.html';\n\nconst keys = {\n\tTAB: 9,\n\tENTER: 13,\n\tESC: 27,\n\tARROW_LEFT: 37,\n\tARROW_UP: 38,\n\tARROW_RIGHT: 39,\n\tARROW_DOWN: 40,\n};\n\nfunction getCursorPosition(input) {\n\tif (input == null) {\n\t\treturn;\n\t}\n\tif (input.selectionStart != null) {\n\t\treturn input.selectionStart;\n\t}\n\tif (document.selection != null) {\n\t\tinput.focus();\n\t\tconst sel = document.selection.createRange();\n\t\tconst selLen = document.selection.createRange().text.length;\n\t\tsel.moveStart('character', -input.value.length);\n\t\treturn sel.text.length - selLen;\n\t}\n}\n\nfunction setCursorPosition(input, caretPos) {\n\tif (input == null) {\n\t\treturn;\n\t}\n\tif (input.selectionStart != null) {\n\t\tinput.focus();\n\t\treturn input.setSelectionRange(caretPos, caretPos);\n\t}\n\tif (document.selection != null) {\n\t\tconst range = input.createTextRange();\n\t\trange.move('character', caretPos);\n\t\treturn range.select();\n\t}\n}\n\nfunction val(v, d) {\n\tif (v != null) {\n\t\treturn v;\n\t}\n\treturn d;\n}\n\nTemplate.messagePopup.onCreated(function () {\n\tconst template = this;\n\ttemplate.textFilter = new ReactiveVar('');\n\ttemplate.textFilterDelay = val(template.data.textFilterDelay, 0);\n\ttemplate.open = val(template.data.open, new ReactiveVar(false));\n\ttemplate.hasData = new ReactiveVar(false);\n\ttemplate.value = new ReactiveVar();\n\ttemplate.trigger = val(template.data.trigger, '');\n\ttemplate.triggerAnywhere = val(template.data.triggerAnywhere, true);\n\ttemplate.closeOnEsc = val(template.data.closeOnEsc, true);\n\ttemplate.blurOnSelectItem = val(template.data.blurOnSelectItem, false);\n\ttemplate.prefix = val(template.data.prefix, template.trigger);\n\ttemplate.suffix = val(template.data.suffix, '');\n\tif (template.triggerAnywhere === true) {\n\t\ttemplate.matchSelectorRegex = val(template.data.matchSelectorRegex, new RegExp(`(?:^| |\\n)${template.trigger}[^\\\\s]*$`));\n\t} else {\n\t\ttemplate.matchSelectorRegex = val(template.data.matchSelectorRegex, new RegExp(`(?:^)${template.trigger}[^\\\\s]*$`));\n\t}\n\ttemplate.selectorRegex = val(template.data.selectorRegex, new RegExp(`${template.trigger}([^\\\\s]*)$`));\n\ttemplate.replaceRegex = val(template.data.replaceRegex, new RegExp(`${template.trigger}[^\\\\s]*$`));\n\ttemplate.getValue = val(template.data.getValue, function (_id) {\n\t\treturn _id;\n\t});\n\ttemplate.up = () => {\n\t\tconst current = template.find('.popup-item.selected');\n\t\tconst previous = $(current).prev('.popup-item')[0] || template.find('.popup-item:last-child');\n\t\tif (previous != null) {\n\t\t\tcurrent.className = current.className.replace(/\\sselected/, '').replace('sidebar-item__popup-active', '');\n\t\t\tprevious.className += ' selected sidebar-item__popup-active';\n\t\t\tprevious.scrollIntoView(false);\n\t\t\treturn template.value.set(previous.getAttribute('data-id'));\n\t\t}\n\t};\n\ttemplate.down = () => {\n\t\tconst current = template.find('.popup-item.selected');\n\t\tconst next = $(current).next('.popup-item')[0] || template.find('.popup-item');\n\t\tif (next && next.classList.contains('popup-item')) {\n\t\t\tcurrent.className = current.className.replace(/\\sselected/, '').replace('sidebar-item__popup-active', '');\n\t\t\tnext.className += ' selected sidebar-item__popup-active';\n\t\t\tnext.scrollIntoView(false);\n\t\t\treturn template.value.set(next.getAttribute('data-id'));\n\t\t}\n\t};\n\ttemplate.verifySelection = () => {\n\t\tif (!template.open.curValue) {\n\t\t\treturn;\n\t\t}\n\t\tconst current = template.find('.popup-item.selected');\n\t\tif (current == null) {\n\t\t\tconst first = template.find('.popup-item');\n\t\t\tif (first != null) {\n\t\t\t\tfirst.className += ' selected sidebar-item__popup-active';\n\t\t\t\treturn template.value.set(first.getAttribute('data-id'));\n\t\t\t}\n\t\t\treturn template.value.set(null);\n\t\t}\n\t};\n\ttemplate.onInputKeydown = (event) => {\n\t\tif (template.open.curValue !== true || template.hasData.curValue !== true) {\n\t\t\treturn;\n\t\t}\n\t\tif (event.which === keys.ENTER || event.which === keys.TAB) {\n\t\t\tif (template.blurOnSelectItem === true) {\n\t\t\t\ttemplate.input.blur();\n\t\t\t} else {\n\t\t\t\ttemplate.open.set(false);\n\t\t\t}\n\t\t\ttemplate.enterValue();\n\t\t\tif (template.data.cleanOnEnter) {\n\t\t\t\ttemplate.input.value = '';\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\treturn;\n\t\t}\n\t\tif (event.which === keys.ARROW_UP) {\n\t\t\ttemplate.up();\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\treturn;\n\t\t}\n\t\tif (event.which === keys.ARROW_DOWN) {\n\t\t\ttemplate.down();\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t}\n\t};\n\n\ttemplate.setTextFilter = _.debounce(function (value) {\n\t\treturn template.textFilter.set(value);\n\t}, template.textFilterDelay);\n\n\ttemplate.onInputKeyup = (event) => {\n\t\tif (template.closeOnEsc === true && template.open.curValue === true && event.which === keys.ESC) {\n\t\t\ttemplate.open.set(false);\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\treturn;\n\t\t}\n\t\tconst value = template.input.value.substr(0, getCursorPosition(template.input));\n\n\t\tif (template.matchSelectorRegex.test(value)) {\n\t\t\ttemplate.setTextFilter(value.match(template.selectorRegex)[1]);\n\t\t\ttemplate.open.set(true);\n\t\t} else {\n\t\t\ttemplate.open.set(false);\n\t\t}\n\t\tif (template.open.curValue !== true) {\n\t\t\treturn;\n\t\t}\n\t\tif (event.which !== keys.ARROW_UP && event.which !== keys.ARROW_DOWN) {\n\t\t\treturn Meteor.defer(function () {\n\t\t\t\ttemplate.verifySelection();\n\t\t\t});\n\t\t}\n\t};\n\ttemplate.onFocus = () => {\n\t\ttemplate.clickingItem = false;\n\t\tif (template.open.curValue === true) {\n\t\t\treturn;\n\t\t}\n\t\tconst value = template.input.value.substr(0, getCursorPosition(template.input));\n\t\tif (template.matchSelectorRegex.test(value)) {\n\t\t\ttemplate.setTextFilter(value.match(template.selectorRegex)[1]);\n\t\t\ttemplate.open.set(true);\n\t\t\treturn Meteor.defer(function () {\n\t\t\t\treturn template.verifySelection();\n\t\t\t});\n\t\t}\n\t\treturn template.open.set(false);\n\t};\n\n\ttemplate.onBlur = () => {\n\t\tif (template.open.curValue === false) {\n\t\t\treturn;\n\t\t}\n\t\tif (template.clickingItem === true) {\n\t\t\treturn;\n\t\t}\n\t\treturn template.open.set(false);\n\t};\n\n\ttemplate.enterValue = function () {\n\t\tif (template.value.curValue == null) {\n\t\t\treturn;\n\t\t}\n\t\tconst { value } = template.input;\n\t\tconst caret = getCursorPosition(template.input);\n\t\tlet firstPartValue = value.substr(0, caret);\n\t\tconst lastPartValue = value.substr(caret);\n\t\tconst getValue = this.getValue(template.value.curValue, template.data.collection, template.records.get(), firstPartValue);\n\t\tif (!getValue) {\n\t\t\treturn;\n\t\t}\n\t\tfirstPartValue = firstPartValue.replace(template.selectorRegex, template.prefix + getValue + template.suffix);\n\t\ttemplate.input.value = firstPartValue + lastPartValue;\n\t\treturn setCursorPosition(template.input, firstPartValue.length);\n\t};\n\ttemplate.records = new ReactiveVar([]);\n\ttemplate.autorun(function () {\n\t\tconst filter = template.textFilter.get();\n\t\tif (filter != null) {\n\t\t\tconst filterCallback = (result) => {\n\t\t\t\ttemplate.hasData.set(result && result.length > 0);\n\t\t\t\ttemplate.records.set(result);\n\t\t\t\treturn Meteor.defer(function () {\n\t\t\t\t\treturn template.verifySelection();\n\t\t\t\t});\n\t\t\t};\n\t\t\tconst result = template.data.getFilter(template.data.collection, filter, filterCallback);\n\t\t\tif (result != null) {\n\t\t\t\treturn filterCallback(result);\n\t\t\t}\n\t\t}\n\t});\n});\n\nTemplate.messagePopup.onRendered(function () {\n\tif (this.data.getInput != null) {\n\t\tthis.input = typeof this.data.getInput === 'function' && this.data.getInput();\n\t} else if (this.data.input) {\n\t\tthis.input = this.parentTemplate().find(this.data.input);\n\t}\n\tif (this.input == null) {\n\t\tconsole.error('Input not found for popup');\n\t}\n\tconst self = this;\n\tself.autorun(() => {\n\t\tconst open = self.open.get();\n\t\tif ($('.reply-preview').length) {\n\t\t\tif (open === true) {\n\t\t\t\t$('.reply-preview').addClass('reply-preview-with-popup');\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t$('#popup').addClass('popup-with-reply-preview');\n\t\t\t\t}, 50);\n\t\t\t}\n\t\t}\n\t\tif (open === false) {\n\t\t\t$('.reply-preview').removeClass('reply-preview-with-popup');\n\t\t\t$('#popup').removeClass('popup-with-reply-preview');\n\t\t}\n\t});\n\t$(this.input).on('keyup', this.onInputKeyup.bind(this));\n\t$(this.input).on('keydown', this.onInputKeydown.bind(this));\n\t$(this.input).on('focus', this.onFocus.bind(this));\n\t$(this.input).on('blur', this.onBlur.bind(this));\n});\n\nTemplate.messagePopup.onDestroyed(function () {\n\t$(this.input).off('keyup', this.onInputKeyup);\n\t$(this.input).off('keydown', this.onInputKeydown);\n\t$(this.input).off('focus', this.onFocus);\n\t$(this.input).off('blur', this.onBlur);\n});\n\nTemplate.messagePopup.events({\n\t'mouseenter .popup-item'(e) {\n\t\tif (e.currentTarget.className.indexOf('selected') > -1) {\n\t\t\treturn;\n\t\t}\n\t\tconst template = Template.instance();\n\t\tconst current = template.find('.popup-item.selected');\n\t\tif (current != null) {\n\t\t\tcurrent.className = current.className.replace(/\\sselected/, '').replace('sidebar-item__popup-active', '');\n\t\t}\n\t\te.currentTarget.className += ' selected sidebar-item__popup-active';\n\t\treturn template.value.set(this._id);\n\t},\n\t'mousedown .popup-item, touchstart .popup-item'() {\n\t\tconst template = Template.instance();\n\t\ttemplate.clickingItem = true;\n\t},\n\t'mouseup .popup-item, touchend .popup-item'(e) {\n\t\te.stopPropagation();\n\t\tconst template = Template.instance();\n\t\tconst wasMenuIconClicked = e.target.classList.contains('sidebar-item__menu-icon');\n\t\ttemplate.clickingItem = false;\n\t\tif (!wasMenuIconClicked) {\n\t\t\ttemplate.value.set(this._id);\n\t\t\ttemplate.enterValue();\n\t\t\ttemplate.open.set(false);\n\t\t}\n\t},\n});\n\nTemplate.messagePopup.helpers({\n\tisOpen() {\n\t\treturn (\n\t\t\tTemplate.instance().open.get() &&\n\t\t\t(Template.instance().hasData.get() ||\n\t\t\t\tTemplate.instance().data.emptyTemplate != null ||\n\t\t\t\t!Template.instance().parentTemplate(1).subscriptionsReady())\n\t\t);\n\t},\n\tdata() {\n\t\tconst template = Template.instance();\n\t\treturn Object.assign(template.records.get(), { toolbar: true });\n\t},\n\ttoolbarData() {\n\t\treturn { ...Template.currentData(), toolbar: true };\n\t},\n\tsidebarHeaderHeight() {\n\t\treturn `${document.querySelector('.sidebar__header').offsetHeight}px`;\n\t},\n\tsidebarWidth() {\n\t\treturn `${document.querySelector('.sidebar').offsetWidth}px`;\n\t},\n});\n","import { Template } from 'meteor/templating';\n\nimport { roomTypes } from '../../../utils';\nimport './messagePopupChannel.html';\n\nTemplate.messagePopupChannel.helpers({\n\tchannelIcon() {\n\t\treturn roomTypes.getIcon(this);\n\t},\n});\n","import _ from 'underscore';\nimport { Blaze } from 'meteor/blaze';\nimport { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport { Tracker } from 'meteor/tracker';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\n\nimport { Messages, Subscriptions } from '../../../models/client';\nimport { settings } from '../../../settings/client';\nimport { hasAllPermission, hasAtLeastOnePermission } from '../../../authorization/client';\nimport { EmojiPicker, emoji } from '../../../emoji';\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\nimport { t, getUserPreference, slashCommands } from '../../../utils/client';\nimport { customMessagePopups } from './customMessagePopups';\nimport './messagePopupConfig.html';\nimport './messagePopupSlashCommand.html';\nimport './messagePopupUser.html';\n\nconst reloadUsersFromRoomMessages = (rid, template) => {\n\tconst user = Meteor.userId() && Meteor.users.findOne(Meteor.userId(), { fields: { username: 1 } });\n\tif (!rid || !user) {\n\t\treturn;\n\t}\n\n\ttemplate.usersFromRoomMessages.remove({});\n\n\tconst uniqueMessageUsersControl = {};\n\n\tMessages.find(\n\t\t{\n\t\t\trid,\n\t\t\t'u.username': { $ne: user.username },\n\t\t\t't': { $exists: false },\n\t\t},\n\t\t{\n\t\t\tfields: {\n\t\t\t\t'u.username': 1,\n\t\t\t\t'u.name': 1,\n\t\t\t\t'ts': 1,\n\t\t\t},\n\t\t\tsort: { ts: -1 },\n\t\t},\n\t)\n\t\t.fetch()\n\t\t.filter(({ u: { username } }) => {\n\t\t\tconst notMapped = !uniqueMessageUsersControl[username];\n\t\t\tuniqueMessageUsersControl[username] = true;\n\t\t\treturn notMapped;\n\t\t})\n\t\t.forEach(({ u: { username, name }, ts }) =>\n\t\t\ttemplate.usersFromRoomMessages.upsert(username, {\n\t\t\t\t_id: username,\n\t\t\t\tusername,\n\t\t\t\tname,\n\t\t\t\tstatus: Tracker.nonreactive(() => Session.get(`user_${username}_status`) || 'offline'),\n\t\t\t\tts,\n\t\t\t}),\n\t\t);\n};\n\nconst fetchUsersFromServer = _.throttle(async (filterText, records, rid, cb) => {\n\tconst usernames = records.map(({ username }) => username);\n\n\tconst { users } = await callWithErrorHandling('spotlight', filterText, usernames, { users: true, mentions: true }, rid);\n\n\tif (!users || users.length <= 0) {\n\t\treturn;\n\t}\n\n\tusers\n\t\t// .slice(0, 5)\n\t\t.forEach(({ username, nickname, name, status, avatarETag, outside }) => {\n\t\t\t// if (records.length < 5) {\n\t\t\trecords.push({\n\t\t\t\t_id: username,\n\t\t\t\tusername,\n\t\t\t\tnickname,\n\t\t\t\tname,\n\t\t\t\tstatus,\n\t\t\t\tavatarETag,\n\t\t\t\toutside,\n\t\t\t\tsort: 3,\n\t\t\t});\n\t\t\t// }\n\t\t});\n\n\trecords.sort(({ sort: sortA }, { sort: sortB }) => sortA - sortB);\n\n\tcb && cb(records);\n}, 1000);\n\nconst fetchRoomsFromServer = _.throttle(async (filterText, records, rid, cb) => {\n\tif (!hasAllPermission('view-outside-room')) {\n\t\tcb && cb([]);\n\t\treturn;\n\t}\n\n\tconst { rooms } = await callWithErrorHandling('spotlight', filterText, null, { rooms: true, mentions: true }, rid);\n\n\tif (!rooms || rooms.length <= 0) {\n\t\treturn;\n\t}\n\n\trooms.slice(0, 5).forEach((room) => {\n\t\tif (records.length < 5) {\n\t\t\trecords.push(room);\n\t\t}\n\t});\n\n\tcb && cb(records);\n}, 1000);\n\nconst emojiSort = (recents) => (a, b) => {\n\tlet idA = a._id;\n\tlet idB = a._id;\n\n\tif (recents.includes(a._id)) {\n\t\tidA = recents.indexOf(a._id) + idA;\n\t}\n\tif (recents.includes(b._id)) {\n\t\tidB = recents.indexOf(b._id) + idB;\n\t}\n\n\tif (idA < idB) {\n\t\treturn -1;\n\t}\n\n\tif (idA > idB) {\n\t\treturn 1;\n\t}\n\n\treturn 0;\n};\nconst exactFinalTone = new RegExp('^tone[1-5]:*$');\nconst colorBlind = new RegExp('tone[1-5]:*$');\nconst seeColor = new RegExp('_t(?:o|$)(?:n|$)(?:e|$)(?:[1-5]|$)(?::|$)$');\nconst getEmojis = (collection, filter) => {\n\tconst key = `:${filter}`;\n\n\tif (!getUserPreference(Meteor.userId(), 'useEmojis')) {\n\t\treturn [];\n\t}\n\n\tif (!emoji.packages.emojione || emoji.packages.emojione.asciiList[key]) {\n\t\treturn [];\n\t}\n\n\tconst regExp = new RegExp(escapeRegExp(filter), 'i');\n\tconst recents = EmojiPicker.getRecent().map((item) => `:${item}:`);\n\n\treturn Object.keys(collection)\n\t\t.map((_id) => {\n\t\t\tconst data = collection[key];\n\t\t\treturn { _id, data };\n\t\t})\n\t\t.filter(\n\t\t\t({ _id }) => regExp.test(_id) && (exactFinalTone.test(_id.substring(key.length)) || seeColor.test(key) || !colorBlind.test(_id)),\n\t\t)\n\t\t.sort(emojiSort(recents))\n\t\t.slice(0, 10);\n};\n\nconst addEmojiToRecents = (emoji) => {\n\tconst pickerEl = document.querySelector('.emoji-picker');\n\tif (!pickerEl) {\n\t\treturn;\n\t}\n\n\tconst view = Blaze.getView(pickerEl);\n\tif (!view) {\n\t\treturn;\n\t}\n\n\tTemplate._withTemplateInstanceFunc(view.templateInstance, () => {\n\t\tEmojiPicker.addRecent(emoji.replace(/:/g, ''));\n\t});\n};\n\nTemplate.messagePopupConfig.onCreated(function () {\n\tthis.usersFromRoomMessages = new Mongo.Collection(null);\n\n\tthis.autorun(() => {\n\t\tconst { rid } = this.data;\n\t\treloadUsersFromRoomMessages(rid, this);\n\t});\n});\n\nTemplate.messagePopupConfig.helpers({\n\tcustomMessagePopups() {\n\t\treturn customMessagePopups.get();\n\t},\n\n\tgetCustomConfig() {\n\t\tconst template = Template.instance();\n\t\treturn this.configGetter(template);\n\t},\n\n\tpopupUserConfig() {\n\t\tconst template = Template.instance();\n\t\tconst suggestionsCount = settings.get('Number_of_users_autocomplete_suggestions');\n\n\t\treturn {\n\t\t\ttitle: t('People'),\n\t\t\tcollection: template.usersFromRoomMessages,\n\t\t\ttemplate: 'messagePopupUser',\n\t\t\trid: this.rid,\n\t\t\tgetInput: this.getInput,\n\t\t\ttextFilterDelay: 500,\n\t\t\ttrigger: '@',\n\t\t\tsuffix: ' ',\n\t\t\tgetFilter: (collection, filter = '', cb) => {\n\t\t\t\tconst { rid } = this;\n\t\t\t\tconst filterText = filter.trim();\n\t\t\t\tconst filterRegex = filterText !== '' && new RegExp(`${escapeRegExp(filterText)}`, 'i');\n\n\t\t\t\tconst items = template.usersFromRoomMessages\n\t\t\t\t\t.find(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tts: { $exists: true },\n\t\t\t\t\t\t\t...(filterText && {\n\t\t\t\t\t\t\t\t$or: [{ username: filterRegex }, { name: filterRegex }],\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlimit: filterText ? 2 : suggestionsCount,\n\t\t\t\t\t\t\tsort: { ts: -1 },\n\t\t\t\t\t\t},\n\t\t\t\t\t)\n\t\t\t\t\t.fetch()\n\t\t\t\t\t.map((u) => {\n\t\t\t\t\t\tu.suggestion = true;\n\t\t\t\t\t\treturn u;\n\t\t\t\t\t});\n\n\t\t\t\t// // If needed, add to list the online users\n\t\t\t\t// if (items.length < 5 && filterRegex) {\n\t\t\t\t// \tconst usernamesAlreadyFetched = items.map(({ username }) => username);\n\t\t\t\t// \tif (!hasAllPermission('view-outside-room')) {\n\t\t\t\t// \t\tconst usernamesFromDMs = Subscriptions\n\t\t\t\t// \t\t\t.find(\n\t\t\t\t// \t\t\t\t{\n\t\t\t\t// \t\t\t\t\tt: 'd',\n\t\t\t\t// \t\t\t\t\t$and: [\n\t\t\t\t// \t\t\t\t\t\t{\n\t\t\t\t// \t\t\t\t\t\t\t...filterRegex && {\n\t\t\t\t// \t\t\t\t\t\t\t\t$or: [\n\t\t\t\t// \t\t\t\t\t\t\t\t\t{ name: filterRegex },\n\t\t\t\t// \t\t\t\t\t\t\t\t\t{ fname: filterRegex },\n\t\t\t\t// \t\t\t\t\t\t\t\t],\n\t\t\t\t// \t\t\t\t\t\t\t},\n\t\t\t\t// \t\t\t\t\t\t},\n\t\t\t\t// \t\t\t\t\t\t{\n\t\t\t\t// \t\t\t\t\t\t\tname: { $nin: usernamesAlreadyFetched },\n\t\t\t\t// \t\t\t\t\t\t},\n\t\t\t\t// \t\t\t\t\t],\n\t\t\t\t// \t\t\t\t},\n\t\t\t\t// \t\t\t\t{\n\t\t\t\t// \t\t\t\t\tfields: { name: 1 },\n\t\t\t\t// \t\t\t\t},\n\t\t\t\t// \t\t\t)\n\t\t\t\t// \t\t\t.map(({ name }) => name);\n\t\t\t\t// \t\tconst newItems = Users\n\t\t\t\t// \t\t\t.find(\n\t\t\t\t// \t\t\t\t{\n\t\t\t\t// \t\t\t\t\tusername: {\n\t\t\t\t// \t\t\t\t\t\t$in: usernamesFromDMs,\n\t\t\t\t// \t\t\t\t\t},\n\t\t\t\t// \t\t\t\t},\n\t\t\t\t// \t\t\t\t{\n\t\t\t\t// \t\t\t\t\tfields: {\n\t\t\t\t// \t\t\t\t\t\tusername: 1,\n\t\t\t\t// \t\t\t\t\t\tnickname: 1,\n\t\t\t\t// \t\t\t\t\t\tname: 1,\n\t\t\t\t// \t\t\t\t\t\tstatus: 1,\n\t\t\t\t// \t\t\t\t\t},\n\t\t\t\t// \t\t\t\t\tlimit: 5 - usernamesAlreadyFetched.length,\n\t\t\t\t// \t\t\t\t},\n\t\t\t\t// \t\t\t)\n\t\t\t\t// \t\t\t.fetch()\n\t\t\t\t// \t\t\t.map(({ username, name, status, nickname }) => ({\n\t\t\t\t// \t\t\t\t_id: username,\n\t\t\t\t// \t\t\t\tusername,\n\t\t\t\t// \t\t\t\tnickname,\n\t\t\t\t// \t\t\t\tname,\n\t\t\t\t// \t\t\t\tstatus,\n\t\t\t\t// \t\t\t\tsort: 1,\n\t\t\t\t// \t\t\t}));\n\n\t\t\t\t// \t\titems.push(...newItems);\n\t\t\t\t// \t} else {\n\t\t\t\t// \t\tconst user = Meteor.users.findOne(Meteor.userId(), { fields: { username: 1 } });\n\t\t\t\t// \t\tconst newItems = Meteor.users.find({\n\t\t\t\t// \t\t\t$and: [\n\t\t\t\t// \t\t\t\t{\n\t\t\t\t// \t\t\t\t\t...filterRegex && {\n\t\t\t\t// \t\t\t\t\t\t$or: [\n\t\t\t\t// \t\t\t\t\t\t\t{ username: filterRegex },\n\t\t\t\t// \t\t\t\t\t\t\t{ name: filterRegex },\n\t\t\t\t// \t\t\t\t\t\t],\n\t\t\t\t// \t\t\t\t\t},\n\t\t\t\t// \t\t\t\t},\n\t\t\t\t// \t\t\t\t{\n\t\t\t\t// \t\t\t\t\tusername: {\n\t\t\t\t// \t\t\t\t\t\t$nin: [\n\t\t\t\t// \t\t\t\t\t\t\tuser && user.username,\n\t\t\t\t// \t\t\t\t\t\t\t...usernamesAlreadyFetched,\n\t\t\t\t// \t\t\t\t\t\t],\n\t\t\t\t// \t\t\t\t\t},\n\t\t\t\t// \t\t\t\t},\n\t\t\t\t// \t\t\t],\n\t\t\t\t// \t\t},\n\t\t\t\t// \t\t{\n\t\t\t\t// \t\t\tfields: {\n\t\t\t\t// \t\t\t\tusername: 1,\n\t\t\t\t// \t\t\t\tnickname: 1,\n\t\t\t\t// \t\t\t\tname: 1,\n\t\t\t\t// \t\t\t\tstatus: 1,\n\t\t\t\t// \t\t\t},\n\t\t\t\t// \t\t\tlimit: 5 - usernamesAlreadyFetched.length,\n\t\t\t\t// \t\t})\n\t\t\t\t// \t\t\t.fetch()\n\t\t\t\t// \t\t\t.map(({ username, name, status, nickname }) => ({\n\t\t\t\t// \t\t\t\t_id: username,\n\t\t\t\t// \t\t\t\tusername,\n\t\t\t\t// \t\t\t\tnickname,\n\t\t\t\t// \t\t\t\tname,\n\t\t\t\t// \t\t\t\tstatus,\n\t\t\t\t// \t\t\t\tsort: 1,\n\t\t\t\t// \t\t\t}));\n\n\t\t\t\t// \t\titems.push(...newItems);\n\t\t\t\t// \t}\n\t\t\t\t// }\n\n\t\t\t\t// Get users from Server\n\t\t\t\tif (items.length < suggestionsCount && filterText !== '') {\n\t\t\t\t\tfetchUsersFromServer(filterText, items, rid, cb);\n\t\t\t\t}\n\n\t\t\t\tif (!filterRegex || filterRegex.test('all')) {\n\t\t\t\t\titems.push({\n\t\t\t\t\t\t_id: 'all',\n\t\t\t\t\t\tusername: 'all',\n\t\t\t\t\t\tsystem: true,\n\t\t\t\t\t\tname: t('Notify_all_in_this_room'),\n\t\t\t\t\t\tsort: 4,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (!filterRegex || filterRegex.test('here')) {\n\t\t\t\t\titems.push({\n\t\t\t\t\t\t_id: 'here',\n\t\t\t\t\t\tusername: 'here',\n\t\t\t\t\t\tsystem: true,\n\t\t\t\t\t\tname: t('Notify_active_in_this_room'),\n\t\t\t\t\t\tsort: 4,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn items;\n\t\t\t},\n\t\t\tgetValue: (_id) => _id,\n\t\t};\n\t},\n\tpopupChannelConfig() {\n\t\treturn {\n\t\t\ttitle: t('Channels'),\n\t\t\tcollection: Subscriptions,\n\t\t\ttrigger: '#',\n\t\t\tsuffix: ' ',\n\t\t\ttextFilterDelay: 500,\n\t\t\ttemplate: 'messagePopupChannel',\n\t\t\trid: this.rid,\n\t\t\tgetInput: this.getInput,\n\t\t\tgetFilter: (collection, filter, cb) => {\n\t\t\t\tconst { rid } = this;\n\t\t\t\tconst exp = new RegExp(filter, 'i');\n\t\t\t\tconst records = collection\n\t\t\t\t\t.find(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: exp,\n\t\t\t\t\t\t\tt: {\n\t\t\t\t\t\t\t\t$in: ['c', 'p'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treactive: 1,\n\t\t\t\t\t\t\tlimit: 5,\n\t\t\t\t\t\t\tsort: {\n\t\t\t\t\t\t\t\tls: -1,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t)\n\t\t\t\t\t.fetch();\n\n\t\t\t\tif (records.length < 5 && filter && filter.trim() !== '') {\n\t\t\t\t\tfetchRoomsFromServer(filter, records, rid, cb);\n\t\t\t\t}\n\t\t\t\treturn records;\n\t\t\t},\n\t\t\tgetValue: (_id, collection, records) => {\n\t\t\t\tconst record = _.findWhere(records, {\n\t\t\t\t\t_id,\n\t\t\t\t});\n\t\t\t\treturn record && record.name;\n\t\t\t},\n\t\t};\n\t},\n\tpopupSlashCommandsConfig() {\n\t\treturn {\n\t\t\ttitle: t('Commands'),\n\t\t\tcollection: slashCommands.commands,\n\t\t\ttrigger: '/',\n\t\t\tsuffix: ' ',\n\t\t\ttriggerAnywhere: false,\n\t\t\ttemplate: 'messagePopupSlashCommand',\n\t\t\trid: this.rid,\n\t\t\tgetInput: this.getInput,\n\t\t\tgetFilter: (collection, filter) => {\n\t\t\t\tconst { rid } = this;\n\t\t\t\treturn Object.keys(collection)\n\t\t\t\t\t.map((command) => {\n\t\t\t\t\t\tconst item = collection[command];\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t_id: command,\n\t\t\t\t\t\t\tparams: item.params ? TAPi18n.__(item.params) : '',\n\t\t\t\t\t\t\tdescription: TAPi18n.__(item.description),\n\t\t\t\t\t\t\tpermission: item.permission,\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t\t\t.filter((command) => {\n\t\t\t\t\t\tconst isMatch = command._id.indexOf(filter) > -1;\n\n\t\t\t\t\t\tif (!isMatch) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!command.permission) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn hasAtLeastOnePermission(command.permission, rid);\n\t\t\t\t\t})\n\t\t\t\t\t.sort((a, b) => a._id > b._id)\n\t\t\t\t\t.slice(0, 11);\n\t\t\t},\n\t\t};\n\t},\n\tpopupEmojiConfig() {\n\t\treturn {\n\t\t\ttitle: t('Emoji'),\n\t\t\tcollection: emoji.list,\n\t\t\ttemplate: 'messagePopupEmoji',\n\t\t\ttrigger: ':',\n\t\t\tprefix: '',\n\t\t\tsuffix: ' ',\n\t\t\trid: this.rid,\n\t\t\tgetInput: this.getInput,\n\t\t\tgetFilter: getEmojis,\n\t\t\tgetValue: (emojiText) => {\n\t\t\t\taddEmojiToRecents(emojiText);\n\t\t\t\treturn emojiText;\n\t\t\t},\n\t\t};\n\t},\n\tpopupReactionEmojiConfig() {\n\t\treturn {\n\t\t\ttitle: t('Emoji'),\n\t\t\tcollection: emoji.list,\n\t\t\ttemplate: 'messagePopupEmoji',\n\t\t\ttrigger: '\\\\+:',\n\t\t\tprefix: '+',\n\t\t\tsuffix: ' ',\n\t\t\trid: this.rid,\n\t\t\tgetInput: this.getInput,\n\t\t\tgetFilter: getEmojis,\n\t\t\tgetValue: (emojiText) => {\n\t\t\t\taddEmojiToRecents(emojiText);\n\t\t\t\treturn emojiText;\n\t\t\t},\n\t\t};\n\t},\n});\n","import { Template } from 'meteor/templating';\nimport './messagePopupEmoji.html';\n\nTemplate.messagePopupEmoji.helpers({\n\tvalue() {\n\t\tconst { length } = this.data;\n\t\treturn this.data[length - 1];\n\t},\n});\n","import _ from 'underscore';\nimport { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nimport { slashCommands } from '../../../utils';\nimport { hasAtLeastOnePermission } from '../../../authorization';\nimport './messagePopupSlashCommandPreview.html';\n\nconst keys = {\n\tTAB: 9,\n\tENTER: 13,\n\tESC: 27,\n\tARROW_LEFT: 37,\n\tARROW_UP: 38,\n\tARROW_RIGHT: 39,\n\tARROW_DOWN: 40,\n};\n\nfunction getCursorPosition(input) {\n\tif (!input) {\n\t\treturn;\n\t}\n\n\tif (input.selectionStart) {\n\t\treturn input.selectionStart;\n\t}\n\tif (document.selection) {\n\t\tinput.focus();\n\t\tconst sel = document.selection.createRange();\n\t\tconst selLen = document.selection.createRange().text.length;\n\t\tsel.moveStart('character', -input.value.length);\n\t\treturn sel.text.length - selLen;\n\t}\n}\n\nTemplate.messagePopupSlashCommandPreview.onCreated(function () {\n\tthis.open = new ReactiveVar(false);\n\tthis.isLoading = new ReactiveVar(true);\n\tthis.preview = new ReactiveVar();\n\tthis.selectedItem = new ReactiveVar();\n\tthis.commandName = new ReactiveVar('');\n\tthis.commandArgs = new ReactiveVar('');\n\n\t// regex ensures a command is entered into the input\n\t// such as \"/testing \" before continuing\n\tthis.matchSelectorRegex = /(?:^)(\\/[\\w\\d\\S]+ )[^]*$/;\n\tthis.selectorRegex = /(\\/[\\w\\d\\S]+ )([^]*)$/;\n\tthis.replaceRegex = /(\\/[\\w\\d\\S]+ )[^]*$/; // WHAT'S THIS\n\n\tthis.dragging = false;\n\n\tconst template = this;\n\ttemplate.fetchPreviews = _.debounce(function _previewFetcher(cmd, args) {\n\t\tconst command = cmd;\n\t\tconst params = args;\n\t\tconst { rid, tmid } = template.data;\n\t\tMeteor.call('getSlashCommandPreviews', { cmd, params, msg: { rid, tmid } }, function (err, preview) {\n\t\t\tif (err) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!preview || !Array.isArray(preview.items)) {\n\t\t\t\ttemplate.preview.set({\n\t\t\t\t\ti18nTitle: 'No_results_found_for',\n\t\t\t\t\titems: [],\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\ttemplate.preview.set(preview);\n\t\t\t}\n\n\t\t\ttemplate.commandName.set(command);\n\t\t\ttemplate.commandArgs.set(params);\n\t\t\ttemplate.isLoading.set(false);\n\n\t\t\tMeteor.defer(function () {\n\t\t\t\ttemplate.verifySelection();\n\t\t\t});\n\t\t});\n\t}, 500);\n\n\ttemplate.enterKeyAction = () => {\n\t\tconst current = template.find('.popup-item.selected');\n\n\t\tif (!current) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selectedId = current.getAttribute('data-id');\n\n\t\tif (!selectedId) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cmd = template.commandName.curValue;\n\t\tconst params = template.commandArgs.curValue;\n\n\t\tif (!cmd || !params) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst item = template.preview.curValue.items.find((i) => i.id === selectedId);\n\n\t\tif (!item) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { rid, tmid } = template.data;\n\t\tMeteor.call('executeSlashCommandPreview', { cmd, params, msg: { rid, tmid } }, item, function (err) {\n\t\t\tif (err) {\n\t\t\t\tconsole.warn(err);\n\t\t\t}\n\t\t});\n\n\t\ttemplate.open.set(false);\n\t\ttemplate.inputBox.value = '';\n\t\ttemplate.preview.set();\n\t\ttemplate.commandName.set('');\n\t\ttemplate.commandArgs.set('');\n\t};\n\n\ttemplate.selectionLogic = () => {\n\t\tconst inputValueAtCursor = template.inputBox.value.substr(0, getCursorPosition(template.inputBox));\n\n\t\tif (!template.matchSelectorRegex.test(inputValueAtCursor)) {\n\t\t\ttemplate.open.set(false);\n\t\t\treturn;\n\t\t}\n\n\t\tconst matches = inputValueAtCursor.match(template.selectorRegex);\n\t\tconst cmd = matches[1].replace('/', '').trim().toLowerCase();\n\t\tconst command = slashCommands.commands[cmd];\n\n\t\t// Ensure the command they're typing actually exists\n\t\t// And it provides a command preview\n\t\t// And if it provides a permission to check, they have permission to run the command\n\t\tconst { rid } = template.data;\n\t\tif (!command || !command.providesPreview || (command.permission && !hasAtLeastOnePermission(command.permission, rid))) {\n\t\t\ttemplate.open.set(false);\n\t\t\treturn;\n\t\t}\n\n\t\tconst args = matches[2];\n\n\t\t// Check to verify there are no additional arguments passed,\n\t\t// Because we we don't care about what it if there isn't\n\t\tif (!args) {\n\t\t\ttemplate.open.set(false);\n\t\t\treturn;\n\t\t}\n\n\t\t// If they haven't changed a thing, show what we already got\n\t\tif (template.commandName.curValue === cmd && template.commandArgs.curValue === args && template.preview.curValue) {\n\t\t\ttemplate.isLoading.set(false);\n\t\t\ttemplate.open.set(true);\n\t\t\treturn;\n\t\t}\n\n\t\ttemplate.isLoading.set(true);\n\t\ttemplate.open.set(true);\n\n\t\t// Fetch and display them\n\t\ttemplate.fetchPreviews(cmd, args);\n\t};\n\n\ttemplate.verifySelection = () => {\n\t\tconst current = template.find('.popup-item.selected');\n\n\t\tif (!current) {\n\t\t\tconst first = template.find('.popup-item');\n\n\t\t\tif (first) {\n\t\t\t\tfirst.className += ' selected sidebar-item__popup-active';\n\t\t\t}\n\t\t}\n\t};\n\n\t// Typing data\n\ttemplate.onInputKeyup = (event) => {\n\t\tif (template.open.curValue === true && event.which === keys.ESC) {\n\t\t\ttemplate.open.set(false);\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.which === keys.ARROW_UP || event.which === keys.ARROW_DOWN) {\n\t\t\t// Arrow up and down are for navigating the choices\n\t\t\treturn;\n\t\t}\n\n\t\ttemplate.selectionLogic();\n\t};\n\n\t// Using the keyboard to navigate the options\n\ttemplate.onInputKeydown = (event) => {\n\t\tif (!template.open.curValue || template.isLoading.curValue) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.which === keys.ENTER) {\n\t\t\t// || event.which === keys.TAB) { <-- does using tab to select make sense?\n\t\t\ttemplate.enterKeyAction();\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.which === keys.ARROW_UP) {\n\t\t\ttemplate.up();\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.which === keys.ARROW_DOWN) {\n\t\t\ttemplate.down();\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t}\n\t};\n\n\ttemplate.up = () => {\n\t\tconst current = template.find('.popup-item.selected');\n\t\tconst previous = $(current).prev('.popup-item')[0] || template.find('.popup-item:last-child');\n\n\t\tif (previous != null) {\n\t\t\tcurrent.className = current.className.replace(/\\sselected/, '').replace('sidebar-item__popup-active', '');\n\t\t\tprevious.className += ' selected sidebar-item__popup-active';\n\t\t}\n\t};\n\n\ttemplate.down = () => {\n\t\tconst current = template.find('.popup-item.selected');\n\t\tconst next = $(current).next('.popup-item')[0] || template.find('.popup-item');\n\n\t\tif (next && next.classList.contains('popup-item')) {\n\t\t\tcurrent.className = current.className.replace(/\\sselected/, '').replace('sidebar-item__popup-active', '');\n\t\t\tnext.className += ' selected sidebar-item__popup-active';\n\t\t}\n\t};\n\n\ttemplate.onFocus = () => {\n\t\ttemplate.clickingItem = false;\n\t\tif (template.open.curValue) {\n\t\t\treturn;\n\t\t}\n\n\t\ttemplate.selectionLogic();\n\t};\n\n\ttemplate.onBlur = () => {\n\t\tif (template.clickingItem) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn template.open.set(false);\n\t};\n});\n\nTemplate.messagePopupSlashCommandPreview.onRendered(function _messagePopupSlashCommandPreviewRendered() {\n\tif (!this.data.getInput) {\n\t\tthrow Error('Somethign wrong happened.');\n\t}\n\n\tthis.inputBox = this.data.getInput();\n\t$(this.inputBox).on('keyup', this.onInputKeyup.bind(this));\n\t$(this.inputBox).on('keydown', this.onInputKeydown.bind(this));\n\t$(this.inputBox).on('focus', this.onFocus.bind(this));\n\t$(this.inputBox).on('blur', this.onBlur.bind(this));\n\n\tconst self = this;\n\tself.autorun(() => {\n\t\tsetTimeout(self.selectionLogic, 500);\n\t});\n});\n\nTemplate.messagePopupSlashCommandPreview.onDestroyed(function () {\n\t$(this.inputBox).off('keyup', this.onInputKeyup);\n\t$(this.inputBox).off('keydown', this.onInputKeydown);\n\t$(this.inputBox).off('focus', this.onFocus);\n\t$(this.inputBox).off('blur', this.onBlur);\n});\n\nTemplate.messagePopupSlashCommandPreview.events({\n\t'mouseenter .popup-item, mousedown .popup-item, touchstart .popup-item'(e) {\n\t\tif (e.currentTarget.className.includes('selected')) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst template = Template.instance();\n\t\tconst current = template.find('.popup-item.selected');\n\t\tif (current) {\n\t\t\tcurrent.className = current.className.replace(/\\sselected/, '').replace('sidebar-item__popup-active', '');\n\t\t}\n\n\t\te.currentTarget.className += ' selected sidebar-item__popup-active';\n\t},\n\t'mousedown .popup-item, touchstart .popup-item'() {\n\t\tconst template = Template.instance();\n\t\ttemplate.clickingItem = true;\n\t},\n\t'mouseup .popup-item, touchend .popup-item'() {\n\t\tconst template = Template.instance();\n\t\tif (template.dragging) {\n\t\t\ttemplate.dragging = false;\n\t\t\treturn;\n\t\t}\n\n\t\ttemplate.clickingItem = false;\n\t\ttemplate.enterKeyAction();\n\t},\n\t'touchmove .popup-item'(e) {\n\t\te.stopPropagation();\n\t\tconst template = Template.instance();\n\t\ttemplate.dragging = true;\n\t},\n});\n\nTemplate.messagePopupSlashCommandPreview.helpers({\n\tisOpen() {\n\t\treturn Template.instance().open.get(); // && ((Template.instance().hasData.get() || (Template.instance().data.emptyTemplate != null)) || !Template.instance().parentTemplate(1).subscriptionsReady());\n\t},\n\tgetArgs() {\n\t\treturn Template.instance().commandArgs.get();\n\t},\n\tisLoading() {\n\t\treturn Template.instance().isLoading.get();\n\t},\n\tisType(actual, expected) {\n\t\treturn actual === expected;\n\t},\n\tpreview() {\n\t\treturn Template.instance().preview.get();\n\t},\n});\n","/* Style disabled as having some arrow functions in one-line hurts readability */\n/* eslint-disable arrow-body-style */\n\nimport { Meteor } from 'meteor/meteor';\nimport { IUIActionButton, RoomTypeFilter } from '@rocket.chat/apps-engine/definition/ui';\n\nimport { hasAtLeastOnePermission, hasPermission, hasRole } from '../../../../authorization/client';\nimport {\n\tIRoom,\n\tisDirectMessageRoom,\n\tisMultipleDirectMessageRoom,\n\tisOmnichannelRoom,\n\tisPrivateDiscussion,\n\tisPrivateTeamRoom,\n\tisPublicDiscussion,\n\tisPublicTeamRoom,\n} from '../../../../../definition/IRoom';\n\nexport const applyAuthFilter = (button: IUIActionButton, room?: IRoom): boolean => {\n\tconst { hasAllPermissions, hasOnePermission, hasAllRoles, hasOneRole } = button.when || {};\n\n\tconst hasAllPermissionsResult = hasAllPermissions ? hasPermission(hasAllPermissions) : true;\n\tconst hasOnePermissionResult = hasOnePermission ? hasAtLeastOnePermission(hasOnePermission) : true;\n\tconst hasAllRolesResult = hasAllRoles ? hasAllRoles.every((role) => hasRole(Meteor.userId(), role, room?._id)) : true;\n\tconst hasOneRoleResult = hasOneRole ? hasRole(Meteor.userId(), hasOneRole, room?._id) : true;\n\n\treturn hasAllPermissionsResult && hasOnePermissionResult && hasAllRolesResult && hasOneRoleResult;\n};\n\nconst enumToFilter: { [k in RoomTypeFilter]: (room: IRoom) => boolean } = {\n\t[RoomTypeFilter.PUBLIC_CHANNEL]: (room) => room.t === 'c',\n\t[RoomTypeFilter.PRIVATE_CHANNEL]: (room) => room.t === 'p',\n\t[RoomTypeFilter.PUBLIC_TEAM]: isPublicTeamRoom,\n\t[RoomTypeFilter.PRIVATE_TEAM]: isPrivateTeamRoom,\n\t[RoomTypeFilter.PUBLIC_DISCUSSION]: isPublicDiscussion,\n\t[RoomTypeFilter.PRIVATE_DISCUSSION]: isPrivateDiscussion,\n\t[RoomTypeFilter.DIRECT]: isDirectMessageRoom,\n\t[RoomTypeFilter.DIRECT_MULTIPLE]: isMultipleDirectMessageRoom,\n\t[RoomTypeFilter.LIVE_CHAT]: isOmnichannelRoom,\n};\n\nexport const applyRoomFilter = (button: IUIActionButton, room: IRoom): boolean => {\n\tconst { roomTypes } = button.when || {};\n\treturn !roomTypes || roomTypes.some((filter): boolean => enumToFilter[filter]?.(room));\n};\n\nexport const applyButtonFilters = (button: IUIActionButton, room?: IRoom): boolean => {\n\treturn applyAuthFilter(button, room) && (!room || applyRoomFilter(button, room));\n};\n","import { IUIActionButton } from '@rocket.chat/apps-engine/definition/ui';\n\nimport { Utilities } from '../../../apps/lib/misc/Utilities';\nimport { MessageAction, messageArgs } from '../../../ui-utils/client';\nimport { t } from '../../../utils/client';\nimport { triggerActionButtonAction } from '../ActionManager';\nimport { applyButtonFilters } from './lib/applyButtonFilters';\n\nconst getIdForActionButton = ({ appId, actionId }: IUIActionButton): string => `${appId}/${actionId}`;\n\nexport const onAdded = (button: IUIActionButton): void =>\n\t// eslint-disable-next-line no-void\n\tvoid MessageAction.addButton({\n\t\tid: getIdForActionButton(button),\n\t\t// icon: button.icon || '',\n\t\tlabel: t(Utilities.getI18nKeyForApp(button.labelI18n, button.appId)),\n\t\tcontext: button.when?.messageActionContext || ['message', 'message-mobile', 'threads', 'starred'],\n\t\tcondition({ room }: any) {\n\t\t\treturn applyButtonFilters(button, room);\n\t\t},\n\t\tasync action() {\n\t\t\tconst { msg } = messageArgs(this);\n\t\t\ttriggerActionButtonAction({\n\t\t\t\trid: msg.rid,\n\t\t\t\tmid: msg._id,\n\t\t\t\tactionId: button.actionId,\n\t\t\t\tappId: button.appId,\n\t\t\t\tpayload: { context: button.context },\n\t\t\t});\n\t\t},\n\t});\n\nexport const onRemoved = (button: IUIActionButton): void => MessageAction.removeButton(getIdForActionButton(button));\n","import { Session } from 'meteor/session';\nimport { IUIActionButton } from '@rocket.chat/apps-engine/definition/ui';\n\nimport { Rooms } from '../../../models/client';\nimport { messageBox } from '../../../ui-utils/client';\nimport { applyButtonFilters } from './lib/applyButtonFilters';\nimport { triggerActionButtonAction } from '../ActionManager';\nimport { t } from '../../../utils/client';\nimport { Utilities } from '../../../apps/lib/misc/Utilities';\n\nconst getIdForActionButton = ({ appId, actionId }: IUIActionButton): string => `${appId}/${actionId}`;\n\nconst APP_GROUP = 'Create_new';\n\nexport const onAdded = (button: IUIActionButton): void =>\n\t// eslint-disable-next-line no-void\n\tvoid messageBox.actions.add(APP_GROUP, t(Utilities.getI18nKeyForApp(button.labelI18n, button.appId)), {\n\t\tid: getIdForActionButton(button),\n\t\t// icon: button.icon || '',\n\t\tcondition() {\n\t\t\treturn applyButtonFilters(button, Rooms.findOne(Session.get('openedRoom')));\n\t\t},\n\t\taction() {\n\t\t\ttriggerActionButtonAction({\n\t\t\t\trid: Session.get('openedRoom'),\n\t\t\t\tactionId: button.actionId,\n\t\t\t\tappId: button.appId,\n\t\t\t\tpayload: { context: button.context },\n\t\t\t});\n\t\t},\n\t});\n\nexport const onRemoved = (button: IUIActionButton): void =>\n\t// eslint-disable-next-line no-void\n\tvoid messageBox.actions.remove(APP_GROUP, new RegExp(getIdForActionButton(button)));\n","import { IUIActionButton } from '@rocket.chat/apps-engine/definition/ui';\n\nimport { addAction, deleteAction } from '../../../../client/views/room/lib/Toolbox';\nimport { Utilities } from '../../../apps/lib/misc/Utilities';\nimport { t } from '../../../utils/client';\nimport { triggerActionButtonAction } from '../ActionManager';\nimport { applyButtonFilters } from './lib/applyButtonFilters';\n\nconst getIdForActionButton = ({ appId, actionId }: IUIActionButton): string => `${appId}/${actionId}`;\n\nexport const onAdded = (button: IUIActionButton): void =>\n\t// eslint-disable-next-line no-void\n\tvoid addAction(getIdForActionButton(button), ({ room }) =>\n\t\tapplyButtonFilters(button, room)\n\t\t\t? {\n\t\t\t\t\tid: button.actionId,\n\t\t\t\t\ticon: '', // Apps won't provide icons for now\n\t\t\t\t\torder: 300, // Make sure the button only shows up inside the room toolbox\n\t\t\t\t\ttitle: t(Utilities.getI18nKeyForApp(button.labelI18n, button.appId)) as any,\n\t\t\t\t\t// Filters were applied in the applyButtonFilters function\n\t\t\t\t\t// if the code made it this far, the button should be shown\n\t\t\t\t\tgroups: ['group', 'channel', 'live', 'team', 'direct', 'direct_multiple'],\n\t\t\t\t\taction: (): Promise<any> =>\n\t\t\t\t\t\ttriggerActionButtonAction({\n\t\t\t\t\t\t\trid: room._id,\n\t\t\t\t\t\t\tactionId: button.actionId,\n\t\t\t\t\t\t\tappId: button.appId,\n\t\t\t\t\t\t\tpayload: { context: button.context },\n\t\t\t\t\t\t}),\n\t\t\t  }\n\t\t\t: null,\n\t);\n\nexport const onRemoved = (button: IUIActionButton): boolean => deleteAction(getIdForActionButton(button));\n","import { Meteor } from 'meteor/meteor';\nimport { IUIActionButton, UIActionButtonContext } from '@rocket.chat/apps-engine/definition/ui';\n\nimport { APIClient } from '../../utils/client';\nimport * as TabBar from './actionButtons/tabbar';\nimport * as MessageAction from './actionButtons/messageAction';\nimport * as MessageBox from './actionButtons/messageBox';\n\nlet registeredButtons: Array<IUIActionButton> = [];\n\nexport const addButton = (button: IUIActionButton): void => {\n\tswitch (button.context) {\n\t\tcase UIActionButtonContext.MESSAGE_ACTION:\n\t\t\tMessageAction.onAdded(button);\n\t\t\tbreak;\n\t\tcase UIActionButtonContext.ROOM_ACTION:\n\t\t\tTabBar.onAdded(button);\n\t\t\tbreak;\n\t\tcase UIActionButtonContext.MESSAGE_BOX_ACTION:\n\t\t\tMessageBox.onAdded(button);\n\t\t\tbreak;\n\t}\n\n\tregisteredButtons.push(Object.freeze(button));\n};\n\nexport const removeButton = (button: IUIActionButton): void => {\n\tswitch (button.context) {\n\t\tcase UIActionButtonContext.MESSAGE_ACTION:\n\t\t\tMessageAction.onRemoved(button);\n\t\t\tbreak;\n\t\tcase UIActionButtonContext.ROOM_ACTION:\n\t\t\tTabBar.onRemoved(button);\n\t\t\tbreak;\n\t\tcase UIActionButtonContext.MESSAGE_BOX_ACTION:\n\t\t\tMessageBox.onRemoved(button);\n\t\t\tbreak;\n\t}\n};\n\nexport const loadButtons = (): Promise<void> =>\n\tAPIClient.get('apps/actionButtons').then((value: Array<IUIActionButton>) => {\n\t\tregisteredButtons.forEach((button) => removeButton(button));\n\t\tregisteredButtons = [];\n\t\tvalue.map(addButton);\n\t});\n\nMeteor.startup(() => loadButtons());\n","import { UIKitIncomingInteractionType } from '@rocket.chat/apps-engine/definition/uikit';\nimport { Meteor } from 'meteor/meteor';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Random } from 'meteor/random';\nimport { Emitter } from '@rocket.chat/emitter';\n\nimport Notifications from '../../notifications/client/lib/Notifications';\nimport { CachedCollectionManager } from '../../ui-cached-collection';\nimport { modal } from '../../ui-utils/client/lib/modal';\nimport { APIClient } from '../../utils';\nimport { UIKitInteractionTypes } from '../../../definition/UIKit';\nimport * as banners from '../../../client/lib/banners';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\nimport { t } from '../../utils/client';\n\nconst events = new Emitter();\n\nexport const on = (...args) => {\n\tevents.on(...args);\n};\n\nexport const off = (...args) => {\n\tevents.off(...args);\n};\n\nconst TRIGGER_TIMEOUT = 5000;\n\nconst TRIGGER_TIMEOUT_ERROR = 'TRIGGER_TIMEOUT_ERROR';\n\nconst triggersId = new Map();\n\nconst instances = new Map();\n\nconst invalidateTriggerId = (id) => {\n\tconst appId = triggersId.get(id);\n\ttriggersId.delete(id);\n\treturn appId;\n};\n\nexport const generateTriggerId = (appId) => {\n\tconst triggerId = Random.id();\n\ttriggersId.set(triggerId, appId);\n\tsetTimeout(invalidateTriggerId, TRIGGER_TIMEOUT, triggerId);\n\treturn triggerId;\n};\n\nconst handlePayloadUserInteraction = (type, { /* appId,*/ triggerId, ...data }) => {\n\tif (!triggersId.has(triggerId)) {\n\t\treturn;\n\t}\n\tconst appId = invalidateTriggerId(triggerId);\n\tif (!appId) {\n\t\treturn;\n\t}\n\n\tconst { view } = data;\n\tlet { viewId } = data;\n\n\tif (view && view.id) {\n\t\tviewId = view.id;\n\t}\n\n\tif (!viewId) {\n\t\treturn;\n\t}\n\n\tif ([UIKitInteractionTypes.ERRORS].includes(type)) {\n\t\tevents.emit(viewId, {\n\t\t\ttype,\n\t\t\ttriggerId,\n\t\t\tviewId,\n\t\t\tappId,\n\t\t\t...data,\n\t\t});\n\t\treturn UIKitInteractionTypes.ERRORS;\n\t}\n\n\tif (\n\t\t[UIKitInteractionTypes.BANNER_UPDATE, UIKitInteractionTypes.MODAL_UPDATE, UIKitInteractionTypes.CONTEXTUAL_BAR_UPDATE].includes(type)\n\t) {\n\t\tevents.emit(viewId, {\n\t\t\ttype,\n\t\t\ttriggerId,\n\t\t\tviewId,\n\t\t\tappId,\n\t\t\t...data,\n\t\t});\n\t\treturn type;\n\t}\n\n\tif ([UIKitInteractionTypes.MODAL_OPEN].includes(type)) {\n\t\tconst instance = modal.push({\n\t\t\ttemplate: 'ModalBlock',\n\t\t\tmodifier: 'uikit',\n\t\t\tcloseOnEscape: false,\n\t\t\tdata: {\n\t\t\t\ttriggerId,\n\t\t\t\tviewId,\n\t\t\t\tappId,\n\t\t\t\t...data,\n\t\t\t},\n\t\t});\n\n\t\tinstances.set(viewId, {\n\t\t\tclose() {\n\t\t\t\tinstance.close();\n\t\t\t\tinstances.delete(viewId);\n\t\t\t},\n\t\t});\n\n\t\treturn UIKitInteractionTypes.MODAL_OPEN;\n\t}\n\n\tif ([UIKitInteractionTypes.CONTEXTUAL_BAR_OPEN].includes(type)) {\n\t\tinstances.set(viewId, {\n\t\t\tpayload: {\n\t\t\t\ttype,\n\t\t\t\ttriggerId,\n\t\t\t\tappId,\n\t\t\t\tviewId,\n\t\t\t\t...data,\n\t\t\t},\n\t\t\tclose() {\n\t\t\t\tinstances.delete(viewId);\n\t\t\t},\n\t\t});\n\n\t\tFlowRouter.setParams({ tab: 'app', context: viewId });\n\n\t\treturn UIKitInteractionTypes.CONTEXTUAL_BAR_OPEN;\n\t}\n\n\tif ([UIKitInteractionTypes.BANNER_OPEN].includes(type)) {\n\t\tbanners.open(data);\n\t\tinstances.set(viewId, {\n\t\t\tclose() {\n\t\t\t\tbanners.closeById(viewId);\n\t\t\t},\n\t\t});\n\t\treturn UIKitInteractionTypes.BANNER_OPEN;\n\t}\n\n\tif ([UIKitIncomingInteractionType.BANNER_CLOSE].includes(type)) {\n\t\tconst instance = instances.get(viewId);\n\n\t\tif (instance) {\n\t\t\tinstance.close();\n\t\t}\n\t\treturn UIKitIncomingInteractionType.BANNER_CLOSE;\n\t}\n\n\tif ([UIKitIncomingInteractionType.CONTEXTUAL_BAR_CLOSE].includes(type)) {\n\t\tconst instance = instances.get(viewId);\n\n\t\tif (instance) {\n\t\t\tinstance.close();\n\t\t}\n\t\treturn UIKitIncomingInteractionType.CONTEXTUAL_BAR_CLOSE;\n\t}\n\n\treturn UIKitInteractionTypes.MODAL_ClOSE;\n};\n\nexport const triggerAction = async ({ type, actionId, appId, rid, mid, viewId, container, ...rest }) =>\n\tnew Promise(async (resolve, reject) => {\n\t\tconst triggerId = generateTriggerId(appId);\n\n\t\tconst payload = rest.payload || rest;\n\n\t\tsetTimeout(reject, TRIGGER_TIMEOUT, [TRIGGER_TIMEOUT_ERROR, { triggerId, appId }]);\n\n\t\tconst { type: interactionType, ...data } = await APIClient.post(`apps/ui.interaction/${appId}`, {\n\t\t\ttype,\n\t\t\tactionId,\n\t\t\tpayload,\n\t\t\tcontainer,\n\t\t\tmid,\n\t\t\trid,\n\t\t\ttriggerId,\n\t\t\tviewId,\n\t\t});\n\n\t\treturn resolve(handlePayloadUserInteraction(interactionType, data));\n\t});\n\nexport const triggerBlockAction = (options) => triggerAction({ type: UIKitIncomingInteractionType.BLOCK, ...options });\n\nexport const triggerActionButtonAction = (options) =>\n\ttriggerAction({ type: UIKitIncomingInteractionType.ACTION_BUTTON, ...options }).catch(async (reason) => {\n\t\tif (Array.isArray(reason) && reason[0] === TRIGGER_TIMEOUT_ERROR) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('UIKit_Interaction_Timeout'),\n\t\t\t});\n\t\t}\n\t});\n\nexport const triggerSubmitView = async ({ viewId, ...options }) => {\n\tconst close = () => {\n\t\tconst instance = instances.get(viewId);\n\n\t\tif (instance) {\n\t\t\tinstance.close();\n\t\t}\n\t};\n\n\ttry {\n\t\tconst result = await triggerAction({\n\t\t\ttype: UIKitIncomingInteractionType.VIEW_SUBMIT,\n\t\t\tviewId,\n\t\t\t...options,\n\t\t});\n\t\tif (!result || UIKitInteractionTypes.MODAL_CLOSE === result) {\n\t\t\tclose();\n\t\t}\n\t} catch {\n\t\tclose();\n\t}\n};\n\nexport const triggerCancel = async ({ view, ...options }) => {\n\tconst instance = instances.get(view.id);\n\ttry {\n\t\tawait triggerAction({ type: UIKitIncomingInteractionType.VIEW_CLOSED, view, ...options });\n\t} finally {\n\t\tif (instance) {\n\t\t\tinstance.close();\n\t\t}\n\t}\n};\n\nexport const getUserInteractionPayloadByViewId = (viewId) => {\n\tif (!viewId) {\n\t\tthrow new Error('No viewId provided when checking for `user interaction payload`');\n\t}\n\n\tconst instance = instances.get(viewId);\n\n\tif (!instance) {\n\t\treturn {};\n\t}\n\n\treturn instance.payload;\n};\n\nMeteor.startup(() =>\n\tCachedCollectionManager.onLogin(() =>\n\t\tNotifications.onUser('uiInteraction', ({ type, ...data }) => {\n\t\t\thandlePayloadUserInteraction(type, data);\n\t\t}),\n\t),\n);\n","import './message';\nimport './messageBox/messageBox';\nimport './popup/customMessagePopups';\nimport './popup/messagePopup';\nimport './popup/messagePopupChannel';\nimport './popup/messagePopupConfig';\nimport './popup/messagePopupEmoji';\nimport './popup/messagePopupSlashCommandPreview';\n","import _ from 'underscore';\nimport dompurify from 'dompurify';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { Template } from 'meteor/templating';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\n\nimport { timeAgo } from '../../../client/lib/utils/timeAgo';\nimport { formatDateAndTime } from '../../../client/lib/utils/formatDateAndTime';\nimport { normalizeThreadTitle } from '../../threads/client/lib/normalizeThreadTitle';\nimport { MessageTypes, MessageAction } from '../../ui-utils/client';\nimport { RoomRoles, UserRoles, Roles } from '../../models/client';\nimport { Markdown } from '../../markdown/client';\nimport { t, roomTypes } from '../../utils';\nimport { AutoTranslate } from '../../autotranslate/client';\nimport { renderMentions } from '../../mentions/client/client';\nimport { renderMessageBody } from '../../../client/lib/utils/renderMessageBody';\nimport { settings } from '../../settings/client';\nimport { formatTime } from '../../../client/lib/utils/formatTime';\nimport { formatDate } from '../../../client/lib/utils/formatDate';\nimport './messageThread';\nimport './message.html';\n\nconst renderBody = (msg, settings) => {\n\tconst searchedText = msg.searchedText ? msg.searchedText : '';\n\tconst isSystemMessage = MessageTypes.isSystemMessage(msg);\n\tconst messageType = MessageTypes.getType(msg) || {};\n\n\tif (messageType.render) {\n\t\tmsg = messageType.render(msg);\n\t} else if (messageType.template) {\n\t\t// render template\n\t} else if (messageType.message) {\n\t\tmsg.msg = escapeHTML(msg.msg);\n\t\tmsg = TAPi18n.__(messageType.message, { ...(typeof messageType.data === 'function' && messageType.data(msg)) });\n\t\tmsg = dompurify.sanitize(msg);\n\t} else if (msg.u && msg.u.username === settings.Chatops_Username) {\n\t\tmsg.html = msg.msg;\n\t\tmsg = renderMentions(msg);\n\t\tmsg = msg.html;\n\t} else {\n\t\tmsg = renderMessageBody(msg);\n\t}\n\n\tif (isSystemMessage) {\n\t\tmsg.html = Markdown.parse(msg.html);\n\t}\n\n\tif (searchedText) {\n\t\tmsg = msg.replace(new RegExp(searchedText, 'gi'), (str) => `<mark>${str}</mark>`);\n\t}\n\n\treturn msg;\n};\n\nTemplate.message.helpers({\n\tenableMessageParserEarlyAdoption() {\n\t\tconst {\n\t\t\tsettings: { enableMessageParserEarlyAdoption },\n\t\t\tmsg,\n\t\t} = this;\n\t\treturn enableMessageParserEarlyAdoption && msg.md;\n\t},\n\tunread() {\n\t\tconst { msg, subscription } = this;\n\t\treturn subscription?.tunread?.includes(msg._id);\n\t},\n\tmention() {\n\t\tconst { msg, subscription } = this;\n\t\treturn subscription?.tunreadUser?.includes(msg._id);\n\t},\n\n\tall() {\n\t\tconst { msg, subscription } = this;\n\t\treturn subscription?.tunreadGroup?.includes(msg._id);\n\t},\n\tfollowing() {\n\t\tconst { msg, u } = this;\n\t\treturn msg.replies && msg.replies.indexOf(u._id) > -1;\n\t},\n\tbody() {\n\t\tconst { msg, settings } = this;\n\t\treturn Tracker.nonreactive(() => renderBody(msg, settings));\n\t},\n\ti18nReplyCounter() {\n\t\tconst { msg } = this;\n\t\tif (msg.tcount === 1) {\n\t\t\treturn 'reply_counter';\n\t\t}\n\t\treturn 'reply_counter_plural';\n\t},\n\ti18nDiscussionCounter() {\n\t\tconst { msg } = this;\n\t\treturn `<span class='reply-counter'>${msg.dcount}</span>`;\n\t},\n\tformatDateAndTime,\n\tencodeURI(text) {\n\t\treturn encodeURI(text);\n\t},\n\tbroadcast() {\n\t\tconst { msg, room = {}, u } = this;\n\t\treturn !msg.private && !msg.t && msg.u._id !== u._id && room && room.broadcast;\n\t},\n\tisIgnored() {\n\t\tconst { ignored, msg } = this;\n\t\tconst isIgnored = typeof ignored !== 'undefined' ? ignored : msg.ignored;\n\t\treturn isIgnored;\n\t},\n\tignoredClass() {\n\t\tconst { ignored, msg } = this;\n\t\tconst isIgnored = typeof ignored !== 'undefined' ? ignored : msg.ignored;\n\t\treturn isIgnored ? 'message--ignored' : '';\n\t},\n\tisDecrypting() {\n\t\tconst { msg } = this;\n\t\treturn msg.e2e === 'pending';\n\t},\n\tisBot() {\n\t\tconst { msg } = this;\n\t\treturn msg.bot && 'bot';\n\t},\n\thasAttachments() {\n\t\tconst { msg } = this;\n\t\treturn msg.attachments?.length;\n\t},\n\troleTags() {\n\t\tconst { msg, hideRoles, settings } = this;\n\t\tif (settings.hideRoles || hideRoles) {\n\t\t\treturn [];\n\t\t}\n\n\t\tif (!msg.u || !msg.u._id) {\n\t\t\treturn [];\n\t\t}\n\t\tconst userRoles = UserRoles.findOne(msg.u._id);\n\t\tconst roomRoles = RoomRoles.findOne({\n\t\t\t'u._id': msg.u._id,\n\t\t\t'rid': msg.rid,\n\t\t});\n\t\tconst roles = [...((userRoles && userRoles.roles) || []), ...((roomRoles && roomRoles.roles) || [])];\n\t\treturn Roles.find(\n\t\t\t{\n\t\t\t\t_id: {\n\t\t\t\t\t$in: roles,\n\t\t\t\t},\n\t\t\t\tdescription: {\n\t\t\t\t\t$exists: 1,\n\t\t\t\t\t$ne: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tfields: {\n\t\t\t\t\tdescription: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t},\n\tisGroupable() {\n\t\tconst { msg, room = {}, settings, groupable } = this;\n\t\tif (\n\t\t\tgroupable === false ||\n\t\t\tsettings.allowGroup === false ||\n\t\t\troom.broadcast ||\n\t\t\tmsg.groupable === false ||\n\t\t\t(MessageTypes.isSystemMessage(msg) && !msg.tmid)\n\t\t) {\n\t\t\treturn 'false';\n\t\t}\n\t},\n\tavatarFromUsername() {\n\t\tconst { msg } = this;\n\n\t\tif (msg.avatar != null && msg.avatar[0] === '@') {\n\t\t\treturn msg.avatar.replace(/^@/, '');\n\t\t}\n\t},\n\tavatarFromMessage() {\n\t\tconst { msg } = this;\n\t\tif (msg && msg.avatar) {\n\t\t\treturn encodeURI(msg.avatar);\n\t\t}\n\t\treturn '';\n\t},\n\tgetName() {\n\t\tconst { msg, settings } = this;\n\t\tif (msg.alias) {\n\t\t\treturn msg.alias;\n\t\t}\n\t\tif (!msg.u) {\n\t\t\treturn '';\n\t\t}\n\t\treturn (settings.UI_Use_Real_Name && msg.u.name) || msg.u.username;\n\t},\n\tshowUsername() {\n\t\tconst { msg, settings } = this;\n\t\treturn msg.alias || (settings.UI_Use_Real_Name && msg.u && msg.u.name);\n\t},\n\town() {\n\t\tconst { msg, u = {} } = this;\n\t\tif (msg.u && msg.u._id === u._id) {\n\t\t\treturn 'own';\n\t\t}\n\t},\n\tt() {\n\t\tconst { msg } = this;\n\t\treturn msg.t;\n\t},\n\ttimestamp() {\n\t\tconst { msg } = this;\n\t\treturn +msg.ts;\n\t},\n\tchatops() {\n\t\tconst { msg, settings } = this;\n\t\tif (msg.u && msg.u.username === settings.Chatops_Username) {\n\t\t\treturn 'chatops-message';\n\t\t}\n\t},\n\ttime() {\n\t\tconst { msg, timeAgo: useTimeAgo } = this;\n\n\t\treturn useTimeAgo ? timeAgo(msg.ts) : formatTime(msg.ts);\n\t},\n\tdate() {\n\t\tconst { msg } = this;\n\t\treturn formatDate(msg.ts);\n\t},\n\tisTemp() {\n\t\tconst { msg } = this;\n\t\tif (msg.temp === true) {\n\t\t\treturn 'temp';\n\t\t}\n\t},\n\tthreadMessage() {\n\t\tconst { msg } = this;\n\t\treturn normalizeThreadTitle(msg);\n\t},\n\tbodyClass() {\n\t\tconst { msg } = this;\n\t\treturn MessageTypes.isSystemMessage(msg) ? 'color-info-font-color' : 'color-primary-font-color';\n\t},\n\tsystem(returnClass) {\n\t\tconst { msg } = this;\n\t\tif (MessageTypes.isSystemMessage(msg)) {\n\t\t\tif (returnClass) {\n\t\t\t\treturn 'color-info-font-color';\n\t\t\t}\n\t\t\treturn 'system';\n\t\t}\n\t},\n\tshowTranslated() {\n\t\tconst { msg, subscription, settings, u } = this;\n\t\tif (settings.AutoTranslate_Enabled && msg.u && msg.u._id !== u._id && !MessageTypes.isSystemMessage(msg)) {\n\t\t\tconst autoTranslate = subscription && subscription.autoTranslate;\n\t\t\treturn (\n\t\t\t\tmsg.autoTranslateFetching ||\n\t\t\t\t(!!autoTranslate !== !!msg.autoTranslateShowInverse && msg.translations && msg.translations[settings.translateLanguage])\n\t\t\t);\n\t\t}\n\t},\n\ttranslationProvider() {\n\t\tconst instance = Template.instance();\n\t\tconst { translationProvider } = instance.data.msg;\n\t\treturn translationProvider && AutoTranslate.providersMetadata[translationProvider]?.displayName;\n\t},\n\tedited() {\n\t\tconst { msg } = this;\n\t\treturn msg.editedAt && !MessageTypes.isSystemMessage(msg);\n\t},\n\teditTime() {\n\t\tconst { msg } = this;\n\t\treturn msg.editedAt ? formatDateAndTime(msg.editedAt) : '';\n\t},\n\teditedBy() {\n\t\tconst { msg } = this;\n\t\tif (!msg.editedAt) {\n\t\t\treturn '';\n\t\t}\n\t\t// try to return the username of the editor,\n\t\t// otherwise a special \"?\" character that will be\n\t\t// rendered as a special avatar\n\t\treturn (msg.editedBy && msg.editedBy.username) || '?';\n\t},\n\tlabel() {\n\t\tconst { msg } = this;\n\n\t\tif (msg.i18nLabel) {\n\t\t\treturn t(msg.i18nLabel);\n\t\t}\n\t\tif (msg.label) {\n\t\t\treturn msg.label;\n\t\t}\n\t},\n\thasOembed() {\n\t\tconst { msg, settings } = this;\n\t\t// there is no URLs, there is no template to show the oembed (oembed package removed) or oembed is not enable\n\t\tif (!(msg.urls && msg.urls.length > 0) || !Template.oembedBaseWidget || !settings.API_Embed) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// check if oembed is disabled for message's sender\n\t\tif (\n\t\t\t(settings.API_EmbedDisabledFor || '')\n\t\t\t\t.split(',')\n\t\t\t\t.map((username) => username.trim())\n\t\t\t\t.includes(msg.u && msg.u.username)\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\treactions() {\n\t\tconst {\n\t\t\tmsg: { reactions = {} },\n\t\t\tu: { username: myUsername, name: myName },\n\t\t} = this;\n\n\t\treturn Object.entries(reactions).map(([emoji, reaction]) => {\n\t\t\tconst myDisplayName = reaction.names ? myName : `@${myUsername}`;\n\t\t\tconst displayNames = reaction.names || reaction.usernames.map((username) => `@${username}`);\n\t\t\tconst selectedDisplayNames = displayNames.slice(0, 15).filter((displayName) => displayName !== myDisplayName);\n\n\t\t\tif (displayNames.some((displayName) => displayName === myDisplayName)) {\n\t\t\t\tselectedDisplayNames.unshift(t('You'));\n\t\t\t}\n\n\t\t\tlet usernames;\n\n\t\t\tif (displayNames.length > 15) {\n\t\t\t\tusernames = `${selectedDisplayNames.join(', ')} ${t('And_more', {\n\t\t\t\t\tlength: displayNames.length - 15,\n\t\t\t\t}).toLowerCase()}`;\n\t\t\t} else if (displayNames.length > 1) {\n\t\t\t\tusernames = `${selectedDisplayNames.slice(0, -1).join(', ')} ${t('and')} ${selectedDisplayNames[selectedDisplayNames.length - 1]}`;\n\t\t\t} else {\n\t\t\t\tusernames = selectedDisplayNames[0];\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\temoji,\n\t\t\t\tcount: displayNames.length,\n\t\t\t\tusernames,\n\t\t\t\treaction: ` ${t('Reacted_with').toLowerCase()} ${emoji}`,\n\t\t\t\tuserReacted: displayNames.indexOf(myDisplayName) > -1,\n\t\t\t};\n\t\t});\n\t},\n\tmarkUserReaction(reaction) {\n\t\tif (reaction.userReacted) {\n\t\t\treturn {\n\t\t\t\tclass: 'selected',\n\t\t\t};\n\t\t}\n\t},\n\thideReactions() {\n\t\tconst { msg } = this;\n\t\tif (_.isEmpty(msg.reactions)) {\n\t\t\treturn 'hidden';\n\t\t}\n\t},\n\thideAddReaction() {\n\t\tconst { room, u, msg, subscription } = this;\n\n\t\tif (!room) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (!subscription) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (msg.private) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (roomTypes.readOnly(room._id, u._id) && !room.reactWhenReadOnly) {\n\t\t\treturn true;\n\t\t}\n\t},\n\thideMessageActions() {\n\t\tconst { msg } = this;\n\n\t\treturn msg.private || MessageTypes.isSystemMessage(msg);\n\t},\n\tactionLinks() {\n\t\tconst { msg } = this;\n\t\t// remove 'method_id' and 'params' properties\n\t\treturn _.map(msg.actionLinks, function (actionLink, key) {\n\t\t\treturn _.extend(\n\t\t\t\t{\n\t\t\t\t\tid: key,\n\t\t\t\t},\n\t\t\t\t_.omit(actionLink, 'method_id', 'params'),\n\t\t\t);\n\t\t});\n\t},\n\thideActionLinks() {\n\t\tconst { msg } = this;\n\t\tif (_.isEmpty(msg.actionLinks)) {\n\t\t\treturn 'hidden';\n\t\t}\n\t},\n\tinjectMessage(data, { _id, rid }) {\n\t\tdata.msg = { _id, rid };\n\t},\n\tinjectIndex(data, index) {\n\t\tdata.index = index;\n\t},\n\tinjectSettings(data, settings) {\n\t\tdata.settings = settings;\n\t},\n\tclassName() {\n\t\treturn this.msg.className;\n\t},\n\tchannelName() {\n\t\tconst { subscription } = this;\n\t\t// const subscription = Subscriptions.findOne({ rid: this.rid });\n\t\treturn subscription && subscription.name;\n\t},\n\troomIcon() {\n\t\tconst { room } = this;\n\t\tif (room && room.t === 'd') {\n\t\t\treturn 'at';\n\t\t}\n\t\treturn roomTypes.getIcon(room);\n\t},\n\tcustomClass() {\n\t\tconst { customClass, msg } = this;\n\t\treturn customClass || msg.customClass;\n\t},\n\tfromSearch() {\n\t\tconst { customClass, msg } = this;\n\t\treturn [msg.customClass, customClass].includes('search');\n\t},\n\tactionContext() {\n\t\tconst { msg } = this;\n\t\treturn msg.actionContext;\n\t},\n\tmessageActions(group) {\n\t\tconst { msg, context: ctx } = this;\n\t\tlet messageGroup = group;\n\t\tlet context = ctx || msg.actionContext;\n\n\t\tif (!group) {\n\t\t\tmessageGroup = 'message';\n\t\t}\n\n\t\tif (!context) {\n\t\t\tcontext = 'message';\n\t\t}\n\n\t\treturn MessageAction.getButtons(this, context, messageGroup);\n\t},\n\tisSnippet() {\n\t\tconst { msg } = this;\n\t\treturn msg.actionContext === 'snippeted';\n\t},\n\tisThreadReply() {\n\t\tconst {\n\t\t\tgroupable,\n\t\t\tmsg: { tmid, t, groupable: _groupable },\n\t\t\tsettings: { showreply },\n\t\t} = this;\n\t\treturn !(groupable === true || _groupable === true) && !!(tmid && showreply && (!t || t === 'e2e'));\n\t},\n\tshouldHideBody() {\n\t\tconst {\n\t\t\tmsg: { tmid, actionContext },\n\t\t\tsettings: { showreply },\n\t\t\tcontext,\n\t\t} = this;\n\t\treturn showreply && tmid && !(actionContext || context);\n\t},\n\tcollapsed() {\n\t\tconst {\n\t\t\tmsg: { tmid, collapsed },\n\t\t\tsettings: { showreply },\n\t\t\tshouldCollapseReplies,\n\t\t} = this;\n\t\tconst isCollapsedThreadReply = shouldCollapseReplies && tmid && showreply && collapsed !== false;\n\t\tif (isCollapsedThreadReply) {\n\t\t\treturn 'collapsed';\n\t\t}\n\t},\n\tcollapseSwitchClass() {\n\t\tconst {\n\t\t\tmsg: { collapsed = true },\n\t\t} = this;\n\t\treturn collapsed ? 'icon-right-dir' : 'icon-down-dir';\n\t},\n\tparentMessage() {\n\t\tconst {\n\t\t\tmsg: { threadMsg },\n\t\t} = this;\n\t\treturn threadMsg;\n\t},\n\tshowStar() {\n\t\tconst { msg } = this;\n\t\treturn (\n\t\t\tmsg.starred &&\n\t\t\tmsg.starred.length > 0 &&\n\t\t\tmsg.starred.find((star) => star._id === Meteor.userId()) &&\n\t\t\t!(msg.actionContext === 'starred' || this.context === 'starred')\n\t\t);\n\t},\n\treadReceipt() {\n\t\tif (!settings.get('Message_Read_Receipt_Enabled')) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn {\n\t\t\treadByEveryone: (!this.msg.unread && 'read') || 'color-component-color',\n\t\t};\n\t},\n});\n\nconst hasTempClass = (node) => node.classList.contains('temp');\n\nconst getPreviousSentMessage = (currentNode) => {\n\tif (hasTempClass(currentNode)) {\n\t\treturn currentNode.previousElementSibling;\n\t}\n\tif (currentNode.previousElementSibling != null) {\n\t\tlet previousValid = currentNode.previousElementSibling;\n\t\twhile (previousValid != null && (hasTempClass(previousValid) || !previousValid.classList.contains('message'))) {\n\t\t\tpreviousValid = previousValid.previousElementSibling;\n\t\t}\n\t\treturn previousValid;\n\t}\n};\n\nconst isNewDay = (currentNode, previousNode, forceDate, showDateSeparator) => {\n\tif (!showDateSeparator) {\n\t\treturn false;\n\t}\n\n\tif (forceDate || !previousNode) {\n\t\treturn true;\n\t}\n\n\tconst { dataset: currentDataset } = currentNode;\n\tconst { dataset: previousDataset } = previousNode;\n\tconst previousMessageDate = new Date(parseInt(previousDataset.timestamp));\n\tconst currentMessageDate = new Date(parseInt(currentDataset.timestamp));\n\n\tif (previousMessageDate.toDateString() !== currentMessageDate.toDateString()) {\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\nconst isSequential = (currentNode, previousNode, forceDate, period, showDateSeparator, shouldCollapseReplies) => {\n\tif (!previousNode) {\n\t\treturn false;\n\t}\n\n\tif (showDateSeparator && forceDate) {\n\t\treturn false;\n\t}\n\n\tconst { dataset: currentDataset } = currentNode;\n\tconst { dataset: previousDataset } = previousNode;\n\tconst previousMessageDate = new Date(parseInt(previousDataset.timestamp));\n\tconst currentMessageDate = new Date(parseInt(currentDataset.timestamp));\n\n\tif (showDateSeparator && previousMessageDate.toDateString() !== currentMessageDate.toDateString()) {\n\t\treturn false;\n\t}\n\n\tif (!shouldCollapseReplies && currentDataset.tmid) {\n\t\treturn previousDataset.id === currentDataset.tmid || previousDataset.tmid === currentDataset.tmid;\n\t}\n\n\tif (previousDataset.tmid && !currentDataset.tmid) {\n\t\treturn false;\n\t}\n\n\tif ([previousDataset.groupable, currentDataset.groupable].includes('false')) {\n\t\treturn false;\n\t}\n\n\tif (previousDataset.username !== currentDataset.username) {\n\t\treturn false;\n\t}\n\n\tif (previousDataset.alias !== currentDataset.alias) {\n\t\treturn false;\n\t}\n\n\tif (parseInt(currentDataset.timestamp) - parseInt(previousDataset.timestamp) <= period) {\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\nconst processSequentials = ({ index, currentNode, settings, forceDate, showDateSeparator = true, groupable, shouldCollapseReplies }) => {\n\tif (!showDateSeparator && !groupable) {\n\t\treturn;\n\t}\n\t// const currentDataset = currentNode.dataset;\n\tconst previousNode = (index === undefined || index > 0) && getPreviousSentMessage(currentNode);\n\tconst nextNode = currentNode.nextElementSibling;\n\n\tif (!previousNode) {\n\t\tsetTimeout(() => {\n\t\t\tcurrentNode.dispatchEvent(new CustomEvent('MessageGroup', { bubbles: true }));\n\t\t}, 100);\n\t}\n\tif (isSequential(currentNode, previousNode, forceDate, settings.Message_GroupingPeriod, showDateSeparator, shouldCollapseReplies)) {\n\t\tcurrentNode.classList.add('sequential');\n\t} else {\n\t\tcurrentNode.classList.remove('sequential');\n\t}\n\n\tif (isNewDay(currentNode, previousNode, forceDate, showDateSeparator)) {\n\t\tcurrentNode.classList.add('new-day');\n\t} else {\n\t\tcurrentNode.classList.remove('new-day');\n\t}\n\n\tif (nextNode && nextNode.dataset) {\n\t\tif (isSequential(nextNode, currentNode, forceDate, settings.Message_GroupingPeriod, showDateSeparator, shouldCollapseReplies)) {\n\t\t\tnextNode.classList.add('sequential');\n\t\t} else {\n\t\t\tnextNode.classList.remove('sequential');\n\t\t}\n\n\t\tif (isNewDay(nextNode, currentNode, forceDate, showDateSeparator)) {\n\t\t\tnextNode.classList.add('new-day');\n\t\t} else {\n\t\t\tnextNode.classList.remove('new-day');\n\t\t}\n\t}\n};\n\nTemplate.message.onRendered(function () {\n\tconst currentNode = this.firstNode;\n\tthis.autorun(() => processSequentials({ currentNode, ...Template.currentData() }));\n});\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\nimport _ from 'underscore';\n\nimport { callWithErrorHandling } from '../../../client/lib/utils/callWithErrorHandling';\nimport { Messages } from '../../models/client';\nimport { normalizeThreadTitle } from '../../threads/client/lib/normalizeThreadTitle';\nimport './messageThread.html';\n\nconst findParentMessage = (() => {\n\tconst waiting = [];\n\tlet resolve;\n\tlet pending = new Promise((r) => {\n\t\tresolve = r;\n\t});\n\n\tconst getMessages = _.debounce(async function () {\n\t\tconst _tmp = [...waiting];\n\t\twaiting.length = 0;\n\t\tresolve(callWithErrorHandling('getMessages', _tmp));\n\t\tpending = new Promise((r) => {\n\t\t\tresolve = r;\n\t\t});\n\t}, 500);\n\n\tconst get = async (tmid) => {\n\t\tgetMessages();\n\t\tconst messages = await pending;\n\t\treturn messages.find(({ _id }) => _id === tmid);\n\t};\n\n\treturn async (tmid) => {\n\t\tconst message = Messages.findOne({ _id: tmid });\n\n\t\tif (message) {\n\t\t\treturn message;\n\t\t}\n\n\t\tif (waiting.indexOf(tmid) === -1) {\n\t\t\twaiting.push(tmid);\n\t\t}\n\t\treturn get(tmid);\n\t};\n})();\n\nTemplate.messageThread.helpers({\n\tparentMessage() {\n\t\tconst { parentMessage } = Template.instance();\n\t\tif (parentMessage) {\n\t\t\treturn normalizeThreadTitle(parentMessage.get());\n\t\t}\n\t},\n});\n\nTemplate.messageThread.onCreated(function () {\n\tthis.parentMessage = new ReactiveVar();\n\tthis.autorun(async () => {\n\t\tconst { tmid } = Template.currentData();\n\t\tthis.parentMessage.set(await findParentMessage(tmid));\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { actionLinks } from '../../action-links/client';\nimport { Rooms } from '../../models';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\n\nactionLinks.register('joinJitsiCall', function (message, params, instance) {\n\tif (Session.get('openedRoom')) {\n\t\tconst rid = Session.get('openedRoom');\n\n\t\tconst room = Rooms.findOne({ _id: rid });\n\t\tconst username = Meteor.user()?.username;\n\t\tconst currentTime = new Date().getTime();\n\t\tconst jitsiTimeout = new Date((room && room.jitsiTimeout) || currentTime).getTime();\n\n\t\tif (room && room?.muted?.includes(username)) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('You_have_been_muted', '') });\n\t\t} else if (jitsiTimeout > currentTime) {\n\t\t\tinstance.tabBar.open('video');\n\t\t} else {\n\t\t\tdispatchToastMessage({ type: 'info', message: TAPi18n.__('Call Already Ended', '') });\n\t\t}\n\t}\n});\n","import './views/bbbLiveView.html';\nimport './tabBar';\nimport './actionLink';\nimport '../lib/messageType';\n","import React, { useMemo, lazy, ReactNode } from 'react';\nimport { useStableArray } from '@rocket.chat/fuselage-hooks';\nimport { Option, Badge } from '@rocket.chat/fuselage';\n\nimport { useSetting } from '../../../client/contexts/SettingsContext';\nimport { addAction, ToolboxActionConfig } from '../../../client/views/room/lib/Toolbox';\nimport { useTranslation } from '../../../client/contexts/TranslationContext';\nimport { useUser } from '../../../client/contexts/UserContext';\nimport Header from '../../../client/components/Header';\n\nconst templateBBB = lazy(() => import('../../../client/views/room/contextualBar/Call/BBB'));\n\naddAction('bbb_video', ({ room }) => {\n\tconst enabled = useSetting('bigbluebutton_Enabled');\n\tconst t = useTranslation();\n\n\tconst live = room?.streamingOptions && room.streamingOptions.type === 'call';\n\n\tconst enabledDirect = useSetting('bigbluebutton_enable_d');\n\tconst enabledGroup = useSetting('bigbluebutton_enable_p');\n\tconst enabledChannel = useSetting('bigbluebutton_enable_c');\n\tconst enabledTeams = useSetting('bigbluebutton_enable_teams');\n\n\tconst groups = useStableArray(\n\t\t[enabledDirect && 'direct', 'direct_multiple', enabledGroup && 'group', enabledTeams && 'team', enabledChannel && 'channel'].filter(\n\t\t\tBoolean,\n\t\t) as ToolboxActionConfig['groups'],\n\t);\n\tconst user = useUser();\n\tconst username = user ? user.username : '';\n\tconst enableOption = enabled && (!username || !room.muted?.includes(username));\n\n\treturn useMemo(\n\t\t() =>\n\t\t\tenableOption\n\t\t\t\t? {\n\t\t\t\t\t\tgroups,\n\t\t\t\t\t\tid: 'bbb_video',\n\t\t\t\t\t\ttitle: 'BBB_Video_Call',\n\t\t\t\t\t\ticon: 'phone',\n\t\t\t\t\t\ttemplate: templateBBB,\n\t\t\t\t\t\torder: live ? -1 : 4,\n\t\t\t\t\t\trenderAction: (props): ReactNode => (\n\t\t\t\t\t\t\t<Header.ToolBoxAction {...props}>\n\t\t\t\t\t\t\t\t{live ? (\n\t\t\t\t\t\t\t\t\t<Header.Badge title={t('Started_a_video_call')} variant='primary'>\n\t\t\t\t\t\t\t\t\t\t!\n\t\t\t\t\t\t\t\t\t</Header.Badge>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</Header.ToolBoxAction>\n\t\t\t\t\t\t),\n\t\t\t\t\t\trenderOption: ({ label: { title, icon }, ...props }: any): ReactNode => (\n\t\t\t\t\t\t\t<Option label={title} title={title} icon={icon} {...props}>\n\t\t\t\t\t\t\t\t<Badge title={t('Started_a_video_call')} variant='primary'>\n\t\t\t\t\t\t\t\t\t!\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t),\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[enableOption, groups, live, t],\n\t);\n});\n\nconst templateJitsi = lazy(() => import('../../../client/views/room/contextualBar/Call/Jitsi'));\n\naddAction('video', ({ room }) => {\n\tconst enabled = useSetting('Jitsi_Enabled');\n\tconst t = useTranslation();\n\n\tconst enabledChannel = useSetting('Jitsi_Enable_Channels');\n\tconst enabledTeams = useSetting('Jitsi_Enable_Teams');\n\tconst enabledLiveChat = useSetting('Omnichannel_call_provider') === 'Jitsi';\n\n\tconst groups = useStableArray(\n\t\t['direct', 'direct_multiple', 'group', enabledLiveChat && 'live', enabledTeams && 'team', enabledChannel && 'channel'].filter(\n\t\t\tBoolean,\n\t\t) as ToolboxActionConfig['groups'],\n\t);\n\n\tconst currentTime = new Date().getTime();\n\tconst jitsiTimeout = new Date(room?.jitsiTimeout || currentTime).getTime();\n\tconst live = jitsiTimeout > currentTime || null;\n\tconst user = useUser();\n\tconst username = user ? user.username : '';\n\tconst enableOption = enabled && (!username || !room.muted?.includes(username));\n\n\treturn useMemo(\n\t\t() =>\n\t\t\tenableOption\n\t\t\t\t? {\n\t\t\t\t\t\tgroups,\n\t\t\t\t\t\tid: 'video',\n\t\t\t\t\t\ttitle: 'Call',\n\t\t\t\t\t\ticon: 'phone',\n\t\t\t\t\t\ttemplate: templateJitsi,\n\t\t\t\t\t\tfull: true,\n\t\t\t\t\t\torder: live ? -1 : 4,\n\t\t\t\t\t\trenderAction: (props): ReactNode => (\n\t\t\t\t\t\t\t<Header.ToolBoxAction {...props}>\n\t\t\t\t\t\t\t\t{live && (\n\t\t\t\t\t\t\t\t\t<Header.Badge title={t('Started_a_video_call')} variant='primary'>\n\t\t\t\t\t\t\t\t\t\t!\n\t\t\t\t\t\t\t\t\t</Header.Badge>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Header.ToolBoxAction>\n\t\t\t\t\t\t),\n\t\t\t\t\t\trenderOption: ({ label: { title, icon }, ...props }: any): ReactNode => (\n\t\t\t\t\t\t\t<Option label={title} title={title} icon={icon} {...props}>\n\t\t\t\t\t\t\t\t{live && (\n\t\t\t\t\t\t\t\t\t<Badge title={t('Started_a_video_call')} variant='primary'>\n\t\t\t\t\t\t\t\t\t\t!\n\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t),\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[enableOption, groups, live, t],\n\t);\n});\n","import { Meteor } from 'meteor/meteor';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { MessageTypes } from '../../ui-utils';\n\nMeteor.startup(function () {\n\tMessageTypes.registerType({\n\t\tid: 'jitsi_call_started',\n\t\tsystem: true,\n\t\tmessage: TAPi18n.__('Started_a_video_call'),\n\t});\n});\n","import { AuthzCachedCollection } from '../../../models';\n\nexport const ChatPermissions = AuthzCachedCollection.collection;\n","import { Meteor } from 'meteor/meteor';\n\nexport const rolesStreamer = new Meteor.Streamer('roles');\n","import { Meteor } from 'meteor/meteor';\n\nimport { ChatPermissions } from './lib/ChatPermissions';\nimport * as Models from '../../models/client';\nimport { AuthorizationUtils } from '../lib/AuthorizationUtils';\nimport { IUser } from '../../../definition/IUser';\nimport { IRole } from '../../../definition/IRole';\nimport { IPermission } from '../../../definition/IPermission';\n\nconst isValidScope = (scope: IRole['scope']): boolean => typeof scope === 'string' && scope in Models;\n\nconst createPermissionValidator =\n\t(quantifier: (predicate: (permissionId: IPermission['_id']) => boolean) => boolean) =>\n\t(permissionIds: IPermission['_id'][], scope: string | undefined, userId: IUser['_id']): boolean => {\n\t\tconst user: IUser | null = Models.Users.findOneById(userId, { fields: { roles: 1 } });\n\n\t\tconst checkEachPermission = quantifier.bind(permissionIds);\n\n\t\treturn checkEachPermission((permissionId) => {\n\t\t\tif (user?.roles) {\n\t\t\t\tif (AuthorizationUtils.isPermissionRestrictedForRoleList(permissionId, user.roles)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst permission: IPermission | null = ChatPermissions.findOne(permissionId, {\n\t\t\t\tfields: { roles: 1 },\n\t\t\t});\n\t\t\tconst roles = permission?.roles ?? [];\n\n\t\t\treturn roles.some((roleName) => {\n\t\t\t\tconst role = Models.Roles.findOne(roleName, { fields: { scope: 1 } });\n\t\t\t\tconst roleScope = role?.scope;\n\n\t\t\t\tif (!isValidScope(roleScope)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tconst model = Models[roleScope as keyof typeof Models];\n\t\t\t\treturn model.isUserInRole && model.isUserInRole(userId, roleName, scope);\n\t\t\t});\n\t\t});\n\t};\n\nconst atLeastOne = createPermissionValidator(Array.prototype.some);\n\nconst all = createPermissionValidator(Array.prototype.every);\n\nconst validatePermissions = (\n\tpermissions: IPermission['_id'] | IPermission['_id'][],\n\tscope: string | undefined,\n\tpredicate: (permissionIds: IPermission['_id'][], scope: string | undefined, userId: IUser['_id']) => boolean,\n\tuserId?: IUser['_id'] | null,\n): boolean => {\n\tuserId = userId ?? Meteor.userId();\n\n\tif (!userId) {\n\t\treturn false;\n\t}\n\n\tif (!Models.AuthzCachedCollection.ready.get()) {\n\t\treturn false;\n\t}\n\n\treturn predicate(([] as IPermission['_id'][]).concat(permissions), scope, userId);\n};\n\nexport const hasAllPermission = (permissions: IPermission['_id'] | IPermission['_id'][], scope?: string): boolean =>\n\tvalidatePermissions(permissions, scope, all);\n\nexport const hasAtLeastOnePermission = (permissions: IPermission['_id'] | IPermission['_id'][], scope?: string): boolean =>\n\tvalidatePermissions(permissions, scope, atLeastOne);\n\nexport const userHasAllPermission = (\n\tpermissions: IPermission['_id'] | IPermission['_id'][],\n\tscope?: string,\n\tuserId?: IUser['_id'] | null,\n): boolean => validatePermissions(permissions, scope, all, userId);\n\nexport const hasPermission = hasAllPermission;\n","import { Roles } from '../../models';\n\nexport const hasRole = (userId, roleNames, scope) => {\n\troleNames = [].concat(roleNames);\n\treturn Roles.isUserInRoles(userId, roleNames, scope);\n};\n","import { hasAllPermission, hasAtLeastOnePermission, hasPermission, userHasAllPermission } from './hasPermission';\nimport { hasRole } from './hasRole';\nimport { AuthorizationUtils } from '../lib/AuthorizationUtils';\nimport './requiresPermission.html';\nimport './startup';\n\nexport { hasAllPermission, hasAtLeastOnePermission, hasRole, hasPermission, userHasAllPermission, AuthorizationUtils };\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { hasAtLeastOnePermission } from './hasPermission';\nimport { CachedCollectionManager } from '../../ui-cached-collection';\nimport { APIClient } from '../../utils/client';\nimport { Roles } from '../../models/client';\nimport { rolesStreamer } from './lib/streamer';\nimport { registerAdminSidebarItem } from '../../../client/views/admin';\n\nMeteor.startup(() => {\n\tCachedCollectionManager.onLogin(async () => {\n\t\tconst { roles } = await APIClient.v1.get('roles.list');\n\t\t// if a role is checked before this collection is populated, it will return undefined\n\t\tRoles._collection._docs._map = new Map(roles.map((record) => [record._id, record]));\n\t\tObject.values(Roles._collection.queries).forEach((query) => Roles._collection._recomputeResults(query));\n\n\t\tRoles.ready.set(true);\n\t});\n\n\tregisterAdminSidebarItem({\n\t\thref: 'admin-permissions',\n\t\ti18nLabel: 'Permissions',\n\t\ticon: 'lock',\n\t\tpermissionGranted() {\n\t\t\treturn hasAtLeastOnePermission(['access-permissions', 'access-setting-permissions']);\n\t\t},\n\t});\n\tconst events = {\n\t\tchanged: (role) => {\n\t\t\tdelete role.type;\n\t\t\tRoles.upsert({ _id: role._id }, role);\n\t\t},\n\t\tremoved: (role) => {\n\t\t\tRoles.remove({ _id: role._id });\n\t\t},\n\t};\n\n\tTracker.autorun((c) => {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn;\n\t\t}\n\t\trolesStreamer.on('roles', (role) => events[role.type](role));\n\t\tc.stop();\n\t});\n});\n","const restrictedRolePermissions = new Map();\n\nexport const AuthorizationUtils = class {\n\tstatic addRolePermissionWhiteList(roleId: string, list: string[]): void {\n\t\tif (!roleId) {\n\t\t\tthrow new Error('invalid-param');\n\t\t}\n\n\t\tif (!list) {\n\t\t\tthrow new Error('invalid-param');\n\t\t}\n\n\t\tif (!restrictedRolePermissions.has(roleId)) {\n\t\t\trestrictedRolePermissions.set(roleId, new Set());\n\t\t}\n\n\t\tconst rules = restrictedRolePermissions.get(roleId);\n\n\t\tfor (const permissionId of list) {\n\t\t\trules.add(permissionId);\n\t\t}\n\t}\n\n\tstatic isPermissionRestrictedForRole(permissionId: string, roleId: string): boolean {\n\t\tif (!roleId || !permissionId) {\n\t\t\tthrow new Error('invalid-param');\n\t\t}\n\n\t\tif (!restrictedRolePermissions.has(roleId)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst rules = restrictedRolePermissions.get(roleId);\n\t\tif (!rules || !rules.size) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !rules.has(permissionId);\n\t}\n\n\tstatic isPermissionRestrictedForRoleList(permissionId: string, roleList: string[]): boolean {\n\t\tif (!roleList || !permissionId) {\n\t\t\tthrow new Error('invalid-param');\n\t\t}\n\n\t\tfor (const roleId of roleList) {\n\t\t\tif (this.isPermissionRestrictedForRole(permissionId, roleId)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n};\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/index.js');\n}\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/index.js');\n}\n","import _ from 'underscore';\nimport { Blaze } from 'meteor/blaze';\nimport { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\n\nimport { emoji } from '../../lib/rocketchat';\n\nlet updatePositions = true;\n\nexport const EmojiPicker = {\n\twidth: 365,\n\theight: 300,\n\tinitiated: false,\n\tinput: null,\n\tsource: null,\n\trecent: [],\n\ttone: null,\n\topened: false,\n\tpickCallback: null,\n\tscrollingToCategory: false,\n\tcurrentCategory: new ReactiveVar('recent'),\n\tasync init() {\n\t\tif (this.initiated) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.initiated = true;\n\n\t\tthis.recent = Meteor._localStorage.getItem('emoji.recent') ? Meteor._localStorage.getItem('emoji.recent').split(',') : [];\n\t\tthis.tone = Meteor._localStorage.getItem('emoji.tone') || 0;\n\n\t\tBlaze.render(Template.emojiPicker, document.body);\n\n\t\t$(document).click((event) => {\n\t\t\tif (!this.opened) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!$(event.target).closest('.emoji-picker').length && !$(event.target).is('.emoji-picker')) {\n\t\t\t\tif (this.opened) {\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$(window).resize(\n\t\t\t_.debounce(() => {\n\t\t\t\tif (!this.opened) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.setPosition();\n\t\t\t}, 300),\n\t\t);\n\t},\n\tisOpened() {\n\t\treturn this.opened;\n\t},\n\tsetTone(tone) {\n\t\tthis.tone = tone;\n\t\tMeteor._localStorage.setItem('emoji.tone', tone);\n\t},\n\tgetTone() {\n\t\treturn this.tone;\n\t},\n\tgetRecent() {\n\t\treturn this.recent;\n\t},\n\tsetPosition() {\n\t\tconst windowHeight = window.innerHeight;\n\t\tconst windowWidth = window.innerWidth;\n\t\tconst windowBorder = 10;\n\t\tconst sourcePos = $(this.source).offset();\n\t\tconst { left, top } = sourcePos;\n\t\tconst cssProperties = { top, left };\n\t\tconst isLargerThanWindow = this.width + windowBorder > windowWidth;\n\n\t\tif (top + this.height >= windowHeight) {\n\t\t\tcssProperties.top = windowHeight - this.height - windowBorder - 75;\n\t\t}\n\n\t\tif (left < windowBorder) {\n\t\t\tcssProperties.left = isLargerThanWindow ? 0 : windowBorder;\n\t\t}\n\n\t\tif (left + this.width >= windowWidth) {\n\t\t\tcssProperties.left = isLargerThanWindow ? 0 : windowWidth - this.width - windowBorder;\n\t\t}\n\n\t\treturn $('.emoji-picker').css(cssProperties);\n\t},\n\tasync open(source, callback) {\n\t\tif (!this.initiated) {\n\t\t\tawait this.init();\n\t\t}\n\t\tthis.pickCallback = callback;\n\t\tthis.source = source;\n\n\t\tconst containerEl = this.setPosition();\n\t\tcontainerEl.addClass('show');\n\n\t\tconst emojiInput = containerEl.find('.js-emojipicker-search');\n\t\tif (emojiInput) {\n\t\t\temojiInput.focus();\n\t\t}\n\n\t\tthis.calculateCategoryPositions();\n\n\t\tif (this.recent.length === 0 && this.currentCategory.get() === 'recent') {\n\t\t\tthis.showCategory(emoji.packages.emojiCustom.list.length > 0 ? 'rocket' : 'people', false);\n\t\t}\n\n\t\tthis.opened = true;\n\t},\n\tclose() {\n\t\t$('.emoji-picker').removeClass('show');\n\t\tthis.opened = false;\n\t\tthis.source.focus();\n\t},\n\tpickEmoji(emoji) {\n\t\tthis.pickCallback(emoji);\n\n\t\tthis.close();\n\t\tthis.addRecent(emoji);\n\t},\n\taddRecent(_emoji) {\n\t\tconst pos = this.recent.indexOf(_emoji);\n\n\t\tif (pos !== -1) {\n\t\t\tthis.recent.splice(pos, 1);\n\t\t}\n\n\t\tthis.recent.unshift(_emoji);\n\n\t\t// limit recent emojis to 27 (3 rows of 9)\n\t\tthis.recent.splice(27);\n\n\t\tupdatePositions = true;\n\n\t\tMeteor._localStorage.setItem('emoji.recent', this.recent);\n\t\temoji.packages.base.emojisByCategory.recent = this.recent;\n\t\tthis.updateRecent('recent');\n\t},\n\tremoveFromRecent(_emoji) {\n\t\tconst pos = this.recent.indexOf(_emoji);\n\t\tif (pos === -1) {\n\t\t\treturn;\n\t\t}\n\t\tthis.recent.splice(pos, 1);\n\t\tMeteor._localStorage.setItem('emoji.recent', this.recent);\n\t},\n\tasync updateRecent(category) {\n\t\tconst emojiPickerImport = await import('../emojiPicker');\n\t\tconst { updateRecentEmoji } = emojiPickerImport;\n\t\tupdateRecentEmoji(category);\n\t},\n\tcalculateCategoryPositions() {\n\t\tif (!updatePositions) {\n\t\t\treturn;\n\t\t}\n\t\tupdatePositions = false;\n\n\t\tconst containerScroll = $('.emoji-picker .emojis').scrollTop();\n\n\t\tthis.catPositions = Array.from(document.querySelectorAll('.emoji-list-category')).map((el) => {\n\t\t\tconst { top } = $(el).position();\n\t\t\treturn {\n\t\t\t\tel,\n\t\t\t\ttop: top + containerScroll,\n\t\t\t};\n\t\t});\n\t},\n\tgetCategoryPositions() {\n\t\treturn this.catPositions;\n\t},\n\tshowCategory(category, animate = true) {\n\t\tthis.scrollingToCategory = animate;\n\n\t\t$('.emoji-picker .js-emojipicker-search').val('').change().focus();\n\n\t\tthis.currentCategory.set(category);\n\n\t\tTracker.afterFlush(() => {\n\t\t\tconst header = $(`#emoji-list-category-${category}`);\n\t\t\tconst container = $('.emoji-picker .emojis');\n\n\t\t\tconst scrollTop = header.position().top + container.scrollTop(); // - container.position().top;\n\n\t\t\tif (animate) {\n\t\t\t\treturn container.animate(\n\t\t\t\t\t{\n\t\t\t\t\t\tscrollTop,\n\t\t\t\t\t},\n\t\t\t\t\t300,\n\t\t\t\t\t() => {\n\t\t\t\t\t\tthis.scrollingToCategory = false;\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tcontainer.scrollTop(scrollTop);\n\t\t});\n\t},\n};\n","import { isIE11 } from '../../../client/lib/utils/isIE11';\nimport { emoji } from '../lib/rocketchat';\n\n/*\n * emojiParser is a function that will replace emojis\n * @param {Object} message - The message object\n */\n\nconst emojiParser = (message) => {\n\tif (!message.html?.trim()) {\n\t\treturn message;\n\t}\n\n\tlet html = message.html.trim();\n\n\t// &#39; to apostrophe (') for emojis such as :')\n\thtml = html.replace(/&#39;/g, \"'\");\n\n\t// '<br>' to ' <br> ' for emojis such at line breaks\n\thtml = html.replace(/<br>/g, ' <br> ');\n\n\thtml = Object.entries(emoji.packages)\n\t\t.reverse()\n\t\t.reduce((value, [, emojiPackage]) => emojiPackage.render(value), html);\n\n\tconst checkEmojiOnly = document.createElement('div');\n\n\tcheckEmojiOnly.innerHTML = html;\n\n\tconst emojis = Array.from(checkEmojiOnly.querySelectorAll('.emoji:not(:empty), .emojione:not(:empty)'));\n\n\tlet hasText = false;\n\n\tif (!isIE11) {\n\t\tconst filter = (node) => {\n\t\t\tif (node.nodeType === Node.ELEMENT_NODE && (node.classList.contains('emojione') || node.classList.contains('emoji'))) {\n\t\t\t\treturn NodeFilter.FILTER_REJECT;\n\t\t\t}\n\t\t\treturn NodeFilter.FILTER_ACCEPT;\n\t\t};\n\n\t\tconst walker = document.createTreeWalker(checkEmojiOnly, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_TEXT, filter);\n\n\t\twhile (walker.nextNode()) {\n\t\t\tif (walker.currentNode.nodeType === Node.TEXT_NODE && walker.currentNode.nodeValue.trim() !== '') {\n\t\t\t\thasText = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tconst emojiOnly = emojis.length && !hasText;\n\n\t\tif (emojiOnly) {\n\t\t\tfor (let i = 0, len = emojis.length; i < len; i++) {\n\t\t\t\tconst { classList } = emojis[i];\n\t\t\t\tclassList.add('big');\n\t\t\t}\n\t\t\thtml = checkEmojiOnly.innerHTML;\n\t\t}\n\t}\n\n\t// apostrophe (') back to &#39;\n\thtml = html.replace(/\\'/g, '&#39;');\n\n\t// line breaks ' <br> ' back to '<br>'\n\thtml = html.replace(/ <br> /g, '<br>');\n\n\treturn { ...message, html };\n};\n\nexport { emojiParser };\n\nexport const createEmojiMessageRenderer = () => emojiParser;\n","export { EmojiPicker } from './lib/EmojiPicker';\nexport { emoji } from '../lib/rocketchat';\nexport { createEmojiMessageRenderer } from './emojiParser';\n","import { emojioneRender } from '../../emoji-emojione/lib/emojioneRender';\n\nlet EmojiPicker;\nconst removeFromRecent = (emoji) => {\n\tif (!EmojiPicker) {\n\t\t// since this function will be only called client side, the import needs to happen here\n\t\t({ EmojiPicker } = require('../client/lib/EmojiPicker'));\n\t}\n\tEmojiPicker.removeFromRecent(emoji.replace(/(^:|:$)/g, ''));\n};\n\nexport const emoji = {\n\tpackages: {\n\t\tbase: {\n\t\t\temojiCategories: [{ key: 'recent', i18n: 'Frequently_Used' }],\n\t\t\tcategoryIndex: 0,\n\t\t\temojisByCategory: {\n\t\t\t\trecent: [],\n\t\t\t},\n\t\t\ttoneList: {},\n\t\t\trender: emojioneRender,\n\t\t\trenderPicker(emojiToRender) {\n\t\t\t\tif (!emoji.list[emojiToRender]) {\n\t\t\t\t\tremoveFromRecent(emojiToRender);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst correctPackage = emoji.list[emojiToRender].emojiPackage;\n\t\t\t\treturn emoji.packages[correctPackage].renderPicker(emojiToRender);\n\t\t\t},\n\t\t},\n\t},\n\tlist: {},\n};\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/index.js');\n}\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/index.js');\n}\n","import './lazyloadImage';\n\nconst map = new WeakMap();\n\nconst featureExists = !!window.IntersectionObserver;\nconst loadImage = (el) => {\n\tconst instance = map.get(el);\n\n\tmap.delete(el);\n\n\tif (!instance) {\n\t\treturn;\n\t}\n\n\tconst img = new Image();\n\tconst src = el.getAttribute('data-src');\n\timg.onload = () => {\n\t\tel.className = el.className.replace('lazy-img', '');\n\t\tel.src = src;\n\t\tel.removeAttribute('data-src');\n\t\tinstance.loaded.set(true);\n\t};\n\timg.src = src;\n};\n\nconst observer =\n\tfeatureExists &&\n\tnew IntersectionObserver(\n\t\t(entries, observer) =>\n\t\t\tentries.forEach((entry) => {\n\t\t\t\tif (entry.isIntersecting) {\n\t\t\t\t\tobserver.unobserve(entry.target);\n\t\t\t\t\treturn loadImage(entry.target);\n\t\t\t\t}\n\t\t\t}),\n\t\t{\n\t\t\tthreshold: [0],\n\t\t\ttrackVisibility: true,\n\t\t\tdelay: 230,\n\t\t},\n\t);\n\nexport const addImage = (instance) => {\n\tconst el = instance.firstNode;\n\tmap.set(el, instance);\n\tif (featureExists) {\n\t\treturn observer.observe(el);\n\t}\n\tloadImage(el);\n};\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nimport './lazyloadImage.html';\nimport { addImage } from '.';\n\nconst emptyImageEncoded = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8+/u3PQAJJAM0dIyWdgAAAABJRU5ErkJggg==';\n\nconst imgsrcs = new Set();\n\nTemplate.lazyloadImage.helpers({\n\tclass() {\n\t\tconst loaded = Template.instance().loaded.get();\n\t\treturn `${this.class} ${loaded ? '' : 'lazy-img'}`;\n\t},\n\n\tsrcUrl() {\n\t\tif (Template.instance().loaded.get()) {\n\t\t\treturn;\n\t\t}\n\t\treturn this.src;\n\t},\n\n\tlazySrcUrl() {\n\t\tconst { preview, placeholder, src } = this;\n\t\tconst { loaded } = Template.instance();\n\n\t\tif (loaded.get() || (!preview && !placeholder) || imgsrcs.has(src)) {\n\t\t\treturn src;\n\t\t}\n\n\t\timgsrcs.add(this.src);\n\t\treturn `data:image/png;base64,${preview || emptyImageEncoded}`;\n\t},\n});\n\nTemplate.lazyloadImage.onCreated(function () {\n\tthis.loaded = new ReactiveVar(false);\n});\n\nTemplate.lazyloadImage.onRendered(function () {\n\taddImage(this);\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Match } from 'meteor/check';\nimport { Blaze } from 'meteor/blaze';\nimport { Deps } from 'meteor/deps';\nimport _ from 'underscore';\nimport { getCaretCoordinates } from 'meteor/dandv:caret-position';\n\nimport AutoCompleteRecords from './collection';\nimport { APIClient } from '../../utils/client';\n\nconst isServerSearch = function (rule) {\n\treturn _.isString(rule.collection);\n};\n\nconst validateRule = function (rule) {\n\tif (rule.subscription != null && !Match.test(rule.collection, String)) {\n\t\tthrow new Error('Collection name must be specified as string for server-side search');\n\t}\n\t// XXX back-compat message, to be removed\n\tif (rule.callback) {\n\t\tconsole.warn('autocomplete no longer supports callbacks; use event listeners instead.');\n\t}\n};\n\nconst isWholeField = function (rule) {\n\t// either '' or null both count as whole field.\n\treturn !rule.token;\n};\n\nconst getRegExp = function (rule) {\n\tif (!isWholeField(rule)) {\n\t\t// Expressions for the range from the last word break to the current cursor position\n\t\treturn new RegExp(`(^|\\\\b|\\\\s)${rule.token}([\\\\w.]*)$`);\n\t}\n\t// Whole-field behavior - word characters or spaces\n\treturn new RegExp('(^)(.*)$');\n};\n\nconst getFindParams = function (rule, filter, limit) {\n\t// This is a different 'filter' - the selector from the settings\n\t// We need to extend so that we don't copy over rule.filter\n\tconst selector = _.extend({}, rule.filter || {});\n\tconst options = {\n\t\tlimit,\n\t};\n\tif (!filter) {\n\t\t// Match anything, no sort, limit X\n\t\treturn [selector, options];\n\t}\n\tif (rule.sort && rule.field) {\n\t\tconst sortspec = {};\n\t\t// Only sort if there is a filter, for faster performance on a match of anything\n\t\tsortspec[rule.field] = 1;\n\t\toptions.sort = sortspec;\n\t}\n\tif (_.isFunction(rule.selector)) {\n\t\t// Custom selector\n\t\t_.extend(selector, rule.selector(filter));\n\t} else {\n\t\tselector[rule.field] = {\n\t\t\t$regex: rule.matchAll ? filter : `^${filter}`,\n\t\t\t// default is case insensitive search - empty string is not the same as undefined!\n\t\t\t$options: typeof rule.options === 'undefined' ? 'i' : rule.options,\n\t\t};\n\t}\n\treturn [selector, options];\n};\n\nconst getField = function (obj, str) {\n\tconst string = str.split('.');\n\tstring.forEach((key) => {\n\t\tobj = obj[key];\n\t});\n\treturn obj;\n};\n\nexport default class AutoComplete {\n\tconstructor(settings) {\n\t\tthis.KEYS = [40, 38, 13, 27, 9];\n\t\tthis.limit = settings.limit || 5;\n\t\tthis.position = settings.position || 'bottom';\n\t\tthis.rules = settings.rules;\n\t\tthis.selector = {\n\t\t\tcontainer: '.-autocomplete-container',\n\t\t\titem: '.-autocomplete-item',\n\t\t\t...settings.selector,\n\t\t};\n\t\tconst { rules } = this;\n\n\t\tObject.keys(rules).forEach((key) => {\n\t\t\tconst rule = rules[key];\n\t\t\tvalidateRule(rule);\n\t\t});\n\n\t\tthis.onSelect = settings.onSelect;\n\n\t\tthis.expressions = (() =>\n\t\t\tObject.keys(rules).map((key) => {\n\t\t\t\tconst rule = rules[key];\n\t\t\t\treturn getRegExp(rule);\n\t\t\t}))();\n\t\tthis.matched = -1;\n\t\tthis.loaded = true;\n\n\t\t// Reactive dependencies for current matching rule and filter\n\t\tthis.ruleDep = new Deps.Dependency();\n\t\tthis.filterDep = new Deps.Dependency();\n\t\tthis.loadingDep = new Deps.Dependency();\n\n\t\t// Autosubscribe to the record set published by the server based on the filter\n\t\t// This will tear down server subscriptions when they are no longer being used.\n\t\tthis.sub = null;\n\t\tthis.comp = Deps.autorun(async () => {\n\t\t\tconst rule = this.matchedRule();\n\t\t\tconst filter = this.getFilter();\n\t\t\tif (this.sub) {\n\t\t\t\t// Stop any existing sub immediately, don't wait\n\t\t\t\tthis.sub.stop();\n\t\t\t}\n\t\t\tif (!(rule && filter)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// subscribe only for server-side collections\n\t\t\tif (!isServerSearch(rule)) {\n\t\t\t\tthis.setLoaded(true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst [selector] = getFindParams(rule, filter, this.limit);\n\n\t\t\t// console.debug 'Subscribing to <%s> in <%s>.<%s>', filter, rule.collection, rule.field\n\t\t\tthis.setLoaded(false);\n\t\t\tconst endpointName = rule.endpoint || 'users.autocomplete';\n\t\t\tconst { items } = await APIClient.v1.get(`${endpointName}?selector=${JSON.stringify(selector)}`);\n\t\t\tAutoCompleteRecords.remove({});\n\t\t\titems.forEach((item) => AutoCompleteRecords.insert(item));\n\t\t\tthis.setLoaded(true);\n\t\t});\n\t}\n\n\tteardown() {\n\t\t// Stop the reactive computation we started for this autocomplete instance\n\t\tthis.comp.stop();\n\t}\n\n\tmatchedRule() {\n\t\t// reactive getters and setters for @filter and the currently matched rule\n\t\tthis.ruleDep.depend();\n\t\tif (this.matched >= 0) {\n\t\t\treturn this.rules[this.matched];\n\t\t}\n\t\treturn null;\n\t}\n\n\tsetMatchedRule(i) {\n\t\tthis.matched = i;\n\t\tthis.ruleDep.changed();\n\t}\n\n\tgetFilter() {\n\t\tthis.filterDep.depend();\n\t\treturn this.filter;\n\t}\n\n\tsetFilter(x) {\n\t\tthis.filter = x;\n\t\tthis.filterDep.changed();\n\t\treturn this.filter;\n\t}\n\n\tisLoaded() {\n\t\tthis.loadingDep.depend();\n\t\treturn this.loaded;\n\t}\n\n\tsetLoaded(val) {\n\t\tif (val === this.loaded) {\n\t\t\treturn; // Don't cause redraws unnecessarily\n\t\t}\n\t\tthis.loaded = val;\n\t\tthis.loadingDep.changed();\n\t}\n\n\tonKeyUp() {\n\t\tif (!this.$element) {\n\t\t\treturn; // Don't try to do this while loading\n\t\t}\n\n\t\tif (this._timeoutHandler) {\n\t\t\tclearTimeout(this._timeoutHandler);\n\t\t}\n\n\t\tthis._timeoutHandler = setTimeout(() => {\n\t\t\tthis._timeoutHandler = 0;\n\n\t\t\tconst startpos = this.element.selectionStart;\n\t\t\tconst val = this.getText().substring(0, startpos);\n\n\t\t\t/*\n\t\t\t\tMatching on multiple expressions.\n\t\t\t\tWe always go from a matched state to an unmatched one\n\t\t\t\tbefore going to a different matched one.\n\t\t\t */\n\t\t\tlet i = 0;\n\t\t\tlet breakLoop = false;\n\t\t\twhile (i < this.expressions.length) {\n\t\t\t\tconst matches = val.match(this.expressions[i]);\n\n\t\t\t\t// matching -> not matching\n\t\t\t\tif (!matches && this.matched === i) {\n\t\t\t\t\tthis.setMatchedRule(-1);\n\t\t\t\t\tbreakLoop = true;\n\t\t\t\t}\n\n\t\t\t\t// not matching -> matching\n\t\t\t\tif (matches && this.matched === -1) {\n\t\t\t\t\tthis.setMatchedRule(i);\n\t\t\t\t\tbreakLoop = true;\n\t\t\t\t}\n\n\t\t\t\t// Did filter change?\n\t\t\t\tif (matches && this.filter !== matches[2]) {\n\t\t\t\t\tthis.setFilter(matches[2]);\n\t\t\t\t\tbreakLoop = true;\n\t\t\t\t}\n\t\t\t\tif (breakLoop) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t}\n\t\t}, 300);\n\t}\n\n\tonKeyDown(e) {\n\t\tif (this.matched === -1 || this.KEYS.indexOf(e.keyCode) < 0) {\n\t\t\treturn;\n\t\t}\n\t\tswitch (e.keyCode) {\n\t\t\tcase 9: // TAB\n\t\t\tcase 13: // ENTER\n\t\t\t\tif (this.select()) {\n\t\t\t\t\t// Don't jump fields or submit if select successful\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t// preventDefault needed below to avoid moving cursor when selecting\n\t\t\tcase 40: // DOWN\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.next();\n\t\t\t\tbreak;\n\t\t\tcase 38: // UP\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.prev();\n\t\t\t\tbreak;\n\t\t\tcase 27: // ESCAPE\n\t\t\t\tthis.$element.blur();\n\t\t\t\tthis.hideList();\n\t\t}\n\t}\n\n\tonFocus() {\n\t\t// We need to run onKeyUp after the focus resolves,\n\t\t// or the caret position (selectionStart) will not be correct\n\t\tMeteor.defer(() => this.onKeyUp());\n\t}\n\n\tonBlur() {\n\t\t// We need to delay this so click events work\n\t\t// TODO this is a bit of a hack, see if we can't be smarter\n\t\tMeteor.setTimeout(() => {\n\t\t\tthis.hideList();\n\t\t}, 500);\n\t}\n\n\tonItemClick(doc) {\n\t\tthis.processSelection(doc, this.rules[this.matched]);\n\t}\n\n\tonItemHover(doc, e) {\n\t\tthis.tmplInst.$(this.selector.item).removeClass('selected');\n\t\t$(e.target).closest(this.selector.item).addClass('selected');\n\t}\n\n\tfilteredList() {\n\t\t// @ruleDep.depend() # optional as long as we use depend on filter, because list will always get re-rendered\n\t\tconst filter = this.getFilter(); // Reactively depend on the filter\n\t\tif (this.matched === -1) {\n\t\t\treturn null;\n\t\t}\n\t\tconst rule = this.rules[this.matched];\n\n\t\t// Don't display list unless we have a token or a filter (or both)\n\t\t// Single field: nothing displayed until something is typed\n\t\tif (!(rule.token || filter)) {\n\t\t\treturn null;\n\t\t}\n\t\tconst params = getFindParams(rule, filter, this.limit);\n\t\tconst selector = params[0];\n\t\tconst options = params[1];\n\t\tMeteor.defer(() => this.ensureSelection());\n\n\t\t// if server collection, the server has already done the filtering work\n\t\tif (isServerSearch(rule)) {\n\t\t\treturn AutoCompleteRecords.find({}, options);\n\t\t}\n\t\t// Otherwise, search on client\n\t\treturn rule.collection.find(selector, options);\n\t}\n\n\tisShowing() {\n\t\tconst rule = this.matchedRule();\n\t\t// Same rules as above\n\t\tconst showing = rule && (rule.token || this.getFilter());\n\n\t\t// Do this after the render\n\t\tif (showing) {\n\t\t\tMeteor.defer(() => {\n\t\t\t\tthis.positionContainer();\n\t\t\t\tthis.ensureSelection();\n\t\t\t});\n\t\t}\n\t\treturn showing;\n\t}\n\n\t// Replace text with currently selected item\n\tselect() {\n\t\tconst node = this.tmplInst.find(`${this.selector.item}.selected`);\n\t\tif (node == null) {\n\t\t\treturn false;\n\t\t}\n\t\tconst doc = Blaze.getData(node);\n\t\tif (!doc) {\n\t\t\treturn false; // Don't select if nothing matched\n\t\t}\n\t\tthis.processSelection(doc, this.rules[this.matched]);\n\t\treturn true;\n\t}\n\n\tprocessSelection(doc, rule) {\n\t\tconst replacement = getField(doc, rule.field);\n\t\tif (!isWholeField(rule)) {\n\t\t\tthis.replace(replacement, rule);\n\t\t\tthis.hideList();\n\t\t} else {\n\t\t\t// Empty string or doesn't exist?\n\t\t\t// Single-field replacement: replace whole field\n\t\t\tthis.setText(replacement);\n\n\t\t\t// Field retains focus, but list is hidden unless another key is pressed\n\t\t\t// Must be deferred or onKeyUp will trigger and match again\n\t\t\t// TODO this is a hack; see above\n\t\t\tthis.onBlur();\n\t\t}\n\t\tthis.onSelect && this.onSelect(doc);\n\t\tthis.$element.trigger('autocompleteselect', doc);\n\t}\n\n\t// Replace the appropriate region\n\treplace(replacement) {\n\t\tconst startpos = this.element.selectionStart;\n\t\tconst fullStuff = this.getText();\n\t\tlet val = fullStuff.substring(0, startpos);\n\t\tval = val.replace(this.expressions[this.matched], `$1${this.rules[this.matched].token}${replacement}`);\n\t\tconst posfix = fullStuff.substring(startpos, fullStuff.length);\n\t\tconst separator = posfix.match(/^\\s/) ? '' : ' ';\n\t\tconst finalFight = val + separator + posfix;\n\t\tthis.setText(finalFight);\n\t\tconst newPosition = val.length + 1;\n\t\tthis.element.setSelectionRange(newPosition, newPosition);\n\t}\n\n\thideList() {\n\t\tthis.setMatchedRule(-1);\n\t\tthis.setFilter(null);\n\t}\n\n\tgetText() {\n\t\treturn this.$element.val() || this.$element.text();\n\t}\n\n\tsetText(text) {\n\t\tif (this.$element.is('input,textarea')) {\n\t\t\treturn this.$element.val(text);\n\t\t}\n\t\tthis.$element.html(text);\n\t}\n\n\t/*\n\t\tRendering functions\n\t */\n\n\tpositionContainer() {\n\t\t// First render; Pick the first item and set css whenever list gets shown\n\t\tlet pos = {};\n\t\tconst element = this.selector.anchor ? this.tmplInst.$(this.selector.anchor) : this.$element;\n\n\t\tif (this.position === 'fixed') {\n\t\t\tconst width = element.outerWidth();\n\t\t\treturn this.tmplInst.$(this.selector.container).css({ width, position: 'fixed' });\n\t\t}\n\n\t\tconst position = element.position();\n\t\tif (!position) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst rule = this.matchedRule();\n\t\tconst offset = getCaretCoordinates(this.element, this.element.selectionStart);\n\n\t\t// In whole-field positioning, we don't move the container and make it the\n\t\t// full width of the field.\n\t\tif (rule && isWholeField(rule)) {\n\t\t\tpos.left = position.left;\n\t\t\tif (rule.doNotChangeWidth !== false) {\n\t\t\t\tpos.width = element.outerWidth(); // position.offsetWidth\n\t\t\t}\n\t\t} else {\n\t\t\t// Normal positioning, at token word\n\t\t\tpos = { left: position.left + offset.left };\n\t\t}\n\n\t\t// Position menu from top (above) or from bottom of caret (below, default)\n\t\tif (this.position === 'top') {\n\t\t\tpos.bottom = element.offsetParent().height() - position.top - offset.top;\n\t\t} else {\n\t\t\tpos.top = position.top + offset.top + parseInt(element.css('font-size'));\n\t\t}\n\n\t\tthis.tmplInst.$(this.selector.container).css({ ...pos, position: 'absolute' });\n\t}\n\n\tensureSelection() {\n\t\t// Re-render; make sure selected item is something in the list or none if list empty\n\t\tconst selectedItem = this.tmplInst.$(`${this.selector.item}.selected`);\n\t\tif (!selectedItem.length) {\n\t\t\t// Select anything\n\t\t\tthis.tmplInst.$(`${this.selector.item}:first-child`).addClass('selected');\n\t\t}\n\t}\n\n\t// Select next item in list\n\tnext() {\n\t\tconst currentItem = this.tmplInst.$(`${this.selector.item}.selected`);\n\t\tif (!currentItem.length) {\n\t\t\treturn this.tmplInst.$(`${this.selector.item}:first-child`).addClass('selected');\n\t\t}\n\t\tcurrentItem.removeClass('selected');\n\t\tconst next = currentItem.next();\n\t\tif (next.length) {\n\t\t\tnext.addClass('selected');\n\t\t} else {\n\t\t\t// End of list or lost selection; Go back to first item\n\t\t\tthis.tmplInst.$(`${this.selector.item}:first-child`).addClass('selected');\n\t\t}\n\t}\n\n\t// Select previous item in list\n\tprev() {\n\t\tconst currentItem = this.tmplInst.$(`${this.selector.item}.selected`);\n\t\tif (!currentItem.length) {\n\t\t\treturn; // Don't try to iterate an empty list\n\t\t}\n\t\tcurrentItem.removeClass('selected');\n\t\tconst prev = currentItem.prev();\n\t\tif (prev.length) {\n\t\t\tprev.addClass('selected');\n\t\t} else {\n\t\t\t// Beginning of list or lost selection; Go to end of list\n\t\t\tthis.tmplInst.$(`${this.selector.item}:last-child`).addClass('selected');\n\t\t}\n\t}\n\n\t// This doesn't need to be reactive because list already changes reactively\n\t// and will cause all of the items to re-render anyway\n\tcurrentTemplate() {\n\t\treturn this.rules[this.matched].template;\n\t}\n}\n","import { Mongo } from 'meteor/mongo';\n\nexport default new Mongo.Collection(null);\n","import './inputs.html';\nimport './templates';\nimport AutoComplete from './autocomplete-client';\nimport './autocomplete.css';\n\nexport { AutoComplete };\n","import { Blaze } from 'meteor/blaze';\nimport { Template } from 'meteor/templating';\nimport _ from 'underscore';\n\nimport AutoComplete from './autocomplete-client';\n\n//  Events on template instances, sent to the autocomplete class\nconst acEvents = {\n\tkeydown(e, t) {\n\t\tt.ac.onKeyDown(e);\n\t},\n\tkeyup(e, t) {\n\t\tt.ac.onKeyUp(e);\n\t},\n\tfocus(e, t) {\n\t\tt.ac.onFocus(e);\n\t},\n\tblur(e, t) {\n\t\tt.ac.onBlur(e);\n\t},\n};\n\nTemplate.inputAutocomplete.events(acEvents);\n\nTemplate.textareaAutocomplete.events(acEvents);\n\nconst attributes = function () {\n\treturn _.omit(this, 'settings'); // Render all but the settings parameter\n};\n\nconst autocompleteHelpers = {\n\tattributes,\n\tautocompleteContainer: new Template('AutocompleteContainer', function () {\n\t\tconst ac = new AutoComplete(Blaze.getData().settings);\n\t\t// Set the autocomplete object on the parent template instance\n\t\tthis.parentView.templateInstance().ac = ac;\n\n\t\t// Set nodes on render in the autocomplete class\n\t\tthis.onViewReady(function () {\n\t\t\tac.element = this.parentView.firstNode();\n\t\t\tac.$element = $(ac.element);\n\t\t});\n\t\treturn Blaze.With(ac, function() { //eslint-disable-line\n\t\t\treturn Template._autocompleteContainer;\n\t\t});\n\t}),\n};\n\nTemplate.inputAutocomplete.helpers(autocompleteHelpers);\n\nTemplate.textareaAutocomplete.helpers(autocompleteHelpers);\n\nTemplate._autocompleteContainer.rendered = function () {\n\tthis.data.tmplInst = this;\n};\n\nTemplate._autocompleteContainer.destroyed = function () {\n\t// Meteor._debug \"autocomplete destroyed\"\n\tthis.data.teardown();\n};\n\n/*\n  List rendering helpers\n */\n\nTemplate._autocompleteContainer.events({\n\t// t.data is the AutoComplete instance; `this` is the data item\n\t'click .-autocomplete-item, click [data-autocomplete]'(e, t) {\n\t\tt.data.onItemClick(this, e);\n\t},\n\t'mouseenter .-autocomplete-item'(e, t) {\n\t\tt.data.onItemHover(this, e);\n\t},\n});\n\nTemplate._autocompleteContainer.helpers({\n\tempty() {\n\t\treturn this.filteredList().count() === 0;\n\t},\n\tnoMatchTemplate() {\n\t\treturn this.matchedRule().noMatchTemplate || Template._noMatch;\n\t},\n});\nexport { acEvents, attributes, autocompleteHelpers };\n","import { Template } from 'meteor/templating';\n\nimport { createCollapseable } from '../../ui-utils';\n\ncreateCollapseable(Template.oembedBaseWidget, (instance) => instance.data.settings.collapseMediaByDefault || false);\n\nTemplate.oembedBaseWidget.helpers({\n\ttemplate() {\n\t\tconst { collapsedMedia } = Template.instance();\n\t\tthis.collapsedMediaVar = () => collapsedMedia;\n\t\tthis.collapsed = collapsedMedia.get();\n\n\t\tif (this.headers?.contentType?.match(/image\\/.*/)) {\n\t\t\treturn 'oembedImageWidget';\n\t\t}\n\t\tif (this.headers?.contentType?.match(/audio\\/.*/)) {\n\t\t\treturn 'oembedAudioWidget';\n\t\t}\n\t\tif (this.headers?.contentType?.match(/video\\/.*/) || this.meta?.twitterPlayerStreamContentType?.match(/video\\/.*/)) {\n\t\t\treturn 'oembedVideoWidget';\n\t\t}\n\t\tif (this.meta?.oembedHtml) {\n\t\t\treturn 'oembedFrameWidget';\n\t\t}\n\t\treturn 'oembedUrlWidget';\n\t},\n});\n","import './baseWidget.html';\nimport './baseWidget';\nimport './oembedImageWidget.html';\nimport './oembedImageWidget';\nimport './oembedAudioWidget.html';\nimport './oembedVideoWidget.html';\nimport './oembedVideoWidget';\nimport './oembedYoutubeWidget.html';\nimport './oembedUrlWidget.html';\nimport './oembedUrlWidget';\nimport './oembedFrameWidget.html';\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\n\nimport { getUserPreference } from '../../utils';\n\nTemplate.oembedImageWidget.helpers({\n\tloadImage() {\n\t\tif (getUserPreference(Meteor.userId(), 'autoImageLoad') === false && this.downloadImages == null) {\n\t\t\treturn false;\n\t\t}\n\t\tif (Meteor.Device.isPhone() && getUserPreference(Meteor.userId(), 'saveMobileBandwidth') && this.downloadImages == null) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n});\n","import { Blaze } from 'meteor/blaze';\nimport { Template } from 'meteor/templating';\nimport _ from 'underscore';\nimport { unescapeHTML } from '@rocket.chat/string-helpers';\n\nconst getTitle = function (self) {\n\tif (self.meta == null) {\n\t\treturn;\n\t}\n\treturn self.meta.ogTitle || self.meta.twitterTitle || self.meta.title || self.meta.pageTitle;\n};\n\nconst getDescription = function (self) {\n\tif (self.meta == null) {\n\t\treturn;\n\t}\n\tconst description = self.meta.ogDescription || self.meta.twitterDescription || self.meta.description;\n\tif (description == null) {\n\t\treturn;\n\t}\n\treturn unescapeHTML(description.replace(/(^[“\\s]*)|([”\\s]*$)/g, ''));\n};\n\nTemplate.oembedUrlWidget.helpers({\n\tdescription() {\n\t\tconst description = getDescription(this);\n\t\tif (_.isString(description)) {\n\t\t\treturn description;\n\t\t}\n\t},\n\ttitle() {\n\t\tconst title = getTitle(this);\n\t\tif (_.isString(title)) {\n\t\t\treturn Blaze._escape(title);\n\t\t}\n\t},\n\ttarget() {\n\t\tif (\n\t\t\t!(this.parsedUrl && this.parsedUrl.host) ||\n\t\t\t!(document && document.location && document.location.host) ||\n\t\t\t(this.parsedUrl && this.parsedUrl.host !== document.location.host)\n\t\t) {\n\t\t\treturn '_blank';\n\t\t}\n\t},\n\timage() {\n\t\tif (this.meta == null) {\n\t\t\treturn;\n\t\t}\n\t\tlet decodedOgImage;\n\t\tif (this.meta.ogImage && this.meta.ogImage.replace) {\n\t\t\tdecodedOgImage = this.meta.ogImage.replace(/&amp;/g, '&');\n\t\t}\n\t\tlet url = decodedOgImage || this.meta.twitterImage || this.meta.msapplicationTileImage;\n\t\tif (url == null) {\n\t\t\treturn;\n\t\t}\n\t\turl = new URL(url, `${this.parsedUrl.protocol}//${this.parsedUrl.host}`).href;\n\t\treturn url;\n\t},\n\tshow() {\n\t\treturn getDescription(this) != null || getTitle(this) != null;\n\t},\n});\n","import { Template } from 'meteor/templating';\n\nconst getTitle = function (self) {\n\tif (self.meta == null) {\n\t\treturn;\n\t}\n\treturn self.meta.ogTitle || self.meta.twitterTitle || self.meta.title || self.meta.pageTitle;\n};\n\nTemplate.oembedVideoWidget.helpers({\n\turl() {\n\t\tif (this.meta && this.meta.twitterPlayerStream) {\n\t\t\treturn this.meta.twitterPlayerStream;\n\t\t}\n\t\tif (this.url) {\n\t\t\treturn this.url;\n\t\t}\n\t},\n\tcontentType() {\n\t\tif (this.meta && this.meta.twitterPlayerStreamContentType) {\n\t\t\treturn this.meta.twitterPlayerStreamContentType;\n\t\t}\n\t\tif (this.headers && this.headers.contentType) {\n\t\t\treturn this.headers.contentType;\n\t\t}\n\t},\n\ttitle() {\n\t\treturn getTitle(this);\n\t},\n});\n","import '../lib/common';\nimport './startup';\nimport './roomType';\nimport './tokenChannelsList.html';\nimport './tokenChannelsList';\nimport './tokenpassChannelSettings.html';\nimport './tokenpassChannelSettings';\nimport './login-button.css';\nimport './channelSettings.css';\nimport './styles.css';\n","import { Meteor } from 'meteor/meteor';\n\nimport { roomTypes, RoomTypeConfig } from '../../utils';\n\nclass TokenPassRoomType extends RoomTypeConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tidentifier: 'tokenpass',\n\t\t\torder: 1,\n\t\t});\n\n\t\tthis.customTemplate = 'tokenChannelsList';\n\t}\n\n\tcondition() {\n\t\tconst user = Meteor.users.findOne(Meteor.userId(), { fields: { 'services.tokenpass': 1 } });\n\t\tconst hasTokenpass = !!(user && user.services && user.services.tokenpass);\n\n\t\treturn hasTokenpass;\n\t}\n}\n\nroomTypes.add(new TokenPassRoomType());\n","import { Meteor } from 'meteor/meteor';\n\nimport { ChannelSettings } from '../../channel-settings';\nimport { Rooms } from '../../models';\n\nMeteor.startup(function () {\n\tChannelSettings.addOption({\n\t\tgroup: ['room'],\n\t\tid: 'tokenpass',\n\t\ttemplate: 'channelSettings__tokenpass',\n\t\tvalidation(data) {\n\t\t\tif (data && data.rid) {\n\t\t\t\tconst room = Rooms.findOne(data.rid, { fields: { tokenpass: 1 } });\n\n\t\t\t\treturn room && room.tokenpass;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport { Template } from 'meteor/templating';\n\nimport { Subscriptions } from '../../models';\n\nTemplate.tokenChannelsList.helpers({\n\trooms() {\n\t\treturn Template.instance()\n\t\t\t.tokenpassRooms.get()\n\t\t\t.filter((room) => Subscriptions.find({ rid: room._id }).count() === 0);\n\t},\n});\n\nTemplate.tokenChannelsList.onRendered(function () {\n\tTracker.autorun((c) => {\n\t\tconst user = Meteor.user();\n\t\tif (user && user.services && user.services.tokenpass) {\n\t\t\tc.stop();\n\n\t\t\tMeteor.call('findTokenChannels', (error, result) => {\n\t\t\t\tif (!error) {\n\t\t\t\t\tthis.tokenpassRooms.set(result);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n});\n\nTemplate.tokenChannelsList.onCreated(function () {\n\tthis.tokenpassRooms = new ReactiveVar([]);\n});\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { t } from '../../utils';\nimport { ChatRoom } from '../../models';\nimport { handleError } from '../../../client/lib/utils/handleError';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\n\nTemplate.channelSettings__tokenpass.helpers({\n\taddDisabled() {\n\t\tconst { balance, token } = Template.instance();\n\t\treturn balance.get() && token.get() ? '' : 'disabled';\n\t},\n\tlist() {\n\t\treturn Template.instance().list.get();\n\t},\n\tsave() {\n\t\tconst { list, initial } = Template.instance();\n\t\treturn JSON.stringify(list.get()) !== JSON.stringify(initial);\n\t},\n\tediting() {\n\t\treturn Template.instance().editing.get() ? 'tokenpass__editing' : '';\n\t},\n\trequiredChecked() {\n\t\treturn Template.instance().requireAll.get() ? 'checked' : '';\n\t},\n\trequiredLabel() {\n\t\treturn Template.instance().requireAll.get() ? t('Require_all_tokens') : t('Require_any_token');\n\t},\n\trequiredDisabled() {\n\t\treturn !Template.instance().editing.get() ? 'disabled' : '';\n\t},\n\teditDisabled() {\n\t\treturn Template.instance().editing.get() ? 'disabled' : '';\n\t},\n});\n\nTemplate.channelSettings__tokenpass.onCreated(function () {\n\tconst room = ChatRoom.findOne(this.data.rid, { fields: { tokenpass: 1 } });\n\n\tthis.editing = new ReactiveVar(false);\n\tthis.initial = room.tokenpass;\n\tthis.requireAll = new ReactiveVar(room.tokenpass.require === 'all');\n\tthis.list = new ReactiveVar(this.initial.tokens);\n\tthis.token = new ReactiveVar('');\n\tthis.balance = new ReactiveVar('');\n});\n\nTemplate.channelSettings__tokenpass.events({\n\t'click .js-edit'(e, i) {\n\t\ti.editing.set(true);\n\t},\n\t'input [name=token]'(e, i) {\n\t\ti.token.set(e.target.value);\n\t},\n\t'input [name=balance]'(e, i) {\n\t\ti.balance.set(e.target.value);\n\t},\n\t'click .js-add'(e, i) {\n\t\te.preventDefault();\n\t\tconst instance = Template.instance();\n\t\tconst { balance, token, list } = instance;\n\t\tlist.set([...list.get().filter((t) => t.token !== token), { token: token.get(), balance: balance.get() }]);\n\n\t\t[...i.findAll('input')].forEach((el) => {\n\t\t\tel.value = '';\n\t\t});\n\t\treturn balance.set('') && token.set('');\n\t},\n\t'click .js-remove'(e, instance) {\n\t\te.preventDefault();\n\t\tconst { list, editing } = instance;\n\n\t\tif (!editing.get()) {\n\t\t\treturn;\n\t\t}\n\t\tlist.set(list.get().filter((t) => t.token !== this.token));\n\t},\n\t'click .js-save'(e, i) {\n\t\te.preventDefault();\n\n\t\tconst tokenpass = {\n\t\t\trequire: i.find('[name=requireAllTokens]').checked ? 'all' : 'any',\n\t\t\ttokens: i.list.get(),\n\t\t};\n\n\t\tMeteor.call('saveRoomSettings', this.rid, 'tokenpass', tokenpass, function (err) {\n\t\t\tif (err) {\n\t\t\t\treturn handleError(err);\n\t\t\t}\n\t\t\ti.editing.set(false);\n\t\t\ti.token.set('');\n\t\t\ti.balance.set('');\n\t\t\ti.initial = tokenpass;\n\t\t\t[...i.findAll('input')].forEach((el) => {\n\t\t\t\tel.value = '';\n\t\t\t});\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: TAPi18n.__('Room_tokenpass_config_changed_successfully'),\n\t\t\t});\n\t\t});\n\t},\n\t'click .js-cancel'(e, i) {\n\t\te.preventDefault();\n\t\ti.editing.set(false);\n\t\ti.list.set(i.initial.tokens);\n\t\ti.token.set('');\n\t\ti.balance.set('');\n\t\t[...i.findAll('input')].forEach((el) => {\n\t\t\tel.value = '';\n\t\t});\n\t},\n\t'change [name=requireAllTokens]'(e, instance) {\n\t\tinstance.requireAll.set(e.currentTarget.checked);\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../settings';\nimport { CustomOAuth } from '../../custom-oauth';\n\nconst config = {\n\tserverURL: '',\n\tidentityPath: '/oauth/user',\n\tauthorizePath: '/oauth/authorize',\n\ttokenPath: '/oauth/access-token',\n\tscope: 'user,tca,private-balances',\n\ttokenSentVia: 'payload',\n\tusernameField: 'username',\n\tmergeUsers: true,\n\taddAutopublishFields: {\n\t\tforLoggedInUser: ['services.tokenpass'],\n\t\tforOtherUsers: ['services.tokenpass.name'],\n\t},\n\taccessTokenParam: 'access_token',\n};\n\nconst Tokenpass = new CustomOAuth('tokenpass', config);\n\nif (Meteor.isServer) {\n\tMeteor.startup(function () {\n\t\tsettings.get('API_Tokenpass_URL', function (key, value) {\n\t\t\tconfig.serverURL = value;\n\t\t\tTokenpass.configure(config);\n\t\t});\n\t});\n} else {\n\tMeteor.startup(function () {\n\t\tTracker.autorun(function () {\n\t\t\tif (settings.get('API_Tokenpass_URL')) {\n\t\t\t\tconfig.serverURL = settings.get('API_Tokenpass_URL');\n\t\t\t\tTokenpass.configure(config);\n\t\t\t}\n\t\t});\n\t});\n}\n","import './sideNav.html';\nimport './roomList.html';\nimport './sideNav';\nimport './roomList';\nimport './userPresence';\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\n\nimport { callbacks } from '../../../lib/callbacks';\nimport { ChatSubscription, Rooms, Users, Subscriptions } from '../../models';\nimport { UiTextContext, getUserPreference, roomTypes } from '../../utils';\nimport { settings } from '../../settings';\n\nTemplate.roomList.helpers({\n\trooms() {\n\t\t/*\n\t\t\tmodes:\n\t\t\t\tsortby activity/alphabetical\n\t\t\t\tmerge channels into one list\n\t\t\t\tshow favorites\n\t\t\t\tshow unread\n\t\t*/\n\t\tif (this.anonymous) {\n\t\t\treturn Rooms.find({ t: 'c' }, { sort: { name: 1 } });\n\t\t}\n\n\t\tconst user = Users.findOne(Meteor.userId(), {\n\t\t\tfields: {\n\t\t\t\t'settings.preferences.sidebarSortby': 1,\n\t\t\t\t'settings.preferences.sidebarShowFavorites': 1,\n\t\t\t\t'settings.preferences.sidebarShowUnread': 1,\n\t\t\t\t'services.tokenpass': 1,\n\t\t\t\t'messageViewMode': 1,\n\t\t\t},\n\t\t});\n\n\t\tconst sortBy = getUserPreference(user, 'sidebarSortby') || 'activity';\n\t\tconst query = {\n\t\t\topen: true,\n\t\t};\n\n\t\tconst sort = {};\n\n\t\tif (sortBy === 'activity') {\n\t\t\tsort.lm = -1;\n\t\t} else {\n\t\t\t// alphabetical\n\t\t\tsort[this.identifier === 'd' && settings.get('UI_Use_Real_Name') ? 'lowerCaseFName' : 'lowerCaseName'] = /descending/.test(sortBy)\n\t\t\t\t? -1\n\t\t\t\t: 1;\n\t\t}\n\n\t\tif (this.identifier === 'unread') {\n\t\t\tquery.alert = true;\n\t\t\tquery.$or = [{ hideUnreadStatus: { $ne: true } }, { unread: { $gt: 0 } }];\n\n\t\t\treturn ChatSubscription.find(query, { sort });\n\t\t}\n\n\t\tconst favoritesEnabled = !!(settings.get('Favorite_Rooms') && getUserPreference(user, 'sidebarShowFavorites'));\n\n\t\tif (this.identifier === 'f') {\n\t\t\tquery.f = favoritesEnabled;\n\t\t} else {\n\t\t\tlet types = [this.identifier];\n\n\t\t\tif (this.identifier === 'merged') {\n\t\t\t\ttypes = ['c', 'p', 'd'];\n\t\t\t}\n\n\t\t\tif (this.identifier === 'discussion') {\n\t\t\t\ttypes = ['c', 'p', 'd'];\n\t\t\t\tquery.prid = { $exists: true };\n\t\t\t}\n\n\t\t\tif (this.identifier === 'tokens') {\n\t\t\t\ttypes = ['c', 'p'];\n\t\t\t}\n\n\t\t\tif (['c', 'p'].includes(this.identifier)) {\n\t\t\t\tquery.tokens = { $exists: false };\n\t\t\t} else if (this.identifier === 'tokens' && user && user.services && user.services.tokenpass) {\n\t\t\t\tquery.tokens = { $exists: true };\n\t\t\t}\n\n\t\t\tif (getUserPreference(user, 'sidebarShowUnread')) {\n\t\t\t\tquery.$or = [\n\t\t\t\t\t{ alert: { $ne: true } },\n\t\t\t\t\t{\n\t\t\t\t\t\t$and: [{ hideUnreadStatus: true }, { unread: 0 }],\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t}\n\t\t\tquery.t = { $in: types };\n\t\t\tif (favoritesEnabled) {\n\t\t\t\tquery.f = { $ne: favoritesEnabled };\n\t\t\t}\n\t\t}\n\t\treturn ChatSubscription.find(query, { sort });\n\t},\n\n\tisLivechat() {\n\t\treturn this.identifier === 'l';\n\t},\n\n\tshouldAppear(group, rooms) {\n\t\t/*\n\t\tif is a normal group ('channel' 'private' 'direct')\n\t\tor is favorite and has one room\n\t\tor is unread and has one room\n\t\t*/\n\n\t\treturn !['unread', 'f'].includes(group.identifier) || rooms.length || (rooms.count && rooms.count());\n\t},\n\n\troomType(room) {\n\t\tif (room.header || room.identifier) {\n\t\t\treturn `type-${room.header || room.identifier}`;\n\t\t}\n\t},\n\n\tnoSubscriptionText() {\n\t\tconst instance = Template.instance();\n\t\tif (instance.data.anonymous) {\n\t\t\treturn 'No_channels_yet';\n\t\t}\n\t\treturn roomTypes.getConfig(instance.data.identifier).getUiText(UiTextContext.NO_ROOMS_SUBSCRIBED) || 'No_channels_yet';\n\t},\n});\n\nconst getLowerCaseNames = (room, nameDefault = '', fnameDefault = '') => {\n\tconst name = room.name || nameDefault;\n\tconst fname = room.fname || fnameDefault || name;\n\treturn {\n\t\tlowerCaseName: String(name).toLowerCase(),\n\t\tlowerCaseFName: String(fname).toLowerCase(),\n\t};\n};\n\nconst mergeSubRoom = (subscription) => {\n\tconst options = {\n\t\tfields: {\n\t\t\tlm: 1,\n\t\t\tlastMessage: 1,\n\t\t\tuids: 1,\n\t\t\tstreamingOptions: 1,\n\t\t\tusernames: 1,\n\t\t\ttopic: 1,\n\t\t\tencrypted: 1,\n\t\t\tjitsiTimeout: 1,\n\t\t\t// autoTranslate: 1,\n\t\t\t// autoTranslateLanguage: 1,\n\t\t\tdescription: 1,\n\t\t\tannouncement: 1,\n\t\t\tbroadcast: 1,\n\t\t\tarchived: 1,\n\t\t\tavatarETag: 1,\n\t\t\tretention: 1,\n\t\t\tteamId: 1,\n\t\t\tteamMain: 1,\n\n\t\t\tonHold: 1,\n\t\t\tmetrics: 1,\n\t\t\tmuted: 1,\n\t\t\tservedBy: 1,\n\t\t\tts: 1,\n\t\t\twaitingResponse: 1,\n\t\t\tv: 1,\n\t\t\ttranscriptRequest: 1,\n\t\t\ttags: 1,\n\t\t\tclosedAt: 1,\n\t\t\tresponseBy: 1,\n\t\t\tpriorityId: 1,\n\t\t\tlivechatData: 1,\n\t\t\tdepartmentId: 1,\n\t\t\tsource: 1,\n\t\t\tqueuedAt: 1,\n\t\t},\n\t};\n\n\tconst room = Rooms.findOne({ _id: subscription.rid }, options) || {};\n\n\tconst lastRoomUpdate = room.lm || subscription.ts || subscription._updatedAt;\n\n\tconst {\n\t\tencrypted,\n\t\tdescription,\n\t\tcl,\n\t\ttopic,\n\t\tannouncement,\n\t\tbroadcast,\n\t\tarchived,\n\t\tavatarETag,\n\t\tretention,\n\t\tlastMessage,\n\t\tstreamingOptions,\n\t\tteamId,\n\t\tteamMain,\n\t\tuids,\n\t\tusernames,\n\t\tjitsiTimeout,\n\n\t\tv,\n\t\ttranscriptRequest,\n\t\tservedBy,\n\t\tonHold,\n\t\ttags,\n\t\tclosedAt,\n\t\tmetrics,\n\t\tmuted,\n\t\twaitingResponse,\n\t\tresponseBy,\n\t\tpriorityId,\n\t\tlivechatData,\n\t\tdepartmentId,\n\t\tts,\n\t\tsource,\n\t\tqueuedAt,\n\t} = room;\n\n\tsubscription.lm = subscription.lr ? new Date(Math.max(subscription.lr, lastRoomUpdate)) : lastRoomUpdate;\n\n\treturn Object.assign(subscription, getLowerCaseNames(subscription), {\n\t\tencrypted,\n\t\tdescription,\n\t\tcl,\n\t\ttopic,\n\t\tannouncement,\n\t\tbroadcast,\n\t\tarchived,\n\t\tavatarETag,\n\t\tretention,\n\t\tlastMessage,\n\t\tstreamingOptions,\n\t\tteamId,\n\t\tteamMain,\n\t\tuids,\n\t\tusernames,\n\t\tjitsiTimeout,\n\n\t\tv,\n\t\ttranscriptRequest,\n\t\tservedBy,\n\t\tonHold,\n\t\ttags,\n\t\tclosedAt,\n\t\tmetrics,\n\t\tmuted,\n\t\twaitingResponse,\n\t\tresponseBy,\n\t\tpriorityId,\n\t\tlivechatData,\n\t\tdepartmentId,\n\t\tts,\n\t\tsource,\n\t\tqueuedAt,\n\t});\n};\n\nconst mergeRoomSub = (room) => {\n\tconst sub = Subscriptions.findOne({ rid: room._id });\n\tif (!sub) {\n\t\treturn room;\n\t}\n\n\tconst {\n\t\tencrypted,\n\t\tdescription,\n\t\tcl,\n\t\ttopic,\n\t\tannouncement,\n\t\tbroadcast,\n\t\tarchived,\n\t\tavatarETag,\n\t\tretention,\n\t\tlastMessage,\n\t\tstreamingOptions,\n\t\tteamId,\n\t\tteamMain,\n\t\tuids,\n\t\tusernames,\n\t\tjitsiTimeout,\n\n\t\tv,\n\t\ttranscriptRequest,\n\t\tservedBy,\n\t\tonHold,\n\t\ttags,\n\t\tclosedAt,\n\t\tmetrics,\n\t\tmuted,\n\t\twaitingResponse,\n\t\tresponseBy,\n\t\tpriorityId,\n\t\tlivechatData,\n\t\tdepartmentId,\n\t\tts,\n\t\tsource,\n\t\tqueuedAt,\n\t} = room;\n\n\tSubscriptions.update(\n\t\t{\n\t\t\trid: room._id,\n\t\t},\n\t\t{\n\t\t\t$set: {\n\t\t\t\tencrypted,\n\t\t\t\tdescription,\n\t\t\t\tcl,\n\t\t\t\ttopic,\n\t\t\t\tannouncement,\n\t\t\t\tbroadcast,\n\t\t\t\tarchived,\n\t\t\t\tavatarETag,\n\t\t\t\tretention,\n\t\t\t\tuids,\n\t\t\t\tusernames,\n\t\t\t\tlastMessage,\n\t\t\t\tstreamingOptions,\n\t\t\t\tteamId,\n\t\t\t\tteamMain,\n\t\t\t\tv,\n\t\t\t\ttranscriptRequest,\n\t\t\t\tservedBy,\n\t\t\t\tonHold,\n\t\t\t\ttags,\n\t\t\t\tclosedAt,\n\t\t\t\tmetrics,\n\t\t\t\tmuted,\n\t\t\t\twaitingResponse,\n\t\t\t\tresponseBy,\n\t\t\t\tpriorityId,\n\t\t\t\tlivechatData,\n\t\t\t\tdepartmentId,\n\t\t\t\tjitsiTimeout,\n\t\t\t\tts,\n\t\t\t\tsource,\n\t\t\t\tqueuedAt,\n\t\t\t\t...getLowerCaseNames(room, sub.name, sub.fname),\n\t\t\t},\n\t\t},\n\t);\n\n\tSubscriptions.update(\n\t\t{\n\t\t\trid: room._id,\n\t\t\tlm: { $lt: room.lm },\n\t\t},\n\t\t{\n\t\t\t$set: {\n\t\t\t\tlm: room.lm,\n\t\t\t},\n\t\t},\n\t);\n\n\treturn room;\n};\n\ncallbacks.add('cachedCollection-received-rooms', mergeRoomSub);\ncallbacks.add('cachedCollection-sync-rooms', mergeRoomSub);\ncallbacks.add('cachedCollection-loadFromServer-rooms', mergeRoomSub);\n\ncallbacks.add('cachedCollection-received-subscriptions', mergeSubRoom);\ncallbacks.add('cachedCollection-sync-subscriptions', mergeSubRoom);\ncallbacks.add('cachedCollection-loadFromServer-subscriptions', mergeSubRoom);\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Template } from 'meteor/templating';\n\nimport { SideNav, menu } from '../../ui-utils';\nimport { settings } from '../../settings';\nimport { roomTypes, getUserPreference } from '../../utils';\nimport { Users } from '../../models';\n\nTemplate.sideNav.helpers({\n\tflexTemplate() {\n\t\treturn SideNav.getFlex().template;\n\t},\n\n\tflexData() {\n\t\treturn SideNav.getFlex().data;\n\t},\n\n\troomType() {\n\t\treturn roomTypes.getTypes().map((roomType) => ({\n\t\t\ttemplate: roomType.customTemplate || 'roomList',\n\t\t\tdata: {\n\t\t\t\theader: roomType.header,\n\t\t\t\tidentifier: roomType.identifier,\n\t\t\t\tisCombined: roomType.isCombined,\n\t\t\t\tlabel: roomType.label,\n\t\t\t},\n\t\t}));\n\t},\n\n\tloggedInUser() {\n\t\treturn !!Meteor.userId();\n\t},\n\n\tsidebarViewMode() {\n\t\tconst viewMode = getUserPreference(Meteor.userId(), 'sidebarViewMode');\n\t\treturn viewMode || 'condensed';\n\t},\n\n\tsidebarHideAvatar() {\n\t\treturn !getUserPreference(Meteor.userId(), 'sidebarDisplayAvatar');\n\t},\n});\n\nTemplate.sideNav.events({\n\t'click .close-flex'() {\n\t\treturn SideNav.closeFlex();\n\t},\n\n\t'click .arrow'() {\n\t\treturn SideNav.toggleCurrent();\n\t},\n\n\t'scroll .rooms-list'() {\n\t\treturn menu.updateUnreadBars();\n\t},\n\n\t'dropped .sidebar'(e) {\n\t\treturn e.preventDefault();\n\t},\n\t'mouseenter .sidebar-item__link'(e) {\n\t\tconst element = e.currentTarget;\n\t\tsetTimeout(() => {\n\t\t\tconst ellipsedElement = element.querySelector('.sidebar-item__ellipsis');\n\t\t\tconst isTextEllipsed = ellipsedElement.offsetWidth < ellipsedElement.scrollWidth;\n\n\t\t\tif (isTextEllipsed) {\n\t\t\t\telement.setAttribute('title', element.getAttribute('aria-label'));\n\t\t\t} else {\n\t\t\t\telement.removeAttribute('title');\n\t\t\t}\n\t\t}, 0);\n\t},\n});\n\nconst redirectToDefaultChannelIfNeeded = () => {\n\tconst needToBeRedirect = () => ['/', '/home'].includes(FlowRouter.current().path);\n\n\tTracker.autorun((c) => {\n\t\tconst firstChannelAfterLogin = settings.get('First_Channel_After_Login');\n\n\t\tif (!needToBeRedirect()) {\n\t\t\treturn c.stop();\n\t\t}\n\n\t\tif (!firstChannelAfterLogin) {\n\t\t\treturn c.stop();\n\t\t}\n\n\t\tconst room = roomTypes.findRoom('c', firstChannelAfterLogin, Meteor.userId());\n\n\t\tif (!room) {\n\t\t\treturn;\n\t\t}\n\n\t\tc.stop();\n\t\tFlowRouter.go(`/channel/${firstChannelAfterLogin}`);\n\t});\n};\n\nTemplate.sideNav.onRendered(function () {\n\tSideNav.init();\n\tmenu.init();\n\tredirectToDefaultChannelIfNeeded();\n\n\treturn Meteor.defer(() => menu.updateUnreadBars());\n});\n\nTemplate.sideNav.onCreated(function () {\n\tthis.groupedByType = new ReactiveVar(false);\n\n\tthis.autorun(() => {\n\t\tconst user = Users.findOne(Meteor.userId(), {\n\t\t\tfields: {\n\t\t\t\t'settings.preferences.sidebarGroupByType': 1,\n\t\t\t},\n\t\t});\n\t\tconst userPref = getUserPreference(user, 'sidebarGroupByType');\n\t\tthis.groupedByType.set(userPref || settings.get('UI_Group_Channels_By_Type'));\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\nimport { Template } from 'meteor/templating';\nimport { Tracker } from 'meteor/tracker';\n\nimport { Presence } from '../../../client/lib/presence';\n\nimport './userPresence.html';\n\nconst data = new Map();\nconst options = {\n\tthreshold: 0.1,\n};\n\nlet lastEntries = [];\nconst handleEntries = function (entries) {\n\tlastEntries = entries.filter(({ isIntersecting }) => isIntersecting);\n\tlastEntries.forEach(async (entry) => {\n\t\tconst { uid } = data.get(entry.target);\n\t\tPresence.get(uid);\n\t});\n};\n\nconst featureExists = !!window.IntersectionObserver;\n\nconst observer = featureExists && new IntersectionObserver(handleEntries, options);\n\nTracker.autorun(() => {\n\t// Only clear statuses on disconnect, prevent process it on reconnect again\n\tconst isConnected = Meteor.status().connected;\n\tif (!Meteor.userId() || !isConnected) {\n\t\tPresence.reset();\n\t\treturn Meteor.users.update({ status: { $exists: true } }, { $unset: { status: true } }, { multi: true });\n\t}\n\n\tPresence.restart();\n\n\tif (featureExists) {\n\t\tfor (const node of data.keys()) {\n\t\t\tobserver.unobserve(node);\n\t\t\tobserver.observe(node);\n\t\t}\n\t\treturn;\n\t}\n\n\tAccounts.onLogout(() => {\n\t\tPresence.reset();\n\t});\n});\n\nTemplate.userPresence.onRendered(function () {\n\tif (!this.data || !this.data.uid) {\n\t\treturn;\n\t}\n\tdata.set(this.firstNode, this.data);\n\tif (featureExists) {\n\t\treturn observer.observe(this.firstNode);\n\t}\n});\n","import { Blaze } from 'meteor/blaze';\nimport { Template } from 'meteor/templating';\n\nimport { VideoRecorder } from '../../ui';\n\nexport const VRecDialog = new (class {\n\topened = false;\n\n\tdialogView = null;\n\n\tinit() {\n\t\tthis.dialogView = Blaze.render(Template.vrecDialog, document.body);\n\t}\n\n\topen(source, { rid, tmid }) {\n\t\tif (!this.dialogView) {\n\t\t\tthis.init();\n\t\t}\n\n\t\tthis.dialogView.templateInstance().update({\n\t\t\trid,\n\t\t\ttmid,\n\t\t\tinput: source.querySelector('.js-input-message'),\n\t\t});\n\n\t\tthis.source = source;\n\t\tconst dialog = $('.vrec-dialog');\n\t\tthis.dialogView.templateInstance().setPosition(dialog, source);\n\t\tdialog.addClass('show');\n\t\tthis.opened = true;\n\n\t\treturn this.initializeCamera();\n\t}\n\n\tclose() {\n\t\t$('.vrec-dialog').removeClass('show');\n\t\tthis.opened = false;\n\t\tif (this.video != null) {\n\t\t\treturn VideoRecorder.stop();\n\t\t}\n\t}\n\n\tinitializeCamera() {\n\t\tthis.video = $('.vrec-dialog video').get('0');\n\t\tif (!this.video) {\n\t\t\treturn;\n\t\t}\n\t\treturn VideoRecorder.start(this.video);\n\t}\n})();\n","import './vrecord.html';\nimport './vrecord';\nimport { VRecDialog } from './VRecDialog';\nimport './vrecord.css';\n\nexport { VRecDialog };\n","import { Template } from 'meteor/templating';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport _ from 'underscore';\n\nimport { VRecDialog } from './VRecDialog';\nimport { VideoRecorder, fileUpload, UserAction, USER_ACTIVITIES } from '../../ui';\n\nTemplate.vrecDialog.helpers({\n\trecordIcon() {\n\t\tif (VideoRecorder.cameraStarted.get() && VideoRecorder.recording.get()) {\n\t\t\treturn 'icon-stop';\n\t\t}\n\t\treturn 'icon-circle';\n\t},\n\n\tokDisabled() {\n\t\tif (VideoRecorder.cameraStarted.get() && VideoRecorder.recordingAvailable.get()) {\n\t\t\treturn '';\n\t\t}\n\t\treturn 'disabled';\n\t},\n\n\trecordDisabled() {\n\t\treturn VideoRecorder.cameraStarted.get() ? '' : 'disabled';\n\t},\n\n\ttime() {\n\t\treturn Template.instance().time.get();\n\t},\n});\n\nconst recordingInterval = new ReactiveVar(null);\n\nconst stopVideoRecording = (rid, tmid) => {\n\tif (recordingInterval.get()) {\n\t\tclearInterval(recordingInterval.get());\n\t\trecordingInterval.set(null);\n\t}\n\tUserAction.stop(rid, USER_ACTIVITIES.USER_RECORDING, { tmid });\n};\n\nTemplate.vrecDialog.events({\n\t'click .vrec-dialog .cancel'(e, t) {\n\t\tconst rid = t.rid.get();\n\t\tconst tmid = t.tmid.get();\n\n\t\tVideoRecorder.stop();\n\t\tVRecDialog.close();\n\t\tt.time.set('');\n\t\tstopVideoRecording(rid, tmid);\n\t},\n\n\t'click .vrec-dialog .record'(e, t) {\n\t\tconst rid = t.rid.get();\n\t\tconst tmid = t.tmid.get();\n\t\tif (VideoRecorder.recording.get()) {\n\t\t\tVideoRecorder.stopRecording();\n\t\t\tstopVideoRecording(rid, tmid);\n\t\t} else {\n\t\t\tVideoRecorder.record();\n\t\t\tUserAction.performContinuously(rid, USER_ACTIVITIES.USER_RECORDING, { tmid });\n\t\t\tt.time.set('00:00');\n\t\t\tconst startTime = new Date();\n\t\t\trecordingInterval.set(\n\t\t\t\tsetInterval(() => {\n\t\t\t\t\tconst now = new Date();\n\t\t\t\t\tconst distance = (now.getTime() - startTime.getTime()) / 1000;\n\t\t\t\t\tconst minutes = Math.floor(distance / 60);\n\t\t\t\t\tconst seconds = Math.floor(distance % 60);\n\t\t\t\t\tt.time.set(`${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`);\n\t\t\t\t}, 1000),\n\t\t\t);\n\t\t}\n\t},\n\n\t'click .vrec-dialog .ok'(e, instance) {\n\t\tconst [rid, tmid, input] = [instance.rid.get(), instance.tmid.get(), instance.input.get()];\n\t\tconst cb = (blob) => {\n\t\t\tfileUpload([{ file: blob, type: 'video', name: `${TAPi18n.__('Video record')}.webm` }], input, { rid, tmid });\n\t\t\tVRecDialog.close();\n\t\t};\n\t\tVideoRecorder.stop(cb);\n\t\tinstance.time.set('');\n\t\tstopVideoRecording(rid, tmid);\n\t},\n});\n\nTemplate.vrecDialog.onCreated(function () {\n\tthis.width = 400;\n\tthis.height = 290;\n\n\tthis.rid = new ReactiveVar();\n\tthis.tmid = new ReactiveVar();\n\tthis.input = new ReactiveVar();\n\tthis.time = new ReactiveVar('');\n\tthis.update = ({ rid, tmid, input }) => {\n\t\tthis.rid.set(rid);\n\t\tthis.tmid.set(tmid);\n\t\tthis.input.set(input);\n\t};\n\n\tthis.setPosition = function (dialog, source, anchor = 'left') {\n\t\tconst _set = () => {\n\t\t\tconst sourcePos = $(source).offset();\n\t\t\tlet top = sourcePos.top - this.height - 5;\n\n\t\t\tif (top < 0) {\n\t\t\t\ttop = 10;\n\t\t\t}\n\t\t\tif (anchor === 'left') {\n\t\t\t\tlet right = window.innerWidth - (sourcePos.left + source.offsetWidth - 25);\n\t\t\t\tif (right < 0) {\n\t\t\t\t\tright = 10;\n\t\t\t\t}\n\t\t\t\treturn dialog.css({ top: `${top}px`, right: `${right}px` });\n\t\t\t}\n\t\t\tlet left = sourcePos.left - this.width + 100;\n\t\t\tif (left < 0) {\n\t\t\t\tleft = 10;\n\t\t\t}\n\t\t\treturn dialog.css({ top: `${top}px`, left: `${left}px` });\n\t\t};\n\n\t\tconst set = _.debounce(_set, 2000);\n\t\t_set();\n\t\tthis.remove = set;\n\t\t$(window).on('resize', set);\n\t};\n});\n\nTemplate.vrecDialog.onDestroyed(function () {\n\tVRecDialog.close(this.rid.get());\n\t$(window).off('resize', this.remove);\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../settings';\n\nMeteor.startup(() => {\n\tTracker.autorun((c) => {\n\t\tif (!settings.get('Webdav_Integration_Enabled')) {\n\t\t\treturn;\n\t\t}\n\t\tc.stop();\n\t\timport('./startup/messageBoxActions');\n\t\timport('./startup/sync');\n\t\timport('./actionButton');\n\t\timport('./webdavFilePicker.html');\n\t\timport('./webdavFilePicker.css');\n\t\timport('./webdavFilePicker');\n\t\timport('./selectWebdavAccount.html');\n\t\timport('./selectWebdavAccount');\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { MessageTypes } from '../../../../ui-utils/client';\n\nMeteor.startup(function () {\n\tMessageTypes.registerType({\n\t\tid: 'discussion-created',\n\t\tsystem: false,\n\t\tmessage: 'discussion-created',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tmessage: `<svg class=\"rc-icon\" aria-hidden=\"true\"><use xlink:href=\"#icon-discussion\"></use></svg> ${message.msg}`,\n\t\t\t};\n\t\t},\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../settings/client';\nimport { hasPermission } from '../../authorization/client';\nimport { MessageAction } from '../../ui-utils/client';\nimport { messageArgs } from '../../ui-utils/client/lib/messageArgs';\nimport { roomTypes } from '../../utils/client';\nimport { imperativeModal } from '../../../client/lib/imperativeModal';\nimport CreateDiscussion from '../../../client/components/CreateDiscussion/CreateDiscussion';\n\nMeteor.startup(function () {\n\tTracker.autorun(() => {\n\t\tif (!settings.get('Discussion_enabled')) {\n\t\t\treturn MessageAction.removeButton('start-discussion');\n\t\t}\n\n\t\tMessageAction.addButton({\n\t\t\tid: 'start-discussion',\n\t\t\ticon: 'discussion',\n\t\t\tlabel: 'Discussion_start',\n\t\t\tcontext: ['message', 'message-mobile'],\n\t\t\tasync action() {\n\t\t\t\tconst { msg: message, room } = messageArgs(this);\n\n\t\t\t\timperativeModal.open({\n\t\t\t\t\tcomponent: CreateDiscussion,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tdefaultParentRoom: room.prid || room._id,\n\t\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t\t\tparentMessageId: message._id,\n\t\t\t\t\t\tnameSuggestion: message?.msg?.substr(0, 140),\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t},\n\t\t\tcondition({\n\t\t\t\tmsg: {\n\t\t\t\t\tu: { _id: uid },\n\t\t\t\t\tdrid,\n\t\t\t\t\tdcount,\n\t\t\t\t},\n\t\t\t\troom,\n\t\t\t\tsubscription,\n\t\t\t\tu,\n\t\t\t}) {\n\t\t\t\tif (drid || !isNaN(dcount)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (!subscription) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst isLivechatRoom = roomTypes.isLivechatRoom(room.t);\n\t\t\t\tif (isLivechatRoom) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn uid !== u._id ? hasPermission('start-discussion-other-user') : hasPermission('start-discussion');\n\t\t\t},\n\t\t\torder: 1,\n\t\t\tgroup: 'menu',\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { messageBox } from '../../ui-utils/client';\nimport { settings } from '../../settings/client';\nimport { hasPermission } from '../../authorization/client';\nimport { imperativeModal } from '../../../client/lib/imperativeModal';\nimport CreateDiscussion from '../../../client/components/CreateDiscussion/CreateDiscussion';\n\nMeteor.startup(function () {\n\tTracker.autorun(() => {\n\t\tif (!settings.get('Discussion_enabled')) {\n\t\t\treturn messageBox.actions.remove('Create_new', /start-discussion/);\n\t\t}\n\t\tmessageBox.actions.add('Create_new', 'Discussion', {\n\t\t\tid: 'start-discussion',\n\t\t\ticon: 'discussion',\n\t\t\tcondition: () => hasPermission('start-discussion') || hasPermission('start-discussion-other-user'),\n\t\t\taction(data) {\n\t\t\t\timperativeModal.open({\n\t\t\t\t\tcomponent: CreateDiscussion,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tdefaultParentRoom: data.prid || data.rid,\n\t\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t});\n});\n","// Other UI extensions\nimport './lib/messageTypes/discussionMessage';\nimport './createDiscussionMessageAction';\nimport './discussionFromMessageBox';\nimport './tabBar';\n\nimport '../lib/discussionRoomType';\n","import { useMemo, lazy } from 'react';\n\nimport { addAction } from '../../../client/views/room/lib/Toolbox';\nimport { useSetting } from '../../../client/contexts/SettingsContext';\n\nconst template = lazy(() => import('../../../client/views/room/contextualBar/Discussions'));\n\naddAction('discussions', ({ room: { prid } }) => {\n\tconst discussionEnabled = useSetting('Discussion_enabled');\n\n\treturn useMemo(\n\t\t() =>\n\t\t\tdiscussionEnabled && !prid\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\t\t\t\tid: 'discussions',\n\t\t\t\t\t\ttitle: 'Discussions',\n\t\t\t\t\t\ticon: 'discussion',\n\t\t\t\t\t\ttemplate,\n\t\t\t\t\t\tfull: true,\n\t\t\t\t\t\torder: 3,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[discussionEnabled, prid],\n\t);\n});\n","import { RoomTypeConfig, roomTypes } from '../../utils';\n\nexport class DiscussionRoomType extends RoomTypeConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tidentifier: 't',\n\t\t\torder: 25,\n\t\t\tlabel: 'Discussion',\n\t\t});\n\t}\n}\n\nroomTypes.add(new DiscussionRoomType());\n","/*\n * Filter markdown tags in message\n *\tUse case: notifications\n */\nexport const filtered = (\n\tmessage,\n\toptions = {\n\t\tsupportSchemesForLink: 'http,https',\n\t},\n) => {\n\tconst schemes = options.supportSchemesForLink.split(',').join('|');\n\n\t// Remove block code backticks\n\tmessage = message.replace(/```/g, '');\n\n\t// Remove inline code backticks\n\tmessage = message.replace(new RegExp(/`([^`\\r\\n]+)\\`/gm), (match) => match.substr(1, match.length - 2));\n\n\t// Filter [text](url), ![alt_text](image_url)\n\tmessage = message.replace(new RegExp(`!?\\\\[([^\\\\]]+)\\\\]\\\\((?:${schemes}):\\\\/\\\\/[^\\\\)]+\\\\)`, 'gm'), (match, title) => title);\n\n\t// Filter <http://link|Text>\n\tmessage = message.replace(\n\t\tnew RegExp(`(?:<|&lt;)(?:${schemes}):\\\\/\\\\/[^\\\\|]+\\\\|(.+?)(?=>|&gt;)(?:>|&gt;)`, 'gm'),\n\t\t(match, title) => title,\n\t);\n\n\t// Filter headings\n\tmessage = message.replace(\n\t\t/(^#{1,4}) (([\\S\\w\\d-_\\/\\*\\.,\\\\][ \\u00a0\\u1680\\u180e\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]?)+)/gm,\n\t\t'$2',\n\t);\n\n\t// Filter bold\n\tmessage = message.replace(/(^|>|[ >_~`])\\*{1,2}([^\\*\\r\\n]+)\\*{1,2}([<_~`]|\\B|\\b|$)/gm, '$1$2$3');\n\n\t// Filter italics\n\tmessage = message.replace(/(^|>|[ >*~`])\\_{1,2}([^\\_\\r\\n]+)\\_{1,2}([<*~`]|\\B|\\b|$)/gm, '$1$2$3');\n\n\t// Filter strike-through text\n\tmessage = message.replace(/(^|>|[ >_*`])\\~{1,2}([^~\\r\\n]+)\\~{1,2}([<_*`]|\\B|\\b|$)/gm, '$1$2$3');\n\n\t// Filter block quotes\n\tmessage = message.replace(/(?:>){3}\\n+([\\s\\S]*?)\\n+(?:<){3}/g, '$1');\n\n\t// Filter > quote\n\tmessage = message.replace(/^>(.*)$/gm, '$1');\n\n\treturn message;\n};\n","import { Random } from 'meteor/random';\nimport _ from 'underscore';\nimport _marked from 'marked';\nimport createDOMPurify from 'dompurify';\nimport { unescapeHTML, escapeHTML } from '@rocket.chat/string-helpers';\n\nimport hljs, { register } from '../../hljs';\nimport { getGlobalWindow } from '../../getGlobalWindow';\n\nconst renderer = new _marked.Renderer();\n\nlet msg = null;\n\nrenderer.code = function (code, lang, escaped) {\n\tif (this.options.highlight) {\n\t\tconst out = this.options.highlight(code, lang);\n\t\tif (out != null && out !== code) {\n\t\t\tescaped = true;\n\t\t\tcode = out;\n\t\t}\n\t}\n\n\tlet text = null;\n\n\tif (!lang) {\n\t\ttext = `<pre><code class=\"code-colors hljs\">${escaped ? code : escapeHTML(code)}</code></pre>`;\n\t} else {\n\t\ttext = `<pre><code class=\"code-colors hljs ${escape(lang, true)}\">${escaped ? code : escapeHTML(code)}</code></pre>`;\n\t}\n\n\tif (_.isString(msg)) {\n\t\treturn text;\n\t}\n\n\tconst token = `=!=${Random.id()}=!=`;\n\tmsg.tokens.push({\n\t\thighlight: true,\n\t\ttoken,\n\t\ttext,\n\t});\n\n\treturn token;\n};\n\nrenderer.codespan = function (text) {\n\ttext = `<code class=\"code-colors inline\">${text}</code>`;\n\tif (_.isString(msg)) {\n\t\treturn text;\n\t}\n\n\tconst token = `=!=${Random.id()}=!=`;\n\tmsg.tokens.push({\n\t\ttoken,\n\t\ttext,\n\t});\n\n\treturn token;\n};\n\nrenderer.blockquote = function (quote) {\n\treturn `<blockquote class=\"background-transparent-darker-before\">${quote}</blockquote>`;\n};\n\nconst linkRenderer = renderer.link;\nrenderer.link = function (href, title, text) {\n\tconst html = linkRenderer.call(renderer, href, title, text);\n\treturn html.replace(/^<a /, '<a target=\"_blank\" rel=\"nofollow noopener noreferrer\" ');\n};\n\nconst highlight = function (code, lang) {\n\tif (!lang) {\n\t\treturn code;\n\t}\n\ttry {\n\t\tregister(lang);\n\t\treturn hljs.highlight(lang, code).value;\n\t} catch (e) {\n\t\t// Unknown language\n\t\treturn code;\n\t}\n};\n\nexport const marked = (message, { marked: { gfm, tables, breaks, pedantic, smartLists, smartypants } = {} }) => {\n\tmsg = message;\n\n\tif (!message.tokens) {\n\t\tmessage.tokens = [];\n\t}\n\n\tmessage.html = _marked(unescapeHTML(message.html), {\n\t\tgfm,\n\t\ttables,\n\t\tbreaks,\n\t\tpedantic,\n\t\tsmartLists,\n\t\tsmartypants,\n\t\trenderer,\n\t\thighlight,\n\t});\n\n\tconst window = getGlobalWindow();\n\tconst DomPurify = createDOMPurify(window);\n\tmessage.html = DomPurify.sanitize(message.html, { ADD_ATTR: ['target'] });\n\n\treturn message;\n};\n","/*\n * code() is a named function that will parse `inline code` and ```codeblock``` syntaxes\n * @param {Object} message - The message object\n */\nimport { unescapeHTML } from '@rocket.chat/string-helpers';\n\nimport hljs, { register } from '../../hljs';\nimport { addAsToken } from './token';\n\nconst inlinecode = (message) => {\n\t// Support `text`\n\tmessage.html = message.html.replace(/\\`([^`\\r\\n]+)\\`([<_*~]|\\B|\\b|$)/gm, (match, p1, p2) =>\n\t\taddAsToken(\n\t\t\tmessage,\n\t\t\t`<span class=\\\"copyonly\\\">\\`</span><span><code class=\\\"code-colors inline\\\">${p1}</code></span><span class=\\\"copyonly\\\">\\`</span>${p2}`,\n\t\t\t'inlinecode',\n\t\t\t{ noHtml: match },\n\t\t),\n\t);\n};\n\nconst codeblocks = (message) => {\n\t// Count occurencies of ```\n\tconst count = (message.html.match(/```/gm) || []).length;\n\n\tif (count) {\n\t\t// Check if we need to add a final ```\n\t\tif (count % 2 > 0) {\n\t\t\tmessage.html = `${message.html}\\n\\`\\`\\``;\n\t\t\tmessage.msg = `${message.msg}\\n\\`\\`\\``;\n\t\t}\n\n\t\t// Separate text in code blocks and non code blocks\n\t\tconst msgParts = message.html.split(/(^.*)(```(?:[a-zA-Z]+)?(?:(?:.|\\r|\\n)*?)```)(.*\\n?)$/gm);\n\n\t\tfor (let index = 0; index < msgParts.length; index++) {\n\t\t\t// Verify if this part is code\n\t\t\tconst part = msgParts[index];\n\t\t\tconst codeMatch = part.match(/^```[\\r\\n]*(.*[\\r\\n\\ ]?)[\\r\\n]*([\\s\\S]*?)```+?$/);\n\n\t\t\tif (codeMatch) {\n\t\t\t\t// Process highlight if this part is code\n\t\t\t\tconst singleLine = codeMatch[0].indexOf('\\n') === -1;\n\t\t\t\tconst lang = !singleLine && Array.from(hljs.listLanguages()).includes(codeMatch[1].trim()) ? codeMatch[1].trim() : '';\n\t\t\t\tconst emptyLanguage = lang === '' ? unescapeHTML(codeMatch[1] + codeMatch[2]) : unescapeHTML(codeMatch[2]);\n\t\t\t\tconst code = singleLine ? unescapeHTML(codeMatch[1]) : emptyLanguage;\n\n\t\t\t\tconst result = (() => {\n\t\t\t\t\tif (lang) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tregister(lang);\n\t\t\t\t\t\t\treturn hljs.highlight(lang, code);\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn hljs.highlightAuto(lang + code);\n\t\t\t\t})();\n\t\t\t\tconst token = addAsToken(\n\t\t\t\t\tmessage,\n\t\t\t\t\t`<pre><code class='code-colors hljs ${result.language}'><span class='copyonly'>\\`\\`\\`<br></span>${result.value}<span class='copyonly'><br>\\`\\`\\`</span></code></pre>`,\n\t\t\t\t\t'code',\n\t\t\t\t\t{\n\t\t\t\t\t\tnoHtml: codeMatch[0],\n\t\t\t\t\t\thighlight: true,\n\t\t\t\t\t},\n\t\t\t\t);\n\n\t\t\t\tmsgParts[index] = token;\n\t\t\t} else {\n\t\t\t\tmsgParts[index] = part;\n\t\t\t}\n\t\t}\n\n\t\t// Re-mount message\n\t\tmessage.html = msgParts.join('');\n\t}\n};\n\nexport const code = (message) => {\n\tif (message.html?.trim()) {\n\t\tcodeblocks(message);\n\t\tinlinecode(message);\n\t}\n\n\treturn message;\n};\n","import { addAsToken, isToken, validateAllowedTokens } from './token';\n\nconst validateUrl = (url, message) => {\n\t// Don't render markdown inside links\n\tif (message?.tokens?.some((token) => url.includes(token.token))) {\n\t\treturn false;\n\t}\n\n\t// Valid urls don't contain whitespaces\n\tif (/\\s/.test(url.trim())) {\n\t\treturn false;\n\t}\n\n\ttry {\n\t\tnew URL(url);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n\nconst endsWithWhitespace = (text) => text.substring(text.length - 1).match(/\\s/);\n\nconst getParseableMarkersCount = (start, end) => {\n\tconst usableMarkers = start.length > 1 ? 2 : 1;\n\treturn end.length - usableMarkers >= 0 ? usableMarkers : 1;\n};\n\nconst getTextWrapper = (marker, tagName) => (textPrepend, wrappedText, textAppend) =>\n\t`${textPrepend}<span class=\"copyonly\">${marker}</span><${tagName}>${wrappedText}</${tagName}><span class=\"copyonly\">${marker}</span>${textAppend}`;\n\nconst getRegexReplacer = (replaceFunction, getRegex) => (marker, tagName) => {\n\tconst wrapper = getTextWrapper(marker, tagName);\n\treturn (msg) => msg.replace(getRegex(marker), (...args) => replaceFunction(wrapper, ...args));\n};\n\nconst getParserWithCustomMarker = getRegexReplacer(\n\t(wrapper, match, p1, p2, p3) => {\n\t\tif (endsWithWhitespace(p2)) {\n\t\t\treturn match;\n\t\t}\n\t\tconst finalMarkerCount = getParseableMarkersCount(p1, p3);\n\t\treturn wrapper(p1.substring(finalMarkerCount), p2, p3.substring(finalMarkerCount));\n\t},\n\t(marker) => new RegExp(`(\\\\${marker}+(?!\\\\s))([^\\\\${marker}\\\\r\\\\n]+)(\\\\${marker}+)`, 'gm'),\n);\n\nconst parseBold = getParserWithCustomMarker('*', 'strong');\n\nconst parseStrike = getParserWithCustomMarker('~', 'strike');\n\nconst parseItalic = getRegexReplacer(\n\t(wrapper, match, p1, p2, p3, p4, p5) => {\n\t\tif (p1 || p5 || endsWithWhitespace(p3)) {\n\t\t\treturn match;\n\t\t}\n\n\t\tconst finalMarkerCount = getParseableMarkersCount(p2, p4);\n\t\treturn wrapper(p2.substring(finalMarkerCount), p3, p4.substring(finalMarkerCount));\n\t},\n\t() => new RegExp('([^\\\\r\\\\n\\\\s~*_]){0,1}(\\\\_+(?!\\\\s))([^\\\\_\\\\r\\\\n]+)(\\\\_+)([^\\\\r\\\\n\\\\s]){0,1}', 'gm'),\n)('_', 'em');\n\nconst parseNotEscaped = (message, { supportSchemesForLink, headers, rootUrl }) => {\n\tlet msg = message.html;\n\tif (!message.tokens) {\n\t\tmessage.tokens = [];\n\t}\n\n\tconst schemes = (supportSchemesForLink || '').split(',').join('|');\n\n\tif (headers) {\n\t\t// Support # Text for h1\n\t\tmsg = msg.replace(\n\t\t\t/^# (([\\S\\w\\d-_\\/\\*\\.,\\\\][ \\u00a0\\u1680\\u180e\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]?)+)/gm,\n\t\t\t'<h1>$1</h1>',\n\t\t);\n\n\t\t// Support # Text for h2\n\t\tmsg = msg.replace(\n\t\t\t/^## (([\\S\\w\\d-_\\/\\*\\.,\\\\][ \\u00a0\\u1680\\u180e\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]?)+)/gm,\n\t\t\t'<h2>$1</h2>',\n\t\t);\n\n\t\t// Support # Text for h3\n\t\tmsg = msg.replace(\n\t\t\t/^### (([\\S\\w\\d-_\\/\\*\\.,\\\\][ \\u00a0\\u1680\\u180e\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]?)+)/gm,\n\t\t\t'<h3>$1</h3>',\n\t\t);\n\n\t\t// Support # Text for h4\n\t\tmsg = msg.replace(\n\t\t\t/^#### (([\\S\\w\\d-_\\/\\*\\.,\\\\][ \\u00a0\\u1680\\u180e\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]?)+)/gm,\n\t\t\t'<h4>$1</h4>',\n\t\t);\n\t}\n\n\t// Support *text* to make bold\n\tmsg = parseBold(msg);\n\n\t// Support _text_ to make italics\n\tmsg = parseItalic(msg);\n\n\t// // Support ~text~ to strike through text\n\tmsg = parseStrike(msg);\n\n\t// Support for block quote\n\t// >>>\n\t// Text\n\t// <<<\n\tmsg = msg.replace(\n\t\t/(?:&gt;){3}\\n+([\\s\\S]*?)\\n+(?:&lt;){3}/g,\n\t\t'<blockquote class=\"background-transparent-darker-before\"><span class=\"copyonly\">&gt;&gt;&gt;</span>$1<span class=\"copyonly\">&lt;&lt;&lt;</span></blockquote>',\n\t);\n\n\t// Support >Text for quote\n\tmsg = msg.replace(\n\t\t/^&gt;(.*)$/gm,\n\t\t'<blockquote class=\"background-transparent-darker-before\"><span class=\"copyonly\">&gt;</span>$1</blockquote>',\n\t);\n\n\t// Remove white-space around blockquote (prevent <br>). Because blockquote is block element.\n\tmsg = msg.replace(\n\t\t/\\s*<blockquote class=\"background-transparent-darker-before\">/gm,\n\t\t'<blockquote class=\"background-transparent-darker-before\">',\n\t);\n\tmsg = msg.replace(/<\\/blockquote>\\s*/gm, '</blockquote>');\n\n\t// Remove new-line between blockquotes.\n\tmsg = msg.replace(/<\\/blockquote>\\n<blockquote/gm, '</blockquote><blockquote');\n\n\t// Support ![alt text](http://image url)\n\tmsg = msg.replace(new RegExp(`!\\\\[([^\\\\]]+)\\\\]\\\\(((?:${schemes}):\\\\/\\\\/[^\\\\s]+)\\\\)`, 'gm'), (match, title, url) => {\n\t\tif (!validateUrl(url, message)) {\n\t\t\treturn match;\n\t\t}\n\t\tif (isToken(title) && !validateAllowedTokens(message, title, ['bold', 'italic', 'strike'])) {\n\t\t\treturn match;\n\t\t}\n\t\turl = encodeURI(url);\n\n\t\tconst target = url.indexOf(rootUrl) === 0 ? '' : '_blank';\n\t\treturn addAsToken(\n\t\t\tmessage,\n\t\t\t`<a data-title=\"${url}\" href=\"${url}\" title=\"${title}\" target=\"${target}\" rel=\"noopener noreferrer\"><div class=\"inline-image\" style=\"background-image: url(${url});\"></div></a>`,\n\t\t\t'link',\n\t\t);\n\t});\n\n\t// Support [Text](http://link)\n\tmsg = msg.replace(new RegExp(`\\\\[([^\\\\]]+)\\\\]\\\\(((?:${schemes}):\\\\/\\\\/[^\\\\s]+)\\\\)`, 'gm'), (match, title, url) => {\n\t\tif (!validateUrl(url, message)) {\n\t\t\treturn match;\n\t\t}\n\t\tif (isToken(title) && !validateAllowedTokens(message, title, ['bold', 'italic', 'strike'])) {\n\t\t\treturn match;\n\t\t}\n\t\tconst target = url.indexOf(rootUrl) === 0 ? '' : '_blank';\n\t\ttitle = title.replace(/&amp;/g, '&');\n\n\t\tconst escapedUrl = encodeURI(url);\n\n\t\treturn addAsToken(\n\t\t\tmessage,\n\t\t\t`<a data-title=\"${escapedUrl}\" href=\"${escapedUrl}\" target=\"${target}\" rel=\"noopener noreferrer\">${title}</a>`,\n\t\t\t'link',\n\t\t);\n\t});\n\n\t// Support <http://link|Text>\n\tmsg = msg.replace(new RegExp(`(?:<|&lt;)((?:${schemes}):\\\\\\/\\\\\\/[^\\\\|]+)\\\\|(.+?)(?=>|&gt;)(?:>|&gt;)`, 'gm'), (match, url, title) => {\n\t\tif (!validateUrl(url, message)) {\n\t\t\treturn match;\n\t\t}\n\t\tif (isToken(title) && !validateAllowedTokens(message, title, ['bold', 'italic', 'strike'])) {\n\t\t\treturn match;\n\t\t}\n\t\turl = encodeURI(url);\n\t\tconst target = url.indexOf(rootUrl) === 0 ? '' : '_blank';\n\t\treturn addAsToken(message, `<a data-title=\"${url}\" href=\"${url}\" target=\"${target}\" rel=\"noopener noreferrer\">${title}</a>`, 'link');\n\t});\n\treturn msg;\n};\n\nexport const markdown = (message, options) => {\n\tmessage.html = parseNotEscaped(message, options);\n\treturn message;\n};\n","/*\n * Markdown is a named function that will parse markdown syntax\n * @param {Object} message - The message object\n */\nimport { markdown } from './markdown.js';\nimport { code } from './code.js';\n\nexport const original = (\n\tmessage,\n\toptions = {\n\t\tsupportSchemesForLink: 'http,https',\n\t\theaders: true,\n\t},\n) => {\n\t// Parse markdown code\n\tmessage = code(message);\n\n\t// Parse markdown\n\tmessage = markdown(message, options);\n\n\t// Replace linebreak to br\n\tmessage.html = message.html.replace(/\\n/gm, '<br>');\n\n\treturn message;\n};\n","/*\n * Markdown is a named function that will parse markdown syntax\n * @param {String} msg - The message html\n */\nimport { Random } from 'meteor/random';\n\nimport { IMessage } from '../../../../../definition/IMessage';\n\ntype TokenType = 'code' | 'inlinecode' | 'bold' | 'italic' | 'strike' | 'link';\ntype Token = {\n\ttoken: string;\n\ttype: TokenType;\n\ttext: string;\n\tnoHtml?: string;\n} & TokenExtra;\n\ntype TokenExtra = {\n\thighlight?: boolean;\n\tnoHtml?: string;\n};\n\nexport const addAsToken = (message: IMessage & { tokens: Token[] }, html: string, type: TokenType, extra?: TokenExtra): string => {\n\tif (!message.tokens) {\n\t\tmessage.tokens = [];\n\t}\n\tconst token = `=!=${Random.id()}=!=`;\n\tmessage.tokens.push({\n\t\ttoken,\n\t\ttype,\n\t\ttext: html,\n\t\t...(extra && { ...extra }),\n\t});\n\n\treturn token;\n};\n\nexport const isToken = (msg: string): boolean => /=!=[.a-z0-9]{17}=!=/gim.test(msg.trim());\n\nexport const validateAllowedTokens = (message: IMessage & { tokens: Token[] }, id: string, desiredTokens: TokenType[]): boolean => {\n\tconst tokens = id.match(/=!=[.a-z0-9]{17}=!=/gim) || [];\n\tconst tokensFound = message.tokens.filter(({ token }) => tokens.includes(token));\n\treturn tokensFound.length === 0 || tokensFound.every((token) => desiredTokens.includes(token.type));\n};\n\nexport const validateForbiddenTokens = (message: IMessage & { tokens: Token[] }, id: string, desiredTokens: TokenType[]): boolean => {\n\tconst tokens = id.match(/=!=[.a-z0-9]{17}=!=/gim) || [];\n\tconst tokensFound = message.tokens.filter(({ token }) => tokens.includes(token));\n\treturn tokensFound.length === 0 || !tokensFound.some((token) => desiredTokens.includes(token.type));\n};\n","import { Meteor } from 'meteor/meteor';\n\nexport const { getGlobalWindow } = Meteor.isServer ? require('../server/getGlobalWindow') : require('../client/getGlobalWindow');\n","import hljs from 'highlight.js/lib/highlight';\nimport clean from 'highlight.js/lib/languages/clean';\nimport markdown from 'highlight.js/lib/languages/markdown';\nimport javascript from 'highlight.js/lib/languages/javascript';\n\nhljs.registerLanguage('markdown', markdown);\nhljs.registerLanguage('clean', clean);\nhljs.registerLanguage('javascript', javascript);\n// eslint-disable-next-line complexity\nexport const register = async (lang) => {\n\tswitch (lang) {\n\t\tcase 'onec':\n\t\t\treturn hljs.registerLanguage('onec', (await import('highlight.js/lib/languages/1c')).default);\n\t\tcase 'abnf':\n\t\t\treturn hljs.registerLanguage('abnf', (await import('highlight.js/lib/languages/abnf')).default);\n\t\tcase 'accesslog':\n\t\t\treturn hljs.registerLanguage('accesslog', (await import('highlight.js/lib/languages/accesslog')).default);\n\t\tcase 'actionscript':\n\t\t\treturn hljs.registerLanguage('actionscript', (await import('highlight.js/lib/languages/actionscript')).default);\n\t\tcase 'ada':\n\t\t\treturn hljs.registerLanguage('ada', (await import('highlight.js/lib/languages/ada')).default);\n\t\tcase 'apache':\n\t\t\treturn hljs.registerLanguage('apache', (await import('highlight.js/lib/languages/apache')).default);\n\t\tcase 'applescript':\n\t\t\treturn hljs.registerLanguage('applescript', (await import('highlight.js/lib/languages/applescript')).default);\n\t\tcase 'arduino':\n\t\t\treturn hljs.registerLanguage('arduino', (await import('highlight.js/lib/languages/arduino')).default);\n\t\tcase 'armasm':\n\t\t\treturn hljs.registerLanguage('armasm', (await import('highlight.js/lib/languages/armasm')).default);\n\t\tcase 'asciidoc':\n\t\t\treturn hljs.registerLanguage('asciidoc', (await import('highlight.js/lib/languages/asciidoc')).default);\n\t\tcase 'aspectj':\n\t\t\treturn hljs.registerLanguage('aspectj', (await import('highlight.js/lib/languages/aspectj')).default);\n\t\tcase 'autohotkey':\n\t\t\treturn hljs.registerLanguage('autohotkey', (await import('highlight.js/lib/languages/autohotkey')).default);\n\t\tcase 'autoit':\n\t\t\treturn hljs.registerLanguage('autoit', (await import('highlight.js/lib/languages/autoit')).default);\n\t\tcase 'avrasm':\n\t\t\treturn hljs.registerLanguage('avrasm', (await import('highlight.js/lib/languages/avrasm')).default);\n\t\tcase 'awk':\n\t\t\treturn hljs.registerLanguage('awk', (await import('highlight.js/lib/languages/awk')).default);\n\t\tcase 'axapta':\n\t\t\treturn hljs.registerLanguage('axapta', (await import('highlight.js/lib/languages/axapta')).default);\n\t\tcase 'bash':\n\t\t\treturn hljs.registerLanguage('bash', (await import('highlight.js/lib/languages/bash')).default);\n\t\tcase 'basic':\n\t\t\treturn hljs.registerLanguage('basic', (await import('highlight.js/lib/languages/basic')).default);\n\t\tcase 'bnf':\n\t\t\treturn hljs.registerLanguage('bnf', (await import('highlight.js/lib/languages/bnf')).default);\n\t\tcase 'brainfuck':\n\t\t\treturn hljs.registerLanguage('brainfuck', (await import('highlight.js/lib/languages/brainfuck')).default);\n\t\tcase 'cal':\n\t\t\treturn hljs.registerLanguage('cal', (await import('highlight.js/lib/languages/cal')).default);\n\t\tcase 'capnproto':\n\t\t\treturn hljs.registerLanguage('capnproto', (await import('highlight.js/lib/languages/capnproto')).default);\n\t\tcase 'ceylon':\n\t\t\treturn hljs.registerLanguage('ceylon', (await import('highlight.js/lib/languages/ceylon')).default);\n\t\tcase 'clean':\n\t\t\treturn hljs.registerLanguage('clean', (await import('highlight.js/lib/languages/clean')).default);\n\t\tcase 'clojure':\n\t\t\treturn hljs.registerLanguage('clojure', (await import('highlight.js/lib/languages/clojure')).default);\n\t\tcase 'clojure-repl':\n\t\t\treturn hljs.registerLanguage('clojure-repl', (await import('highlight.js/lib/languages/clojure-repl')).default);\n\t\tcase 'cmake':\n\t\t\treturn hljs.registerLanguage('cmake', (await import('highlight.js/lib/languages/cmake')).default);\n\t\tcase 'coffeescript':\n\t\t\treturn hljs.registerLanguage('coffeescript', (await import('highlight.js/lib/languages/coffeescript')).default);\n\t\tcase 'coq':\n\t\t\treturn hljs.registerLanguage('coq', (await import('highlight.js/lib/languages/coq')).default);\n\t\tcase 'cos':\n\t\t\treturn hljs.registerLanguage('cos', (await import('highlight.js/lib/languages/cos')).default);\n\t\tcase 'cpp':\n\t\t\treturn hljs.registerLanguage('cpp', (await import('highlight.js/lib/languages/cpp')).default);\n\t\tcase 'crmsh':\n\t\t\treturn hljs.registerLanguage('crmsh', (await import('highlight.js/lib/languages/crmsh')).default);\n\t\tcase 'crystal':\n\t\t\treturn hljs.registerLanguage('crystal', (await import('highlight.js/lib/languages/crystal')).default);\n\t\tcase 'cs':\n\t\t\treturn hljs.registerLanguage('cs', (await import('highlight.js/lib/languages/cs')).default);\n\t\tcase 'csp':\n\t\t\treturn hljs.registerLanguage('csp', (await import('highlight.js/lib/languages/csp')).default);\n\t\tcase 'css':\n\t\t\treturn hljs.registerLanguage('css', (await import('highlight.js/lib/languages/css')).default);\n\t\tcase 'd':\n\t\t\treturn hljs.registerLanguage('d', (await import('highlight.js/lib/languages/d')).default);\n\t\tcase 'dart':\n\t\t\treturn hljs.registerLanguage('dart', (await import('highlight.js/lib/languages/dart')).default);\n\t\tcase 'delphi':\n\t\t\treturn hljs.registerLanguage('delphi', (await import('highlight.js/lib/languages/delphi')).default);\n\t\tcase 'diff':\n\t\t\treturn hljs.registerLanguage('diff', (await import('highlight.js/lib/languages/diff')).default);\n\t\tcase 'django':\n\t\t\treturn hljs.registerLanguage('django', (await import('highlight.js/lib/languages/django')).default);\n\t\tcase 'dns':\n\t\t\treturn hljs.registerLanguage('dns', (await import('highlight.js/lib/languages/dns')).default);\n\t\tcase 'dockerfile':\n\t\t\treturn hljs.registerLanguage('dockerfile', (await import('highlight.js/lib/languages/dockerfile')).default);\n\t\tcase 'dos':\n\t\t\treturn hljs.registerLanguage('dos', (await import('highlight.js/lib/languages/dos')).default);\n\t\tcase 'dsconfig':\n\t\t\treturn hljs.registerLanguage('dsconfig', (await import('highlight.js/lib/languages/dsconfig')).default);\n\t\tcase 'dts':\n\t\t\treturn hljs.registerLanguage('dts', (await import('highlight.js/lib/languages/dts')).default);\n\t\tcase 'dust':\n\t\t\treturn hljs.registerLanguage('dust', (await import('highlight.js/lib/languages/dust')).default);\n\t\tcase 'ebnf':\n\t\t\treturn hljs.registerLanguage('ebnf', (await import('highlight.js/lib/languages/ebnf')).default);\n\t\tcase 'elixir':\n\t\t\treturn hljs.registerLanguage('elixir', (await import('highlight.js/lib/languages/elixir')).default);\n\t\tcase 'elm':\n\t\t\treturn hljs.registerLanguage('elm', (await import('highlight.js/lib/languages/elm')).default);\n\t\tcase 'erb':\n\t\t\treturn hljs.registerLanguage('erb', (await import('highlight.js/lib/languages/erb')).default);\n\t\tcase 'erlang':\n\t\t\treturn hljs.registerLanguage('erlang', (await import('highlight.js/lib/languages/erlang')).default);\n\t\tcase 'excel':\n\t\t\treturn hljs.registerLanguage('excel', (await import('highlight.js/lib/languages/excel')).default);\n\t\tcase 'fix':\n\t\t\treturn hljs.registerLanguage('fix', (await import('highlight.js/lib/languages/fix')).default);\n\t\tcase 'flix':\n\t\t\treturn hljs.registerLanguage('flix', (await import('highlight.js/lib/languages/flix')).default);\n\t\tcase 'fortran':\n\t\t\treturn hljs.registerLanguage('fortran', (await import('highlight.js/lib/languages/fortran')).default);\n\t\tcase 'fsharp':\n\t\t\treturn hljs.registerLanguage('fsharp', (await import('highlight.js/lib/languages/fsharp')).default);\n\t\tcase 'gams':\n\t\t\treturn hljs.registerLanguage('gams', (await import('highlight.js/lib/languages/gams')).default);\n\t\tcase 'gauss':\n\t\t\treturn hljs.registerLanguage('gauss', (await import('highlight.js/lib/languages/gauss')).default);\n\t\tcase 'gcode':\n\t\t\treturn hljs.registerLanguage('gcode', (await import('highlight.js/lib/languages/gcode')).default);\n\t\tcase 'gherkin':\n\t\t\treturn hljs.registerLanguage('gherkin', (await import('highlight.js/lib/languages/gherkin')).default);\n\t\tcase 'glsl':\n\t\t\treturn hljs.registerLanguage('glsl', (await import('highlight.js/lib/languages/glsl')).default);\n\t\tcase 'go':\n\t\t\treturn hljs.registerLanguage('go', (await import('highlight.js/lib/languages/go')).default);\n\t\tcase 'golo':\n\t\t\treturn hljs.registerLanguage('golo', (await import('highlight.js/lib/languages/golo')).default);\n\t\tcase 'gradle':\n\t\t\treturn hljs.registerLanguage('gradle', (await import('highlight.js/lib/languages/gradle')).default);\n\t\tcase 'groovy':\n\t\t\treturn hljs.registerLanguage('groovy', (await import('highlight.js/lib/languages/groovy')).default);\n\t\tcase 'haml':\n\t\t\treturn hljs.registerLanguage('haml', (await import('highlight.js/lib/languages/haml')).default);\n\t\tcase 'handlebars':\n\t\t\treturn hljs.registerLanguage('handlebars', (await import('highlight.js/lib/languages/handlebars')).default);\n\t\tcase 'haskell':\n\t\t\treturn hljs.registerLanguage('haskell', (await import('highlight.js/lib/languages/haskell')).default);\n\t\tcase 'haxe':\n\t\t\treturn hljs.registerLanguage('haxe', (await import('highlight.js/lib/languages/haxe')).default);\n\t\tcase 'hsp':\n\t\t\treturn hljs.registerLanguage('hsp', (await import('highlight.js/lib/languages/hsp')).default);\n\t\tcase 'htmlbars':\n\t\t\treturn hljs.registerLanguage('htmlbars', (await import('highlight.js/lib/languages/htmlbars')).default);\n\t\tcase 'http':\n\t\t\treturn hljs.registerLanguage('http', (await import('highlight.js/lib/languages/http')).default);\n\t\tcase 'hy':\n\t\t\treturn hljs.registerLanguage('hy', (await import('highlight.js/lib/languages/hy')).default);\n\t\tcase 'inform7':\n\t\t\treturn hljs.registerLanguage('inform7', (await import('highlight.js/lib/languages/inform7')).default);\n\t\tcase 'ini':\n\t\t\treturn hljs.registerLanguage('ini', (await import('highlight.js/lib/languages/ini')).default);\n\t\tcase 'irpf90':\n\t\t\treturn hljs.registerLanguage('irpf90', (await import('highlight.js/lib/languages/irpf90')).default);\n\t\tcase 'java':\n\t\t\treturn hljs.registerLanguage('java', (await import('highlight.js/lib/languages/java')).default);\n\t\tcase 'javascript':\n\t\t\treturn hljs.registerLanguage('javascript', (await import('highlight.js/lib/languages/javascript')).default);\n\t\tcase 'jboss-cli':\n\t\t\treturn hljs.registerLanguage('jboss-cli', (await import('highlight.js/lib/languages/jboss-cli')).default);\n\t\tcase 'json':\n\t\t\treturn hljs.registerLanguage('json', (await import('highlight.js/lib/languages/json')).default);\n\t\tcase 'julia':\n\t\t\treturn hljs.registerLanguage('julia', (await import('highlight.js/lib/languages/julia')).default);\n\t\tcase 'julia-repl':\n\t\t\treturn hljs.registerLanguage('julia-repl', (await import('highlight.js/lib/languages/julia-repl')).default);\n\t\tcase 'kotlin':\n\t\t\treturn hljs.registerLanguage('kotlin', (await import('highlight.js/lib/languages/kotlin')).default);\n\t\tcase 'lasso':\n\t\t\treturn hljs.registerLanguage('lasso', (await import('highlight.js/lib/languages/lasso')).default);\n\t\tcase 'ldif':\n\t\t\treturn hljs.registerLanguage('ldif', (await import('highlight.js/lib/languages/ldif')).default);\n\t\tcase 'leaf':\n\t\t\treturn hljs.registerLanguage('leaf', (await import('highlight.js/lib/languages/leaf')).default);\n\t\tcase 'less':\n\t\t\treturn hljs.registerLanguage('less', (await import('highlight.js/lib/languages/less')).default);\n\t\tcase 'lisp':\n\t\t\treturn hljs.registerLanguage('lisp', (await import('highlight.js/lib/languages/lisp')).default);\n\t\tcase 'livecodeserver':\n\t\t\treturn hljs.registerLanguage('livecodeserver', (await import('highlight.js/lib/languages/livecodeserver')).default);\n\t\tcase 'livescript':\n\t\t\treturn hljs.registerLanguage('livescript', (await import('highlight.js/lib/languages/livescript')).default);\n\t\tcase 'llvm':\n\t\t\treturn hljs.registerLanguage('llvm', (await import('highlight.js/lib/languages/llvm')).default);\n\t\tcase 'lsl':\n\t\t\treturn hljs.registerLanguage('lsl', (await import('highlight.js/lib/languages/lsl')).default);\n\t\tcase 'lua':\n\t\t\treturn hljs.registerLanguage('lua', (await import('highlight.js/lib/languages/lua')).default);\n\t\tcase 'makefile':\n\t\t\treturn hljs.registerLanguage('makefile', (await import('highlight.js/lib/languages/makefile')).default);\n\t\tcase 'markdown':\n\t\t\treturn hljs.registerLanguage('markdown', (await import('highlight.js/lib/languages/markdown')).default);\n\t\tcase 'mathematica':\n\t\t\treturn hljs.registerLanguage('mathematica', (await import('highlight.js/lib/languages/mathematica')).default);\n\t\tcase 'matlab':\n\t\t\treturn hljs.registerLanguage('matlab', (await import('highlight.js/lib/languages/matlab')).default);\n\t\tcase 'maxima':\n\t\t\treturn hljs.registerLanguage('maxima', (await import('highlight.js/lib/languages/maxima')).default);\n\t\tcase 'mel':\n\t\t\treturn hljs.registerLanguage('mel', (await import('highlight.js/lib/languages/mel')).default);\n\t\tcase 'mercury':\n\t\t\treturn hljs.registerLanguage('mercury', (await import('highlight.js/lib/languages/mercury')).default);\n\t\tcase 'mipsasm':\n\t\t\treturn hljs.registerLanguage('mipsasm', (await import('highlight.js/lib/languages/mipsasm')).default);\n\t\tcase 'mizar':\n\t\t\treturn hljs.registerLanguage('mizar', (await import('highlight.js/lib/languages/mizar')).default);\n\t\tcase 'perl':\n\t\t\treturn hljs.registerLanguage('perl', (await import('highlight.js/lib/languages/perl')).default);\n\t\tcase 'mojolicious':\n\t\t\treturn hljs.registerLanguage('mojolicious', (await import('highlight.js/lib/languages/mojolicious')).default);\n\t\tcase 'monkey':\n\t\t\treturn hljs.registerLanguage('monkey', (await import('highlight.js/lib/languages/monkey')).default);\n\t\tcase 'moonscript':\n\t\t\treturn hljs.registerLanguage('moonscript', (await import('highlight.js/lib/languages/moonscript')).default);\n\t\tcase 'n1ql':\n\t\t\treturn hljs.registerLanguage('n1ql', (await import('highlight.js/lib/languages/n1ql')).default);\n\t\tcase 'nginx':\n\t\t\treturn hljs.registerLanguage('nginx', (await import('highlight.js/lib/languages/nginx')).default);\n\t\tcase 'nimrod':\n\t\t\treturn hljs.registerLanguage('nimrod', (await import('highlight.js/lib/languages/nimrod')).default);\n\t\tcase 'nix':\n\t\t\treturn hljs.registerLanguage('nix', (await import('highlight.js/lib/languages/nix')).default);\n\t\tcase 'nsis':\n\t\t\treturn hljs.registerLanguage('nsis', (await import('highlight.js/lib/languages/nsis')).default);\n\t\tcase 'objectivec':\n\t\t\treturn hljs.registerLanguage('objectivec', (await import('highlight.js/lib/languages/objectivec')).default);\n\t\tcase 'ocaml':\n\t\t\treturn hljs.registerLanguage('ocaml', (await import('highlight.js/lib/languages/ocaml')).default);\n\t\tcase 'openscad':\n\t\t\treturn hljs.registerLanguage('openscad', (await import('highlight.js/lib/languages/openscad')).default);\n\t\tcase 'oxygene':\n\t\t\treturn hljs.registerLanguage('oxygene', (await import('highlight.js/lib/languages/oxygene')).default);\n\t\tcase 'parser3':\n\t\t\treturn hljs.registerLanguage('parser3', (await import('highlight.js/lib/languages/parser3')).default);\n\t\tcase 'pf':\n\t\t\treturn hljs.registerLanguage('pf', (await import('highlight.js/lib/languages/pf')).default);\n\t\tcase 'php':\n\t\t\treturn hljs.registerLanguage('php', (await import('highlight.js/lib/languages/php')).default);\n\t\tcase 'pony':\n\t\t\treturn hljs.registerLanguage('pony', (await import('highlight.js/lib/languages/pony')).default);\n\t\tcase 'powershell':\n\t\t\treturn hljs.registerLanguage('powershell', (await import('highlight.js/lib/languages/powershell')).default);\n\t\tcase 'processing':\n\t\t\treturn hljs.registerLanguage('processing', (await import('highlight.js/lib/languages/processing')).default);\n\t\tcase 'profile':\n\t\t\treturn hljs.registerLanguage('profile', (await import('highlight.js/lib/languages/profile')).default);\n\t\tcase 'prolog':\n\t\t\treturn hljs.registerLanguage('prolog', (await import('highlight.js/lib/languages/prolog')).default);\n\t\tcase 'protobuf':\n\t\t\treturn hljs.registerLanguage('protobuf', (await import('highlight.js/lib/languages/protobuf')).default);\n\t\tcase 'puppet':\n\t\t\treturn hljs.registerLanguage('puppet', (await import('highlight.js/lib/languages/puppet')).default);\n\t\tcase 'purebasic':\n\t\t\treturn hljs.registerLanguage('purebasic', (await import('highlight.js/lib/languages/purebasic')).default);\n\t\tcase 'python':\n\t\t\treturn hljs.registerLanguage('python', (await import('highlight.js/lib/languages/python')).default);\n\t\tcase 'q':\n\t\t\treturn hljs.registerLanguage('q', (await import('highlight.js/lib/languages/q')).default);\n\t\tcase 'qml':\n\t\t\treturn hljs.registerLanguage('qml', (await import('highlight.js/lib/languages/qml')).default);\n\t\tcase 'r':\n\t\t\treturn hljs.registerLanguage('r', (await import('highlight.js/lib/languages/r')).default);\n\t\tcase 'rib':\n\t\t\treturn hljs.registerLanguage('rib', (await import('highlight.js/lib/languages/rib')).default);\n\t\tcase 'roboconf':\n\t\t\treturn hljs.registerLanguage('roboconf', (await import('highlight.js/lib/languages/roboconf')).default);\n\t\tcase 'rsl':\n\t\t\treturn hljs.registerLanguage('rsl', (await import('highlight.js/lib/languages/rsl')).default);\n\t\tcase 'ruleslanguage':\n\t\t\treturn hljs.registerLanguage('ruleslanguage', (await import('highlight.js/lib/languages/ruleslanguage')).default);\n\t\tcase 'rust':\n\t\t\treturn hljs.registerLanguage('rust', (await import('highlight.js/lib/languages/rust')).default);\n\t\tcase 'scala':\n\t\t\treturn hljs.registerLanguage('scala', (await import('highlight.js/lib/languages/scala')).default);\n\t\tcase 'scheme':\n\t\t\treturn hljs.registerLanguage('scheme', (await import('highlight.js/lib/languages/scheme')).default);\n\t\tcase 'scilab':\n\t\t\treturn hljs.registerLanguage('scilab', (await import('highlight.js/lib/languages/scilab')).default);\n\t\tcase 'scss':\n\t\t\treturn hljs.registerLanguage('scss', (await import('highlight.js/lib/languages/scss')).default);\n\t\tcase 'shell':\n\t\t\treturn hljs.registerLanguage('shell', (await import('highlight.js/lib/languages/shell')).default);\n\t\tcase 'smali':\n\t\t\treturn hljs.registerLanguage('smali', (await import('highlight.js/lib/languages/smali')).default);\n\t\tcase 'smalltalk':\n\t\t\treturn hljs.registerLanguage('smalltalk', (await import('highlight.js/lib/languages/smalltalk')).default);\n\t\tcase 'sml':\n\t\t\treturn hljs.registerLanguage('sml', (await import('highlight.js/lib/languages/sml')).default);\n\t\tcase 'sqf':\n\t\t\treturn hljs.registerLanguage('sqf', (await import('highlight.js/lib/languages/sqf')).default);\n\t\tcase 'sql':\n\t\t\treturn hljs.registerLanguage('sql', (await import('highlight.js/lib/languages/sql')).default);\n\t\tcase 'stan':\n\t\t\treturn hljs.registerLanguage('stan', (await import('highlight.js/lib/languages/stan')).default);\n\t\tcase 'stata':\n\t\t\treturn hljs.registerLanguage('stata', (await import('highlight.js/lib/languages/stata')).default);\n\t\tcase 'step21':\n\t\t\treturn hljs.registerLanguage('step21', (await import('highlight.js/lib/languages/step21')).default);\n\t\tcase 'stylus':\n\t\t\treturn hljs.registerLanguage('stylus', (await import('highlight.js/lib/languages/stylus')).default);\n\t\tcase 'subunit':\n\t\t\treturn hljs.registerLanguage('subunit', (await import('highlight.js/lib/languages/subunit')).default);\n\t\tcase 'swift':\n\t\t\treturn hljs.registerLanguage('swift', (await import('highlight.js/lib/languages/swift')).default);\n\t\tcase 'taggerscript':\n\t\t\treturn hljs.registerLanguage('taggerscript', (await import('highlight.js/lib/languages/taggerscript')).default);\n\t\tcase 'yaml':\n\t\t\treturn hljs.registerLanguage('yaml', (await import('highlight.js/lib/languages/yaml')).default);\n\t\tcase 'tap':\n\t\t\treturn hljs.registerLanguage('tap', (await import('highlight.js/lib/languages/tap')).default);\n\t\tcase 'tcl':\n\t\t\treturn hljs.registerLanguage('tcl', (await import('highlight.js/lib/languages/tcl')).default);\n\t\tcase 'tex':\n\t\t\treturn hljs.registerLanguage('tex', (await import('highlight.js/lib/languages/tex')).default);\n\t\tcase 'thrift':\n\t\t\treturn hljs.registerLanguage('thrift', (await import('highlight.js/lib/languages/thrift')).default);\n\t\tcase 'tp':\n\t\t\treturn hljs.registerLanguage('tp', (await import('highlight.js/lib/languages/tp')).default);\n\t\tcase 'twig':\n\t\t\treturn hljs.registerLanguage('twig', (await import('highlight.js/lib/languages/twig')).default);\n\t\tcase 'typescript':\n\t\t\treturn hljs.registerLanguage('typescript', (await import('highlight.js/lib/languages/typescript')).default);\n\t\tcase 'vala':\n\t\t\treturn hljs.registerLanguage('vala', (await import('highlight.js/lib/languages/vala')).default);\n\t\tcase 'vbnet':\n\t\t\treturn hljs.registerLanguage('vbnet', (await import('highlight.js/lib/languages/vbnet')).default);\n\t\tcase 'vbscript':\n\t\t\treturn hljs.registerLanguage('vbscript', (await import('highlight.js/lib/languages/vbscript')).default);\n\t\tcase 'vbscript-html':\n\t\t\treturn hljs.registerLanguage('vbscript-html(', (await import('highlight.js/lib/languages/vbscript-html')).default);\n\t\tcase 'verilog':\n\t\t\treturn hljs.registerLanguage('verilog', (await import('highlight.js/lib/languages/verilog')).default);\n\t\tcase 'vhdl':\n\t\t\treturn hljs.registerLanguage('vhdl', (await import('highlight.js/lib/languages/vhdl')).default);\n\t\tcase 'vim':\n\t\t\treturn hljs.registerLanguage('vim', (await import('highlight.js/lib/languages/vim')).default);\n\t\tcase 'x86asm':\n\t\t\treturn hljs.registerLanguage('x86asm', (await import('highlight.js/lib/languages/x86asm')).default);\n\t\tcase 'xl':\n\t\t\treturn hljs.registerLanguage('xl', (await import('highlight.js/lib/languages/xl')).default);\n\t\tcase 'xquery':\n\t\t\treturn hljs.registerLanguage('xquery', (await import('highlight.js/lib/languages/xquery')).default);\n\t\tcase 'zephir':\n\t\t\treturn hljs.registerLanguage('zephir', (await import('highlight.js/lib/languages/zephir')).default);\n\t\tdefault:\n\t\t\treturn hljs.registerLanguage('plaintext', (await import('highlight.js/lib/languages/plaintext')).default);\n\t}\n};\n\nexport default hljs;\n","/*\n * Markdown is a named function that will parse markdown syntax\n * @param {Object} message - The message object\n */\nimport { Meteor } from 'meteor/meteor';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\n\nimport { marked } from './parser/marked/marked';\nimport { original } from './parser/original/original';\nimport { filtered } from './parser/filtered/filtered';\nimport { code } from './parser/original/code';\nimport { settings } from '../../settings';\n\nconst parsers = {\n\toriginal,\n\tmarked,\n\tfiltered,\n};\n\nclass MarkdownClass {\n\tparse(text) {\n\t\tconst message = {\n\t\t\thtml: escapeHTML(text),\n\t\t};\n\t\treturn this.mountTokensBack(this.parseMessageNotEscaped(message)).html;\n\t}\n\n\tparseNotEscaped(text) {\n\t\tconst message = {\n\t\t\thtml: text,\n\t\t};\n\t\treturn this.mountTokensBack(this.parseMessageNotEscaped(message)).html;\n\t}\n\n\tparseMessageNotEscaped(message) {\n\t\tconst parser = settings.get('Markdown_Parser');\n\n\t\tif (parser === 'disabled') {\n\t\t\treturn message;\n\t\t}\n\n\t\tconst options = {\n\t\t\tsupportSchemesForLink: settings.get('Markdown_SupportSchemesForLink'),\n\t\t\theaders: settings.get('Markdown_Headers'),\n\t\t\trootUrl: Meteor.absoluteUrl(),\n\t\t\tmarked: {\n\t\t\t\tgfm: settings.get('Markdown_Marked_GFM'),\n\t\t\t\ttables: settings.get('Markdown_Marked_Tables'),\n\t\t\t\tbreaks: settings.get('Markdown_Marked_Breaks'),\n\t\t\t\tpedantic: settings.get('Markdown_Marked_Pedantic'),\n\t\t\t\tsmartLists: settings.get('Markdown_Marked_SmartLists'),\n\t\t\t\tsmartypants: settings.get('Markdown_Marked_Smartypants'),\n\t\t\t},\n\t\t};\n\n\t\tconst parse = typeof parsers[parser] === 'function' ? parsers[parser] : parsers.original;\n\n\t\treturn parse(message, options);\n\t}\n\n\tmountTokensBackRecursively(message, tokenList, useHtml = true) {\n\t\tconst missingTokens = [];\n\n\t\tif (tokenList.length > 0) {\n\t\t\tfor (const { token, text, noHtml } of tokenList) {\n\t\t\t\tif (message.html.indexOf(token) >= 0) {\n\t\t\t\t\tmessage.html = message.html.replace(token, () => (useHtml ? text : noHtml)); // Uses lambda so doesn't need to escape $\n\t\t\t\t} else {\n\t\t\t\t\tmissingTokens.push({ token, text, noHtml });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// If there are tokens that were missing from the string, but the last iteration replaced at least one token, then go again\n\t\t// this is done because one of the tokens may have been hidden by another one\n\t\tif (missingTokens.length > 0 && missingTokens.length < tokenList.length) {\n\t\t\tthis.mountTokensBackRecursively(message, missingTokens, useHtml);\n\t\t}\n\t}\n\n\tmountTokensBack(message, useHtml = true) {\n\t\tif (message.tokens) {\n\t\t\tthis.mountTokensBackRecursively(message, message.tokens, useHtml);\n\t\t}\n\n\t\treturn message;\n\t}\n\n\tcode(...args) {\n\t\treturn code(...args);\n\t}\n\n\tfilterMarkdownFromMessage(message) {\n\t\treturn parsers.filtered(message, {\n\t\t\tsupportSchemesForLink: settings.get('Markdown_SupportSchemesForLink'),\n\t\t});\n\t}\n}\n\nexport const Markdown = new MarkdownClass();\n\nexport const filterMarkdown = (message) => Markdown.filterMarkdownFromMessage(message);\n\nexport const createMarkdownMessageRenderer = ({ parser, ...options }) => {\n\tif (!parser || parser === 'disabled') {\n\t\treturn (message) => message;\n\t}\n\n\tconst parse = typeof parsers[parser] === 'function' ? parsers[parser] : parsers.original;\n\n\treturn (message) => {\n\t\tif (!message?.html?.trim()) {\n\t\t\treturn message;\n\t\t}\n\n\t\treturn parse(message, options);\n\t};\n};\n\nexport const createMarkdownNotificationRenderer = (options) => (message) => parsers.filtered(message, options);\n","export const getGlobalWindow = (): Omit<Window, 'self' | 'top' | 'window'> => window;\n","export { Markdown } from '../lib/markdown';\nexport { createMarkdownMessageRenderer, createMarkdownNotificationRenderer } from '../lib/markdown';\n","import { Meteor } from 'meteor/meteor';\n\nimport { handleError } from '../../../../client/lib/utils/handleError';\nimport { Messages, Subscriptions } from '../../../models/client';\n\n// Action Links namespace creation.\nexport const actionLinks = {\n\tactions: {},\n\tregister(name, funct) {\n\t\tactionLinks.actions[name] = funct;\n\t},\n\tgetMessage(name, messageId) {\n\t\tconst userId = Meteor.userId();\n\t\tif (!userId) {\n\t\t\tthrow new Meteor.Error('error-invalid-user', 'Invalid user', {\n\t\t\t\tfunction: 'actionLinks.getMessage',\n\t\t\t});\n\t\t}\n\n\t\tconst message = Messages.findOne({ _id: messageId });\n\t\tif (!message) {\n\t\t\tthrow new Meteor.Error('error-invalid-message', 'Invalid message', {\n\t\t\t\tfunction: 'actionLinks.getMessage',\n\t\t\t});\n\t\t}\n\n\t\tconst subscription = Subscriptions.findOne({\n\t\t\t'rid': message.rid,\n\t\t\t'u._id': userId,\n\t\t});\n\t\tif (!subscription) {\n\t\t\tthrow new Meteor.Error('error-not-allowed', 'Not allowed', {\n\t\t\t\tfunction: 'actionLinks.getMessage',\n\t\t\t});\n\t\t}\n\n\t\tif (!message.actionLinks || !message.actionLinks[name]) {\n\t\t\tthrow new Meteor.Error('error-invalid-actionlink', 'Invalid action link', {\n\t\t\t\tfunction: 'actionLinks.getMessage',\n\t\t\t});\n\t\t}\n\n\t\treturn message;\n\t},\n\trun(name, messageId, instance) {\n\t\tconst message = actionLinks.getMessage(name, messageId);\n\n\t\tconst actionLink = message.actionLinks[name];\n\n\t\tlet ranClient = false;\n\n\t\tif (actionLinks && actionLinks.actions && actionLinks.actions[actionLink.method_id]) {\n\t\t\t// run just on client side\n\t\t\tactionLinks.actions[actionLink.method_id](message, actionLink.params, instance);\n\n\t\t\tranClient = true;\n\t\t}\n\n\t\t// and run on server side\n\t\tMeteor.call('actionLinkHandler', name, messageId, (err) => {\n\t\t\tif (err && !ranClient) {\n\t\t\t\thandleError(err);\n\t\t\t}\n\t\t});\n\t},\n};\n","import { actionLinks } from './lib/actionLinks';\n\nexport { actionLinks };\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { AutoTranslate } from './autotranslate';\nimport { settings } from '../../../settings';\nimport { hasAtLeastOnePermission } from '../../../authorization';\nimport { MessageAction } from '../../../ui-utils';\nimport { messageArgs } from '../../../ui-utils/client/lib/messageArgs';\nimport { Messages } from '../../../models';\n\nMeteor.startup(() => {\n\tAutoTranslate.init();\n\n\tTracker.autorun(() => {\n\t\tif (settings.get('AutoTranslate_Enabled') && hasAtLeastOnePermission(['auto-translate'])) {\n\t\t\tMessageAction.addButton({\n\t\t\t\tid: 'translate',\n\t\t\t\ticon: 'language',\n\t\t\t\tlabel: 'Translate',\n\t\t\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\t\t\taction() {\n\t\t\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\t\t\tconst language = AutoTranslate.getLanguage(message.rid);\n\t\t\t\t\tif (!message.translations || !message.translations[language]) {\n\t\t\t\t\t\t// } && !_.find(message.attachments, attachment => { return attachment.translations && attachment.translations[language]; })) {\n\t\t\t\t\t\tAutoTranslate.messageIdsToWait[message._id] = true;\n\t\t\t\t\t\tMessages.update({ _id: message._id }, { $set: { autoTranslateFetching: true } });\n\t\t\t\t\t\tMeteor.call('autoTranslate.translateMessage', message, language);\n\t\t\t\t\t}\n\t\t\t\t\tconst action = message.autoTranslateShowInverse ? '$unset' : '$set';\n\t\t\t\t\tMessages.update({ _id: message._id }, { [action]: { autoTranslateShowInverse: true } });\n\t\t\t\t},\n\t\t\t\tcondition({ msg, u }) {\n\t\t\t\t\treturn msg && msg.u && msg.u._id !== u._id && msg.translations && !msg.translations.original;\n\t\t\t\t},\n\t\t\t\torder: 90,\n\t\t\t});\n\t\t\tMessageAction.addButton({\n\t\t\t\tid: 'view-original',\n\t\t\t\ticon: 'language',\n\t\t\t\tlabel: 'View_original',\n\t\t\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\t\t\taction() {\n\t\t\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\t\t\tconst language = AutoTranslate.getLanguage(message.rid);\n\t\t\t\t\tif (!message.translations || !message.translations[language]) {\n\t\t\t\t\t\t// } && !_.find(message.attachments, attachment => { return attachment.translations && attachment.translations[language]; })) {\n\t\t\t\t\t\tAutoTranslate.messageIdsToWait[message._id] = true;\n\t\t\t\t\t\tMessages.update({ _id: message._id }, { $set: { autoTranslateFetching: true } });\n\t\t\t\t\t\tMeteor.call('autoTranslate.translateMessage', message, language);\n\t\t\t\t\t}\n\t\t\t\t\tconst action = message.autoTranslateShowInverse ? '$unset' : '$set';\n\t\t\t\t\tMessages.update({ _id: message._id }, { [action]: { autoTranslateShowInverse: true } });\n\t\t\t\t},\n\t\t\t\tcondition({ msg, u }) {\n\t\t\t\t\treturn msg && msg.u && msg.u._id !== u._id && msg.translations && msg.translations.original;\n\t\t\t\t},\n\t\t\t\torder: 90,\n\t\t\t});\n\t\t} else {\n\t\t\tMessageAction.removeButton('toggle-language');\n\t\t}\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport _ from 'underscore';\nimport mem from 'mem';\n\nimport { Subscriptions, Messages } from '../../../models';\nimport { hasPermission } from '../../../authorization';\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\n\nlet userLanguage = 'en';\nlet username = '';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst user = Meteor.user();\n\t\tif (!user) {\n\t\t\treturn;\n\t\t}\n\t\tuserLanguage = user.language || 'en';\n\t\tusername = user.username;\n\t});\n});\n\nexport const AutoTranslate = {\n\tinitialized: false,\n\tprovidersMetadata: {},\n\tmessageIdsToWait: {},\n\tsupportedLanguages: [],\n\n\tfindSubscriptionByRid: mem((rid) => Subscriptions.findOne({ rid })),\n\n\tgetLanguage(rid) {\n\t\tlet subscription = {};\n\t\tif (rid) {\n\t\t\tsubscription = this.findSubscriptionByRid(rid);\n\t\t}\n\t\tconst language = (subscription && subscription.autoTranslateLanguage) || userLanguage || window.defaultUserLanguage();\n\t\tif (language.indexOf('-') !== -1) {\n\t\t\tif (!_.findWhere(this.supportedLanguages, { language })) {\n\t\t\t\treturn language.substr(0, 2);\n\t\t\t}\n\t\t}\n\t\treturn language;\n\t},\n\n\ttranslateAttachments(attachments, language) {\n\t\tfor (const attachment of attachments) {\n\t\t\tif (attachment.author_name !== username) {\n\t\t\t\tif (attachment.text && attachment.translations && attachment.translations[language]) {\n\t\t\t\t\tattachment.text = attachment.translations[language];\n\t\t\t\t}\n\n\t\t\t\tif (attachment.description && attachment.translations && attachment.translations[language]) {\n\t\t\t\t\tattachment.description = attachment.translations[language];\n\t\t\t\t}\n\n\t\t\t\tif (attachment.attachments && attachment.attachments.length > 0) {\n\t\t\t\t\tattachment.attachments = this.translateAttachments(attachment.attachments, language);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn attachments;\n\t},\n\n\tinit() {\n\t\tif (this.initialized) {\n\t\t\treturn;\n\t\t}\n\n\t\tTracker.autorun(async (c) => {\n\t\t\tconst uid = Meteor.userId();\n\t\t\tif (!uid || !hasPermission('auto-translate')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tc.stop();\n\n\t\t\t[this.providersMetadata, this.supportedLanguages] = await Promise.all([\n\t\t\t\tcallWithErrorHandling('autoTranslate.getProviderUiMetadata'),\n\t\t\t\tcallWithErrorHandling('autoTranslate.getSupportedLanguages', 'en'),\n\t\t\t]);\n\t\t});\n\n\t\tSubscriptions.find().observeChanges({\n\t\t\tchanged: (id, fields) => {\n\t\t\t\tif (fields.hasOwnProperty('autoTranslate') || fields.hasOwnProperty('autoTranslateLanguage')) {\n\t\t\t\t\tmem.clear(this.findSubscriptionByRid);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\tthis.initialized = true;\n\t},\n};\n\nexport const createAutoTranslateMessageRenderer = () => {\n\tAutoTranslate.init();\n\n\treturn (message) => {\n\t\tconst subscription = AutoTranslate.findSubscriptionByRid(message.rid);\n\t\tconst autoTranslateLanguage = AutoTranslate.getLanguage(message.rid);\n\t\tif (message.u && message.u._id !== Meteor.userId()) {\n\t\t\tif (!message.translations) {\n\t\t\t\tmessage.translations = {};\n\t\t\t}\n\t\t\tif (!!(subscription && subscription.autoTranslate) !== !!message.autoTranslateShowInverse) {\n\t\t\t\tmessage.translations.original = message.html;\n\t\t\t\tif (message.translations[autoTranslateLanguage]) {\n\t\t\t\t\tmessage.html = message.translations[autoTranslateLanguage];\n\t\t\t\t}\n\n\t\t\t\tif (message.attachments && message.attachments.length > 0) {\n\t\t\t\t\tmessage.attachments = AutoTranslate.translateAttachments(message.attachments, autoTranslateLanguage);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (message.attachments && message.attachments.length > 0) {\n\t\t\tmessage.attachments = AutoTranslate.translateAttachments(message.attachments, autoTranslateLanguage);\n\t\t}\n\t\treturn message;\n\t};\n};\n\nexport const createAutoTranslateMessageStreamHandler = () => {\n\tAutoTranslate.init();\n\n\treturn (message) => {\n\t\tif (message.u && message.u._id !== Meteor.userId()) {\n\t\t\tconst subscription = AutoTranslate.findSubscriptionByRid(message.rid);\n\t\t\tconst language = AutoTranslate.getLanguage(message.rid);\n\t\t\tif (\n\t\t\t\tsubscription &&\n\t\t\t\tsubscription.autoTranslate === true &&\n\t\t\t\tmessage.msg &&\n\t\t\t\t(!message.translations || !message.translations[language])\n\t\t\t) {\n\t\t\t\t// || (message.attachments && !_.find(message.attachments, attachment => { return attachment.translations && attachment.translations[language]; }))\n\t\t\t\tMessages.update({ _id: message._id }, { $set: { autoTranslateFetching: true } });\n\t\t\t} else if (AutoTranslate.messageIdsToWait[message._id] !== undefined && subscription && subscription.autoTranslate !== true) {\n\t\t\t\tMessages.update({ _id: message._id }, { $set: { autoTranslateShowInverse: true }, $unset: { autoTranslateFetching: true } });\n\t\t\t\tdelete AutoTranslate.messageIdsToWait[message._id];\n\t\t\t} else if (message.autoTranslateFetching === true) {\n\t\t\t\tMessages.update({ _id: message._id }, { $unset: { autoTranslateFetching: true } });\n\t\t\t}\n\t\t}\n\t};\n};\n","import { lazy, useMemo } from 'react';\n\nimport { addAction } from '../../../../client/views/room/lib/Toolbox';\nimport { usePermission } from '../../../../client/contexts/AuthorizationContext';\nimport { useSetting } from '../../../../client/contexts/SettingsContext';\n\naddAction('autotranslate', () => {\n\tconst hasPermission = usePermission('auto-translate');\n\tconst autoTranslateEnabled = useSetting('AutoTranslate_Enabled');\n\treturn useMemo(\n\t\t() =>\n\t\t\thasPermission && autoTranslateEnabled\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\t\t\t\tid: 'autotranslate',\n\t\t\t\t\t\ttitle: 'Auto_Translate',\n\t\t\t\t\t\ticon: 'language',\n\t\t\t\t\t\ttemplate: lazy(() => import('../../../../client/views/room/contextualBar/AutoTranslate')),\n\t\t\t\t\t\torder: 20,\n\t\t\t\t\t\tfull: true,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[autoTranslateEnabled, hasPermission],\n\t);\n});\n","import './lib/actionButton';\nimport './lib/tabBar';\n\nexport { AutoTranslate, createAutoTranslateMessageRenderer, createAutoTranslateMessageStreamHandler } from './lib/autotranslate';\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport _ from 'underscore';\n\nexport const ChannelSettings = new (class {\n\tconstructor() {\n\t\tthis.options = new ReactiveVar({});\n\t}\n\n\t/*\n\t * Adds an option in Channel Settings\n\t * @config (object)\n\t *   id: option id (required)\n\t *   template (string): template name to render (required)\n\t *   validation (function): if option should be displayed\n\t */\n\taddOption(config) {\n\t\tif (config == null || config.id == null) {\n\t\t\treturn false;\n\t\t}\n\t\treturn Tracker.nonreactive(() => {\n\t\t\tconst opts = this.options.get();\n\t\t\topts[config.id] = config;\n\t\t\treturn this.options.set(opts);\n\t\t});\n\t}\n\n\tgetOptions(currentData = {}, group) {\n\t\tconst allOptions = _.toArray(this.options.get());\n\t\tconst allowedOptions = _.compact(\n\t\t\t_.map(allOptions, function (option) {\n\t\t\t\tconst ret = { ...option };\n\t\t\t\tif (option.validation == null || option.validation(currentData)) {\n\t\t\t\t\tret.data = Object.assign({}, typeof option.data === 'function' ? option.data() : option.data, currentData);\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t}),\n\t\t).filter(function (option) {\n\t\t\treturn !group || !option.group || option.group.includes(group);\n\t\t});\n\t\treturn _.sortBy(allowedOptions, 'order');\n\t}\n})();\n","import './tabBar';\n\nexport { ChannelSettings } from './lib/ChannelSettings';\n","import { FC, lazy, LazyExoticComponent } from 'react';\n\nimport { addAction } from '../../../client/views/room/lib/Toolbox';\n\naddAction('channel-settings', {\n\tgroups: ['channel', 'group'],\n\tid: 'channel-settings',\n\tanonymous: true,\n\tfull: true,\n\ttitle: 'Room_Info',\n\ticon: 'info-circled',\n\ttemplate: lazy(() => import('../../../client/views/room/contextualBar/Info')) as LazyExoticComponent<FC>,\n\torder: 1,\n});\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/index.js');\n}\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/index.js');\n}\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport _ from 'underscore';\n\nimport { CachedCollectionManager } from '../../../ui-cached-collection';\nimport { getURL } from '../../../utils/client';\n\nconst getCustomSoundId = (sound) => `custom-sound-${sound}`;\n\nclass CustomSoundsClass {\n\tconstructor() {\n\t\tthis.list = new ReactiveVar({});\n\t\tthis.add({ _id: 'chime', name: 'Chime', extension: 'mp3', src: getURL('sounds/chime.mp3') });\n\t\tthis.add({ _id: 'door', name: 'Door', extension: 'mp3', src: getURL('sounds/door.mp3') });\n\t\tthis.add({ _id: 'beep', name: 'Beep', extension: 'mp3', src: getURL('sounds/beep.mp3') });\n\t\tthis.add({ _id: 'chelle', name: 'Chelle', extension: 'mp3', src: getURL('sounds/chelle.mp3') });\n\t\tthis.add({ _id: 'ding', name: 'Ding', extension: 'mp3', src: getURL('sounds/ding.mp3') });\n\t\tthis.add({\n\t\t\t_id: 'droplet',\n\t\t\tname: 'Droplet',\n\t\t\textension: 'mp3',\n\t\t\tsrc: getURL('sounds/droplet.mp3'),\n\t\t});\n\t\tthis.add({\n\t\t\t_id: 'highbell',\n\t\t\tname: 'Highbell',\n\t\t\textension: 'mp3',\n\t\t\tsrc: getURL('sounds/highbell.mp3'),\n\t\t});\n\t\tthis.add({\n\t\t\t_id: 'seasons',\n\t\t\tname: 'Seasons',\n\t\t\textension: 'mp3',\n\t\t\tsrc: getURL('sounds/seasons.mp3'),\n\t\t});\n\t}\n\n\tadd(sound) {\n\t\tif (!sound.src) {\n\t\t\tsound.src = this.getURL(sound);\n\t\t}\n\t\tconst audio = $('<audio />', { id: getCustomSoundId(sound._id), preload: true }).append($('<source />', { src: sound.src }));\n\t\tconst list = this.list.get();\n\t\tlist[sound._id] = sound;\n\t\tthis.list.set(list);\n\t\t$('body').append(audio);\n\t}\n\n\tremove(sound) {\n\t\tconst list = this.list.get();\n\t\tdelete list[sound._id];\n\t\tthis.list.set(list);\n\t\t$(`#${sound._id}`).remove();\n\t}\n\n\tupdate(sound) {\n\t\tconst audio = $(`#${sound._id}`);\n\t\tif (audio && audio[0]) {\n\t\t\tconst list = this.list.get();\n\t\t\tif (!sound.src) {\n\t\t\t\tsound.src = this.getURL(sound);\n\t\t\t}\n\t\t\tlist[sound._id] = sound;\n\t\t\tthis.list.set(list);\n\t\t\t$('source', audio).attr('src', sound.src);\n\t\t\taudio[0].load();\n\t\t} else {\n\t\t\tthis.add(sound);\n\t\t}\n\t}\n\n\tgetURL(sound) {\n\t\treturn getURL(`/custom-sounds/${sound._id}.${sound.extension}?_dc=${sound.random || 0}`);\n\t}\n\n\tgetList() {\n\t\tconst list = Object.values(this.list.get());\n\t\treturn _.sortBy(list, 'name');\n\t}\n\n\tplay = (sound, { volume = 1, loop = false } = {}) => {\n\t\tconst audio = document.querySelector(`#${getCustomSoundId(sound)}`);\n\t\tif (!audio || !audio.play) {\n\t\t\treturn;\n\t\t}\n\n\t\taudio.volume = volume;\n\t\taudio.loop = loop;\n\t\taudio.play();\n\n\t\treturn audio;\n\t};\n\n\tpause = (sound) => {\n\t\tconst audio = document.querySelector(`#${getCustomSoundId(sound)}`);\n\t\tif (!audio || !audio.pause) {\n\t\t\treturn;\n\t\t}\n\n\t\taudio.pause();\n\t\tif (audio.currentTime !== 0) {\n\t\t\taudio.currentTime = 0;\n\t\t}\n\t};\n}\n\nexport const CustomSounds = new CustomSoundsClass();\n\nMeteor.startup(() =>\n\tCachedCollectionManager.onLogin(() => {\n\t\tMeteor.call('listCustomSounds', (error, result) => {\n\t\t\tfor (const sound of result) {\n\t\t\t\tCustomSounds.add(sound);\n\t\t\t}\n\t\t});\n\t}),\n);\n","import { Meteor } from 'meteor/meteor';\n\nimport { CachedCollectionManager } from '../../../ui-cached-collection';\nimport { Notifications } from '../../../notifications';\nimport { CustomSounds } from '../lib/CustomSounds';\n\nMeteor.startup(() =>\n\tCachedCollectionManager.onLogin(() => Notifications.onAll('deleteCustomSound', (data) => CustomSounds.remove(data.soundData))),\n);\n","import { Meteor } from 'meteor/meteor';\n\nimport { CachedCollectionManager } from '../../../ui-cached-collection';\nimport { Notifications } from '../../../notifications';\nimport { CustomSounds } from '../lib/CustomSounds';\n\nMeteor.startup(() =>\n\tCachedCollectionManager.onLogin(() => Notifications.onAll('updateCustomSound', (data) => CustomSounds.update(data.soundData))),\n);\n","import './notifications/deleteCustomSound';\nimport './notifications/updateCustomSound';\n\nexport { CustomSounds } from './lib/CustomSounds';\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\n\nimport { isSetNotNull } from './function-isSet';\nimport { RoomManager } from '../../../ui-utils/client';\nimport { emoji, EmojiPicker } from '../../../emoji/client';\nimport { CachedCollectionManager } from '../../../ui-cached-collection/client';\nimport { APIClient } from '../../../utils/client';\n\nexport const getEmojiUrlFromName = function (name, extension) {\n\tSession.get;\n\n\tconst key = `emoji_random_${name}`;\n\n\tlet random = 0;\n\tif (isSetNotNull(() => Session.keys[key])) {\n\t\trandom = Session.keys[key];\n\t}\n\n\tif (name == null) {\n\t\treturn;\n\t}\n\tconst path = __meteor_runtime_config__.ROOT_URL_PATH_PREFIX || '';\n\treturn `${path}/emoji-custom/${encodeURIComponent(name)}.${extension}?_dc=${random}`;\n};\n\nexport const deleteEmojiCustom = function (emojiData) {\n\tdelete emoji.list[`:${emojiData.name}:`];\n\tconst arrayIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(emojiData.name);\n\tif (arrayIndex !== -1) {\n\t\temoji.packages.emojiCustom.emojisByCategory.rocket.splice(arrayIndex, 1);\n\t}\n\tconst arrayIndexList = emoji.packages.emojiCustom.list.indexOf(`:${emojiData.name}:`);\n\tif (arrayIndexList !== -1) {\n\t\temoji.packages.emojiCustom.list.splice(arrayIndexList, 1);\n\t}\n\tif (isSetNotNull(() => emojiData.aliases)) {\n\t\tfor (const alias of emojiData.aliases) {\n\t\t\tdelete emoji.list[`:${alias}:`];\n\t\t\tconst aliasIndex = emoji.packages.emojiCustom.list.indexOf(`:${alias}:`);\n\t\t\tif (aliasIndex !== -1) {\n\t\t\t\temoji.packages.emojiCustom.list.splice(aliasIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n\tEmojiPicker.updateRecent('rocket');\n};\n\nexport const updateEmojiCustom = function (emojiData) {\n\tlet key = `emoji_random_${emojiData.name}`;\n\tSession.set(key, Math.round(Math.random() * 1000));\n\n\tconst previousExists = isSetNotNull(() => emojiData.previousName);\n\tconst currentAliases = isSetNotNull(() => emojiData.aliases);\n\n\tif (previousExists && isSetNotNull(() => emoji.list[`:${emojiData.previousName}:`].aliases)) {\n\t\tfor (const alias of emoji.list[`:${emojiData.previousName}:`].aliases) {\n\t\t\tdelete emoji.list[`:${alias}:`];\n\t\t\tconst aliasIndex = emoji.packages.emojiCustom.list.indexOf(`:${alias}:`);\n\t\t\tif (aliasIndex !== -1) {\n\t\t\t\temoji.packages.emojiCustom.list.splice(aliasIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\tconst arrayIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(emojiData.previousName);\n\t\tif (arrayIndex !== -1) {\n\t\t\temoji.packages.emojiCustom.emojisByCategory.rocket.splice(arrayIndex, 1);\n\t\t}\n\t\tconst arrayIndexList = emoji.packages.emojiCustom.list.indexOf(`:${emojiData.previousName}:`);\n\t\tif (arrayIndexList !== -1) {\n\t\t\temoji.packages.emojiCustom.list.splice(arrayIndexList, 1);\n\t\t}\n\t\tdelete emoji.list[`:${emojiData.previousName}:`];\n\t}\n\n\tconst categoryIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(`${emojiData.name}`);\n\tif (categoryIndex === -1) {\n\t\temoji.packages.emojiCustom.emojisByCategory.rocket.push(`${emojiData.name}`);\n\t\temoji.packages.emojiCustom.list.push(`:${emojiData.name}:`);\n\t}\n\temoji.list[`:${emojiData.name}:`] = Object.assign({ emojiPackage: 'emojiCustom' }, emoji.list[`:${emojiData.name}:`], emojiData);\n\tif (currentAliases) {\n\t\tfor (const alias of emojiData.aliases) {\n\t\t\temoji.packages.emojiCustom.list.push(`:${alias}:`);\n\t\t\temoji.list[`:${alias}:`] = {};\n\t\t\temoji.list[`:${alias}:`].emojiPackage = 'emojiCustom';\n\t\t\temoji.list[`:${alias}:`].aliasOf = emojiData.name;\n\t\t}\n\t}\n\n\tconst url = getEmojiUrlFromName(emojiData.name, emojiData.extension);\n\n\t// update in admin interface\n\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\t$(document)\n\t\t\t.find(`.emojiAdminPreview-image[data-emoji='${emojiData.previousName}']`)\n\t\t\t.css('background-image', `url('${url})'`)\n\t\t\t.attr('data-emoji', `${emojiData.name}`);\n\t} else {\n\t\t$(document).find(`.emojiAdminPreview-image[data-emoji='${emojiData.name}']`).css('background-image', `url('${url}')`);\n\t}\n\n\t// update in picker\n\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\t$(document)\n\t\t\t.find(`li[data-emoji='${emojiData.previousName}'] span`)\n\t\t\t.css('background-image', `url('${url}')`)\n\t\t\t.attr('data-emoji', `${emojiData.name}`);\n\t\t$(document)\n\t\t\t.find(`li[data-emoji='${emojiData.previousName}']`)\n\t\t\t.attr('data-emoji', `${emojiData.name}`)\n\t\t\t.attr('class', `emoji-${emojiData.name}`);\n\t} else {\n\t\t$(document).find(`li[data-emoji='${emojiData.name}'] span`).css('background-image', `url('${url}')`);\n\t}\n\n\t// update in picker and opened rooms\n\tfor (key in RoomManager.openedRooms) {\n\t\tif (RoomManager.openedRooms.hasOwnProperty(key)) {\n\t\t\tconst room = RoomManager.openedRooms[key];\n\t\t\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\t\t\t$(room.dom)\n\t\t\t\t\t.find(`span[data-emoji='${emojiData.previousName}']`)\n\t\t\t\t\t.css('background-image', `url('${url}')`)\n\t\t\t\t\t.attr('data-emoji', `${emojiData.name}`);\n\t\t\t} else {\n\t\t\t\t$(room.dom).find(`span[data-emoji='${emojiData.name}']`).css('background-image', `url('${url}')`);\n\t\t\t}\n\t\t}\n\t}\n\n\tEmojiPicker.updateRecent('rocket');\n};\n\nconst customRender = (html) => {\n\tconst emojisMatchGroup = emoji.packages.emojiCustom.list.map(escapeRegExp).join('|');\n\tif (emojisMatchGroup !== emoji.packages.emojiCustom._regexpSignature) {\n\t\temoji.packages.emojiCustom._regexpSignature = emojisMatchGroup;\n\t\temoji.packages.emojiCustom._regexp = new RegExp(\n\t\t\t`<object[^>]*>.*?<\\/object>|<span[^>]*>.*?<\\/span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|(${emojisMatchGroup})`,\n\t\t\t'gi',\n\t\t);\n\t}\n\n\thtml = html.replace(emoji.packages.emojiCustom._regexp, (shortname) => {\n\t\tif (typeof shortname === 'undefined' || shortname === '' || emoji.packages.emojiCustom.list.indexOf(shortname) === -1) {\n\t\t\treturn shortname;\n\t\t}\n\n\t\tlet emojiAlias = shortname.replace(/:/g, '');\n\n\t\tlet dataCheck = emoji.list[shortname];\n\t\tif (dataCheck.hasOwnProperty('aliasOf')) {\n\t\t\temojiAlias = dataCheck.aliasOf;\n\t\t\tdataCheck = emoji.list[`:${emojiAlias}:`];\n\t\t}\n\n\t\treturn `<span class=\"emoji\" style=\"background-image:url(${getEmojiUrlFromName(\n\t\t\temojiAlias,\n\t\t\tdataCheck.extension,\n\t\t)});\" data-emoji=\"${emojiAlias}\" title=\"${shortname}\">${shortname}</span>`;\n\t});\n\n\treturn html;\n};\n\nemoji.packages.emojiCustom = {\n\temojiCategories: [{ key: 'rocket', i18n: 'Custom' }],\n\tcategoryIndex: 1,\n\ttoneList: {},\n\tlist: [],\n\t_regexpSignature: null,\n\t_regexp: null,\n\n\trender: customRender,\n\trenderPicker: customRender,\n};\n\nMeteor.startup(() =>\n\tCachedCollectionManager.onLogin(async () => {\n\t\ttry {\n\t\t\tconst {\n\t\t\t\temojis: { update: emojis },\n\t\t\t} = await APIClient.v1.get('emoji-custom.list');\n\n\t\t\temoji.packages.emojiCustom.emojisByCategory = { rocket: [] };\n\t\t\tfor (const currentEmoji of emojis) {\n\t\t\t\temoji.packages.emojiCustom.emojisByCategory.rocket.push(currentEmoji.name);\n\t\t\t\temoji.packages.emojiCustom.list.push(`:${currentEmoji.name}:`);\n\t\t\t\temoji.list[`:${currentEmoji.name}:`] = currentEmoji;\n\t\t\t\temoji.list[`:${currentEmoji.name}:`].emojiPackage = 'emojiCustom';\n\t\t\t\tfor (const alias of currentEmoji.aliases) {\n\t\t\t\t\temoji.packages.emojiCustom.list.push(`:${alias}:`);\n\t\t\t\t\temoji.list[`:${alias}:`] = {\n\t\t\t\t\t\temojiPackage: 'emojiCustom',\n\t\t\t\t\t\taliasOf: currentEmoji.name,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tEmojiPicker.updateRecent('rocket');\n\t\t} catch (e) {\n\t\t\tconsole.error('Error getting custom emoji', e);\n\t\t}\n\t}),\n);\n","// http://stackoverflow.com/a/26990347 function isSet() from Gajus\nexport const isSet = function (fn) {\n\tlet value;\n\ttry {\n\t\tvalue = fn();\n\t} catch (e) {\n\t\tvalue = undefined;\n\t}\n\treturn value !== undefined;\n};\n\nexport const isSetNotNull = function (fn) {\n\tlet value;\n\ttry {\n\t\tvalue = fn();\n\t} catch (e) {\n\t\tvalue = null;\n\t}\n\treturn value !== null && value !== undefined;\n};\n","import { registerAdminSidebarItem } from '../../../../client/views/admin';\nimport { hasPermission } from '../../../authorization';\n\nregisterAdminSidebarItem({\n\thref: 'emoji-custom',\n\ti18nLabel: 'Custom_Emoji',\n\ticon: 'emoji',\n\tpermissionGranted() {\n\t\treturn hasPermission('manage-emoji');\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { Notifications } from '../../../notifications';\nimport { deleteEmojiCustom } from '../lib/emojiCustom';\n\nMeteor.startup(() => Notifications.onLogged('deleteEmojiCustom', (data) => deleteEmojiCustom(data.emojiData)));\n","import { Meteor } from 'meteor/meteor';\n\nimport { Notifications } from '../../../notifications';\nimport { updateEmojiCustom } from '../lib/emojiCustom';\n\nMeteor.startup(() => Notifications.onLogged('updateEmojiCustom', (data) => updateEmojiCustom(data.emojiData)));\n","import './lib/emojiCustom';\nimport './notifications/deleteEmojiCustom';\nimport './notifications/updateEmojiCustom';\nimport './admin/startup';\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\nimport { Tracker } from 'meteor/tracker';\nimport { UploadFS } from 'meteor/jalik:ufs';\n\nimport { FileUploadBase } from '../../lib/FileUploadBase';\nimport { Uploads, Avatars } from '../../../models';\n\nnew UploadFS.Store({\n\tcollection: Uploads.model,\n\tname: 'Uploads',\n});\n\nnew UploadFS.Store({\n\tcollection: Avatars.model,\n\tname: 'Avatars',\n});\n\nexport const fileUploadHandler = (directive, meta, file) => {\n\tconst store = UploadFS.getStore(directive);\n\n\tif (store) {\n\t\treturn new FileUploadBase(store, meta, file);\n\t}\n\tconsole.error('Invalid file store', directive);\n};\n\nTracker.autorun(function () {\n\tif (Meteor.userId()) {\n\t\tconst secure = location.protocol === 'https:' ? '; secure' : '';\n\n\t\tdocument.cookie = `rc_uid=${escape(Meteor.userId())}; path=/${secure}`;\n\t\tdocument.cookie = `rc_token=${escape(Accounts._storedLoginToken())}; path=/${secure}`;\n\t}\n});\n","import { fileUploadHandler } from './lib/fileUploadHandler';\n\nexport { fileUploadHandler };\n","import path from 'path';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Random } from 'meteor/random';\nimport { UploadFS } from 'meteor/jalik:ufs';\nimport _ from 'underscore';\n\nimport { canAccessRoom, hasPermission } from '../../authorization';\nimport { settings } from '../../settings';\n\n// set ufs temp dir to $TMPDIR/ufs instead of /tmp/ufs if the variable is set\nif ('TMPDIR' in process.env) {\n\tUploadFS.config.tmpDir = path.join(process.env.TMPDIR, 'ufs');\n}\n\nUploadFS.config.defaultStorePermissions = new UploadFS.StorePermissions({\n\tinsert(userId, doc) {\n\t\tif (userId) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// allow inserts from slackbridge (message_id = slack-timestamp-milli)\n\t\tif (doc && doc.message_id && doc.message_id.indexOf('slack-') === 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// allow inserts to the UserDataFiles store\n\t\tif (doc && doc.store && doc.store.split(':').pop() === 'UserDataFiles') {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (canAccessRoom(null, null, doc)) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\tupdate(userId, doc) {\n\t\treturn hasPermission(Meteor.userId(), 'delete-message', doc.rid) || (settings.get('Message_AllowDeleting') && userId === doc.userId);\n\t},\n\tremove(userId, doc) {\n\t\treturn hasPermission(Meteor.userId(), 'delete-message', doc.rid) || (settings.get('Message_AllowDeleting') && userId === doc.userId);\n\t},\n});\n\nexport class FileUploadBase {\n\tconstructor(store, meta, file) {\n\t\tthis.id = Random.id();\n\t\tthis.meta = meta;\n\t\tthis.file = file;\n\t\tthis.store = store;\n\t}\n\n\tgetProgress() {}\n\n\tgetFileName() {\n\t\treturn this.meta.name;\n\t}\n\n\tstart(callback) {\n\t\tthis.handler = new UploadFS.Uploader({\n\t\t\tstore: this.store,\n\t\t\tdata: this.file,\n\t\t\tfile: this.meta,\n\t\t\tonError: (err) => callback(err),\n\t\t\tonComplete: (fileData) => {\n\t\t\t\tconst file = _.pick(fileData, '_id', 'type', 'size', 'name', 'identify', 'description');\n\n\t\t\t\tfile.url = fileData.url.replace(Meteor.absoluteUrl(), '/');\n\t\t\t\treturn callback(null, file, this.store.options.name);\n\t\t\t},\n\t\t});\n\n\t\tthis.handler.onProgress = (file, progress) => {\n\t\t\tthis.onProgress(progress);\n\t\t};\n\n\t\treturn this.handler.start();\n\t}\n\n\tonProgress() {}\n\n\tstop() {\n\t\treturn this.handler.stop();\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/index.js');\n}\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/index.js');\n}\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport './Presence';\n\nclass Notifications {\n\tconstructor(...args) {\n\t\tthis.logged = Meteor.userId() !== null;\n\t\tthis.loginCb = [];\n\t\tTracker.autorun(() => {\n\t\t\tif (Meteor.userId() !== null && this.logged === false) {\n\t\t\t\tthis.loginCb.forEach((cb) => cb());\n\t\t\t}\n\t\t\tthis.logged = Meteor.userId() !== null;\n\t\t});\n\t\tthis.debug = false;\n\t\tthis.streamAll = new Meteor.Streamer('notify-all');\n\t\tthis.streamLogged = new Meteor.Streamer('notify-logged');\n\t\tthis.streamRoom = new Meteor.Streamer('notify-room');\n\t\tthis.streamRoomUsers = new Meteor.Streamer('notify-room-users');\n\t\tthis.streamUser = new Meteor.Streamer('notify-user');\n\n\t\tif (this.debug === true) {\n\t\t\tthis.onAll(function () {\n\t\t\t\treturn console.log('RocketChat.Notifications: onAll', args);\n\t\t\t});\n\t\t\tthis.onUser(function () {\n\t\t\t\treturn console.log('RocketChat.Notifications: onAll', args);\n\t\t\t});\n\t\t}\n\t}\n\n\tonLogin(cb) {\n\t\tthis.loginCb.push(cb);\n\t\tif (this.logged) {\n\t\t\treturn cb();\n\t\t}\n\t}\n\n\tnotifyRoom(room, eventName, ...args) {\n\t\tif (this.debug === true) {\n\t\t\tconsole.log('RocketChat.Notifications: notifyRoom', [room, eventName, ...args]);\n\t\t}\n\t\targs.unshift(`${room}/${eventName}`);\n\t\treturn this.streamRoom.emit.apply(this.streamRoom, args);\n\t}\n\n\tnotifyUser(userId, eventName, ...args) {\n\t\tif (this.debug === true) {\n\t\t\tconsole.log('RocketChat.Notifications: notifyUser', [userId, eventName, ...args]);\n\t\t}\n\t\targs.unshift(`${userId}/${eventName}`);\n\t\treturn this.streamUser.emit.apply(this.streamUser, args);\n\t}\n\n\tnotifyUsersOfRoom(room, eventName, ...args) {\n\t\tif (this.debug === true) {\n\t\t\tconsole.log('RocketChat.Notifications: notifyUsersOfRoom', [room, eventName, ...args]);\n\t\t}\n\t\targs.unshift(`${room}/${eventName}`);\n\t\treturn this.streamRoomUsers.emit.apply(this.streamRoomUsers, args);\n\t}\n\n\tonAll(eventName, callback) {\n\t\treturn this.streamAll.on(eventName, callback);\n\t}\n\n\tonLogged(eventName, callback) {\n\t\treturn this.onLogin(() => this.streamLogged.on(eventName, callback));\n\t}\n\n\tonRoom(room, eventName, callback) {\n\t\tif (this.debug === true) {\n\t\t\tthis.streamRoom.on(room, function () {\n\t\t\t\treturn console.log(`RocketChat.Notifications: onRoom ${room}`, [room, eventName, callback]);\n\t\t\t});\n\t\t}\n\t\treturn this.streamRoom.on(`${room}/${eventName}`, callback);\n\t}\n\n\tasync onUser(eventName, callback, visitorId = null) {\n\t\tawait this.streamUser.on(`${Meteor.userId() || visitorId}/${eventName}`, callback);\n\t\treturn () => this.unUser(eventName, callback, visitorId);\n\t}\n\n\tunAll(callback) {\n\t\treturn this.streamAll.removeListener('notify', callback);\n\t}\n\n\tunLogged(callback) {\n\t\treturn this.streamLogged.removeListener('notify', callback);\n\t}\n\n\tunRoom(room, eventName, callback) {\n\t\treturn this.streamRoom.removeListener(`${room}/${eventName}`, callback);\n\t}\n\n\tunUser(eventName, callback, visitorId = null) {\n\t\treturn this.streamUser.removeListener(`${Meteor.userId() || visitorId}/${eventName}`, callback);\n\t}\n}\n\nexport default new Notifications();\n","import { Meteor } from 'meteor/meteor';\n\nimport { Presence, STATUS_MAP } from '../../../../client/lib/presence';\n\n// TODO implement API on Streamer to be able to listen to all streamed data\n// this is a hacky way to listen to all streamed data from user-presense Streamer\n(Meteor as any).StreamerCentral.on('stream-user-presence', (uid: string, args: unknown) => {\n\tif (!Array.isArray(args)) {\n\t\tthrow new Error('Presence event must be an array');\n\t}\n\tconst [username, status, statusText] = args as [string, number, string | undefined];\n\tPresence.notify({ _id: uid, username, status: STATUS_MAP[status], statusText });\n});\n","import Notifications from './lib/Notifications';\n\nexport { Notifications };\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/index.js');\n}\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/index.js');\n}\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveDict } from 'meteor/reactive-dict';\n\nimport { PublicSettingsCachedCollection } from '../../../../client/lib/settings/PublicSettingsCachedCollection';\nimport { SettingsBase } from '../../lib/settings';\nimport { SettingValue } from '../../../../definition/ISetting';\n\nclass Settings extends SettingsBase {\n\tcachedCollection = PublicSettingsCachedCollection.get();\n\n\tcollection = PublicSettingsCachedCollection.get().collection;\n\n\tdict = new ReactiveDict('settings');\n\n\tget(_id: string | RegExp, ...args: []): any {\n\t\tif (_id instanceof RegExp) {\n\t\t\tthrow new Error('RegExp Settings.get(RegExp)');\n\t\t}\n\t\tif (args.length > 0) {\n\t\t\tthrow new Error('settings.get(String, callback) only works on backend');\n\t\t}\n\t\treturn this.dict.get(_id);\n\t}\n\n\tprivate _storeSettingValue(record: { _id: string; value: SettingValue }, initialLoad: boolean): void {\n\t\tMeteor.settings[record._id] = record.value;\n\t\tthis.dict.set(record._id, record.value);\n\t\tthis.load(record._id, record.value, initialLoad);\n\t}\n\n\tinit(): void {\n\t\tlet initialLoad = true;\n\t\tthis.collection.find().observe({\n\t\t\tadded: (record: { _id: string; value: SettingValue }) => this._storeSettingValue(record, initialLoad),\n\t\t\tchanged: (record: { _id: string; value: SettingValue }) => this._storeSettingValue(record, initialLoad),\n\t\t\tremoved: (record: { _id: string }) => {\n\t\t\t\tdelete Meteor.settings[record._id];\n\t\t\t\tthis.dict.set(record._id, null);\n\t\t\t\tthis.load(record._id, undefined, initialLoad);\n\t\t\t},\n\t\t});\n\t\tinitialLoad = false;\n\t}\n}\n\nexport const settings = new Settings();\n\nsettings.init();\n","import { settings } from './lib/settings';\n\nexport { settings };\n","import { Meteor } from 'meteor/meteor';\nimport _ from 'underscore';\n\nimport { SettingValue } from '../../../definition/ISetting';\n\nexport type SettingComposedValue<T extends SettingValue = SettingValue> = { key: string; value: T };\nexport type SettingCallback = (key: string, value: SettingValue, initialLoad?: boolean) => void;\n\ninterface ISettingRegexCallbacks {\n\tregex: RegExp;\n\tcallbacks: SettingCallback[];\n}\n\nexport class SettingsBase {\n\tprivate callbacks = new Map<string, SettingCallback[]>();\n\n\tprivate regexCallbacks = new Map<string, ISettingRegexCallbacks>();\n\n\t// private ts = new Date()\n\tpublic get<T extends SettingValue = SettingValue>(_id: RegExp, callback: SettingCallback): void;\n\n\tpublic get<T extends SettingValue = SettingValue>(_id: string, callback: SettingCallback): void;\n\n\tpublic get<T extends SettingValue = SettingValue>(_id: RegExp): SettingComposedValue<T>[];\n\n\tpublic get<T extends SettingValue = SettingValue>(_id: string): T | undefined;\n\n\tpublic get<T extends SettingValue = SettingValue>(\n\t\t_id: string | RegExp,\n\t\tcallback?: SettingCallback,\n\t): T | undefined | SettingComposedValue<T>[] | void {\n\t\tif (callback != null) {\n\t\t\tthis.onload(_id, callback);\n\t\t\tif (!Meteor.settings) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (_id === '*') {\n\t\t\t\treturn Object.keys(Meteor.settings).forEach((key) => {\n\t\t\t\t\tconst value = Meteor.settings[key];\n\t\t\t\t\tcallback(key, value);\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (_.isRegExp(_id) && Meteor.settings) {\n\t\t\t\treturn Object.keys(Meteor.settings).forEach((key) => {\n\t\t\t\t\tif (!_id.test(key)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst value = Meteor.settings[key];\n\t\t\t\t\tcallback(key, value);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (typeof _id === 'string') {\n\t\t\t\tconst value = Meteor.settings[_id];\n\t\t\t\tif (value != null) {\n\t\t\t\t\tcallback(_id, Meteor.settings[_id]);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (!Meteor.settings) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (_.isRegExp(_id)) {\n\t\t\treturn Object.keys(Meteor.settings).reduce((items: SettingComposedValue<T>[], key) => {\n\t\t\t\tconst value = Meteor.settings[key];\n\t\t\t\tif (_id.test(key)) {\n\t\t\t\t\titems.push({\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn items;\n\t\t\t}, []);\n\t\t}\n\n\t\treturn Meteor.settings && Meteor.settings[_id];\n\t}\n\n\tset(_id: string, value: SettingValue, callback: () => void): void {\n\t\tMeteor.call('saveSetting', _id, value, callback);\n\t}\n\n\tbatchSet(settings: Array<{ _id: string; value: SettingValue }>, callback: () => void): void {\n\t\tMeteor.call('saveSettings', settings, callback);\n\t}\n\n\tload(key: string, value: SettingValue, initialLoad: boolean): void {\n\t\t['*', key].forEach((item) => {\n\t\t\tconst callbacks = this.callbacks.get(item);\n\t\t\tif (callbacks) {\n\t\t\t\tcallbacks.forEach((callback) => callback(key, value, initialLoad));\n\t\t\t}\n\t\t});\n\t\tthis.regexCallbacks.forEach((cbValue) => {\n\t\t\tif (!cbValue?.regex.test(key)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcbValue.callbacks.forEach((callback) => callback(key, value, initialLoad));\n\t\t});\n\t}\n\n\tonload(key: string | string[] | RegExp | RegExp[], callback: SettingCallback): void {\n\t\t// if key is '*'\n\t\t// \tfor key, value in Meteor.settings\n\t\t// \t\tcallback key, value, false\n\t\t// else if Meteor.settings?[_id]?\n\t\t// \tcallback key, Meteor.settings[_id], false\n\t\tconst keys: Array<string | RegExp> = Array.isArray(key) ? key : [key];\n\t\tkeys.forEach((k) => {\n\t\t\tif (_.isRegExp(k)) {\n\t\t\t\tif (!this.regexCallbacks.has(k.source)) {\n\t\t\t\t\tthis.regexCallbacks.set(k.source, {\n\t\t\t\t\t\tregex: k,\n\t\t\t\t\t\tcallbacks: [],\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.regexCallbacks.get(k.source)?.callbacks.push(callback);\n\t\t\t} else {\n\t\t\t\tif (!this.callbacks.has(k)) {\n\t\t\t\t\tthis.callbacks.set(k, []);\n\t\t\t\t}\n\t\t\t\tthis.callbacks.get(k)?.push(callback);\n\t\t\t}\n\t\t});\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/index.ts');\n}\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/index.ts');\n}\n","import { useMemo, lazy } from 'react';\n\nimport { addAction } from '../../../../client/views/room/lib/Toolbox';\nimport { usePermission } from '../../../../client/contexts/AuthorizationContext';\n\nconst template = lazy(() => import('../../../../client/views/room/contextualBar/PruneMessages'));\n\naddAction('clean-history', ({ room }) => {\n\tconst hasPermission = usePermission('clean-channel-history', room._id);\n\treturn useMemo(\n\t\t() =>\n\t\t\thasPermission\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['channel', 'group', 'team', 'direct_multiple', 'direct'],\n\t\t\t\t\t\tid: 'clean-history',\n\t\t\t\t\t\tfull: true,\n\t\t\t\t\t\ttitle: 'Prune_Messages',\n\t\t\t\t\t\ticon: 'eraser',\n\t\t\t\t\t\ttemplate,\n\t\t\t\t\t\torder: 250,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[hasPermission],\n\t);\n});\n","import './lib/tabBar';\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { userStatus } from './userStatus';\n\nuserStatus.packages.customUserStatus = {\n\tlist: [],\n};\n\nexport const deleteCustomUserStatus = function (customUserStatusData) {\n\tdelete userStatus.list[customUserStatusData._id];\n\n\tconst arrayIndex = userStatus.packages.customUserStatus.list.indexOf(customUserStatusData._id);\n\tif (arrayIndex !== -1) {\n\t\tuserStatus.packages.customUserStatusData.list.splice(arrayIndex, 1);\n\t}\n};\n\nexport const updateCustomUserStatus = function (customUserStatusData) {\n\tconst newUserStatus = {\n\t\tname: customUserStatusData.name,\n\t\tid: customUserStatusData._id,\n\t\tstatusType: customUserStatusData.statusType,\n\t\tlocalizeName: false,\n\t};\n\n\tconst arrayIndex = userStatus.packages.customUserStatus.list.indexOf(newUserStatus.id);\n\tif (arrayIndex === -1) {\n\t\tuserStatus.packages.customUserStatus.list.push(newUserStatus);\n\t} else {\n\t\tuserStatus.packages.customUserStatus.list[arrayIndex] = newUserStatus;\n\t}\n\n\tuserStatus.list[newUserStatus.id] = newUserStatus;\n};\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn;\n\t\t}\n\n\t\tMeteor.call('listCustomUserStatus', (error, result) => {\n\t\t\tif (!result) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (const customStatus of result) {\n\t\t\t\tconst newUserStatus = {\n\t\t\t\t\tname: customStatus.name,\n\t\t\t\t\tid: customStatus._id,\n\t\t\t\t\tstatusType: customStatus.statusType,\n\t\t\t\t\tlocalizeName: false,\n\t\t\t\t};\n\n\t\t\t\tuserStatus.packages.customUserStatus.list.push(newUserStatus);\n\t\t\t\tuserStatus.list[newUserStatus.id] = newUserStatus;\n\t\t\t}\n\t\t});\n\t});\n});\n","import { UserStatus } from '../../../../definition/UserStatus';\n\ntype Status = {\n\tname: string;\n\tlocalizeName: boolean;\n\tid: string;\n\tstatusType: UserStatus;\n};\n\ntype UserStatusTypes = {\n\tpackages: any;\n\tlist: {\n\t\t[status: string]: Status;\n\t};\n};\n\nexport const userStatus: UserStatusTypes = {\n\tpackages: {\n\t\tbase: {\n\t\t\trender(html: string): string {\n\t\t\t\treturn html;\n\t\t\t},\n\t\t},\n\t},\n\n\tlist: {\n\t\tonline: {\n\t\t\tname: UserStatus.ONLINE,\n\t\t\tlocalizeName: true,\n\t\t\tid: UserStatus.ONLINE,\n\t\t\tstatusType: UserStatus.ONLINE,\n\t\t},\n\t\taway: {\n\t\t\tname: UserStatus.AWAY,\n\t\t\tlocalizeName: true,\n\t\t\tid: UserStatus.AWAY,\n\t\t\tstatusType: UserStatus.AWAY,\n\t\t},\n\t\tbusy: {\n\t\t\tname: UserStatus.BUSY,\n\t\t\tlocalizeName: true,\n\t\t\tid: UserStatus.BUSY,\n\t\t\tstatusType: UserStatus.BUSY,\n\t\t},\n\t\toffline: {\n\t\t\tname: UserStatus.OFFLINE,\n\t\t\tlocalizeName: true,\n\t\t\tid: UserStatus.OFFLINE,\n\t\t\tstatusType: UserStatus.OFFLINE,\n\t\t},\n\t},\n} as const;\n","import { hasAtLeastOnePermission } from '../../../authorization';\nimport { registerAdminSidebarItem } from '../../../../client/views/admin';\n\nregisterAdminSidebarItem({\n\thref: 'custom-user-status',\n\ti18nLabel: 'Custom_User_Status',\n\ticon: 'user',\n\tpermissionGranted() {\n\t\treturn hasAtLeastOnePermission(['manage-user-status']);\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { deleteCustomUserStatus } from '../lib/customUserStatus';\nimport { Notifications } from '../../../notifications';\n\nMeteor.startup(() => Notifications.onLogged('deleteCustomUserStatus', (data) => deleteCustomUserStatus(data.userStatusData)));\n","import { Meteor } from 'meteor/meteor';\n\nimport { updateCustomUserStatus } from '../lib/customUserStatus';\nimport { Notifications } from '../../../notifications';\n\nMeteor.startup(() => Notifications.onLogged('updateCustomUserStatus', (data) => updateCustomUserStatus(data.userStatusData)));\n","import './admin/startup';\n\nimport './notifications/deleteCustomUserStatus';\nimport './notifications/updateCustomUserStatus';\n\nexport { userStatus, UserStatusProps } from './lib/userStatus';\nexport { deleteCustomUserStatus, updateCustomUserStatus } from './lib/customUserStatus';\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\nimport jQuery from 'jquery';\n\nimport { process2faReturn } from '../../../../client/lib/2fa/process2faReturn';\nimport { baseURI } from '../../../../client/lib/baseURI';\n\nexport const APIClient = {\n\tdelete(endpoint, params) {\n\t\treturn APIClient._jqueryCall('DELETE', endpoint, params);\n\t},\n\n\tget(endpoint, params) {\n\t\treturn APIClient._jqueryCall('GET', endpoint, params);\n\t},\n\n\tpost(endpoint, params, body) {\n\t\tif (!body) {\n\t\t\tbody = params;\n\t\t\tparams = {};\n\t\t}\n\n\t\treturn APIClient._jqueryCall('POST', endpoint, params, body);\n\t},\n\n\tput(endpoint, params, body) {\n\t\tif (!body) {\n\t\t\tbody = params;\n\t\t\tparams = {};\n\t\t}\n\n\t\treturn APIClient._jqueryCall('PUT', endpoint, params, body);\n\t},\n\n\tupload(endpoint, params, formData, xhrOptions) {\n\t\tif (!formData) {\n\t\t\tformData = params;\n\t\t\tparams = {};\n\t\t}\n\n\t\treturn APIClient._jqueryFormDataCall(endpoint, params, formData, xhrOptions);\n\t},\n\n\tgetCredentials() {\n\t\treturn {\n\t\t\t'X-User-Id': Meteor._localStorage.getItem(Accounts.USER_ID_KEY),\n\t\t\t'X-Auth-Token': Meteor._localStorage.getItem(Accounts.LOGIN_TOKEN_KEY),\n\t\t};\n\t},\n\n\t_generateQueryFromParams(params) {\n\t\tlet query = '';\n\t\tif (params && typeof params === 'object') {\n\t\t\tObject.keys(params).forEach((key) => {\n\t\t\t\tquery += query === '' ? '?' : '&';\n\n\t\t\t\tif (Array.isArray(params[key])) {\n\t\t\t\t\tconst encodedParams = params[key].map((value) => encodeURIComponent(value));\n\t\t\t\t\tconst joinedArray = encodedParams.join(`&${key}[]=`);\n\t\t\t\t\tquery += `${key}[]=${joinedArray}`;\n\t\t\t\t} else {\n\t\t\t\t\tquery += `${key}=${encodeURIComponent(params[key])}`;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn query;\n\t},\n\n\t_jqueryCall(method, endpoint, params, body, headers = {}, dataType) {\n\t\tconst query = APIClient._generateQueryFromParams(params);\n\n\t\treturn new Promise(function _rlRestApiGet(resolve, reject) {\n\t\t\tjQuery.ajax({\n\t\t\t\tmethod,\n\t\t\t\turl: `${baseURI}api/${endpoint}${query}`,\n\t\t\t\theaders: Object.assign(\n\t\t\t\t\t{\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t...APIClient.getCredentials(),\n\t\t\t\t\t},\n\t\t\t\t\theaders,\n\t\t\t\t),\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t\tdataType,\n\t\t\t\tsuccess: function _rlGetSuccess(result) {\n\t\t\t\t\tresolve(result);\n\t\t\t\t},\n\t\t\t\terror: function _rlGetFailure(xhr, status, errorThrown) {\n\t\t\t\t\tAPIClient.processTwoFactorError({\n\t\t\t\t\t\txhr,\n\t\t\t\t\t\tparams: [method, endpoint, params, body, headers],\n\t\t\t\t\t\tresolve,\n\t\t\t\t\t\treject,\n\t\t\t\t\t\toriginalCallback() {\n\t\t\t\t\t\t\tconst error = new Error(errorThrown);\n\t\t\t\t\t\t\terror.xhr = xhr;\n\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t},\n\n\t_jqueryFormDataCall(endpoint, params, formData, { progress = () => {}, error = () => {} } = {}) {\n\t\tconst ret = {};\n\n\t\tconst query = APIClient._generateQueryFromParams(params);\n\n\t\tif (!(formData instanceof FormData)) {\n\t\t\tthrow new Error('The formData parameter MUST be an instance of the FormData class.');\n\t\t}\n\n\t\tret.promise = new Promise(function _jqueryFormDataPromise(resolve, reject) {\n\t\t\tret.xhr = jQuery.ajax({\n\t\t\t\txhr() {\n\t\t\t\t\tconst xhr = new window.XMLHttpRequest();\n\n\t\t\t\t\txhr.upload.addEventListener(\n\t\t\t\t\t\t'progress',\n\t\t\t\t\t\tfunction (evt) {\n\t\t\t\t\t\t\tif (evt.lengthComputable) {\n\t\t\t\t\t\t\t\tconst percentComplete = evt.loaded / evt.total;\n\t\t\t\t\t\t\t\tprogress(percentComplete * 100);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t);\n\n\t\t\t\t\txhr.upload.addEventListener('error', error, false);\n\n\t\t\t\t\treturn xhr;\n\t\t\t\t},\n\t\t\t\turl: `${baseURI}api/${endpoint}${query}`,\n\t\t\t\theaders: APIClient.getCredentials(),\n\t\t\t\tdata: formData,\n\t\t\t\tprocessData: false,\n\t\t\t\tcontentType: false,\n\t\t\t\ttype: 'POST',\n\t\t\t\tsuccess: function _jqueryFormDataSuccess(result) {\n\t\t\t\t\tresolve(result);\n\t\t\t\t},\n\t\t\t\terror: function _jqueryFormDataError(xhr, status, errorThrown) {\n\t\t\t\t\tconst error = new Error(errorThrown);\n\t\t\t\t\terror.xhr = xhr;\n\t\t\t\t\treject(error);\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\n\t\treturn ret;\n\t},\n\n\tprocessTwoFactorError({ xhr, params, originalCallback, resolve, reject }) {\n\t\tif (!xhr.responseJSON || !xhr.responseJSON.errorType) {\n\t\t\treturn originalCallback();\n\t\t}\n\n\t\tprocess2faReturn({\n\t\t\terror: xhr.responseJSON,\n\t\t\toriginalCallback,\n\t\t\tonCode(code, method) {\n\t\t\t\tconst headers = params[params.length - 1];\n\t\t\t\theaders['x-2fa-code'] = code;\n\t\t\t\theaders['x-2fa-method'] = method;\n\t\t\t\tAPIClient._jqueryCall(...params)\n\t\t\t\t\t.then(resolve)\n\t\t\t\t\t.catch(reject);\n\t\t\t},\n\t\t});\n\t},\n\n\tv1: {\n\t\tdelete(endpoint, params) {\n\t\t\treturn APIClient.delete(`v1/${endpoint}`, params);\n\t\t},\n\n\t\tget(endpoint, params) {\n\t\t\treturn APIClient.get(`v1/${endpoint}`, params);\n\t\t},\n\n\t\tpost(endpoint, params, body) {\n\t\t\treturn APIClient.post(`v1/${endpoint}`, params, body);\n\t\t},\n\n\t\tupload(endpoint, params, formData) {\n\t\t\treturn APIClient.upload(`v1/${endpoint}`, params, formData);\n\t\t},\n\n\t\tput(endpoint, params, body) {\n\t\t\treturn APIClient.put(`v1/${endpoint}`, params, body);\n\t\t},\n\t},\n};\n","import { FlowRouter } from 'meteor/kadira:flow-router';\nimport _ from 'underscore';\n\nimport { RoomTypesCommon } from '../../lib/RoomTypesCommon';\nimport { hasAtLeastOnePermission } from '../../../authorization';\nimport { ChatRoom, ChatSubscription } from '../../../models';\n\nexport const roomTypes = new (class RocketChatRoomTypes extends RoomTypesCommon {\n\tcheckCondition(roomType) {\n\t\treturn roomType.condition == null || roomType.condition();\n\t}\n\n\tgetTypes() {\n\t\treturn _.sortBy(this.roomTypesOrder, 'order')\n\t\t\t.map((type) => this.roomTypes[type.identifier])\n\t\t\t.filter((type) => !type.condition || type.condition());\n\t}\n\n\tgetIcon(roomData) {\n\t\tif (!roomData || !roomData.t || !this.roomTypes[roomData.t]) {\n\t\t\treturn;\n\t\t}\n\t\treturn (this.roomTypes[roomData.t].getIcon && this.roomTypes[roomData.t].getIcon(roomData)) || this.roomTypes[roomData.t].icon;\n\t}\n\n\tgetRoomName(roomType, roomData) {\n\t\treturn this.roomTypes[roomType] && this.roomTypes[roomType].roomName && this.roomTypes[roomType].roomName(roomData);\n\t}\n\n\tgetSecondaryRoomName(roomType, roomData) {\n\t\treturn (\n\t\t\tthis.roomTypes[roomType] &&\n\t\t\ttypeof this.roomTypes[roomType].secondaryRoomName === 'function' &&\n\t\t\tthis.roomTypes[roomType].secondaryRoomName(roomData)\n\t\t);\n\t}\n\n\tgetIdentifiers(e) {\n\t\tconst except = [].concat(e);\n\t\tconst list = _.reject(this.roomTypesOrder, (t) => except.indexOf(t.identifier) !== -1);\n\t\treturn _.map(list, (t) => t.identifier);\n\t}\n\n\tgetUserStatus(roomType, rid) {\n\t\treturn (\n\t\t\tthis.roomTypes[roomType] &&\n\t\t\ttypeof this.roomTypes[roomType].getUserStatus === 'function' &&\n\t\t\tthis.roomTypes[roomType].getUserStatus(rid)\n\t\t);\n\t}\n\n\tgetRoomType(roomId) {\n\t\tconst fields = {\n\t\t\tt: 1,\n\t\t};\n\t\tconst room = ChatRoom.findOne(\n\t\t\t{\n\t\t\t\t_id: roomId,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfields,\n\t\t\t},\n\t\t);\n\t\treturn room && room.t;\n\t}\n\n\tisLivechatRoom(roomType) {\n\t\treturn (\n\t\t\tthis.roomTypes[roomType] && typeof this.roomTypes[roomType].isLivechatRoom === 'function' && this.roomTypes[roomType].isLivechatRoom()\n\t\t);\n\t}\n\n\tshowQuickActionButtons(roomType) {\n\t\treturn (\n\t\t\tthis.roomTypes[roomType] &&\n\t\t\ttypeof this.roomTypes[roomType].showQuickActionButtons === 'function' &&\n\t\t\tthis.roomTypes[roomType].showQuickActionButtons()\n\t\t);\n\t}\n\n\tgetUserStatusText(roomType, rid) {\n\t\treturn (\n\t\t\tthis.roomTypes[roomType] &&\n\t\t\ttypeof this.roomTypes[roomType].getUserStatusText === 'function' &&\n\t\t\tthis.roomTypes[roomType].getUserStatusText(rid)\n\t\t);\n\t}\n\n\tfindRoom(roomType, identifier, user) {\n\t\treturn this.roomTypes[roomType] && this.roomTypes[roomType].findRoom(identifier, user);\n\t}\n\n\tcanSendMessage(rid) {\n\t\treturn ChatSubscription.find({ rid }).count() > 0;\n\t}\n\n\treadOnly(rid, user) {\n\t\tconst fields = {\n\t\t\tro: 1,\n\t\t\tt: 1,\n\t\t};\n\t\tif (user) {\n\t\t\tfields.muted = 1;\n\t\t\tfields.unmuted = 1;\n\t\t}\n\t\tconst room = ChatRoom.findOne(\n\t\t\t{\n\t\t\t\t_id: rid,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfields,\n\t\t\t},\n\t\t);\n\n\t\tconst roomType = room && room.t;\n\t\tif (roomType && this.roomTypes[roomType] && this.roomTypes[roomType].readOnly) {\n\t\t\treturn this.roomTypes[roomType].readOnly(rid, user);\n\t\t}\n\n\t\tif (!user) {\n\t\t\treturn room && room.ro;\n\t\t}\n\n\t\tif (room) {\n\t\t\tif (Array.isArray(room.muted) && room.muted.indexOf(user.username) !== -1) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (room.ro === true) {\n\t\t\t\tif (Array.isArray(room.unmuted) && room.unmuted.indexOf(user.username) !== -1) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (hasAtLeastOnePermission('post-readonly', room._id)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tarchived(rid) {\n\t\tconst room = ChatRoom.findOne({ _id: rid }, { fields: { archived: 1 } });\n\t\treturn room && room.archived === true;\n\t}\n\n\tverifyCanSendMessage(rid) {\n\t\tconst room = ChatRoom.findOne({ _id: rid }, { fields: { t: 1 } });\n\n\t\tif (!room || !room.t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst roomType = room.t;\n\t\tif (this.roomTypes[roomType] && this.roomTypes[roomType].canSendMessage) {\n\t\t\treturn this.roomTypes[roomType].canSendMessage(rid);\n\t\t}\n\t\treturn this.canSendMessage(rid);\n\t}\n\n\tverifyShowJoinLink(rid) {\n\t\tconst room = ChatRoom.findOne({ _id: rid, t: { $exists: true, $ne: null } }, { fields: { t: 1 } });\n\t\tif (!room || !room.t) {\n\t\t\treturn;\n\t\t}\n\t\tconst roomType = room.t;\n\t\tif (this.roomTypes[roomType] && !this.roomTypes[roomType].showJoinLink) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this.roomTypes[roomType].showJoinLink(rid);\n\t}\n\n\tgetNotSubscribedTpl(rid) {\n\t\tconst room = ChatRoom.findOne({ _id: rid, t: { $exists: true, $ne: null } }, { fields: { t: 1 } });\n\t\tif (!room || !room.t) {\n\t\t\treturn;\n\t\t}\n\t\tconst roomType = room.t;\n\t\tif (this.roomTypes[roomType] && !this.roomTypes[roomType].notSubscribedTpl) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this.roomTypes[roomType].notSubscribedTpl;\n\t}\n\n\tgetReadOnlyTpl(rid) {\n\t\tconst room = ChatRoom.findOne({ _id: rid, t: { $exists: true, $ne: null } }, { fields: { t: 1 } });\n\t\tif (!room || !room.t) {\n\t\t\treturn;\n\t\t}\n\t\tconst roomType = room.t;\n\t\treturn this.roomTypes[roomType] && this.roomTypes[roomType].readOnlyTpl;\n\t}\n\n\topenRouteLink(roomType, subData, queryParams) {\n\t\tif (!this.roomTypes[roomType]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet routeData = {};\n\t\tif (this.roomTypes[roomType] && this.roomTypes[roomType].route && this.roomTypes[roomType].route.link) {\n\t\t\trouteData = this.roomTypes[roomType].route.link(subData);\n\t\t} else if (subData && subData.name) {\n\t\t\trouteData = {\n\t\t\t\tname: subData.name,\n\t\t\t};\n\t\t}\n\n\t\treturn FlowRouter.go(this.roomTypes[roomType].route.name, routeData, queryParams);\n\t}\n})();\n","export { t, isRtl } from '../lib/tapi18n';\nexport { getDefaultSubscriptionPref } from '../lib/getDefaultSubscriptionPref';\nexport { Info } from '../rocketchat.info';\nexport { getUserPreference } from '../lib/getUserPreference';\nexport { fileUploadMediaWhiteList, fileUploadIsValidContentType } from '../lib/fileUploadRestrictions';\nexport { roomTypes } from './lib/roomTypes';\nexport { RoomTypeRouteConfig, RoomTypeConfig, RoomSettingsEnum, RoomMemberActions, UiTextContext } from '../lib/RoomTypeConfig';\nexport { RoomTypesCommon } from '../lib/RoomTypesCommon';\nexport { getUserAvatarURL } from '../lib/getUserAvatarURL';\nexport { slashCommands } from '../lib/slashCommand';\nexport { getUserNotificationPreference } from '../lib/getUserNotificationPreference';\nexport { getAvatarColor } from '../lib/getAvatarColor';\nexport { getURL } from '../lib/getURL';\nexport { placeholders } from '../lib/placeholders';\nexport { templateVarHandler } from '../lib/templateVarHandler';\nexport { APIClient } from './lib/RestApiClient';\nexport { secondsToHHMMSS } from '../lib/timeConverter';\n","import { Meteor } from 'meteor/meteor';\nimport { Random } from 'meteor/random';\n\nlet Users;\nlet settings;\nif (Meteor.isServer) {\n\t({ settings } = require('../../settings/server'));\n\tUsers = require('../../models/server/models/Users').default;\n} else {\n\t({ settings } = require('../../settings/client'));\n}\n\nexport const RoomSettingsEnum = {\n\tTYPE: 'type',\n\tNAME: 'roomName',\n\tTOPIC: 'roomTopic',\n\tANNOUNCEMENT: 'roomAnnouncement',\n\tDESCRIPTION: 'roomDescription',\n\tREAD_ONLY: 'readOnly',\n\tREACT_WHEN_READ_ONLY: 'reactWhenReadOnly',\n\tARCHIVE_OR_UNARCHIVE: 'archiveOrUnarchive',\n\tJOIN_CODE: 'joinCode',\n\tBROADCAST: 'broadcast',\n\tSYSTEM_MESSAGES: 'systemMessages',\n\tE2E: 'encrypted',\n};\n\nexport const RoomMemberActions = {\n\tARCHIVE: 'archive',\n\tIGNORE: 'ignore',\n\tBLOCK: 'block',\n\tMUTE: 'mute',\n\tSET_AS_OWNER: 'setAsOwner',\n\tSET_AS_LEADER: 'setAsLeader',\n\tSET_AS_MODERATOR: 'setAsModerator',\n\tLEAVE: 'leave',\n\tREMOVE_USER: 'removeUser',\n\tJOIN: 'join',\n\tINVITE: 'invite',\n};\n\nexport const UiTextContext = {\n\tCLOSE_WARNING: 'closeWarning',\n\tHIDE_WARNING: 'hideWarning',\n\tLEAVE_WARNING: 'leaveWarning',\n\tNO_ROOMS_SUBSCRIBED: 'noRoomsSubscribed',\n};\n\nexport class RoomTypeRouteConfig {\n\tconstructor({ name, path }) {\n\t\tif (typeof name !== 'undefined' && (typeof name !== 'string' || name.length === 0)) {\n\t\t\tthrow new Error('The name must be a string.');\n\t\t}\n\n\t\tif (typeof path !== 'undefined' && (typeof path !== 'string' || path.length === 0)) {\n\t\t\tthrow new Error('The path must be a string.');\n\t\t}\n\n\t\tthis._name = name;\n\t\tthis._path = path;\n\t}\n\n\tget name() {\n\t\treturn this._name;\n\t}\n\n\tget path() {\n\t\treturn this._path;\n\t}\n}\n\nexport class RoomTypeConfig {\n\tconstructor({ identifier = Random.id(), order, icon, header, label, route }) {\n\t\tif (typeof identifier !== 'string' || identifier.length === 0) {\n\t\t\tthrow new Error('The identifier must be a string.');\n\t\t}\n\n\t\tif (typeof order !== 'number') {\n\t\t\tthrow new Error('The order must be a number.');\n\t\t}\n\n\t\tif (typeof icon !== 'undefined' && (typeof icon !== 'string' || icon.length === 0)) {\n\t\t\tthrow new Error('The icon must be a string.');\n\t\t}\n\n\t\tif (typeof header !== 'undefined' && (typeof header !== 'string' || header.length === 0)) {\n\t\t\tthrow new Error('The header must be a string.');\n\t\t}\n\n\t\tif (typeof label !== 'undefined' && (typeof label !== 'string' || label.length === 0)) {\n\t\t\tthrow new Error('The label must be a string.');\n\t\t}\n\n\t\tif (typeof route !== 'undefined' && !(route instanceof RoomTypeRouteConfig)) {\n\t\t\tthrow new Error('Room\\'s route is not a valid route configuration. Must be an instance of \"RoomTypeRouteConfig\".');\n\t\t}\n\n\t\tthis._identifier = identifier;\n\t\tthis._order = order;\n\t\tthis._icon = icon;\n\t\tthis._header = header;\n\t\tthis._label = label;\n\t\tthis._route = route;\n\t}\n\n\t/**\n\t * The room type's internal identifier.\n\t */\n\tget identifier() {\n\t\treturn this._identifier;\n\t}\n\n\t/**\n\t * The order of this room type for the display.\n\t */\n\tget order() {\n\t\treturn this._order;\n\t}\n\n\t/**\n\t * Sets the order of this room type for the display.\n\t *\n\t * @param {number} order the number value for the order\n\t */\n\tset order(order) {\n\t\tif (typeof order !== 'number') {\n\t\t\tthrow new Error('The order must be a number.');\n\t\t}\n\n\t\tthis._order = order;\n\t}\n\n\t/**\n\t * The icon class, css, to use as the visual aid.\n\t */\n\tget icon() {\n\t\treturn this._icon;\n\t}\n\n\t/**\n\t * The header name of this type.\n\t */\n\tget header() {\n\t\treturn this._header;\n\t}\n\n\t/**\n\t * The i18n label for this room type.\n\t */\n\tget label() {\n\t\treturn this._label;\n\t}\n\n\t/**\n\t * The route config for this room type.\n\t */\n\tget route() {\n\t\treturn this._route;\n\t}\n\n\tallowRoomSettingChange(/* room, setting */) {\n\t\treturn true;\n\t}\n\n\tallowMemberAction(/* room, action */) {\n\t\treturn false;\n\t}\n\n\t/**\n\t * Return a room's name\n\t *\n\t * @abstract\n\t * @return {string} Room's name according to it's type\n\t */\n\troomName(/* room */) {\n\t\treturn '';\n\t}\n\n\tcanBeCreated(hasPermission) {\n\t\tif (!hasPermission && typeof hasPermission !== 'function') {\n\t\t\tthrow new Error('You MUST provide the \"hasPermission\" to canBeCreated function');\n\t\t}\n\t\treturn Meteor.isServer ? hasPermission(Meteor.userId(), `create-${this._identifier}`) : hasPermission([`create-${this._identifier}`]);\n\t}\n\n\tcanBeDeleted(hasPermission, room) {\n\t\tif (!hasPermission && typeof hasPermission !== 'function') {\n\t\t\tthrow new Error('You MUST provide the \"hasPermission\" to canBeDeleted function');\n\t\t}\n\t\treturn Meteor.isServer ? hasPermission(Meteor.userId(), `delete-${room.t}`, room._id) : hasPermission(`delete-${room.t}`, room._id);\n\t}\n\n\tsupportMembersList(/* room */) {\n\t\treturn true;\n\t}\n\n\tisGroupChat() {\n\t\treturn false;\n\t}\n\n\tcanAddUser(/* userId, room */) {\n\t\treturn false;\n\t}\n\n\tuserDetailShowAll(/* room */) {\n\t\treturn true;\n\t}\n\n\tuserDetailShowAdmin(/* room */) {\n\t\treturn true;\n\t}\n\n\tpreventRenaming(/* room */) {\n\t\treturn false;\n\t}\n\n\tincludeInRoomSearch() {\n\t\treturn false;\n\t}\n\n\tenableMembersListProfile() {\n\t\treturn false;\n\t}\n\n\t/**\n\t * Returns a text which can be used in generic UIs.\n\t * @param context The role of the text in the UI-Element\n\t * @return {string} A text or a translation key - the consumers of this method will pass the\n\t * returned value to an internationalization library\n\t */\n\tgetUiText(/* context */) {\n\t\treturn '';\n\t}\n\n\t/**\n\t * Returns the full object of message sender\n\t * @param {string} senderId Sender's _id\n\t * @return {object} Sender's object from db\n\t */\n\tgetMsgSender(senderId) {\n\t\tif (Meteor.isServer && Users) {\n\t\t\treturn Users.findOneById(senderId);\n\t\t}\n\t\treturn {};\n\t}\n\n\t/**\n\t * Returns details to use on notifications\n\t *\n\t * @param {object} room\n\t * @param {object} user\n\t * @param {string} notificationMessage\n\t * @return {object} Notification details\n\t */\n\tgetNotificationDetails(room, user, notificationMessage) {\n\t\tif (!Meteor.isServer) {\n\t\t\treturn {};\n\t\t}\n\n\t\tconst title = `#${this.roomName(room)}`;\n\n\t\tconst text = `${settings.get('UI_Use_Real_Name') ? user.name : user.username}: ${notificationMessage}`;\n\n\t\treturn { title, text };\n\t}\n\n\t/**\n\t * Check if there is an user with the same id and loginToken\n\t * @param {object} allowData\n\t * @return {object} User's object from db\n\t */\n\tcanAccessUploadedFile(/* accessData */) {\n\t\treturn false;\n\t}\n\n\tgetReadReceiptsExtraData(/* message */) {\n\t\treturn {};\n\t}\n\n\tgetAvatarPath(/* roomData */) {\n\t\treturn '';\n\t}\n\n\topenCustomProfileTab() {\n\t\treturn false;\n\t}\n\n\tgetDiscussionType() {\n\t\treturn 'p';\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\n// import { Session } from 'meteor/session';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { RoomTypeConfig } from './RoomTypeConfig';\nimport { roomExit } from './roomExit';\n\nexport class RoomTypesCommon {\n\tconstructor() {\n\t\tthis.roomTypes = {};\n\t\tthis.roomTypesOrder = [];\n\t\tthis.mainOrder = 1;\n\t}\n\n\tgetTypesToShowOnDashboard() {\n\t\treturn Object.keys(this.roomTypes).filter((key) => this.roomTypes[key].includeInDashboard && this.roomTypes[key].includeInDashboard());\n\t}\n\n\t/**\n\t * Adds a room type to the application.\n\t *\n\t * @param {RoomTypeConfig} roomConfig\n\t * @returns {void}\n\t */\n\tadd(roomConfig) {\n\t\tif (!(roomConfig instanceof RoomTypeConfig)) {\n\t\t\tthrow new Error('Invalid Room Configuration object, it must extend \"RoomTypeConfig\"');\n\t\t}\n\n\t\tif (this.roomTypes[roomConfig.identifier]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!roomConfig.order) {\n\t\t\troomConfig.order = this.mainOrder + 10;\n\t\t\tthis.mainOrder += 10;\n\t\t}\n\n\t\tthis.roomTypesOrder.push({\n\t\t\tidentifier: roomConfig.identifier,\n\t\t\torder: roomConfig.order,\n\t\t});\n\n\t\tthis.roomTypes[roomConfig.identifier] = roomConfig;\n\n\t\tif (roomConfig.route && roomConfig.route.path && roomConfig.route.name && roomConfig.route.action) {\n\t\t\tconst routeConfig = {\n\t\t\t\tname: roomConfig.route.name,\n\t\t\t\taction: roomConfig.route.action,\n\t\t\t\t// triggersExit: [() => Session.set('openedRoom', '')],\n\t\t\t};\n\n\t\t\tif (Meteor.isClient) {\n\t\t\t\trouteConfig.triggersExit = [roomExit];\n\t\t\t}\n\n\t\t\treturn FlowRouter.route(roomConfig.route.path, routeConfig);\n\t\t}\n\t}\n\n\thasCustomLink(roomType) {\n\t\treturn this.roomTypes[roomType] && this.roomTypes[roomType].route && this.roomTypes[roomType].route.link != null;\n\t}\n\n\t/**\n\t * @param {string} roomType room type (e.g.: c (for channels), d (for direct channels))\n\t * @param {object} subData the user's subscription data\n\t */\n\tgetRouteLink(roomType, subData) {\n\t\tconst routeData = this.getRouteData(roomType, subData);\n\t\tif (!routeData) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn FlowRouter.path(this.roomTypes[roomType].route.name, routeData);\n\t}\n\n\t/**\n\t * @param {string} roomType room type (e.g.: c (for channels), d (for direct channels))\n\t * @param {RoomTypeConfig} roomConfig room's type configuration\n\t */\n\tgetConfig(roomType) {\n\t\treturn this.roomTypes[roomType];\n\t}\n\n\t/**\n\t * @param {string} roomType room type (e.g.: c (for channels), d (for direct channels))\n\t * @param {object} subData the user's subscription data\n\t */\n\tgetURL(roomType, subData) {\n\t\tconst routeData = this.getRouteData(roomType, subData);\n\t\tif (!routeData) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn FlowRouter.url(this.roomTypes[roomType].route.name, routeData);\n\t}\n\n\tgetRelativePath(roomType, subData) {\n\t\treturn this.getRouteLink(roomType, subData).replace(Meteor.absoluteUrl(), '');\n\t}\n\n\tgetRouteData(roomType, subData) {\n\t\tif (!this.roomTypes[roomType]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet routeData = {};\n\t\tif (this.roomTypes[roomType] && this.roomTypes[roomType].route && this.roomTypes[roomType].route.link) {\n\t\t\trouteData = this.roomTypes[roomType].route.link(subData);\n\t\t} else if (subData && subData.name) {\n\t\t\trouteData = {\n\t\t\t\trid: subData.rid || subData._id,\n\t\t\t\tname: subData.name,\n\t\t\t};\n\t\t}\n\n\t\treturn routeData;\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\nimport _ from 'underscore';\n\nlet settings;\nif (Meteor.isClient) {\n\tsettings = require('../../settings/client').settings;\n} else {\n\tsettings = require('../../settings/server').settings;\n}\n\nconst fileUploadMediaWhiteList = function (customWhiteList) {\n\tconst mediaTypeWhiteList = customWhiteList || settings.get('FileUpload_MediaTypeWhiteList');\n\n\tif (!mediaTypeWhiteList || mediaTypeWhiteList === '*') {\n\t\treturn;\n\t}\n\treturn _.map(mediaTypeWhiteList.split(','), function (item) {\n\t\treturn item.trim();\n\t});\n};\n\nconst fileUploadMediaBlackList = function () {\n\tconst blacklist = settings.get('FileUpload_MediaTypeBlackList');\n\tif (!blacklist) {\n\t\treturn;\n\t}\n\n\treturn _.map(blacklist.split(','), (item) => item.trim());\n};\n\nconst isTypeOnList = function (type, list) {\n\tif (_.contains(list, type)) {\n\t\treturn true;\n\t}\n\tconst wildCardGlob = '/*';\n\tconst wildcards = _.filter(list, function (item) {\n\t\treturn item.indexOf(wildCardGlob) > 0;\n\t});\n\tif (_.contains(wildcards, type.replace(/(\\/.*)$/, wildCardGlob))) {\n\t\treturn true;\n\t}\n};\n\nexport const fileUploadIsValidContentType = function (type, customWhiteList) {\n\tconst blackList = fileUploadMediaBlackList();\n\tconst whiteList = fileUploadMediaWhiteList(customWhiteList);\n\n\tif (!type && blackList) {\n\t\treturn false;\n\t}\n\n\tif (blackList && isTypeOnList(type, blackList)) {\n\t\treturn false;\n\t}\n\n\tif (!whiteList) {\n\t\treturn true;\n\t}\n\n\treturn isTypeOnList(type, whiteList);\n};\n","const colors = [\n\t'#F44336',\n\t'#E91E63',\n\t'#9C27B0',\n\t'#673AB7',\n\t'#3F51B5',\n\t'#2196F3',\n\t'#03A9F4',\n\t'#00BCD4',\n\t'#009688',\n\t'#4CAF50',\n\t'#8BC34A',\n\t'#CDDC39',\n\t'#FFC107',\n\t'#FF9800',\n\t'#FF5722',\n\t'#795548',\n\t'#9E9E9E',\n\t'#607D8B',\n];\n\nexport const getAvatarColor = (name) => colors[name.length % colors.length];\n","import { getURL } from './getURL';\n\nexport const getAvatarURL = ({ username, roomId, cache }) => {\n\tif (username) {\n\t\treturn getURL(`/avatar/${encodeURIComponent(username)}${cache ? `?etag=${cache}` : ''}`);\n\t}\n\tif (roomId) {\n\t\treturn getURL(`/avatar/room/${encodeURIComponent(roomId)}${cache ? `?etag=${cache}` : ''}`);\n\t}\n};\n","export const getDefaultSubscriptionPref = (userPref) => {\n\tconst subscription = {};\n\n\tconst { desktopNotifications, pushNotifications, emailNotificationMode, highlights } =\n\t\t(userPref.settings && userPref.settings.preferences) || {};\n\n\tif (Array.isArray(highlights) && highlights.length) {\n\t\tsubscription.userHighlights = highlights;\n\t}\n\n\tif (desktopNotifications && desktopNotifications !== 'default') {\n\t\tsubscription.desktopNotifications = desktopNotifications;\n\t\tsubscription.desktopPrefOrigin = 'user';\n\t}\n\n\tif (pushNotifications && pushNotifications !== 'default') {\n\t\tsubscription.mobilePushNotifications = pushNotifications;\n\t\tsubscription.mobilePrefOrigin = 'user';\n\t}\n\n\tif (emailNotificationMode && emailNotificationMode !== 'default') {\n\t\tsubscription.emailNotifications = emailNotificationMode;\n\t\tsubscription.emailPrefOrigin = 'user';\n\t}\n\n\treturn subscription;\n};\n","import { getAvatarURL } from './getAvatarURL';\nimport { settings } from '../../settings';\n\nexport const getRoomAvatarURL = function (roomId, etag) {\n\tconst externalSource = (settings.get('Accounts_RoomAvatarExternalProviderUrl') || '').trim().replace(/\\/$/, '');\n\tif (externalSource !== '') {\n\t\treturn externalSource.replace('{roomId}', roomId);\n\t}\n\tif (!roomId) {\n\t\treturn;\n\t}\n\treturn getAvatarURL({ roomId, cache: etag });\n};\n","import s from 'underscore.string';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\n\nimport { isURL } from './isURL';\nimport { settings } from '../../settings';\n\nfunction getCloudUrl(path, _site_url, cloudRoute, cloudParams = {}) {\n\tconst cloudBaseUrl = (settings.get('DeepLink_Url') || '').replace(/\\/+$/, '');\n\n\tconst siteUrl = s.rtrim(_site_url, '/');\n\n\t// Remove the protocol\n\tconst host = siteUrl.replace(/https?\\:\\/\\//i, '');\n\tpath = s.ltrim(path, '/');\n\n\tObject.assign(cloudParams, {\n\t\thost,\n\t\tpath,\n\t});\n\n\tif (siteUrl.includes('http://')) {\n\t\tcloudParams.secure = 'no';\n\t}\n\n\tconst params = Object.entries(cloudParams)\n\t\t.map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n\t\t.join('&');\n\n\treturn `${cloudBaseUrl}/${cloudRoute}?${params}`;\n}\n\nexport const _getURL = (path, { cdn, full, cloud, cloud_route, cloud_params, _cdn_prefix, _root_url_path_prefix, _site_url }) => {\n\tif (isURL(path)) {\n\t\treturn path;\n\t}\n\n\tconst [_path, _query] = path.split('?');\n\tpath = _path;\n\tconst query = _query ? `?${_query}` : '';\n\n\tconst siteUrl = s.rtrim(s.trim(_site_url || ''), '/');\n\tconst cloudRoute = s.trim(cloud_route || '');\n\tconst cdnPrefix = s.rtrim(s.trim(_cdn_prefix || ''), '/');\n\tconst pathPrefix = s.rtrim(s.trim(_root_url_path_prefix || ''), '/');\n\n\tconst finalPath = s.ltrim(s.trim(path), '/');\n\n\tconst url = s.rtrim(`${pathPrefix}/${finalPath}`, '/') + query;\n\n\tif (cloud) {\n\t\tconst cloudParams = cloud_params || {};\n\t\treturn getCloudUrl(url, siteUrl, cloudRoute, cloudParams);\n\t}\n\n\tif (cdn && cdnPrefix !== '') {\n\t\treturn cdnPrefix + url;\n\t}\n\n\tif (full) {\n\t\treturn siteUrl.replace(new RegExp(`${escapeRegExp(pathPrefix)}$`), '') + url;\n\t}\n\n\treturn url;\n};\n\nexport const getURL = (path, { cdn = true, full = false, cloud = false, cloud_route = '', cloud_params = {} } = {}) =>\n\t_getURL(path, {\n\t\tcdn,\n\t\tfull,\n\t\tcloud,\n\t\tcloud_route,\n\t\tcloud_params,\n\t\t_cdn_prefix: settings.get('CDN_PREFIX'),\n\t\t_root_url_path_prefix: __meteor_runtime_config__.ROOT_URL_PATH_PREFIX,\n\t\t_site_url: settings.get('Site_Url'),\n\t});\n","import { getAvatarURL } from './getAvatarURL';\nimport { settings } from '../../settings';\n\nexport const getUserAvatarURL = function (username, cache = '') {\n\tconst externalSource = (settings.get('Accounts_AvatarExternalProviderUrl') || '').trim().replace(/\\/$/, '');\n\tif (externalSource !== '') {\n\t\treturn externalSource.replace('{username}', username);\n\t}\n\tif (username == null) {\n\t\treturn;\n\t}\n\n\treturn getAvatarURL({ username, cache });\n};\n","import { settings } from '../../settings';\nimport { Users } from '../../models';\n\nexport const getUserNotificationPreference = (user, pref) => {\n\tif (typeof user === 'string') {\n\t\tuser = Users.findOneById(user);\n\t}\n\n\tlet preferenceKey;\n\tswitch (pref) {\n\t\tcase 'desktop':\n\t\t\tpreferenceKey = 'desktopNotifications';\n\t\t\tbreak;\n\t\tcase 'mobile':\n\t\t\tpreferenceKey = 'pushNotifications';\n\t\t\tbreak;\n\t\tcase 'email':\n\t\t\tpreferenceKey = 'emailNotificationMode';\n\t\t\tbreak;\n\t}\n\n\tif (\n\t\tuser?.settings?.preferences &&\n\t\ttypeof user.settings.preferences[preferenceKey] !== 'undefined' &&\n\t\tuser.settings.preferences[preferenceKey] !== 'default'\n\t) {\n\t\treturn {\n\t\t\tvalue: user.settings.preferences[preferenceKey],\n\t\t\torigin: 'user',\n\t\t};\n\t}\n\tconst serverValue = settings.get(`Accounts_Default_User_Preferences_${preferenceKey}`);\n\tif (serverValue) {\n\t\treturn {\n\t\t\tvalue: serverValue,\n\t\t\torigin: 'server',\n\t\t};\n\t}\n\n\treturn null;\n};\n","import { Users } from '../../models';\nimport { settings } from '../../settings';\n\nexport const getUserPreference = (user, key, defaultValue = undefined) => {\n\tlet preference;\n\tif (typeof user === typeof '') {\n\t\tuser = Users.findOne(user, { fields: { [`settings.preferences.${key}`]: 1 } });\n\t}\n\tif (user && user.settings && user.settings.preferences && user.settings.preferences.hasOwnProperty(key)) {\n\t\tpreference = user.settings.preferences[key];\n\t} else if (defaultValue === undefined) {\n\t\tpreference = settings.get(`Accounts_Default_User_Preferences_${key}`);\n\t}\n\n\treturn preference !== undefined ? preference : defaultValue;\n};\n","export const isURL = (str) => /^(https?:\\/\\/|data:)/.test(str);\nexport const isRelativeURL = (str) => /^[^\\/]+\\/[^\\/].*$|^\\/[^\\/].*$/gim.test(str);\n","import s from 'underscore.string';\n\nimport { settings } from '../../settings';\n\nexport const placeholders = {\n\treplace: (str, data) => {\n\t\tif (!str) {\n\t\t\treturn '';\n\t\t}\n\n\t\tstr = str.replace(/\\[Site_Name\\]/g, settings.get('Site_Name') || '');\n\t\tstr = str.replace(/\\[Site_URL\\]/g, settings.get('Site_Url') || '');\n\n\t\tif (data) {\n\t\t\tstr = str.replace(/\\[name\\]/g, data.name || '');\n\t\t\tstr = str.replace(/\\[fname\\]/g, s.strLeft(data.name, ' ') || '');\n\t\t\tstr = str.replace(/\\[lname\\]/g, s.strRightBack(data.name, ' ') || '');\n\t\t\tstr = str.replace(/\\[email\\]/g, data.email || '');\n\t\t\tstr = str.replace(/\\[password\\]/g, data.password || '');\n\t\t\tstr = str.replace(/\\[reason\\]/g, data.reason || '');\n\t\t\tstr = str.replace(/\\[User\\]/g, data.user || '');\n\t\t\tstr = str.replace(/\\[Room\\]/g, data.room || '');\n\n\t\t\tif (data.unsubscribe) {\n\t\t\t\tstr = str.replace(/\\[unsubscribe\\]/g, data.unsubscribe);\n\t\t\t}\n\t\t}\n\n\t\tstr = str.replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, '$1<br>$2');\n\n\t\treturn str;\n\t},\n};\n","import { Blaze } from 'meteor/blaze';\n// import { Session } from 'meteor/session';\nimport { Tracker } from 'meteor/tracker';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { callbacks } from '../../../lib/callbacks';\n\nconst testIfPathAreEquals = (oldPath = '', newPath = '') => oldPath.replace(/\"/g, '') === newPath;\nexport const roomExit = function () {\n\tconst oldRoute = FlowRouter.current();\n\tTracker.afterFlush(() => {\n\t\tconst context = FlowRouter.current();\n\n\t\tif (\n\t\t\toldRoute &&\n\t\t\ttestIfPathAreEquals(\n\t\t\t\toldRoute.params.name || oldRoute.params.rid || oldRoute.params.id,\n\t\t\t\tcontext.params.name || context.params.rid || context.params.id,\n\t\t\t)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\t// 7370 - Close flex-tab when opening a room on mobile UI\n\t\tif (window.matchMedia('(max-width: 500px)').matches) {\n\t\t\tconst flex = document.querySelector('.flex-tab');\n\t\t\tif (flex) {\n\t\t\t\tconst templateData = Blaze.getData(flex);\n\t\t\t\ttemplateData && templateData.tabBar && templateData.tabBar.close();\n\t\t\t}\n\t\t}\n\t\tcallbacks.run('roomExit');\n\n\t\t// Session.set('lastOpenedRoom', Session.get('openedRoom'));\n\t\t// Session.set('openedRoom', null);\n\t\t// RoomManager.openedRoom = null;\n\t});\n\tif (typeof window.currentTracker !== 'undefined') {\n\t\twindow.currentTracker.stop();\n\t}\n};\n","import { Meteor } from 'meteor/meteor';\n\nexport const slashCommands = {\n\tcommands: {},\n\tadd: function _addingSlashCommand(command, callback, options = {}, result, providesPreview = false, previewer, previewCallback) {\n\t\tslashCommands.commands[command] = {\n\t\t\tcommand,\n\t\t\tcallback,\n\t\t\tparams: options.params,\n\t\t\tdescription: options.description,\n\t\t\tpermission: options.permission,\n\t\t\tclientOnly: options.clientOnly || false,\n\t\t\tresult,\n\t\t\tprovidesPreview,\n\t\t\tpreviewer,\n\t\t\tpreviewCallback,\n\t\t};\n\t},\n\trun: function _runningSlashCommand(command, params, message, triggerId) {\n\t\tif (slashCommands.commands[command] && typeof slashCommands.commands[command].callback === 'function') {\n\t\t\tif (!message || !message.rid) {\n\t\t\t\tthrow new Meteor.Error('invalid-command-usage', 'Executing a command requires at least a message with a room id.');\n\t\t\t}\n\t\t\treturn slashCommands.commands[command].callback(command, params, message, triggerId);\n\t\t}\n\t},\n\tgetPreviews: function _executeSlashCommandPreview(command, params, message, preview, triggerId) {\n\t\tif (slashCommands.commands[command] && typeof slashCommands.commands[command].previewCallback === 'function') {\n\t\t\tif (!message || !message.rid) {\n\t\t\t\tthrow new Meteor.Error('invalid-command-usage', 'Executing a command requires at least a message with a room id.');\n\t\t\t}\n\n\t\t\t// { id, type, value }\n\t\t\tif (!preview.id || !preview.type || !preview.value) {\n\t\t\t\tthrow new Meteor.Error('error-invalid-preview', 'Preview Item must have an id, type, and value.');\n\t\t\t}\n\n\t\t\treturn slashCommands.commands[command].previewCallback(command, params, message, preview, triggerId);\n\t\t}\n\t},\n\texecutePreview: function _executeSlashCommandPreview(command, params, message, preview, triggerId) {\n\t\tif (slashCommands.commands[command] && typeof slashCommands.commands[command].previewCallback === 'function') {\n\t\t\tif (!message || !message.rid) {\n\t\t\t\tthrow new Meteor.Error('invalid-command-usage', 'Executing a command requires at least a message with a room id.');\n\t\t\t}\n\n\t\t\t// { id, type, value }\n\t\t\tif (!preview.id || !preview.type || !preview.value) {\n\t\t\t\tthrow new Meteor.Error('error-invalid-preview', 'Preview Item must have an id, type, and value.');\n\t\t\t}\n\n\t\t\treturn slashCommands.commands[command].previewCallback(command, params, message, preview, triggerId);\n\t\t}\n\t},\n};\n\nMeteor.methods({\n\tslashCommand(command) {\n\t\tif (!Meteor.userId()) {\n\t\t\tthrow new Meteor.Error('error-invalid-user', 'Invalid user', {\n\t\t\t\tmethod: 'slashCommand',\n\t\t\t});\n\t\t}\n\n\t\tif (!command || !command.cmd || !slashCommands.commands[command.cmd]) {\n\t\t\tthrow new Meteor.Error('error-invalid-command', 'Invalid Command Provided', {\n\t\t\t\tmethod: 'executeSlashCommandPreview',\n\t\t\t});\n\t\t}\n\t\treturn slashCommands.run(command.cmd, command.params, command.msg, command.triggerId);\n\t},\n});\n","import _ from 'underscore';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { Meteor } from 'meteor/meteor';\n\nexport const t = function (key, ...replaces) {\n\tif (_.isObject(replaces[0])) {\n\t\treturn TAPi18n.__(key, ...replaces);\n\t}\n\treturn TAPi18n.__(key, {\n\t\tpostProcess: 'sprintf',\n\t\tsprintf: replaces,\n\t});\n};\n\nexport const isRtl = (lang) => {\n\tconst language = lang || Meteor._localStorage.getItem('userLanguage') || 'en-US';\n\treturn ['ar', 'dv', 'fa', 'he', 'ku', 'ps', 'sd', 'ug', 'ur', 'yi'].includes(language.split('-').shift().toLowerCase());\n};\n","import { Meteor } from 'meteor/meteor';\n\nlet logger;\n\nif (Meteor.isServer) {\n\tconst { Logger } = require('../../../server/lib/logger/Logger');\n\tlogger = new Logger('TemplateVarHandler');\n}\n\nexport const templateVarHandler = function (variable, object) {\n\tconst templateRegex = /#{([\\w\\-]+)}/gi;\n\tlet match = templateRegex.exec(variable);\n\tlet tmpVariable = variable;\n\n\tif (match == null) {\n\t\tif (!object.hasOwnProperty(variable)) {\n\t\t\tlogger && logger.debug(`user does not have attribute: ${variable}`);\n\t\t\treturn;\n\t\t}\n\t\treturn object[variable];\n\t}\n\tlogger && logger.debug('template found. replacing values');\n\twhile (match != null) {\n\t\tconst tmplVar = match[0];\n\t\tconst tmplAttrName = match[1];\n\n\t\tif (!object.hasOwnProperty(tmplAttrName)) {\n\t\t\tlogger && logger.debug(`user does not have attribute: ${tmplAttrName}`);\n\t\t\treturn;\n\t\t}\n\n\t\tconst attrVal = object[tmplAttrName];\n\t\tlogger && logger.debug(`replacing template var: ${tmplVar} with value: ${attrVal}`);\n\t\ttmpVariable = tmpVariable.replace(tmplVar, attrVal);\n\t\tmatch = templateRegex.exec(variable);\n\t}\n\treturn tmpVariable;\n};\n","/**\n * return readable time format from seconds\n * @param  {Double} sec seconds\n * @return {String}     Readable string format\n */\nexport const secondsToHHMMSS = (sec) => {\n\tsec = parseFloat(sec);\n\n\tlet hours = Math.floor(sec / 3600);\n\tlet minutes = Math.floor((sec - hours * 3600) / 60);\n\tlet seconds = Math.round(sec - hours * 3600 - minutes * 60);\n\n\tif (hours < 10) {\n\t\thours = `0${hours}`;\n\t}\n\tif (minutes < 10) {\n\t\tminutes = `0${minutes}`;\n\t}\n\tif (seconds < 10) {\n\t\tseconds = `0${seconds}`;\n\t}\n\n\tif (hours > 0) {\n\t\treturn `${hours}:${minutes}:${seconds}`;\n\t}\n\tif (minutes > 0) {\n\t\treturn `00:${minutes}:${seconds}`;\n\t}\n\treturn `00:00:${seconds}`;\n};\n","export const ROOM_DATA_STREAM = 'room-data';\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/index.js');\n}\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/index.js');\n}\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { ServiceConfiguration } from 'meteor/service-configuration';\n\nimport { settings } from '../../settings';\nimport { CustomOAuth } from '../../custom-oauth';\nimport { callbacks } from '../../../lib/callbacks';\n\nconst config = {\n\tserverURL: '',\n\tauthorizePath: '/m/oauth2/auth/',\n\ttokenPath: '/m/oauth2/token/',\n\tidentityPath: '/m/oauth2/api/me/',\n\tscope: 'basic',\n\taddAutopublishFields: {\n\t\tforLoggedInUser: ['services.dolphin'],\n\t\tforOtherUsers: ['services.dolphin.name'],\n\t},\n\taccessTokenParam: 'access_token',\n};\n\nconst Dolphin = new CustomOAuth('dolphin', config);\n\nfunction DolphinOnCreateUser(options, user) {\n\tif (user && user.services && user.services.dolphin && user.services.dolphin.NickName) {\n\t\tuser.username = user.services.dolphin.NickName;\n\t}\n\treturn options;\n}\n\nif (Meteor.isServer) {\n\tMeteor.startup(() =>\n\t\tsettings.get('Accounts_OAuth_Dolphin_URL', (key, value) => {\n\t\t\tconfig.serverURL = value;\n\t\t\treturn Dolphin.configure(config);\n\t\t}),\n\t);\n\n\tif (settings.get('Accounts_OAuth_Dolphin_URL')) {\n\t\tconst data = {\n\t\t\tbuttonLabelText: settings.get('Accounts_OAuth_Dolphin_button_label_text'),\n\t\t\tbuttonColor: settings.get('Accounts_OAuth_Dolphin_button_color'),\n\t\t\tbuttonLabelColor: settings.get('Accounts_OAuth_Dolphin_button_label_color'),\n\t\t\tclientId: settings.get('Accounts_OAuth_Dolphin_id'),\n\t\t\tsecret: settings.get('Accounts_OAuth_Dolphin_secret'),\n\t\t\tserverURL: settings.get('Accounts_OAuth_Dolphin_URL'),\n\t\t\tloginStyle: settings.get('Accounts_OAuth_Dolphin_login_style'),\n\t\t};\n\n\t\tServiceConfiguration.configurations.upsert({ service: 'dolphin' }, { $set: data });\n\t}\n\n\tcallbacks.add('beforeCreateUser', DolphinOnCreateUser, callbacks.priority.HIGH, 'dolphin');\n} else {\n\tMeteor.startup(() =>\n\t\tTracker.autorun(function () {\n\t\t\tif (settings.get('Accounts_OAuth_Dolphin_URL')) {\n\t\t\t\tconfig.serverURL = settings.get('Accounts_OAuth_Dolphin_URL');\n\t\t\t\treturn Dolphin.configure(config);\n\t\t\t}\n\t\t}),\n\t);\n}\n","import '../lib/common';\nimport './login-button.css';\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../settings';\nimport { CustomOAuth } from '../../custom-oauth';\n\n// Drupal Server CallBack URL needs to be http(s)://{rocketchat.server}[:port]/_oauth/drupal\n// In RocketChat -> Administration the URL needs to be http(s)://{drupal.server}/\n\nconst config = {\n\tserverURL: '',\n\tidentityPath: '/oauth2/UserInfo',\n\tauthorizePath: '/oauth2/authorize',\n\ttokenPath: '/oauth2/token',\n\tscope: 'openid email profile offline_access',\n\ttokenSentVia: 'payload',\n\tusernameField: 'preferred_username',\n\tmergeUsers: true,\n\taddAutopublishFields: {\n\t\tforLoggedInUser: ['services.drupal'],\n\t\tforOtherUsers: ['services.drupal.name'],\n\t},\n\taccessTokenParam: 'access_token',\n};\n\nconst Drupal = new CustomOAuth('drupal', config);\n\nif (Meteor.isServer) {\n\tMeteor.startup(function () {\n\t\tsettings.get('API_Drupal_URL', function (key, value) {\n\t\t\tconfig.serverURL = value;\n\t\t\tDrupal.configure(config);\n\t\t});\n\t});\n} else {\n\tMeteor.startup(function () {\n\t\tTracker.autorun(function () {\n\t\t\tif (settings.get('API_Drupal_URL')) {\n\t\t\t\tconfig.serverURL = settings.get('API_Drupal_URL');\n\t\t\t\tDrupal.configure(config);\n\t\t\t}\n\t\t});\n\t});\n}\n","import '../lib/common';\nimport './login-button.css';\n","/*\n * This file is automatically generated from generateEmojiIndex.mjs\n * Last generated Tue Apr 09 2019 15:27:21 GMT-0300 (-03)\n *\n * Mapping category hashes into human readable and translated names\n */\n\nexport const emojiCategories = [\n\t{ key: 'people', i18n: 'Smileys_and_People' },\n\t{ key: 'nature', i18n: 'Animals_and_Nature' },\n\t{ key: 'food', i18n: 'Food_and_Drink' },\n\t{ key: 'activity', i18n: 'Activity' },\n\t{ key: 'travel', i18n: 'Travel_and_Places' },\n\t{ key: 'objects', i18n: 'Objects' },\n\t{ key: 'symbols', i18n: 'Symbols' },\n\t{ key: 'flags', i18n: 'Flags' },\n];\n\nexport const toneList = {\n\t'snowboarder': 1,\n\t'person_lifting_weights': 1,\n\t'woman_lifting_weights': 1,\n\t'man_lifting_weights': 1,\n\t'person_doing_cartwheel': 1,\n\t'woman_cartwheeling': 1,\n\t'man_cartwheeling': 1,\n\t'person_bouncing_ball': 1,\n\t'woman_bouncing_ball': 1,\n\t'man_bouncing_ball': 1,\n\t'person_playing_handball': 1,\n\t'woman_playing_handball': 1,\n\t'man_playing_handball': 1,\n\t'person_golfing': 1,\n\t'woman_golfing': 1,\n\t'man_golfing': 1,\n\t'horse_racing': 1,\n\t'person_in_lotus_position': 1,\n\t'woman_in_lotus_position': 1,\n\t'man_in_lotus_position': 1,\n\t'person_surfing': 1,\n\t'woman_surfing': 1,\n\t'man_surfing': 1,\n\t'person_swimming': 1,\n\t'woman_swimming': 1,\n\t'man_swimming': 1,\n\t'person_playing_water_polo': 1,\n\t'woman_playing_water_polo': 1,\n\t'man_playing_water_polo': 1,\n\t'person_rowing_boat': 1,\n\t'woman_rowing_boat': 1,\n\t'man_rowing_boat': 1,\n\t'person_climbing': 1,\n\t'woman_climbing': 1,\n\t'man_climbing': 1,\n\t'person_mountain_biking': 1,\n\t'woman_mountain_biking': 1,\n\t'man_mountain_biking': 1,\n\t'person_biking': 1,\n\t'woman_biking': 1,\n\t'man_biking': 1,\n\t'person_juggling': 1,\n\t'woman_juggling': 1,\n\t'man_juggling': 1,\n\t'bath': 1,\n\t'person_in_bed': 1,\n\t'palms_up_together': 1,\n\t'open_hands': 1,\n\t'raised_hands': 1,\n\t'clap': 1,\n\t'thumbsup': 1,\n\t'thumbsdown': 1,\n\t'punch': 1,\n\t'fist': 1,\n\t'left_facing_fist': 1,\n\t'right_facing_fist': 1,\n\t'fingers_crossed': 1,\n\t'v': 1,\n\t'love_you_gesture': 1,\n\t'metal': 1,\n\t'ok_hand': 1,\n\t'point_left': 1,\n\t'point_right': 1,\n\t'point_up_2': 1,\n\t'point_down': 1,\n\t'point_up': 1,\n\t'raised_hand': 1,\n\t'raised_back_of_hand': 1,\n\t'hand_splayed': 1,\n\t'vulcan': 1,\n\t'wave': 1,\n\t'call_me': 1,\n\t'muscle': 1,\n\t'leg': 1,\n\t'foot': 1,\n\t'middle_finger': 1,\n\t'writing_hand': 1,\n\t'pray': 1,\n\t'ear': 1,\n\t'nose': 1,\n\t'baby': 1,\n\t'girl': 1,\n\t'child': 1,\n\t'boy': 1,\n\t'woman': 1,\n\t'adult': 1,\n\t'man': 1,\n\t'blond_haired_person': 1,\n\t'blond-haired_woman': 1,\n\t'blond-haired_man': 1,\n\t'woman_red_haired': 1,\n\t'man_red_haired': 1,\n\t'woman_curly_haired': 1,\n\t'man_curly_haired': 1,\n\t'woman_white_haired': 1,\n\t'man_white_haired': 1,\n\t'woman_bald': 1,\n\t'man_bald': 1,\n\t'bearded_person': 1,\n\t'older_woman': 1,\n\t'older_adult': 1,\n\t'older_man': 1,\n\t'man_with_chinese_cap': 1,\n\t'person_wearing_turban': 1,\n\t'woman_wearing_turban': 1,\n\t'man_wearing_turban': 1,\n\t'woman_with_headscarf': 1,\n\t'police_officer': 1,\n\t'woman_police_officer': 1,\n\t'man_police_officer': 1,\n\t'construction_worker': 1,\n\t'woman_construction_worker': 1,\n\t'man_construction_worker': 1,\n\t'guard': 1,\n\t'woman_guard': 1,\n\t'man_guard': 1,\n\t'detective': 1,\n\t'woman_detective': 1,\n\t'man_detective': 1,\n\t'woman_health_worker': 1,\n\t'man_health_worker': 1,\n\t'woman_farmer': 1,\n\t'man_farmer': 1,\n\t'woman_cook': 1,\n\t'man_cook': 1,\n\t'woman_student': 1,\n\t'man_student': 1,\n\t'woman_singer': 1,\n\t'man_singer': 1,\n\t'woman_teacher': 1,\n\t'man_teacher': 1,\n\t'woman_factory_worker': 1,\n\t'man_factory_worker': 1,\n\t'woman_technologist': 1,\n\t'man_technologist': 1,\n\t'woman_office_worker': 1,\n\t'man_office_worker': 1,\n\t'woman_mechanic': 1,\n\t'man_mechanic': 1,\n\t'woman_scientist': 1,\n\t'man_scientist': 1,\n\t'woman_artist': 1,\n\t'man_artist': 1,\n\t'woman_firefighter': 1,\n\t'man_firefighter': 1,\n\t'woman_pilot': 1,\n\t'man_pilot': 1,\n\t'woman_astronaut': 1,\n\t'man_astronaut': 1,\n\t'woman_judge': 1,\n\t'man_judge': 1,\n\t'bride_with_veil': 1,\n\t'man_in_tuxedo': 1,\n\t'princess': 1,\n\t'prince': 1,\n\t'mrs_claus': 1,\n\t'santa': 1,\n\t'superhero': 1,\n\t'woman_superhero': 1,\n\t'man_superhero': 1,\n\t'supervillain': 1,\n\t'woman_supervillain': 1,\n\t'man_supervillain': 1,\n\t'mage': 1,\n\t'woman_mage': 1,\n\t'man_mage': 1,\n\t'elf': 1,\n\t'woman_elf': 1,\n\t'man_elf': 1,\n\t'vampire': 1,\n\t'woman_vampire': 1,\n\t'man_vampire': 1,\n\t'merperson': 1,\n\t'mermaid': 1,\n\t'merman': 1,\n\t'fairy': 1,\n\t'woman_fairy': 1,\n\t'man_fairy': 1,\n\t'angel': 1,\n\t'pregnant_woman': 1,\n\t'breast_feeding': 1,\n\t'person_bowing': 1,\n\t'woman_bowing': 1,\n\t'man_bowing': 1,\n\t'person_tipping_hand': 1,\n\t'woman_tipping_hand': 1,\n\t'man_tipping_hand': 1,\n\t'person_gesturing_no': 1,\n\t'woman_gesturing_no': 1,\n\t'man_gesturing_no': 1,\n\t'person_gesturing_ok': 1,\n\t'woman_gesturing_ok': 1,\n\t'man_gesturing_ok': 1,\n\t'person_raising_hand': 1,\n\t'woman_raising_hand': 1,\n\t'man_raising_hand': 1,\n\t'person_facepalming': 1,\n\t'woman_facepalming': 1,\n\t'man_facepalming': 1,\n\t'person_shrugging': 1,\n\t'woman_shrugging': 1,\n\t'man_shrugging': 1,\n\t'person_pouting': 1,\n\t'woman_pouting': 1,\n\t'man_pouting': 1,\n\t'person_frowning': 1,\n\t'woman_frowning': 1,\n\t'man_frowning': 1,\n\t'person_getting_haircut': 1,\n\t'woman_getting_haircut': 1,\n\t'man_getting_haircut': 1,\n\t'person_getting_massage': 1,\n\t'woman_getting_face_massage': 1,\n\t'man_getting_face_massage': 1,\n\t'person_in_steamy_room': 1,\n\t'woman_in_steamy_room': 1,\n\t'man_in_steamy_room': 1,\n\t'nail_care': 1,\n\t'selfie': 1,\n\t'dancer': 1,\n\t'man_dancing': 1,\n\t'levitate': 1,\n\t'person_walking': 1,\n\t'woman_walking': 1,\n\t'man_walking': 1,\n\t'person_running': 1,\n\t'woman_running': 1,\n\t'man_running': 1,\n};\nexport const emojisByCategory = {\n\tsymbols: [\n\t\t'heart',\n\t\t'orange_heart',\n\t\t'yellow_heart',\n\t\t'green_heart',\n\t\t'blue_heart',\n\t\t'purple_heart',\n\t\t'black_heart',\n\t\t'broken_heart',\n\t\t'heart_exclamation',\n\t\t'two_hearts',\n\t\t'revolving_hearts',\n\t\t'heartbeat',\n\t\t'heartpulse',\n\t\t'sparkling_heart',\n\t\t'cupid',\n\t\t'gift_heart',\n\t\t'heart_decoration',\n\t\t'peace',\n\t\t'cross',\n\t\t'star_and_crescent',\n\t\t'om_symbol',\n\t\t'wheel_of_dharma',\n\t\t'star_of_david',\n\t\t'six_pointed_star',\n\t\t'menorah',\n\t\t'yin_yang',\n\t\t'orthodox_cross',\n\t\t'place_of_worship',\n\t\t'ophiuchus',\n\t\t'aries',\n\t\t'taurus',\n\t\t'gemini',\n\t\t'cancer',\n\t\t'leo',\n\t\t'virgo',\n\t\t'libra',\n\t\t'scorpius',\n\t\t'sagittarius',\n\t\t'capricorn',\n\t\t'aquarius',\n\t\t'pisces',\n\t\t'id',\n\t\t'atom',\n\t\t'infinity',\n\t\t'accept',\n\t\t'radioactive',\n\t\t'biohazard',\n\t\t'mobile_phone_off',\n\t\t'vibration_mode',\n\t\t'u6709',\n\t\t'u7121',\n\t\t'u7533',\n\t\t'u55b6',\n\t\t'u6708',\n\t\t'eight_pointed_black_star',\n\t\t'vs',\n\t\t'white_flower',\n\t\t'ideograph_advantage',\n\t\t'secret',\n\t\t'congratulations',\n\t\t'u5408',\n\t\t'u6e80',\n\t\t'u5272',\n\t\t'u7981',\n\t\t'a',\n\t\t'b',\n\t\t'ab',\n\t\t'cl',\n\t\t'o2',\n\t\t'sos',\n\t\t'x',\n\t\t'o',\n\t\t'octagonal_sign',\n\t\t'no_entry',\n\t\t'name_badge',\n\t\t'no_entry_sign',\n\t\t'100',\n\t\t'anger',\n\t\t'hotsprings',\n\t\t'no_pedestrians',\n\t\t'do_not_litter',\n\t\t'no_bicycles',\n\t\t'non-potable_water',\n\t\t'underage',\n\t\t'no_mobile_phones',\n\t\t'no_smoking',\n\t\t'exclamation',\n\t\t'grey_exclamation',\n\t\t'question',\n\t\t'grey_question',\n\t\t'bangbang',\n\t\t'interrobang',\n\t\t'low_brightness',\n\t\t'high_brightness',\n\t\t'part_alternation_mark',\n\t\t'warning',\n\t\t'children_crossing',\n\t\t'trident',\n\t\t'fleur-de-lis',\n\t\t'beginner',\n\t\t'recycle',\n\t\t'white_check_mark',\n\t\t'u6307',\n\t\t'chart',\n\t\t'sparkle',\n\t\t'eight_spoked_asterisk',\n\t\t'negative_squared_cross_mark',\n\t\t'globe_with_meridians',\n\t\t'diamond_shape_with_a_dot_inside',\n\t\t'm',\n\t\t'cyclone',\n\t\t'zzz',\n\t\t'atm',\n\t\t'wc',\n\t\t'wheelchair',\n\t\t'parking',\n\t\t'u7a7a',\n\t\t'sa',\n\t\t'passport_control',\n\t\t'customs',\n\t\t'baggage_claim',\n\t\t'left_luggage',\n\t\t'mens',\n\t\t'womens',\n\t\t'baby_symbol',\n\t\t'restroom',\n\t\t'put_litter_in_its_place',\n\t\t'cinema',\n\t\t'signal_strength',\n\t\t'koko',\n\t\t'symbols',\n\t\t'information_source',\n\t\t'abc',\n\t\t'abcd',\n\t\t'capital_abcd',\n\t\t'ng',\n\t\t'ok',\n\t\t'up',\n\t\t'cool',\n\t\t'new',\n\t\t'free',\n\t\t'zero',\n\t\t'one',\n\t\t'two',\n\t\t'three',\n\t\t'four',\n\t\t'five',\n\t\t'six',\n\t\t'seven',\n\t\t'eight',\n\t\t'nine',\n\t\t'keycap_ten',\n\t\t'1234',\n\t\t'hash',\n\t\t'asterisk',\n\t\t'eject',\n\t\t'arrow_forward',\n\t\t'pause_button',\n\t\t'play_pause',\n\t\t'stop_button',\n\t\t'record_button',\n\t\t'track_next',\n\t\t'track_previous',\n\t\t'fast_forward',\n\t\t'rewind',\n\t\t'arrow_double_up',\n\t\t'arrow_double_down',\n\t\t'arrow_backward',\n\t\t'arrow_up_small',\n\t\t'arrow_down_small',\n\t\t'arrow_right',\n\t\t'arrow_left',\n\t\t'arrow_up',\n\t\t'arrow_down',\n\t\t'arrow_upper_right',\n\t\t'arrow_lower_right',\n\t\t'arrow_lower_left',\n\t\t'arrow_upper_left',\n\t\t'arrow_up_down',\n\t\t'left_right_arrow',\n\t\t'arrow_right_hook',\n\t\t'leftwards_arrow_with_hook',\n\t\t'arrow_heading_up',\n\t\t'arrow_heading_down',\n\t\t'twisted_rightwards_arrows',\n\t\t'repeat',\n\t\t'repeat_one',\n\t\t'arrows_counterclockwise',\n\t\t'arrows_clockwise',\n\t\t'musical_note',\n\t\t'notes',\n\t\t'heavy_plus_sign',\n\t\t'heavy_minus_sign',\n\t\t'heavy_division_sign',\n\t\t'heavy_multiplication_x',\n\t\t'heavy_dollar_sign',\n\t\t'currency_exchange',\n\t\t'tm',\n\t\t'copyright',\n\t\t'registered',\n\t\t'wavy_dash',\n\t\t'curly_loop',\n\t\t'loop',\n\t\t'end',\n\t\t'back',\n\t\t'on',\n\t\t'top',\n\t\t'soon',\n\t\t'heavy_check_mark',\n\t\t'ballot_box_with_check',\n\t\t'radio_button',\n\t\t'white_circle',\n\t\t'black_circle',\n\t\t'red_circle',\n\t\t'blue_circle',\n\t\t'small_red_triangle',\n\t\t'small_red_triangle_down',\n\t\t'small_orange_diamond',\n\t\t'small_blue_diamond',\n\t\t'large_orange_diamond',\n\t\t'large_blue_diamond',\n\t\t'white_square_button',\n\t\t'black_square_button',\n\t\t'black_small_square',\n\t\t'white_small_square',\n\t\t'black_medium_small_square',\n\t\t'white_medium_small_square',\n\t\t'black_medium_square',\n\t\t'white_medium_square',\n\t\t'black_large_square',\n\t\t'white_large_square',\n\t\t'speaker',\n\t\t'mute',\n\t\t'sound',\n\t\t'loud_sound',\n\t\t'bell',\n\t\t'no_bell',\n\t\t'mega',\n\t\t'loudspeaker',\n\t\t'speech_left',\n\t\t'eye_in_speech_bubble',\n\t\t'speech_balloon',\n\t\t'thought_balloon',\n\t\t'anger_right',\n\t\t'spades',\n\t\t'clubs',\n\t\t'hearts',\n\t\t'diamonds',\n\t\t'black_joker',\n\t\t'flower_playing_cards',\n\t\t'mahjong',\n\t\t'clock1',\n\t\t'clock2',\n\t\t'clock3',\n\t\t'clock4',\n\t\t'clock5',\n\t\t'clock6',\n\t\t'clock7',\n\t\t'clock8',\n\t\t'clock9',\n\t\t'clock10',\n\t\t'clock11',\n\t\t'clock12',\n\t\t'clock130',\n\t\t'clock230',\n\t\t'clock330',\n\t\t'clock430',\n\t\t'clock530',\n\t\t'clock630',\n\t\t'clock730',\n\t\t'clock830',\n\t\t'clock930',\n\t\t'clock1030',\n\t\t'clock1130',\n\t\t'clock1230',\n\t\t'digit_zero',\n\t\t'digit_one',\n\t\t'digit_two',\n\t\t'digit_three',\n\t\t'digit_four',\n\t\t'digit_five',\n\t\t'digit_six',\n\t\t'digit_seven',\n\t\t'digit_eight',\n\t\t'digit_nine',\n\t\t'pound_symbol',\n\t\t'asterisk_symbol',\n\t\t'female_sign',\n\t\t'male_sign',\n\t\t'medical_symbol',\n\t],\n\tactivity: [\n\t\t'soccer',\n\t\t'basketball',\n\t\t'football',\n\t\t'baseball',\n\t\t'softball',\n\t\t'tennis',\n\t\t'volleyball',\n\t\t'rugby_football',\n\t\t'8ball',\n\t\t'ping_pong',\n\t\t'badminton',\n\t\t'goal',\n\t\t'hockey',\n\t\t'field_hockey',\n\t\t'cricket_game',\n\t\t'lacrosse',\n\t\t'golf',\n\t\t'flying_disc',\n\t\t'bow_and_arrow',\n\t\t'fishing_pole_and_fish',\n\t\t'boxing_glove',\n\t\t'martial_arts_uniform',\n\t\t'running_shirt_with_sash',\n\t\t'skateboard',\n\t\t'ice_skate',\n\t\t'curling_stone',\n\t\t'sled',\n\t\t'ski',\n\t\t'skier',\n\t\t'snowboarder',\n\t\t'person_lifting_weights',\n\t\t'woman_lifting_weights',\n\t\t'man_lifting_weights',\n\t\t'people_wrestling',\n\t\t'women_wrestling',\n\t\t'men_wrestling',\n\t\t'person_doing_cartwheel',\n\t\t'woman_cartwheeling',\n\t\t'man_cartwheeling',\n\t\t'person_bouncing_ball',\n\t\t'woman_bouncing_ball',\n\t\t'man_bouncing_ball',\n\t\t'person_fencing',\n\t\t'person_playing_handball',\n\t\t'woman_playing_handball',\n\t\t'man_playing_handball',\n\t\t'person_golfing',\n\t\t'woman_golfing',\n\t\t'man_golfing',\n\t\t'horse_racing',\n\t\t'person_in_lotus_position',\n\t\t'woman_in_lotus_position',\n\t\t'man_in_lotus_position',\n\t\t'person_surfing',\n\t\t'woman_surfing',\n\t\t'man_surfing',\n\t\t'person_swimming',\n\t\t'woman_swimming',\n\t\t'man_swimming',\n\t\t'person_playing_water_polo',\n\t\t'woman_playing_water_polo',\n\t\t'man_playing_water_polo',\n\t\t'person_rowing_boat',\n\t\t'woman_rowing_boat',\n\t\t'man_rowing_boat',\n\t\t'person_climbing',\n\t\t'woman_climbing',\n\t\t'man_climbing',\n\t\t'person_mountain_biking',\n\t\t'woman_mountain_biking',\n\t\t'man_mountain_biking',\n\t\t'person_biking',\n\t\t'woman_biking',\n\t\t'man_biking',\n\t\t'trophy',\n\t\t'first_place',\n\t\t'second_place',\n\t\t'third_place',\n\t\t'medal',\n\t\t'military_medal',\n\t\t'rosette',\n\t\t'reminder_ribbon',\n\t\t'ticket',\n\t\t'tickets',\n\t\t'circus_tent',\n\t\t'person_juggling',\n\t\t'woman_juggling',\n\t\t'man_juggling',\n\t\t'performing_arts',\n\t\t'art',\n\t\t'clapper',\n\t\t'microphone',\n\t\t'headphones',\n\t\t'musical_score',\n\t\t'musical_keyboard',\n\t\t'drum',\n\t\t'saxophone',\n\t\t'trumpet',\n\t\t'guitar',\n\t\t'violin',\n\t\t'game_die',\n\t\t'dart',\n\t\t'bowling',\n\t\t'video_game',\n\t\t'slot_machine',\n\t],\n\tobjects: [\n\t\t'watch',\n\t\t'iphone',\n\t\t'calling',\n\t\t'computer',\n\t\t'keyboard',\n\t\t'desktop',\n\t\t'printer',\n\t\t'mouse_three_button',\n\t\t'trackball',\n\t\t'joystick',\n\t\t'chess_pawn',\n\t\t'jigsaw',\n\t\t'compression',\n\t\t'minidisc',\n\t\t'floppy_disk',\n\t\t'cd',\n\t\t'dvd',\n\t\t'vhs',\n\t\t'camera',\n\t\t'camera_with_flash',\n\t\t'video_camera',\n\t\t'movie_camera',\n\t\t'projector',\n\t\t'film_frames',\n\t\t'telephone_receiver',\n\t\t'telephone',\n\t\t'pager',\n\t\t'fax',\n\t\t'tv',\n\t\t'radio',\n\t\t'microphone2',\n\t\t'level_slider',\n\t\t'control_knobs',\n\t\t'stopwatch',\n\t\t'timer',\n\t\t'alarm_clock',\n\t\t'clock',\n\t\t'hourglass',\n\t\t'hourglass_flowing_sand',\n\t\t'satellite',\n\t\t'compass',\n\t\t'battery',\n\t\t'electric_plug',\n\t\t'magnet',\n\t\t'bulb',\n\t\t'flashlight',\n\t\t'candle',\n\t\t'fire_extinguisher',\n\t\t'wastebasket',\n\t\t'oil',\n\t\t'money_with_wings',\n\t\t'dollar',\n\t\t'yen',\n\t\t'euro',\n\t\t'pound',\n\t\t'moneybag',\n\t\t'credit_card',\n\t\t'gem',\n\t\t'nazar_amulet',\n\t\t'bricks',\n\t\t'scales',\n\t\t'toolbox',\n\t\t'wrench',\n\t\t'hammer',\n\t\t'hammer_pick',\n\t\t'tools',\n\t\t'pick',\n\t\t'nut_and_bolt',\n\t\t'gear',\n\t\t'chains',\n\t\t'gun',\n\t\t'bomb',\n\t\t'knife',\n\t\t'dagger',\n\t\t'crossed_swords',\n\t\t'shield',\n\t\t'smoking',\n\t\t'coffin',\n\t\t'urn',\n\t\t'amphora',\n\t\t'crystal_ball',\n\t\t'prayer_beads',\n\t\t'barber',\n\t\t'alembic',\n\t\t'test_tube',\n\t\t'petri_dish',\n\t\t'dna',\n\t\t'abacus',\n\t\t'telescope',\n\t\t'microscope',\n\t\t'hole',\n\t\t'pill',\n\t\t'syringe',\n\t\t'thermometer',\n\t\t'toilet',\n\t\t'potable_water',\n\t\t'shower',\n\t\t'bathtub',\n\t\t'bath',\n\t\t'broom',\n\t\t'basket',\n\t\t'roll_of_paper',\n\t\t'soap',\n\t\t'sponge',\n\t\t'squeeze_bottle',\n\t\t'thread',\n\t\t'yarn',\n\t\t'bellhop',\n\t\t'key',\n\t\t'key2',\n\t\t'door',\n\t\t'couch',\n\t\t'bed',\n\t\t'sleeping_accommodation',\n\t\t'teddy_bear',\n\t\t'frame_photo',\n\t\t'shopping_bags',\n\t\t'shopping_cart',\n\t\t'gift',\n\t\t'balloon',\n\t\t'flags',\n\t\t'ribbon',\n\t\t'confetti_ball',\n\t\t'tada',\n\t\t'dolls',\n\t\t'izakaya_lantern',\n\t\t'wind_chime',\n\t\t'red_envelope',\n\t\t'envelope',\n\t\t'envelope_with_arrow',\n\t\t'incoming_envelope',\n\t\t'e-mail',\n\t\t'love_letter',\n\t\t'inbox_tray',\n\t\t'outbox_tray',\n\t\t'package',\n\t\t'label',\n\t\t'mailbox_closed',\n\t\t'mailbox',\n\t\t'mailbox_with_mail',\n\t\t'mailbox_with_no_mail',\n\t\t'postbox',\n\t\t'postal_horn',\n\t\t'scroll',\n\t\t'page_with_curl',\n\t\t'page_facing_up',\n\t\t'receipt',\n\t\t'bookmark_tabs',\n\t\t'bar_chart',\n\t\t'chart_with_upwards_trend',\n\t\t'chart_with_downwards_trend',\n\t\t'notepad_spiral',\n\t\t'calendar_spiral',\n\t\t'calendar',\n\t\t'date',\n\t\t'card_index',\n\t\t'card_box',\n\t\t'ballot_box',\n\t\t'file_cabinet',\n\t\t'clipboard',\n\t\t'file_folder',\n\t\t'open_file_folder',\n\t\t'dividers',\n\t\t'newspaper2',\n\t\t'newspaper',\n\t\t'notebook',\n\t\t'notebook_with_decorative_cover',\n\t\t'ledger',\n\t\t'closed_book',\n\t\t'green_book',\n\t\t'blue_book',\n\t\t'orange_book',\n\t\t'books',\n\t\t'book',\n\t\t'bookmark',\n\t\t'link',\n\t\t'paperclip',\n\t\t'paperclips',\n\t\t'triangular_ruler',\n\t\t'straight_ruler',\n\t\t'safety_pin',\n\t\t'pushpin',\n\t\t'round_pushpin',\n\t\t'scissors',\n\t\t'pen_ballpoint',\n\t\t'pen_fountain',\n\t\t'black_nib',\n\t\t'paintbrush',\n\t\t'crayon',\n\t\t'pencil',\n\t\t'pencil2',\n\t\t'mag',\n\t\t'mag_right',\n\t\t'lock_with_ink_pen',\n\t\t'closed_lock_with_key',\n\t\t'lock',\n\t\t'unlock',\n\t],\n\tnature: [\n\t\t'dog',\n\t\t'cat',\n\t\t'mouse',\n\t\t'hamster',\n\t\t'rabbit',\n\t\t'fox',\n\t\t'raccoon',\n\t\t'bear',\n\t\t'panda_face',\n\t\t'kangaroo',\n\t\t'badger',\n\t\t'koala',\n\t\t'tiger',\n\t\t'lion_face',\n\t\t'cow',\n\t\t'pig',\n\t\t'pig_nose',\n\t\t'frog',\n\t\t'monkey_face',\n\t\t'see_no_evil',\n\t\t'hear_no_evil',\n\t\t'speak_no_evil',\n\t\t'monkey',\n\t\t'chicken',\n\t\t'penguin',\n\t\t'bird',\n\t\t'baby_chick',\n\t\t'hatching_chick',\n\t\t'hatched_chick',\n\t\t'duck',\n\t\t'swan',\n\t\t'eagle',\n\t\t'owl',\n\t\t'parrot',\n\t\t'peacock',\n\t\t'bat',\n\t\t'wolf',\n\t\t'boar',\n\t\t'horse',\n\t\t'unicorn',\n\t\t'bee',\n\t\t'bug',\n\t\t'butterfly',\n\t\t'snail',\n\t\t'shell',\n\t\t'beetle',\n\t\t'ant',\n\t\t'cricket',\n\t\t'spider',\n\t\t'spider_web',\n\t\t'scorpion',\n\t\t'mosquito',\n\t\t'microbe',\n\t\t'turtle',\n\t\t'snake',\n\t\t'lizard',\n\t\t't_rex',\n\t\t'sauropod',\n\t\t'octopus',\n\t\t'squid',\n\t\t'shrimp',\n\t\t'crab',\n\t\t'lobster',\n\t\t'blowfish',\n\t\t'tropical_fish',\n\t\t'fish',\n\t\t'dolphin',\n\t\t'whale',\n\t\t'whale2',\n\t\t'shark',\n\t\t'crocodile',\n\t\t'tiger2',\n\t\t'leopard',\n\t\t'zebra',\n\t\t'gorilla',\n\t\t'elephant',\n\t\t'rhino',\n\t\t'hippopotamus',\n\t\t'dromedary_camel',\n\t\t'camel',\n\t\t'giraffe',\n\t\t'llama',\n\t\t'water_buffalo',\n\t\t'ox',\n\t\t'cow2',\n\t\t'racehorse',\n\t\t'pig2',\n\t\t'ram',\n\t\t'sheep',\n\t\t'goat',\n\t\t'deer',\n\t\t'dog2',\n\t\t'poodle',\n\t\t'cat2',\n\t\t'rooster',\n\t\t'turkey',\n\t\t'dove',\n\t\t'rabbit2',\n\t\t'mouse2',\n\t\t'rat',\n\t\t'chipmunk',\n\t\t'hedgehog',\n\t\t'feet',\n\t\t'dragon',\n\t\t'dragon_face',\n\t\t'cactus',\n\t\t'christmas_tree',\n\t\t'evergreen_tree',\n\t\t'deciduous_tree',\n\t\t'palm_tree',\n\t\t'seedling',\n\t\t'herb',\n\t\t'shamrock',\n\t\t'four_leaf_clover',\n\t\t'bamboo',\n\t\t'tanabata_tree',\n\t\t'leaves',\n\t\t'fallen_leaf',\n\t\t'maple_leaf',\n\t\t'mushroom',\n\t\t'ear_of_rice',\n\t\t'bouquet',\n\t\t'tulip',\n\t\t'rose',\n\t\t'wilted_rose',\n\t\t'hibiscus',\n\t\t'cherry_blossom',\n\t\t'blossom',\n\t\t'sunflower',\n\t\t'sun_with_face',\n\t\t'full_moon_with_face',\n\t\t'first_quarter_moon_with_face',\n\t\t'last_quarter_moon_with_face',\n\t\t'new_moon_with_face',\n\t\t'full_moon',\n\t\t'waning_gibbous_moon',\n\t\t'last_quarter_moon',\n\t\t'waning_crescent_moon',\n\t\t'new_moon',\n\t\t'waxing_crescent_moon',\n\t\t'first_quarter_moon',\n\t\t'waxing_gibbous_moon',\n\t\t'crescent_moon',\n\t\t'earth_americas',\n\t\t'earth_africa',\n\t\t'earth_asia',\n\t\t'dizzy',\n\t\t'star',\n\t\t'star2',\n\t\t'sparkles',\n\t\t'zap',\n\t\t'comet',\n\t\t'boom',\n\t\t'fire',\n\t\t'cloud_tornado',\n\t\t'rainbow',\n\t\t'sunny',\n\t\t'white_sun_small_cloud',\n\t\t'partly_sunny',\n\t\t'white_sun_cloud',\n\t\t'cloud',\n\t\t'white_sun_rain_cloud',\n\t\t'cloud_rain',\n\t\t'thunder_cloud_rain',\n\t\t'cloud_lightning',\n\t\t'cloud_snow',\n\t\t'snowflake',\n\t\t'snowman2',\n\t\t'snowman',\n\t\t'wind_blowing_face',\n\t\t'dash',\n\t\t'droplet',\n\t\t'sweat_drops',\n\t\t'umbrella',\n\t\t'umbrella2',\n\t\t'ocean',\n\t\t'fog',\n\t],\n\tfood: [\n\t\t'green_apple',\n\t\t'apple',\n\t\t'pear',\n\t\t'tangerine',\n\t\t'lemon',\n\t\t'banana',\n\t\t'watermelon',\n\t\t'grapes',\n\t\t'strawberry',\n\t\t'melon',\n\t\t'cherries',\n\t\t'peach',\n\t\t'mango',\n\t\t'pineapple',\n\t\t'coconut',\n\t\t'kiwi',\n\t\t'tomato',\n\t\t'eggplant',\n\t\t'avocado',\n\t\t'broccoli',\n\t\t'leafy_green',\n\t\t'cucumber',\n\t\t'hot_pepper',\n\t\t'corn',\n\t\t'carrot',\n\t\t'potato',\n\t\t'sweet_potato',\n\t\t'croissant',\n\t\t'bread',\n\t\t'french_bread',\n\t\t'pretzel',\n\t\t'bagel',\n\t\t'cheese',\n\t\t'egg',\n\t\t'cooking',\n\t\t'pancakes',\n\t\t'bacon',\n\t\t'cut_of_meat',\n\t\t'poultry_leg',\n\t\t'meat_on_bone',\n\t\t'hotdog',\n\t\t'hamburger',\n\t\t'fries',\n\t\t'pizza',\n\t\t'sandwich',\n\t\t'stuffed_flatbread',\n\t\t'taco',\n\t\t'burrito',\n\t\t'salad',\n\t\t'shallow_pan_of_food',\n\t\t'canned_food',\n\t\t'spaghetti',\n\t\t'ramen',\n\t\t'stew',\n\t\t'curry',\n\t\t'sushi',\n\t\t'bento',\n\t\t'fried_shrimp',\n\t\t'rice_ball',\n\t\t'rice',\n\t\t'rice_cracker',\n\t\t'fish_cake',\n\t\t'fortune_cookie',\n\t\t'oden',\n\t\t'dango',\n\t\t'shaved_ice',\n\t\t'ice_cream',\n\t\t'icecream',\n\t\t'pie',\n\t\t'cake',\n\t\t'birthday',\n\t\t'moon_cake',\n\t\t'cupcake',\n\t\t'custard',\n\t\t'lollipop',\n\t\t'candy',\n\t\t'chocolate_bar',\n\t\t'popcorn',\n\t\t'salt',\n\t\t'doughnut',\n\t\t'dumpling',\n\t\t'cookie',\n\t\t'chestnut',\n\t\t'peanuts',\n\t\t'honey_pot',\n\t\t'milk',\n\t\t'baby_bottle',\n\t\t'coffee',\n\t\t'tea',\n\t\t'cup_with_straw',\n\t\t'sake',\n\t\t'beer',\n\t\t'beers',\n\t\t'champagne_glass',\n\t\t'wine_glass',\n\t\t'tumbler_glass',\n\t\t'cocktail',\n\t\t'tropical_drink',\n\t\t'champagne',\n\t\t'spoon',\n\t\t'fork_and_knife',\n\t\t'fork_knife_plate',\n\t\t'bowl_with_spoon',\n\t\t'takeout_box',\n\t\t'chopsticks',\n\t],\n\tpeople: [\n\t\t'grinning',\n\t\t'smiley',\n\t\t'smile',\n\t\t'grin',\n\t\t'laughing',\n\t\t'sweat_smile',\n\t\t'joy',\n\t\t'rofl',\n\t\t'relaxed',\n\t\t'blush',\n\t\t'innocent',\n\t\t'slight_smile',\n\t\t'upside_down',\n\t\t'wink',\n\t\t'relieved',\n\t\t'heart_eyes',\n\t\t'kissing_heart',\n\t\t'smiling_face_with_3_hearts',\n\t\t'kissing',\n\t\t'kissing_smiling_eyes',\n\t\t'kissing_closed_eyes',\n\t\t'yum',\n\t\t'stuck_out_tongue',\n\t\t'stuck_out_tongue_closed_eyes',\n\t\t'stuck_out_tongue_winking_eye',\n\t\t'zany_face',\n\t\t'face_with_raised_eyebrow',\n\t\t'face_with_monocle',\n\t\t'nerd',\n\t\t'sunglasses',\n\t\t'star_struck',\n\t\t'partying_face',\n\t\t'smirk',\n\t\t'unamused',\n\t\t'disappointed',\n\t\t'pensive',\n\t\t'worried',\n\t\t'confused',\n\t\t'slight_frown',\n\t\t'frowning2',\n\t\t'persevere',\n\t\t'confounded',\n\t\t'tired_face',\n\t\t'weary',\n\t\t'cry',\n\t\t'sob',\n\t\t'triumph',\n\t\t'angry',\n\t\t'rage',\n\t\t'face_with_symbols_over_mouth',\n\t\t'exploding_head',\n\t\t'flushed',\n\t\t'scream',\n\t\t'fearful',\n\t\t'cold_sweat',\n\t\t'hot_face',\n\t\t'cold_face',\n\t\t'pleading_face',\n\t\t'disappointed_relieved',\n\t\t'sweat',\n\t\t'hugging',\n\t\t'thinking',\n\t\t'face_with_hand_over_mouth',\n\t\t'shushing_face',\n\t\t'lying_face',\n\t\t'no_mouth',\n\t\t'neutral_face',\n\t\t'expressionless',\n\t\t'grimacing',\n\t\t'rolling_eyes',\n\t\t'hushed',\n\t\t'frowning',\n\t\t'anguished',\n\t\t'open_mouth',\n\t\t'astonished',\n\t\t'sleeping',\n\t\t'drooling_face',\n\t\t'sleepy',\n\t\t'dizzy_face',\n\t\t'zipper_mouth',\n\t\t'woozy_face',\n\t\t'nauseated_face',\n\t\t'face_vomiting',\n\t\t'sneezing_face',\n\t\t'mask',\n\t\t'thermometer_face',\n\t\t'head_bandage',\n\t\t'money_mouth',\n\t\t'cowboy',\n\t\t'smiling_imp',\n\t\t'imp',\n\t\t'japanese_ogre',\n\t\t'japanese_goblin',\n\t\t'clown',\n\t\t'poop',\n\t\t'ghost',\n\t\t'skull',\n\t\t'skull_crossbones',\n\t\t'alien',\n\t\t'space_invader',\n\t\t'robot',\n\t\t'jack_o_lantern',\n\t\t'smiley_cat',\n\t\t'smile_cat',\n\t\t'joy_cat',\n\t\t'heart_eyes_cat',\n\t\t'smirk_cat',\n\t\t'kissing_cat',\n\t\t'scream_cat',\n\t\t'crying_cat_face',\n\t\t'pouting_cat',\n\t\t'palms_up_together',\n\t\t'open_hands',\n\t\t'raised_hands',\n\t\t'clap',\n\t\t'handshake',\n\t\t'thumbsup',\n\t\t'thumbsdown',\n\t\t'punch',\n\t\t'fist',\n\t\t'left_facing_fist',\n\t\t'right_facing_fist',\n\t\t'fingers_crossed',\n\t\t'v',\n\t\t'love_you_gesture',\n\t\t'metal',\n\t\t'ok_hand',\n\t\t'point_left',\n\t\t'point_right',\n\t\t'point_up_2',\n\t\t'point_down',\n\t\t'point_up',\n\t\t'raised_hand',\n\t\t'raised_back_of_hand',\n\t\t'hand_splayed',\n\t\t'vulcan',\n\t\t'wave',\n\t\t'call_me',\n\t\t'muscle',\n\t\t'leg',\n\t\t'foot',\n\t\t'middle_finger',\n\t\t'writing_hand',\n\t\t'pray',\n\t\t'ring',\n\t\t'lipstick',\n\t\t'kiss',\n\t\t'lips',\n\t\t'tongue',\n\t\t'ear',\n\t\t'nose',\n\t\t'footprints',\n\t\t'eye',\n\t\t'eyes',\n\t\t'brain',\n\t\t'bone',\n\t\t'tooth',\n\t\t'speaking_head',\n\t\t'bust_in_silhouette',\n\t\t'busts_in_silhouette',\n\t\t'baby',\n\t\t'girl',\n\t\t'child',\n\t\t'boy',\n\t\t'woman',\n\t\t'adult',\n\t\t'man',\n\t\t'blond_haired_person',\n\t\t'blond-haired_woman',\n\t\t'blond-haired_man',\n\t\t'woman_red_haired',\n\t\t'man_red_haired',\n\t\t'woman_curly_haired',\n\t\t'man_curly_haired',\n\t\t'woman_white_haired',\n\t\t'man_white_haired',\n\t\t'woman_bald',\n\t\t'man_bald',\n\t\t'bearded_person',\n\t\t'older_woman',\n\t\t'older_adult',\n\t\t'older_man',\n\t\t'man_with_chinese_cap',\n\t\t'person_wearing_turban',\n\t\t'woman_wearing_turban',\n\t\t'man_wearing_turban',\n\t\t'woman_with_headscarf',\n\t\t'police_officer',\n\t\t'woman_police_officer',\n\t\t'man_police_officer',\n\t\t'construction_worker',\n\t\t'woman_construction_worker',\n\t\t'man_construction_worker',\n\t\t'guard',\n\t\t'woman_guard',\n\t\t'man_guard',\n\t\t'detective',\n\t\t'woman_detective',\n\t\t'man_detective',\n\t\t'woman_health_worker',\n\t\t'man_health_worker',\n\t\t'woman_farmer',\n\t\t'man_farmer',\n\t\t'woman_cook',\n\t\t'man_cook',\n\t\t'woman_student',\n\t\t'man_student',\n\t\t'woman_singer',\n\t\t'man_singer',\n\t\t'woman_teacher',\n\t\t'man_teacher',\n\t\t'woman_factory_worker',\n\t\t'man_factory_worker',\n\t\t'woman_technologist',\n\t\t'man_technologist',\n\t\t'woman_office_worker',\n\t\t'man_office_worker',\n\t\t'woman_mechanic',\n\t\t'man_mechanic',\n\t\t'woman_scientist',\n\t\t'man_scientist',\n\t\t'woman_artist',\n\t\t'man_artist',\n\t\t'woman_firefighter',\n\t\t'man_firefighter',\n\t\t'woman_pilot',\n\t\t'man_pilot',\n\t\t'woman_astronaut',\n\t\t'man_astronaut',\n\t\t'woman_judge',\n\t\t'man_judge',\n\t\t'bride_with_veil',\n\t\t'man_in_tuxedo',\n\t\t'princess',\n\t\t'prince',\n\t\t'mrs_claus',\n\t\t'santa',\n\t\t'superhero',\n\t\t'woman_superhero',\n\t\t'man_superhero',\n\t\t'supervillain',\n\t\t'woman_supervillain',\n\t\t'man_supervillain',\n\t\t'mage',\n\t\t'woman_mage',\n\t\t'man_mage',\n\t\t'elf',\n\t\t'woman_elf',\n\t\t'man_elf',\n\t\t'vampire',\n\t\t'woman_vampire',\n\t\t'man_vampire',\n\t\t'zombie',\n\t\t'woman_zombie',\n\t\t'man_zombie',\n\t\t'genie',\n\t\t'woman_genie',\n\t\t'man_genie',\n\t\t'merperson',\n\t\t'mermaid',\n\t\t'merman',\n\t\t'fairy',\n\t\t'woman_fairy',\n\t\t'man_fairy',\n\t\t'angel',\n\t\t'pregnant_woman',\n\t\t'breast_feeding',\n\t\t'person_bowing',\n\t\t'woman_bowing',\n\t\t'man_bowing',\n\t\t'person_tipping_hand',\n\t\t'woman_tipping_hand',\n\t\t'man_tipping_hand',\n\t\t'person_gesturing_no',\n\t\t'woman_gesturing_no',\n\t\t'man_gesturing_no',\n\t\t'person_gesturing_ok',\n\t\t'woman_gesturing_ok',\n\t\t'man_gesturing_ok',\n\t\t'person_raising_hand',\n\t\t'woman_raising_hand',\n\t\t'man_raising_hand',\n\t\t'person_facepalming',\n\t\t'woman_facepalming',\n\t\t'man_facepalming',\n\t\t'person_shrugging',\n\t\t'woman_shrugging',\n\t\t'man_shrugging',\n\t\t'person_pouting',\n\t\t'woman_pouting',\n\t\t'man_pouting',\n\t\t'person_frowning',\n\t\t'woman_frowning',\n\t\t'man_frowning',\n\t\t'person_getting_haircut',\n\t\t'woman_getting_haircut',\n\t\t'man_getting_haircut',\n\t\t'person_getting_massage',\n\t\t'woman_getting_face_massage',\n\t\t'man_getting_face_massage',\n\t\t'person_in_steamy_room',\n\t\t'woman_in_steamy_room',\n\t\t'man_in_steamy_room',\n\t\t'nail_care',\n\t\t'selfie',\n\t\t'dancer',\n\t\t'man_dancing',\n\t\t'people_with_bunny_ears_partying',\n\t\t'women_with_bunny_ears_partying',\n\t\t'men_with_bunny_ears_partying',\n\t\t'levitate',\n\t\t'person_walking',\n\t\t'woman_walking',\n\t\t'man_walking',\n\t\t'person_running',\n\t\t'woman_running',\n\t\t'man_running',\n\t\t'couple',\n\t\t'two_women_holding_hands',\n\t\t'two_men_holding_hands',\n\t\t'couple_with_heart',\n\t\t'couple_with_heart_woman_man',\n\t\t'couple_ww',\n\t\t'couple_mm',\n\t\t'couplekiss',\n\t\t'kiss_woman_man',\n\t\t'kiss_ww',\n\t\t'kiss_mm',\n\t\t'family',\n\t\t'family_man_woman_boy',\n\t\t'family_mwg',\n\t\t'family_mwgb',\n\t\t'family_mwbb',\n\t\t'family_mwgg',\n\t\t'family_wwb',\n\t\t'family_wwg',\n\t\t'family_wwgb',\n\t\t'family_wwbb',\n\t\t'family_wwgg',\n\t\t'family_mmb',\n\t\t'family_mmg',\n\t\t'family_mmgb',\n\t\t'family_mmbb',\n\t\t'family_mmgg',\n\t\t'family_woman_boy',\n\t\t'family_woman_girl',\n\t\t'family_woman_girl_boy',\n\t\t'family_woman_boy_boy',\n\t\t'family_woman_girl_girl',\n\t\t'family_man_boy',\n\t\t'family_man_girl',\n\t\t'family_man_girl_boy',\n\t\t'family_man_boy_boy',\n\t\t'family_man_girl_girl',\n\t\t'coat',\n\t\t'womans_clothes',\n\t\t'shirt',\n\t\t'jeans',\n\t\t'necktie',\n\t\t'dress',\n\t\t'bikini',\n\t\t'kimono',\n\t\t'lab_coat',\n\t\t'high_heel',\n\t\t'sandal',\n\t\t'boot',\n\t\t'mans_shoe',\n\t\t'athletic_shoe',\n\t\t'hiking_boot',\n\t\t'womans_flat_shoe',\n\t\t'socks',\n\t\t'gloves',\n\t\t'scarf',\n\t\t'tophat',\n\t\t'billed_cap',\n\t\t'womans_hat',\n\t\t'mortar_board',\n\t\t'helmet_with_cross',\n\t\t'crown',\n\t\t'pouch',\n\t\t'purse',\n\t\t'handbag',\n\t\t'briefcase',\n\t\t'school_satchel',\n\t\t'eyeglasses',\n\t\t'dark_sunglasses',\n\t\t'goggles',\n\t\t'closed_umbrella',\n\t\t'red_haired',\n\t\t'curly_haired',\n\t\t'white_haired',\n\t\t'bald',\n\t],\n\tregional: [\n\t\t'regional_indicator_z',\n\t\t'regional_indicator_y',\n\t\t'regional_indicator_x',\n\t\t'regional_indicator_w',\n\t\t'regional_indicator_v',\n\t\t'regional_indicator_u',\n\t\t'regional_indicator_t',\n\t\t'regional_indicator_s',\n\t\t'regional_indicator_r',\n\t\t'regional_indicator_q',\n\t\t'regional_indicator_p',\n\t\t'regional_indicator_o',\n\t\t'regional_indicator_n',\n\t\t'regional_indicator_m',\n\t\t'regional_indicator_l',\n\t\t'regional_indicator_k',\n\t\t'regional_indicator_j',\n\t\t'regional_indicator_i',\n\t\t'regional_indicator_h',\n\t\t'regional_indicator_g',\n\t\t'regional_indicator_f',\n\t\t'regional_indicator_e',\n\t\t'regional_indicator_d',\n\t\t'regional_indicator_c',\n\t\t'regional_indicator_b',\n\t\t'regional_indicator_a',\n\t],\n\ttravel: [\n\t\t'red_car',\n\t\t'taxi',\n\t\t'blue_car',\n\t\t'bus',\n\t\t'trolleybus',\n\t\t'race_car',\n\t\t'police_car',\n\t\t'ambulance',\n\t\t'fire_engine',\n\t\t'minibus',\n\t\t'truck',\n\t\t'articulated_lorry',\n\t\t'tractor',\n\t\t'scooter',\n\t\t'bike',\n\t\t'motor_scooter',\n\t\t'motorcycle',\n\t\t'rotating_light',\n\t\t'oncoming_police_car',\n\t\t'oncoming_bus',\n\t\t'oncoming_automobile',\n\t\t'oncoming_taxi',\n\t\t'aerial_tramway',\n\t\t'mountain_cableway',\n\t\t'suspension_railway',\n\t\t'railway_car',\n\t\t'train',\n\t\t'mountain_railway',\n\t\t'monorail',\n\t\t'bullettrain_side',\n\t\t'bullettrain_front',\n\t\t'light_rail',\n\t\t'steam_locomotive',\n\t\t'train2',\n\t\t'metro',\n\t\t'tram',\n\t\t'station',\n\t\t'airplane',\n\t\t'airplane_departure',\n\t\t'airplane_arriving',\n\t\t'airplane_small',\n\t\t'seat',\n\t\t'luggage',\n\t\t'satellite_orbital',\n\t\t'rocket',\n\t\t'flying_saucer',\n\t\t'helicopter',\n\t\t'canoe',\n\t\t'sailboat',\n\t\t'speedboat',\n\t\t'motorboat',\n\t\t'cruise_ship',\n\t\t'ferry',\n\t\t'ship',\n\t\t'anchor',\n\t\t'fuelpump',\n\t\t'construction',\n\t\t'vertical_traffic_light',\n\t\t'traffic_light',\n\t\t'busstop',\n\t\t'map',\n\t\t'moyai',\n\t\t'statue_of_liberty',\n\t\t'tokyo_tower',\n\t\t'european_castle',\n\t\t'japanese_castle',\n\t\t'stadium',\n\t\t'ferris_wheel',\n\t\t'roller_coaster',\n\t\t'carousel_horse',\n\t\t'fountain',\n\t\t'beach_umbrella',\n\t\t'beach',\n\t\t'island',\n\t\t'desert',\n\t\t'volcano',\n\t\t'mountain',\n\t\t'mountain_snow',\n\t\t'mount_fuji',\n\t\t'camping',\n\t\t'tent',\n\t\t'house',\n\t\t'house_with_garden',\n\t\t'homes',\n\t\t'house_abandoned',\n\t\t'construction_site',\n\t\t'factory',\n\t\t'office',\n\t\t'department_store',\n\t\t'post_office',\n\t\t'european_post_office',\n\t\t'hospital',\n\t\t'bank',\n\t\t'hotel',\n\t\t'convenience_store',\n\t\t'school',\n\t\t'love_hotel',\n\t\t'wedding',\n\t\t'classical_building',\n\t\t'church',\n\t\t'mosque',\n\t\t'synagogue',\n\t\t'kaaba',\n\t\t'shinto_shrine',\n\t\t'railway_track',\n\t\t'motorway',\n\t\t'japan',\n\t\t'rice_scene',\n\t\t'park',\n\t\t'sunrise',\n\t\t'sunrise_over_mountains',\n\t\t'stars',\n\t\t'sparkler',\n\t\t'fireworks',\n\t\t'firecracker',\n\t\t'city_sunset',\n\t\t'city_dusk',\n\t\t'cityscape',\n\t\t'night_with_stars',\n\t\t'milky_way',\n\t\t'bridge_at_night',\n\t\t'foggy',\n\t],\n\tflags: [\n\t\t'flag_white',\n\t\t'flag_black',\n\t\t'checkered_flag',\n\t\t'triangular_flag_on_post',\n\t\t'rainbow_flag',\n\t\t'pirate_flag',\n\t\t'flag_af',\n\t\t'flag_ax',\n\t\t'flag_al',\n\t\t'flag_dz',\n\t\t'flag_as',\n\t\t'flag_ad',\n\t\t'flag_ao',\n\t\t'flag_ai',\n\t\t'flag_aq',\n\t\t'flag_ag',\n\t\t'flag_ar',\n\t\t'flag_am',\n\t\t'flag_aw',\n\t\t'flag_au',\n\t\t'flag_at',\n\t\t'flag_az',\n\t\t'flag_bs',\n\t\t'flag_bh',\n\t\t'flag_bd',\n\t\t'flag_bb',\n\t\t'flag_by',\n\t\t'flag_be',\n\t\t'flag_bz',\n\t\t'flag_bj',\n\t\t'flag_bm',\n\t\t'flag_bt',\n\t\t'flag_bo',\n\t\t'flag_ba',\n\t\t'flag_bw',\n\t\t'flag_br',\n\t\t'flag_io',\n\t\t'flag_vg',\n\t\t'flag_bn',\n\t\t'flag_bg',\n\t\t'flag_bf',\n\t\t'flag_bi',\n\t\t'flag_kh',\n\t\t'flag_cm',\n\t\t'flag_ca',\n\t\t'flag_ic',\n\t\t'flag_cv',\n\t\t'flag_bq',\n\t\t'flag_ky',\n\t\t'flag_cf',\n\t\t'flag_td',\n\t\t'flag_cl',\n\t\t'flag_cn',\n\t\t'flag_cx',\n\t\t'flag_cc',\n\t\t'flag_co',\n\t\t'flag_km',\n\t\t'flag_cg',\n\t\t'flag_cd',\n\t\t'flag_ck',\n\t\t'flag_cr',\n\t\t'flag_ci',\n\t\t'flag_hr',\n\t\t'flag_cu',\n\t\t'flag_cw',\n\t\t'flag_cy',\n\t\t'flag_cz',\n\t\t'flag_dk',\n\t\t'flag_dj',\n\t\t'flag_dm',\n\t\t'flag_do',\n\t\t'flag_ec',\n\t\t'flag_eg',\n\t\t'flag_sv',\n\t\t'flag_gq',\n\t\t'flag_er',\n\t\t'flag_ee',\n\t\t'flag_et',\n\t\t'flag_eu',\n\t\t'flag_fk',\n\t\t'flag_fo',\n\t\t'flag_fj',\n\t\t'flag_fi',\n\t\t'flag_fr',\n\t\t'flag_gf',\n\t\t'flag_pf',\n\t\t'flag_tf',\n\t\t'flag_ga',\n\t\t'flag_gm',\n\t\t'flag_ge',\n\t\t'flag_de',\n\t\t'flag_gh',\n\t\t'flag_gi',\n\t\t'flag_gr',\n\t\t'flag_gl',\n\t\t'flag_gd',\n\t\t'flag_gp',\n\t\t'flag_gu',\n\t\t'flag_gt',\n\t\t'flag_gg',\n\t\t'flag_gn',\n\t\t'flag_gw',\n\t\t'flag_gy',\n\t\t'flag_ht',\n\t\t'flag_hn',\n\t\t'flag_hk',\n\t\t'flag_hu',\n\t\t'flag_is',\n\t\t'flag_in',\n\t\t'flag_id',\n\t\t'flag_ir',\n\t\t'flag_iq',\n\t\t'flag_ie',\n\t\t'flag_im',\n\t\t'flag_il',\n\t\t'flag_it',\n\t\t'flag_jm',\n\t\t'flag_jp',\n\t\t'crossed_flags',\n\t\t'flag_je',\n\t\t'flag_jo',\n\t\t'flag_kz',\n\t\t'flag_ke',\n\t\t'flag_ki',\n\t\t'flag_xk',\n\t\t'flag_kw',\n\t\t'flag_kg',\n\t\t'flag_la',\n\t\t'flag_lv',\n\t\t'flag_lb',\n\t\t'flag_ls',\n\t\t'flag_lr',\n\t\t'flag_ly',\n\t\t'flag_li',\n\t\t'flag_lt',\n\t\t'flag_lu',\n\t\t'flag_mo',\n\t\t'flag_mk',\n\t\t'flag_mg',\n\t\t'flag_mw',\n\t\t'flag_my',\n\t\t'flag_mv',\n\t\t'flag_ml',\n\t\t'flag_mt',\n\t\t'flag_mh',\n\t\t'flag_mq',\n\t\t'flag_mr',\n\t\t'flag_mu',\n\t\t'flag_yt',\n\t\t'flag_mx',\n\t\t'flag_fm',\n\t\t'flag_md',\n\t\t'flag_mc',\n\t\t'flag_mn',\n\t\t'flag_me',\n\t\t'flag_ms',\n\t\t'flag_ma',\n\t\t'flag_mz',\n\t\t'flag_mm',\n\t\t'flag_na',\n\t\t'flag_nr',\n\t\t'flag_np',\n\t\t'flag_nl',\n\t\t'flag_nc',\n\t\t'flag_nz',\n\t\t'flag_ni',\n\t\t'flag_ne',\n\t\t'flag_ng',\n\t\t'flag_nu',\n\t\t'flag_nf',\n\t\t'flag_kp',\n\t\t'flag_mp',\n\t\t'flag_no',\n\t\t'flag_om',\n\t\t'flag_pk',\n\t\t'flag_pw',\n\t\t'flag_ps',\n\t\t'flag_pa',\n\t\t'flag_pg',\n\t\t'flag_py',\n\t\t'flag_pe',\n\t\t'flag_ph',\n\t\t'flag_pn',\n\t\t'flag_pl',\n\t\t'flag_pt',\n\t\t'flag_pr',\n\t\t'flag_qa',\n\t\t'flag_re',\n\t\t'flag_ro',\n\t\t'flag_ru',\n\t\t'flag_rw',\n\t\t'flag_ws',\n\t\t'flag_sm',\n\t\t'flag_st',\n\t\t'flag_sa',\n\t\t'flag_sn',\n\t\t'flag_rs',\n\t\t'flag_sc',\n\t\t'flag_sl',\n\t\t'flag_sg',\n\t\t'flag_sx',\n\t\t'flag_sk',\n\t\t'flag_si',\n\t\t'flag_gs',\n\t\t'flag_sb',\n\t\t'flag_so',\n\t\t'flag_za',\n\t\t'flag_kr',\n\t\t'flag_ss',\n\t\t'flag_es',\n\t\t'flag_lk',\n\t\t'flag_bl',\n\t\t'flag_sh',\n\t\t'flag_kn',\n\t\t'flag_lc',\n\t\t'flag_pm',\n\t\t'flag_vc',\n\t\t'flag_sd',\n\t\t'flag_sr',\n\t\t'flag_sz',\n\t\t'flag_se',\n\t\t'flag_ch',\n\t\t'flag_sy',\n\t\t'flag_tw',\n\t\t'flag_tj',\n\t\t'flag_tz',\n\t\t'flag_th',\n\t\t'flag_tl',\n\t\t'flag_tg',\n\t\t'flag_tk',\n\t\t'flag_to',\n\t\t'flag_tt',\n\t\t'flag_tn',\n\t\t'flag_tr',\n\t\t'flag_tm',\n\t\t'flag_tc',\n\t\t'flag_vi',\n\t\t'flag_tv',\n\t\t'flag_ug',\n\t\t'flag_ua',\n\t\t'flag_ae',\n\t\t'flag_gb',\n\t\t'england',\n\t\t'scotland',\n\t\t'wales',\n\t\t'flag_us',\n\t\t'flag_uy',\n\t\t'flag_uz',\n\t\t'flag_vu',\n\t\t'flag_va',\n\t\t'flag_ve',\n\t\t'flag_vn',\n\t\t'flag_wf',\n\t\t'flag_eh',\n\t\t'flag_ye',\n\t\t'flag_zm',\n\t\t'flag_zw',\n\t\t'flag_ac',\n\t\t'flag_bv',\n\t\t'flag_cp',\n\t\t'flag_ea',\n\t\t'flag_dg',\n\t\t'flag_hm',\n\t\t'flag_mf',\n\t\t'flag_sj',\n\t\t'flag_ta',\n\t\t'flag_um',\n\t\t'united_nations',\n\t],\n\tmodifier: ['tone1', 'tone2', 'tone3', 'tone4', 'tone5'],\n};\n","import emojione from 'emojione';\n\nexport function emojioneRender(message) {\n\treturn emojione.toImage(message);\n}\n\nexport function emojioneRenderFromShort(message) {\n\treturn emojione.shortnameToImage(message);\n}\n","import emojione from 'emojione';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport mem from 'mem';\n\nimport { emojioneRender, emojioneRenderFromShort } from './emojioneRender';\nimport { emojisByCategory, emojiCategories, toneList } from './emojiPicker';\nimport { emoji } from '../../emoji';\nimport { getUserPreference } from '../../utils';\n\n// TODO remove fix below when issue is solved: https://github.com/joypixels/emojione/issues/617\n\n// add missing emojis not provided by JS object, but included on emoji.json\nemojione.shortnames +=\n\t'|:tm:|:copyright:|:registered:|:digit_zero:|:digit_one:|:digit_two:|:digit_three:|:digit_four:|:digit_five:|:digit_six:|:digit_seven:|:digit_eight:|:digit_nine:|:pound_symbol:|:asterisk_symbol:';\nemojione.regShortNames = new RegExp(\n\t`<object[^>]*>.*?<\\/object>|<span[^>]*>.*?<\\/span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|(${emojione.shortnames})`,\n\t'gi',\n);\n\nemojione.emojioneList[':tm:'] = {\n\tuc_base: '2122',\n\tuc_output: '2122-fe0f',\n\tuc_match: '2122-fe0f',\n\tuc_greedy: '2122-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':copyright:'] = {\n\tuc_base: '00a9',\n\tuc_output: '00a9-f0ef',\n\tuc_match: '00a9-fe0f',\n\tuc_greedy: '00a9-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':registered:'] = {\n\tuc_base: '00ae',\n\tuc_output: '00ae-fe0f',\n\tuc_match: '00ae-fe0f',\n\tuc_greedy: '00ae-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_zero:'] = {\n\tuc_base: '0030',\n\tuc_output: '0030-fe0f',\n\tuc_match: '0030-fe0f',\n\tuc_greedy: '0030-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_one:'] = {\n\tuc_base: '0031',\n\tuc_output: '0031-fe0f',\n\tuc_match: '0031-fe0f',\n\tuc_greedy: '0031-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_two:'] = {\n\tuc_base: '0032',\n\tuc_output: '0032-fe0f',\n\tuc_match: '0032-fe0f',\n\tuc_greedy: '0032-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_three:'] = {\n\tuc_base: '0033',\n\tuc_output: '0033-fe0f',\n\tuc_match: '0033-fe0f',\n\tuc_greedy: '0033-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_four:'] = {\n\tuc_base: '0034',\n\tuc_output: '0034-fe0f',\n\tuc_match: '0034-fe0f',\n\tuc_greedy: '0034-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_five:'] = {\n\tuc_base: '0035',\n\tuc_output: '0035-fe0f',\n\tuc_match: '0035-fe0f',\n\tuc_greedy: '0035-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_six:'] = {\n\tuc_base: '0036',\n\tuc_output: '0036-fe0f',\n\tuc_match: '0036-fe0f',\n\tuc_greedy: '0036-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_seven:'] = {\n\tuc_base: '0037',\n\tuc_output: '0037-fe0f',\n\tuc_match: '0037-fe0f',\n\tuc_greedy: '0037-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_eight:'] = {\n\tuc_base: '0038',\n\tuc_output: '0038-fe0f',\n\tuc_match: '0038-fe0f',\n\tuc_greedy: '0038-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_nine:'] = {\n\tuc_base: '0039',\n\tuc_output: '0039-fe0f',\n\tuc_match: '0039-fe0f',\n\tuc_greedy: '0039-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':pound_symbol:'] = {\n\tuc_base: '0023',\n\tuc_output: '0023-fe0f',\n\tuc_match: '0023-fe0f',\n\tuc_greedy: '0023-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':asterisk_symbol:'] = {\n\tuc_base: '002a',\n\tuc_output: '002a-fe0f',\n\tuc_match: '002a-fe0f',\n\tuc_greedy: '002a-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n// end fix\n\n// fix for :+1: - had to replace all function that does its conversion: https://github.com/joypixels/emojione/blob/4.5.0/lib/js/emojione.js#L249\n(function (ns) {\n\tns.shortnameConversionMap = mem(ns.shortnameConversionMap, { maxAge: 1000 });\n\n\tns.unicodeCharRegex = mem(ns.unicodeCharRegex, { maxAge: 1000 });\n\n\tconst convertShortName = mem(\n\t\tfunction (shortname) {\n\t\t\t// the fix is basically adding this .replace(/[+]/g, '\\\\$&')\n\t\t\tif (typeof shortname === 'undefined' || shortname === '' || ns.shortnames.indexOf(shortname.replace(/[+]/g, '\\\\$&')) === -1) {\n\t\t\t\t// if the shortname doesnt exist just return the entire match\n\t\t\t\treturn shortname;\n\t\t\t}\n\n\t\t\t// map shortname to parent\n\t\t\tif (!ns.emojioneList[shortname]) {\n\t\t\t\tfor (const emoji in ns.emojioneList) {\n\t\t\t\t\tif (!ns.emojioneList.hasOwnProperty(emoji) || emoji === '') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (ns.emojioneList[emoji].shortnames.indexOf(shortname) === -1) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tshortname = emoji;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst unicode = ns.emojioneList[shortname].uc_output;\n\t\t\tconst fname = ns.emojioneList[shortname].uc_base;\n\t\t\tconst category = fname.indexOf('-1f3f') >= 0 ? 'diversity' : ns.emojioneList[shortname].category;\n\t\t\tconst title = ns.imageTitleTag ? `title=\"${shortname}\"` : '';\n\t\t\t// const size = ns.spriteSize === '32' || ns.spriteSize === '64' ? ns.spriteSize : '32';\n\t\t\t// if the emoji path has been set, we'll use the provided path, otherwise we'll use the default path\n\t\t\tconst ePath = ns.defaultPathPNG !== ns.imagePathPNG ? ns.imagePathPNG : `${ns.defaultPathPNG + ns.emojiSize}/`;\n\n\t\t\t// depending on the settings, we'll either add the native unicode as the alt tag, otherwise the shortname\n\t\t\tconst alt = ns.unicodeAlt ? ns.convert(unicode.toUpperCase()) : shortname;\n\n\t\t\tif (ns.sprites) {\n\t\t\t\treturn `<span class=\"emojione emojione-${category} _${fname}\" ${title}>${alt}</span>`;\n\t\t\t}\n\t\t\treturn `<img class=\"emojione\" alt=\"${alt}\" ${title} src=\"${ePath}${fname}${ns.fileExtension}\"/>`;\n\t\t},\n\t\t{ maxAge: 1000 },\n\t);\n\n\tconst convertUnicode = mem(\n\t\tfunction (entire, m1, m2, m3) {\n\t\t\tconst mappedUnicode = ns.mapUnicodeToShort();\n\n\t\t\tif (typeof m3 === 'undefined' || m3 === '' || !(ns.unescapeHTML(m3) in ns.asciiList)) {\n\t\t\t\t// if the ascii doesnt exist just return the entire match\n\t\t\t\treturn entire;\n\t\t\t}\n\n\t\t\tm3 = ns.unescapeHTML(m3);\n\t\t\tconst unicode = ns.asciiList[m3];\n\t\t\tconst shortname = mappedUnicode[unicode];\n\t\t\tconst category = unicode.indexOf('-1f3f') >= 0 ? 'diversity' : ns.emojioneList[shortname].category;\n\t\t\tconst title = ns.imageTitleTag ? `title=\"${ns.escapeHTML(m3)}\"` : '';\n\t\t\t// const size = ns.spriteSize === '32' || ns.spriteSize === '64' ? ns.spriteSize : '32';\n\t\t\t// if the emoji path has been set, we'll use the provided path, otherwise we'll use the default path\n\t\t\tconst ePath = ns.defaultPathPNG !== ns.imagePathPNG ? ns.imagePathPNG : `${ns.defaultPathPNG + ns.emojiSize}/`;\n\n\t\t\t// depending on the settings, we'll either add the native unicode as the alt tag, otherwise the shortname\n\t\t\tconst alt = ns.unicodeAlt ? ns.convert(unicode.toUpperCase()) : ns.escapeHTML(m3);\n\n\t\t\tif (ns.sprites) {\n\t\t\t\treturn `${m2}<span class=\"emojione emojione-${category} _${unicode}\"  ${title}>${alt}</span>`;\n\t\t\t}\n\t\t\treturn `${m2}<img class=\"emojione\" alt=\"${alt}\" ${title} src=\"${ePath}${unicode}${ns.fileExtension}\"/>`;\n\t\t},\n\t\t{ maxAge: 1000, cacheKey: JSON.stringify },\n\t);\n\n\tns.shortnameToImage = function (str) {\n\t\t// replace regular shortnames first\n\t\tstr = str.replace(ns.regShortNames, convertShortName);\n\n\t\t// if ascii smileys are turned on, then we'll replace them!\n\t\tif (ns.ascii) {\n\t\t\tconst asciiRX = ns.riskyMatchAscii ? ns.regAsciiRisky : ns.regAscii;\n\n\t\t\treturn str.replace(asciiRX, convertUnicode);\n\t\t}\n\n\t\treturn str;\n\t};\n})(emojione);\n\nemoji.packages.emojione = emojione;\nemoji.packages.emojione.sprites = true;\nemoji.packages.emojione.emojisByCategory = emojisByCategory;\nemoji.packages.emojione.emojiCategories = emojiCategories;\nemoji.packages.emojione.toneList = toneList;\n\nemoji.packages.emojione.render = emojioneRender;\nemoji.packages.emojione.renderPicker = emojioneRenderFromShort;\n\n// http://stackoverflow.com/a/26990347 function isSet() from Gajus\nfunction isSetNotNull(fn) {\n\tlet value;\n\ttry {\n\t\tvalue = fn();\n\t} catch (e) {\n\t\tvalue = null;\n\t}\n\treturn value !== null && value !== undefined;\n}\n\n// RocketChat.emoji.list is the collection of emojis from all emoji packages\nfor (const key in emojione.emojioneList) {\n\tif (emojione.emojioneList.hasOwnProperty(key)) {\n\t\tconst currentEmoji = emojione.emojioneList[key];\n\t\tcurrentEmoji.emojiPackage = 'emojione';\n\t\temoji.list[key] = currentEmoji;\n\n\t\tif (currentEmoji.shortnames) {\n\t\t\tcurrentEmoji.shortnames.forEach((shortname) => {\n\t\t\t\temoji.list[shortname] = currentEmoji;\n\t\t\t});\n\t\t}\n\t}\n}\n\n// Additional settings -- ascii emojis\nMeteor.startup(function () {\n\tTracker.autorun(function () {\n\t\tif (isSetNotNull(() => emoji.packages.emojione)) {\n\t\t\tif (isSetNotNull(() => getUserPreference(Meteor.userId(), 'convertAsciiEmoji'))) {\n\t\t\t\temoji.packages.emojione.ascii = getUserPreference(Meteor.userId(), 'convertAsciiEmoji');\n\t\t\t} else {\n\t\t\t\temoji.packages.emojione.ascii = true;\n\t\t\t}\n\t\t}\n\t});\n});\n","import '../lib/rocketchat';\nimport './emojione-sprites.css';\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { CustomOAuth } from '../../custom-oauth';\nimport { settings } from '../../settings';\n\n// GitHub Enterprise Server CallBack URL needs to be http(s)://{rocketchat.server}[:port]/_oauth/github_enterprise\n// In RocketChat -> Administration the URL needs to be http(s)://{github.enterprise.server}/\n\nconst config = {\n\tserverURL: '',\n\tidentityPath: '/api/v3/user',\n\tauthorizePath: '/login/oauth/authorize',\n\ttokenPath: '/login/oauth/access_token',\n\taddAutopublishFields: {\n\t\tforLoggedInUser: ['services.github-enterprise'],\n\t\tforOtherUsers: ['services.github-enterprise.username'],\n\t},\n};\n\nconst GitHubEnterprise = new CustomOAuth('github_enterprise', config);\n\nif (Meteor.isServer) {\n\tMeteor.startup(function () {\n\t\tsettings.get('API_GitHub_Enterprise_URL', function (key, value) {\n\t\t\tconfig.serverURL = value;\n\t\t\tGitHubEnterprise.configure(config);\n\t\t});\n\t});\n} else {\n\tMeteor.startup(function () {\n\t\tTracker.autorun(function () {\n\t\t\tif (settings.get('API_GitHub_Enterprise_URL')) {\n\t\t\t\tconfig.serverURL = settings.get('API_GitHub_Enterprise_URL');\n\t\t\t\tGitHubEnterprise.configure(config);\n\t\t\t}\n\t\t});\n\t});\n}\n","import '../lib/common';\nimport './github-enterprise-login-button.css';\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport _ from 'underscore';\n\nimport { settings } from '../../settings';\nimport { CustomOAuth } from '../../custom-oauth';\n\nconst config = {\n\tserverURL: 'https://gitlab.com',\n\tidentityPath: '/api/v4/user',\n\tscope: 'read_user',\n\tmergeUsers: false,\n\taddAutopublishFields: {\n\t\tforLoggedInUser: ['services.gitlab'],\n\t\tforOtherUsers: ['services.gitlab.username'],\n\t},\n\taccessTokenParam: 'access_token',\n};\n\nconst Gitlab = new CustomOAuth('gitlab', config);\n\nif (Meteor.isServer) {\n\tMeteor.startup(function () {\n\t\tconst updateConfig = _.debounce(() => {\n\t\t\tconfig.serverURL = settings.get('API_Gitlab_URL').trim().replace(/\\/*$/, '') || config.serverURL;\n\t\t\tconfig.identityPath = settings.get('Accounts_OAuth_Gitlab_identity_path') || config.identityPath;\n\t\t\tconfig.mergeUsers = Boolean(settings.get('Accounts_OAuth_Gitlab_merge_users'));\n\t\t\tGitlab.configure(config);\n\t\t}, 300);\n\n\t\tsettings.get('API_Gitlab_URL', updateConfig);\n\t\tsettings.get('Accounts_OAuth_Gitlab_identity_path', updateConfig);\n\t\tsettings.get('Accounts_OAuth_Gitlab_merge_users', updateConfig);\n\t});\n} else {\n\tMeteor.startup(function () {\n\t\tTracker.autorun(function () {\n\t\t\tlet anyChange = false;\n\t\t\tif (settings.get('API_Gitlab_URL')) {\n\t\t\t\tconfig.serverURL = settings.get('API_Gitlab_URL').trim().replace(/\\/*$/, '');\n\t\t\t\tanyChange = true;\n\t\t\t}\n\n\t\t\tif (settings.get('Accounts_OAuth_Gitlab_identity_path')) {\n\t\t\t\tconfig.identityPath = settings.get('Accounts_OAuth_Gitlab_identity_path').trim() || config.identityPath;\n\t\t\t\tanyChange = true;\n\t\t\t}\n\n\t\t\tif (settings.get('Accounts_OAuth_Gitlab_merge_users')) {\n\t\t\t\tconfig.mergeUsers = true;\n\t\t\t\tanyChange = true;\n\t\t\t}\n\n\t\t\tif (anyChange) {\n\t\t\t\tGitlab.configure(config);\n\t\t\t}\n\t\t});\n\t});\n}\n","import '../lib/common';\nimport './gitlab-login-button.css';\n","export class ImporterInfo {\n\t/**\n\t * Creates a new class which contains information about the importer.\n\t *\n\t * @param {string} key The unique key of this importer.\n\t * @param {string} name The i18n name.\n\t * @param {string} mimeType The type of file it expects.\n\t * @param {{ href: string, text: string }[]} warnings An array of warning objects. `{ href, text }`\n\t */\n\tconstructor(key, name = '', mimeType = '', warnings = []) {\n\t\tthis.key = key;\n\t\tthis.name = name;\n\t\tthis.mimeType = mimeType;\n\t\tthis.warnings = warnings;\n\n\t\tthis.importer = undefined;\n\t\tthis.instance = undefined;\n\t}\n}\n","/** The progress step that an importer is at. */\nexport const ProgressStep = Object.freeze({\n\tNEW: 'importer_new',\n\tUPLOADING: 'importer_uploading',\n\tDOWNLOADING_FILE: 'importer_downloading_file',\n\tFILE_LOADED: 'importer_file_loaded',\n\n\tPREPARING_STARTED: 'importer_preparing_started',\n\tPREPARING_USERS: 'importer_preparing_users',\n\tPREPARING_CHANNELS: 'importer_preparing_channels',\n\tPREPARING_MESSAGES: 'importer_preparing_messages',\n\n\tUSER_SELECTION: 'importer_user_selection',\n\n\tIMPORTING_STARTED: 'importer_importing_started',\n\tIMPORTING_USERS: 'importer_importing_users',\n\tIMPORTING_CHANNELS: 'importer_importing_channels',\n\tIMPORTING_MESSAGES: 'importer_importing_messages',\n\tIMPORTING_FILES: 'importer_importing_files',\n\tFINISHING: 'importer_finishing',\n\n\tDONE: 'importer_done',\n\tERROR: 'importer_import_failed',\n\tCANCELLED: 'importer_import_cancelled',\n});\n\nexport const ImportWaitingStates = [ProgressStep.NEW, ProgressStep.UPLOADING, ProgressStep.DOWNLOADING_FILE];\n\nexport const ImportFileReadyStates = [ProgressStep.FILE_LOADED];\n\nexport const ImportPreparingStartedStates = [\n\tProgressStep.PREPARING_STARTED,\n\tProgressStep.PREPARING_USERS,\n\tProgressStep.PREPARING_CHANNELS,\n\tProgressStep.PREPARING_MESSAGES,\n];\n\nexport const ImportingStartedStates = [\n\tProgressStep.IMPORTING_STARTED,\n\tProgressStep.IMPORTING_USERS,\n\tProgressStep.IMPORTING_CHANNELS,\n\tProgressStep.IMPORTING_MESSAGES,\n\tProgressStep.IMPORTING_FILES,\n\tProgressStep.FINISHING,\n];\n\nexport const ImportingDoneStates = [ProgressStep.DONE, ProgressStep.ERROR, ProgressStep.CANCELLED];\n\nexport const ImportingErrorStates = [ProgressStep.ERROR, ProgressStep.CANCELLED];\n","import { ImporterInfo } from './ImporterInfo';\n\n/** Container class which holds all of the importer details. */\nclass ImportersContainer {\n\tconstructor() {\n\t\tthis.importers = new Map();\n\t}\n\n\t/**\n\t * Adds an importer to the import collection. Adding it more than once will\n\t * overwrite the previous one.\n\t *\n\t * @param {ImporterInfo} info The information related to the importer.\n\t * @param {*} importer The class for the importer, will be undefined on the client.\n\t */\n\tadd(info, importer) {\n\t\tif (!(info instanceof ImporterInfo)) {\n\t\t\tthrow new Error('The importer must be a valid ImporterInfo instance.');\n\t\t}\n\n\t\tinfo.importer = importer;\n\n\t\tthis.importers.set(info.key, info);\n\n\t\treturn this.importers.get(info.key);\n\t}\n\n\t/**\n\t * Gets the importer information that is stored.\n\t *\n\t * @param {string} key The key of the importer.\n\t */\n\tget(key) {\n\t\treturn this.importers.get(key);\n\t}\n\n\t/**\n\t * Gets all of the importers in array format.\n\t *\n\t * @returns {ImporterInfo[]} The array of importer information.\n\t */\n\tgetAll() {\n\t\treturn Array.from(this.importers.values());\n\t}\n}\n\nexport const Importers = new ImportersContainer();\n","export { Importers } from '../lib/Importers';\nexport { ImporterInfo } from '../lib/ImporterInfo';\nexport { ProgressStep } from '../lib/ImporterProgressStep';\n","import { ImporterInfo } from '../../importer/lib/ImporterInfo';\n\nexport class CsvImporterInfo extends ImporterInfo {\n\tconstructor() {\n\t\tsuper('csv', 'CSV', 'application/zip', [\n\t\t\t{\n\t\t\t\ttext: 'Importer_CSV_Information',\n\t\t\t\thref: 'https://rocket.chat/docs/administrator-guides/import/csv/',\n\t\t\t},\n\t\t]);\n\t}\n}\n","import { Importers } from '../../importer/client';\nimport { CsvImporterInfo } from '../lib/info';\n\nImporters.add(new CsvImporterInfo());\n","import './adder';\n","import { ImporterInfo } from '../../importer/lib/ImporterInfo';\n\nexport class HipChatEnterpriseImporterInfo extends ImporterInfo {\n\tconstructor() {\n\t\tsuper('hipchatenterprise', 'HipChat (tar.gz)', 'application/gzip', [\n\t\t\t{\n\t\t\t\ttext: 'Importer_HipChatEnterprise_Information',\n\t\t\t\thref: 'https://rocket.chat/docs/administrator-guides/import/hipchat/enterprise/',\n\t\t\t},\n\t\t]);\n\t}\n}\n","import { Importers } from '../../importer/client';\nimport { HipChatEnterpriseImporterInfo } from '../lib/info';\n\nImporters.add(new HipChatEnterpriseImporterInfo());\n","import './adder';\n","import { ImporterInfo } from '../../importer/lib/ImporterInfo';\n\nexport class SlackImporterInfo extends ImporterInfo {\n\tconstructor() {\n\t\tsuper('slack', 'Slack', 'application/zip');\n\t}\n}\n","import { Importers } from '../../importer/client';\nimport { SlackImporterInfo } from '../lib/info';\n\nImporters.add(new SlackImporterInfo());\n","import './adder';\n","import { ImporterInfo } from '../../importer/lib/ImporterInfo';\n\nexport class SlackUsersImporterInfo extends ImporterInfo {\n\tconstructor() {\n\t\tsuper('slack-users', 'Slack_Users', 'text/csv', [\n\t\t\t{\n\t\t\t\ttext: 'Importer_Slack_Users_CSV_Information',\n\t\t\t\thref: 'https://rocket.chat/docs/administrator-guides/import/slack/users',\n\t\t\t},\n\t\t]);\n\t}\n}\n","import { Importers } from '../../importer/client';\nimport { SlackUsersImporterInfo } from '../lib/info';\n\nImporters.add(new SlackUsersImporterInfo());\n","import './adder';\n","import { hasAtLeastOnePermission } from '../../authorization';\nimport { registerAdminSidebarItem } from '../../../client/views/admin';\n\nregisterAdminSidebarItem({\n\thref: 'admin-integrations',\n\ti18nLabel: 'Integrations',\n\ticon: 'code',\n\tpermissionGranted: () =>\n\t\thasAtLeastOnePermission([\n\t\t\t'manage-outgoing-integrations',\n\t\t\t'manage-own-outgoing-integrations',\n\t\t\t'manage-incoming-integrations',\n\t\t\t'manage-own-incoming-integrations',\n\t\t]),\n});\n","import { escapeHTML } from '@rocket.chat/string-helpers';\n\nconst userTemplateDefault = ({ prefix, className, mention, title, label, type = 'username' }) =>\n\t`${prefix}<a class=\"${className}\" data-${type}=\"${mention}\"${title ? ` title=\"${title}\"` : ''}>${label}</a>`;\nconst roomTemplateDefault = ({ prefix, reference, mention }) =>\n\t`${prefix}<a class=\"mention-link mention-link--room\" data-channel=\"${reference}\">${`#${mention}`}</a>`;\nexport class MentionsParser {\n\tconstructor({ pattern, useRealName, me, roomTemplate = roomTemplateDefault, userTemplate = userTemplateDefault }) {\n\t\tthis.pattern = pattern;\n\t\tthis.useRealName = useRealName;\n\t\tthis.me = me;\n\t\tthis.userTemplate = userTemplate;\n\t\tthis.roomTemplate = roomTemplate;\n\t}\n\n\tset me(m) {\n\t\tthis._me = m;\n\t}\n\n\tget me() {\n\t\treturn typeof this._me === 'function' ? this._me() : this._me;\n\t}\n\n\tset pattern(p) {\n\t\tthis._pattern = p;\n\t}\n\n\tget pattern() {\n\t\treturn typeof this._pattern === 'function' ? this._pattern() : this._pattern;\n\t}\n\n\tset useRealName(s) {\n\t\tthis._useRealName = s;\n\t}\n\n\tget useRealName() {\n\t\treturn typeof this._useRealName === 'function' ? this._useRealName() : this._useRealName;\n\t}\n\n\tget userMentionRegex() {\n\t\treturn new RegExp(`(^|\\\\s|> ?)@(${this.pattern}(@(${this.pattern}))?)`, 'gm');\n\t}\n\n\tget channelMentionRegex() {\n\t\treturn new RegExp(`(^|\\\\s|>)#(${this.pattern}(@(${this.pattern}))?)`, 'gm');\n\t}\n\n\treplaceUsers = (msg, { mentions, temp }, me) =>\n\t\tmsg.replace(this.userMentionRegex, (match, prefix, mention) => {\n\t\t\tconst classNames = ['mention-link'];\n\n\t\t\tif (mention === 'all') {\n\t\t\t\tclassNames.push('mention-link--all');\n\t\t\t\tclassNames.push('mention-link--group');\n\t\t\t} else if (mention === 'here') {\n\t\t\t\tclassNames.push('mention-link--here');\n\t\t\t\tclassNames.push('mention-link--group');\n\t\t\t} else if (mention === me) {\n\t\t\t\tclassNames.push('mention-link--me');\n\t\t\t\tclassNames.push('mention-link--user');\n\t\t\t} else {\n\t\t\t\tclassNames.push('mention-link--user');\n\t\t\t}\n\n\t\t\tconst className = classNames.join(' ');\n\n\t\t\tif (mention === 'all' || mention === 'here') {\n\t\t\t\treturn this.userTemplate({ prefix, className, mention, label: mention, type: 'group' });\n\t\t\t}\n\n\t\t\tconst filterUser = ({ username, type }) => (!type || type === 'user') && username === mention;\n\t\t\tconst filterTeam = ({ name, type }) => type === 'team' && name === mention;\n\n\t\t\tconst [mentionObj] = (mentions || []).filter((m) => filterUser(m) || filterTeam(m));\n\n\t\t\tconst label = temp\n\t\t\t\t? mention && escapeHTML(mention)\n\t\t\t\t: mentionObj && escapeHTML(mentionObj.type === 'team' || this.useRealName ? mentionObj.name : mentionObj.username);\n\n\t\t\tif (!label) {\n\t\t\t\treturn match;\n\t\t\t}\n\n\t\t\treturn this.userTemplate({\n\t\t\t\tprefix,\n\t\t\t\tclassName,\n\t\t\t\tmention,\n\t\t\t\tlabel,\n\t\t\t\ttype: mentionObj?.type === 'team' ? 'team' : 'username',\n\t\t\t\ttitle: this.useRealName ? mention : label,\n\t\t\t});\n\t\t});\n\n\treplaceChannels = (msg, { temp, channels }) =>\n\t\tmsg.replace(/&#39;/g, \"'\").replace(this.channelMentionRegex, (match, prefix, mention) => {\n\t\t\tif (\n\t\t\t\t!temp &&\n\t\t\t\t!(\n\t\t\t\t\tchannels &&\n\t\t\t\t\tchannels.find(function (c) {\n\t\t\t\t\t\treturn c.dname ? c.dname === mention : c.name === mention;\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn match;\n\t\t\t}\n\n\t\t\tconst channel =\n\t\t\t\tchannels &&\n\t\t\t\tchannels.find(function ({ name, dname }) {\n\t\t\t\t\treturn dname ? dname === mention : name === mention;\n\t\t\t\t});\n\t\t\tconst reference = channel ? channel._id : mention;\n\t\t\treturn this.roomTemplate({ prefix, reference, channel, mention });\n\t\t});\n\n\tgetUserMentions(str) {\n\t\treturn (str.match(this.userMentionRegex) || []).map((match) => match.trim());\n\t}\n\n\tgetChannelMentions(str) {\n\t\treturn (str.match(this.channelMentionRegex) || []).map((match) => match.trim());\n\t}\n\n\tparse(message) {\n\t\tlet msg = (message && message.html) || '';\n\t\tif (!msg.trim()) {\n\t\t\treturn message;\n\t\t}\n\t\tmsg = this.replaceUsers(msg, message, this.me);\n\t\tmsg = this.replaceChannels(msg, message, this.me);\n\t\tmessage.html = msg;\n\t\treturn message;\n\t}\n}\n","import { MentionsParser } from '../lib/MentionsParser';\nimport './mentionLink.css';\n\nexport let instance = new MentionsParser({\n\tme: () => undefined,\n\tpattern: () => undefined,\n\tuseRealName: () => undefined,\n});\n\nexport let renderMentions = (message) => message;\n\nexport const createMentionsMessageRenderer = ({ me, pattern, useRealName }) => {\n\tinstance = new MentionsParser({\n\t\tme: () => me,\n\t\tpattern: () => pattern,\n\t\tuseRealName: () => useRealName,\n\t});\n\n\trenderMentions = (message) => instance.parse(message);\n\n\treturn (message) => instance.parse(message);\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport _ from 'underscore';\n\nimport { settings } from '../../settings';\nimport { CustomOAuth } from '../../custom-oauth';\n\nconst config = {\n\tserverURL: '',\n\ttokenPath: '/index.php/apps/oauth2/api/v1/token',\n\ttokenSentVia: 'header',\n\tauthorizePath: '/index.php/apps/oauth2/authorize',\n\tidentityPath: '/ocs/v2.php/cloud/user?format=json',\n\tscope: 'openid',\n\taddAutopublishFields: {\n\t\tforLoggedInUser: ['services.nextcloud'],\n\t\tforOtherUsers: ['services.nextcloud.name'],\n\t},\n};\n\nconst Nextcloud = new CustomOAuth('nextcloud', config);\n\nconst fillServerURL = _.debounce(\n\tMeteor.bindEnvironment(() => {\n\t\tconst nextcloudURL = settings.get('Accounts_OAuth_Nextcloud_URL');\n\t\tif (!nextcloudURL) {\n\t\t\tif (nextcloudURL === undefined) {\n\t\t\t\treturn fillServerURL();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tconfig.serverURL = nextcloudURL.trim().replace(/\\/*$/, '');\n\t\treturn Nextcloud.configure(config);\n\t}),\n\tMeteor.isServer ? 1000 : 100,\n);\n\nMeteor.startup(function () {\n\tif (Meteor.isServer) {\n\t\tsettings.get('Accounts_OAuth_Nextcloud_URL', () => fillServerURL());\n\t} else {\n\t\tTracker.autorun(function () {\n\t\t\treturn fillServerURL();\n\t\t});\n\t}\n});\n","import '../lib/common';\n","import { Meteor } from 'meteor/meteor';\n\nimport { slashCommands } from '../../utils';\n/*\n * Gimme is a named function that will replace /gimme commands\n * @param {Object} message - The message object\n */\n\nfunction Gimme(command, params, item) {\n\tif (command === 'gimme') {\n\t\tconst msg = item;\n\t\tmsg.msg = `༼ つ ◕_◕ ༽つ ${params}`;\n\t\tMeteor.call('sendMessage', msg);\n\t}\n}\n\nslashCommands.add('gimme', Gimme, {\n\tdescription: 'Slash_Gimme_Description',\n\tparams: 'your_message_optional',\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { slashCommands } from '../../utils';\n/*\n * Lenny is a named function that will replace /lenny commands\n * @param {Object} message - The message object\n */\n\nfunction LennyFace(command, params, item) {\n\tif (command === 'lennyface') {\n\t\tconst msg = item;\n\t\tmsg.msg = `${params} ( ͡° ͜ʖ ͡°)`;\n\t\tMeteor.call('sendMessage', msg);\n\t}\n}\n\nslashCommands.add('lennyface', LennyFace, {\n\tdescription: 'Slash_LennyFace_Description',\n\tparams: 'your_message_optional',\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { slashCommands } from '../../utils';\n/*\n * Shrug is a named function that will replace /shrug commands\n * @param {Object} message - The message object\n */\n\nfunction Shrug(command, params, item) {\n\tif (command === 'shrug') {\n\t\tconst msg = item;\n\t\tmsg.msg = `${params} ¯\\\\_(ツ)_/¯`;\n\t\tMeteor.call('sendMessage', msg);\n\t}\n}\n\nslashCommands.add('shrug', Shrug, {\n\tdescription: 'Slash_Shrug_Description',\n\tparams: 'your_message_optional',\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { slashCommands } from '../../utils';\n/*\n * Tableflip is a named function that will replace /Tableflip commands\n * @param {Object} message - The message object\n */\n\nfunction Tableflip(command, params, item) {\n\tif (command === 'tableflip') {\n\t\tconst msg = item;\n\t\tmsg.msg = `${params} (╯°□°）╯︵ ┻━┻`;\n\t\tMeteor.call('sendMessage', msg);\n\t}\n}\n\nslashCommands.add('tableflip', Tableflip, {\n\tdescription: 'Slash_Tableflip_Description',\n\tparams: 'your_message_optional',\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { slashCommands } from '../../utils';\n/*\n * Unflip is a named function that will replace /unflip commands\n * @param {Object} message - The message object\n */\n\nfunction Unflip(command, params, item) {\n\tif (command === 'unflip') {\n\t\tconst msg = item;\n\t\tmsg.msg = `${params} ┬─┬ ノ( ゜-゜ノ)`;\n\t\tMeteor.call('sendMessage', msg);\n\t}\n}\n\nslashCommands.add('unflip', Unflip, {\n\tdescription: 'Slash_TableUnflip_Description',\n\tparams: 'your_message_optional',\n});\n","import '../lib/gimme';\nimport '../lib/lenny';\nimport '../lib/shrug';\nimport '../lib/tableflip';\nimport '../lib/unflip';\n","import { Meteor } from 'meteor/meteor';\n\nimport { slashCommands } from '../../utils';\nimport { ChatRoom } from '../../models';\nimport { callbacks } from '../../../lib/callbacks';\nimport { hasPermission } from '../../authorization';\n\nfunction Topic(command, params, item) {\n\tif (command === 'topic') {\n\t\tif (\n\t\t\t(Meteor.isClient && hasPermission('edit-room', item.rid)) ||\n\t\t\t(Meteor.isServer && hasPermission(Meteor.userId(), 'edit-room', item.rid))\n\t\t) {\n\t\t\tMeteor.call('saveRoomSettings', item.rid, 'roomTopic', params, (err) => {\n\t\t\t\tif (err) {\n\t\t\t\t\tif (Meteor.isClient) {\n\t\t\t\t\t\tconst { handleError } = require('../../../client/lib/utils/handleError');\n\t\t\t\t\t\treturn handleError(err);\n\t\t\t\t\t}\n\t\t\t\t\tthrow err;\n\t\t\t\t}\n\n\t\t\t\tif (Meteor.isClient) {\n\t\t\t\t\tcallbacks.run('roomTopicChanged', ChatRoom.findOne(item.rid));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\nslashCommands.add('topic', Topic, {\n\tdescription: 'Slash_Topic_Description',\n\tparams: 'Slash_Topic_Params',\n\tpermission: 'edit-room',\n});\n","import '../lib/topic';\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { ServiceConfiguration } from 'meteor/service-configuration';\nimport _ from 'underscore';\n\nimport { settings } from '../../settings';\nimport { CustomOAuth } from '../../custom-oauth';\n\nconst config = {\n\tserverURL: '',\n\tidentityPath: '/oauth/me',\n\n\taddAutopublishFields: {\n\t\tforLoggedInUser: ['services.wordpress'],\n\t\tforOtherUsers: ['services.wordpress.user_login'],\n\t},\n\taccessTokenParam: 'access_token',\n};\n\nconst WordPress = new CustomOAuth('wordpress', config);\n\nconst fillSettings = _.debounce(\n\tMeteor.bindEnvironment(() => {\n\t\tconfig.serverURL = settings.get('API_Wordpress_URL');\n\t\tif (!config.serverURL) {\n\t\t\tif (config.serverURL === undefined) {\n\t\t\t\treturn fillSettings();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tdelete config.identityPath;\n\t\tdelete config.identityTokenSentVia;\n\t\tdelete config.authorizePath;\n\t\tdelete config.tokenPath;\n\t\tdelete config.scope;\n\n\t\tconst serverType = settings.get('Accounts_OAuth_Wordpress_server_type');\n\t\tswitch (serverType) {\n\t\t\tcase 'custom':\n\t\t\t\tif (settings.get('Accounts_OAuth_Wordpress_identity_path')) {\n\t\t\t\t\tconfig.identityPath = settings.get('Accounts_OAuth_Wordpress_identity_path');\n\t\t\t\t}\n\n\t\t\t\tif (settings.get('Accounts_OAuth_Wordpress_identity_token_sent_via')) {\n\t\t\t\t\tconfig.identityTokenSentVia = settings.get('Accounts_OAuth_Wordpress_identity_token_sent_via');\n\t\t\t\t}\n\n\t\t\t\tif (settings.get('Accounts_OAuth_Wordpress_token_path')) {\n\t\t\t\t\tconfig.tokenPath = settings.get('Accounts_OAuth_Wordpress_token_path');\n\t\t\t\t}\n\n\t\t\t\tif (settings.get('Accounts_OAuth_Wordpress_authorize_path')) {\n\t\t\t\t\tconfig.authorizePath = settings.get('Accounts_OAuth_Wordpress_authorize_path');\n\t\t\t\t}\n\n\t\t\t\tif (settings.get('Accounts_OAuth_Wordpress_scope')) {\n\t\t\t\t\tconfig.scope = settings.get('Accounts_OAuth_Wordpress_scope');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'wordpress-com':\n\t\t\t\tconfig.identityPath = 'https://public-api.wordpress.com/rest/v1/me';\n\t\t\t\tconfig.identityTokenSentVia = 'header';\n\t\t\t\tconfig.authorizePath = 'https://public-api.wordpress.com/oauth2/authorize';\n\t\t\t\tconfig.tokenPath = 'https://public-api.wordpress.com/oauth2/token';\n\t\t\t\tconfig.scope = 'auth';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconfig.identityPath = '/oauth/me';\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst result = WordPress.configure(config);\n\t\tif (Meteor.isServer) {\n\t\t\tconst enabled = settings.get('Accounts_OAuth_Wordpress');\n\t\t\tif (enabled) {\n\t\t\t\tServiceConfiguration.configurations.upsert(\n\t\t\t\t\t{\n\t\t\t\t\t\tservice: 'wordpress',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t$set: config,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tServiceConfiguration.configurations.remove({\n\t\t\t\t\tservice: 'wordpress',\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}),\n\tMeteor.isServer ? 1000 : 100,\n);\n\nif (Meteor.isServer) {\n\tMeteor.startup(function () {\n\t\treturn settings.watchByRegex(/(API\\_Wordpress\\_URL)?(Accounts\\_OAuth\\_Wordpress\\_)?/, () => fillSettings());\n\t});\n} else {\n\tMeteor.startup(function () {\n\t\treturn Tracker.autorun(function () {\n\t\t\treturn fillSettings();\n\t\t});\n\t});\n}\n","import '../lib/common';\nimport './wordpress-login-button.css';\n","import 'toastr/build/toastr.min.css';\nimport './main.css';\nimport './vendor/photoswipe.css';\nimport './vendor/fontello/css/fontello.css';\nimport './rocketchat.font.css';\n","export enum E2ERoomState {\n\tNO_PASSWORD_SET = 'NO_PASSWORD_SET',\n\tNOT_STARTED = 'NOT_STARTED',\n\tDISABLED = 'DISABLED',\n\tHANDSHAKE = 'HANDSHAKE',\n\tESTABLISHING = 'ESTABLISHING',\n\tCREATING_KEYS = 'CREATING_KEYS',\n\tWAITING_KEYS = 'WAITING_KEYS',\n\tKEYS_RECEIVED = 'KEYS_RECEIVED',\n\tREADY = 'READY',\n\tERROR = 'ERROR',\n}\n","import { Accounts } from 'meteor/accounts-base';\n\nimport { e2e } from './rocketchat.e2e';\n\nAccounts.onLogout(() => {\n\te2e.stopClient();\n});\n","/* eslint-disable new-cap, no-proto */\n\nimport ByteBuffer from 'bytebuffer';\n\nconst StaticArrayBufferProto = new ArrayBuffer().__proto__;\n\nexport function toString(thing) {\n\tif (typeof thing === 'string') {\n\t\treturn thing;\n\t}\n\treturn new ByteBuffer.wrap(thing).toString('binary');\n}\n\nexport function toArrayBuffer(thing) {\n\tif (thing === undefined) {\n\t\treturn undefined;\n\t}\n\tif (thing === Object(thing)) {\n\t\tif (thing.__proto__ === StaticArrayBufferProto) {\n\t\t\treturn thing;\n\t\t}\n\t}\n\n\tif (typeof thing !== 'string') {\n\t\tthrow new Error(`Tried to convert a non-string of type ${typeof thing} to an array buffer`);\n\t}\n\treturn new ByteBuffer.wrap(thing, 'binary').toArrayBuffer();\n}\n\nexport function joinVectorAndEcryptedData(vector, encryptedData) {\n\tconst cipherText = new Uint8Array(encryptedData);\n\tconst output = new Uint8Array(vector.length + cipherText.length);\n\toutput.set(vector, 0);\n\toutput.set(cipherText, vector.length);\n\treturn output;\n}\n\nexport function splitVectorAndEcryptedData(cipherText) {\n\tconst vector = cipherText.slice(0, 16);\n\tconst encryptedData = cipherText.slice(16);\n\n\treturn [vector, encryptedData];\n}\n\nexport async function encryptRSA(key, data) {\n\treturn crypto.subtle.encrypt({ name: 'RSA-OAEP' }, key, data);\n}\n\nexport async function encryptAES(vector, key, data) {\n\treturn crypto.subtle.encrypt({ name: 'AES-CBC', iv: vector }, key, data);\n}\n\nexport async function decryptRSA(key, data) {\n\treturn crypto.subtle.decrypt({ name: 'RSA-OAEP' }, key, data);\n}\n\nexport async function decryptAES(vector, key, data) {\n\treturn crypto.subtle.decrypt({ name: 'AES-CBC', iv: vector }, key, data);\n}\n\nexport async function generateAESKey() {\n\treturn crypto.subtle.generateKey({ name: 'AES-CBC', length: 128 }, true, ['encrypt', 'decrypt']);\n}\n\nexport async function generateRSAKey() {\n\treturn crypto.subtle.generateKey(\n\t\t{\n\t\t\tname: 'RSA-OAEP',\n\t\t\tmodulusLength: 2048,\n\t\t\tpublicExponent: new Uint8Array([0x01, 0x00, 0x01]),\n\t\t\thash: { name: 'SHA-256' },\n\t\t},\n\t\ttrue,\n\t\t['encrypt', 'decrypt'],\n\t);\n}\n\nexport async function exportJWKKey(key) {\n\treturn crypto.subtle.exportKey('jwk', key);\n}\n\nexport async function importRSAKey(keyData, keyUsages = ['encrypt', 'decrypt']) {\n\treturn crypto.subtle.importKey(\n\t\t'jwk',\n\t\tkeyData,\n\t\t{\n\t\t\tname: 'RSA-OAEP',\n\t\t\tmodulusLength: 2048,\n\t\t\tpublicExponent: new Uint8Array([0x01, 0x00, 0x01]),\n\t\t\thash: { name: 'SHA-256' },\n\t\t},\n\t\ttrue,\n\t\tkeyUsages,\n\t);\n}\n\nexport async function importAESKey(keyData, keyUsages = ['encrypt', 'decrypt']) {\n\treturn crypto.subtle.importKey('jwk', keyData, { name: 'AES-CBC' }, true, keyUsages);\n}\n\nexport async function importRawKey(keyData, keyUsages = ['deriveKey']) {\n\treturn crypto.subtle.importKey('raw', keyData, { name: 'PBKDF2' }, false, keyUsages);\n}\n\nexport async function deriveKey(salt, baseKey, keyUsages = ['encrypt', 'decrypt']) {\n\tconst iterations = 1000;\n\tconst hash = 'SHA-256';\n\n\treturn crypto.subtle.deriveKey({ name: 'PBKDF2', salt, iterations, hash }, baseKey, { name: 'AES-CBC', length: 256 }, true, keyUsages);\n}\n\nexport async function readFileAsArrayBuffer(file) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst reader = new FileReader();\n\t\treader.onload = function (evt) {\n\t\t\tresolve(evt.target.result);\n\t\t};\n\t\treader.onerror = function (evt) {\n\t\t\treject(evt);\n\t\t};\n\t\treader.readAsArrayBuffer(file);\n\t});\n}\n\nexport class Deferred {\n\tconstructor() {\n\t\tconst p = new Promise((resolve, reject) => {\n\t\t\tthis.resolve = resolve;\n\t\t\tthis.reject = reject;\n\t\t});\n\n\t\tp.resolve = this.resolve;\n\t\tp.reject = this.reject;\n\n\t\treturn p;\n\t}\n}\n","import './stylesheets/e2e.css';\n\nexport * from './rocketchat.e2e';\n","import { getConfig } from '../../../client/lib/utils/getConfig';\n\nlet debug: boolean | undefined = undefined;\n\nconst isDebugEnabled = (): boolean => {\n\tif (debug === undefined) {\n\t\tdebug = getConfig('debug') === 'true' || getConfig('debug-e2e') === 'true';\n\t}\n\n\treturn debug;\n};\n\nexport const log = (context: string, ...msg: unknown[]): void => {\n\tisDebugEnabled() && console.log(`[${context}]`, ...msg);\n};\n\nexport const logError = (context: string, ...msg: unknown[]): void => {\n\tisDebugEnabled() && console.error(`[${context}]`, ...msg);\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Random } from 'meteor/random';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { EJSON } from 'meteor/ejson';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { Emitter } from '@rocket.chat/emitter';\n\nimport { E2ERoom } from './rocketchat.e2e.room';\nimport {\n\ttoString,\n\ttoArrayBuffer,\n\tjoinVectorAndEcryptedData,\n\tsplitVectorAndEcryptedData,\n\tencryptAES,\n\tdecryptAES,\n\tgenerateRSAKey,\n\texportJWKKey,\n\timportRSAKey,\n\timportRawKey,\n\tderiveKey,\n} from './helper';\nimport * as banners from '../../../client/lib/banners';\nimport { Rooms, Subscriptions, Messages } from '../../models/client';\nimport './events.js';\nimport './tabbar';\nimport { log, logError } from './logger';\nimport { waitUntilFind } from '../../../client/lib/utils/waitUntilFind';\nimport { imperativeModal } from '../../../client/lib/imperativeModal';\nimport SaveE2EPasswordModal from '../../../client/views/e2e/SaveE2EPasswordModal';\nimport EnterE2EPasswordModal from '../../../client/views/e2e/EnterE2EPasswordModal';\nimport { call } from '../../../client/lib/utils/call';\n\nlet failedToDecodeKey = false;\n\nclass E2E extends Emitter {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.started = false;\n\t\tthis.enabled = new ReactiveVar(false);\n\t\tthis._ready = new ReactiveVar(false);\n\t\tthis.instancesByRoomId = {};\n\n\t\tthis.on('ready', () => {\n\t\t\tthis._ready.set(true);\n\t\t\tthis.log('startClient -> Done');\n\t\t\tthis.log('decryptSubscriptions');\n\n\t\t\tthis.decryptSubscriptions();\n\t\t\tthis.log('decryptSubscriptions -> Done');\n\t\t});\n\t}\n\n\tlog(...msg) {\n\t\tlog('E2E', ...msg);\n\t}\n\n\terror(...msg) {\n\t\tlogError('E2E', ...msg);\n\t}\n\n\tisEnabled() {\n\t\treturn this.enabled.get();\n\t}\n\n\tisReady() {\n\t\treturn this.enabled.get() && this._ready.get();\n\t}\n\n\tasync getInstanceByRoomId(rid) {\n\t\tconst room = await waitUntilFind(() => Rooms.findOne({ _id: rid }));\n\n\t\tif (room.t !== 'd' && room.t !== 'p') {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (room.encrypted !== true && !room.e2eKeyId) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.instancesByRoomId[rid]) {\n\t\t\tthis.instancesByRoomId[rid] = new E2ERoom(Meteor.userId(), rid, room.t);\n\t\t}\n\n\t\treturn this.instancesByRoomId[rid];\n\t}\n\n\tremoveInstanceByRoomId(rid) {\n\t\tdelete this.instancesByRoomId[rid];\n\t}\n\n\tasync startClient() {\n\t\tif (this.started) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.log('startClient -> STARTED');\n\n\t\tthis.started = true;\n\t\tlet public_key = Meteor._localStorage.getItem('public_key');\n\t\tlet private_key = Meteor._localStorage.getItem('private_key');\n\n\t\tawait this.loadKeysFromDB();\n\n\t\tif (!public_key && this.db_public_key) {\n\t\t\tpublic_key = this.db_public_key;\n\t\t}\n\n\t\tif (!private_key && this.db_private_key) {\n\t\t\ttry {\n\t\t\t\tprivate_key = await this.decodePrivateKey(this.db_private_key);\n\t\t\t} catch (error) {\n\t\t\t\tthis.started = false;\n\t\t\t\tfailedToDecodeKey = true;\n\t\t\t\tthis.openAlert({\n\t\t\t\t\ttitle: TAPi18n.__(\"Wasn't possible to decode your encryption key to be imported.\"),\n\t\t\t\t\thtml: '<div>Your encryption password seems wrong. Click here to try again.</div>',\n\t\t\t\t\tmodifiers: ['large', 'danger'],\n\t\t\t\t\tclosable: true,\n\t\t\t\t\ticon: 'key',\n\t\t\t\t\taction: () => {\n\t\t\t\t\t\tthis.startClient();\n\t\t\t\t\t\tthis.closeAlert();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (public_key && private_key) {\n\t\t\tawait this.loadKeys({ public_key, private_key });\n\t\t} else {\n\t\t\tawait this.createAndLoadKeys();\n\t\t}\n\n\t\t// TODO: Split in 2 methods to persist keys\n\t\tif (!this.db_public_key || !this.db_private_key) {\n\t\t\tawait call('e2e.setUserPublicAndPrivateKeys', {\n\t\t\t\tpublic_key: Meteor._localStorage.getItem('public_key'),\n\t\t\t\tprivate_key: await this.encodePrivateKey(Meteor._localStorage.getItem('private_key'), this.createRandomPassword()),\n\t\t\t});\n\t\t}\n\n\t\tconst randomPassword = Meteor._localStorage.getItem('e2e.randomPassword');\n\t\tif (randomPassword) {\n\t\t\tconst passwordRevealText = TAPi18n.__('E2E_password_reveal_text', {\n\t\t\t\tpostProcess: 'sprintf',\n\t\t\t\tsprintf: [randomPassword],\n\t\t\t});\n\n\t\t\tthis.openAlert({\n\t\t\t\ttitle: TAPi18n.__('Save_Your_Encryption_Password'),\n\t\t\t\thtml: TAPi18n.__('Click_here_to_view_and_copy_your_password'),\n\t\t\t\tmodifiers: ['large'],\n\t\t\t\tclosable: false,\n\t\t\t\ticon: 'key',\n\t\t\t\taction: () => {\n\t\t\t\t\timperativeModal.open({\n\t\t\t\t\t\tcomponent: SaveE2EPasswordModal,\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tpasswordRevealText,\n\t\t\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t\t\t\tonCancel: () => {\n\t\t\t\t\t\t\t\tthis.closeAlert();\n\t\t\t\t\t\t\t\timperativeModal.close();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonConfirm: () => {\n\t\t\t\t\t\t\t\tMeteor._localStorage.removeItem('e2e.randomPassword');\n\t\t\t\t\t\t\t\tthis.closeAlert();\n\t\t\t\t\t\t\t\timperativeModal.close();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tthis.emit('ready');\n\t}\n\n\tasync stopClient() {\n\t\tthis.log('-> Stop Client');\n\t\tthis.closeAlert();\n\n\t\tMeteor._localStorage.removeItem('public_key');\n\t\tMeteor._localStorage.removeItem('private_key');\n\t\tthis.instancesByRoomId = {};\n\t\tthis.privateKey = null;\n\t\tthis.enabled.set(false);\n\t\tthis._ready.set(false);\n\t\tthis.started = false;\n\t}\n\n\tasync changePassword(newPassword) {\n\t\tawait call('e2e.setUserPublicAndPrivateKeys', {\n\t\t\tpublic_key: Meteor._localStorage.getItem('public_key'),\n\t\t\tprivate_key: await this.encodePrivateKey(Meteor._localStorage.getItem('private_key'), newPassword),\n\t\t});\n\n\t\tif (Meteor._localStorage.getItem('e2e.randomPassword')) {\n\t\t\tMeteor._localStorage.setItem('e2e.randomPassword', newPassword);\n\t\t}\n\t}\n\n\tasync loadKeysFromDB() {\n\t\ttry {\n\t\t\tconst { public_key, private_key } = await call('e2e.fetchMyKeys');\n\n\t\t\tthis.db_public_key = public_key;\n\t\t\tthis.db_private_key = private_key;\n\t\t} catch (error) {\n\t\t\treturn this.error('Error fetching RSA keys: ', error);\n\t\t}\n\t}\n\n\tasync loadKeys({ public_key, private_key }) {\n\t\tMeteor._localStorage.setItem('public_key', public_key);\n\n\t\ttry {\n\t\t\tthis.privateKey = await importRSAKey(EJSON.parse(private_key), ['decrypt']);\n\n\t\t\tMeteor._localStorage.setItem('private_key', private_key);\n\t\t} catch (error) {\n\t\t\treturn this.error('Error importing private key: ', error);\n\t\t}\n\t}\n\n\tasync createAndLoadKeys() {\n\t\t// Could not obtain public-private keypair from server.\n\t\tlet key;\n\t\ttry {\n\t\t\tkey = await generateRSAKey();\n\t\t\tthis.privateKey = key.privateKey;\n\t\t} catch (error) {\n\t\t\treturn this.error('Error generating key: ', error);\n\t\t}\n\n\t\ttry {\n\t\t\tconst publicKey = await exportJWKKey(key.publicKey);\n\n\t\t\tMeteor._localStorage.setItem('public_key', JSON.stringify(publicKey));\n\t\t} catch (error) {\n\t\t\treturn this.error('Error exporting public key: ', error);\n\t\t}\n\n\t\ttry {\n\t\t\tconst privateKey = await exportJWKKey(key.privateKey);\n\n\t\t\tMeteor._localStorage.setItem('private_key', JSON.stringify(privateKey));\n\t\t} catch (error) {\n\t\t\treturn this.error('Error exporting private key: ', error);\n\t\t}\n\n\t\tthis.requestSubscriptionKeys();\n\t}\n\n\tasync requestSubscriptionKeys() {\n\t\tcall('e2e.requestSubscriptionKeys');\n\t}\n\n\tcreateRandomPassword() {\n\t\tconst randomPassword = `${Random.id(3)}-${Random.id(3)}-${Random.id(3)}`.toLowerCase();\n\t\tMeteor._localStorage.setItem('e2e.randomPassword', randomPassword);\n\t\treturn randomPassword;\n\t}\n\n\tasync encodePrivateKey(private_key, password) {\n\t\tconst masterKey = await this.getMasterKey(password);\n\n\t\tconst vector = crypto.getRandomValues(new Uint8Array(16));\n\t\ttry {\n\t\t\tconst encodedPrivateKey = await encryptAES(vector, masterKey, toArrayBuffer(private_key));\n\n\t\t\treturn EJSON.stringify(joinVectorAndEcryptedData(vector, encodedPrivateKey));\n\t\t} catch (error) {\n\t\t\treturn this.error('Error encrypting encodedPrivateKey: ', error);\n\t\t}\n\t}\n\n\tasync getMasterKey(password) {\n\t\tif (password == null) {\n\t\t\talert('You should provide a password');\n\t\t}\n\n\t\t// First, create a PBKDF2 \"key\" containing the password\n\t\tlet baseKey;\n\t\ttry {\n\t\t\tbaseKey = await importRawKey(toArrayBuffer(password));\n\t\t} catch (error) {\n\t\t\treturn this.error('Error creating a key based on user password: ', error);\n\t\t}\n\n\t\t// Derive a key from the password\n\t\ttry {\n\t\t\treturn await deriveKey(toArrayBuffer(Meteor.userId()), baseKey);\n\t\t} catch (error) {\n\t\t\treturn this.error('Error deriving baseKey: ', error);\n\t\t}\n\t}\n\n\tasync requestPassword() {\n\t\treturn new Promise((resolve) => {\n\t\t\tconst showModal = () => {\n\t\t\t\timperativeModal.open({\n\t\t\t\t\tcomponent: EnterE2EPasswordModal,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t\t\tonCancel: () => {\n\t\t\t\t\t\t\tfailedToDecodeKey = false;\n\t\t\t\t\t\t\tthis.closeAlert();\n\t\t\t\t\t\t\timperativeModal.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonConfirm: (password) => {\n\t\t\t\t\t\t\tresolve(password);\n\t\t\t\t\t\t\tthis.closeAlert();\n\t\t\t\t\t\t\timperativeModal.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tconst showAlert = () => {\n\t\t\t\tthis.openAlert({\n\t\t\t\t\ttitle: TAPi18n.__('Enter_your_E2E_password'),\n\t\t\t\t\thtml: TAPi18n.__('Click_here_to_enter_your_encryption_password'),\n\t\t\t\t\tmodifiers: ['large'],\n\t\t\t\t\tclosable: false,\n\t\t\t\t\ticon: 'key',\n\t\t\t\t\taction() {\n\t\t\t\t\t\tshowModal();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tif (failedToDecodeKey) {\n\t\t\t\tshowModal();\n\t\t\t} else {\n\t\t\t\tshowAlert();\n\t\t\t}\n\t\t});\n\t}\n\n\tasync decodePrivateKey(private_key) {\n\t\tconst password = await this.requestPassword();\n\n\t\tconst masterKey = await this.getMasterKey(password);\n\n\t\tconst [vector, cipherText] = splitVectorAndEcryptedData(EJSON.parse(private_key));\n\n\t\ttry {\n\t\t\tconst privKey = await decryptAES(vector, masterKey, cipherText);\n\t\t\treturn toString(privKey);\n\t\t} catch (error) {\n\t\t\tthrow new Error('E2E -> Error decrypting private key');\n\t\t}\n\t}\n\n\tasync decryptMessage(message) {\n\t\tif (message.t !== 'e2e' || message.e2e === 'done') {\n\t\t\treturn message;\n\t\t}\n\n\t\tconst e2eRoom = await this.getInstanceByRoomId(message.rid);\n\n\t\tif (!e2eRoom) {\n\t\t\treturn message;\n\t\t}\n\n\t\tconst data = await e2eRoom.decrypt(message.msg);\n\n\t\tif (!data) {\n\t\t\treturn message;\n\t\t}\n\n\t\treturn {\n\t\t\t...message,\n\t\t\tmsg: data.text,\n\t\t\te2e: 'done',\n\t\t};\n\t}\n\n\tasync decryptPendingMessages() {\n\t\treturn Messages.find({ t: 'e2e', e2e: 'pending' }).forEach(async ({ _id, ...msg }) => {\n\t\t\tMessages.direct.update({ _id }, await this.decryptMessage(msg));\n\t\t});\n\t}\n\n\tasync decryptSubscription(rid) {\n\t\tconst e2eRoom = await this.getInstanceByRoomId(rid);\n\t\tthis.log('decryptSubscription ->', rid);\n\t\te2eRoom?.decryptSubscription();\n\t}\n\n\tasync decryptSubscriptions() {\n\t\tSubscriptions.find({\n\t\t\tencrypted: true,\n\t\t}).forEach((room) => this.decryptSubscription(room._id));\n\t}\n\n\topenAlert(config) {\n\t\tbanners.open({ id: 'e2e', ...config });\n\t}\n\n\tcloseAlert() {\n\t\tbanners.closeById('e2e');\n\t}\n}\n\nexport const e2e = new E2E();\n","import _ from 'underscore';\nimport { Base64 } from 'meteor/base64';\nimport { EJSON } from 'meteor/ejson';\nimport { Random } from 'meteor/random';\nimport { Session } from 'meteor/session';\nimport { TimeSync } from 'meteor/mizzao:timesync';\nimport { Emitter } from '@rocket.chat/emitter';\n\nimport { e2e } from './rocketchat.e2e';\nimport {\n\ttoString,\n\ttoArrayBuffer,\n\tjoinVectorAndEcryptedData,\n\tsplitVectorAndEcryptedData,\n\tencryptRSA,\n\tencryptAES,\n\tdecryptRSA,\n\tdecryptAES,\n\tgenerateAESKey,\n\texportJWKKey,\n\timportAESKey,\n\timportRSAKey,\n\treadFileAsArrayBuffer,\n} from './helper';\nimport { Notifications } from '../../notifications/client';\nimport { Rooms, Subscriptions, Messages } from '../../models/client';\nimport { roomTypes, RoomSettingsEnum } from '../../utils/client';\nimport { log, logError } from './logger';\nimport { E2ERoomState } from './E2ERoomState';\nimport { call } from '../../../client/lib/utils/call';\n\nconst KEY_ID = Symbol('keyID');\nconst PAUSED = Symbol('PAUSED');\n\nconst permitedMutations = {\n\t[E2ERoomState.NOT_STARTED]: [E2ERoomState.ESTABLISHING, E2ERoomState.DISABLED, E2ERoomState.KEYS_RECEIVED],\n\t[E2ERoomState.READY]: [E2ERoomState.DISABLED],\n\t[E2ERoomState.ERROR]: [E2ERoomState.KEYS_RECEIVED, E2ERoomState.NOT_STARTED],\n\t[E2ERoomState.WAITING_KEYS]: [E2ERoomState.KEYS_RECEIVED, E2ERoomState.ERROR, E2ERoomState.DISABLED],\n\t[E2ERoomState.ESTABLISHING]: [\n\t\tE2ERoomState.READY,\n\t\tE2ERoomState.KEYS_RECEIVED,\n\t\tE2ERoomState.ERROR,\n\t\tE2ERoomState.DISABLED,\n\t\tE2ERoomState.WAITING_KEYS,\n\t],\n};\n\nconst filterMutation = (currentState, nextState) => {\n\tif (currentState === nextState) {\n\t\treturn nextState === E2ERoomState.ERROR;\n\t}\n\n\tif (!(currentState in permitedMutations)) {\n\t\treturn nextState;\n\t}\n\n\tif (permitedMutations[currentState].includes(nextState)) {\n\t\treturn nextState;\n\t}\n\n\treturn false;\n};\n\nexport class E2ERoom extends Emitter {\n\tstate = undefined;\n\n\t[PAUSED] = undefined;\n\n\tconstructor(userId, roomId, t) {\n\t\tsuper();\n\n\t\tthis.userId = userId;\n\t\tthis.roomId = roomId;\n\t\tthis.typeOfRoom = t;\n\n\t\tthis.once(E2ERoomState.READY, () => this.decryptPendingMessages());\n\t\tthis.once(E2ERoomState.READY, () => this.decryptSubscription());\n\t\tthis.on('STATE_CHANGED', (prev) => {\n\t\t\tif (this.roomId === Session.get('openedRoom')) {\n\t\t\t\tthis.log(`[PREV: ${prev}]`, 'State CHANGED');\n\t\t\t}\n\t\t});\n\t\tthis.on('STATE_CHANGED', () => this.handshake());\n\n\t\tthis.setState(E2ERoomState.NOT_STARTED);\n\t}\n\n\tlog(...msg) {\n\t\tlog(`E2E ROOM { state: ${this.state}, rid: ${this.roomId} }`, ...msg);\n\t}\n\n\terror(...msg) {\n\t\tlogError(`E2E ROOM { state: ${this.state}, rid: ${this.roomId} }`, ...msg);\n\t}\n\n\tsetState(requestedState) {\n\t\tconst currentState = this.state;\n\t\tconst nextState = filterMutation(currentState, requestedState);\n\n\t\tif (!nextState) {\n\t\t\tthis.error(`invalid state ${currentState} -> ${requestedState}`);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.state = nextState;\n\t\tthis.log(currentState, '->', nextState);\n\t\tthis.emit('STATE_CHANGED', currentState, nextState, this);\n\t\tthis.emit(nextState, this);\n\t}\n\n\tisReady() {\n\t\treturn this.state === E2ERoomState.READY;\n\t}\n\n\tisDisabled() {\n\t\treturn this.state === E2ERoomState.DISABLED;\n\t}\n\n\tenable() {\n\t\tif (this.state === E2ERoomState.READY) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState(E2ERoomState.READY);\n\t}\n\n\tdisable() {\n\t\tthis.setState(E2ERoomState.DISABLED);\n\t}\n\n\tpause() {\n\t\tthis.log('PAUSED', this[PAUSED], '->', true);\n\t\tthis[PAUSED] = true;\n\t\tthis.emit('PAUSED', true);\n\t}\n\n\tresume() {\n\t\tthis.log('PAUSED', this[PAUSED], '->', false);\n\t\tthis[PAUSED] = false;\n\t\tthis.emit('PAUSED', false);\n\t}\n\n\tkeyReceived() {\n\t\tthis.setState(E2ERoomState.KEYS_RECEIVED);\n\t}\n\n\tasync shouldConvertSentMessages() {\n\t\tif (!this.isReady() || this[PAUSED]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this[PAUSED] === undefined) {\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tthis.once('PAUSED', resolve);\n\t\t\t});\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tshouldConvertReceivedMessages() {\n\t\treturn this.isReady();\n\t}\n\n\tisWaitingKeys() {\n\t\treturn this.state === E2ERoomState.WAITING_KEYS;\n\t}\n\n\tget keyID() {\n\t\treturn this[KEY_ID];\n\t}\n\n\tset keyID(keyID) {\n\t\tthis[KEY_ID] = keyID;\n\t}\n\n\tasync decryptSubscription() {\n\t\tconst subscription = Subscriptions.findOne({ rid: this.roomId });\n\n\t\tconst data = await (subscription.lastMessage?.msg && this.decrypt(subscription.lastMessage.msg));\n\t\tif (!data?.text) {\n\t\t\tthis.log('decryptSubscriptions nothing to do');\n\t\t\treturn;\n\t\t}\n\n\t\tSubscriptions.direct.update(\n\t\t\t{\n\t\t\t\t_id: subscription._id,\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\t'lastMessage.msg': data.text,\n\t\t\t\t\t'lastMessage.e2e': 'done',\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t\tthis.log('decryptSubscriptions Done');\n\t}\n\n\tasync decryptPendingMessages() {\n\t\treturn Messages.find({ rid: this.roomId, t: 'e2e', e2e: 'pending' }).forEach(async ({ _id, ...msg }) => {\n\t\t\tMessages.direct.update({ _id }, await this.decryptMessage(msg));\n\t\t});\n\t}\n\n\t// Initiates E2E Encryption\n\tasync handshake() {\n\t\tif (this.state !== E2ERoomState.KEYS_RECEIVED && this.state !== E2ERoomState.NOT_STARTED) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState(E2ERoomState.ESTABLISHING);\n\n\t\ttry {\n\t\t\tconst groupKey = Subscriptions.findOne({ rid: this.roomId }).E2EKey;\n\t\t\tif (groupKey) {\n\t\t\t\tawait this.importGroupKey(groupKey);\n\t\t\t\tthis.setState(E2ERoomState.READY);\n\t\t\t\treturn;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthis.setState(E2ERoomState.ERROR);\n\t\t\tthis.error('Error fetching group key: ', error);\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst room = Rooms.findOne({ _id: this.roomId });\n\t\t\tif (!room.e2eKeyId) {\n\t\t\t\t// TODO CHECK_PERMISSION\n\t\t\t\tthis.setState(E2ERoomState.CREATING_KEYS);\n\t\t\t\tawait this.createGroupKey();\n\t\t\t\tthis.setState(E2ERoomState.READY);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.setState(E2ERoomState.WAITING_KEYS);\n\t\t\tthis.log('Requesting room key');\n\t\t\tNotifications.notifyUsersOfRoom(this.roomId, 'e2ekeyRequest', this.roomId, room.e2eKeyId);\n\t\t} catch (error) {\n\t\t\t// this.error = error;\n\t\t\tthis.setState(E2ERoomState.ERROR);\n\t\t}\n\t}\n\n\tisSupportedRoomType(type) {\n\t\treturn roomTypes.getConfig(type).allowRoomSettingChange({}, RoomSettingsEnum.E2E);\n\t}\n\n\tasync importGroupKey(groupKey) {\n\t\tthis.log('Importing room key ->', this.roomId);\n\t\t// Get existing group key\n\t\t// const keyID = groupKey.slice(0, 12);\n\t\tgroupKey = groupKey.slice(12);\n\t\tgroupKey = Base64.decode(groupKey);\n\n\t\t// Decrypt obtained encrypted session key\n\t\ttry {\n\t\t\tconst decryptedKey = await decryptRSA(e2e.privateKey, groupKey);\n\t\t\tthis.sessionKeyExportedString = toString(decryptedKey);\n\t\t} catch (error) {\n\t\t\treturn this.error('Error decrypting group key: ', error);\n\t\t}\n\n\t\tthis.keyID = Base64.encode(this.sessionKeyExportedString).slice(0, 12);\n\n\t\t// Import session key for use.\n\t\ttry {\n\t\t\tconst key = await importAESKey(JSON.parse(this.sessionKeyExportedString));\n\t\t\t// Key has been obtained. E2E is now in session.\n\t\t\tthis.groupSessionKey = key;\n\t\t} catch (error) {\n\t\t\treturn this.error('Error importing group key: ', error);\n\t\t}\n\t}\n\n\tasync createGroupKey() {\n\t\tthis.log('Creating room key');\n\t\t// Create group key\n\t\ttry {\n\t\t\tthis.groupSessionKey = await generateAESKey();\n\t\t} catch (error) {\n\t\t\tconsole.error('Error generating group key: ', error);\n\t\t\tthrow error;\n\t\t}\n\n\t\ttry {\n\t\t\tconst sessionKeyExported = await exportJWKKey(this.groupSessionKey);\n\t\t\tthis.sessionKeyExportedString = JSON.stringify(sessionKeyExported);\n\t\t\tthis.keyID = Base64.encode(this.sessionKeyExportedString).slice(0, 12);\n\n\t\t\tawait call('e2e.setRoomKeyID', this.roomId, this.keyID);\n\t\t\tawait this.encryptKeyForOtherParticipants();\n\t\t} catch (error) {\n\t\t\tthis.error('Error exporting group key: ', error);\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\tasync encryptKeyForOtherParticipants() {\n\t\t// Encrypt generated session key for every user in room and publish to subscription model.\n\t\ttry {\n\t\t\tconst { users } = await call('e2e.getUsersOfRoomWithoutKey', this.roomId);\n\t\t\tusers.forEach((user) => this.encryptForParticipant(user));\n\t\t} catch (error) {\n\t\t\treturn this.error('Error getting room users: ', error);\n\t\t}\n\t}\n\n\tasync encryptForParticipant(user) {\n\t\tlet userKey;\n\t\ttry {\n\t\t\tuserKey = await importRSAKey(JSON.parse(user.e2e.public_key), ['encrypt']);\n\t\t} catch (error) {\n\t\t\treturn this.error('Error importing user key: ', error);\n\t\t}\n\t\t// const vector = crypto.getRandomValues(new Uint8Array(16));\n\n\t\t// Encrypt session key for this user with his/her public key\n\t\ttry {\n\t\t\tconst encryptedUserKey = await encryptRSA(userKey, toArrayBuffer(this.sessionKeyExportedString));\n\t\t\t// Key has been encrypted. Publish to that user's subscription model for this room.\n\t\t\tawait call('e2e.updateGroupKey', this.roomId, user._id, this.keyID + Base64.encode(new Uint8Array(encryptedUserKey)));\n\t\t} catch (error) {\n\t\t\treturn this.error('Error encrypting user key: ', error);\n\t\t}\n\t}\n\n\t// Encrypts files before upload. I/O is in arraybuffers.\n\tasync encryptFile(file) {\n\t\tif (!this.isSupportedRoomType(this.typeOfRoom)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst fileArrayBuffer = await readFileAsArrayBuffer(file);\n\n\t\tconst vector = crypto.getRandomValues(new Uint8Array(16));\n\t\tlet result;\n\t\ttry {\n\t\t\tresult = await encryptAES(vector, this.groupSessionKey, fileArrayBuffer);\n\t\t} catch (error) {\n\t\t\treturn this.error('Error encrypting group key: ', error);\n\t\t}\n\n\t\tconst output = joinVectorAndEcryptedData(vector, result);\n\n\t\tconst encryptedFile = new File([toArrayBuffer(EJSON.stringify(output))], file.name);\n\n\t\treturn encryptedFile;\n\t}\n\n\t// Decrypt uploaded encrypted files. I/O is in arraybuffers.\n\tasync decryptFile(message) {\n\t\tif (message[0] !== '{') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst [vector, cipherText] = splitVectorAndEcryptedData(EJSON.parse(message));\n\n\t\ttry {\n\t\t\treturn await decryptAES(vector, this.groupSessionKey, cipherText);\n\t\t} catch (error) {\n\t\t\tthis.error('Error decrypting file: ', error);\n\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t// Encrypts messages\n\tasync encryptText(data) {\n\t\tif (!_.isObject(data)) {\n\t\t\tdata = new TextEncoder('UTF-8').encode(EJSON.stringify({ text: data, ack: Random.id((Random.fraction() + 1) * 20) }));\n\t\t}\n\n\t\tif (!this.isSupportedRoomType(this.typeOfRoom)) {\n\t\t\treturn data;\n\t\t}\n\n\t\tconst vector = crypto.getRandomValues(new Uint8Array(16));\n\t\tlet result;\n\t\ttry {\n\t\t\tresult = await encryptAES(vector, this.groupSessionKey, data);\n\t\t} catch (error) {\n\t\t\treturn this.error('Error encrypting message: ', error);\n\t\t}\n\n\t\treturn this.keyID + Base64.encode(joinVectorAndEcryptedData(vector, result));\n\t}\n\n\t// Helper function for encryption of messages\n\tencrypt(message) {\n\t\tlet ts;\n\t\tif (isNaN(TimeSync.serverOffset())) {\n\t\t\tts = new Date();\n\t\t} else {\n\t\t\tts = new Date(Date.now() + TimeSync.serverOffset());\n\t\t}\n\n\t\tconst data = new TextEncoder('UTF-8').encode(\n\t\t\tEJSON.stringify({\n\t\t\t\t_id: message._id,\n\t\t\t\ttext: message.msg,\n\t\t\t\tuserId: this.userId,\n\t\t\t\tts,\n\t\t\t}),\n\t\t);\n\n\t\treturn this.encryptText(data);\n\t}\n\n\t// Decrypt messages\n\n\tasync decryptMessage(message) {\n\t\tif (message.t !== 'e2e' || message.e2e === 'done') {\n\t\t\treturn message;\n\t\t}\n\n\t\tconst data = await this.decrypt(message.msg);\n\n\t\tif (!data?.text) {\n\t\t\treturn message;\n\t\t}\n\n\t\treturn {\n\t\t\t...message,\n\t\t\tmsg: data.text,\n\t\t\te2e: 'done',\n\t\t};\n\t}\n\n\tasync decrypt(message) {\n\t\tif (!this.isSupportedRoomType(this.typeOfRoom)) {\n\t\t\treturn message;\n\t\t}\n\n\t\tconst keyID = message.slice(0, 12);\n\n\t\tif (keyID !== this.keyID) {\n\t\t\treturn message;\n\t\t}\n\n\t\tmessage = message.slice(12);\n\n\t\tconst [vector, cipherText] = splitVectorAndEcryptedData(Base64.decode(message));\n\n\t\ttry {\n\t\t\tconst result = await decryptAES(vector, this.groupSessionKey, cipherText);\n\t\t\treturn EJSON.parse(new TextDecoder('UTF-8').decode(new Uint8Array(result)));\n\t\t} catch (error) {\n\t\t\treturn this.error('Error decrypting message: ', error, message);\n\t\t}\n\t}\n\n\tprovideKeyToUser(keyId) {\n\t\tif (this.keyID !== keyId) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.encryptKeyForOtherParticipants();\n\t}\n}\n","import { useMemo, useCallback } from 'react';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\n\nimport { addAction } from '../../../client/views/room/lib/Toolbox';\nimport { useSetting } from '../../../client/contexts/SettingsContext';\nimport { usePermission } from '../../../client/contexts/AuthorizationContext';\nimport { useMethod } from '../../../client/contexts/ServerContext';\nimport { useReactiveValue } from '../../../client/hooks/useReactiveValue';\nimport { e2e } from './rocketchat.e2e';\n\naddAction('e2e', ({ room }) => {\n\tconst e2eEnabled = useSetting('E2E_Enable');\n\tconst e2eReady = useReactiveValue(useCallback(() => e2e.isReady(), [])) || room.encrypted;\n\tconst canToggleE2e = usePermission('toggle-room-e2e-encryption', room._id);\n\tconst canEditRoom = usePermission('edit-room', room._id);\n\tconst hasPermission = (room.t === 'd' || (canEditRoom && canToggleE2e)) && e2eReady;\n\n\tconst toggleE2E = useMethod('saveRoomSettings');\n\n\tconst action = useMutableCallback(() => {\n\t\ttoggleE2E(room._id, 'encrypted', !room.encrypted);\n\t});\n\n\tconst enabledOnRoom = !!room.encrypted;\n\n\treturn useMemo(\n\t\t() =>\n\t\t\te2eEnabled && hasPermission\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['direct', 'direct_multiple', 'group', 'team'],\n\t\t\t\t\t\tid: 'e2e',\n\t\t\t\t\t\ttitle: enabledOnRoom ? 'E2E_disable' : 'E2E_enable',\n\t\t\t\t\t\ticon: 'key',\n\t\t\t\t\t\torder: 13,\n\t\t\t\t\t\taction,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[action, e2eEnabled, enabledOnRoom, hasPermission],\n\t);\n});\n","import { Base } from './_Base';\n\nexport class Avatars extends Base {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._initModel('avatars');\n\t}\n}\n\nexport default new Avatars();\n","import { Mongo } from 'meteor/mongo';\n\nexport const CachedChannelList = new Mongo.Collection(null);\n","import { CachedCollection } from '../../../ui-cached-collection';\n\nexport const CachedChatRoom = new CachedCollection({ name: 'rooms' });\n","import { CachedCollection } from '../../../ui-cached-collection';\n\nexport const CachedChatSubscription = new CachedCollection({ name: 'subscriptions' });\n","import { Mongo } from 'meteor/mongo';\n\nexport const CachedUserList = new Mongo.Collection(null);\n","import { Mongo } from 'meteor/mongo';\n\nexport const ChatMessage = new Mongo.Collection(null);\n\nChatMessage.setReactions = function (messageId, reactions) {\n\treturn this.update({ _id: messageId }, { $set: { reactions } });\n};\n\nChatMessage.unsetReactions = function (messageId) {\n\treturn this.update({ _id: messageId }, { $unset: { reactions: 1 } });\n};\n\nChatMessage.findOneByRoomIdAndMessageId = function (rid, messageId, options) {\n\tconst query = {\n\t\trid,\n\t\t_id: messageId,\n\t};\n\n\treturn this.findOne(query, options);\n};\n","import { CachedCollection } from '../../../ui-cached-collection';\n\nexport const AuthzCachedCollection = new CachedCollection({\n\tname: 'permissions',\n\teventType: 'onLogged',\n});\n\nexport const ChatPermissions = AuthzCachedCollection.collection;\n","import { CachedChatRoom } from './CachedChatRoom';\n\nexport const ChatRoom = CachedChatRoom.collection;\n\nChatRoom.setReactionsInLastMessage = function (roomId, lastMessage) {\n\treturn this.update({ _id: roomId }, { $set: { lastMessage } });\n};\n\nChatRoom.unsetReactionsInLastMessage = function (roomId) {\n\treturn this.update({ _id: roomId }, { $unset: { lastMessage: { reactions: 1 } } });\n};\n","import { CachedChatSubscription } from './CachedChatSubscription';\n\nexport const ChatSubscription = CachedChatSubscription.collection;\n","import { Base } from './_Base';\n\nexport class CustomSounds extends Base {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._initModel('custom_sounds');\n\t}\n}\n\nexport default new CustomSounds();\n","import { Base } from './_Base';\n\nexport class EmojiCustom extends Base {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._initModel('custom_emoji');\n\t}\n\n\t// find\n\tfindByNameOrAlias(name, options) {\n\t\tconst query = {\n\t\t\t$or: [{ name }, { aliases: name }],\n\t\t};\n\n\t\treturn this.find(query, options);\n\t}\n}\n\nexport default new EmojiCustom();\n","import { Mongo } from 'meteor/mongo';\nimport { ReactiveVar } from 'meteor/reactive-var';\n\nimport * as Models from '..';\n\nconst Roles = Object.assign(new Mongo.Collection(null), {\n\tfindUsersInRole(name, scope, options) {\n\t\tconst role = this.findOne(name);\n\t\tconst roleScope = (role && role.scope) || 'Users';\n\t\tconst model = Models[roleScope];\n\t\treturn model && model.findUsersInRoles && model.findUsersInRoles(name, scope, options);\n\t},\n\n\tisUserInRoles(userId, roles, scope) {\n\t\troles = [].concat(roles);\n\t\treturn roles.some((roleName) => {\n\t\t\tconst role = this.findOne(roleName);\n\t\t\tconst roleScope = (role && role.scope) || 'Users';\n\t\t\tconst model = Models[roleScope];\n\t\t\treturn model && model.isUserInRole && model.isUserInRole(userId, roleName, scope);\n\t\t});\n\t},\n\n\tready: new ReactiveVar(false),\n});\n\nexport { Roles };\n","import { Mongo } from 'meteor/mongo';\n\nexport const RoomRoles = new Mongo.Collection(null);\n","import _ from 'underscore';\nimport mem from 'mem';\n\nimport { Users } from '..';\n\nconst Subscriptions = {};\n\nObject.assign(Subscriptions, {\n\tisUserInRole: mem(\n\t\tfunction (userId, roleName, roomId) {\n\t\t\tif (roomId == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst query = {\n\t\t\t\trid: roomId,\n\t\t\t};\n\n\t\t\tconst subscription = this.findOne(query, { fields: { roles: 1 } });\n\n\t\t\treturn subscription && Array.isArray(subscription.roles) && subscription.roles.includes(roleName);\n\t\t},\n\t\t{ maxAge: 1000, cacheKey: JSON.stringify },\n\t),\n\n\tfindUsersInRoles: mem(\n\t\tfunction (roles, scope, options) {\n\t\t\troles = [].concat(roles);\n\n\t\t\tconst query = {\n\t\t\t\troles: { $in: roles },\n\t\t\t};\n\n\t\t\tif (scope) {\n\t\t\t\tquery.rid = scope;\n\t\t\t}\n\n\t\t\tconst subscriptions = this.find(query).fetch();\n\n\t\t\tconst users = _.compact(\n\t\t\t\t_.map(subscriptions, function (subscription) {\n\t\t\t\t\tif (typeof subscription.u !== 'undefined' && typeof subscription.u._id !== 'undefined') {\n\t\t\t\t\t\treturn subscription.u._id;\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\treturn Users.find({ _id: { $in: users } }, options);\n\t\t},\n\t\t{ maxAge: 1000, cacheKey: JSON.stringify },\n\t),\n});\n\nexport { Subscriptions };\n","import { Base } from './_Base';\n\nexport class Uploads extends Base {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._initModel('uploads');\n\t}\n}\n\nexport default new Uploads();\n","import { Mongo } from 'meteor/mongo';\n\nexport const UserAndRoom = new Mongo.Collection(null);\n","import { Base } from './_Base';\n\nexport class UserDataFiles extends Base {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._initModel('userDataFiles');\n\t}\n}\n\nexport default new UserDataFiles();\n","import { Mongo } from 'meteor/mongo';\n\nexport const UserRoles = new Mongo.Collection(null);\n","import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\n\nexport const Users = {\n\tfindOneById(userId, options = {}) {\n\t\tconst query = {\n\t\t\t_id: userId,\n\t\t};\n\n\t\treturn this.findOne(query, options);\n\t},\n\n\tisUserInRole(userId, roleName) {\n\t\tconst user = this.findOneById(userId, { fields: { roles: 1 } });\n\t\treturn user && Array.isArray(user.roles) && user.roles.includes(roleName);\n\t},\n\n\tfindUsersInRoles(roles, scope, options) {\n\t\troles = [].concat(roles);\n\n\t\tconst query = {\n\t\t\troles: { $in: roles },\n\t\t};\n\n\t\treturn this.find(query, options);\n\t},\n};\n\n// overwrite Meteor.users collection so records on it don't get erased whenever the client reconnects to websocket\nMeteor.users = new Mongo.Collection(null);\nMeteor.user = () => Meteor.users.findOne({ _id: Meteor.userId() });\n","import { Mongo } from 'meteor/mongo';\n\nexport const WebdavAccounts = new Mongo.Collection(null);\n","import { check } from 'meteor/check';\nimport { Mongo } from 'meteor/mongo';\n\nexport class Base {\n\t_baseName() {\n\t\treturn 'rocketchat_';\n\t}\n\n\t_initModel(name) {\n\t\tcheck(name, String);\n\t\tthis.model = new Mongo.Collection(this._baseName() + name);\n\t\treturn this.model;\n\t}\n\n\tfind(...args) {\n\t\treturn this.model.find.apply(this.model, args);\n\t}\n\n\tfindOne(...args) {\n\t\treturn this.model.findOne.apply(this.model, args);\n\t}\n\n\tinsert(...args) {\n\t\treturn this.model.insert.apply(this.model, args);\n\t}\n\n\tupdate(...args) {\n\t\treturn this.model.update.apply(this.model, args);\n\t}\n\n\tupsert(...args) {\n\t\treturn this.model.upsert.apply(this.model, args);\n\t}\n\n\tremove(...args) {\n\t\treturn this.model.remove.apply(this.model, args);\n\t}\n\n\tallow(...args) {\n\t\treturn this.model.allow.apply(this.model, args);\n\t}\n\n\tdeny(...args) {\n\t\treturn this.model.deny.apply(this.model, args);\n\t}\n\n\tensureIndex() {}\n\n\tdropIndex() {}\n\n\ttryEnsureIndex() {}\n\n\ttryDropIndex() {}\n}\n","import { Meteor } from 'meteor/meteor';\nimport _ from 'underscore';\n\nimport { Base } from './models/_Base';\nimport Avatars from './models/Avatars';\nimport Uploads from './models/Uploads';\nimport UserDataFiles from './models/UserDataFiles';\nimport { Roles } from './models/Roles';\nimport { Subscriptions as subscriptions } from './models/Subscriptions';\nimport { Users as users } from './models/Users';\nimport { CachedChannelList } from './models/CachedChannelList';\nimport { CachedChatRoom } from './models/CachedChatRoom';\nimport { CachedChatSubscription } from './models/CachedChatSubscription';\nimport { CachedUserList } from './models/CachedUserList';\nimport { ChatRoom } from './models/ChatRoom';\nimport { ChatSubscription } from './models/ChatSubscription';\nimport { ChatMessage } from './models/ChatMessage';\nimport { RoomRoles } from './models/RoomRoles';\nimport { UserAndRoom } from './models/UserAndRoom';\nimport { UserRoles } from './models/UserRoles';\nimport { AuthzCachedCollection, ChatPermissions } from './models/ChatPermissions';\nimport { WebdavAccounts } from './models/WebdavAccounts';\nimport CustomSounds from './models/CustomSounds';\nimport EmojiCustom from './models/EmojiCustom';\n\nconst Users = _.extend({}, users, Meteor.users);\nconst Subscriptions = _.extend({}, subscriptions, ChatSubscription);\nconst Messages = _.extend({}, ChatMessage);\nconst Rooms = _.extend({}, ChatRoom);\n\nexport {\n\tBase,\n\tAvatars,\n\tUploads,\n\tUserDataFiles,\n\tRoles,\n\tSubscriptions,\n\tUsers,\n\tMessages,\n\tCachedChannelList,\n\tCachedChatRoom,\n\tCachedChatSubscription,\n\tCachedUserList,\n\tChatRoom,\n\tRoomRoles,\n\tUserAndRoom,\n\tUserRoles,\n\tAuthzCachedCollection,\n\tChatPermissions,\n\tChatMessage,\n\tChatSubscription,\n\tRooms,\n\tCustomSounds,\n\tEmojiCustom,\n\tWebdavAccounts,\n};\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/index.js');\n}\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/index.js');\n}\n","import './stylesheets/otr.css';\nimport './rocketchat.otr.room';\nimport './rocketchat.otr';\nimport './tabBar';\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\n\nimport { Subscriptions } from '../../models';\nimport { Notifications } from '../../notifications';\nimport { t } from '../../utils';\nimport { onClientMessageReceived } from '../../../client/lib/onClientMessageReceived';\nimport { onClientBeforeSendMessage } from '../../../client/lib/onClientBeforeSendMessage';\n\nclass OTRClass {\n\tconstructor() {\n\t\tthis.enabled = new ReactiveVar(false);\n\t\tthis.instancesByRoomId = {};\n\t\tthis.crypto = null;\n\t}\n\n\tisEnabled() {\n\t\treturn this.enabled.get();\n\t}\n\n\tgetInstanceByRoomId(roomId) {\n\t\tif (!this.enabled.get()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.instancesByRoomId[roomId]) {\n\t\t\treturn this.instancesByRoomId[roomId];\n\t\t}\n\n\t\tconst subscription = Subscriptions.findOne({\n\t\t\trid: roomId,\n\t\t});\n\n\t\tif (!subscription || subscription.t !== 'd') {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.instancesByRoomId[roomId] = new OTR.Room(Meteor.userId(), roomId); // eslint-disable-line no-use-before-define\n\t\treturn this.instancesByRoomId[roomId];\n\t}\n}\n\nexport const OTR = new OTRClass();\n\nMeteor.startup(function () {\n\tTracker.autorun(function () {\n\t\tif (Meteor.userId()) {\n\t\t\tNotifications.onUser('otr', (type, data) => {\n\t\t\t\tif (!data.roomId || !data.userId || data.userId === Meteor.userId()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tOTR.getInstanceByRoomId(data.roomId).onUserStream(type, data);\n\t\t\t});\n\t\t}\n\t});\n\n\tonClientBeforeSendMessage.use(function (message) {\n\t\tif (message.rid && OTR.getInstanceByRoomId(message.rid) && OTR.getInstanceByRoomId(message.rid).established.get()) {\n\t\t\treturn OTR.getInstanceByRoomId(message.rid)\n\t\t\t\t.encrypt(message)\n\t\t\t\t.then((msg) => {\n\t\t\t\t\tmessage.msg = msg;\n\t\t\t\t\tmessage.t = 'otr';\n\t\t\t\t\treturn message;\n\t\t\t\t});\n\t\t}\n\t\treturn Promise.resolve(message);\n\t});\n\n\tonClientMessageReceived.use(function (message) {\n\t\tif (message.rid && OTR.getInstanceByRoomId(message.rid) && OTR.getInstanceByRoomId(message.rid).established.get()) {\n\t\t\tif (message.notification) {\n\t\t\t\tmessage.msg = t('Encrypted_message');\n\t\t\t\treturn Promise.resolve(message);\n\t\t\t}\n\t\t\tconst otrRoom = OTR.getInstanceByRoomId(message.rid);\n\t\t\treturn otrRoom.decrypt(message.msg).then((data) => {\n\t\t\t\tconst { _id, text, ack } = data;\n\t\t\t\tmessage._id = _id;\n\t\t\t\tmessage.msg = text;\n\n\t\t\t\tif (data.ts) {\n\t\t\t\t\tmessage.ts = data.ts;\n\t\t\t\t}\n\n\t\t\t\tif (message.otrAck) {\n\t\t\t\t\treturn otrRoom.decrypt(message.otrAck).then((data) => {\n\t\t\t\t\t\tif (ack === data.text) {\n\t\t\t\t\t\t\tmessage.t = 'otr-ack';\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn message;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (data.userId !== Meteor.userId()) {\n\t\t\t\t\treturn otrRoom.encryptText(ack).then((ack) => {\n\t\t\t\t\t\tMeteor.call('updateOTRAck', message._id, ack);\n\t\t\t\t\t\treturn message;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn message;\n\t\t\t});\n\t\t}\n\t\tif (message.t === 'otr') {\n\t\t\tmessage.msg = '';\n\t\t}\n\t\treturn Promise.resolve(message);\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Random } from 'meteor/random';\nimport { EJSON } from 'meteor/ejson';\nimport { Tracker } from 'meteor/tracker';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { TimeSync } from 'meteor/mizzao:timesync';\nimport _ from 'underscore';\n\nimport { OTR } from './rocketchat.otr';\nimport { Notifications } from '../../notifications';\nimport { getUidDirectMessage } from '../../../client/lib/utils/getUidDirectMessage';\nimport { Presence } from '../../../client/lib/presence';\nimport { goToRoomById } from '../../../client/lib/utils/goToRoomById';\nimport { imperativeModal } from '../../../client/lib/imperativeModal';\nimport GenericModal from '../../../client/components/GenericModal';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\n\nOTR.Room = class {\n\tconstructor(userId, roomId) {\n\t\tthis.userId = userId;\n\t\tthis.roomId = roomId;\n\t\tthis.peerId = getUidDirectMessage(roomId);\n\t\tthis.established = new ReactiveVar(false);\n\t\tthis.establishing = new ReactiveVar(false);\n\n\t\tthis.userOnlineComputation = null;\n\n\t\tthis.keyPair = null;\n\t\tthis.exportedPublicKey = null;\n\t\tthis.sessionKey = null;\n\t}\n\n\thandshake(refresh) {\n\t\tthis.establishing.set(true);\n\t\tthis.firstPeer = true;\n\t\tthis.generateKeyPair().then(() => {\n\t\t\tNotifications.notifyUser(this.peerId, 'otr', 'handshake', {\n\t\t\t\troomId: this.roomId,\n\t\t\t\tuserId: this.userId,\n\t\t\t\tpublicKey: EJSON.stringify(this.exportedPublicKey),\n\t\t\t\trefresh,\n\t\t\t});\n\t\t});\n\t}\n\n\tacknowledge() {\n\t\tNotifications.notifyUser(this.peerId, 'otr', 'acknowledge', {\n\t\t\troomId: this.roomId,\n\t\t\tuserId: this.userId,\n\t\t\tpublicKey: EJSON.stringify(this.exportedPublicKey),\n\t\t});\n\t}\n\n\tdeny() {\n\t\tthis.reset();\n\t\tNotifications.notifyUser(this.peerId, 'otr', 'deny', {\n\t\t\troomId: this.roomId,\n\t\t\tuserId: this.userId,\n\t\t});\n\t}\n\n\tend() {\n\t\tthis.reset();\n\t\tNotifications.notifyUser(this.peerId, 'otr', 'end', {\n\t\t\troomId: this.roomId,\n\t\t\tuserId: this.userId,\n\t\t});\n\t}\n\n\treset() {\n\t\tthis.establishing.set(false);\n\t\tthis.established.set(false);\n\t\tthis.keyPair = null;\n\t\tthis.exportedPublicKey = null;\n\t\tthis.sessionKey = null;\n\t\tMeteor.call('deleteOldOTRMessages', this.roomId);\n\t}\n\n\tgenerateKeyPair() {\n\t\tif (this.userOnlineComputation) {\n\t\t\tthis.userOnlineComputation.stop();\n\t\t}\n\n\t\tthis.userOnlineComputation = Tracker.autorun(() => {\n\t\t\tconst $room = $(`#chat-window-${this.roomId}`);\n\t\t\tconst $title = $('.rc-header__title', $room);\n\t\t\tif (this.established.get()) {\n\t\t\t\tif ($room.length && $title.length && !$('.otr-icon', $title).length) {\n\t\t\t\t\t$title.prepend(\"<i class='otr-icon icon-key'></i>\");\n\t\t\t\t}\n\t\t\t} else if ($title.length) {\n\t\t\t\t$('.otr-icon', $title).remove();\n\t\t\t}\n\t\t});\n\n\t\t// Generate an ephemeral key pair.\n\t\treturn OTR.crypto\n\t\t\t.generateKey(\n\t\t\t\t{\n\t\t\t\t\tname: 'ECDH',\n\t\t\t\t\tnamedCurve: 'P-256',\n\t\t\t\t},\n\t\t\t\tfalse,\n\t\t\t\t['deriveKey', 'deriveBits'],\n\t\t\t)\n\t\t\t.then((keyPair) => {\n\t\t\t\tthis.keyPair = keyPair;\n\t\t\t\treturn OTR.crypto.exportKey('jwk', keyPair.publicKey);\n\t\t\t})\n\t\t\t.then((exportedPublicKey) => {\n\t\t\t\tthis.exportedPublicKey = exportedPublicKey;\n\n\t\t\t\t// Once we have generated new keys, it's safe to delete old messages\n\t\t\t\tMeteor.call('deleteOldOTRMessages', this.roomId);\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: e });\n\t\t\t});\n\t}\n\n\timportPublicKey(publicKey) {\n\t\treturn OTR.crypto\n\t\t\t.importKey(\n\t\t\t\t'jwk',\n\t\t\t\tEJSON.parse(publicKey),\n\t\t\t\t{\n\t\t\t\t\tname: 'ECDH',\n\t\t\t\t\tnamedCurve: 'P-256',\n\t\t\t\t},\n\t\t\t\tfalse,\n\t\t\t\t[],\n\t\t\t)\n\t\t\t.then((peerPublicKey) =>\n\t\t\t\tOTR.crypto.deriveBits(\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'ECDH',\n\t\t\t\t\t\tnamedCurve: 'P-256',\n\t\t\t\t\t\tpublic: peerPublicKey,\n\t\t\t\t\t},\n\t\t\t\t\tthis.keyPair.privateKey,\n\t\t\t\t\t256,\n\t\t\t\t),\n\t\t\t)\n\t\t\t.then((bits) =>\n\t\t\t\tOTR.crypto.digest(\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'SHA-256',\n\t\t\t\t\t},\n\t\t\t\t\tbits,\n\t\t\t\t),\n\t\t\t)\n\t\t\t.then((hashedBits) => {\n\t\t\t\t// We truncate the hash to 128 bits.\n\t\t\t\tconst sessionKeyData = new Uint8Array(hashedBits).slice(0, 16);\n\t\t\t\treturn OTR.crypto.importKey(\n\t\t\t\t\t'raw',\n\t\t\t\t\tsessionKeyData,\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'AES-GCM',\n\t\t\t\t\t},\n\t\t\t\t\tfalse,\n\t\t\t\t\t['encrypt', 'decrypt'],\n\t\t\t\t);\n\t\t\t})\n\t\t\t.then((sessionKey) => {\n\t\t\t\t// Session key available.\n\t\t\t\tthis.sessionKey = sessionKey;\n\t\t\t});\n\t}\n\n\tencryptText(data) {\n\t\tif (!_.isObject(data)) {\n\t\t\tdata = new TextEncoder('UTF-8').encode(EJSON.stringify({ text: data, ack: Random.id((Random.fraction() + 1) * 20) }));\n\t\t}\n\t\tconst iv = crypto.getRandomValues(new Uint8Array(12));\n\n\t\treturn OTR.crypto\n\t\t\t.encrypt(\n\t\t\t\t{\n\t\t\t\t\tname: 'AES-GCM',\n\t\t\t\t\tiv,\n\t\t\t\t},\n\t\t\t\tthis.sessionKey,\n\t\t\t\tdata,\n\t\t\t)\n\t\t\t.then((cipherText) => {\n\t\t\t\tcipherText = new Uint8Array(cipherText);\n\t\t\t\tconst output = new Uint8Array(iv.length + cipherText.length);\n\t\t\t\toutput.set(iv, 0);\n\t\t\t\toutput.set(cipherText, iv.length);\n\t\t\t\treturn EJSON.stringify(output);\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tthrow new Meteor.Error('encryption-error', 'Encryption error.');\n\t\t\t});\n\t}\n\n\tencrypt(message) {\n\t\tlet ts;\n\t\tif (isNaN(TimeSync.serverOffset())) {\n\t\t\tts = new Date();\n\t\t} else {\n\t\t\tts = new Date(Date.now() + TimeSync.serverOffset());\n\t\t}\n\n\t\tconst data = new TextEncoder('UTF-8').encode(\n\t\t\tEJSON.stringify({\n\t\t\t\t_id: message._id,\n\t\t\t\ttext: message.msg,\n\t\t\t\tuserId: this.userId,\n\t\t\t\tack: Random.id((Random.fraction() + 1) * 20),\n\t\t\t\tts,\n\t\t\t}),\n\t\t);\n\t\tconst enc = this.encryptText(data);\n\t\treturn enc;\n\t}\n\n\tdecrypt(message) {\n\t\tlet cipherText = EJSON.parse(message);\n\t\tconst iv = cipherText.slice(0, 12);\n\t\tcipherText = cipherText.slice(12);\n\n\t\treturn OTR.crypto\n\t\t\t.decrypt(\n\t\t\t\t{\n\t\t\t\t\tname: 'AES-GCM',\n\t\t\t\t\tiv,\n\t\t\t\t},\n\t\t\t\tthis.sessionKey,\n\t\t\t\tcipherText,\n\t\t\t)\n\t\t\t.then((data) => {\n\t\t\t\tdata = EJSON.parse(new TextDecoder('UTF-8').decode(new Uint8Array(data)));\n\t\t\t\treturn data;\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: e });\n\t\t\t\treturn message;\n\t\t\t});\n\t}\n\n\tonUserStream(type, data) {\n\t\tswitch (type) {\n\t\t\tcase 'handshake':\n\t\t\t\tlet timeout = null;\n\n\t\t\t\tconst establishConnection = () => {\n\t\t\t\t\tthis.establishing.set(true);\n\t\t\t\t\tMeteor.clearTimeout(timeout);\n\t\t\t\t\tthis.generateKeyPair().then(() => {\n\t\t\t\t\t\tthis.importPublicKey(data.publicKey).then(() => {\n\t\t\t\t\t\t\tthis.firstPeer = false;\n\t\t\t\t\t\t\tgoToRoomById(data.roomId);\n\t\t\t\t\t\t\tMeteor.defer(() => {\n\t\t\t\t\t\t\t\tthis.established.set(true);\n\t\t\t\t\t\t\t\tthis.acknowledge();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\t(async () => {\n\t\t\t\t\tconst { username } = await Presence.get(data.userId);\n\t\t\t\t\tif (data.refresh && this.established.get()) {\n\t\t\t\t\t\tthis.reset();\n\t\t\t\t\t\testablishConnection();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (this.established.get()) {\n\t\t\t\t\t\t\tthis.reset();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\timperativeModal.open({\n\t\t\t\t\t\t\tcomponent: GenericModal,\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tvariant: 'warning',\n\t\t\t\t\t\t\t\ttitle: TAPi18n.__('OTR'),\n\t\t\t\t\t\t\t\tchildren: TAPi18n.__('Username_wants_to_start_otr_Do_you_want_to_accept', {\n\t\t\t\t\t\t\t\t\tusername,\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tconfirmText: TAPi18n.__('Yes'),\n\t\t\t\t\t\t\t\tcancelText: TAPi18n.__('No'),\n\t\t\t\t\t\t\t\tonClose: () => imperativeModal.close,\n\t\t\t\t\t\t\t\tonCancel: () => {\n\t\t\t\t\t\t\t\t\tMeteor.clearTimeout(timeout);\n\t\t\t\t\t\t\t\t\tthis.deny();\n\t\t\t\t\t\t\t\t\timperativeModal.close();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tonConfirm: () => {\n\t\t\t\t\t\t\t\t\testablishConnection();\n\t\t\t\t\t\t\t\t\timperativeModal.close();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\ttimeout = Meteor.setTimeout(() => {\n\t\t\t\t\t\tthis.establishing.set(false);\n\t\t\t\t\t\timperativeModal.close();\n\t\t\t\t\t}, 10000);\n\t\t\t\t})();\n\t\t\t\tbreak;\n\n\t\t\tcase 'acknowledge':\n\t\t\t\tthis.importPublicKey(data.publicKey).then(() => {\n\t\t\t\t\tthis.established.set(true);\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase 'deny':\n\t\t\t\t(async () => {\n\t\t\t\t\tconst { username } = await Presence.get(this.peerId);\n\t\t\t\t\tif (this.establishing.get()) {\n\t\t\t\t\t\tthis.reset();\n\t\t\t\t\t\timperativeModal.open({\n\t\t\t\t\t\t\tcomponent: GenericModal,\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tvariant: 'warning',\n\t\t\t\t\t\t\t\ttitle: TAPi18n.__('OTR'),\n\t\t\t\t\t\t\t\tchildren: TAPi18n.__('Username_denied_the_OTR_session', { username }),\n\t\t\t\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t\t\t\t\tonConfirm: imperativeModal.close,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})();\n\t\t\t\tbreak;\n\n\t\t\tcase 'end':\n\t\t\t\t(async () => {\n\t\t\t\t\tconst { username } = await Presence.get(this.peerId);\n\n\t\t\t\t\tif (this.established.get()) {\n\t\t\t\t\t\tthis.reset();\n\t\t\t\t\t\timperativeModal.open({\n\t\t\t\t\t\t\tcomponent: GenericModal,\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tvariant: 'warning',\n\t\t\t\t\t\t\t\ttitle: TAPi18n.__('OTR'),\n\t\t\t\t\t\t\t\tchildren: TAPi18n.__('Username_ended_the_OTR_session', { username }),\n\t\t\t\t\t\t\t\tconfirmText: TAPi18n.__('Ok'),\n\t\t\t\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t\t\t\t\tonConfirm: imperativeModal.close,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})();\n\t\t\t\tbreak;\n\t\t}\n\t}\n};\n","import { useMemo, lazy, useEffect } from 'react';\n\nimport { OTR } from './rocketchat.otr';\nimport { useSetting } from '../../../client/contexts/SettingsContext';\nimport { addAction } from '../../../client/views/room/lib/Toolbox';\n\nconst template = lazy(() => import('../../../client/views/room/contextualBar/OTR'));\n\naddAction('otr', () => {\n\tconst enabled = useSetting('OTR_Enable');\n\n\tconst shouldAddAction = enabled && window.crypto;\n\n\tuseEffect(() => {\n\t\tif (shouldAddAction) {\n\t\t\tOTR.crypto = window.crypto.subtle;\n\t\t\tOTR.enabled.set(true);\n\t\t} else {\n\t\t\tOTR.enabled.set(false);\n\t\t}\n\t}, [shouldAddAction]);\n\n\treturn useMemo(\n\t\t() =>\n\t\t\tshouldAddAction\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['direct'],\n\t\t\t\t\t\tid: 'otr',\n\t\t\t\t\t\ttitle: 'OTR',\n\t\t\t\t\t\ticon: 'shredder',\n\t\t\t\t\t\ttemplate,\n\t\t\t\t\t\torder: 13,\n\t\t\t\t\t\tfull: true,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[shouldAddAction],\n\t);\n});\n","import { Meteor } from 'meteor/meteor';\nimport _ from 'underscore';\n\nimport { Messages, Rooms, Subscriptions } from '../../../models';\nimport { callbacks } from '../../../../lib/callbacks';\nimport { emoji } from '../../../emoji';\nimport { roomTypes } from '../../../utils/client';\n\nMeteor.methods({\n\tsetReaction(reaction, messageId) {\n\t\tif (!Meteor.userId()) {\n\t\t\tthrow new Meteor.Error(203, 'User_logged_out');\n\t\t}\n\n\t\tconst user = Meteor.user();\n\n\t\tconst message = Messages.findOne({ _id: messageId });\n\t\tconst room = Rooms.findOne({ _id: message.rid });\n\n\t\tif (message.private) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!emoji.list[reaction]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (roomTypes.readOnly(room._id, user._id)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!Subscriptions.findOne({ rid: message.rid })) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (message.reactions && message.reactions[reaction] && message.reactions[reaction].usernames.indexOf(user.username) !== -1) {\n\t\t\tmessage.reactions[reaction].usernames.splice(message.reactions[reaction].usernames.indexOf(user.username), 1);\n\n\t\t\tif (message.reactions[reaction].usernames.length === 0) {\n\t\t\t\tdelete message.reactions[reaction];\n\t\t\t}\n\n\t\t\tif (_.isEmpty(message.reactions)) {\n\t\t\t\tdelete message.reactions;\n\t\t\t\tMessages.unsetReactions(messageId);\n\t\t\t\tcallbacks.run('unsetReaction', messageId, reaction);\n\t\t\t} else {\n\t\t\t\tMessages.setReactions(messageId, message.reactions);\n\t\t\t\tcallbacks.run('setReaction', messageId, reaction);\n\t\t\t}\n\t\t} else {\n\t\t\tif (!message.reactions) {\n\t\t\t\tmessage.reactions = {};\n\t\t\t}\n\t\t\tif (!message.reactions[reaction]) {\n\t\t\t\tmessage.reactions[reaction] = {\n\t\t\t\t\tusernames: [],\n\t\t\t\t};\n\t\t\t}\n\t\t\tmessage.reactions[reaction].usernames.push(user.username);\n\n\t\t\tMessages.setReactions(messageId, message.reactions);\n\t\t\tcallbacks.run('setReaction', messageId, reaction);\n\t\t}\n\t},\n});\n","import './init';\nimport './methods/setReaction';\nimport './stylesheets/reaction.css';\n","import { Meteor } from 'meteor/meteor';\nimport { Blaze } from 'meteor/blaze';\n\nimport { roomTypes } from '../../utils/client';\nimport { Rooms, Subscriptions } from '../../models';\nimport { MessageAction } from '../../ui-utils';\nimport { messageArgs } from '../../ui-utils/client/lib/messageArgs';\nimport { EmojiPicker } from '../../emoji';\nimport { tooltip } from '../../ui/client/components/tooltip';\n\nexport const EmojiEvents = {\n\t'click .add-reaction'(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tconst data = Blaze.getData(event.currentTarget);\n\t\tconst {\n\t\t\tmsg: { rid, _id: mid, private: isPrivate },\n\t\t} = messageArgs(data);\n\t\tconst user = Meteor.user();\n\t\tconst room = Rooms.findOne({ _id: rid });\n\n\t\tif (!room) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!Subscriptions.findOne({ rid })) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (isPrivate) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (roomTypes.readOnly(room._id, user._id) && !room.reactWhenReadOnly) {\n\t\t\treturn false;\n\t\t}\n\n\t\tEmojiPicker.open(event.currentTarget, (emoji) => {\n\t\t\tMeteor.call('setReaction', `:${emoji}:`, mid);\n\t\t});\n\t},\n\n\t'click .reactions > li:not(.add-reaction)'(event) {\n\t\tevent.preventDefault();\n\n\t\tconst data = Blaze.getData(event.currentTarget);\n\t\tconst {\n\t\t\tmsg: { _id: mid },\n\t\t} = messageArgs(data);\n\t\tMeteor.call('setReaction', $(event.currentTarget).attr('data-emoji'), mid, () => {\n\t\t\ttooltip.hide();\n\t\t});\n\t},\n\n\t'mouseenter .reactions > li:not(.add-reaction)'(event) {\n\t\tevent.stopPropagation();\n\t\ttooltip.showElement($(event.currentTarget).find('.people').get(0), event.currentTarget);\n\t},\n\n\t'mouseleave .reactions > li:not(.add-reaction)'(event) {\n\t\tevent.stopPropagation();\n\t\ttooltip.hide();\n\t},\n};\n\nMeteor.startup(function () {\n\tMessageAction.addButton({\n\t\tid: 'reaction-message',\n\t\ticon: 'add-reaction',\n\t\tlabel: 'Add_Reaction',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\taction(event) {\n\t\t\tevent.stopPropagation();\n\t\t\tconst { msg } = messageArgs(this);\n\t\t\tEmojiPicker.open(event.currentTarget, (emoji) => Meteor.call('setReaction', `:${emoji}:`, msg._id));\n\t\t},\n\t\tcondition({ msg: message, u: user, room, subscription }) {\n\t\t\tif (!room) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!subscription) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (message.private) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (roomTypes.readOnly(room._id, user._id) && !room.reactWhenReadOnly) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst isLivechatRoom = roomTypes.isLivechatRoom(room.t);\n\t\t\tif (isLivechatRoom) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\torder: -2,\n\t\tgroup: ['message', 'menu'],\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { Mongo } from 'meteor/mongo';\nimport { Accounts } from 'meteor/accounts-base';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport localforage from 'localforage';\nimport _ from 'underscore';\nimport { Emitter } from '@rocket.chat/emitter';\n\nimport { callbacks } from '../../../../lib/callbacks';\nimport Notifications from '../../../notifications/client/lib/Notifications';\nimport { getConfig } from '../../../../client/lib/utils/getConfig';\nimport { call } from '../../../../client/lib/utils/call';\n\nconst wrap =\n\t(fn) =>\n\t(...args) =>\n\t\tnew Promise((resolve, reject) => {\n\t\t\tfn(...args, (err, result) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t\treturn resolve(result);\n\t\t\t});\n\t\t});\n\nconst localforageGetItem = wrap(localforage.getItem);\n\nclass CachedCollectionManagerClass extends Emitter {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.items = [];\n\t\tthis._syncEnabled = false;\n\t\tthis.logged = false;\n\n\t\tconst { _unstoreLoginToken } = Accounts;\n\t\tAccounts._unstoreLoginToken = (...args) => {\n\t\t\t_unstoreLoginToken.apply(Accounts, args);\n\t\t\tthis.clearAllCacheOnLogout();\n\t\t};\n\n\t\t// Wait 1s to start or the code will run before the connection and\n\t\t// on first connection the `reconnect` callbacks will run\n\n\t\tTracker.autorun(() => {\n\t\t\tconst [WAITING_FIRST_CONNECTION, WAITING_FIRST_DISCONNECTION, LISTENING_RECONNECTIONS] = [0, 1, 2];\n\t\t\tthis.step = this.step || WAITING_FIRST_CONNECTION;\n\t\t\tconst { connected } = Meteor.status();\n\t\t\tswitch (this.step) {\n\t\t\t\tcase WAITING_FIRST_CONNECTION:\n\t\t\t\t\treturn !connected || this.step++;\n\t\t\t\tcase WAITING_FIRST_DISCONNECTION:\n\t\t\t\t\treturn connected || this.step++;\n\t\t\t\tcase LISTENING_RECONNECTIONS:\n\t\t\t\t\treturn connected && this.emit('reconnect');\n\t\t\t}\n\t\t});\n\n\t\tTracker.autorun(() => {\n\t\t\tconst uid = Meteor.userId();\n\t\t\tthis.logged = uid !== null;\n\t\t\tif (this.logged) {\n\t\t\t\tthis.emit('login', uid);\n\t\t\t}\n\t\t});\n\t}\n\n\tregister(cachedCollection) {\n\t\tthis.items.push(cachedCollection);\n\t}\n\n\tclearAllCache() {\n\t\tfor (const item of this.items) {\n\t\t\titem.clearCache();\n\t\t}\n\t}\n\n\tclearAllCacheOnLogout() {\n\t\tfor (const item of this.items) {\n\t\t\titem.clearCacheOnLogout();\n\t\t}\n\t}\n\n\tcountQueries() {\n\t\tfor (const item of this.items) {\n\t\t\titem.countQueries();\n\t\t}\n\t}\n\n\tset syncEnabled(value) {\n\t\tcheck(value, Boolean);\n\t\tthis._syncEnabled = value;\n\t}\n\n\tget syncEnabled() {\n\t\treturn this._syncEnabled;\n\t}\n\n\tonReconnect(cb) {\n\t\tthis.on('reconnect', cb);\n\t}\n\n\tonLogin(cb) {\n\t\tthis.on('login', cb);\n\t\tif (this.logged) {\n\t\t\tcb();\n\t\t}\n\t}\n}\n\nexport const CachedCollectionManager = new CachedCollectionManagerClass();\n\nconst debug = (name) =>\n\t[getConfig(`debugCachedCollection-${name}`), getConfig('debugCachedCollection'), getConfig('debug')].includes('true');\n\nconst nullLog = function () {};\n\nconst log = (...args) => console.log(`CachedCollection ${this.name} =>`, ...args);\n\nexport class CachedCollection extends Emitter {\n\tconstructor({\n\t\tcollection = new Mongo.Collection(null),\n\t\tname,\n\t\tmethodName = `${name}/get`,\n\t\tsyncMethodName = `${name}/get`,\n\t\teventName = `${name}-changed`,\n\t\teventType = 'onUser',\n\t\tuserRelated = true,\n\t\tlistenChangesForLoggedUsersOnly = false,\n\t\tuseSync = true,\n\t\tversion = 16,\n\t\tmaxCacheTime = 60 * 60 * 24 * 30,\n\t\tonSyncData = (/* action, record */) => {},\n\t}) {\n\t\tsuper();\n\t\tthis.collection = collection;\n\n\t\tthis.ready = new ReactiveVar(false);\n\t\tthis.name = name;\n\t\tthis.methodName = methodName;\n\t\tthis.syncMethodName = syncMethodName;\n\t\tthis.eventName = eventName;\n\t\tthis.eventType = eventType;\n\t\tthis.useSync = useSync;\n\t\tthis.listenChangesForLoggedUsersOnly = listenChangesForLoggedUsersOnly;\n\t\tthis.version = version;\n\t\tthis.userRelated = userRelated;\n\t\tthis.updatedAt = new Date(0);\n\t\tthis.maxCacheTime = maxCacheTime;\n\t\tthis.onSyncData = onSyncData;\n\t\tthis.log = debug(name) ? log : nullLog;\n\n\t\tCachedCollectionManager.register(this);\n\t\tif (!userRelated) {\n\t\t\tthis.init();\n\t\t\treturn;\n\t\t}\n\t\tCachedCollectionManager.onLogin(() => {\n\t\t\tthis.init();\n\t\t});\n\t}\n\n\tcountQueries() {\n\t\tthis.log(`${Object.keys(this.collection._collection.queries).length} queries`);\n\t}\n\n\tgetToken() {\n\t\tif (this.userRelated === false) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn Accounts._storedLoginToken();\n\t}\n\n\tasync loadFromCache() {\n\t\tconst data = await localforageGetItem(this.name);\n\t\tif (!data) {\n\t\t\treturn false;\n\t\t}\n\t\tif (data.version < this.version || data.token !== this.getToken()) {\n\t\t\treturn false;\n\t\t}\n\t\tif (data.records.length <= 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (new Date() - data.updatedAt >= 1000 * this.maxCacheTime) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.log(`${data.records.length} records loaded from cache`);\n\n\t\tdata.records.forEach((record) => {\n\t\t\tcallbacks.run(`cachedCollection-loadFromCache-${this.name}`, record);\n\t\t\t// this.collection.direct.insert(record);\n\n\t\t\tif (!record._updatedAt) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst _updatedAt = new Date(record._updatedAt);\n\t\t\trecord._updatedAt = _updatedAt;\n\n\t\t\tif (record.lastMessage && typeof record.lastMessage._updatedAt === 'string') {\n\t\t\t\trecord.lastMessage._updatedAt = new Date(record.lastMessage._updatedAt);\n\t\t\t}\n\n\t\t\tif (_updatedAt > this.updatedAt) {\n\t\t\t\tthis.updatedAt = _updatedAt;\n\t\t\t}\n\t\t});\n\n\t\tthis.collection._collection._docs._map = new Map(data.records.map((record) => [record._id, record]));\n\n\t\tthis.updatedAt = data.updatedAt || this.updatedAt;\n\n\t\tObject.values(this.collection._collection.queries).forEach((query) => this.collection._collection._recomputeResults(query));\n\n\t\treturn true;\n\t}\n\n\tasync loadFromServer() {\n\t\tconst startTime = new Date();\n\t\tconst lastTime = this.updatedAt;\n\t\tconst data = await call(this.methodName);\n\t\tthis.log(`${data.length} records loaded from server`);\n\t\tdata.forEach((record) => {\n\t\t\tcallbacks.run(`cachedCollection-loadFromServer-${this.name}`, record, 'changed');\n\n\t\t\tthis.collection.direct.upsert({ _id: record._id }, _.omit(record, '_id'));\n\n\t\t\tthis.onSyncData('changed', record);\n\n\t\t\tif (record._updatedAt && record._updatedAt > this.updatedAt) {\n\t\t\t\tthis.updatedAt = record._updatedAt;\n\t\t\t}\n\t\t});\n\t\tthis.updatedAt = this.updatedAt === lastTime ? startTime : this.updatedAt;\n\t}\n\n\tasync loadFromServerAndPopulate() {\n\t\tawait this.loadFromServer();\n\t\tthis.save();\n\t}\n\n\tsave = _.debounce(() => {\n\t\tthis.log('saving cache');\n\t\tconst data = this.collection.find().fetch();\n\t\tlocalforage.setItem(this.name, {\n\t\t\tupdatedAt: this.updatedAt,\n\t\t\tversion: this.version,\n\t\t\ttoken: this.getToken(),\n\t\t\trecords: data,\n\t\t});\n\t\tthis.log('saving cache (done)');\n\t}, 1000);\n\n\tclearCacheOnLogout() {\n\t\tif (this.userRelated === true) {\n\t\t\tthis.clearCache();\n\t\t}\n\t}\n\n\tclearCache() {\n\t\tthis.log('clearing cache');\n\t\tlocalforage.removeItem(this.name);\n\t\tthis.collection.remove({});\n\t}\n\n\tremoveRoomFromCacheWhenUserLeaves(roomId, ChatRoom, CachedChatRoom) {\n\t\tChatRoom.remove(roomId);\n\t\tCachedChatRoom.save();\n\t}\n\n\tasync setupListener(eventType, eventName) {\n\t\tconst { RoomManager } = await import('../../../ui-utils');\n\t\tconst { ChatRoom, CachedChatRoom } = await import('../../../models');\n\t\tNotifications[eventType || this.eventType](eventName || this.eventName, (t, record) => {\n\t\t\tthis.log('record received', t, record);\n\t\t\tcallbacks.run(`cachedCollection-received-${this.name}`, record, t);\n\t\t\tif (t === 'removed') {\n\t\t\t\tlet room;\n\t\t\t\tif (this.eventName === 'subscriptions-changed') {\n\t\t\t\t\troom = ChatRoom.findOne(record.rid);\n\t\t\t\t\tif (room) {\n\t\t\t\t\t\tthis.removeRoomFromCacheWhenUserLeaves(room._id, ChatRoom, CachedChatRoom);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\troom = this.collection.findOne({\n\t\t\t\t\t\t_id: record._id,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (room) {\n\t\t\t\t\troom.name && RoomManager.close(room.t + room.name);\n\t\t\t\t\t!room.name && RoomManager.close(room.t + room._id);\n\t\t\t\t}\n\t\t\t\tthis.collection.remove(record._id);\n\t\t\t} else {\n\t\t\t\tconst { _id, ...recordData } = record;\n\t\t\t\tthis.collection.direct.upsert({ _id }, recordData);\n\t\t\t}\n\t\t\tthis.save();\n\t\t});\n\t}\n\n\ttrySync(delay = 10) {\n\t\tclearTimeout(this.tm);\n\t\t// Wait for an empty queue to load data again and sync\n\t\tthis.tm = setTimeout(async () => {\n\t\t\tif (!(await this.sync())) {\n\t\t\t\treturn this.trySync(delay);\n\t\t\t}\n\t\t\tthis.save();\n\t\t}, delay);\n\t}\n\n\tasync sync() {\n\t\tif (!this.updatedAt || this.updatedAt.valueOf() === 0 || Meteor.connection._outstandingMethodBlocks.length !== 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst startTime = new Date();\n\t\tconst lastTime = this.updatedAt;\n\n\t\tthis.log(`syncing from ${this.updatedAt}`);\n\n\t\tconst data = await call(this.syncMethodName, this.updatedAt);\n\t\tlet changes = [];\n\n\t\tif (data.update && data.update.length > 0) {\n\t\t\tthis.log(`${data.update.length} records updated in sync`);\n\t\t\tchanges.push(...data.update);\n\t\t}\n\n\t\tif (data.remove && data.remove.length > 0) {\n\t\t\tthis.log(`${data.remove.length} records removed in sync`);\n\t\t\tchanges.push(...data.remove);\n\t\t}\n\n\t\tchanges = changes.sort((a, b) => {\n\t\t\tconst valueA = a._updatedAt || a._deletedAt;\n\t\t\tconst valueB = b._updatedAt || b._deletedAt;\n\n\t\t\tif (valueA < valueB) {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\tif (valueA > valueB) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t});\n\n\t\tfor (const record of changes) {\n\t\t\tconst action = record._deletedAt ? 'removed' : 'changed';\n\t\t\tcallbacks.run(`cachedCollection-sync-${this.name}`, record, action);\n\t\t\tconst actionTime = record._deletedAt || record._updatedAt;\n\t\t\tconst { _id, ...recordData } = record;\n\t\t\tif (record._deletedAt) {\n\t\t\t\tthis.collection.direct.remove({ _id });\n\t\t\t} else {\n\t\t\t\tthis.collection.direct.upsert({ _id }, recordData);\n\t\t\t}\n\t\t\tif (actionTime > this.updatedAt) {\n\t\t\t\tthis.updatedAt = actionTime;\n\t\t\t}\n\t\t\tthis.onSyncData(action, record);\n\t\t}\n\t\tthis.updatedAt = this.updatedAt === lastTime ? startTime : this.updatedAt;\n\n\t\treturn true;\n\t}\n\n\tasync init() {\n\t\tthis.ready.set(false);\n\n\t\tif (await this.loadFromCache()) {\n\t\t\tthis.trySync();\n\t\t} else {\n\t\t\tawait this.loadFromServerAndPopulate();\n\t\t}\n\n\t\tthis.ready.set(true);\n\n\t\tCachedCollectionManager.onReconnect(() => {\n\t\t\tthis.trySync();\n\t\t});\n\n\t\tif (!this.userRelated) {\n\t\t\treturn this.setupListener();\n\t\t}\n\n\t\tCachedCollectionManager.onLogin(async () => {\n\t\t\tthis.setupListener();\n\t\t});\n\t}\n}\n","export { CachedCollection, CachedCollectionManager } from './models/CachedCollection';\n","export * from './client/index';\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\n\nimport '../../crowd/client/index';\nimport { reportError } from '../../../client/lib/2fa/utils';\nimport { overrideLoginMethod } from '../../../client/lib/2fa/overrideLoginMethod';\n\nMeteor.loginWithCrowdAndTOTP = function (username, password, code, callback) {\n\tconst loginRequest = {\n\t\tcrowd: true,\n\t\tusername,\n\t\tcrowdPassword: password,\n\t};\n\n\tAccounts.callLoginMethod({\n\t\tmethodArguments: [\n\t\t\t{\n\t\t\t\ttotp: {\n\t\t\t\t\tlogin: loginRequest,\n\t\t\t\t\tcode,\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tuserCallback(error) {\n\t\t\tif (error) {\n\t\t\t\treportError(error, callback);\n\t\t\t} else {\n\t\t\t\tcallback && callback();\n\t\t\t}\n\t\t},\n\t});\n};\n\nconst { loginWithCrowd } = Meteor;\n\nMeteor.loginWithCrowd = function (username, password, callback) {\n\toverrideLoginMethod(loginWithCrowd, [username, password], callback, Meteor.loginWithCrowdAndTOTP);\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\nimport { Google } from 'meteor/google-oauth';\nimport _ from 'underscore';\n\nimport { overrideLoginMethod } from '../../../client/lib/2fa/overrideLoginMethod';\n\nconst loginWithGoogleAndTOTP = function (options, code, callback) {\n\t// support a callback without options\n\tif (!callback && typeof options === 'function') {\n\t\tcallback = options;\n\t\toptions = null;\n\t}\n\n\tif (Meteor.isCordova && Google.signIn) {\n\t\t// After 20 April 2017, Google OAuth login will no longer work from\n\t\t// a WebView, so Cordova apps must use Google Sign-In instead.\n\t\t// https://github.com/meteor/meteor/issues/8253\n\t\tGoogle.signIn(options, callback);\n\t\treturn;\n\t} // Use Google's domain-specific login page if we want to restrict creation to\n\t// a particular email domain. (Don't use it if restrictCreationByEmailDomain\n\t// is a function.) Note that all this does is change Google's UI ---\n\t// accounts-base/accounts_server.js still checks server-side that the server\n\t// has the proper email address after the OAuth conversation.\n\n\tif (typeof Accounts._options.restrictCreationByEmailDomain === 'string') {\n\t\toptions = _.extend({}, options || {});\n\t\toptions.loginUrlParameters = _.extend({}, options.loginUrlParameters || {});\n\t\toptions.loginUrlParameters.hd = Accounts._options.restrictCreationByEmailDomain;\n\t}\n\n\tconst credentialRequestCompleteCallback = Accounts.oauth.credentialRequestCompleteHandler(callback, code);\n\tGoogle.requestCredential(options, credentialRequestCompleteCallback);\n};\n\nconst { loginWithGoogle } = Meteor;\nMeteor.loginWithGoogle = function (options, cb) {\n\toverrideLoginMethod(loginWithGoogle, [options], cb, loginWithGoogleAndTOTP);\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\n\nimport '../../../client/startup/ldap';\nimport { reportError } from '../../../client/lib/2fa/utils';\nimport { overrideLoginMethod } from '../../../client/lib/2fa/overrideLoginMethod';\n\nMeteor.loginWithLDAPAndTOTP = function (...args) {\n\t// Pull username and password\n\tconst username = args.shift();\n\tconst ldapPass = args.shift();\n\n\t// Check if last argument is a function. if it is, pop it off and set callback to it\n\tconst callback = typeof args[args.length - 1] === 'function' ? args.pop() : null;\n\t// The last argument before the callback is the totp code\n\tconst code = args.pop();\n\n\t// if args still holds options item, grab it\n\tconst ldapOptions = args.length > 0 ? args.shift() : {};\n\n\t// Set up loginRequest object\n\tconst loginRequest = {\n\t\tldap: true,\n\t\tusername,\n\t\tldapPass,\n\t\tldapOptions,\n\t};\n\n\tAccounts.callLoginMethod({\n\t\tmethodArguments: [\n\t\t\t{\n\t\t\t\ttotp: {\n\t\t\t\t\tlogin: loginRequest,\n\t\t\t\t\tcode,\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tuserCallback(error) {\n\t\t\tif (error) {\n\t\t\t\treportError(error, callback);\n\t\t\t} else {\n\t\t\t\tcallback && callback();\n\t\t\t}\n\t\t},\n\t});\n};\n\nconst { loginWithLDAP } = Meteor;\n\nMeteor.loginWithLDAP = function (...args) {\n\tconst callback = typeof args[args.length - 1] === 'function' ? args.pop() : null;\n\n\toverrideLoginMethod(loginWithLDAP, args, callback, Meteor.loginWithLDAPAndTOTP, args[0]);\n};\n","import { capitalize } from '@rocket.chat/string-helpers';\nimport { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\nimport { Facebook } from 'meteor/facebook-oauth';\nimport { Github } from 'meteor/github-oauth';\nimport { Twitter } from 'meteor/twitter-oauth';\nimport { MeteorDeveloperAccounts } from 'meteor/meteor-developer-oauth';\nimport { Linkedin } from 'meteor/pauli:linkedin-oauth';\nimport { OAuth } from 'meteor/oauth';\n\nimport { process2faReturn } from '../../../client/lib/2fa/process2faReturn';\nimport { CustomOAuth } from '../../custom-oauth';\nimport { convertError } from '../../../client/lib/2fa/utils';\nimport { overrideLoginMethod } from '../../../client/lib/2fa/overrideLoginMethod';\n\nlet lastCredentialToken = null;\nlet lastCredentialSecret = null;\n\nAccounts.oauth.tryLoginAfterPopupClosed = function (credentialToken, callback, totpCode, credentialSecret = null) {\n\tcredentialSecret = credentialSecret || OAuth._retrieveCredentialSecret(credentialToken) || null;\n\tconst methodArgument = {\n\t\toauth: {\n\t\t\tcredentialToken,\n\t\t\tcredentialSecret,\n\t\t},\n\t};\n\n\tlastCredentialToken = credentialToken;\n\tlastCredentialSecret = credentialSecret;\n\n\tif (totpCode && typeof totpCode === 'string') {\n\t\tmethodArgument.totp = {\n\t\t\tcode: totpCode,\n\t\t};\n\t}\n\n\tAccounts.callLoginMethod({\n\t\tmethodArguments: [methodArgument],\n\t\tuserCallback:\n\t\t\tcallback &&\n\t\t\tfunction (err) {\n\t\t\t\tcallback(convertError(err));\n\t\t\t},\n\t});\n};\n\nAccounts.oauth.credentialRequestCompleteHandler = function (callback, totpCode) {\n\treturn function (credentialTokenOrError) {\n\t\tif (credentialTokenOrError && credentialTokenOrError instanceof Error) {\n\t\t\tcallback && callback(credentialTokenOrError);\n\t\t} else {\n\t\t\tAccounts.oauth.tryLoginAfterPopupClosed(credentialTokenOrError, callback, totpCode);\n\t\t}\n\t};\n};\n\nconst createOAuthTotpLoginMethod = (credentialProvider) => (options, code, callback) => {\n\t// support a callback without options\n\tif (!callback && typeof options === 'function') {\n\t\tcallback = options;\n\t\toptions = null;\n\t}\n\n\tif (lastCredentialToken && lastCredentialSecret) {\n\t\tAccounts.oauth.tryLoginAfterPopupClosed(lastCredentialToken, callback, code, lastCredentialSecret);\n\t} else {\n\t\tconst provider = (credentialProvider && credentialProvider()) || this;\n\t\tconst credentialRequestCompleteCallback = Accounts.oauth.credentialRequestCompleteHandler(callback, code);\n\t\tprovider.requestCredential(options, credentialRequestCompleteCallback);\n\t}\n\n\tlastCredentialToken = null;\n\tlastCredentialSecret = null;\n};\n\nconst loginWithOAuthTokenAndTOTP = createOAuthTotpLoginMethod();\n\nconst loginWithFacebookAndTOTP = createOAuthTotpLoginMethod(() => Facebook);\nconst { loginWithFacebook } = Meteor;\nMeteor.loginWithFacebook = function (options, cb) {\n\toverrideLoginMethod(loginWithFacebook, [options], cb, loginWithFacebookAndTOTP);\n};\n\nconst loginWithGithubAndTOTP = createOAuthTotpLoginMethod(() => Github);\nconst { loginWithGithub } = Meteor;\nMeteor.loginWithGithub = function (options, cb) {\n\toverrideLoginMethod(loginWithGithub, [options], cb, loginWithGithubAndTOTP);\n};\n\nconst loginWithMeteorDeveloperAccountAndTOTP = createOAuthTotpLoginMethod(() => MeteorDeveloperAccounts);\nconst { loginWithMeteorDeveloperAccount } = Meteor;\nMeteor.loginWithMeteorDeveloperAccount = function (options, cb) {\n\toverrideLoginMethod(loginWithMeteorDeveloperAccount, [options], cb, loginWithMeteorDeveloperAccountAndTOTP);\n};\n\nconst loginWithTwitterAndTOTP = createOAuthTotpLoginMethod(() => Twitter);\nconst { loginWithTwitter } = Meteor;\nMeteor.loginWithTwitter = function (options, cb) {\n\toverrideLoginMethod(loginWithTwitter, [options], cb, loginWithTwitterAndTOTP);\n};\n\nconst loginWithLinkedinAndTOTP = createOAuthTotpLoginMethod(() => Linkedin);\nconst { loginWithLinkedin } = Meteor;\nMeteor.loginWithLinkedin = function (options, cb) {\n\toverrideLoginMethod(loginWithLinkedin, [options], cb, loginWithLinkedinAndTOTP);\n};\n\nAccounts.onPageLoadLogin((loginAttempt) => {\n\tif (loginAttempt?.error?.error !== 'totp-required') {\n\t\treturn;\n\t}\n\n\tconst { methodArguments } = loginAttempt;\n\tif (!methodArguments?.length) {\n\t\treturn;\n\t}\n\n\tconst oAuthArgs = methodArguments.find((arg) => arg.oauth);\n\tconst { credentialToken, credentialSecret } = oAuthArgs.oauth;\n\tconst cb = loginAttempt.userCallback;\n\n\tprocess2faReturn({\n\t\terror: loginAttempt.error,\n\t\toriginalCallback: cb,\n\t\tonCode: (code) => {\n\t\t\tAccounts.oauth.tryLoginAfterPopupClosed(credentialToken, cb, code, credentialSecret);\n\t\t},\n\t});\n});\n\nconst oldConfigureLogin = CustomOAuth.prototype.configureLogin;\nCustomOAuth.prototype.configureLogin = function (...args) {\n\tconst loginWithService = `loginWith${capitalize(String(this.name || ''))}`;\n\n\toldConfigureLogin.apply(this, args);\n\n\tconst oldMethod = Meteor[loginWithService];\n\n\tMeteor[loginWithService] = function (options, cb) {\n\t\toverrideLoginMethod(oldMethod, [options], cb, loginWithOAuthTokenAndTOTP);\n\t};\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\n\nimport { t } from '../../utils';\nimport { process2faReturn } from '../../../client/lib/2fa/process2faReturn';\nimport { isTotpInvalidError, reportError } from '../../../client/lib/2fa/utils';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\n\nMeteor.loginWithPasswordAndTOTP = function (selector, password, code, callback) {\n\tif (typeof selector === 'string') {\n\t\tif (selector.indexOf('@') === -1) {\n\t\t\tselector = { username: selector };\n\t\t} else {\n\t\t\tselector = { email: selector };\n\t\t}\n\t}\n\n\tAccounts.callLoginMethod({\n\t\tmethodArguments: [\n\t\t\t{\n\t\t\t\ttotp: {\n\t\t\t\t\tlogin: {\n\t\t\t\t\t\tuser: selector,\n\t\t\t\t\t\tpassword: Accounts._hashPassword(password),\n\t\t\t\t\t},\n\t\t\t\t\tcode,\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tuserCallback(error) {\n\t\t\tif (error) {\n\t\t\t\treportError(error, callback);\n\t\t\t} else {\n\t\t\t\tcallback && callback();\n\t\t\t}\n\t\t},\n\t});\n};\n\nconst { loginWithPassword } = Meteor;\n\nMeteor.loginWithPassword = function (email, password, cb) {\n\tloginWithPassword(email, password, (error) => {\n\t\tprocess2faReturn({\n\t\t\terror,\n\t\t\toriginalCallback: cb,\n\t\t\temailOrUsername: email,\n\t\t\tonCode: (code) => {\n\t\t\t\tMeteor.loginWithPasswordAndTOTP(email, password, code, (error) => {\n\t\t\t\t\tif (isTotpInvalidError(error)) {\n\t\t\t\t\t\tdispatchToastMessage({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\tmessage: t('Invalid_two_factor_code'),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcb();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tcb(error);\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t});\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\n\nimport '../../meteor-accounts-saml/client/saml_client';\nimport { reportError } from '../../../client/lib/2fa/utils';\nimport { overrideLoginMethod } from '../../../client/lib/2fa/overrideLoginMethod';\n\nMeteor.loginWithSamlTokenAndTOTP = function (credentialToken, code, callback) {\n\tAccounts.callLoginMethod({\n\t\tmethodArguments: [\n\t\t\t{\n\t\t\t\ttotp: {\n\t\t\t\t\tlogin: {\n\t\t\t\t\t\tsaml: true,\n\t\t\t\t\t\tcredentialToken,\n\t\t\t\t\t},\n\t\t\t\t\tcode,\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tuserCallback(error) {\n\t\t\tif (error) {\n\t\t\t\treportError(error, callback);\n\t\t\t} else {\n\t\t\t\tcallback && callback();\n\t\t\t}\n\t\t},\n\t});\n};\n\nconst { loginWithSamlToken } = Meteor;\n\nMeteor.loginWithSamlToken = function (options, callback) {\n\toverrideLoginMethod(loginWithSamlToken, [options], callback, Meteor.loginWithSamlTokenAndTOTP);\n};\n","import './TOTPPassword';\nimport './TOTPOAuth';\nimport './TOTPGoogle';\nimport './TOTPSaml';\nimport './TOTPLDAP';\nimport './TOTPCrowd';\nimport './overrideMeteorCall';\n","import { Meteor } from 'meteor/meteor';\n\nimport { t } from '../../utils/client';\nimport { process2faReturn } from '../../../client/lib/2fa/process2faReturn';\nimport { isTotpInvalidError } from '../../../client/lib/2fa/utils';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\n\nconst { call } = Meteor;\n\ntype Callback = {\n\t(error: unknown): void;\n\t(error: unknown, result: unknown): void;\n};\n\nconst callWithTotp =\n\t(methodName: string, args: unknown[], callback: Callback) =>\n\t(twoFactorCode: string, twoFactorMethod: string): unknown =>\n\t\tcall(methodName, ...args, { twoFactorCode, twoFactorMethod }, (error: unknown, result: unknown): void => {\n\t\t\tif (isTotpInvalidError(error)) {\n\t\t\t\t(error as { toastrShowed?: true }).toastrShowed = true;\n\t\t\t\tdispatchToastMessage({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tmessage: t('Invalid_two_factor_code'),\n\t\t\t\t});\n\t\t\t\tcallback(error);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcallback(error, result);\n\t\t});\n\nconst callWithoutTotp = (methodName: string, args: unknown[], callback: Callback) => (): unknown =>\n\tcall(methodName, ...args, (error: unknown, result: unknown): void => {\n\t\tprocess2faReturn({\n\t\t\terror,\n\t\t\tresult,\n\t\t\tonCode: callWithTotp(methodName, args, callback),\n\t\t\toriginalCallback: callback,\n\t\t\temailOrUsername: undefined,\n\t\t});\n\t});\n\nMeteor.call = function (methodName: string, ...args: unknown[]): unknown {\n\tconst callback = args.length > 0 && typeof args[args.length - 1] === 'function' ? (args.pop() as Callback) : (): void => undefined;\n\n\treturn callWithoutTotp(methodName, args, callback)();\n};\n","import './loadScript';\nimport './trackEvents';\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\n\nimport { settings } from '../../settings';\n\nTemplate.body.onRendered(function () {\n\tthis.autorun((c) => {\n\t\tconst piwikUrl = settings.get('PiwikAnalytics_enabled') && settings.get('PiwikAnalytics_url');\n\t\tconst piwikSiteId = piwikUrl && settings.get('PiwikAnalytics_siteId');\n\t\tconst piwikPrependDomain = piwikUrl && settings.get('PiwikAnalytics_prependDomain');\n\t\tconst piwikCookieDomain = piwikUrl && settings.get('PiwikAnalytics_cookieDomain');\n\t\tconst piwikDomains = piwikUrl && settings.get('PiwikAnalytics_domains');\n\t\tconst piwikAdditionalTracker = piwikUrl && settings.get('PiwikAdditionalTrackers');\n\t\tconst googleId = settings.get('GoogleAnalytics_enabled') && settings.get('GoogleAnalytics_ID');\n\t\tif (piwikSiteId || googleId) {\n\t\t\tc.stop();\n\n\t\t\tif (piwikSiteId) {\n\t\t\t\twindow._paq = window._paq || [];\n\t\t\t\tif (Meteor.userId()) {\n\t\t\t\t\twindow._paq.push(['setUserId', Meteor.userId()]);\n\t\t\t\t}\n\n\t\t\t\twindow._paq.push(['trackPageView']);\n\t\t\t\twindow._paq.push(['enableLinkTracking']);\n\t\t\t\tif (piwikPrependDomain) {\n\t\t\t\t\twindow._paq.push(['setDocumentTitle', `${window.location.hostname}/${document.title}`]);\n\t\t\t\t}\n\t\t\t\tconst upperLevelDomain = `*.${window.location.hostname.split('.').slice(1).join('.')}`;\n\t\t\t\tif (piwikCookieDomain) {\n\t\t\t\t\twindow._paq.push(['setCookieDomain', upperLevelDomain]);\n\t\t\t\t}\n\t\t\t\tif (piwikDomains) {\n\t\t\t\t\t// array\n\t\t\t\t\tconst domainsArray = piwikDomains.split(/\\n/);\n\t\t\t\t\tconst domains = [];\n\t\t\t\t\tfor (let i = 0; i < domainsArray.length; i++) {\n\t\t\t\t\t\t// only push domain if it contains a non whitespace character.\n\t\t\t\t\t\tif (/\\S/.test(domainsArray[i])) {\n\t\t\t\t\t\t\tdomains.push(`*.${domainsArray[i].trim()}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\twindow._paq.push(['setDomains', domains]);\n\t\t\t\t}\n\t\t\t\t(() => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (/\\S/.test(piwikAdditionalTracker)) {\n\t\t\t\t\t\t\t// piwikAdditionalTracker is not empty or whitespace only\n\t\t\t\t\t\t\tconst addTrackers = JSON.parse(piwikAdditionalTracker);\n\t\t\t\t\t\t\tfor (let i = 0; i < addTrackers.length; i++) {\n\t\t\t\t\t\t\t\tconst tracker = addTrackers[i];\n\t\t\t\t\t\t\t\twindow._paq.push(['addTracker', `${tracker.trackerURL}js/`, tracker.siteId]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// parsing JSON faild\n\t\t\t\t\t\tconsole.log('Error while parsing JSON value of \"piwikAdditionalTracker\": ', e);\n\t\t\t\t\t}\n\t\t\t\t\twindow._paq.push(['setTrackerUrl', `${piwikUrl}js/`]);\n\t\t\t\t\twindow._paq.push(['setSiteId', Number.parseInt(piwikSiteId)]);\n\t\t\t\t\tconst d = document;\n\t\t\t\t\tconst g = d.createElement('script');\n\t\t\t\t\tconst s = d.getElementsByTagName('script')[0];\n\t\t\t\t\tg.type = 'text/javascript';\n\t\t\t\t\tg.async = true;\n\t\t\t\t\tg.defer = true;\n\t\t\t\t\tg.src = `${piwikUrl}js/`;\n\t\t\t\t\ts.parentNode.insertBefore(g, s);\n\t\t\t\t})();\n\t\t\t}\n\n\t\t\tif (googleId) {\n\t\t\t\t/*eslint-disable */\n\t\t\t  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n\t\t\t  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n\t\t\t  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n\t\t\t  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\n\n\t\t\t  ga('create', googleId, 'auto');\n\t\t\t  ga('send', 'pageview');\n\t\t\t\t/* eslint-enable */\n\t\t\t}\n\t\t}\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../settings';\nimport { callbacks } from '../../../lib/callbacks';\nimport { ChatRoom } from '../../models';\n\nfunction trackEvent(category, action, label) {\n\tif (window._paq) {\n\t\twindow._paq.push(['trackEvent', category, action, label]);\n\t}\n\tif (window.ga) {\n\t\twindow.ga('send', 'event', category, action, label);\n\t}\n}\n\nif (!window._paq || window.ga) {\n\t// Trigger the trackPageView manually as the page views are only loaded when the loadScript.js code is executed\n\tFlowRouter.triggers.enter([\n\t\t(route) => {\n\t\t\tif (window._paq) {\n\t\t\t\tconst http = location.protocol;\n\t\t\t\tconst slashes = http.concat('//');\n\t\t\t\tconst host = slashes.concat(window.location.hostname);\n\t\t\t\twindow._paq.push(['setCustomUrl', host + route.path]);\n\t\t\t\twindow._paq.push(['trackPageView']);\n\t\t\t}\n\t\t\tif (window.ga) {\n\t\t\t\twindow.ga('send', 'pageview', route.path);\n\t\t\t}\n\t\t},\n\t]);\n\n\t// Login page has manual switches\n\tcallbacks.add(\n\t\t'loginPageStateChange',\n\t\t(state) => {\n\t\t\ttrackEvent('Navigation', 'Login Page State Change', state);\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-login-state-change',\n\t);\n\n\t// Messsages\n\tcallbacks.add(\n\t\t'afterSaveMessage',\n\t\t(message) => {\n\t\t\tif ((window._paq || window.ga) && settings.get('Analytics_features_messages')) {\n\t\t\t\tconst room = ChatRoom.findOne({ _id: message.rid });\n\t\t\t\ttrackEvent('Message', 'Send', `${room.name} (${room._id})`);\n\t\t\t}\n\t\t},\n\t\t2000,\n\t\t'trackEvents',\n\t);\n\n\t// Rooms\n\tcallbacks.add(\n\t\t'afterCreateChannel',\n\t\t(owner, room) => {\n\t\t\tif (settings.get('Analytics_features_rooms')) {\n\t\t\t\ttrackEvent('Room', 'Create', `${room.name} (${room._id})`);\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-after-create-channel',\n\t);\n\n\tcallbacks.add(\n\t\t'roomNameChanged',\n\t\t(room) => {\n\t\t\tif (settings.get('Analytics_features_rooms')) {\n\t\t\t\ttrackEvent('Room', 'Changed Name', `${room.name} (${room._id})`);\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-room-name-changed',\n\t);\n\n\tcallbacks.add(\n\t\t'roomTopicChanged',\n\t\t(room) => {\n\t\t\tif (settings.get('Analytics_features_rooms')) {\n\t\t\t\ttrackEvent('Room', 'Changed Topic', `${room.name} (${room._id})`);\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-room-topic-changed',\n\t);\n\n\tcallbacks.add(\n\t\t'roomAnnouncementChanged',\n\t\t(room) => {\n\t\t\tif (settings.get('Analytics_features_rooms')) {\n\t\t\t\ttrackEvent('Room', 'Changed Announcement', `${room.name} (${room._id})`);\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-room-announcement-changed',\n\t);\n\n\tcallbacks.add(\n\t\t'roomTypeChanged',\n\t\t(room) => {\n\t\t\tif (settings.get('Analytics_features_rooms')) {\n\t\t\t\ttrackEvent('Room', 'Changed Room Type', `${room.name} (${room._id})`);\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-room-type-changed',\n\t);\n\n\tcallbacks.add(\n\t\t'archiveRoom',\n\t\t(room) => {\n\t\t\tif (settings.get('Analytics_features_rooms')) {\n\t\t\t\ttrackEvent('Room', 'Archived', `${room.name} (${room._id})`);\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-archive-room',\n\t);\n\n\tcallbacks.add(\n\t\t'unarchiveRoom',\n\t\t(room) => {\n\t\t\tif (settings.get('Analytics_features_rooms')) {\n\t\t\t\ttrackEvent('Room', 'Unarchived', `${room.name} (${room._id})`);\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-unarchive-room',\n\t);\n\n\t// Users\n\t// Track logins and associate user ids with piwik\n\t(() => {\n\t\tlet oldUserId = null;\n\n\t\tTracker.autorun(() => {\n\t\t\tconst newUserId = Meteor.userId();\n\t\t\tif (oldUserId === null && newUserId) {\n\t\t\t\tif (window._paq && settings.get('Analytics_features_users')) {\n\t\t\t\t\ttrackEvent('User', 'Login', newUserId);\n\t\t\t\t\twindow._paq.push(['setUserId', newUserId]);\n\t\t\t\t}\n\t\t\t} else if (newUserId === null && oldUserId) {\n\t\t\t\tif (window._paq && settings.get('Analytics_features_users')) {\n\t\t\t\t\ttrackEvent('User', 'Logout', oldUserId);\n\t\t\t\t}\n\t\t\t}\n\t\t\toldUserId = Meteor.userId();\n\t\t});\n\t})();\n\n\tcallbacks.add(\n\t\t'userRegistered',\n\t\t() => {\n\t\t\tif (settings.get('Analytics_features_users')) {\n\t\t\t\ttrackEvent('User', 'Registered');\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'piwik-user-resitered',\n\t);\n\n\tcallbacks.add(\n\t\t'usernameSet',\n\t\t() => {\n\t\t\tif (settings.get('Analytics_features_users')) {\n\t\t\t\ttrackEvent('User', 'Username Set');\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'piweik-username-set',\n\t);\n\n\tcallbacks.add(\n\t\t'userPasswordReset',\n\t\t() => {\n\t\t\tif (settings.get('Analytics_features_users')) {\n\t\t\t\ttrackEvent('User', 'Reset Password');\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'piwik-user-password-reset',\n\t);\n\n\tcallbacks.add(\n\t\t'userConfirmationEmailRequested',\n\t\t() => {\n\t\t\tif (settings.get('Analytics_features_users')) {\n\t\t\t\ttrackEvent('User', 'Confirmation Email Requested');\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'piwik-user-confirmation-email-requested',\n\t);\n\n\tcallbacks.add(\n\t\t'userForgotPasswordEmailRequested',\n\t\t() => {\n\t\t\tif (settings.get('Analytics_features_users')) {\n\t\t\t\ttrackEvent('User', 'Forgot Password Email Requested');\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'piwik-user-forgot-password-email-requested',\n\t);\n\n\tcallbacks.add(\n\t\t'userStatusManuallySet',\n\t\t(status) => {\n\t\t\tif (settings.get('Analytics_features_users')) {\n\t\t\t\ttrackEvent('User', 'Status Manually Changed', status);\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-user-status-manually-set',\n\t);\n\n\tcallbacks.add(\n\t\t'userAvatarSet',\n\t\t(service) => {\n\t\t\tif (settings.get('Analytics_features_users')) {\n\t\t\t\ttrackEvent('User', 'Avatar Changed', service);\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-user-avatar-set',\n\t);\n\n\tcallbacks.add(\n\t\t'roomAvatarChanged',\n\t\t(room) => {\n\t\t\tif (settings.get('Analytics_features_rooms')) {\n\t\t\t\ttrackEvent('Room', 'Changed Avatar', `${room.name} (${room._id})`);\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-room-avatar-changed',\n\t);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { ServiceConfiguration } from 'meteor/service-configuration';\nimport { check, Match } from 'meteor/check';\nimport { Session } from 'meteor/session';\nimport './routes';\n\nconst handleError = (error) => error && Session.set('errorMessage', error.reason || 'Unknown error');\n\n// TODO: allow serviceConfig.loginStyle == popup\nMeteor.loginWithBlockstack = (options, callback = handleError) => {\n\tif (!options || !options.redirectURI) {\n\t\toptions = ServiceConfiguration.configurations.findOne({\n\t\t\tservice: 'blockstack',\n\t\t});\n\n\t\toptions.blockstackIDHost = Meteor.Device.isDesktop() ? 'http://localhost:8888/auth' : 'https://blockstack.org/auth';\n\n\t\toptions.scopes = ['store_write'];\n\t}\n\n\ttry {\n\t\tcheck(\n\t\t\toptions,\n\t\t\tMatch.ObjectIncluding({\n\t\t\t\tblockstackIDHost: String,\n\t\t\t\tredirectURI: String,\n\t\t\t\tmanifestURI: String,\n\t\t\t}),\n\t\t);\n\n\t\timport('blockstack/dist/blockstack').then(({ redirectToSignIn }) =>\n\t\t\tredirectToSignIn(options.redirectURI, options.manifestURI, options.scopes),\n\t\t);\n\t} catch (err) {\n\t\tcallback.call(Meteor, err);\n\t}\n};\n\nconst meteorLogout = Meteor.logout;\nMeteor.logout = (...args) => {\n\tconst serviceConfig = ServiceConfiguration.configurations.findOne({\n\t\tservice: 'blockstack',\n\t});\n\n\tconst blockstackAuth = Session.get('blockstack_auth');\n\n\tif (serviceConfig && blockstackAuth) {\n\t\tSession.delete('blockstack_auth');\n\t\timport('blockstack/dist/blockstack').then(({ signUserOut }) => signUserOut(window.location.href));\n\t}\n\n\treturn meteorLogout(...args);\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nconst blockstackLogin = (authResponse, userData = {}) => {\n\tAccounts.callLoginMethod({\n\t\tmethodArguments: [\n\t\t\t{\n\t\t\t\tblockstack: true,\n\t\t\t\tauthResponse,\n\t\t\t\tuserData,\n\t\t\t},\n\t\t],\n\t\tuserCallback() {\n\t\t\tFlowRouter.go('home');\n\t\t},\n\t});\n};\n\nFlowRouter.route('/_blockstack/validate', {\n\tname: 'blockstackValidate',\n\tasync action(params, queryParams) {\n\t\tconst blockstack = await import('blockstack/dist/blockstack');\n\n\t\tif (Meteor.userId()) {\n\t\t\tconsole.log('Blockstack Auth requested when already logged in. Reloading.');\n\t\t\treturn FlowRouter.go('home');\n\t\t}\n\n\t\tif (queryParams.authResponse == null) {\n\t\t\tthrow new Meteor.Error('Blockstack: Auth request without response param.');\n\t\t}\n\n\t\tlet userData;\n\n\t\tif (blockstack.isUserSignedIn()) {\n\t\t\tuserData = blockstack.loadUserData();\n\t\t}\n\n\t\tif (blockstack.isSignInPending()) {\n\t\t\tuserData = await blockstack.handlePendingSignIn();\n\t\t}\n\n\t\tblockstackLogin(queryParams.authResponse, userData);\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\nimport { Random } from 'meteor/random';\n\nimport { settings } from '../../settings';\n\nconst openCenteredPopup = function (url, width, height) {\n\tconst screenX = typeof window.screenX !== 'undefined' ? window.screenX : window.screenLeft;\n\tconst screenY = typeof window.screenY !== 'undefined' ? window.screenY : window.screenTop;\n\tconst outerWidth = typeof window.outerWidth !== 'undefined' ? window.outerWidth : document.body.clientWidth;\n\tconst outerHeight = typeof window.outerHeight !== 'undefined' ? window.outerHeight : document.body.clientHeight - 22;\n\t// XXX what is the 22?\n\n\t// Use `outerWidth - width` and `outerHeight - height` for help in\n\t// positioning the popup centered relative to the current window\n\tconst left = screenX + (outerWidth - width) / 2;\n\tconst top = screenY + (outerHeight - height) / 2;\n\tconst features = `width=${width},height=${height},left=${left},top=${top},scrollbars=yes`;\n\n\tconst newwindow = window.open(url, 'Login', features);\n\tif (newwindow.focus) {\n\t\tnewwindow.focus();\n\t}\n\n\treturn newwindow;\n};\n\nMeteor.loginWithCas = function (options, callback) {\n\toptions = options || {};\n\n\tconst credentialToken = Random.id();\n\tconst login_url = settings.get('CAS_login_url');\n\tconst popup_width = settings.get('CAS_popup_width');\n\tconst popup_height = settings.get('CAS_popup_height');\n\n\tif (!login_url) {\n\t\treturn;\n\t}\n\n\tconst appUrl = Meteor.absoluteUrl().replace(/\\/$/, '') + __meteor_runtime_config__.ROOT_URL_PATH_PREFIX;\n\t// check if the provided CAS URL already has some parameters\n\tconst delim = login_url.split('?').length > 1 ? '&' : '?';\n\tconst loginUrl = `${login_url}${delim}service=${appUrl}/_cas/${credentialToken}`;\n\n\tconst popup = openCenteredPopup(loginUrl, popup_width || 800, popup_height || 600);\n\n\tconst checkPopupOpen = setInterval(function () {\n\t\tlet popupClosed;\n\t\ttry {\n\t\t\t// Fix for #328 - added a second test criteria (popup.closed === undefined)\n\t\t\t// to humour this Android quirk:\n\t\t\t// http://code.google.com/p/android/issues/detail?id=21061\n\t\t\tpopupClosed = popup.closed || popup.closed === undefined;\n\t\t} catch (e) {\n\t\t\t// For some unknown reason, IE9 (and others?) sometimes (when\n\t\t\t// the popup closes too quickly?) throws \"SCRIPT16386: No such\n\t\t\t// interface supported\" when trying to read 'popup.closed'. Try\n\t\t\t// again in 100ms.\n\t\t\treturn;\n\t\t}\n\n\t\tif (popupClosed) {\n\t\t\tclearInterval(checkPopupOpen);\n\n\t\t\t// check auth on server.\n\t\t\tAccounts.callLoginMethod({\n\t\t\t\tmethodArguments: [{ cas: { credentialToken } }],\n\t\t\t\tuserCallback: callback,\n\t\t\t});\n\t\t}\n\t}, 100);\n};\n","import './cas_client';\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../settings/client';\n\nMeteor.startup(function () {\n\tTracker.autorun(function () {\n\t\tMeteor.absoluteUrl.defaultOptions.secure = Boolean(settings.get('Force_SSL'));\n\t});\n});\n","import './loginHelper';\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\n\nMeteor.loginWithCrowd = function (...args) {\n\t// Pull username and password\n\tconst username = args.shift();\n\tconst password = args.shift();\n\tconst callback = args.shift();\n\n\tconst loginRequest = {\n\t\tcrowd: true,\n\t\tusername,\n\t\tcrowdPassword: password,\n\t};\n\tAccounts.callLoginMethod({\n\t\tmethodArguments: [loginRequest],\n\t\tuserCallback(error) {\n\t\t\tif (callback) {\n\t\t\t\tif (error) {\n\t\t\t\t\treturn callback(error);\n\t\t\t\t}\n\t\t\t\treturn callback();\n\t\t\t}\n\t\t},\n\t});\n};\n","import { capitalize } from '@rocket.chat/string-helpers';\nimport { Meteor } from 'meteor/meteor';\nimport { Match } from 'meteor/check';\nimport { Accounts } from 'meteor/accounts-base';\nimport { Random } from 'meteor/random';\nimport { ServiceConfiguration } from 'meteor/service-configuration';\nimport { OAuth } from 'meteor/oauth';\n\nimport './swapSessionStorage';\nimport { isURL } from '../../utils/lib/isURL';\n\n// Request custom OAuth credentials for the user\n// @param options {optional}\n// @param credentialRequestCompleteCallback {Function} Callback function to call on\n//   completion. Takes one argument, credentialToken on success, or Error on\n//   error.\n\nexport class CustomOAuth {\n\tconstructor(name, options) {\n\t\tthis.name = name;\n\t\tif (!Match.test(this.name, String)) {\n\t\t\tthrow new Meteor.Error('CustomOAuth: Name is required and must be String');\n\t\t}\n\n\t\tthis.configure(options);\n\n\t\tAccounts.oauth.registerService(this.name);\n\n\t\tthis.configureLogin();\n\t}\n\n\tconfigure(options) {\n\t\tif (!Match.test(options, Object)) {\n\t\t\tthrow new Meteor.Error('CustomOAuth: Options is required and must be Object');\n\t\t}\n\n\t\tif (!Match.test(options.serverURL, String)) {\n\t\t\tthrow new Meteor.Error('CustomOAuth: Options.serverURL is required and must be String');\n\t\t}\n\n\t\tif (!Match.test(options.authorizePath, String)) {\n\t\t\toptions.authorizePath = '/oauth/authorize';\n\t\t}\n\n\t\tif (!Match.test(options.scope, String)) {\n\t\t\toptions.scope = 'openid';\n\t\t}\n\n\t\tthis.serverURL = options.serverURL;\n\t\tthis.authorizePath = options.authorizePath;\n\t\tthis.scope = options.scope;\n\n\t\tif (!isURL(this.authorizePath)) {\n\t\t\tthis.authorizePath = this.serverURL + this.authorizePath;\n\t\t}\n\t}\n\n\tconfigureLogin() {\n\t\tconst loginWithService = `loginWith${capitalize(String(this.name || ''))}`;\n\n\t\tMeteor[loginWithService] = (options, callback) => {\n\t\t\t// support a callback without options\n\t\t\tif (!callback && typeof options === 'function') {\n\t\t\t\tcallback = options;\n\t\t\t\toptions = null;\n\t\t\t}\n\n\t\t\tconst credentialRequestCompleteCallback = Accounts.oauth.credentialRequestCompleteHandler(callback);\n\t\t\tthis.requestCredential(options, credentialRequestCompleteCallback);\n\t\t};\n\t}\n\n\trequestCredential(options, credentialRequestCompleteCallback) {\n\t\t// support both (options, callback) and (callback).\n\t\tif (!credentialRequestCompleteCallback && typeof options === 'function') {\n\t\t\tcredentialRequestCompleteCallback = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tconst config = ServiceConfiguration.configurations.findOne({ service: this.name });\n\t\tif (!config) {\n\t\t\tif (credentialRequestCompleteCallback) {\n\t\t\t\tcredentialRequestCompleteCallback(new ServiceConfiguration.ConfigError());\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tconst credentialToken = Random.secret();\n\t\tconst loginStyle = OAuth._loginStyle(this.name, config, options);\n\n\t\tconst separator = this.authorizePath.indexOf('?') !== -1 ? '&' : '?';\n\n\t\tconst loginUrl =\n\t\t\t`${this.authorizePath}${separator}client_id=${config.clientId}&redirect_uri=${encodeURIComponent(\n\t\t\t\tOAuth._redirectUri(this.name, config),\n\t\t\t)}&response_type=code` +\n\t\t\t`&state=${encodeURIComponent(OAuth._stateParam(loginStyle, credentialToken, options.redirectUrl))}&scope=${encodeURIComponent(\n\t\t\t\tthis.scope,\n\t\t\t)}`;\n\n\t\tOAuth.launchLogin({\n\t\t\tloginService: this.name,\n\t\t\tloginStyle,\n\t\t\tloginUrl,\n\t\t\tcredentialRequestCompleteCallback,\n\t\t\tcredentialToken,\n\t\t\tpopupOptions: {\n\t\t\t\twidth: 900,\n\t\t\t\theight: 450,\n\t\t\t},\n\t\t});\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\nimport { OAuth } from 'meteor/oauth';\nimport { Reload } from 'meteor/reload';\n\n// TODO: This is a nasty workaround and should be removed as soon as possible\n// Firefox is losing the sessionStorage data (v >= 79.0) after the redirect\n\nif (navigator.userAgent.indexOf('Firefox') !== -1) {\n\tconst KEY_NAME = 'Swapped_Storage_Workaround';\n\n\tOAuth.saveDataForRedirect = (loginService, credentialToken) => {\n\t\tMeteor._localStorage.setItem(KEY_NAME, JSON.stringify({ loginService, credentialToken }));\n\t\tReload._migrate(null, { immediateMigration: true });\n\t};\n\n\tOAuth.getDataAfterRedirect = () => {\n\t\tlet migrationData = Meteor._localStorage.getItem(KEY_NAME);\n\t\tMeteor._localStorage.removeItem(KEY_NAME);\n\t\ttry {\n\t\t\tmigrationData = JSON.parse(migrationData);\n\t\t} catch (error) {\n\t\t\tmigrationData = null;\n\t\t}\n\n\t\tif (!(migrationData && migrationData.credentialToken)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { credentialToken } = migrationData;\n\t\tconst key = OAuth._storageTokenPrefix + credentialToken;\n\t\tlet credentialSecret;\n\t\ttry {\n\t\t\tcredentialSecret = sessionStorage.getItem(key);\n\t\t\tsessionStorage.removeItem(key);\n\t\t} catch (e) {\n\t\t\tMeteor._debug('error retrieving credentialSecret', e);\n\t\t}\n\t\treturn {\n\t\t\tloginService: migrationData.loginService,\n\t\t\tcredentialToken,\n\t\t\tcredentialSecret,\n\t\t};\n\t};\n}\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/custom_oauth_client.js');\n}\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/custom_oauth_server.js');\n}\n","/**\n * @license MIT\n * @fileOverview Favico animations\n * @author Miroslav Magda, http://blog.ejci.net\n * @version 0.3.10\n */\n\n/**\n * Create new favico instance\n * @param {Object} Options\n * @return {Object} Favico object\n * @example\n * var favico = new Favico({\n *    bgColor : '#d00',\n *    textColor : '#fff',\n *    fontFamily : 'sans-serif',\n *    fontStyle : 'bold',\n *    position : 'down',\n *    type : 'circle',\n *    animation : 'slide',\n *    dataUrl: function(url){},\n *    win: top\n * });\n */\n/* eslint-disable */\n\n\texport const Favico = (function(opt) {\n\t\t'use strict';\n\t\topt = (opt) ? opt : {};\n\t\tvar _def = {\n\t\t\tbgColor: '#d00',\n\t\t\ttextColor: '#fff',\n\t\t\tfontFamily: 'sans-serif', //Arial,Verdana,Times New Roman,serif,sans-serif,...\n\t\t\tfontStyle: 'bold', //normal,italic,oblique,bold,bolder,lighter,100,200,300,400,500,600,700,800,900\n\t\t\ttype: 'circle',\n\t\t\tposition: 'down', // down, up, left, leftup (upleft)\n\t\t\tanimation: 'slide',\n\t\t\telementId: false,\n\t\t\tdataUrl: false,\n\t\t\twin: window\n\t\t};\n\t\tvar _opt, _orig, _h, _w, _canvas, _context, _img, _ready, _lastBadge, _running, _readyCb, _stop, _browser, _animTimeout, _drawTimeout, _doc;\n\n\t\t_browser = {};\n\t\t_browser.ff = typeof InstallTrigger !== 'undefined';\n\t\t_browser.chrome = !!window.chrome;\n\t\t_browser.opera = !!window.opera || navigator.userAgent.indexOf('Opera') >= 0;\n\t\t_browser.ie = /*@cc_on!@*/ false;\n\t\t_browser.safari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0;\n\t\t_browser.supported = (_browser.chrome || _browser.ff || _browser.opera);\n\n\t\tvar _queue = [];\n\t\t_readyCb = function() {};\n\t\t_ready = _stop = false;\n\t\t/**\n\t\t * Initialize favico\n\t\t */\n\t\tvar init = function() {\n\t\t\t//merge initial options\n\t\t\t_opt = merge(_def, opt);\n\t\t\t_opt.bgColor = hexToRgb(_opt.bgColor);\n\t\t\t_opt.textColor = hexToRgb(_opt.textColor);\n\t\t\t_opt.position = _opt.position.toLowerCase();\n\t\t\t_opt.animation = (animation.types['' + _opt.animation]) ? _opt.animation : _def.animation;\n\n\t\t\t_doc = _opt.win.document;\n\n\t\t\tvar isUp = _opt.position.indexOf('up') > -1;\n\t\t\tvar isLeft = _opt.position.indexOf('left') > -1;\n\n\t\t\t//transform the animations\n\t\t\tif (isUp || isLeft) {\n\t\t\t\tfor (var a in animation.types) {\n\t\t\t\t\tfor (var i = 0; i < animation.types[a].length; i++) {\n\t\t\t\t\t\tvar step = animation.types[a][i];\n\n\t\t\t\t\t\tif (isUp) {\n\t\t\t\t\t\t\tif (step.y < 0.6) {\n\t\t\t\t\t\t\t\tstep.y = step.y - 0.4;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tstep.y = step.y - 2 * step.y + (1 - step.w);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (isLeft) {\n\t\t\t\t\t\t\tif (step.x < 0.6) {\n\t\t\t\t\t\t\t\tstep.x = step.x - 0.4;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tstep.x = step.x - 2 * step.x + (1 - step.h);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tanimation.types[a][i] = step;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t_opt.type = (type['' + _opt.type]) ? _opt.type : _def.type;\n\n\t\t\t_orig = link.getIcons();\n\t\t\t//create temp canvas\n\t\t\t_canvas = document.createElement('canvas');\n\t\t\t//create temp image\n\t\t\t_img = document.createElement('img');\n\t\t\tvar lastIcon = _orig[_orig.length - 1];\n\t\t\tif (lastIcon.hasAttribute('href')) {\n\t\t\t\t_img.setAttribute('crossOrigin', 'anonymous');\n\t\t\t\t//get width/height\n\t\t\t\t_img.onload = function() {\n\t\t\t\t\t_h = (_img.height > 0) ? _img.height : 32;\n\t\t\t\t\t_w = (_img.width > 0) ? _img.width : 32;\n\t\t\t\t\t_canvas.height = _h;\n\t\t\t\t\t_canvas.width = _w;\n\t\t\t\t\t_context = _canvas.getContext('2d');\n\t\t\t\t\ticon.ready();\n\t\t\t\t};\n\t\t\t\t_img.setAttribute('src', lastIcon.getAttribute('href'));\n\t\t\t} else {\n\t\t\t\t_img.onload = function() {\n\t\t\t\t\t_h = 32;\n\t\t\t\t\t_w = 32;\n\t\t\t\t\t_img.height = _h;\n\t\t\t\t\t_img.width = _w;\n\t\t\t\t\t_canvas.height = _h;\n\t\t\t\t\t_canvas.width = _w;\n\t\t\t\t\t_context = _canvas.getContext('2d');\n\t\t\t\t\ticon.ready();\n\t\t\t\t};\n\t\t\t\t_img.setAttribute('src', '');\n\t\t\t}\n\n\t\t};\n\t\t/**\n\t\t * Icon namespace\n\t\t */\n\t\tvar icon = {};\n\t\t/**\n\t\t * Icon is ready (reset icon) and start animation (if ther is any)\n\t\t */\n\t\ticon.ready = function() {\n\t\t\t_ready = true;\n\t\t\ticon.reset();\n\t\t\t_readyCb();\n\t\t};\n\t\t/**\n\t\t * Reset icon to default state\n\t\t */\n\t\ticon.reset = function() {\n\t\t\t//reset\n\t\t\tif (!_ready) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_queue = [];\n\t\t\t_lastBadge = false;\n\t\t\t_running = false;\n\t\t\t_context.clearRect(0, 0, _w, _h);\n\t\t\t_context.drawImage(_img, 0, 0, _w, _h);\n\t\t\t//_stop=true;\n\t\t\tlink.setIcon(_canvas);\n\t\t\t//webcam('stop');\n\t\t\t//video('stop');\n\t\t\twindow.clearTimeout(_animTimeout);\n\t\t\twindow.clearTimeout(_drawTimeout);\n\t\t};\n\t\t/**\n\t\t * Start animation\n\t\t */\n\t\ticon.start = function() {\n\t\t\tif (!_ready || _running) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar finished = function() {\n\t\t\t\t_lastBadge = _queue[0];\n\t\t\t\t_running = false;\n\t\t\t\tif (_queue.length > 0) {\n\t\t\t\t\t_queue.shift();\n\t\t\t\t\ticon.start();\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (_queue.length > 0) {\n\t\t\t\t_running = true;\n\t\t\t\tvar run = function() {\n\t\t\t\t\t// apply options for this animation\n\t\t\t\t\t['type', 'animation', 'bgColor', 'textColor', 'fontFamily', 'fontStyle'].forEach(function(a) {\n\t\t\t\t\t\tif (a in _queue[0].options) {\n\t\t\t\t\t\t\t_opt[a] = _queue[0].options[a];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tanimation.run(_queue[0].options, function() {\n\t\t\t\t\t\tfinished();\n\t\t\t\t\t}, false);\n\t\t\t\t};\n\t\t\t\tif (_lastBadge) {\n\t\t\t\t\tanimation.run(_lastBadge.options, function() {\n\t\t\t\t\t\trun();\n\t\t\t\t\t}, true);\n\t\t\t\t} else {\n\t\t\t\t\trun();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Badge types\n\t\t */\n\t\tvar type = {};\n\t\tvar options = function(opt) {\n\t\t\topt.n = ((typeof opt.n) === 'number') ? Math.abs(opt.n | 0) : opt.n;\n\t\t\topt.x = _w * opt.x;\n\t\t\topt.y = _h * opt.y;\n\t\t\topt.w = _w * opt.w;\n\t\t\topt.h = _h * opt.h;\n\t\t\topt.len = ('' + opt.n).length;\n\t\t\treturn opt;\n\t\t};\n\t\t/**\n\t\t * Generate circle\n\t\t * @param {Object} opt Badge options\n\t\t */\n\t\ttype.circle = function(opt) {\n\t\t\topt = options(opt);\n\t\t\tvar more = false;\n\t\t\tif (opt.len === 2) {\n\t\t\t\topt.x = opt.x - opt.w * 0.4;\n\t\t\t\topt.w = opt.w * 1.4;\n\t\t\t\tmore = true;\n\t\t\t} else if (opt.len >= 3) {\n\t\t\t\topt.x = opt.x - opt.w * 0.65;\n\t\t\t\topt.w = opt.w * 1.65;\n\t\t\t\tmore = true;\n\t\t\t}\n\t\t\t_context.clearRect(0, 0, _w, _h);\n\t\t\t_context.drawImage(_img, 0, 0, _w, _h);\n\t\t\t_context.beginPath();\n\t\t\t_context.font = _opt.fontStyle + ' ' + Math.floor(opt.h * (opt.n > 99 ? 0.85 : 1)) + 'px ' + _opt.fontFamily;\n\t\t\t_context.textAlign = 'center';\n\t\t\tif (more) {\n\t\t\t\t_context.moveTo(opt.x + opt.w / 2, opt.y);\n\t\t\t\t_context.lineTo(opt.x + opt.w - opt.h / 2, opt.y);\n\t\t\t\t_context.quadraticCurveTo(opt.x + opt.w, opt.y, opt.x + opt.w, opt.y + opt.h / 2);\n\t\t\t\t_context.lineTo(opt.x + opt.w, opt.y + opt.h - opt.h / 2);\n\t\t\t\t_context.quadraticCurveTo(opt.x + opt.w, opt.y + opt.h, opt.x + opt.w - opt.h / 2, opt.y + opt.h);\n\t\t\t\t_context.lineTo(opt.x + opt.h / 2, opt.y + opt.h);\n\t\t\t\t_context.quadraticCurveTo(opt.x, opt.y + opt.h, opt.x, opt.y + opt.h - opt.h / 2);\n\t\t\t\t_context.lineTo(opt.x, opt.y + opt.h / 2);\n\t\t\t\t_context.quadraticCurveTo(opt.x, opt.y, opt.x + opt.h / 2, opt.y);\n\t\t\t} else {\n\t\t\t\t_context.arc(opt.x + opt.w / 2, opt.y + opt.h / 2, opt.h / 2, 0, 2 * Math.PI);\n\t\t\t}\n\t\t\t_context.fillStyle = 'rgba(' + _opt.bgColor.r + ',' + _opt.bgColor.g + ',' + _opt.bgColor.b + ',' + opt.o + ')';\n\t\t\t_context.fill();\n\t\t\t_context.closePath();\n\t\t\t_context.beginPath();\n\t\t\t_context.stroke();\n\t\t\t_context.fillStyle = 'rgba(' + _opt.textColor.r + ',' + _opt.textColor.g + ',' + _opt.textColor.b + ',' + opt.o + ')';\n\t\t\t//_context.fillText((more) ? '9+' : opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n\t\t\tif ((typeof opt.n) === 'number' && opt.n > 999) {\n\t\t\t\t_context.fillText(((opt.n > 9999) ? 9 : Math.floor(opt.n / 1000)) + 'k+', Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.2));\n\t\t\t} else {\n\t\t\t\t_context.fillText(opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n\t\t\t}\n\t\t\t_context.closePath();\n\t\t};\n\t\t/**\n\t\t * Generate rectangle\n\t\t * @param {Object} opt Badge options\n\t\t */\n\t\ttype.rectangle = function(opt) {\n\t\t\topt = options(opt);\n\t\t\tvar more = false;\n\t\t\tif (opt.len === 2) {\n\t\t\t\topt.x = opt.x - opt.w * 0.4;\n\t\t\t\topt.w = opt.w * 1.4;\n\t\t\t\tmore = true;\n\t\t\t} else if (opt.len >= 3) {\n\t\t\t\topt.x = opt.x - opt.w * 0.65;\n\t\t\t\topt.w = opt.w * 1.65;\n\t\t\t\tmore = true;\n\t\t\t}\n\t\t\t_context.clearRect(0, 0, _w, _h);\n\t\t\t_context.drawImage(_img, 0, 0, _w, _h);\n\t\t\t_context.beginPath();\n\t\t\t_context.font = _opt.fontStyle + ' ' + Math.floor(opt.h * (opt.n > 99 ? 0.9 : 1)) + 'px ' + _opt.fontFamily;\n\t\t\t_context.textAlign = 'center';\n\t\t\t_context.fillStyle = 'rgba(' + _opt.bgColor.r + ',' + _opt.bgColor.g + ',' + _opt.bgColor.b + ',' + opt.o + ')';\n\t\t\t_context.fillRect(opt.x, opt.y, opt.w, opt.h);\n\t\t\t_context.fillStyle = 'rgba(' + _opt.textColor.r + ',' + _opt.textColor.g + ',' + _opt.textColor.b + ',' + opt.o + ')';\n\t\t\t//_context.fillText((more) ? '9+' : opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n\t\t\tif ((typeof opt.n) === 'number' && opt.n > 999) {\n\t\t\t\t_context.fillText(((opt.n > 9999) ? 9 : Math.floor(opt.n / 1000)) + 'k+', Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.2));\n\t\t\t} else {\n\t\t\t\t_context.fillText(opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n\t\t\t}\n\t\t\t_context.closePath();\n\t\t};\n\n\t\t/**\n\t\t * Set badge\n\t\t */\n\t\tvar badge = function(number, opts) {\n\t\t\topts = ((typeof opts) === 'string' ? {\n\t\t\t\tanimation: opts\n\t\t\t} : opts) || {};\n\t\t\t_readyCb = function() {\n\t\t\t\ttry {\n\t\t\t\t\tif (typeof(number) === 'number' ? (number > 0) : (number !== '')) {\n\t\t\t\t\t\tvar q = {\n\t\t\t\t\t\t\ttype: 'badge',\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tn: number\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif ('animation' in opts && animation.types['' + opts.animation]) {\n\t\t\t\t\t\t\tq.options.animation = '' + opts.animation;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ('type' in opts && type['' + opts.type]) {\n\t\t\t\t\t\t\tq.options.type = '' + opts.type;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t['bgColor', 'textColor'].forEach(function(o) {\n\t\t\t\t\t\t\tif (o in opts) {\n\t\t\t\t\t\t\t\tq.options[o] = hexToRgb(opts[o]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\t['fontStyle', 'fontFamily'].forEach(function(o) {\n\t\t\t\t\t\t\tif (o in opts) {\n\t\t\t\t\t\t\t\tq.options[o] = opts[o];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_queue.push(q);\n\t\t\t\t\t\tif (_queue.length > 100) {\n\t\t\t\t\t\t\tthrow new Error('Too many badges requests in queue.');\n\t\t\t\t\t\t}\n\t\t\t\t\t\ticon.start();\n\t\t\t\t\t} else {\n\t\t\t\t\t\ticon.reset();\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthrow new Error('Error setting badge. Message: ' + e.message);\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (_ready) {\n\t\t\t\t_readyCb();\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Set image as icon\n\t\t */\n\t\tvar image = function(imageElement) {\n\t\t\t_readyCb = function() {\n\t\t\t\ttry {\n\t\t\t\t\tvar w = imageElement.width;\n\t\t\t\t\tvar h = imageElement.height;\n\t\t\t\t\tvar newImg = document.createElement('img');\n\t\t\t\t\tvar ratio = (w / _w < h / _h) ? (w / _w) : (h / _h);\n\t\t\t\t\tnewImg.setAttribute('crossOrigin', 'anonymous');\n\t\t\t\t\tnewImg.onload = function() {\n\t\t\t\t\t\t_context.clearRect(0, 0, _w, _h);\n\t\t\t\t\t\t_context.drawImage(newImg, 0, 0, _w, _h);\n\t\t\t\t\t\tlink.setIcon(_canvas);\n\t\t\t\t\t};\n\t\t\t\t\tnewImg.setAttribute('src', imageElement.getAttribute('src'));\n\t\t\t\t\tnewImg.height = (h / ratio);\n\t\t\t\t\tnewImg.width = (w / ratio);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthrow new Error('Error setting image. Message: ' + e.message);\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (_ready) {\n\t\t\t\t_readyCb();\n\t\t\t}\n\t\t};\n\t\t/**\n\t\t * Set video as icon\n\t\t */\n\t\tvar video = function(videoElement) {\n\t\t\t_readyCb = function() {\n\t\t\t\ttry {\n\t\t\t\t\tif (videoElement === 'stop') {\n\t\t\t\t\t\t_stop = true;\n\t\t\t\t\t\ticon.reset();\n\t\t\t\t\t\t_stop = false;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t//var w = videoElement.width;\n\t\t\t\t\t//var h = videoElement.height;\n\t\t\t\t\t//var ratio = (w / _w < h / _h) ? (w / _w) : (h / _h);\n\t\t\t\t\tvideoElement.addEventListener('play', function() {\n\t\t\t\t\t\tdrawVideo(this);\n\t\t\t\t\t}, false);\n\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthrow new Error('Error setting video. Message: ' + e.message);\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (_ready) {\n\t\t\t\t_readyCb();\n\t\t\t}\n\t\t};\n\t\t/**\n\t\t * Set video as icon\n\t\t */\n\t\tvar webcam = function(action) {\n\t\t\t//UR\n\t\t\tif (!window.URL || !window.URL.createObjectURL) {\n\t\t\t\twindow.URL = window.URL || {};\n\t\t\t\twindow.URL.createObjectURL = function(obj) {\n\t\t\t\t\treturn obj;\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (_browser.supported) {\n\t\t\t\tvar newVideo = false;\n\t\t\t\tnavigator.getUserMedia = navigator.getUserMedia || navigator.oGetUserMedia || navigator.msGetUserMedia || navigator.mozGetUserMedia || navigator.webkitGetUserMedia;\n\t\t\t\t_readyCb = function() {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (action === 'stop') {\n\t\t\t\t\t\t\t_stop = true;\n\t\t\t\t\t\t\ticon.reset();\n\t\t\t\t\t\t\t_stop = false;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnewVideo = document.createElement('video');\n\t\t\t\t\t\tnewVideo.width = _w;\n\t\t\t\t\t\tnewVideo.height = _h;\n\t\t\t\t\t\tnavigator.getUserMedia({\n\t\t\t\t\t\t\tvideo: true,\n\t\t\t\t\t\t\taudio: false\n\t\t\t\t\t\t}, function(stream) {\n\t\t\t\t\t\t\tnewVideo.src = URL.createObjectURL(stream);\n\t\t\t\t\t\t\tnewVideo.play();\n\t\t\t\t\t\t\tdrawVideo(newVideo);\n\t\t\t\t\t\t}, function() {});\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tthrow new Error('Error setting webcam. Message: ' + e.message);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tif (_ready) {\n\t\t\t\t\t_readyCb();\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\t/**\n\t\t * Draw video to context and repeat :)\n\t\t */\n\t\tfunction drawVideo(video) {\n\t\t\tif (video.paused || video.ended || _stop) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t//nasty hack for FF webcam (Thanks to Julian Ćwirko, kontakt@redsunmedia.pl)\n\t\t\ttry {\n\t\t\t\t_context.clearRect(0, 0, _w, _h);\n\t\t\t\t_context.drawImage(video, 0, 0, _w, _h);\n\t\t\t} catch (e) {\n\n\t\t\t}\n\t\t\t_drawTimeout = setTimeout(function() {\n\t\t\t\tdrawVideo(video);\n\t\t\t}, animation.duration);\n\t\t\tlink.setIcon(_canvas);\n\t\t}\n\n\t\tvar link = {};\n\t\t/**\n\t\t * Get icons from HEAD tag or create a new <link> element\n\t\t */\n\t\tlink.getIcons = function() {\n\t\t\tvar elms = [];\n\t\t\t//get link element\n\t\t\tvar getLinks = function() {\n\t\t\t\tvar icons = [];\n\t\t\t\tvar links = _doc.getElementsByTagName('head')[0].getElementsByTagName('link');\n\t\t\t\tfor (var i = 0; i < links.length; i++) {\n\t\t\t\t\tif ((/(^|\\s)icon(\\s|$)/i).test(links[i].getAttribute('rel'))) {\n\t\t\t\t\t\ticons.push(links[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn icons;\n\t\t\t};\n\t\t\tif (_opt.element) {\n\t\t\t\telms = [_opt.element];\n\t\t\t} else if (_opt.elementId) {\n\t\t\t\t//if img element identified by elementId\n\t\t\t\telms = [_doc.getElementById(_opt.elementId)];\n\t\t\t\telms[0].setAttribute('href', elms[0].getAttribute('src'));\n\t\t\t} else {\n\t\t\t\t//if link element\n\t\t\t\telms = getLinks();\n\t\t\t\tif (elms.length === 0) {\n\t\t\t\t\telms = [_doc.createElement('link')];\n\t\t\t\t\telms[0].setAttribute('rel', 'icon');\n\t\t\t\t\t_doc.getElementsByTagName('head')[0].appendChild(elms[0]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telms.forEach(function(item) {\n\t\t\t\titem.setAttribute('type', 'image/png');\n\t\t\t});\n\t\t\treturn elms;\n\t\t};\n\t\tlink.setIcon = function(canvas) {\n\t\t\tvar url = canvas.toDataURL('image/png');\n\t\t\tif (_opt.dataUrl) {\n\t\t\t\t//if using custom exporter\n\t\t\t\t_opt.dataUrl(url);\n\t\t\t}\n\t\t\tif (_opt.element) {\n\t\t\t\t_opt.element.setAttribute('href', url);\n\t\t\t\t_opt.element.setAttribute('src', url);\n\t\t\t} else if (_opt.elementId) {\n\t\t\t\t//if is attached to element (image)\n\t\t\t\tvar elm = _doc.getElementById(_opt.elementId);\n\t\t\t\telm.setAttribute('href', url);\n\t\t\t\telm.setAttribute('src', url);\n\t\t\t} else {\n\t\t\t\t//if is attached to fav icon\n\t\t\t\tif (_browser.ff || _browser.opera) {\n\t\t\t\t\t//for FF we need to \"recreate\" element, atach to dom and remove old <link>\n\t\t\t\t\t//var originalType = _orig.getAttribute('rel');\n\t\t\t\t\tvar old = _orig[_orig.length - 1];\n\t\t\t\t\tvar newIcon = _doc.createElement('link');\n\t\t\t\t\t_orig = [newIcon];\n\t\t\t\t\t//_orig.setAttribute('rel', originalType);\n\t\t\t\t\tif (_browser.opera) {\n\t\t\t\t\t\tnewIcon.setAttribute('rel', 'icon');\n\t\t\t\t\t}\n\t\t\t\t\tnewIcon.setAttribute('rel', 'icon');\n\t\t\t\t\tnewIcon.setAttribute('type', 'image/png');\n\t\t\t\t\t_doc.getElementsByTagName('head')[0].appendChild(newIcon);\n\t\t\t\t\tnewIcon.setAttribute('href', url);\n\t\t\t\t\tif (old.parentNode) {\n\t\t\t\t\t\told.parentNode.removeChild(old);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t_orig.forEach(function(icon) {\n\t\t\t\t\t\ticon.setAttribute('href', url);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t//http://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb#answer-5624139\n\t\t//HEX to RGB convertor\n\t\tfunction hexToRgb(hex) {\n\t\t\tvar shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n\t\t\thex = hex.replace(shorthandRegex, function(m, r, g, b) {\n\t\t\t\treturn r + r + g + g + b + b;\n\t\t\t});\n\t\t\tvar result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\t\t\treturn result ? {\n\t\t\t\tr: parseInt(result[1], 16),\n\t\t\t\tg: parseInt(result[2], 16),\n\t\t\t\tb: parseInt(result[3], 16)\n\t\t\t} : false;\n\t\t}\n\n\t\t/**\n\t\t * Merge options\n\t\t */\n\t\tfunction merge(def, opt) {\n\t\t\tvar mergedOpt = {};\n\t\t\tvar attrname;\n\t\t\tfor (attrname in def) {\n\t\t\t\tmergedOpt[attrname] = def[attrname];\n\t\t\t}\n\t\t\tfor (attrname in opt) {\n\t\t\t\tmergedOpt[attrname] = opt[attrname];\n\t\t\t}\n\t\t\treturn mergedOpt;\n\t\t}\n\n\t\t/**\n\t\t * Cross-browser page visibility shim\n\t\t * http://stackoverflow.com/questions/12536562/detect-whether-a-window-is-visible\n\t\t */\n\t\tfunction isPageHidden() {\n\t\t\treturn _doc.hidden || _doc.msHidden || _doc.webkitHidden || _doc.mozHidden;\n\t\t}\n\n\t\t/**\n\t\t * @namespace animation\n\t\t */\n\t\tvar animation = {};\n\t\t/**\n\t\t * Animation \"frame\" duration\n\t\t */\n\t\tanimation.duration = 40;\n\t\t/**\n\t\t * Animation types (none,fade,pop,slide)\n\t\t */\n\t\tanimation.types = {};\n\t\tanimation.types.fade = [{\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 0.0\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 0.1\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 0.2\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 0.3\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 0.4\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 0.5\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 0.6\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 0.7\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 0.8\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 0.9\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1.0\n\t\t}];\n\t\tanimation.types.none = [{\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}];\n\t\tanimation.types.pop = [{\n\t\t\tx: 1,\n\t\t\ty: 1,\n\t\t\tw: 0,\n\t\t\th: 0,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.9,\n\t\t\ty: 0.9,\n\t\t\tw: 0.1,\n\t\t\th: 0.1,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.8,\n\t\t\ty: 0.8,\n\t\t\tw: 0.2,\n\t\t\th: 0.2,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.7,\n\t\t\ty: 0.7,\n\t\t\tw: 0.3,\n\t\t\th: 0.3,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.6,\n\t\t\ty: 0.6,\n\t\t\tw: 0.4,\n\t\t\th: 0.4,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.5,\n\t\t\ty: 0.5,\n\t\t\tw: 0.5,\n\t\t\th: 0.5,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}];\n\t\tanimation.types.popFade = [{\n\t\t\tx: 0.75,\n\t\t\ty: 0.75,\n\t\t\tw: 0,\n\t\t\th: 0,\n\t\t\to: 0\n\t\t}, {\n\t\t\tx: 0.65,\n\t\t\ty: 0.65,\n\t\t\tw: 0.1,\n\t\t\th: 0.1,\n\t\t\to: 0.2\n\t\t}, {\n\t\t\tx: 0.6,\n\t\t\ty: 0.6,\n\t\t\tw: 0.2,\n\t\t\th: 0.2,\n\t\t\to: 0.4\n\t\t}, {\n\t\t\tx: 0.55,\n\t\t\ty: 0.55,\n\t\t\tw: 0.3,\n\t\t\th: 0.3,\n\t\t\to: 0.6\n\t\t}, {\n\t\t\tx: 0.50,\n\t\t\ty: 0.50,\n\t\t\tw: 0.4,\n\t\t\th: 0.4,\n\t\t\to: 0.8\n\t\t}, {\n\t\t\tx: 0.45,\n\t\t\ty: 0.45,\n\t\t\tw: 0.5,\n\t\t\th: 0.5,\n\t\t\to: 0.9\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}];\n\t\tanimation.types.slide = [{\n\t\t\tx: 0.4,\n\t\t\ty: 1,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.9,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.9,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.8,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.7,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.6,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.5,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}];\n\t\t/**\n\t\t * Run animation\n\t\t * @param {Object} opt Animation options\n\t\t * @param {Object} cb Callabak after all steps are done\n\t\t * @param {Object} revert Reverse order? true|false\n\t\t * @param {Object} step Optional step number (frame bumber)\n\t\t */\n\t\tanimation.run = function(opt, cb, revert, step) {\n\t\t\tvar animationType = animation.types[isPageHidden() ? 'none' : _opt.animation];\n\t\t\tif (revert === true) {\n\t\t\t\tstep = (typeof step !== 'undefined') ? step : animationType.length - 1;\n\t\t\t} else {\n\t\t\t\tstep = (typeof step !== 'undefined') ? step : 0;\n\t\t\t}\n\t\t\tcb = (cb) ? cb : function() {};\n\t\t\tif ((step < animationType.length) && (step >= 0)) {\n\t\t\t\ttype[_opt.type](merge(opt, animationType[step]));\n\t\t\t\t_animTimeout = setTimeout(function() {\n\t\t\t\t\tif (revert) {\n\t\t\t\t\t\tstep = step - 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstep = step + 1;\n\t\t\t\t\t}\n\t\t\t\t\tanimation.run(opt, cb, revert, step);\n\t\t\t\t}, animation.duration);\n\n\t\t\t\tlink.setIcon(_canvas);\n\t\t\t} else {\n\t\t\t\tcb();\n\t\t\t\treturn;\n\t\t\t}\n\t\t};\n\t\t//auto init\n\t\tinit();\n\t\treturn {\n\t\t\tbadge: badge,\n\t\t\tvideo: video,\n\t\t\timage: image,\n\t\t\twebcam: webcam,\n\t\t\treset: icon.reset,\n\t\t\tbrowser: {\n\t\t\t\tsupported: _browser.supported\n\t\t\t}\n\t\t};\n\t});\n","import { Favico } from './favico';\n\nexport { Favico };\n","export * from './client/index';\n","import { Accounts } from 'meteor/accounts-base';\nimport _ from 'underscore';\n\nimport { IframeLogin } from '../../ui-utils';\n\nconst iframeLogin = new IframeLogin();\n\nconst { _unstoreLoginToken } = Accounts;\nAccounts._unstoreLoginToken = function (...args) {\n\tiframeLogin.tryLogin();\n\t_unstoreLoginToken.apply(Accounts, args);\n};\n\nwindow.addEventListener('message', (e) => {\n\tif (!_.isObject(e.data)) {\n\t\treturn;\n\t}\n\n\tswitch (e.data.event) {\n\t\tcase 'try-iframe-login':\n\t\t\tiframeLogin.tryLogin((error) => {\n\t\t\t\tif (error) {\n\t\t\t\t\te.source.postMessage(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tevent: 'login-error',\n\t\t\t\t\t\t\tresponse: error.message,\n\t\t\t\t\t\t},\n\t\t\t\t\t\te.origin,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t\tbreak;\n\n\t\tcase 'login-with-token':\n\t\t\tiframeLogin.loginWithToken(e.data, (error) => {\n\t\t\t\tif (error) {\n\t\t\t\t\te.source.postMessage(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tevent: 'login-error',\n\t\t\t\t\t\t\tresponse: error.message,\n\t\t\t\t\t\t},\n\t\t\t\t\t\te.origin,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t\tbreak;\n\t}\n});\n","import './iframe_client';\n","import './logger';\n","import { Template } from 'meteor/templating';\nimport _ from 'underscore';\n\nimport { getConfig } from '../../../client/lib/utils/getConfig';\n\nTemplate.log = !!(getConfig('debug') || getConfig('debug-template'));\n\nif (Template.log) {\n\tTemplate.logMatch = /.*/;\n\n\tTemplate.enableLogs = function (log) {\n\t\tTemplate.logMatch = /.*/;\n\t\tif (log === false) {\n\t\t\tTemplate.log = false;\n\t\t\treturn false;\n\t\t}\n\t\tTemplate.log = true;\n\t\tif (log instanceof RegExp) {\n\t\t\tTemplate.logMatch = log;\n\t\t\treturn log;\n\t\t}\n\t};\n\n\tconst wrapHelpersAndEvents = function (original, prefix, color) {\n\t\treturn function (dict) {\n\t\t\tconst template = this;\n\t\t\tconst fn1 = function (name, fn) {\n\t\t\t\tif (fn instanceof Function) {\n\t\t\t\t\tdict[name] = function (...args) {\n\t\t\t\t\t\tconst result = fn.apply(this, args);\n\t\t\t\t\t\tif (Template.log === true) {\n\t\t\t\t\t\t\tconst completeName = `${prefix}:${template.viewName.replace('Template.', '')}.${name}`;\n\t\t\t\t\t\t\tif (Template.logMatch.test(completeName)) {\n\t\t\t\t\t\t\t\tconsole.log(`%c${completeName}`, `color: ${color}`, {\n\t\t\t\t\t\t\t\t\targs,\n\t\t\t\t\t\t\t\t\tscope: this,\n\t\t\t\t\t\t\t\t\tresult,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t};\n\t\t\t\t\treturn dict[name];\n\t\t\t\t}\n\t\t\t};\n\t\t\t_.each(name, (fn, name) => {\n\t\t\t\tfn1(name, fn);\n\t\t\t});\n\t\t\treturn original.call(template, dict);\n\t\t};\n\t};\n\n\tTemplate.prototype.helpers = wrapHelpersAndEvents(Template.prototype.helpers, 'helper', 'blue');\n\n\tTemplate.prototype.events = wrapHelpersAndEvents(Template.prototype.events, 'event', 'green');\n\n\tconst wrapLifeCycle = function (original, prefix, color) {\n\t\treturn function (fn) {\n\t\t\tconst template = this;\n\t\t\tif (fn instanceof Function) {\n\t\t\t\tconst wrap = function (...args) {\n\t\t\t\t\tconst result = fn.apply(this, args);\n\t\t\t\t\tif (Template.log === true) {\n\t\t\t\t\t\tconst completeName = `${prefix}:${template.viewName.replace('Template.', '')}.${name}`;\n\t\t\t\t\t\tif (Template.logMatch.test(completeName)) {\n\t\t\t\t\t\t\tconsole.log(`%c${completeName}`, `color: ${color}; font-weight: bold`, {\n\t\t\t\t\t\t\t\targs,\n\t\t\t\t\t\t\t\tscope: this,\n\t\t\t\t\t\t\t\tresult,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn result;\n\t\t\t\t};\n\t\t\t\treturn original.call(template, wrap);\n\t\t\t}\n\t\t\treturn original.call(template, fn);\n\t\t};\n\t};\n\n\tTemplate.prototype.onCreated = wrapLifeCycle(Template.prototype.onCreated, 'onCreated', 'blue');\n\n\tTemplate.prototype.onRendered = wrapLifeCycle(Template.prototype.onRendered, 'onRendered', 'green');\n\n\tTemplate.prototype.onDestroyed = wrapLifeCycle(Template.prototype.onDestroyed, 'onDestroyed', 'red');\n}\n","import './startup';\n","import { hasAllPermission } from '../../authorization';\nimport { registerAdminSidebarItem } from '../../../client/views/admin';\n\nregisterAdminSidebarItem({\n\thref: 'admin-mailer',\n\ti18nLabel: 'Mailer',\n\ticon: 'mail',\n\tpermissionGranted: () => hasAllPermission('access-mailer'),\n});\n","export { registerFieldTemplate } from './renderField';\n","/**\n * The field templates will be rendered non-reactive for all messages by the messages-list (@see rocketchat-nrr)\n * Thus, we cannot provide helpers or events to the template, but we need to register this interactivity at the parent\n * template which is the room. The event will be bubbled by the Blaze-framework\n * @param fieldType\n * @param templateName\n * @param helpers\n * @param events\n */\nexport function registerFieldTemplate() {\n\tconsole.warn('registerFieldTemplate DEPRECATED');\n}\n","import { Meteor } from 'meteor/meteor';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { RoomManager, MessageAction } from '../../ui-utils';\nimport { messageArgs } from '../../ui-utils/client/lib/messageArgs';\nimport { ChatSubscription } from '../../models';\nimport { roomTypes } from '../../utils/client';\nimport { handleError } from '../../../client/lib/utils/handleError';\n\nMeteor.startup(() => {\n\tMessageAction.addButton({\n\t\tid: 'mark-message-as-unread',\n\t\ticon: 'flag',\n\t\tlabel: 'Mark_unread',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\treturn Meteor.call('unreadMessages', message, function (error) {\n\t\t\t\tif (error) {\n\t\t\t\t\treturn handleError(error);\n\t\t\t\t}\n\t\t\t\tconst subscription = ChatSubscription.findOne({\n\t\t\t\t\trid: message.rid,\n\t\t\t\t});\n\t\t\t\tif (subscription == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tRoomManager.close(subscription.t + subscription.name);\n\t\t\t\treturn FlowRouter.go('home');\n\t\t\t});\n\t\t},\n\t\tcondition({ msg, u, room }) {\n\t\t\tconst isLivechatRoom = roomTypes.isLivechatRoom(room.t);\n\t\t\tif (isLivechatRoom) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn msg.u._id !== u._id;\n\t\t},\n\t\torder: 10,\n\t\tgroup: 'menu',\n\t});\n});\n","import './actionButton';\n","import './saml_client';\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\nimport { Random } from 'meteor/random';\nimport { ServiceConfiguration } from 'meteor/service-configuration';\n\nif (!Accounts.saml) {\n\tAccounts.saml = {};\n}\n\n// Override the standard logout behaviour.\n//\n// If we find a samlProvider, and we are using single\n// logout we will initiate logout from rocketchat via saml.\n// If not using single logout, we just do the standard logout.\n// This can be overridden by a configured logout behaviour.\n//\n// TODO: This may need some work as it is not clear if we are really\n// logging out of the idp when doing the standard logout.\n\nconst MeteorLogout = Meteor.logout;\nconst logoutBehaviour = {\n\tTERMINATE_SAML: 'SAML',\n\tONLY_RC: 'Local',\n};\n\nMeteor.logout = function (...args) {\n\tconst samlService = ServiceConfiguration.configurations.findOne({ service: 'saml' });\n\tif (samlService) {\n\t\tconst provider = samlService.clientConfig && samlService.clientConfig.provider;\n\t\tif (provider) {\n\t\t\tif (samlService.logoutBehaviour == null || samlService.logoutBehaviour === logoutBehaviour.TERMINATE_SAML) {\n\t\t\t\tif (samlService.idpSLORedirectURL) {\n\t\t\t\t\tconsole.info('SAML session terminated via SLO');\n\t\t\t\t\treturn Meteor.logoutWithSaml({ provider });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (samlService.logoutBehaviour === logoutBehaviour.ONLY_RC) {\n\t\t\t\tconsole.info('SAML session not terminated, only the Rocket.Chat session is going to be killed');\n\t\t\t}\n\t\t}\n\t}\n\treturn MeteorLogout.apply(Meteor, args);\n};\n\nMeteor.loginWithSaml = function (options /* , callback*/) {\n\toptions = options || {};\n\tconst credentialToken = `id-${Random.id()}`;\n\toptions.credentialToken = credentialToken;\n\n\twindow.location.href = `_saml/authorize/${options.provider}/${options.credentialToken}`;\n};\n\nMeteor.logoutWithSaml = function (options /* , callback*/) {\n\t// Accounts.saml.idpInitiatedSLO(options, callback);\n\tMeteor.call('samlLogout', options.provider, function (err, result) {\n\t\tif (err || !result) {\n\t\t\tMeteorLogout.apply(Meteor);\n\t\t\treturn;\n\t\t}\n\n\t\t// Remove the userId from the client to prevent calls to the server while the logout is processed.\n\t\t// If the logout fails, the userId will be reloaded on the resume call\n\t\tMeteor._localStorage.removeItem(Accounts.USER_ID_KEY);\n\n\t\t// A nasty bounce: 'result' has the SAML LogoutRequest but we need a proper 302 to redirected from the server.\n\t\twindow.location.replace(Meteor.absoluteUrl(`_saml/sloRedirect/${options.provider}/?redirect=${encodeURIComponent(result)}`));\n\t});\n};\n\nMeteor.loginWithSamlToken = function (token, userCallback) {\n\tAccounts.callLoginMethod({\n\t\tmethodArguments: [\n\t\t\t{\n\t\t\t\tsaml: true,\n\t\t\t\tcredentialToken: token,\n\t\t\t},\n\t\t],\n\t\tuserCallback,\n\t});\n};\n","import './nrr';\n","/* eslint new-cap:0 */\n\nimport { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { Blaze } from 'meteor/blaze';\nimport { HTML } from 'meteor/htmljs';\nimport { Spacebars } from 'meteor/spacebars';\nimport { Tracker } from 'meteor/tracker';\n\nconst makeCursorReactive = function (obj) {\n\tif (obj instanceof Meteor.Collection.Cursor) {\n\t\treturn obj._depend({\n\t\t\tadded: true,\n\t\t\tremoved: true,\n\t\t\tchanged: true,\n\t\t});\n\t}\n};\n\nconst toHTMLWithDataNonReactive = function (content, data) {\n\tmakeCursorReactive(data);\n\n\tif (data instanceof Spacebars.kw && Object.keys(data.hash).length > 0) {\n\t\tObject.entries(data.hash).forEach(([, value]) => makeCursorReactive(value));\n\t\treturn Tracker.nonreactive(() => Blaze.toHTMLWithData(content, data.hash));\n\t}\n\treturn Tracker.nonreactive(() => Blaze.toHTMLWithData(content, data));\n};\n\nconst renderNonReactive = function (templateName, data) {\n\tconst { _arguments } = this.parentView.dataVar.get();\n\n\t[templateName, data] = _arguments;\n\n\treturn Tracker.nonreactive(() => {\n\t\tconsole.warn('Nrr template is deprecated');\n\t\tconst view = new Blaze.View('nrr', () => HTML.Raw(toHTMLWithDataNonReactive(Template[templateName], data)));\n\n\t\tview.onViewReady(() => {\n\t\t\tconst { onViewReady } = Template[templateName];\n\t\t\treturn onViewReady && onViewReady.call(view, data);\n\t\t});\n\n\t\tview._onViewRendered(() => {\n\t\t\tconst { onViewRendered } = Template[templateName];\n\t\t\treturn onViewRendered && onViewRendered.call(view, data);\n\t\t});\n\n\t\treturn view;\n\t});\n};\n\nTemplate.nrr = new Blaze.Template('nrr', renderNonReactive);\n","import './tabBar';\n","import { lazy, useMemo } from 'react';\n\nimport { useUserSubscription } from '../../../client/contexts/UserContext';\nimport { addAction } from '../../../client/views/room/lib/Toolbox';\n\naddAction('push-notifications', ({ room }) => {\n\tconst subscription = useUserSubscription(room?._id);\n\n\treturn useMemo(\n\t\t() =>\n\t\t\tsubscription\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\t\t\t\tid: 'push-notifications',\n\t\t\t\t\t\ttitle: 'Notifications_Preferences',\n\t\t\t\t\t\ticon: 'bell',\n\t\t\t\t\t\ttemplate: lazy(() => import('../../../client/views/room/contextualBar/NotificationPreferences')),\n\t\t\t\t\t\torder: 8,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[subscription],\n\t);\n});\n","import './slackbridge_import.client';\n","import { settings } from '../../settings';\nimport { slashCommands } from '../../utils';\n\nsettings.onload('SlackBridge_Enabled', (key, value) => {\n\tif (value) {\n\t\tslashCommands.add('slackbridge-import', null, {\n\t\t\tdescription: 'Import_old_messages_from_slackbridge',\n\t\t});\n\t} else {\n\t\tdelete slashCommands.commands['slackbridge-import'];\n\t}\n});\n","import { slashCommands } from '../../utils';\n\nslashCommands.add('archive', null, {\n\tdescription: 'Archive',\n\tparams: '#channel',\n\tpermission: 'archive-room',\n});\n","import './client';\n","import { slashCommands } from '../../utils';\n\nslashCommands.add('create', null, {\n\tdescription: 'Create_A_New_Channel',\n\tparams: '#channel',\n\tpermission: ['create-c', 'create-p'],\n});\n","import './client';\n","import { slashCommands } from '../../utils';\n\nslashCommands.add('hide', undefined, {\n\tdescription: 'Hide_room',\n\tparams: '#room',\n});\n","import './hide';\n","import { slashCommands } from '../../utils';\n\nslashCommands.add('invite', undefined, {\n\tdescription: 'Invite_user_to_join_channel',\n\tparams: '@username',\n\tpermission: 'add-user-to-joined-room',\n});\n","import './client';\n","import { slashCommands } from '../../utils';\n\nslashCommands.add('invite-all-to', undefined, {\n\tdescription: 'Invite_user_to_join_channel_all_to',\n\tparams: '#room',\n\tpermission: ['add-user-to-joined-room', 'add-user-to-any-c-room', 'add-user-to-any-p-room'],\n});\nslashCommands.add('invite-all-from', undefined, {\n\tdescription: 'Invite_user_to_join_channel_all_from',\n\tparams: '#room',\n\tpermission: 'add-user-to-joined-room',\n});\n","import './client';\n","import { Meteor } from 'meteor/meteor';\n\nimport { slashCommands } from '../../utils/lib/slashCommand';\n\nslashCommands.add(\n\t'join',\n\tundefined,\n\t{\n\t\tdescription: 'Join_the_given_channel',\n\t\tparams: '#channel',\n\t\tpermission: 'view-c-room',\n\t},\n\tundefined,\n\tfalse,\n\tundefined,\n\tfunction (err: Meteor.Error, _result: unknown, params: Record<string, any>) {\n\t\tif (err.error === 'error-user-already-in-room') {\n\t\t\tparams.cmd = 'open';\n\t\t\tparams.msg.msg = params.msg.msg.replace('join', 'open');\n\t\t\treturn slashCommands.run('open', params.params, params.msg, undefined);\n\t\t}\n\t},\n);\n","import './client';\n","import { slashCommands } from '../../utils';\n\nslashCommands.add(\n\t'kick',\n\tfunction (command, params) {\n\t\tconst username = params.trim();\n\t\tif (username === '') {\n\t\t\treturn;\n\t\t}\n\t\treturn username.replace('@', '');\n\t},\n\t{\n\t\tdescription: 'Remove_someone_from_room',\n\t\tparams: '@username',\n\t\tpermission: 'remove-user',\n\t},\n);\n","import './client';\n","import { Meteor } from 'meteor/meteor';\nimport { Match } from 'meteor/check';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { slashCommands, roomTypes } from '../../utils';\nimport { ChatSubscription, Subscriptions } from '../../models';\n\nfunction Open(command, params /* , item*/) {\n\tconst dict = {\n\t\t'#': ['c', 'p'],\n\t\t'@': ['d'],\n\t};\n\n\tif (command !== 'open' || !Match.test(params, String)) {\n\t\treturn;\n\t}\n\n\tlet room = params.trim();\n\tconst type = dict[room[0]];\n\troom = room.replace(/#|@/, '');\n\n\tconst query = {\n\t\tname: room,\n\t};\n\n\tif (type) {\n\t\tquery.t = {\n\t\t\t$in: type,\n\t\t};\n\t}\n\n\tconst subscription = ChatSubscription.findOne(query);\n\n\tif (subscription) {\n\t\troomTypes.openRouteLink(subscription.t, subscription, FlowRouter.current().queryParams);\n\t}\n\n\tif (type && type.indexOf('d') === -1) {\n\t\treturn;\n\t}\n\treturn Meteor.call('createDirectMessage', room, function (err) {\n\t\tif (err) {\n\t\t\treturn;\n\t\t}\n\t\tconst subscription = Subscriptions.findOne(query);\n\t\troomTypes.openRouteLink(subscription.t, subscription, FlowRouter.current().queryParams);\n\t});\n}\n\nslashCommands.add('open', Open, {\n\tdescription: 'Opens_a_channel_group_or_direct_message',\n\tparams: 'room_name',\n\tclientOnly: true,\n\tpermission: ['view-c-room', 'view-c-room', 'view-d-room', 'view-joined-room', 'create-d'],\n});\n","import './client';\n","import { slashCommands } from '../../utils';\n\nslashCommands.add('unarchive', null, {\n\tdescription: 'Unarchive',\n\tparams: '#channel',\n\tpermission: 'unarchive-room',\n});\n","import './client';\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport * as banners from '../../../client/lib/banners';\n\nMeteor.startup(function () {\n\tTracker.autorun(() => {\n\t\tconst user = Meteor.user();\n\n\t\tif (user && Object.keys(user.banners || {}).length > 0) {\n\t\t\tconst firstBanner = Object.values(user.banners)\n\t\t\t\t.filter((b) => b.read !== true)\n\t\t\t\t.sort((a, b) => b.priority - a.priority)[0];\n\n\t\t\tif (!firstBanner) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfirstBanner.textArguments = firstBanner.textArguments || [];\n\n\t\t\tbanners.open({\n\t\t\t\tid: firstBanner.id,\n\t\t\t\ttitle: TAPi18n.__(firstBanner.title),\n\t\t\t\ttext: TAPi18n.__(firstBanner.text, ...firstBanner.textArguments),\n\t\t\t\tmodifiers: firstBanner.modifiers,\n\t\t\t\taction() {\n\t\t\t\t\tif (firstBanner.link) {\n\t\t\t\t\t\twindow.open(firstBanner.link, '_system');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonClose() {\n\t\t\t\t\tMeteor.call('banner/dismiss', {\n\t\t\t\t\t\tid: firstBanner.id,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t});\n});\n","import { Emitter } from '@rocket.chat/emitter';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { ChromeScreenShare } from './screenShare';\nimport { t } from '../../utils';\nimport { Notifications } from '../../notifications';\nimport { settings } from '../../settings';\nimport { modal } from '../../ui-utils';\nimport { ChatSubscription } from '../../models';\nimport { WEB_RTC_EVENTS } from '..';\nimport { goToRoomById } from '../../../client/lib/utils/goToRoomById';\n\nclass WebRTCTransportClass extends Emitter {\n\tconstructor(webrtcInstance) {\n\t\tsuper();\n\t\tthis.debug = false;\n\t\tthis.webrtcInstance = webrtcInstance;\n\t\tNotifications.onRoom(this.webrtcInstance.room, WEB_RTC_EVENTS.WEB_RTC, (type, data) => {\n\t\t\tthis.log('WebRTCTransportClass - onRoom', type, data);\n\t\t\tthis.emit(type, data);\n\t\t});\n\t}\n\n\tlog(...args) {\n\t\tif (this.debug === true) {\n\t\t\tconsole.log(...args);\n\t\t}\n\t}\n\n\tonUserStream(type, data) {\n\t\tif (data.room !== this.webrtcInstance.room) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.log('WebRTCTransportClass - onUser', type, data);\n\t\tthis.emit(type, data);\n\t}\n\n\tstartCall(data) {\n\t\tthis.log('WebRTCTransportClass - startCall', this.webrtcInstance.room, this.webrtcInstance.selfId);\n\t\tNotifications.notifyUsersOfRoom(this.webrtcInstance.room, WEB_RTC_EVENTS.WEB_RTC, WEB_RTC_EVENTS.CALL, {\n\t\t\tfrom: this.webrtcInstance.selfId,\n\t\t\troom: this.webrtcInstance.room,\n\t\t\tmedia: data.media,\n\t\t\tmonitor: data.monitor,\n\t\t});\n\t}\n\n\tjoinCall(data) {\n\t\tthis.log('WebRTCTransportClass - joinCall', this.webrtcInstance.room, this.webrtcInstance.selfId);\n\t\tif (data.monitor === true) {\n\t\t\tNotifications.notifyUser(data.to, WEB_RTC_EVENTS.WEB_RTC, WEB_RTC_EVENTS.JOIN, {\n\t\t\t\tfrom: this.webrtcInstance.selfId,\n\t\t\t\troom: this.webrtcInstance.room,\n\t\t\t\tmedia: data.media,\n\t\t\t\tmonitor: data.monitor,\n\t\t\t});\n\t\t} else {\n\t\t\tNotifications.notifyUsersOfRoom(this.webrtcInstance.room, WEB_RTC_EVENTS.WEB_RTC, WEB_RTC_EVENTS.JOIN, {\n\t\t\t\tfrom: this.webrtcInstance.selfId,\n\t\t\t\troom: this.webrtcInstance.room,\n\t\t\t\tmedia: data.media,\n\t\t\t\tmonitor: data.monitor,\n\t\t\t});\n\t\t}\n\t}\n\n\tsendCandidate(data) {\n\t\tdata.from = this.webrtcInstance.selfId;\n\t\tdata.room = this.webrtcInstance.room;\n\t\tthis.log('WebRTCTransportClass - sendCandidate', data);\n\t\tNotifications.notifyUser(data.to, WEB_RTC_EVENTS.WEB_RTC, WEB_RTC_EVENTS.CANDIDATE, data);\n\t}\n\n\tsendDescription(data) {\n\t\tdata.from = this.webrtcInstance.selfId;\n\t\tdata.room = this.webrtcInstance.room;\n\t\tthis.log('WebRTCTransportClass - sendDescription', data);\n\t\tNotifications.notifyUser(data.to, WEB_RTC_EVENTS.WEB_RTC, WEB_RTC_EVENTS.DESCRIPTION, data);\n\t}\n\n\tsendStatus(data) {\n\t\tthis.log('WebRTCTransportClass - sendStatus', data, this.webrtcInstance.room);\n\t\tdata.from = this.webrtcInstance.selfId;\n\t\tNotifications.notifyRoom(this.webrtcInstance.room, WEB_RTC_EVENTS.WEB_RTC, WEB_RTC_EVENTS.STATUS, data);\n\t}\n\n\tonRemoteCall(fn) {\n\t\treturn this.on(WEB_RTC_EVENTS.CALL, fn);\n\t}\n\n\tonRemoteJoin(fn) {\n\t\treturn this.on(WEB_RTC_EVENTS.JOIN, fn);\n\t}\n\n\tonRemoteCandidate(fn) {\n\t\treturn this.on(WEB_RTC_EVENTS.CANDIDATE, fn);\n\t}\n\n\tonRemoteDescription(fn) {\n\t\treturn this.on(WEB_RTC_EVENTS.DESCRIPTION, fn);\n\t}\n\n\tonRemoteStatus(fn) {\n\t\treturn this.on(WEB_RTC_EVENTS.STATUS, fn);\n\t}\n}\n\nclass WebRTCClass {\n\t/*\n  \t\t@param seldId {String}\n  \t\t@param room {String}\n   */\n\n\tconstructor(selfId, room, autoAccept = false) {\n\t\tthis.config = {\n\t\t\ticeServers: [],\n\t\t};\n\t\tthis.debug = false;\n\t\tthis.TransportClass = WebRTCTransportClass;\n\t\tthis.selfId = selfId;\n\t\tthis.room = room;\n\t\tlet servers = settings.get('WebRTC_Servers');\n\t\tif (servers && servers.trim() !== '') {\n\t\t\tservers = servers.replace(/\\s/g, '');\n\t\t\tservers = servers.split(',');\n\n\t\t\tservers.forEach((server) => {\n\t\t\t\tserver = server.split('@');\n\t\t\t\tconst serverConfig = {\n\t\t\t\t\turls: server.pop(),\n\t\t\t\t};\n\t\t\t\tif (server.length === 1) {\n\t\t\t\t\tserver = server[0].split(':');\n\t\t\t\t\tserverConfig.username = decodeURIComponent(server[0]);\n\t\t\t\t\tserverConfig.credential = decodeURIComponent(server[1]);\n\t\t\t\t}\n\t\t\t\tthis.config.iceServers.push(serverConfig);\n\t\t\t});\n\t\t}\n\t\tthis.peerConnections = {};\n\t\tthis.remoteItems = new ReactiveVar([]);\n\t\tthis.remoteItemsById = new ReactiveVar({});\n\t\tthis.callInProgress = new ReactiveVar(false);\n\t\tthis.audioEnabled = new ReactiveVar(false);\n\t\tthis.videoEnabled = new ReactiveVar(false);\n\t\tthis.overlayEnabled = new ReactiveVar(false);\n\t\tthis.screenShareEnabled = new ReactiveVar(false);\n\t\tthis.localUrl = new ReactiveVar();\n\t\tthis.active = false;\n\t\tthis.remoteMonitoring = false;\n\t\tthis.monitor = false;\n\t\tthis.autoAccept = autoAccept;\n\t\tthis.navigator = undefined;\n\t\tconst userAgent = navigator.userAgent.toLocaleLowerCase();\n\n\t\tif (userAgent.indexOf('electron') !== -1) {\n\t\t\tthis.navigator = 'electron';\n\t\t} else if (userAgent.indexOf('chrome') !== -1) {\n\t\t\tthis.navigator = 'chrome';\n\t\t} else if (userAgent.indexOf('firefox') !== -1) {\n\t\t\tthis.navigator = 'firefox';\n\t\t} else if (userAgent.indexOf('safari') !== -1) {\n\t\t\tthis.navigator = 'safari';\n\t\t}\n\n\t\tthis.screenShareAvailable = ['chrome', 'firefox', 'electron'].includes(this.navigator);\n\t\tthis.media = {\n\t\t\tvideo: true,\n\t\t\taudio: true,\n\t\t};\n\t\tthis.transport = new this.TransportClass(this);\n\t\tthis.transport.onRemoteCall(this.onRemoteCall.bind(this));\n\t\tthis.transport.onRemoteJoin(this.onRemoteJoin.bind(this));\n\t\tthis.transport.onRemoteCandidate(this.onRemoteCandidate.bind(this));\n\t\tthis.transport.onRemoteDescription(this.onRemoteDescription.bind(this));\n\t\tthis.transport.onRemoteStatus(this.onRemoteStatus.bind(this));\n\n\t\tMeteor.setInterval(this.checkPeerConnections.bind(this), 1000);\n\n\t\t// Meteor.setInterval(this.broadcastStatus.bind(@), 1000);\n\t}\n\n\tonUserStream(...args) {\n\t\treturn this.transport.onUserStream(...args);\n\t}\n\n\tlog(...args) {\n\t\tif (this.debug === true) {\n\t\t\tconsole.log.apply(console, args);\n\t\t}\n\t}\n\n\tonError(...args) {\n\t\tconsole.error.apply(console, args);\n\t}\n\n\tcheckPeerConnections() {\n\t\tconst { peerConnections } = this;\n\t\tconst date = Date.now();\n\t\tObject.entries(peerConnections).some(([id, peerConnection]) => {\n\t\t\tif (!['connected', 'completed'].includes(peerConnection.iceConnectionState) && peerConnection.createdAt + 5000 < date) {\n\t\t\t\tthis.stopPeerConnection(id);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n\n\tupdateRemoteItems() {\n\t\tconst items = [];\n\t\tconst itemsById = {};\n\t\tconst { peerConnections } = this;\n\n\t\tObject.entries(peerConnections).forEach(([id, peerConnection]) => {\n\t\t\tpeerConnection.getRemoteStreams().forEach((remoteStream) => {\n\t\t\t\tconst item = {\n\t\t\t\t\tid,\n\t\t\t\t\turl: remoteStream,\n\t\t\t\t\tstate: peerConnection.iceConnectionState,\n\t\t\t\t};\n\t\t\t\tswitch (peerConnection.iceConnectionState) {\n\t\t\t\t\tcase 'checking':\n\t\t\t\t\t\titem.stateText = 'Connecting...';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'connected':\n\t\t\t\t\tcase 'completed':\n\t\t\t\t\t\titem.stateText = 'Connected';\n\t\t\t\t\t\titem.connected = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'disconnected':\n\t\t\t\t\t\titem.stateText = 'Disconnected';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'failed':\n\t\t\t\t\t\titem.stateText = 'Failed';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'closed':\n\t\t\t\t\t\titem.stateText = 'Closed';\n\t\t\t\t}\n\t\t\t\titems.push(item);\n\t\t\t\titemsById[id] = item;\n\t\t\t});\n\t\t});\n\t\tthis.remoteItems.set(items);\n\t\tthis.remoteItemsById.set(itemsById);\n\t}\n\n\tresetCallInProgress = () => {\n\t\tthis.callInProgress.set(false);\n\t};\n\n\tbroadcastStatus() {\n\t\tif (this.active !== true || this.monitor === true || this.remoteMonitoring === true) {\n\t\t\treturn;\n\t\t}\n\t\tconst remoteConnections = [];\n\t\tconst { peerConnections } = this;\n\t\tObject.keys(peerConnections).entries(([id, { remoteMedia: media }]) => {\n\t\t\tremoteConnections.push({\n\t\t\t\tid,\n\t\t\t\tmedia,\n\t\t\t});\n\t\t});\n\n\t\tthis.transport.sendStatus({\n\t\t\tmedia: this.media,\n\t\t\tremoteConnections,\n\t\t});\n\t}\n\n\t/*\n  \t\t@param data {Object}\n  \t\t\tfrom {String}\n  \t\t\tmedia {Object}\n  \t\t\tremoteConnections {Array[Object]}\n  \t\t\t\tid {String}\n  \t\t\t\tmedia {Object}\n   */\n\n\tonRemoteStatus(data) {\n\t\t// this.log(onRemoteStatus, arguments);\n\t\tthis.callInProgress.set(true);\n\t\tMeteor.clearTimeout(this.callInProgressTimeout);\n\t\tthis.callInProgressTimeout = Meteor.setTimeout(this.resetCallInProgress, 2000);\n\t\tif (this.active !== true) {\n\t\t\treturn;\n\t\t}\n\t\tconst remoteConnections = [\n\t\t\t{\n\t\t\t\tid: data.from,\n\t\t\t\tmedia: data.media,\n\t\t\t},\n\t\t\t...data.remoteConnections,\n\t\t];\n\n\t\tremoteConnections.forEach((remoteConnection) => {\n\t\t\tif (remoteConnection.id !== this.selfId && this.peerConnections[remoteConnection.id] == null) {\n\t\t\t\tthis.log('reconnecting with', remoteConnection.id);\n\t\t\t\tthis.onRemoteJoin({\n\t\t\t\t\tfrom: remoteConnection.id,\n\t\t\t\t\tmedia: remoteConnection.media,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t/*\n  \t\t@param id {String}\n   */\n\n\tgetPeerConnection(id) {\n\t\tif (this.peerConnections[id] != null) {\n\t\t\treturn this.peerConnections[id];\n\t\t}\n\t\tconst peerConnection = new RTCPeerConnection(this.config);\n\n\t\tpeerConnection.createdAt = Date.now();\n\t\tpeerConnection.remoteMedia = {};\n\t\tthis.peerConnections[id] = peerConnection;\n\t\tconst eventNames = [\n\t\t\t'icecandidate',\n\t\t\t'addstream',\n\t\t\t'removestream',\n\t\t\t'iceconnectionstatechange',\n\t\t\t'datachannel',\n\t\t\t'identityresult',\n\t\t\t'idpassertionerror',\n\t\t\t'idpvalidationerror',\n\t\t\t'negotiationneeded',\n\t\t\t'peeridentity',\n\t\t\t'signalingstatechange',\n\t\t];\n\n\t\teventNames.forEach((eventName) => {\n\t\t\tpeerConnection.addEventListener(eventName, (e) => {\n\t\t\t\tthis.log(id, e.type, e);\n\t\t\t});\n\t\t});\n\n\t\tpeerConnection.addEventListener('icecandidate', (e) => {\n\t\t\tif (e.candidate == null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.transport.sendCandidate({\n\t\t\t\tto: id,\n\t\t\t\tcandidate: {\n\t\t\t\t\tcandidate: e.candidate.candidate,\n\t\t\t\t\tsdpMLineIndex: e.candidate.sdpMLineIndex,\n\t\t\t\t\tsdpMid: e.candidate.sdpMid,\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t\tpeerConnection.addEventListener('addstream', () => {\n\t\t\tthis.updateRemoteItems();\n\t\t});\n\t\tpeerConnection.addEventListener('removestream', () => {\n\t\t\tthis.updateRemoteItems();\n\t\t});\n\t\tpeerConnection.addEventListener('iceconnectionstatechange', () => {\n\t\t\tif (\n\t\t\t\t(peerConnection.iceConnectionState === 'disconnected' || peerConnection.iceConnectionState === 'closed') &&\n\t\t\t\tpeerConnection === this.peerConnections[id]\n\t\t\t) {\n\t\t\t\tthis.stopPeerConnection(id);\n\t\t\t\tMeteor.setTimeout(() => {\n\t\t\t\t\tif (Object.keys(this.peerConnections).length === 0) {\n\t\t\t\t\t\tthis.stop();\n\t\t\t\t\t}\n\t\t\t\t}, 3000);\n\t\t\t}\n\t\t\tthis.updateRemoteItems();\n\t\t});\n\t\treturn peerConnection;\n\t}\n\n\t_getUserMedia(media, onSuccess, onError) {\n\t\tconst onSuccessLocal = (stream) => {\n\t\t\tif (AudioContext && stream.getAudioTracks().length > 0) {\n\t\t\t\tconst audioContext = new AudioContext();\n\t\t\t\tconst source = audioContext.createMediaStreamSource(stream);\n\t\t\t\tconst volume = audioContext.createGain();\n\t\t\t\tsource.connect(volume);\n\t\t\t\tconst peer = audioContext.createMediaStreamDestination();\n\t\t\t\tvolume.connect(peer);\n\t\t\t\tvolume.gain.value = 0.6;\n\t\t\t\tstream.removeTrack(stream.getAudioTracks()[0]);\n\t\t\t\tstream.addTrack(peer.stream.getAudioTracks()[0]);\n\t\t\t\tstream.volume = volume;\n\t\t\t\tthis.audioContext = audioContext;\n\t\t\t}\n\t\t\tonSuccess(stream);\n\t\t};\n\t\tif (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n\t\t\treturn navigator.mediaDevices.getUserMedia(media).then(onSuccessLocal).catch(onError);\n\t\t}\n\n\t\tnavigator.getUserMedia(media, onSuccessLocal, onError);\n\t}\n\n\tgetUserMedia(media, onSuccess, onError = this.onError) {\n\t\tif (media.desktop !== true) {\n\t\t\tthis._getUserMedia(media, onSuccess, onError);\n\t\t\treturn;\n\t\t}\n\t\tif (this.screenShareAvailable !== true) {\n\t\t\tconsole.log('Screen share is not avaliable');\n\t\t\treturn;\n\t\t}\n\t\tconst getScreen = (audioStream) => {\n\t\t\tconst refresh = function () {\n\t\t\t\tmodal.open({\n\t\t\t\t\ttype: 'warning',\n\t\t\t\t\ttitle: TAPi18n.__('Refresh_your_page_after_install_to_enable_screen_sharing'),\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tconst isChromeExtensionInstalled = this.navigator === 'chrome' && ChromeScreenShare.installed;\n\t\t\tconst isFirefoxExtensionInstalled = this.navigator === 'firefox' && window.rocketchatscreenshare != null;\n\n\t\t\tif (!isChromeExtensionInstalled && !isFirefoxExtensionInstalled) {\n\t\t\t\tmodal.open(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'warning',\n\t\t\t\t\t\ttitle: TAPi18n.__('Screen_Share'),\n\t\t\t\t\t\ttext: TAPi18n.__('You_need_install_an_extension_to_allow_screen_sharing'),\n\t\t\t\t\t\thtml: true,\n\t\t\t\t\t\tshowCancelButton: true,\n\t\t\t\t\t\tconfirmButtonText: TAPi18n.__('Install_Extension'),\n\t\t\t\t\t\tcancelButtonText: TAPi18n.__('Cancel'),\n\t\t\t\t\t},\n\t\t\t\t\t(isConfirm) => {\n\t\t\t\t\t\tif (isConfirm) {\n\t\t\t\t\t\t\tif (this.navigator === 'chrome') {\n\t\t\t\t\t\t\t\tconst url = 'https://chrome.google.com/webstore/detail/rocketchat-screen-share/nocfbnnmjnndkbipkabodnheejiegccf';\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tchrome.webstore.install(url, refresh, function () {\n\t\t\t\t\t\t\t\t\t\twindow.open(url);\n\t\t\t\t\t\t\t\t\t\trefresh();\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} catch (_error) {\n\t\t\t\t\t\t\t\t\tconsole.log(_error);\n\t\t\t\t\t\t\t\t\twindow.open(url);\n\t\t\t\t\t\t\t\t\trefresh();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (this.navigator === 'firefox') {\n\t\t\t\t\t\t\t\twindow.open('https://addons.mozilla.org/en-GB/firefox/addon/rocketchat-screen-share/');\n\t\t\t\t\t\t\t\trefresh();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t\treturn onError(false);\n\t\t\t}\n\n\t\t\tconst getScreenSuccess = (stream) => {\n\t\t\t\tif (audioStream != null) {\n\t\t\t\t\tstream.addTrack(audioStream.getAudioTracks()[0]);\n\t\t\t\t}\n\t\t\t\tonSuccess(stream);\n\t\t\t};\n\t\t\tif (this.navigator === 'firefox') {\n\t\t\t\tmedia = {\n\t\t\t\t\taudio: media.audio,\n\t\t\t\t\tvideo: {\n\t\t\t\t\t\tmozMediaSource: 'window',\n\t\t\t\t\t\tmediaSource: 'window',\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t\tthis._getUserMedia(media, getScreenSuccess, onError);\n\t\t\t} else {\n\t\t\t\tChromeScreenShare.getSourceId(this.navigator, (id) => {\n\t\t\t\t\tmedia = {\n\t\t\t\t\t\taudio: false,\n\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\tmandatory: {\n\t\t\t\t\t\t\t\tchromeMediaSource: 'desktop',\n\t\t\t\t\t\t\t\tchromeMediaSourceId: id,\n\t\t\t\t\t\t\t\tmaxWidth: 1280,\n\t\t\t\t\t\t\t\tmaxHeight: 720,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t\tthis._getUserMedia(media, getScreenSuccess, onError);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\tif (this.navigator === 'firefox' || media.audio == null || media.audio === false) {\n\t\t\tgetScreen();\n\t\t} else {\n\t\t\tconst getAudioSuccess = (audioStream) => {\n\t\t\t\tgetScreen(audioStream);\n\t\t\t};\n\t\t\tconst getAudioError = () => {\n\t\t\t\tgetScreen();\n\t\t\t};\n\n\t\t\tthis._getUserMedia(\n\t\t\t\t{\n\t\t\t\t\taudio: media.audio,\n\t\t\t\t},\n\t\t\t\tgetAudioSuccess,\n\t\t\t\tgetAudioError,\n\t\t\t);\n\t\t}\n\t}\n\n\t/*\n  \t\t@param callback {Function}\n   */\n\n\tgetLocalUserMedia(callback, ...args) {\n\t\tthis.log('getLocalUserMedia', [callback, ...args]);\n\t\tif (this.localStream != null) {\n\t\t\treturn callback(null, this.localStream);\n\t\t}\n\t\tconst onSuccess = (stream) => {\n\t\t\tthis.localStream = stream;\n\t\t\t!this.audioEnabled.get() && this.disableAudio();\n\t\t\t!this.videoEnabled.get() && this.disableVideo();\n\t\t\tthis.localUrl.set(stream);\n\t\t\tconst { peerConnections } = this;\n\t\t\tObject.entries(peerConnections).forEach(([, peerConnection]) => peerConnection.addStream(stream));\n\t\t\tdocument.querySelector('video#localVideo').srcObject = stream;\n\t\t\tcallback(null, this.localStream);\n\t\t};\n\t\tconst onError = (error) => {\n\t\t\tcallback(false);\n\t\t\tthis.onError(error);\n\t\t};\n\t\tthis.getUserMedia(this.media, onSuccess, onError);\n\t}\n\n\t/*\n  \t\t@param id {String}\n   */\n\n\tstopPeerConnection = (id) => {\n\t\tconst peerConnection = this.peerConnections[id];\n\t\tif (peerConnection == null) {\n\t\t\treturn;\n\t\t}\n\t\tdelete this.peerConnections[id];\n\t\tpeerConnection.close();\n\t\tthis.updateRemoteItems();\n\t};\n\n\tstopAllPeerConnections() {\n\t\tconst { peerConnections } = this;\n\n\t\tObject.keys(peerConnections).forEach(this.stopPeerConnection);\n\n\t\twindow.audioContext && window.audioContext.close();\n\t}\n\n\tsetAudioEnabled(enabled = true) {\n\t\tif (this.localStream != null) {\n\t\t\tthis.localStream.getAudioTracks().forEach(function (audio) {\n\t\t\t\taudio.enabled = enabled;\n\t\t\t});\n\t\t\tthis.audioEnabled.set(enabled);\n\t\t}\n\t}\n\n\tdisableAudio() {\n\t\tthis.setAudioEnabled(false);\n\t}\n\n\tenableAudio() {\n\t\tthis.setAudioEnabled(true);\n\t}\n\n\ttoggleAudio() {\n\t\tif (this.audioEnabled.get()) {\n\t\t\treturn this.disableAudio();\n\t\t}\n\t\treturn this.enableAudio();\n\t}\n\n\tsetVideoEnabled(enabled = true) {\n\t\tif (this.localStream != null) {\n\t\t\tthis.localStream.getVideoTracks().forEach(function (video) {\n\t\t\t\tvideo.enabled = enabled;\n\t\t\t});\n\t\t\tthis.videoEnabled.set(enabled);\n\t\t}\n\t}\n\n\tdisableScreenShare() {\n\t\tthis.setScreenShareEnabled(false);\n\t}\n\n\tenableScreenShare() {\n\t\tthis.setScreenShareEnabled(true);\n\t}\n\n\tsetScreenShareEnabled(enabled = true) {\n\t\tif (this.localStream != null) {\n\t\t\tthis.media.desktop = enabled;\n\t\t\tdelete this.localStream;\n\t\t\tthis.getLocalUserMedia((err) => {\n\t\t\t\tif (err != null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.screenShareEnabled.set(enabled);\n\t\t\t\tthis.stopAllPeerConnections();\n\t\t\t\tthis.joinCall();\n\t\t\t});\n\t\t}\n\t}\n\n\tdisableVideo() {\n\t\tthis.setVideoEnabled(false);\n\t}\n\n\tenableVideo() {\n\t\tthis.setVideoEnabled(true);\n\t}\n\n\ttoggleVideo() {\n\t\tif (this.videoEnabled.get()) {\n\t\t\treturn this.disableVideo();\n\t\t}\n\t\treturn this.enableVideo();\n\t}\n\n\tstop() {\n\t\tthis.active = false;\n\t\tthis.monitor = false;\n\t\tthis.remoteMonitoring = false;\n\t\tif (this.localStream != null && typeof this.localStream !== 'undefined') {\n\t\t\tthis.localStream.getTracks().forEach((track) => track.stop());\n\t\t}\n\t\tthis.localUrl.set(undefined);\n\t\tdelete this.localStream;\n\t\tthis.stopAllPeerConnections();\n\t}\n\n\t/*\n  \t\t@param media {Object}\n  \t\t\taudio {Boolean}\n  \t\t\tvideo {Boolean}\n   */\n\n\tstartCall(media = {}, ...args) {\n\t\tthis.log('startCall', [media, ...args]);\n\t\tthis.media = media;\n\t\tthis.getLocalUserMedia(() => {\n\t\t\tthis.active = true;\n\t\t\tthis.transport.startCall({\n\t\t\t\tmedia: this.media,\n\t\t\t});\n\t\t});\n\t}\n\n\tstartCallAsMonitor(media = {}, ...args) {\n\t\tthis.log('startCallAsMonitor', [media, ...args]);\n\t\tthis.media = media;\n\t\tthis.active = true;\n\t\tthis.monitor = true;\n\t\tthis.transport.startCall({\n\t\t\tmedia: this.media,\n\t\t\tmonitor: true,\n\t\t});\n\t}\n\n\t/*\n  \t\t@param data {Object}\n  \t\t\tfrom {String}\n  \t\t\tmonitor {Boolean}\n  \t\t\tmedia {Object}\n  \t\t\t\taudio {Boolean}\n  \t\t\t\tvideo {Boolean}\n   */\n\n\tonRemoteCall(data) {\n\t\tif (this.autoAccept === true) {\n\t\t\tMeteor.defer(() => {\n\t\t\t\tthis.joinCall({\n\t\t\t\t\tto: data.from,\n\t\t\t\t\tmonitor: data.monitor,\n\t\t\t\t\tmedia: data.media,\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tconst user = Meteor.users.findOne(data.from);\n\t\tlet fromUsername = undefined;\n\t\tif (user && user.username) {\n\t\t\tfromUsername = user.username;\n\t\t}\n\t\tconst subscription = ChatSubscription.findOne({\n\t\t\trid: data.room,\n\t\t});\n\n\t\tlet icon;\n\t\tlet title;\n\t\tif (data.monitor === true) {\n\t\t\ticon = 'eye';\n\t\t\ttitle = t('WebRTC_monitor_call_from_%s', fromUsername);\n\t\t} else if (subscription && subscription.t === 'd') {\n\t\t\tif (data.media && data.media.video) {\n\t\t\t\ticon = 'videocam';\n\t\t\t\ttitle = t('WebRTC_direct_video_call_from_%s', fromUsername);\n\t\t\t} else {\n\t\t\t\ticon = 'phone';\n\t\t\t\ttitle = t('WebRTC_direct_audio_call_from_%s', fromUsername);\n\t\t\t}\n\t\t} else if (data.media && data.media.video) {\n\t\t\ticon = 'videocam';\n\t\t\ttitle = t('WebRTC_group_video_call_from_%s', subscription.name);\n\t\t} else {\n\t\t\ticon = 'phone';\n\t\t\ttitle = t('WebRTC_group_audio_call_from_%s', subscription.name);\n\t\t}\n\t\tmodal.open(\n\t\t\t{\n\t\t\t\ttitle: `<i class='icon-${icon} alert-icon success-color'></i>${title}`,\n\t\t\t\ttext: t('Do_you_want_to_accept'),\n\t\t\t\thtml: true,\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tconfirmButtonText: t('Yes'),\n\t\t\t\tcancelButtonText: t('No'),\n\t\t\t},\n\t\t\t(isConfirm) => {\n\t\t\t\tif (isConfirm) {\n\t\t\t\t\tgoToRoomById(data.room);\n\t\t\t\t\treturn this.joinCall({\n\t\t\t\t\t\tto: data.from,\n\t\t\t\t\t\tmonitor: data.monitor,\n\t\t\t\t\t\tmedia: data.media,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.stop();\n\t\t\t},\n\t\t);\n\t}\n\n\t/*\n  \t\t@param data {Object}\n  \t\t\tto {String}\n  \t\t\tmonitor {Boolean}\n  \t\t\tmedia {Object}\n  \t\t\t\taudio {Boolean}\n  \t\t\t\tvideo {Boolean}\n  \t\t\t\tdesktop {Boolean}\n   */\n\n\tjoinCall(data = {}, ...args) {\n\t\tdata.media = this.media;\n\t\tthis.log('joinCall', [data, ...args]);\n\t\tthis.getLocalUserMedia(() => {\n\t\t\tthis.remoteMonitoring = data.monitor;\n\t\t\tthis.active = true;\n\t\t\tthis.transport.joinCall(data);\n\t\t});\n\t}\n\n\tonRemoteJoin(data, ...args) {\n\t\tif (this.active !== true) {\n\t\t\treturn;\n\t\t}\n\t\tthis.log('onRemoteJoin', [data, ...args]);\n\t\tlet peerConnection = this.getPeerConnection(data.from);\n\n\t\t// needsRefresh = false\n\t\t// if peerConnection.iceConnectionState isnt 'new'\n\t\t// needsAudio = data.media.audio is true and peerConnection.remoteMedia.audio isnt true\n\t\t// needsVideo = data.media.video is true and peerConnection.remoteMedia.video isnt true\n\t\t// needsRefresh = needsAudio or needsVideo or data.media.desktop isnt peerConnection.remoteMedia.desktop\n\n\t\t// # if peerConnection.signalingState is \"have-local-offer\" or needsRefresh\n\n\t\tif (peerConnection.signalingState !== 'checking') {\n\t\t\tthis.stopPeerConnection(data.from);\n\t\t\tpeerConnection = this.getPeerConnection(data.from);\n\t\t}\n\t\tif (peerConnection.iceConnectionState !== 'new') {\n\t\t\treturn;\n\t\t}\n\t\tpeerConnection.remoteMedia = data.media;\n\t\tif (this.localStream) {\n\t\t\tpeerConnection.addStream(this.localStream);\n\t\t}\n\t\tconst onOffer = (offer) => {\n\t\t\tconst onLocalDescription = () => {\n\t\t\t\tthis.transport.sendDescription({\n\t\t\t\t\tto: data.from,\n\t\t\t\t\ttype: 'offer',\n\t\t\t\t\tts: peerConnection.createdAt,\n\t\t\t\t\tmedia: this.media,\n\t\t\t\t\tdescription: {\n\t\t\t\t\t\tsdp: offer.sdp,\n\t\t\t\t\t\ttype: offer.type,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tpeerConnection.setLocalDescription(new RTCSessionDescription(offer), onLocalDescription, this.onError);\n\t\t};\n\n\t\tif (data.monitor === true) {\n\t\t\tpeerConnection.createOffer(onOffer, this.onError, {\n\t\t\t\tmandatory: {\n\t\t\t\t\tOfferToReceiveAudio: data.media.audio,\n\t\t\t\t\tOfferToReceiveVideo: data.media.video,\n\t\t\t\t},\n\t\t\t});\n\t\t} else {\n\t\t\tpeerConnection.createOffer(onOffer, this.onError);\n\t\t}\n\t}\n\n\tonRemoteOffer(data, ...args) {\n\t\tif (this.active !== true) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.log('onRemoteOffer', [data, ...args]);\n\t\tlet peerConnection = this.getPeerConnection(data.from);\n\n\t\tif (['have-local-offer', 'stable'].includes(peerConnection.signalingState) && peerConnection.createdAt < data.ts) {\n\t\t\tthis.stopPeerConnection(data.from);\n\t\t\tpeerConnection = this.getPeerConnection(data.from);\n\t\t}\n\n\t\tif (peerConnection.iceConnectionState !== 'new') {\n\t\t\treturn;\n\t\t}\n\n\t\tpeerConnection.setRemoteDescription(new RTCSessionDescription(data.description));\n\n\t\ttry {\n\t\t\tif (this.localStream) {\n\t\t\t\tpeerConnection.addStream(this.localStream);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\n\t\tconst onAnswer = (answer) => {\n\t\t\tconst onLocalDescription = () => {\n\t\t\t\tthis.transport.sendDescription({\n\t\t\t\t\tto: data.from,\n\t\t\t\t\ttype: 'answer',\n\t\t\t\t\tts: peerConnection.createdAt,\n\t\t\t\t\tdescription: {\n\t\t\t\t\t\tsdp: answer.sdp,\n\t\t\t\t\t\ttype: answer.type,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tpeerConnection.setLocalDescription(new RTCSessionDescription(answer), onLocalDescription, this.onError);\n\t\t};\n\n\t\tpeerConnection.createAnswer(onAnswer, this.onError);\n\t}\n\n\t/*\n  \t\t@param data {Object}\n  \t\t\tto {String}\n  \t\t\tfrom {String}\n  \t\t\tcandidate {RTCIceCandidate JSON encoded}\n   */\n\n\tonRemoteCandidate(data, ...args) {\n\t\tif (this.active !== true) {\n\t\t\treturn;\n\t\t}\n\t\tif (data.to !== this.selfId) {\n\t\t\treturn;\n\t\t}\n\t\tthis.log('onRemoteCandidate', [data, ...args]);\n\t\tconst peerConnection = this.getPeerConnection(data.from);\n\t\tif (\n\t\t\tpeerConnection.iceConnectionState !== 'closed' &&\n\t\t\tpeerConnection.iceConnectionState !== 'failed' &&\n\t\t\tpeerConnection.iceConnectionState !== 'disconnected' &&\n\t\t\tpeerConnection.iceConnectionState !== 'completed'\n\t\t) {\n\t\t\tpeerConnection.addIceCandidate(new RTCIceCandidate(data.candidate));\n\t\t}\n\t\tdocument.querySelector('video#remoteVideo').srcObject = this.remoteItems.get()[0]?.url;\n\t}\n\n\t/*\n  \t\t@param data {Object}\n  \t\t\tto {String}\n  \t\t\tfrom {String}\n  \t\t\ttype {String} [offer, answer]\n  \t\t\tdescription {RTCSessionDescription JSON encoded}\n  \t\t\tts {Integer}\n  \t\t\tmedia {Object}\n  \t\t\t\taudio {Boolean}\n  \t\t\t\tvideo {Boolean}\n  \t\t\t\tdesktop {Boolean}\n   */\n\n\tonRemoteDescription(data, ...args) {\n\t\tif (this.active !== true) {\n\t\t\treturn;\n\t\t}\n\t\tif (data.to !== this.selfId) {\n\t\t\treturn;\n\t\t}\n\t\tthis.log('onRemoteDescription', [data, ...args]);\n\t\tconst peerConnection = this.getPeerConnection(data.from);\n\t\tif (data.type === 'offer') {\n\t\t\tpeerConnection.remoteMedia = data.media;\n\t\t\tthis.onRemoteOffer({\n\t\t\t\tfrom: data.from,\n\t\t\t\tts: data.ts,\n\t\t\t\tdescription: data.description,\n\t\t\t});\n\t\t} else {\n\t\t\tpeerConnection.setRemoteDescription(new RTCSessionDescription(data.description));\n\t\t}\n\t}\n}\n\nconst WebRTC = new (class {\n\tconstructor() {\n\t\tthis.instancesByRoomId = {};\n\t}\n\n\tgetInstanceByRoomId(rid, visitorId = null) {\n\t\tlet enabled = false;\n\t\tif (!visitorId) {\n\t\t\tconst subscription = ChatSubscription.findOne({ rid });\n\t\t\tif (!subscription) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tswitch (subscription.t) {\n\t\t\t\tcase 'd':\n\t\t\t\t\tenabled = settings.get('WebRTC_Enable_Direct');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'p':\n\t\t\t\t\tenabled = settings.get('WebRTC_Enable_Private');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'c':\n\t\t\t\t\tenabled = settings.get('WebRTC_Enable_Channel');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'l':\n\t\t\t\t\tenabled = settings.get('Omnichannel_call_provider') === 'WebRTC';\n\t\t\t}\n\t\t} else {\n\t\t\tenabled = settings.get('Omnichannel_call_provider') === 'WebRTC';\n\t\t}\n\t\tenabled = enabled && settings.get('WebRTC_Enabled');\n\t\tif (enabled === false) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.instancesByRoomId[rid] == null) {\n\t\t\tlet uid = Meteor.userId();\n\t\t\tlet autoAccept = false;\n\t\t\tif (visitorId) {\n\t\t\t\tuid = visitorId;\n\t\t\t\tautoAccept = true;\n\t\t\t}\n\t\t\tthis.instancesByRoomId[rid] = new WebRTCClass(uid, rid, autoAccept);\n\t\t}\n\t\treturn this.instancesByRoomId[rid];\n\t}\n})();\n\nMeteor.startup(function () {\n\tTracker.autorun(function () {\n\t\tif (Meteor.userId()) {\n\t\t\tNotifications.onUser(WEB_RTC_EVENTS.WEB_RTC, (type, data) => {\n\t\t\t\tif (data.room == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst webrtc = WebRTC.getInstanceByRoomId(data.room);\n\t\t\t\twebrtc.onUserStream(type, data);\n\t\t\t});\n\t\t}\n\t});\n});\n\nexport { WebRTC };\n","import { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport toastr from 'toastr';\n\nimport { actionLinks } from '../../action-links/client';\nimport { APIClient } from '../../utils/client';\nimport { Rooms } from '../../models/client';\nimport { IMessage } from '../../../definition/IMessage';\nimport { Notifications } from '../../notifications/client';\n\nactionLinks.register('joinLivechatWebRTCCall', (message: IMessage) => {\n\tconst { callStatus, _id } = Rooms.findOne({ _id: message.rid });\n\tif (callStatus === 'declined' || callStatus === 'ended') {\n\t\ttoastr.info(TAPi18n.__('Call_Already_Ended'));\n\t\treturn;\n\t}\n\twindow.open(`/meet/${_id}`, _id);\n});\n\nactionLinks.register('endLivechatWebRTCCall', async (message: IMessage) => {\n\tconst { callStatus, _id } = Rooms.findOne({ _id: message.rid });\n\tif (callStatus === 'declined' || callStatus === 'ended') {\n\t\ttoastr.info(TAPi18n.__('Call_Already_Ended'));\n\t\treturn;\n\t}\n\tawait APIClient.v1.put(`livechat/webrtc.call/${message._id}`, {}, { rid: _id, status: 'ended' });\n\tNotifications.notifyRoom(_id, 'webrtc', 'callStatus', { callStatus: 'ended' });\n});\n","window.RTCPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;\nwindow.RTCSessionDescription = window.RTCSessionDescription || window.mozRTCSessionDescription || window.webkitRTCSessionDescription;\nwindow.RTCIceCandidate = window.RTCIceCandidate || window.mozRTCIceCandidate || window.webkitRTCIceCandidate;\nwindow.RTCSessionDescription = window.RTCSessionDescription || window.mozRTCSessionDescription || window.webkitRTCSessionDescription;\nwindow.AudioContext = window.AudioContext || window.mozAudioContext || window.webkitAudioContext;\nnavigator.getUserMedia = navigator.getUserMedia || navigator.mozGetUserMedia || navigator.webkitGetUserMedia;\n","import './adapter';\nimport './tabBar';\nimport './actionLink';\n\nexport * from './WebRTCClass';\n","import { fireGlobalEvent } from '../../../client/lib/utils/fireGlobalEvent';\n\nexport const ChromeScreenShare = {\n\tcallbacks: {},\n\tinstalled: false,\n\tinit() {\n\t\tthis.callbacks['get-RocketChatScreenSharingExtensionVersion'] = (version) => {\n\t\t\tif (version) {\n\t\t\t\tthis.installed = true;\n\t\t\t}\n\t\t};\n\t\twindow.postMessage('get-RocketChatScreenSharingExtensionVersion', '*');\n\t},\n\tgetSourceId(navigator, callback) {\n\t\tif (callback == null) {\n\t\t\tthrow new Error('\"callback\" parameter is mandatory.');\n\t\t}\n\t\tthis.callbacks.getSourceId = callback;\n\t\tif (navigator === 'electron') {\n\t\t\treturn fireGlobalEvent('get-sourceId', '*');\n\t\t}\n\t\treturn window.postMessage('get-sourceId', '*');\n\t},\n};\n\nChromeScreenShare.init();\n\nwindow.addEventListener('message', function (e) {\n\tif (e.origin !== window.location.origin) {\n\t\treturn;\n\t}\n\tif (e.data === 'PermissionDeniedError') {\n\t\tif (ChromeScreenShare.callbacks.getSourceId != null) {\n\t\t\treturn ChromeScreenShare.callbacks.getSourceId('PermissionDeniedError');\n\t\t}\n\t\tthrow new Error('PermissionDeniedError');\n\t}\n\tif (e.data.version != null) {\n\t\tChromeScreenShare.callbacks['get-RocketChatScreenSharingExtensionVersion'] &&\n\t\t\tChromeScreenShare.callbacks['get-RocketChatScreenSharingExtensionVersion'](e.data.version);\n\t} else if (e.data.sourceId != null) {\n\t\treturn typeof ChromeScreenShare.callbacks.getSourceId === 'function' && ChromeScreenShare.callbacks.getSourceId(e.data.sourceId);\n\t}\n});\n","import { useMemo, useCallback } from 'react';\n\nimport { useSetting } from '../../../client/contexts/SettingsContext';\nimport { addAction } from '../../../client/views/room/lib/Toolbox';\nimport { APIClient } from '../../utils/client';\n\naddAction('webRTCVideo', ({ room }) => {\n\tconst enabled = useSetting('WebRTC_Enabled') && useSetting('Omnichannel_call_provider') === 'WebRTC' && room.servedBy;\n\n\tconst handleClick = useCallback(async (): Promise<void> => {\n\t\tif (!room.callStatus || room.callStatus === 'declined' || room.callStatus === 'ended') {\n\t\t\tawait APIClient.v1.get('livechat/webrtc.call', { rid: room._id });\n\t\t}\n\t\twindow.open(`/meet/${room._id}`, room._id);\n\t}, [room._id, room.callStatus]);\n\n\treturn useMemo(\n\t\t() =>\n\t\t\tenabled\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['live'],\n\t\t\t\t\t\tid: 'webRTCVideo',\n\t\t\t\t\t\ttitle: 'WebRTC_Call',\n\t\t\t\t\t\ticon: 'phone',\n\t\t\t\t\t\taction: handleClick,\n\t\t\t\t\t\tfull: true,\n\t\t\t\t\t\torder: 4,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[enabled, handleClick],\n\t);\n});\n","export const WEB_RTC_EVENTS = {\n\tWEB_RTC: 'webrtc',\n\tSTATUS: 'status',\n\tCALL: 'call',\n\tJOIN: 'join',\n\tCANDIDATE: 'candidate',\n\tDESCRIPTION: 'description',\n};\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nimport { APIClient } from '../../../../../../../app/utils/client';\nimport './visitorEditCustomFieldsForm.html';\n\nTemplate.visitorEditCustomFieldsForm.helpers({\n\tavailablePriorities() {\n\t\treturn Template.instance().priorities.get();\n\t},\n\tpriorityId() {\n\t\treturn Template.instance().roomPriority.get();\n\t},\n\tshowPriorities() {\n\t\treturn Template.instance().priorities.get().length > 0;\n\t},\n});\n\nTemplate.visitorEditCustomFieldsForm.onCreated(async function () {\n\tthis.priorities = new ReactiveVar([]);\n\tthis.roomPriority = new ReactiveVar(null);\n\n\tconst { priorityId } = this.data;\n\tif (priorityId) {\n\t\tthis.roomPriority.set(priorityId);\n\t}\n\tconst { priorities } = await APIClient.v1.get('livechat/priorities.list');\n\tthis.priorities.set(priorities);\n});\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nimport { APIClient } from '../../../../../../../app/utils/client';\nimport './visitorInfoCustomForm.html';\n\nTemplate.visitorInfoCustomForm.helpers({\n\tpriority() {\n\t\treturn Template.instance().priority.get();\n\t},\n});\n\nTemplate.visitorInfoCustomForm.onCreated(function () {\n\tthis.priority = new ReactiveVar(null);\n\n\tthis.autorun(async () => {\n\t\t// To make this template reactive we expect a ReactiveVar through the data property,\n\t\t// because the parent form may not be rerender, only the dynamic template data\n\t\tconst { priorityId = null } = this.data.get();\n\t\tlet priority;\n\n\t\tif (priorityId) {\n\t\t\tpriority = await APIClient.v1.get(`livechat/priorities.getOne?priorityId=${priorityId}`);\n\t\t}\n\n\t\tthis.priority.set(priority);\n\t});\n});\n","import { addCustomFormTemplate } from '../../../../../../app/livechat/client/views/app/customTemplates/register';\nimport './customTemplates/visitorEditCustomFieldsForm';\nimport './customTemplates/visitorInfoCustomForm';\n\naddCustomFormTemplate('livechatDepartmentForm', 'livechatDepartmentCustomFieldsForm');\naddCustomFormTemplate('livechatVisitorEditForm', 'visitorEditCustomFieldsForm');\naddCustomFormTemplate('livechatVisitorInfo', 'visitorInfoCustomForm');\n","import { IBusinessHourBehavior } from '../../../../../../app/livechat/client/views/app/business-hours/IBusinessHourBehavior';\nimport { ILivechatBusinessHour, LivechatBusinessHourTypes } from '../../../../../../definition/ILivechatBusinessHour';\n\nexport class MultipleBusinessHoursBehavior implements IBusinessHourBehavior {\n\tgetView(): string {\n\t\treturn 'livechatBusinessHours';\n\t}\n\n\tshowCustomTemplate(businessHourData: ILivechatBusinessHour): boolean {\n\t\treturn !businessHourData._id || businessHourData.type !== LivechatBusinessHourTypes.DEFAULT;\n\t}\n\n\tshowTimezoneTemplate(): boolean {\n\t\treturn true;\n\t}\n\n\tshowBackButton(): boolean {\n\t\treturn true;\n\t}\n}\n","import { registerOmnichannelSidebarItem } from '../../../../../client/views/omnichannel/sidebarItems';\nimport { hasPermission } from '../../../../../app/authorization/client';\n\nregisterOmnichannelSidebarItem({\n\thref: 'omnichannel-monitors',\n\ti18nLabel: 'Livechat_Monitors',\n\tpermissionGranted: () => hasPermission('manage-livechat-monitors'),\n});\n\nregisterOmnichannelSidebarItem({\n\thref: 'omnichannel/units',\n\ti18nLabel: 'Units',\n\tpermissionGranted: () => hasPermission('manage-livechat-units'),\n});\n\nregisterOmnichannelSidebarItem({\n\thref: 'omnichannel-canned-responses',\n\ti18nLabel: 'Canned_Responses',\n\tpermissionGranted: () => hasPermission('manage-livechat-canned-responses'),\n});\n\nregisterOmnichannelSidebarItem({\n\thref: 'omnichannel/tags',\n\ti18nLabel: 'Tags',\n\tpermissionGranted: () => hasPermission('manage-livechat-tags'),\n});\n\nregisterOmnichannelSidebarItem({\n\thref: 'omnichannel/priorities',\n\ti18nLabel: 'Priorities',\n\tpermissionGranted: () => hasPermission('manage-livechat-priorities'),\n});\n","import { SingleBusinessHourBehavior } from '../../../../app/livechat/client/views/app/business-hours/Single';\n\nexport class EESingleBusinessHourBehaviour extends SingleBusinessHourBehavior {\n\tshowTimezoneTemplate(): boolean {\n\t\treturn true;\n\t}\n}\n","import { hasLicense } from '../../license/client';\nimport '../lib/messageTypes';\nimport './route';\nimport './startup';\n\nhasLicense('livechat-enterprise').then((enabled) => {\n\tif (!enabled) {\n\t\treturn;\n\t}\n\n\trequire('./views/app/registerCustomTemplates');\n\trequire('./views/livechatSideNavItems');\n\trequire('./views/business-hours/Multiple');\n\trequire('../lib/QuickActions/defaultActions');\n\trequire('./messageTypes');\n});\n","import { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { MessageTypes } from '../../../../app/ui-utils/client';\n\nMessageTypes.registerType({\n\tid: 'livechat_transfer_history_fallback',\n\tsystem: true,\n\tmessage: 'New_chat_transfer_fallback',\n\tdata(message: any) {\n\t\tif (!message.transferData) {\n\t\t\treturn;\n\t\t}\n\t\tconst from = message.transferData.prevDepartment;\n\t\tconst to = message.transferData.department.name;\n\n\t\treturn {\n\t\t\tfallback: TAPi18n.__('Livechat_transfer_failed_fallback', { from, to }),\n\t\t};\n\t},\n});\n","import { AccountBox } from '../../../../app/ui-utils';\nimport { livechatManagerRoutes, load } from '../../../../app/livechat/client/route';\n\nAccountBox.addRoute(\n\t{\n\t\tname: 'livechat-tag-edit',\n\t\tpath: '/tags/:_id/edit',\n\t\tsideNav: 'omnichannelFlex',\n\t\ti18nPageTitle: 'Edit_Tag',\n\t\tpageTemplate: 'livechatTagForm',\n\t},\n\tlivechatManagerRoutes,\n);\n\nAccountBox.addRoute(\n\t{\n\t\tname: 'livechat-tag-new',\n\t\tpath: '/tags/new',\n\t\tsideNav: 'omnichannelFlex',\n\t\ti18nPageTitle: 'New_Tag',\n\t\tpageTemplate: 'livechatTagForm',\n\t},\n\tlivechatManagerRoutes,\n);\n\nAccountBox.addRoute(\n\t{\n\t\tname: 'livechat-priority-edit',\n\t\tpath: '/priorities/:_id/edit',\n\t\tsideNav: 'omnichannelFlex',\n\t\ti18nPageTitle: 'Edit_Priority',\n\t\tpageTemplate: 'livechatPriorityForm',\n\t},\n\tlivechatManagerRoutes,\n);\n\nAccountBox.addRoute(\n\t{\n\t\tname: 'livechat-priority-new',\n\t\tpath: '/priorities/new',\n\t\tsideNav: 'omnichannelFlex',\n\t\ti18nPageTitle: 'New_Priority',\n\t\tpageTemplate: 'livechatPriorityForm',\n\t},\n\tlivechatManagerRoutes,\n);\n\nAccountBox.addRoute(\n\t{\n\t\tname: 'livechat-business-hour-edit',\n\t\tpath: '/business-hours/:_id/:type/edit',\n\t\tsideNav: 'omnichannelFlex',\n\t\ti18nPageTitle: 'Edit_Business_Hour',\n\t\tpageTemplate: 'livechatBusinessHoursForm',\n\t},\n\tlivechatManagerRoutes,\n\tload,\n);\n\nAccountBox.addRoute(\n\t{\n\t\tname: 'livechat-business-hour-new',\n\t\tpath: '/business-hours/new',\n\t\tsideNav: 'omnichannelFlex',\n\t\ti18nPageTitle: 'New_Business_Hour',\n\t\tpageTemplate: 'livechatBusinessHoursForm',\n\t},\n\tlivechatManagerRoutes,\n\tload,\n);\n","import { Meteor } from 'meteor/meteor';\n\nimport { MultipleBusinessHoursBehavior } from './views/business-hours/Multiple';\nimport { settings } from '../../../../app/settings/client';\nimport { businessHourManager } from '../../../../app/livechat/client/views/app/business-hours/BusinessHours';\nimport { IBusinessHourBehavior } from '../../../../app/livechat/client/views/app/business-hours/IBusinessHourBehavior';\nimport { EESingleBusinessHourBehaviour } from './SingleBusinessHour';\nimport { hasLicense } from '../../license/client';\n\nconst businessHours: Record<string, IBusinessHourBehavior> = {\n\tMultiple: new MultipleBusinessHoursBehavior(),\n\tSingle: new EESingleBusinessHourBehaviour(),\n};\n\nMeteor.startup(function () {\n\tsettings.onload('Livechat_business_hour_type', async (_, value) => {\n\t\tif (await hasLicense('livechat-enterprise')) {\n\t\t\tbusinessHourManager.registerBusinessHourBehavior(businessHours[value as string]);\n\t\t}\n\t});\n});\n","import { addAction, QuickActionsEnum } from '../../../../../client/views/room/lib/QuickActions';\n\naddAction(QuickActionsEnum.OnHoldChat, {\n\tgroups: ['live'],\n\tid: QuickActionsEnum.OnHoldChat,\n\ttitle: 'Omnichannel_onHold_Chat',\n\ticon: 'pause-unfilled',\n\torder: 4,\n});\n","import { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { MessageTypes } from '../../../../app/ui-utils';\n\nMessageTypes.registerType({\n\tid: 'livechat_priority_history',\n\tsystem: true,\n\tmessage: 'New_chat_priority',\n\tdata(message) {\n\t\tif (!message.priorityData) {\n\t\t\treturn;\n\t\t}\n\t\tconst {\n\t\t\tdefinedBy: { username },\n\t\t\tpriority: { name = null } = {},\n\t\t} = message.priorityData;\n\t\treturn {\n\t\t\tuser: username,\n\t\t\tpriority: name || TAPi18n.__('Without_priority'),\n\t\t};\n\t},\n});\n","import { Template } from 'meteor/templating';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { hasAllPermission } from '../../../../../../app/authorization/client';\nimport { messageContext } from '../../../../../../app/ui-utils/client/lib/messageContext';\nimport { call } from '../../utils.js';\n\nimport './audit.html';\n\nconst loadMessages = async function ({ rid, users, startDate, endDate = new Date(), msg, type, visitor, agent }) {\n\tthis.messages = this.messages || new ReactiveVar([]);\n\tthis.loading = this.loading || new ReactiveVar(true);\n\ttry {\n\t\tthis.loading.set(true);\n\t\tconst messages =\n\t\t\ttype === 'l'\n\t\t\t\t? await call('auditGetOmnichannelMessages', {\n\t\t\t\t\t\trid,\n\t\t\t\t\t\tusers,\n\t\t\t\t\t\tstartDate,\n\t\t\t\t\t\tendDate,\n\t\t\t\t\t\tmsg,\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\tvisitor,\n\t\t\t\t\t\tagent,\n\t\t\t\t  })\n\t\t\t\t: await call('auditGetMessages', {\n\t\t\t\t\t\trid,\n\t\t\t\t\t\tusers,\n\t\t\t\t\t\tstartDate,\n\t\t\t\t\t\tendDate,\n\t\t\t\t\t\tmsg,\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\tvisitor,\n\t\t\t\t\t\tagent,\n\t\t\t\t  });\n\t\tthis.messagesContext.set({\n\t\t\t...messageContext({ rid }),\n\t\t\tmessages,\n\t\t});\n\t} catch (e) {\n\t\tthis.messagesContext.set({});\n\t} finally {\n\t\tthis.loading.set(false);\n\t}\n};\n\nTemplate.audit.helpers({\n\tisLoading() {\n\t\treturn Template.instance().loading.get();\n\t},\n\tmessageContext() {\n\t\treturn Template.instance().messagesContext.get();\n\t},\n\thasResults() {\n\t\treturn Template.instance().hasResults.get();\n\t},\n});\n\nTemplate.audit.onCreated(async function () {\n\tthis.messagesContext = new ReactiveVar({});\n\tthis.loading = new ReactiveVar(false);\n\tthis.hasResults = new ReactiveVar(false);\n\n\tif (!hasAllPermission('can-audit')) {\n\t\treturn FlowRouter.go('/home');\n\t}\n\n\tthis.autorun(() => {\n\t\tconst messagesContext = this.messagesContext.get();\n\n\t\tthis.hasResults.set(messagesContext && messagesContext.messages && messagesContext.messages.length > 0);\n\t});\n\n\tthis.loadMessages = loadMessages.bind(this);\n\n\tconst { visitor, agent, users, rid } = this.data;\n\tif (rid || users.length || agent || visitor) {\n\t\tawait this.loadMessages(this.data);\n\t}\n});\n","import './audit/audit.js';\n","import { hasLicense } from '../../license/client';\nimport { AccountBox } from '../../../../app/ui-utils/client';\nimport { hasAllPermission } from '../../../../app/authorization/client';\n\nhasLicense('auditing')\n\t.then((enabled) => {\n\t\tif (!enabled) {\n\t\t\treturn;\n\t\t}\n\t\trequire('./templates');\n\t\trequire('./index.css');\n\n\t\tAccountBox.addItem({\n\t\t\thref: 'audit-home',\n\t\t\tname: 'Message_auditing',\n\t\t\ticon: 'document-eye',\n\t\t\tcondition: () => hasAllPermission('can-audit'),\n\t\t});\n\n\t\tAccountBox.addItem({\n\t\t\thref: 'audit-log',\n\t\t\tname: 'Message_auditing_log',\n\t\t\ticon: 'document-eye',\n\t\t\tcondition: () => hasAllPermission('can-audit-log'),\n\t\t});\n\t})\n\t.catch((error) => {\n\t\tconsole.error('Error checking license.', error);\n\t});\n","export { callWithErrorHandling as call } from '../../../../client/lib/utils/callWithErrorHandling';\n\nexport const convertDate = (date) => {\n\tconst [y, m, d] = date.split('-');\n\treturn new Date(y, m - 1, d);\n};\n\nexport const scrollTo = function scrollTo(element, to, duration) {\n\tif (duration <= 0) {\n\t\treturn;\n\t}\n\tconst difference = to - element.scrollTop;\n\tconst perTick = (difference / duration) * 10;\n\n\tsetTimeout(function () {\n\t\telement.scrollTop += perTick;\n\t\tif (element.scrollTop === to) {\n\t\t\treturn;\n\t\t}\n\t\tscrollTo(element, to, duration - 10);\n\t}, 10);\n};\n","import _ from 'underscore';\nimport { Tracker } from 'meteor/tracker';\n\nimport { CannedResponse } from '../../collections/CannedResponse';\nimport { addMessagePopup, removeMessagePopup } from '../../../../../../app/ui-message/client/popup/customMessagePopups';\nimport { t } from '../../../../../../app/utils';\nimport { settings } from '../../../../../../app/settings/client';\n\nTracker.autorun(() => {\n\tconst templateFunc = (template) => ({\n\t\ttitle: t('Canned_Responses'),\n\t\tcollection: CannedResponse,\n\t\ttrigger: '!',\n\t\tprefix: '',\n\t\tsuffix: ' ',\n\t\ttriggerAnywhere: true,\n\t\ttemplate: 'messagePopupCannedResponse',\n\t\trid: template.data.rid,\n\t\tgetInput: template.data.getInput,\n\t\ttextFilterDelay: 500,\n\t\tgetFilter: (collection, filter) => {\n\t\t\tconst exp = new RegExp(filter, 'i');\n\t\t\tconst records = collection\n\t\t\t\t.find(\n\t\t\t\t\t{\n\t\t\t\t\t\tshortcut: exp,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\treactive: 1,\n\t\t\t\t\t\tlimit: 12,\n\t\t\t\t\t\tsort: {\n\t\t\t\t\t\t\tshortcut: -1,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t)\n\t\t\t\t.fetch();\n\n\t\t\treturn records;\n\t\t},\n\t\tgetValue: (_id, collection, records) => {\n\t\t\tconst record = _.findWhere(records, {\n\t\t\t\t_id,\n\t\t\t});\n\t\t\treturn record && record.text;\n\t\t},\n\t});\n\n\tconst settingValue = settings.get('Canned_Responses_Enable');\n\tif (settingValue) {\n\t\taddMessagePopup(templateFunc, 'cannedResponses');\n\t} else {\n\t\tremoveMessagePopup('cannedResponses');\n\t}\n});\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\n\nimport { CannedResponse } from '../../collections/CannedResponse';\nimport { t } from '../../../../../../app/utils';\nimport { chatMessages } from '../../../../../../app/ui/client';\nimport { handleError } from '../../../../../../client/lib/utils/handleError';\nimport { dispatchToastMessage } from '../../../../../../client/lib/toast';\n\nimport './cannedResponses.html';\n\nTemplate.cannedResponses.helpers({\n\tcannedResponses() {\n\t\tconst searchText = Template.instance().searchText.get().toLocaleLowerCase();\n\n\t\tlet query = {};\n\n\t\tif (Template.instance().context.get() === 'department') {\n\t\t\tquery = {\n\t\t\t\tscope: 'department',\n\t\t\t\tdepartmentId: Template.instance().departmentId,\n\t\t\t};\n\t\t}\n\n\t\tif (searchText) {\n\t\t\tconst regex = new RegExp(searchText, 'i');\n\t\t\tquery.$or = [\n\t\t\t\t{\n\t\t\t\t\tshortcut: {\n\t\t\t\t\t\t$regex: regex,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: {\n\t\t\t\t\t\t$regex: regex,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\t\t}\n\t\treturn CannedResponse.find(query);\n\t},\n\n\thasNoCannedResponses() {\n\t\treturn CannedResponse.find().count() === 0;\n\t},\n\n\tisDetailScreen() {\n\t\treturn ['edit', 'new', 'view'].includes(Template.instance().action.get());\n\t},\n\n\tisNewResponse() {\n\t\treturn Template.instance().action.get() === 'new';\n\t},\n\n\tisExistingResponse() {\n\t\treturn ['edit', 'view'].includes(Template.instance().action.get());\n\t},\n\n\tisUserContext() {\n\t\treturn Template.instance().context.get() === 'user';\n\t},\n\n\tsearchText() {\n\t\treturn Template.instance().searchText.get();\n\t},\n\n\tisDepartmentContext() {\n\t\treturn Template.instance().context.get() === 'department';\n\t},\n\n\tcannedResponse() {\n\t\treturn Template.instance().cannedResponse.get();\n\t},\n\n\tcanDeleteResponse() {\n\t\tconst action = Template.instance().action.get();\n\n\t\tif (action !== 'edit') {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst response = Template.instance().cannedResponse.get();\n\t\tconst context = Template.instance().context.get();\n\n\t\treturn response.scope === context;\n\t},\n\n\tcanModifyResponse() {\n\t\tconst action = Template.instance().action.get();\n\n\t\tif (action === 'new') {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst response = Template.instance().cannedResponse.get();\n\t\tconst context = Template.instance().context.get();\n\n\t\treturn response.scope === context;\n\t},\n\n\tcreatedByString() {\n\t\tconst username = this.createdBy;\n\n\t\tconst me = Meteor.users.findOne(Meteor.userId());\n\n\t\tif (me.username === username) {\n\t\t\treturn t('Me');\n\t\t}\n\n\t\treturn username;\n\t},\n\n\tisPreviewMode() {\n\t\treturn Template.instance().action.get() === 'view';\n\t},\n});\n\nTemplate.cannedResponses.events({\n\t'click .new-canned-response-btn'(e, instance) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tinstance.cannedResponse.set({\n\t\t\tshortcut: '',\n\t\t\ttext: '',\n\t\t});\n\t\tinstance.action.set('new');\n\t},\n\n\t'click .canned-response'(e, instance) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tconst { _id } = this;\n\n\t\tconst cannedResponse = CannedResponse.findOne({ _id });\n\t\tif (!cannedResponse) {\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Invalid Canned Response') });\n\t\t}\n\n\t\tinstance.cannedResponse.set(cannedResponse);\n\t\tconst canEdit = instance.context.get() === cannedResponse.scope;\n\n\t\tinstance.action.set(canEdit ? 'edit' : 'view');\n\t},\n\n\t'click .delete-canned-response'(e, instance) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tconst _id = instance.$('input[name=id]').val();\n\n\t\tMeteor.call('removeCannedResponse', _id, (error) => {\n\t\t\tif (error) {\n\t\t\t\treturn handleError(error);\n\t\t\t}\n\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Canned_Response_Removed') });\n\t\t\tinstance.action.set(null);\n\t\t});\n\t},\n\n\t'click .cancel-canned-response-btn'(e, instance) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tinstance.action.set(null);\n\t},\n\n\t'click .use-canned-response-btn'(e, instance) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tconst { rid } = Template.currentData();\n\t\tif (!rid) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst object = instance.cannedResponse.get();\n\t\tconst { input } = chatMessages[rid];\n\t\tconst { text } = object;\n\n\t\tif (document.selection) {\n\t\t\tinput.focus();\n\t\t\tconst sel = document.selection.createRange();\n\t\t\tsel.text = text;\n\t\t\treturn;\n\t\t}\n\n\t\tif (input.selectionStart || input.selectionStart === 0) {\n\t\t\tconst startPos = input.selectionStart;\n\t\t\tconst endPos = input.selectionEnd;\n\n\t\t\tconst prefix = input.value.substring(0, startPos);\n\t\t\tconst suffix = input.value.substring(endPos, input.value.length);\n\n\t\t\tinput.value = `${prefix}${text}${suffix}`;\n\t\t\tinput.selectionStart = startPos + text.length;\n\t\t\tinput.selectionEnd = startPos + text.length;\n\n\t\t\tinput.focus();\n\t\t\tinstance.action.set(null);\n\t\t\treturn;\n\t\t}\n\n\t\tinput.value += text;\n\t},\n\n\t'click .save-canned-response-btn'(e, instance) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tconst _id = instance.$('input[name=id]').val();\n\t\tconst shortcut = instance.$('input[name=shortcut]').val();\n\t\tconst text = instance.$('textarea[name=text]').val();\n\n\t\tconst responseData = {\n\t\t\tshortcut,\n\t\t\ttext,\n\t\t};\n\n\t\tconst context = instance.context.get();\n\t\tif (context === 'department') {\n\t\t\tif (!instance.departmentId) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: t('Invalid_Department') });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresponseData.scope = 'department';\n\t\t\tresponseData.departmentId = instance.departmentId;\n\t\t} else {\n\t\t\tresponseData.scope = 'user';\n\t\t}\n\n\t\tMeteor.call('saveCannedResponse', _id, responseData, function (error /* , result*/) {\n\t\t\tif (error) {\n\t\t\t\treturn handleError(error);\n\t\t\t}\n\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Saved') });\n\t\t\tinstance.action.set(null);\n\t\t});\n\t},\n\n\t'keyup .js-search'(event, instance) {\n\t\tinstance.searchText.set(event.currentTarget.value || '');\n\t},\n});\n\nTemplate.cannedResponses.onCreated(function () {\n\tthis.action = new ReactiveVar();\n\tthis.context = new ReactiveVar();\n\tthis.cannedResponse = new ReactiveVar();\n\tthis.searchText = new ReactiveVar('');\n\tthis.departmentId = null;\n\n\tif (this.data && this.data.context) {\n\t\tthis.context.set(this.data.context);\n\n\t\tif (this.data.context === 'department') {\n\t\t\tthis.departmentId = this.data.departmentId;\n\t\t}\n\t} else {\n\t\tthis.context.set('user');\n\t}\n});\n","import { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Template } from 'meteor/templating';\n\nimport './departmentCannedResponses.html';\n\nTemplate.departmentCannedResponses.helpers({\n\tdepartmentId() {\n\t\treturn FlowRouter.getParam('_id');\n\t},\n});\n\nTemplate.departmentCannedResponses.events({});\n\nTemplate.departmentCannedResponses.onCreated(function () {});\n","import { Mongo } from 'meteor/mongo';\n\nexport const CannedResponse = new Mongo.Collection(null);\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { hasPermission } from '../../../../../app/authorization/client';\nimport { settings } from '../../../../../app/settings/client';\nimport { APIClient } from '../../../../../app/utils/client';\nimport { CannedResponse } from '../collections/CannedResponse';\nimport { cannedResponsesStreamer } from '../streamer';\n\nconst events = {\n\tchanged: (response) => {\n\t\tdelete response.type;\n\t\tCannedResponse.upsert({ _id: response._id }, response);\n\t},\n\tremoved: (response) => CannedResponse.remove({ _id: response._id }),\n};\n\nMeteor.startup(() => {\n\tTracker.autorun(async (c) => {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn;\n\t\t}\n\t\tif (!settings.get('Canned_Responses_Enable')) {\n\t\t\treturn;\n\t\t}\n\t\tif (!hasPermission('view-canned-responses')) {\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tcannedResponsesStreamer.on('canned-responses', (response, options) => {\n\t\t\t\tconst { agentsId } = options || {};\n\t\t\t\tif (Array.isArray(agentsId) && !agentsId.includes(Meteor.userId())) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tevents[response.type](response);\n\t\t\t});\n\t\t\tconst { responses } = await APIClient.v1.get('canned-responses.get');\n\t\t\tresponses.forEach((response) => CannedResponse.insert(response));\n\t\t\tc.stop();\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t});\n});\n","import './tabBar';\nimport './startup/responses';\nimport './stylesheets/cannedResponses.css';\nimport './views/icons.html';\nimport './views/tabbar/cannedResponses';\nimport './views/tabbar/departmentCannedResponses';\nimport './views/popup/addMessagePopupCannedResponse';\nimport './views/popup/messagePopupCannedResponse.html';\n","import { Meteor } from 'meteor/meteor';\n\nexport const cannedResponsesStreamer = new Meteor.Streamer('canned-responses');\n","import { lazy, useMemo } from 'react';\n\nimport { useHasLicense } from '../../../client/hooks/useHasLicense';\nimport { useSetting } from '../../../../client/contexts/SettingsContext';\nimport { addAction } from '../../../../client/views/room/lib/Toolbox';\n\naddAction('canned-responses', () => {\n\tconst hasLicense = useHasLicense('canned-responses');\n\tconst enabled = useSetting('Canned_Responses_Enable');\n\n\treturn useMemo(\n\t\t() =>\n\t\t\thasLicense && enabled\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['live'],\n\t\t\t\t\t\tid: 'canned-responses',\n\t\t\t\t\t\ttitle: 'Canned_Responses',\n\t\t\t\t\t\ticon: 'canned-response',\n\t\t\t\t\t\ttemplate: lazy(() => import('../../../client/omnichannel/components/contextualBar/CannedResponse')),\n\t\t\t\t\t\torder: 0,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[hasLicense, enabled],\n\t);\n});\n","import { AuthorizationUtils } from '../../../../app/authorization/lib/AuthorizationUtils';\nimport { guestPermissions } from './guestPermissions';\n\nexport const addRoleRestrictions = function () {\n\tAuthorizationUtils.addRolePermissionWhiteList('guest', guestPermissions);\n};\n","export const guestPermissions = ['view-d-room', 'view-joined-room', 'view-p-room', 'start-discussion'];\n","import { Meteor } from 'meteor/meteor';\n\nimport { addRoleRestrictions } from '../lib/addRoleRestrictions';\n\nMeteor.startup(() => {\n\tMeteor.call('license:isEnterprise', (err: any, result: any) => {\n\t\tif (err) {\n\t\t\tthrow err;\n\t\t}\n\n\t\tif (result) {\n\t\t\taddRoleRestrictions();\n\t\t}\n\t});\n});\n","import { fetchFeatures } from '../../../client/lib/fetchFeatures';\nimport { queryClient } from '../../../../client/lib/queryClient';\n\nconst allModules = queryClient\n\t.fetchQuery({\n\t\tqueryKey: ['ee.features'],\n\t\tqueryFn: fetchFeatures,\n\t})\n\t.then((features) => new Set<string>(features))\n\t.catch((e) => {\n\t\tconsole.error('Error getting modules', e);\n\t\treturn Promise.reject(e);\n\t});\n\nexport async function hasLicense(feature: string): Promise<boolean> {\n\ttry {\n\t\tconst features = await allModules;\n\t\treturn features.has(feature);\n\t} catch (e) {\n\t\treturn false;\n\t}\n}\n","import { CachedCollectionManager } from '../../../app/ui-cached-collection/client';\nimport { call } from '../../../client/lib/utils/call';\n\nexport const fetchFeatures = (): Promise<string[]> =>\n\tnew Promise((resolve, reject) => {\n\t\tCachedCollectionManager.onLogin(() => {\n\t\t\tcall('license:getModules').then(resolve, reject);\n\t\t});\n\t});\n","import { QueryObserver } from 'react-query';\n\nimport { queryClient } from '../../../client/lib/queryClient';\nimport type { BundleFeature } from '../../app/license/server/bundles';\nimport { fetchFeatures } from './fetchFeatures';\n\nexport const onToggledFeature = (\n\tfeature: BundleFeature,\n\t{\n\t\tup,\n\t\tdown,\n\t}: {\n\t\tup?: () => void;\n\t\tdown?: () => void;\n\t},\n): (() => void) => {\n\tconst observer = new QueryObserver(queryClient, {\n\t\tqueryKey: ['ee.features'],\n\t\tqueryFn: fetchFeatures,\n\t});\n\n\tlet enabled = false;\n\n\treturn observer.subscribe((result) => {\n\t\tif (!result.isSuccess) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst features = result.data;\n\t\tconst hasFeature = features.includes(feature);\n\n\t\tif (!enabled && hasFeature) {\n\t\t\tup?.();\n\t\t\tenabled = true;\n\t\t}\n\n\t\tif (enabled && !hasFeature) {\n\t\t\tdown?.();\n\t\t\tenabled = false;\n\t\t}\n\t});\n};\n","import { useMemo, lazy } from 'react';\n\nimport { registerForm } from '../../../../client/views/omnichannel/additionalForms';\nimport { hasLicense } from '../../../app/license/client';\n\nhasLicense('livechat-enterprise').then((enabled) => {\n\tif (!enabled) {\n\t\treturn;\n\t}\n\n\tregisterForm({\n\t\tuseCustomFieldsAdditionalForm: () => useMemo(() => lazy(() => import('./CustomFieldsAdditionalFormContainer')), []),\n\t});\n\tregisterForm({\n\t\tuseMaxChatsPerAgent: () => useMemo(() => lazy(() => import('./MaxChatsPerAgentContainer')), []),\n\t});\n\tregisterForm({\n\t\tuseMaxChatsPerAgentDisplay: () => useMemo(() => lazy(() => import('./MaxChatsPerAgentDisplay')), []),\n\t});\n\tregisterForm({\n\t\tuseEeNumberInput: () => useMemo(() => lazy(() => import('./EeNumberInput')), []),\n\t});\n\tregisterForm({\n\t\tuseEeTextAreaInput: () => useMemo(() => lazy(() => import('./EeTextAreaInput')), []),\n\t});\n\tregisterForm({ useEeTextInput: () => useMemo(() => lazy(() => import('./EeTextInput')), []) });\n\tregisterForm({\n\t\tuseBusinessHoursMultiple: () => useMemo(() => lazy(() => import('./BusinessHoursMultipleContainer')), []),\n\t});\n\tregisterForm({\n\t\tuseBusinessHoursTimeZone: () => useMemo(() => lazy(() => import('./BusinessHoursTimeZone')), []),\n\t});\n\tregisterForm({\n\t\tuseContactManager: () => useMemo(() => lazy(() => import('./ContactManager')), []),\n\t});\n\tregisterForm({\n\t\tuseCurrentChatTags: () => useMemo(() => lazy(() => import('../tags/CurrentChatTags')), []),\n\t});\n\tregisterForm({\n\t\tuseDepartmentBusinessHours: () => useMemo(() => lazy(() => import('./DepartmentBusinessHours')), []),\n\t});\n\tregisterForm({\n\t\tuseDepartmentForwarding: () => useMemo(() => lazy(() => import('./DepartmentForwarding')), []),\n\t});\n\tregisterForm({\n\t\tusePrioritiesSelect: () => useMemo(() => lazy(() => import('./PrioritiesSelect')), []),\n\t});\n\tregisterForm({\n\t\tuseSelectForwardDepartment: () => useMemo(() => lazy(() => import('../../../../client/components/AutoCompleteDepartment')), []),\n\t});\n});\n","import './additionalForms/register';\nimport './routes';\n","import { registerOmnichannelRoute } from '../../../client/views/omnichannel/routes';\n\nregisterOmnichannelRoute('/monitors', {\n\tname: 'omnichannel-monitors',\n\tlazyRouteComponent: () => import('./monitors/MonitorsPageContainer'),\n});\n\nregisterOmnichannelRoute('/priorities/:context?/:id?', {\n\tname: 'omnichannel-priorities',\n\tlazyRouteComponent: () => import('./priorities/PrioritiesRoute'),\n});\n\nregisterOmnichannelRoute('/canned-responses/:context?/:id?', {\n\tname: 'omnichannel-canned-responses',\n\tlazyRouteComponent: () => import('./cannedResponses/CannedResponsesRoute'),\n});\n","import { useState, useEffect } from 'react';\n\nimport { hasLicense } from '../../app/license/client';\n\nexport const useHasLicense = (licenseName) => {\n\tconst [license, setLicense] = useState('loading');\n\n\tuseEffect(() => {\n\t\thasLicense(licenseName).then((enabled) => {\n\t\t\tif (enabled) {\n\t\t\t\treturn setLicense(true);\n\t\t\t}\n\t\t\tsetLicense(false);\n\t\t});\n\t}, [licenseName]);\n\n\treturn license;\n};\n","import { Meteor } from 'meteor/meteor';\n\nimport { hasAllPermission } from '../../../app/authorization/client';\nimport { registerAdminRoute, registerAdminSidebarItem, unregisterAdminSidebarItem } from '../../../client/views/admin';\nimport { onToggledFeature } from '../lib/onToggledFeature';\n\nconst [registerRoute, unregisterRoute] = registerAdminRoute('/engagement-dashboard/:tab?', {\n\tname: 'engagement-dashboard',\n\tlazyRouteComponent: () => import('../views/admin/engagementDashboard/EngagementDashboardRoute'),\n\tready: false,\n});\n\nonToggledFeature('engagement-dashboard', {\n\tup: () =>\n\t\tMeteor.startup(() => {\n\t\t\tregisterAdminSidebarItem({\n\t\t\t\thref: '/admin/engagement-dashboard',\n\t\t\t\ti18nLabel: 'Engagement Dashboard',\n\t\t\t\ticon: 'file-keynote',\n\t\t\t\tpermissionGranted: () => hasAllPermission('view-engagement-dashboard'),\n\t\t\t});\n\t\t\tregisterRoute();\n\t\t}),\n\tdown: () =>\n\t\tMeteor.startup(() => {\n\t\t\tunregisterAdminSidebarItem('Engagement Dashboard');\n\t\t\tunregisterRoute();\n\t\t}),\n});\n","import './engagementDashboard';\nimport './routes';\n","import { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { appLayout } from '../../../client/lib/appLayout';\n\nFlowRouter.route('/audit', {\n\tname: 'audit-home',\n\taction() {\n\t\tappLayout.renderMainLayout({ center: 'auditPage' });\n\t},\n});\n\nFlowRouter.route('/audit-log', {\n\tname: 'audit-log',\n\taction() {\n\t\tappLayout.renderMainLayout({ center: 'auditLogPage' });\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { APIClient } from '../../app/utils/client';\nimport type { ClientSession } from '../app/ecdh/client/ClientSession';\n\nlet resolveSession: (value: ClientSession | void) => void;\nconst sessionPromise = new Promise<ClientSession | void>((resolve) => {\n\tresolveSession = resolve;\n});\n\nfunction init(session: ClientSession): void {\n\tMeteor.connection._stream.allowConnection();\n\n\tconst _didMessage = Meteor.connection._stream.socket._didMessage.bind(Meteor.connection._stream.socket);\n\tconst send = Meteor.connection._stream.socket.send.bind(Meteor.connection._stream.socket);\n\n\tMeteor.connection._stream.socket._didMessage = async (data): Promise<void> => {\n\t\tconst decryptedData = await session.decrypt(data);\n\t\tdecryptedData.split('\\n').forEach((d) => _didMessage(d));\n\t};\n\n\tMeteor.connection._stream.socket.send = async (data): Promise<void> => {\n\t\tsend(await session.encrypt(data));\n\t};\n}\n\nasync function initEncryptedSession(): Promise<void> {\n\tif (!window.ECDH_Enabled) {\n\t\tMeteor.connection._stream.allowConnection();\n\t\treturn resolveSession();\n\t}\n\tconst { ClientSession } = await import('../app/ecdh/client/ClientSession');\n\tconst session = new ClientSession();\n\tconst clientPublicKey = await session.init();\n\n\ttry {\n\t\tconst response = await fetch('/api/ecdh_proxy/initEncryptedSession', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tbody: JSON.stringify({ clientPublicKey }),\n\t\t});\n\n\t\tif (response.status !== 200) {\n\t\t\tresolveSession();\n\t\t\treturn Meteor.connection._stream.allowConnection();\n\t\t}\n\n\t\tconst data = await response.json();\n\n\t\tif (data.success === false) {\n\t\t\tresolveSession();\n\t\t\treturn Meteor.connection._stream.allowConnection();\n\t\t}\n\n\t\tawait session.setServerKey(data.publicKeyString);\n\t\tresolveSession(session);\n\t\tinit(session);\n\t} catch (e) {\n\t\tconsole.log(e);\n\t\tresolveSession();\n\t\tMeteor.connection._stream.allowConnection();\n\t}\n}\n\ninitEncryptedSession();\n\nconst _jqueryCall = APIClient._jqueryCall.bind(APIClient);\n\nAPIClient._jqueryCall = async (method, endpoint, params, body, headers = {}): Promise<any> => {\n\tconst session = await sessionPromise;\n\n\tif (!session) {\n\t\treturn _jqueryCall(method, endpoint, params, body, headers);\n\t}\n\n\tconst result = await _jqueryCall(method, endpoint, params, body, headers, 'text');\n\tconst decrypted = await session.decrypt(result);\n\tconst parsed = JSON.parse(decrypted);\n\treturn parsed;\n};\n","import '../app/auditing/client';\nimport '../app/authorization/client';\nimport '../app/canned-responses/client';\nimport '../app/license/client';\nimport '../app/livechat-enterprise/client';\nimport './omnichannel';\nimport './startup';\n","import { Box, Option } from '@rocket.chat/fuselage';\nimport { ComponentProps, ReactNode } from 'react';\n\nimport { IRoom } from '../../../../../definition/IRoom';\nimport { ToolboxActionConfig } from '../Toolbox';\nimport { generator, Events as GeneratorEvents } from '../Toolbox/generator';\n\ntype QuickActionsHook = ({ room }: { room: IRoom }) => QuickActionsActionConfig | null;\n\ntype ActionRendererProps = Omit<QuickActionsActionConfig, 'renderAction' | 'groups'> & {\n\tclassName: ComponentProps<typeof Box>['className'];\n\ttabId: QuickActionsActionConfig['id'] | undefined;\n\tindex: number;\n};\n\nexport type ActionRenderer = (props: ActionRendererProps) => ReactNode;\n\ntype OptionRendererProps = ComponentProps<typeof Option>;\n\nexport type OptionRenderer = (props: OptionRendererProps) => ReactNode;\n\nexport type QuickActionsActionConfig = ToolboxActionConfig & {\n\tgroups: Array<'live'>;\n\tcolor?: string;\n};\n\nexport type QuickActionsAction = QuickActionsHook | QuickActionsActionConfig;\n\nconst { listen, add: addAction, remove: deleteAction, store: actions } = generator<QuickActionsAction>();\n\nexport type Events = GeneratorEvents<QuickActionsAction>;\n\nexport { listen, addAction, deleteAction, actions };\n\nexport enum QuickActionsEnum {\n\tMoveQueue = 'rocket-move-to-queue',\n\tChatForward = 'rocket-chat-forward',\n\tTranscript = 'rocket-transcript',\n\tCloseChat = 'rocket-close-chat',\n\tOnHoldChat = 'rocket-on-hold-chat',\n}\n","import { generator } from './generator';\n\nexport type IFrameAction = {\n\tid: string;\n\ticon: string;\n\tlabel: string;\n};\n\nconst { listen, add, remove, store } = generator<IFrameAction>();\nexport { listen, add, remove, store };\n","import { Emitter, EventHandlerOf } from '@rocket.chat/emitter';\n\nexport type Store<T> = Map<string, T>;\n\nexport type Events<T> = {\n\tchange: Store<T>;\n};\n\nexport const generator = function generator<T>(name?: string): {\n\tstore: Store<T>;\n\tadd: (id: string, action: T) => Store<T>;\n\tremove: (id: string) => boolean;\n\tlisten: (handler: EventHandlerOf<Events<T>, 'change'>) => Function;\n\tname: string | undefined;\n} {\n\tconst store: Store<T> = new Map();\n\tconst emitter = new Emitter<Events<T>>();\n\n\tconst add = (id: string, action: T): Store<T> => {\n\t\tstore.set(id, action);\n\t\temitter.emit('change', store);\n\t\treturn store;\n\t};\n\n\tconst remove = (id: string): boolean => {\n\t\tconst result = store.delete(id);\n\t\temitter.emit('change', store);\n\t\treturn result;\n\t};\n\n\tconst listen = (handler: EventHandlerOf<Events<T>, 'change'>): Function => emitter.on('change', handler);\n\n\treturn Object.freeze({\n\t\tstore,\n\t\tadd,\n\t\tremove,\n\t\tlisten,\n\t\tname,\n\t});\n};\n","import { Box, Option } from '@rocket.chat/fuselage';\nimport { FC, LazyExoticComponent, ReactNode, MouseEvent, ComponentProps } from 'react';\n\nimport { IRoom } from '../../../../../definition/IRoom';\nimport { TranslationKey } from '../../../../contexts/TranslationContext';\nimport { generator, Events as GeneratorEvents } from './generator';\n\ntype ToolboxHook = ({ room }: { room: IRoom }) => ToolboxActionConfig | null;\n\ntype ActionRendererProps = Omit<ToolboxActionConfig, 'renderAction' | 'groups' | 'title'> & {\n\tclassName: ComponentProps<typeof Box>['className'];\n\tindex: number;\n\ttitle: string;\n};\n\nexport type ActionRenderer = (props: ActionRendererProps) => ReactNode;\n\ntype OptionRendererProps = ComponentProps<typeof Option>;\n\nexport type OptionRenderer = (props: OptionRendererProps) => ReactNode;\n\nexport type ToolboxActionConfig = {\n\tid: string;\n\ticon: string;\n\ttitle: TranslationKey;\n\tanonymous?: boolean;\n\trenderAction?: ActionRenderer;\n\tfull?: true;\n\trenderOption?: OptionRenderer;\n\torder?: number;\n\tgroups: Array<'group' | 'channel' | 'live' | 'direct' | 'direct_multiple' | 'team'>;\n\thotkey?: string;\n\taction?: (e: MouseEvent<HTMLElement>) => void;\n\ttemplate?: string | FC | LazyExoticComponent<FC<{ rid: string; tabBar: any }>>;\n};\n\nexport type ToolboxAction = ToolboxHook | ToolboxActionConfig;\n\nconst { listen, add: addAction, remove: deleteAction, store: actions } = generator<ToolboxAction>();\n\nexport type Events = GeneratorEvents<ToolboxAction>;\n\nexport { listen, addAction, deleteAction, actions };\n","import React, { ReactElement } from 'react';\n\nimport { isIE11 } from '../../../../lib/utils/isIE11';\nimport GenericPreview from './GenericPreview';\nimport MediaPreview from './MediaPreview';\n\nexport enum FilePreviewType {\n\tIMAGE = 'image',\n\tAUDIO = 'audio',\n\tVIDEO = 'video',\n}\n\nconst getFileType = (fileType: File['type']): FilePreviewType | undefined => {\n\tif (!fileType) {\n\t\treturn;\n\t}\n\tfor (const type of Object.values(FilePreviewType)) {\n\t\tif (fileType.indexOf(type) > -1) {\n\t\t\treturn type;\n\t\t}\n\t}\n};\n\nconst shouldShowMediaPreview = (file: File, fileType: FilePreviewType | undefined): boolean => {\n\tif (!fileType) {\n\t\treturn false;\n\t}\n\tif (isIE11) {\n\t\treturn false;\n\t}\n\t// Avoid preview if file size bigger than 10mb\n\tif (file.size > 10000000) {\n\t\treturn false;\n\t}\n\tif (!Object.values(FilePreviewType).includes(fileType)) {\n\t\treturn false;\n\t}\n\treturn true;\n};\n\ntype FilePreviewProps = {\n\tfile: File;\n};\n\nconst FilePreview = ({ file }: FilePreviewProps): ReactElement => {\n\tconst fileType = getFileType(file.type);\n\n\tif (shouldShowMediaPreview(file, fileType)) {\n\t\treturn <MediaPreview file={file} fileType={fileType as FilePreviewType} />;\n\t}\n\n\treturn <GenericPreview file={file} />;\n};\n\nexport default FilePreview;\n","import { Modal, Box, Field, FieldGroup, TextInput, ButtonGroup, Button } from '@rocket.chat/fuselage';\nimport { useAutoFocus } from '@rocket.chat/fuselage-hooks';\nimport React, { ReactElement, memo, useState, ChangeEvent, FormEventHandler, useEffect } from 'react';\n\nimport { useToastMessageDispatch } from '../../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../../contexts/TranslationContext';\nimport FilePreview from './FilePreview';\n\ntype FileUploadModalProps = {\n\tonClose: () => void;\n\tonSubmit: (name: string, description?: string) => void;\n\tfile: File;\n\tfileName: string;\n\tinvalidContentType: boolean;\n};\n\nconst FileUploadModal = ({ onClose, file, fileName, onSubmit, invalidContentType }: FileUploadModalProps): ReactElement => {\n\tconst [name, setName] = useState<string>(fileName);\n\tconst [description, setDescription] = useState<string>('');\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst ref = useAutoFocus();\n\n\tconst handleName = (e: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetName(e.currentTarget.value);\n\t};\n\n\tconst handleDescription = (e: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetDescription(e.currentTarget.value);\n\t};\n\n\tconst handleSubmit: FormEventHandler<HTMLFormElement> = (e): void => {\n\t\te.preventDefault();\n\t\tif (!name) {\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('error-the-field-is-required', { field: t('Name') }),\n\t\t\t});\n\t\t}\n\t\tonSubmit(name, description);\n\t};\n\n\tuseEffect(() => {\n\t\tif (invalidContentType) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('FileUpload_MediaType_NotAccepted__type__', { type: file.type }),\n\t\t\t});\n\t\t\tonClose();\n\t\t\treturn;\n\t\t}\n\n\t\tif (file.size === 0) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('FileUpload_File_Empty'),\n\t\t\t});\n\t\t\tonClose();\n\t\t}\n\t}, [file, dispatchToastMessage, invalidContentType, t, onClose]);\n\n\treturn (\n\t\t<Modal>\n\t\t\t<Box is='form' display='flex' flexDirection='column' height='100%' onSubmit={handleSubmit}>\n\t\t\t\t<Modal.Header>\n\t\t\t\t\t<Modal.Title>{t('FileUpload')}</Modal.Title>\n\t\t\t\t\t<Modal.Close onClick={onClose} />\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Content overflow='hidden'>\n\t\t\t\t\t<Box display='flex' maxHeight='x360' w='full' justifyContent='center' alignContent='center' mbe='x16'>\n\t\t\t\t\t\t<FilePreview file={file} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Field.Label>{t('Upload_file_name')}</Field.Label>\n\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t<TextInput value={name} onChange={handleName} />\n\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t{!name && <Field.Error>{t('error-the-field-is-required', { field: t('Name') })}</Field.Error>}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Field.Label>{t('Upload_file_description')}</Field.Label>\n\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t<TextInput value={description} onChange={handleDescription} placeholder={t('Description')} ref={ref} />\n\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t</Modal.Content>\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<ButtonGroup align='end'>\n\t\t\t\t\t\t<Button ghost onClick={onClose}>\n\t\t\t\t\t\t\t{t('Cancel')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button primary type='submit' disabled={!name}>\n\t\t\t\t\t\t\t{t('Send')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Box>\n\t\t</Modal>\n\t);\n};\n\nexport default memo(FileUploadModal);\n","import { Box, Icon } from '@rocket.chat/fuselage';\nimport React, { ReactElement } from 'react';\n\nimport { formatBytes } from '../../../../lib/utils/formatBytes';\n\nconst GenericPreview = ({ file }: { file: File }): ReactElement => (\n\t<Box display='flex' alignItems='center' w='full' fontScale='h4'>\n\t\t<Icon name='file' size='x24' mis={-2} mie={4} />\n\t\t{`${file.name} - ${formatBytes(file.size, 2)}`}\n\t</Box>\n);\n\nexport default GenericPreview;\n","import { Box } from '@rocket.chat/fuselage';\nimport React, { useState, ReactElement } from 'react';\n\nimport GenericPreview from './GenericPreview';\nimport PreviewSkeleton from './PreviewSkeleton';\n\ntype ImagePreviewProps = {\n\turl: string;\n\tfile: File;\n};\n\nconst ImagePreview = ({ url, file }: ImagePreviewProps): ReactElement => {\n\tconst [error, setError] = useState(false);\n\tconst [loading, setLoading] = useState(true);\n\n\tconst handleLoad = (): void => setLoading(false);\n\tconst handleError = (): void => {\n\t\tsetLoading(false);\n\t\tsetError(true);\n\t};\n\n\tif (error) {\n\t\treturn <GenericPreview file={file} />;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{loading && <PreviewSkeleton />}\n\t\t\t<Box\n\t\t\t\tis='img'\n\t\t\t\tsrc={url}\n\t\t\t\tmaxWidth='full'\n\t\t\t\tstyle={{ objectFit: 'contain' }}\n\t\t\t\tonLoad={handleLoad}\n\t\t\t\tonError={handleError}\n\t\t\t\tdisplay={loading ? 'none' : 'initial'}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport default ImagePreview;\n","import { Box, Icon } from '@rocket.chat/fuselage';\nimport React, { ReactElement, useEffect, useState, memo } from 'react';\n\nimport { useTranslation } from '../../../../contexts/TranslationContext';\nimport { FilePreviewType } from './FilePreview';\nimport ImagePreview from './ImagePreview';\nimport PreviewSkeleton from './PreviewSkeleton';\n\ntype ReaderOnloadCallback = (url: FileReader['result']) => void;\n\nconst readFileAsDataURL = (file: File, callback: ReaderOnloadCallback): void => {\n\tconst reader = new FileReader();\n\treader.onload = (e): void => callback(e?.target?.result || null);\n\n\treturn reader.readAsDataURL(file);\n};\n\nconst useFileAsDataURL = (file: File): [loaded: boolean, url: null | FileReader['result']] => {\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [url, setUrl] = useState<FileReader['result']>(null);\n\n\tuseEffect(() => {\n\t\tsetLoaded(false);\n\t\treadFileAsDataURL(file, (url) => {\n\t\t\tsetUrl(url);\n\t\t\tsetLoaded(true);\n\t\t});\n\t}, [file]);\n\treturn [loaded, url];\n};\n\ntype MediaPreviewProps = {\n\tfile: File;\n\tfileType: FilePreviewType;\n};\n\nconst MediaPreview = ({ file, fileType }: MediaPreviewProps): ReactElement => {\n\tconst [loaded, url] = useFileAsDataURL(file);\n\tconst t = useTranslation();\n\n\tif (!loaded) {\n\t\treturn <PreviewSkeleton />;\n\t}\n\n\tif (typeof url !== 'string') {\n\t\treturn (\n\t\t\t<Box display='flex' alignItems='center' w='full'>\n\t\t\t\t<Icon name='image' size='x24' mie='x4' />\n\t\t\t\t{t('FileUpload_Cannot_preview_file')}\n\t\t\t</Box>\n\t\t);\n\t}\n\n\tif (fileType === FilePreviewType.IMAGE) {\n\t\treturn <ImagePreview url={url} file={file} />;\n\t}\n\n\tif (fileType === FilePreviewType.VIDEO) {\n\t\treturn (\n\t\t\t<Box is='video' w='full' controls>\n\t\t\t\t<source src={url} type={file.type} />\n\t\t\t\t{t('Browser_does_not_support_video_element')}\n\t\t\t</Box>\n\t\t);\n\t}\n\n\tif (fileType === FilePreviewType.AUDIO) {\n\t\treturn (\n\t\t\t<Box is='audio' w='full' controls>\n\t\t\t\t<source src={url} type={file.type} />\n\t\t\t\t{t('Browser_does_not_support_audio_element')}\n\t\t\t</Box>\n\t\t);\n\t}\n\n\tthrow new Error('Wrong props provided for MediaPreview');\n};\n\nexport default memo(MediaPreview);\n","import { Skeleton } from '@rocket.chat/fuselage';\nimport React, { ReactElement } from 'react';\n\nconst PreviewSkeleton = (): ReactElement => <Skeleton variant='rect' w='full' h='x200' />;\n\nexport default PreviewSkeleton;\n","export { default } from './FileUploadModal';\n","import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { ReactElement } from 'react';\n\nimport { openUserCard } from '../../../../../app/ui/client/lib/UserCard';\nimport { IUser } from '../../../../../definition/IUser';\nimport GenericModal from '../../../../components/GenericModal';\nimport { useTranslation } from '../../../../contexts/TranslationContext';\nimport Reactions from './Reactions';\n\ntype ReactionListProps = {\n\trid: string;\n\treactions: ReactElement;\n\ttabBar: {\n\t\topenUserInfo: (username: IUser['username']) => void;\n\t};\n\tonClose: () => void;\n};\n\nconst ReactionList = ({ rid, reactions, tabBar, onClose }: ReactionListProps): ReactElement => {\n\tconst t = useTranslation();\n\n\tconst onClick = useMutableCallback((e) => {\n\t\tconst { username } = e.currentTarget.dataset;\n\n\t\tif (!username) {\n\t\t\treturn;\n\t\t}\n\n\t\topenUserCard({\n\t\t\tusername,\n\t\t\trid,\n\t\t\ttarget: e.currentTarget,\n\t\t\topen: (e: React.MouseEvent<HTMLElement>) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tonClose();\n\t\t\t\ttabBar.openUserInfo(username);\n\t\t\t},\n\t\t});\n\t});\n\n\treturn (\n\t\t<GenericModal variant='info' title={t('Users_reacted')} onClose={onClose} onConfirm={onClose}>\n\t\t\t<Reactions reactions={reactions} onClick={onClick} />\n\t\t</GenericModal>\n\t);\n};\n\nexport default ReactionList;\n","import { Box, Tag } from '@rocket.chat/fuselage';\nimport React, { ReactElement } from 'react';\n\nimport { IUser } from '../../../../../definition/IUser';\n\ntype ReactionUserTag = {\n\tusername: IUser['username'];\n\tonClick: (e: React.MouseEvent<HTMLElement>) => void;\n\tdisplayName: string;\n};\n\nconst ReactionUserTag = ({ username, onClick, displayName }: ReactionUserTag): ReactElement => (\n\t<Box mie='x4' mbe='x4' data-username={username} onClick={onClick} key={displayName}>\n\t\t<Tag variant='secondary'>{displayName}</Tag>\n\t</Box>\n);\n\nexport default ReactionUserTag;\n","import { Box } from '@rocket.chat/fuselage';\nimport React, { ReactElement } from 'react';\n\nimport { IUser } from '../../../../../definition/IUser';\nimport Emoji from '../../../../components/Emoji';\nimport { useSetting } from '../../../../contexts/SettingsContext';\nimport ReactionUserTag from './ReactionUserTag';\n\ntype ReactionsProps = {\n\treactions: ReactElement;\n\tonClick: (e: React.MouseEvent<HTMLElement>) => void;\n};\n\nconst Reactions = ({ reactions, onClick }: ReactionsProps): ReactElement => {\n\tconst useRealName = useSetting('UI_Use_Real_Name');\n\treturn (\n\t\t<Box display='flex' flexDirection='column'>\n\t\t\t{Object.entries(reactions).map(([reaction, { names = [], usernames }]) => (\n\t\t\t\t<Box key={reaction} display='flex' alignItems='center' flexDirection='row' overflowX='hidden' mb='x8'>\n\t\t\t\t\t<Emoji emojiHandle={reaction} />\n\t\t\t\t\t<Box display='flex' flexWrap='wrap' paddingBlock='x4' mis='x4'>\n\t\t\t\t\t\t{usernames.map((username: IUser['username'], i: number) => (\n\t\t\t\t\t\t\t<ReactionUserTag\n\t\t\t\t\t\t\t\tkey={username}\n\t\t\t\t\t\t\t\tdisplayName={useRealName ? names[i] || username : username}\n\t\t\t\t\t\t\t\tusername={username}\n\t\t\t\t\t\t\t\tonClick={onClick}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t))}\n\t\t</Box>\n\t);\n};\n\nexport default Reactions;\n","export { default } from './ReactionListModal';\n","import { css } from '@rocket.chat/css-in-js';\nimport { Box } from '@rocket.chat/fuselage';\nimport colors from '@rocket.chat/fuselage-tokens/colors';\nimport React, { ReactElement } from 'react';\n\nimport type { ReadReceipt } from '../../../../../definition/ReadReceipt';\nimport UserAvatar from '../../../../components/avatar/UserAvatar';\nimport { useFormatDateAndTime } from '../../../../hooks/useFormatDateAndTime';\nimport { useUserDisplayName } from '../../../../hooks/useUserDisplayName';\n\nconst hoverStyle = css`\n\t&:hover {\n\t\tbackground-color: ${colors.n400};\n\t}\n`;\n\nconst ReadReceiptRow = ({ user, ts }: ReadReceipt): ReactElement => {\n\tconst displayName = useUserDisplayName(user);\n\tconst formatDateAndTime = useFormatDateAndTime();\n\n\treturn (\n\t\t<Box\n\t\t\tdisplay='flex'\n\t\t\tflexDirection='row'\n\t\t\tjustifyContent='space-between'\n\t\t\talignItems='center'\n\t\t\tp='x4'\n\t\t\tpi='x32'\n\t\t\tmi='neg-x32'\n\t\t\tclassName={hoverStyle}\n\t\t>\n\t\t\t<Box>\n\t\t\t\t<UserAvatar username={user.username || ''} size='x24' />\n\t\t\t\t<Box is='span' mis='x8'>\n\t\t\t\t\t{displayName}\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t\t<Box is='span' fontScale='c1' color='info'>\n\t\t\t\t{formatDateAndTime(ts)}\n\t\t\t</Box>\n\t\t</Box>\n\t);\n};\n\nexport default ReadReceiptRow;\n","import { Skeleton } from '@rocket.chat/fuselage';\nimport React, { ReactElement, useMemo, useEffect } from 'react';\n\nimport type { IMessage } from '../../../../../definition/IMessage/IMessage';\nimport type { ReadReceipt } from '../../../../../definition/ReadReceipt';\nimport GenericModal from '../../../../components/GenericModal';\nimport { useToastMessageDispatch } from '../../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../../contexts/TranslationContext';\nimport { useMethodData } from '../../../../hooks/useMethodData';\nimport { AsyncStatePhase } from '../../../../lib/asyncState';\nimport ReadReceiptRow from './ReadReceiptRow';\n\ntype ReadReceiptsModalProps = {\n\tmessageId: IMessage['_id'];\n\tonClose: () => void;\n};\n\nconst ReadReceiptsModal = ({ messageId, onClose }: ReadReceiptsModalProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst { phase, value, error } = useMethodData<Array<ReadReceipt>>(\n\t\t'getReadReceipts',\n\t\tuseMemo(() => [{ messageId }], [messageId]),\n\t);\n\n\tuseEffect(() => {\n\t\tif (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\tonClose();\n\t\t}\n\t}, [error, dispatchToastMessage, t, onClose]);\n\n\tif (phase === AsyncStatePhase.LOADING || !value || error) {\n\t\treturn (\n\t\t\t<GenericModal title={t('Read_by')} onConfirm={onClose} onClose={onClose}>\n\t\t\t\t<Skeleton type='rect' w='full' h='x120' />\n\t\t\t</GenericModal>\n\t\t);\n\t}\n\n\treturn (\n\t\t<GenericModal title={t('Read_by')} onConfirm={onClose} onClose={onClose}>\n\t\t\t{value.length < 1 && t('No_results_found')}\n\t\t\t{value.map((receipt) => (\n\t\t\t\t<ReadReceiptRow {...receipt} key={receipt._id} />\n\t\t\t))}\n\t\t</GenericModal>\n\t);\n};\n\nexport default ReadReceiptsModal;\n","export { default } from './ReadReceiptsModal';\n","export { registerAdminRoute } from './routes';\nexport { registerAdminSidebarItem, unregisterSidebarItem as unregisterAdminSidebarItem } from './sidebarItems';\n","import { Meteor } from 'meteor/meteor';\n\nimport { appLayout } from '../../lib/appLayout';\nimport { createRouteGroup } from '../../lib/createRouteGroup';\n\nexport const registerAdminRoute = createRouteGroup('admin', '/admin', () => import('./AdministrationRouter'));\n\nregisterAdminRoute('/custom-sounds/:context?/:id?', {\n\tname: 'custom-sounds',\n\tlazyRouteComponent: () => import('./customSounds/AdminSoundsRoute'),\n});\n\nregisterAdminRoute('/apps/what-is-it', {\n\tname: 'admin-apps-disabled',\n\tlazyRouteComponent: () => import('./apps/AppsWhatIsIt'),\n});\n\nregisterAdminRoute('/marketplace/:context?/:id?/:version?', {\n\tname: 'admin-marketplace',\n\tlazyRouteComponent: () => import('./apps/AppsRoute'),\n});\n\nregisterAdminRoute('/apps/:context?/:id?/:version?', {\n\tname: 'admin-apps',\n\tlazyRouteComponent: () => import('./apps/AppsRoute'),\n});\n\nregisterAdminRoute('/apps/:context?/:id?/:version?', {\n\tname: 'admin-apps',\n\tlazyRouteComponent: () => import('./apps/AppsRoute'),\n});\n\nregisterAdminRoute('/info', {\n\tname: 'admin-info',\n\tlazyRouteComponent: () => import('./info/InformationRoute'),\n});\n\nregisterAdminRoute('/import', {\n\tname: 'admin-import',\n\tlazyRouteComponent: () => import('./import/ImportRoute'),\n\tprops: { page: 'history' },\n});\n\nregisterAdminRoute('/import/new/:importerKey?', {\n\tname: 'admin-import-new',\n\tlazyRouteComponent: () => import('./import/ImportRoute'),\n\tprops: { page: 'new' },\n});\n\nregisterAdminRoute('/import/prepare', {\n\tname: 'admin-import-prepare',\n\tlazyRouteComponent: () => import('./import/ImportRoute'),\n\tprops: { page: 'prepare' },\n});\n\nregisterAdminRoute('/import/progress', {\n\tname: 'admin-import-progress',\n\tlazyRouteComponent: () => import('./import/ImportRoute'),\n\tprops: { page: 'progress' },\n});\n\nregisterAdminRoute('/mailer', {\n\tname: 'admin-mailer',\n\tlazyRouteComponent: () => import('./mailer/MailerRoute'),\n});\n\nregisterAdminRoute('/oauth-apps/:context?/:id?', {\n\tname: 'admin-oauth-apps',\n\tlazyRouteComponent: () => import('./oauthApps/OAuthAppsRoute'),\n});\n\nregisterAdminRoute('/integrations/:context?/:type?/:id?', {\n\tname: 'admin-integrations',\n\tlazyRouteComponent: () => import('./integrations/IntegrationsRoute'),\n});\n\nregisterAdminRoute('/custom-user-status/:context?/:id?', {\n\tname: 'custom-user-status',\n\tlazyRouteComponent: () => import('./customUserStatus/CustomUserStatusRoute'),\n});\n\nregisterAdminRoute('/emoji-custom/:context?/:id?', {\n\tname: 'emoji-custom',\n\tlazyRouteComponent: () => import('./customEmoji/CustomEmojiRoute'),\n});\n\nregisterAdminRoute('/users/:context?/:id?', {\n\tname: 'admin-users',\n\tlazyRouteComponent: () => import('./users/UsersRoute'),\n});\n\nregisterAdminRoute('/rooms/:context?/:id?', {\n\tname: 'admin-rooms',\n\tlazyRouteComponent: () => import('./rooms/RoomsRoute'),\n});\n\nregisterAdminRoute('/invites', {\n\tname: 'invites',\n\tlazyRouteComponent: () => import('./invites/InvitesRoute'),\n});\n\nregisterAdminRoute('/cloud/:page?', {\n\tname: 'cloud',\n\tlazyRouteComponent: () => import('./cloud/CloudRoute'),\n});\n\nregisterAdminRoute('/view-logs', {\n\tname: 'admin-view-logs',\n\tlazyRouteComponent: () => import('./viewLogs/ViewLogsRoute'),\n});\n\nregisterAdminRoute('/federation-dashboard', {\n\tname: 'federation-dashboard',\n\tlazyRouteComponent: () => import('./federationDashboard/FederationDashboardRoute'),\n});\n\nregisterAdminRoute('/permissions/:context?/:_id?', {\n\tname: 'admin-permissions',\n\tlazyRouteComponent: () => import('./permissions/PermissionsRouter'),\n});\n\nregisterAdminRoute('/email-inboxes/:context?/:_id?', {\n\tname: 'admin-email-inboxes',\n\tlazyRouteComponent: () => import('./emailInbox/EmailInboxRoute'),\n});\n\nMeteor.startup(() => {\n\tregisterAdminRoute('/:group+', {\n\t\tname: 'admin',\n\t\tlazyRouteComponent: () => import('./settings/SettingsRoute'),\n\t});\n});\n\nregisterAdminRoute('/chatpal', {\n\tname: 'chatpal-admin',\n\taction() {\n\t\tappLayout.renderMainLayout({ center: 'ChatpalAdmin' });\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { hasPermission, hasRole } from '../../../app/authorization/client';\nimport { createSidebarItems } from '../../lib/createSidebarItems';\n\nexport const {\n\tregisterSidebarItem: registerAdminSidebarItem,\n\tunregisterSidebarItem,\n\titemsSubscription,\n} = createSidebarItems([\n\t{\n\t\thref: 'admin-info',\n\t\ti18nLabel: 'Info',\n\t\ticon: 'info-circled',\n\t\tpermissionGranted: () => hasPermission('view-statistics'),\n\t},\n\t{\n\t\thref: 'admin-import',\n\t\ti18nLabel: 'Import',\n\t\ticon: 'import',\n\t\tpermissionGranted: () => hasPermission('run-import'),\n\t},\n\t{\n\t\thref: 'admin-users',\n\t\ti18nLabel: 'Users',\n\t\ticon: 'team',\n\t\tpermissionGranted: () => hasPermission('view-user-administration'),\n\t},\n\t{\n\t\thref: 'admin-rooms',\n\t\ti18nLabel: 'Rooms',\n\t\ticon: 'hashtag',\n\t\tpermissionGranted: () => hasPermission('view-room-administration'),\n\t},\n\t{\n\t\thref: 'invites',\n\t\ti18nLabel: 'Invites',\n\t\ticon: 'user-plus',\n\t\tpermissionGranted: () => hasPermission('create-invite-links'),\n\t},\n\t{\n\t\ticon: 'cloud-plus',\n\t\thref: 'cloud',\n\t\ti18nLabel: 'Connectivity_Services',\n\t\tpermissionGranted: () => hasPermission('manage-cloud'),\n\t},\n\t{\n\t\thref: 'admin-view-logs',\n\t\ti18nLabel: 'View_Logs',\n\t\ticon: 'post',\n\t\tpermissionGranted: () => hasPermission('view-logs'),\n\t},\n\t{\n\t\thref: 'custom-sounds',\n\t\ti18nLabel: 'Custom_Sounds',\n\t\ticon: 'volume',\n\t\tpermissionGranted: () => hasPermission(['manage-sounds']),\n\t},\n\t{\n\t\ticon: 'discover',\n\t\thref: 'federation-dashboard',\n\t\ti18nLabel: 'Federation Dashboard',\n\t\tpermissionGranted: () => hasRole(Meteor.userId(), 'admin'),\n\t},\n\t{\n\t\ticon: 'cube',\n\t\thref: 'admin-marketplace',\n\t\ti18nLabel: 'Apps',\n\t\tpermissionGranted: () => hasPermission(['manage-apps']),\n\t},\n\t{\n\t\ticon: 'mail',\n\t\thref: 'admin-email-inboxes',\n\t\ti18nLabel: 'Email_Inboxes',\n\t\ttag: 'Alpha',\n\t\tpermissionGranted: () => hasPermission(['manage-email-inbox']),\n\t},\n]);\n","const createFormSubscription = () => {\n\tlet forms = {};\n\tlet updateCb = () => {};\n\n\tconst formsSubscription = {\n\t\tsubscribe: (cb) => {\n\t\t\tupdateCb = cb;\n\t\t\treturn () => {\n\t\t\t\tupdateCb = () => {};\n\t\t\t};\n\t\t},\n\t\tgetCurrentValue: () => forms,\n\t};\n\tconst registerForm = (newForm) => {\n\t\tforms = { ...forms, ...newForm };\n\t\tupdateCb();\n\t};\n\tconst unregisterForm = (form) => {\n\t\tdelete forms[form];\n\t\tupdateCb();\n\t};\n\n\treturn { registerForm, unregisterForm, formsSubscription };\n};\n\nexport const { registerForm, unregisterForm, formsSubscription } = createFormSubscription();\n","import { createRouteGroup } from '../../lib/createRouteGroup';\n\nexport const registerOmnichannelRoute = createRouteGroup('omnichannel', '/omnichannel', () => import('./OmnichannelRouter'));\n\nregisterOmnichannelRoute('/installation', {\n\tname: 'omnichannel-installation',\n\tlazyRouteComponent: () => import('./installation/Installation'),\n});\n\nregisterOmnichannelRoute('/managers', {\n\tname: 'omnichannel-managers',\n\tlazyRouteComponent: () => import('./managers/ManagersRoute'),\n});\n\nregisterOmnichannelRoute('/agents/:context?/:id?', {\n\tname: 'omnichannel-agents',\n\tlazyRouteComponent: () => import('./agents/AgentsRoute'),\n});\n\nregisterOmnichannelRoute('/webhooks', {\n\tname: 'omnichannel-webhooks',\n\tlazyRouteComponent: () => import('./webhooks/WebhooksPageContainer'),\n});\n\nregisterOmnichannelRoute('/customfields/:context?/:id?', {\n\tname: 'omnichannel-customfields',\n\tlazyRouteComponent: () => import('./customFields/CustomFieldsRoute'),\n});\n\nregisterOmnichannelRoute('/appearance', {\n\tname: 'omnichannel-appearance',\n\tlazyRouteComponent: () => import('./appearance/AppearancePageContainer'),\n});\n\nregisterOmnichannelRoute('/businessHours/:context?/:type?/:id?', {\n\tname: 'omnichannel-businessHours',\n\tlazyRouteComponent: () => import('./businessHours/BusinessHoursRouter'),\n});\n\nregisterOmnichannelRoute('/units/:context?/:id?', {\n\tname: 'omnichannel-units',\n\tlazyRouteComponent: () => import('../../../ee/client/omnichannel/units/UnitsRoute'),\n});\n\nregisterOmnichannelRoute('/tags/:context?/:id?', {\n\tname: 'omnichannel-tags',\n\tlazyRouteComponent: () => import('../../../ee/client/omnichannel/tags/TagsRoute'),\n});\n\nregisterOmnichannelRoute('/priorities/:context?/:id?', {\n\tname: 'omnichannel-priorities',\n\tlazyRouteComponent: () => import('../../../ee/client/omnichannel/priorities/PrioritiesRoute'),\n});\n\nregisterOmnichannelRoute('/triggers/:context?/:id?', {\n\tname: 'omnichannel-triggers',\n\tlazyRouteComponent: () => import('./triggers/TriggersPage'),\n});\n\nregisterOmnichannelRoute('/facebook', {\n\tname: 'omnichannel-facebook',\n\tlazyRouteComponent: () => import('./facebook/FacebookPageContainer'),\n});\n\nregisterOmnichannelRoute('/current', {\n\tname: 'omnichannel-current-chats',\n\tlazyRouteComponent: () => import('./currentChats/CurrentChatsRoute'),\n});\n\nregisterOmnichannelRoute('/departments/:context?/:id?/:tab?', {\n\tname: 'omnichannel-departments',\n\tlazyRouteComponent: () => import('./departments/DepartmentsRoute'),\n});\n\nregisterOmnichannelRoute('/realtime-monitoring', {\n\tname: 'omnichannel-realTime',\n\tlazyRouteComponent: () => import('./realTimeMonitoring/RealTimeMonitoringPage'),\n});\n\nregisterOmnichannelRoute('/analytics', {\n\tname: 'omnichannel-analytics',\n\tlazyRouteComponent: () => import('./analytics/AnalyticsPage'),\n});\n","import { hasPermission } from '../../../app/authorization/client';\nimport { createSidebarItems } from '../../lib/createSidebarItems';\n\nexport const {\n\tregisterSidebarItem: registerOmnichannelSidebarItem,\n\tunregisterSidebarItem,\n\titemsSubscription,\n} = createSidebarItems([\n\t{\n\t\thref: 'omnichannel/current',\n\t\ti18nLabel: 'Current_Chats',\n\t\tpermissionGranted: () => hasPermission('view-livechat-current-chats'),\n\t},\n\t{\n\t\thref: 'omnichannel-analytics',\n\t\ti18nLabel: 'Analytics',\n\t\tpermissionGranted: () => hasPermission('view-livechat-analytics'),\n\t},\n\t{\n\t\thref: 'omnichannel-realTime',\n\t\ti18nLabel: 'Real_Time_Monitoring',\n\t\tpermissionGranted: () => hasPermission('view-livechat-real-time-monitoring'),\n\t},\n\t{\n\t\thref: 'omnichannel/managers',\n\t\ti18nLabel: 'Managers',\n\t\tpermissionGranted: () => hasPermission('manage-livechat-managers'),\n\t},\n\t{\n\t\thref: 'omnichannel/agents',\n\t\ti18nLabel: 'Agents',\n\t\tpermissionGranted: () => hasPermission('manage-livechat-agents'),\n\t},\n\t{\n\t\thref: 'omnichannel/departments',\n\t\ti18nLabel: 'Departments',\n\t\tpermissionGranted: () => hasPermission('view-livechat-departments'),\n\t},\n\t{\n\t\thref: 'omnichannel-customfields',\n\t\ti18nLabel: 'Custom_Fields',\n\t\tpermissionGranted: () => hasPermission('view-livechat-customfields'),\n\t},\n\t{\n\t\thref: 'omnichannel-triggers',\n\t\ti18nLabel: 'Livechat_Triggers',\n\t\tpermissionGranted: () => hasPermission('view-livechat-triggers'),\n\t},\n\t{\n\t\thref: 'omnichannel-installation',\n\t\ti18nLabel: 'Livechat_Installation',\n\t\tpermissionGranted: () => hasPermission('view-livechat-installation'),\n\t},\n\t{\n\t\thref: 'omnichannel-appearance',\n\t\ti18nLabel: 'Livechat_Appearance',\n\t\tpermissionGranted: () => hasPermission('view-livechat-appearance'),\n\t},\n\t{\n\t\thref: 'omnichannel-webhooks',\n\t\ti18nLabel: 'Webhooks',\n\t\tpermissionGranted: () => hasPermission('view-livechat-webhooks'),\n\t},\n\t{\n\t\thref: 'omnichannel-facebook',\n\t\ti18nLabel: 'Facebook Messenger',\n\t\tpermissionGranted: () => hasPermission('view-livechat-facebook'),\n\t},\n\t{\n\t\thref: 'omnichannel-businessHours',\n\t\ti18nLabel: 'Business_Hours',\n\t\tpermissionGranted: () => hasPermission('view-livechat-business-hours'),\n\t},\n]);\n","import { FC, lazy, LazyExoticComponent } from 'react';\n\nimport { addAction } from '../../../room/lib/Toolbox';\n\naddAction('team-channels', {\n\tgroups: ['team'],\n\tid: 'team-channels',\n\tanonymous: true,\n\tfull: true,\n\ttitle: 'Team_Channels',\n\ticon: 'hash',\n\ttemplate: lazy(() => import('./index')) as LazyExoticComponent<FC>,\n\torder: 2,\n});\n","import { FC, lazy, LazyExoticComponent } from 'react';\n\nimport { addAction } from '../../../room/lib/Toolbox';\n\naddAction('team-info', {\n\tgroups: ['team'],\n\tid: 'team-info',\n\tanonymous: true,\n\tfull: true,\n\ttitle: 'Teams_Info',\n\ticon: 'info-circled',\n\ttemplate: lazy(() => import('./index.js')) as LazyExoticComponent<FC>,\n\torder: 1,\n});\n","import './contextualBar/channels/tabBar';\nimport './contextualBar/info/tabBar';\n","import React, { FC, lazy, Suspense } from 'react';\nimport { QueryClientProvider } from 'react-query';\n\nimport { OmnichannelRoomIconProvider } from '../../components/RoomIcon/OmnichannelRoomIcon/provider/OmnichannelRoomIconProvider';\nimport { queryClient } from '../../lib/queryClient';\nimport PageLoading from './PageLoading';\n\nconst ConnectionStatusBar = lazy(() => import('../../components/connectionStatus/ConnectionStatusBar'));\nconst MeteorProvider = lazy(() => import('../../providers/MeteorProvider'));\nconst BannerRegion = lazy(() => import('../banners/BannerRegion'));\nconst AppLayout = lazy(() => import('./AppLayout'));\nconst PortalsWrapper = lazy(() => import('./PortalsWrapper'));\n\nconst AppRoot: FC = () => (\n\t<Suspense fallback={<PageLoading />}>\n\t\t<MeteorProvider>\n\t\t\t<QueryClientProvider client={queryClient}>\n\t\t\t\t<OmnichannelRoomIconProvider>\n\t\t\t\t\t<ConnectionStatusBar />\n\t\t\t\t\t<BannerRegion />\n\t\t\t\t\t<AppLayout />\n\t\t\t\t\t<PortalsWrapper />\n\t\t\t\t</OmnichannelRoomIconProvider>\n\t\t\t</QueryClientProvider>\n\t\t</MeteorProvider>\n\t</Suspense>\n);\n\nexport default AppRoot;\n","import React, { FC } from 'react';\n\nconst PageLoading: FC = () => (\n\t<div className='page-loading'>\n\t\t<div className='loading-animation'>\n\t\t\t<div className='bounce bounce1'></div>\n\t\t\t<div className='bounce bounce2'></div>\n\t\t\t<div className='bounce bounce3'></div>\n\t\t</div>\n\t</div>\n);\n\nexport default PageLoading;\n","import { Box, PasswordInput, Field, FieldGroup } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { ReactElement, useState, useCallback } from 'react';\n\nimport GenericModal from '../../components/GenericModal';\nimport { useTranslation } from '../../contexts/TranslationContext';\n\nconst EnterE2EPasswordModal = ({\n\tonConfirm,\n\tonClose,\n\tonCancel,\n}: {\n\tonConfirm: (password: string) => void;\n\tonClose: () => void;\n\tonCancel: () => void;\n}): ReactElement => {\n\tconst t = useTranslation();\n\tconst [password, setPassword] = useState('');\n\tconst [passwordError, setPasswordError] = useState<string | undefined>();\n\n\tconst handleChange = useCallback(\n\t\t(e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\te.target.value !== '' && setPasswordError(undefined);\n\t\t\tsetPassword(e.currentTarget.value);\n\t\t},\n\t\t[setPassword],\n\t);\n\n\tconst handleConfirm = useMutableCallback((): void => {\n\t\tif (password === '') {\n\t\t\tsetPasswordError(t('Invalid_pass'));\n\t\t\treturn;\n\t\t}\n\n\t\treturn onConfirm(password);\n\t});\n\n\treturn (\n\t\t<GenericModal\n\t\t\tvariant='warning'\n\t\t\ttitle={t('Enter_E2E_password')}\n\t\t\tcancelText={t('Do_It_Later')}\n\t\t\tconfirmText={t('Decode_Key')}\n\t\t\tonConfirm={handleConfirm}\n\t\t\tonClose={onClose}\n\t\t\tonCancel={onCancel}\n\t\t>\n\t\t\t<Box dangerouslySetInnerHTML={{ __html: t('E2E_password_request_text') }} />\n\t\t\t<FieldGroup mbs='x24' w='full'>\n\t\t\t\t<Field>\n\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t<PasswordInput error={passwordError} value={password} onChange={handleChange} placeholder={t('New_Password_Placeholder')} />\n\t\t\t\t\t</Field.Row>\n\t\t\t\t\t<Field.Error>{passwordError}</Field.Error>\n\t\t\t\t</Field>\n\t\t\t</FieldGroup>\n\t\t</GenericModal>\n\t);\n};\n\nexport default EnterE2EPasswordModal;\n","import { Box } from '@rocket.chat/fuselage';\nimport React, { ReactElement } from 'react';\n\nimport GenericModal from '../../components/GenericModal';\nimport { useTranslation } from '../../contexts/TranslationContext';\n\nconst SaveE2EPasswordModal = ({\n\tpasswordRevealText,\n\tonClose,\n\tonCancel,\n\tonConfirm,\n}: {\n\tpasswordRevealText: string;\n\tonClose: () => void;\n\tonCancel: () => void;\n\tonConfirm: () => void;\n}): ReactElement => {\n\tconst t = useTranslation();\n\n\treturn (\n\t\t<GenericModal\n\t\t\tonClose={onClose}\n\t\t\tonCancel={onCancel}\n\t\t\tonConfirm={onConfirm}\n\t\t\tcancelText={t('Do_It_Later')}\n\t\t\tconfirmText={t('I_Saved_My_Password')}\n\t\t\tvariant='warning'\n\t\t\ttitle={t('Save_Your_Encryption_Password')}\n\t\t>\n\t\t\t<Box dangerouslySetInnerHTML={{ __html: passwordRevealText }} />\n\t\t</GenericModal>\n\t);\n};\n\nexport default SaveE2EPasswordModal;\n","import { Emitter } from '@rocket.chat/emitter';\nimport DOMPurify from 'dompurify';\n\nimport { APIClient } from '../../../../../app/utils/client';\n\nconst OmnichannelRoomIcon = new (class extends Emitter {\n\ticons = new Map<string, string>();\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tpublic get(appId: string, icon: string): string | undefined {\n\t\tif (!appId || !icon) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.icons.has(`${appId}-${icon}`)) {\n\t\t\treturn `${appId}-${icon}`;\n\t\t}\n\t\tAPIClient.get(`apps/public/${appId}/get-sidebar-icon`, { icon }).then((response) => {\n\t\t\tthis.icons.set(\n\t\t\t\t`${appId}-${icon}`,\n\t\t\t\tDOMPurify.sanitize(response, {\n\t\t\t\t\tFORBID_ATTR: ['id'],\n\t\t\t\t\tNAMESPACE: 'http://www.w3.org/2000/svg',\n\t\t\t\t\tUSE_PROFILES: { svg: true, svgFilters: true },\n\t\t\t\t})\n\t\t\t\t\t.replace(`<svg`, `<symbol id=\"${appId}-${icon}\"`)\n\t\t\t\t\t.replace(`</svg>`, '</symbol>'),\n\t\t\t);\n\t\t\tthis.emit('change');\n\t\t\tthis.emit(`${appId}-${icon}`);\n\t\t});\n\t}\n})();\n\nexport default OmnichannelRoomIcon;\n","import { createContext, useMemo, useContext } from 'react';\nimport { useSubscription, Unsubscribe } from 'use-subscription';\n\nimport { AsyncState } from '../../../../lib/asyncState/AsyncState';\nimport { AsyncStatePhase } from '../../../../lib/asyncState/AsyncStatePhase';\n\ntype IOmnichannelRoomIconContext = {\n\tqueryIcon(\n\t\tapp: string,\n\t\ticon: string,\n\t): {\n\t\tgetCurrentValue: () => AsyncState<string>;\n\t\tsubscribe: (callback: () => void) => Unsubscribe;\n\t};\n};\n\nexport const OmnichannelRoomIconContext = createContext<IOmnichannelRoomIconContext>({\n\tqueryIcon: () => ({\n\t\tgetCurrentValue: (): AsyncState<string> => ({\n\t\t\tphase: AsyncStatePhase.LOADING,\n\t\t\tvalue: undefined,\n\t\t\terror: undefined,\n\t\t}),\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n});\n\nexport const useOmnichannelRoomIcon = (app: string, icon: string): AsyncState<string> => {\n\tconst { queryIcon } = useContext(OmnichannelRoomIconContext);\n\treturn useSubscription(useMemo(() => queryIcon(app, icon), [app, queryIcon, icon]));\n};\n","import React, { FC, useMemo } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useSubscription, Subscription } from 'use-subscription';\n\nimport { AsyncState } from '../../../../lib/asyncState/AsyncState';\nimport { AsyncStatePhase } from '../../../../lib/asyncState/AsyncStatePhase';\nimport { OmnichannelRoomIconContext } from '../context/OmnichannelRoomIconContext';\nimport OmnichannelRoomIcon from '../lib/OmnichannelRoomIcon';\n\nexport const OmnichannelRoomIconProvider: FC = ({ children }) => {\n\tconst svgIcons = useSubscription(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\tgetCurrentValue: (): string[] => Array.from(OmnichannelRoomIcon.icons.values()),\n\t\t\t\tsubscribe: (callback): (() => void) => OmnichannelRoomIcon.on('change', callback),\n\t\t\t}),\n\t\t\t[],\n\t\t),\n\t);\n\treturn (\n\t\t<OmnichannelRoomIconContext.Provider\n\t\t\tvalue={useMemo(\n\t\t\t\t() => ({\n\t\t\t\t\tqueryIcon: (app: string, iconName: string): Subscription<AsyncState<string>> => ({\n\t\t\t\t\t\tgetCurrentValue: (): AsyncState<string> => {\n\t\t\t\t\t\t\tconst icon = OmnichannelRoomIcon.get(app, iconName);\n\n\t\t\t\t\t\t\tif (!icon) {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tphase: AsyncStatePhase.LOADING,\n\t\t\t\t\t\t\t\t\tvalue: undefined,\n\t\t\t\t\t\t\t\t\terror: undefined,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tphase: AsyncStatePhase.RESOLVED,\n\t\t\t\t\t\t\t\tvalue: icon,\n\t\t\t\t\t\t\t\terror: undefined,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsubscribe: (callback): (() => void) => OmnichannelRoomIcon.on(`${app}-${iconName}`, callback),\n\t\t\t\t\t}),\n\t\t\t\t}),\n\t\t\t\t[],\n\t\t\t)}\n\t\t>\n\t\t\t{createPortal(\n\t\t\t\t<svg\n\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\n\t\t\t\t\txmlnsXlink='http://www.w3.org/1999/xlink'\n\t\t\t\t\tstyle={{ display: 'none' }}\n\t\t\t\t\tdangerouslySetInnerHTML={{ __html: svgIcons.join('') }}\n\t\t\t\t/>,\n\t\t\t\tdocument.body,\n\t\t\t\t'custom-icons',\n\t\t\t)}\n\t\t\t{children}\n\t\t</OmnichannelRoomIconContext.Provider>\n\t);\n};\n","import { Options } from '@rocket.chat/fuselage';\nimport React from 'react';\n\nimport RoomAvatar from '../avatar/RoomAvatar';\n\nconst Avatar = ({ value, type, avatarETag, ...props }) => (\n\t<RoomAvatar size={Options.AvatarSize} room={{ type, _id: value, avatarETag }} {...props} />\n);\n\nexport default Avatar;\n","import { AutoComplete, Option, Box } from '@rocket.chat/fuselage';\nimport React, { memo, useMemo, useState } from 'react';\n\nimport { useEndpointData } from '../../hooks/useEndpointData';\nimport RoomAvatar from '../avatar/RoomAvatar';\nimport Avatar from './Avatar';\n\nconst query = (term = '') => ({ selector: JSON.stringify({ name: term }) });\n\nconst RoomAutoComplete = (props) => {\n\tconst [filter, setFilter] = useState('');\n\tconst { value: data } = useEndpointData(\n\t\t'rooms.autocomplete.channelAndPrivate',\n\t\tuseMemo(() => query(filter), [filter]),\n\t);\n\tconst options = useMemo(\n\t\t() =>\n\t\t\t(data &&\n\t\t\t\tdata.items.map(({ name, _id, avatarETag, t }) => ({\n\t\t\t\t\tvalue: _id,\n\t\t\t\t\tlabel: { name, avatarETag, type: t },\n\t\t\t\t}))) ||\n\t\t\t[],\n\t\t[data],\n\t);\n\n\treturn (\n\t\t<AutoComplete\n\t\t\t{...props}\n\t\t\tfilter={filter}\n\t\t\tsetFilter={setFilter}\n\t\t\trenderSelected={({ value, label }) => (\n\t\t\t\t<>\n\t\t\t\t\t<Box margin='none' mi='x2'>\n\t\t\t\t\t\t<RoomAvatar size='x20' room={{ type: label?.type || 'c', _id: value, ...label }} />{' '}\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box margin='none' mi='x2'>\n\t\t\t\t\t\t{label?.name}\n\t\t\t\t\t</Box>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\trenderItem={({ value, label, ...props }) => (\n\t\t\t\t<Option key={value} {...props} label={label.name} avatar={<Avatar value={value} {...label} />} />\n\t\t\t)}\n\t\t\toptions={options}\n\t\t/>\n\t);\n};\n\nexport default memo(RoomAutoComplete);\n","export { default } from './RoomAutoComplete';\n","import { Avatar, AvatarProps, Skeleton } from '@rocket.chat/fuselage';\nimport React, { FC, useState } from 'react';\n\nexport type BaseAvatarProps = AvatarProps;\n\nconst BaseAvatar: FC<BaseAvatarProps> = ({ size, ...props }) => {\n\tconst [error, setError] = useState<unknown>(false);\n\n\tif (error) {\n\t\treturn <Skeleton variant='rect' {...props} />;\n\t}\n\n\treturn <Avatar onError={setError} size={size} {...props} />;\n};\n\nexport default BaseAvatar;\n","import React, { memo } from 'react';\n\nimport { useRoomAvatarPath } from '../../contexts/AvatarUrlContext';\nimport BaseAvatar from './BaseAvatar';\n\nfunction RoomAvatar({ room, ...rest }) {\n\tconst getRoomPathAvatar = useRoomAvatarPath();\n\tconst { url = getRoomPathAvatar(room), ...props } = rest;\n\treturn <BaseAvatar url={url} {...props} />;\n}\n\nexport default memo(RoomAvatar);\n","import React, { FC, memo } from 'react';\n\nimport { useUserAvatarPath } from '../../contexts/AvatarUrlContext';\nimport BaseAvatar, { BaseAvatarProps } from './BaseAvatar';\n\ntype UserAvatarProps = Omit<BaseAvatarProps, 'url' | 'title'> & {\n\tusername: string;\n\tetag?: string;\n\turl?: string;\n};\n\nconst UserAvatar: FC<UserAvatarProps> = ({ username, etag, ...rest }) => {\n\tconst getUserAvatarPath = useUserAvatarPath();\n\tconst { url = getUserAvatarPath(username, etag), ...props } = rest;\n\n\treturn <BaseAvatar url={url} title={username} {...props} />;\n};\n\nexport default memo(UserAvatar);\n","import { Modal, Field, FieldGroup, ToggleSwitch, TextInput, TextAreaInput, ButtonGroup, Button, Icon, Box } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { ReactElement } from 'react';\n\nimport { IMessage } from '../../../definition/IMessage';\nimport { IRoom } from '../../../definition/IRoom';\nimport { IUser } from '../../../definition/IUser';\nimport { useTranslation } from '../../contexts/TranslationContext';\nimport { useEndpointActionExperimental } from '../../hooks/useEndpointActionExperimental';\nimport { useForm } from '../../hooks/useForm';\nimport { goToRoomById } from '../../lib/utils/goToRoomById';\nimport RoomAutoComplete from '../RoomAutoComplete';\nimport UserAutoCompleteMultiple from '../UserAutoCompleteMultiple';\nimport DefaultParentRoomField from './DefaultParentRoomField';\n\ntype CreateDiscussionFormValues = {\n\tname: string;\n\tparentRoom: IRoom['_id'];\n\tencrypted: boolean;\n\tusernames: Array<IUser['username']>;\n\tfirstMessage: string;\n};\n\ntype CreateDiscussionProps = {\n\tparentMessageId: IMessage['_id'];\n\tonClose: () => void;\n\tdefaultParentRoom?: IRoom['_id'];\n\tnameSuggestion?: string;\n};\n\nconst CreateDiscussion = ({ onClose, defaultParentRoom, parentMessageId, nameSuggestion }: CreateDiscussionProps): ReactElement => {\n\tconst t = useTranslation();\n\n\tconst { values, handlers } = useForm({\n\t\tname: nameSuggestion || '',\n\t\tparentRoom: '',\n\t\tencrypted: false,\n\t\tusernames: [],\n\t\tfirstMessage: '',\n\t});\n\n\tconst { name, parentRoom, encrypted, usernames, firstMessage } = values as CreateDiscussionFormValues;\n\n\tconst { handleName, handleParentRoom, handleEncrypted, handleUsernames, handleFirstMessage } = handlers;\n\n\tconst canCreate = (parentRoom || defaultParentRoom) && name;\n\n\tconst createDiscussion = useEndpointActionExperimental('POST', 'rooms.createDiscussion');\n\n\tconst create = useMutableCallback(async (): Promise<void> => {\n\t\ttry {\n\t\t\tconst result = await createDiscussion({\n\t\t\t\tprid: defaultParentRoom || parentRoom,\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\tt_name: name,\n\t\t\t\tusers: usernames,\n\t\t\t\treply: encrypted ? undefined : firstMessage,\n\t\t\t\t...(parentMessageId && { pmid: parentMessageId }),\n\t\t\t});\n\n\t\t\tgoToRoomById(result.discussion._id);\n\t\t\tonClose();\n\t\t} catch (error) {\n\t\t\tconsole.warn(error);\n\t\t}\n\t});\n\n\tconst onChangeUsers = useMutableCallback((value, action) => {\n\t\tif (!action) {\n\t\t\tif (usernames.includes(value)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn handleUsernames([...usernames, value]);\n\t\t}\n\t\thandleUsernames(usernames.filter((current) => current !== value));\n\t});\n\n\treturn (\n\t\t<Modal>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Title>{t('Discussion_title')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={onClose} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content>\n\t\t\t\t<FieldGroup>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Description>{t('Discussion_description')}</Field.Description>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('Discussion_target_channel')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t{defaultParentRoom && <DefaultParentRoomField defaultParentRoom={defaultParentRoom} />}\n\n\t\t\t\t\t\t\t{!defaultParentRoom && (\n\t\t\t\t\t\t\t\t<RoomAutoComplete\n\t\t\t\t\t\t\t\t\tvalue={parentRoom}\n\t\t\t\t\t\t\t\t\tonChange={handleParentRoom}\n\t\t\t\t\t\t\t\t\tplaceholder={t('Discussion_target_channel_description')}\n\t\t\t\t\t\t\t\t\tdisabled={defaultParentRoom}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field display='flex' alignItems='center' flexDirection='row' justifyContent='spaceBetween' flexGrow={1}>\n\t\t\t\t\t\t<Box display='flex' flexDirection='column' width='full'>\n\t\t\t\t\t\t\t<Field.Label>{t('Encrypted')}</Field.Label>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<ToggleSwitch checked={encrypted} onChange={handleEncrypted} />\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('Discussion_name')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\t\t\tonChange={handleName}\n\t\t\t\t\t\t\t\taddon={<Icon name='baloons' size='x20' />}\n\t\t\t\t\t\t\t\tplaceholder={t('New_discussion_name')}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('Invite_Users')}</Field.Label>\n\t\t\t\t\t\t<Field.Row w='full' display='flex' flexDirection='column' alignItems='stretch'>\n\t\t\t\t\t\t\t<UserAutoCompleteMultiple value={usernames} onChange={onChangeUsers} placeholder={t('Username_Placeholder')} />\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('Discussion_first_message_title')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextAreaInput\n\t\t\t\t\t\t\t\tvalue={firstMessage}\n\t\t\t\t\t\t\t\tonChange={handleFirstMessage}\n\t\t\t\t\t\t\t\tplaceholder={t('New_discussion_first_message')}\n\t\t\t\t\t\t\t\trows={5}\n\t\t\t\t\t\t\t\tdisabled={encrypted}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t{encrypted && <Field.Description>{t('Discussion_first_message_disabled_due_to_e2e')}</Field.Description>}\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<ButtonGroup align='end'>\n\t\t\t\t\t<Button onClick={onClose}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button primary disabled={!canCreate} onClick={create}>\n\t\t\t\t\t\t{t('Create')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport default CreateDiscussion;\n","import { Skeleton, TextInput, Callout } from '@rocket.chat/fuselage';\nimport React, { useMemo, ReactElement } from 'react';\n\nimport { roomTypes } from '../../../app/utils/client/lib/roomTypes';\nimport { useTranslation } from '../../contexts/TranslationContext';\nimport { AsyncStatePhase } from '../../hooks/useAsyncState';\nimport { useEndpointData } from '../../hooks/useEndpointData';\n\nconst DefaultParentRoomField = ({ defaultParentRoom }: { defaultParentRoom: string }): ReactElement => {\n\tconst t = useTranslation();\n\tconst { value, phase } = useEndpointData(\n\t\t'rooms.info',\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\troomId: defaultParentRoom,\n\t\t\t}),\n\t\t\t[defaultParentRoom],\n\t\t),\n\t);\n\n\tif (phase === AsyncStatePhase.LOADING) {\n\t\treturn <Skeleton width='full' />;\n\t}\n\n\tif (!value || !value.room) {\n\t\treturn <Callout type={'danger'}>{t('Error')}</Callout>;\n\t}\n\n\treturn <TextInput value={roomTypes.getRoomName(value.room.t, value.room)} disabled onChange={(): string => ''} />;\n};\n\nexport default DefaultParentRoomField;\n","import React, { FC } from 'react';\n\nimport Button from './Button';\n\nconst Avatar: FC<any> = (props) => <Button width='x36' {...props} />;\n\nexport default Avatar;\n","import { Box } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nconst Button: FC<any> = (props) => <Box mi='x4' display='flex' alignItems='center' {...props} />;\n\nexport default Button;\n","import { Box } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nconst Content: FC<any> = (props) => (\n\t<Box flexGrow={1} width={1} flexShrink={1} mi='x4' display='flex' justifyContent='center' flexDirection='column' {...props} />\n);\n\nexport default Content;\n","import { Box } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nimport { useLayout } from '../../contexts/LayoutContext';\nimport HeaderDivider from './HeaderDivider';\n\nconst Header: FC<any> = (props) => {\n\tconst { isMobile } = useLayout();\n\n\treturn (\n\t\t<Box\n\t\t\trcx-room-header\n\t\t\tis='header'\n\t\t\theight='x64'\n\t\t\tdisplay='flex'\n\t\t\tjustifyContent='center'\n\t\t\tflexDirection='column'\n\t\t\toverflow='hidden'\n\t\t\tflexShrink={0}\n\t\t>\n\t\t\t<Box\n\t\t\t\theight='x64'\n\t\t\t\tmi='neg-x4'\n\t\t\t\tpi={isMobile ? 'x12' : 'x24'}\n\t\t\t\tdisplay='flex'\n\t\t\t\tflexGrow={1}\n\t\t\t\tjustifyContent='center'\n\t\t\t\talignItems='center'\n\t\t\t\toverflow='hidden'\n\t\t\t\tflexDirection='row'\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t\t<HeaderDivider />\n\t\t</Box>\n\t);\n};\n\nexport default Header;\n","import { Divider } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nconst HeaderDivider: FC = () => <Divider mbs={-2} mbe={0} />;\n\nexport default HeaderDivider;\n","import { Box, Icon } from '@rocket.chat/fuselage';\nimport React, { FC, isValidElement, ReactElement } from 'react';\n\ntype HeaderIconProps = { icon: ReactElement | { name: string; color?: string } | null };\n\nconst HeaderIcon: FC<HeaderIconProps> = ({ icon }) =>\n\ticon && (\n\t\t<Box display='flex' flexShrink={0} alignItems='center' size={18} overflow='hidden' justifyContent='center'>\n\t\t\t{isValidElement(icon) ? icon : <Icon color='info' size='x18' {...{ name: (icon as any).name }} />}\n\t\t</Box>\n\t);\n\nexport default HeaderIcon;\n","import { css } from '@rocket.chat/css-in-js';\nimport { Box } from '@rocket.chat/fuselage';\nimport colors from '@rocket.chat/fuselage-tokens/colors';\nimport React, { ComponentProps, FC } from 'react';\n\nconst HeaderLink: FC<ComponentProps<typeof Box>> = (props) => (\n\t<Box\n\t\tis='a'\n\t\t{...props}\n\t\twithTruncatedText\n\t\tclassName={[\n\t\t\tcss`\n\t\t\t\tcolor: ${colors.n700} !important;\n\t\t\t\t&:hover,\n\t\t\t\t&:focus {\n\t\t\t\t\tcolor: ${colors.n800} !important;\n\t\t\t\t}\n\t\t\t\t&:visited {\n\t\t\t\t\tcolor: ${colors.n800};\n\t\t\t\t}\n\t\t\t`,\n\t\t].filter(Boolean)}\n\t/>\n);\n\nexport default HeaderLink;\n","import { Box, Tag } from '@rocket.chat/fuselage';\nimport React, { ComponentProps, FC } from 'react';\n\nconst HeaderTag: FC<ComponentProps<typeof Tag>> = ({ children, ...props }) => (\n\t<Box display='flex' minWidth='65px' mi='x4'>\n\t\t<Tag {...props}>\n\t\t\t<Box alignItems='center' fontScale='c2' display='flex' minWidth={0}>\n\t\t\t\t{children}\n\t\t\t</Box>\n\t\t</Tag>\n\t</Box>\n);\n\nexport default HeaderTag;\n","import { Box, Icon } from '@rocket.chat/fuselage';\nimport colors from '@rocket.chat/fuselage-tokens/colors';\nimport React, { ComponentProps, FC, isValidElement, ReactElement } from 'react';\n\ntype HeaderIconProps = {\n\ticon: ReactElement | Pick<ComponentProps<typeof Icon>, 'name' | 'color'> | null;\n};\n\nconst HeaderTagIcon: FC<HeaderIconProps> = ({ icon }) =>\n\ticon ? (\n\t\t<Box w='x16' mie='x2' display='inline-flex' justifyContent='center'>\n\t\t\t{isValidElement(icon) ? icon : <Icon size='x16' color={colors.n700} {...icon} />}\n\t\t</Box>\n\t) : null;\n\nexport default HeaderTagIcon;\n","import { Skeleton } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nconst HeaderTagSkeleton: FC = () => <Skeleton width='x48' />;\nexport default HeaderTagSkeleton;\n","import { Box } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nconst Row: FC<any> = (props) => <Box alignItems='center' flexShrink={1} flexGrow={1} display='flex' {...props} />;\n\nexport default Row;\n","import { Icon, ActionButton } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nconst State: FC<any> = (props) =>\n\tprops.onClick ? <ActionButton ghost mini {...props} /> : <Icon size={16} name={props.icon} {...props} />;\n\nexport default State;\n","import { Box } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nconst Subtitle: FC<any> = (props) => <Box color='hint' fontScale='p2' withTruncatedText {...props} />;\n\nexport default Subtitle;\n","import { Box } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nconst Title: FC<any> = (props) => <Box color='default' mi='x4' fontScale='h4' withTruncatedText {...props} />;\n\nexport default Title;\n","import { ButtonGroup } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nconst ToolBox: FC<any> = (props) => <ButtonGroup mi='x4' medium {...props} />;\n\nexport default ToolBox;\n","import { ActionButton } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nconst ToolBoxAction: FC<any> = ({ id, icon, color, title, action, className, index, ...props }) => (\n\t<ActionButton\n\t\tclassName={className}\n\t\tonClick={action}\n\t\ttitle={title}\n\t\tdata-toolbox={index}\n\t\tkey={id}\n\t\ticon={icon}\n\t\tposition='relative'\n\t\tghost\n\t\ttiny\n\t\toverflow='visible'\n\t\tcolor={!!color && color}\n\t\t{...props}\n\t/>\n);\n\nexport default ToolBoxAction;\n","import { css } from '@rocket.chat/css-in-js';\nimport { Box, Badge } from '@rocket.chat/fuselage';\nimport React, { ComponentProps, FC } from 'react';\n\nconst ToolBoxActionBadge: FC<ComponentProps<typeof Badge>> = (props) => (\n\t<Box\n\t\tposition='absolute'\n\t\tclassName={css`\n\t\t\ttop: 0;\n\t\t\tright: 0;\n\t\t\ttransform: translate(30%, -30%);\n\t\t`}\n\t>\n\t\t<Badge {...props} />\n\t</Box>\n);\n\nexport default ToolBoxActionBadge;\n","import Avatar from './Avatar';\nimport Button from './Button';\nimport Content from './Content';\nimport Header from './Header';\nimport HeaderDivider from './HeaderDivider';\nimport HeaderIcon from './HeaderIcon';\nimport HeaderLink from './HeaderLink';\nimport HeaderTag from './HeaderTag';\nimport HeaderTagIcon from './HeaderTagIcon';\nimport HeaderTagSkeleton from './HeaderTagSkeleton';\nimport Row from './Row';\nimport State from './State';\nimport Subtitle from './Subtitle';\nimport Title from './Title';\nimport ToolBox from './ToolBox';\nimport ToolBoxAction from './ToolBoxAction';\nimport ToolBoxActionBadge from './ToolBoxActionBadge';\n\nexport default Object.assign(Header, {\n\tButton,\n\tState,\n\tAvatar,\n\tContent: Object.assign(Content, {\n\t\tRow,\n\t}),\n\tTitle,\n\tSubtitle,\n\tToolBox,\n\tToolBoxAction: Object.assign(ToolBoxAction, {\n\t\tBadge: ToolBoxActionBadge,\n\t}),\n\tDivider: HeaderDivider,\n\tIcon: HeaderIcon,\n\tLink: HeaderLink,\n\tTag: Object.assign(HeaderTag, {\n\t\tIcon: HeaderTagIcon,\n\t\tSkeleton: HeaderTagSkeleton,\n\t}),\n\tBadge: ToolBoxActionBadge,\n});\n","import { Box, TextInput, Icon } from '@rocket.chat/fuselage';\nimport { useAutoFocus } from '@rocket.chat/fuselage-hooks';\nimport React, { ReactElement, useState, ChangeEvent } from 'react';\n\nimport { useEndpoint } from '../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../contexts/TranslationContext';\nimport GenericModal from '../GenericModal';\nimport { Method, OnConfirm } from './TwoFactorModal';\n\ntype TwoFactorEmailModalProps = {\n\tonConfirm: OnConfirm;\n\tonClose: () => void;\n\temailOrUsername: string;\n};\n\nconst TwoFactorEmailModal = ({ onConfirm, onClose, emailOrUsername }: TwoFactorEmailModalProps): ReactElement => {\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst t = useTranslation();\n\tconst [code, setCode] = useState<string>('');\n\tconst ref = useAutoFocus();\n\n\tconst sendEmailCode = useEndpoint('POST', 'users.2fa.sendEmailCode');\n\n\tconst onClickResendCode = async (): Promise<void> => {\n\t\ttry {\n\t\t\tawait sendEmailCode({ emailOrUsername });\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Email_sent') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('error-email-send-failed', { message: error }),\n\t\t\t});\n\t\t}\n\t};\n\n\tconst onConfirmEmailCode = (): void => {\n\t\tonConfirm(code, Method.EMAIL);\n\t};\n\n\tconst onChange = ({ currentTarget }: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetCode(currentTarget.value);\n\t};\n\n\treturn (\n\t\t<GenericModal\n\t\t\tonConfirm={onConfirmEmailCode}\n\t\t\tonCancel={onClose}\n\t\t\tconfirmText={t('Verify')}\n\t\t\ttitle={t('Two-factor_authentication_email')}\n\t\t\tonClose={onClose}\n\t\t\tvariant='warning'\n\t\t\ticon={<Icon size='x20' name='info' color='default' />}\n\t\t\tconfirmDisabled={!code}\n\t\t>\n\t\t\t<Box mbe='x16'>{t('Verify_your_email_for_the_code_we_sent')}</Box>\n\t\t\t<Box mbe='x4' display='flex' justifyContent='stretch'>\n\t\t\t\t<TextInput ref={ref} value={code} onChange={onChange} placeholder={t('Enter_authentication_code')} />\n\t\t\t</Box>\n\t\t\t<Box display='flex' justifyContent='end' is='a' onClick={onClickResendCode}>\n\t\t\t\t{t('Cloud_resend_email')}\n\t\t\t</Box>\n\t\t</GenericModal>\n\t);\n};\n\nexport default TwoFactorEmailModal;\n","import React, { ReactElement } from 'react';\n\nimport TwoFactorEmail from './TwoFactorEmailModal';\nimport TwoFactorPassword from './TwoFactorPasswordModal';\nimport TwoFactorTotp from './TwoFactorTotpModal';\n\nexport enum Method {\n\tTOTP = 'totp',\n\tEMAIL = 'email',\n\tPASSWORD = 'password',\n}\n\nexport type OnConfirm = (code: string, method: Method) => void;\n\ntype TwoFactorModalProps = {\n\tonConfirm: OnConfirm;\n\tonClose: () => void;\n} & (\n\t| {\n\t\t\tmethod: 'totp' | 'password';\n\t  }\n\t| {\n\t\t\tmethod: 'email';\n\t\t\temailOrUsername: string;\n\t  }\n);\n\nconst TwoFactorModal = ({ onConfirm, onClose, ...props }: TwoFactorModalProps): ReactElement => {\n\tif (props.method === Method.TOTP) {\n\t\treturn <TwoFactorTotp onConfirm={onConfirm} onClose={onClose} />;\n\t}\n\n\tif (props.method === Method.EMAIL) {\n\t\tconst { emailOrUsername } = props;\n\n\t\treturn <TwoFactorEmail onConfirm={onConfirm} onClose={onClose} emailOrUsername={emailOrUsername} />;\n\t}\n\n\tif (props.method === Method.PASSWORD) {\n\t\treturn <TwoFactorPassword onConfirm={onConfirm} onClose={onClose} />;\n\t}\n\n\tthrow new Error('Invalid Two Factor method');\n};\n\nexport default TwoFactorModal;\n","import { Box, PasswordInput, Icon } from '@rocket.chat/fuselage';\nimport { useAutoFocus } from '@rocket.chat/fuselage-hooks';\nimport React, { ReactElement, useState, ChangeEvent, Ref } from 'react';\n\nimport { useTranslation } from '../../contexts/TranslationContext';\nimport GenericModal from '../GenericModal';\nimport { Method, OnConfirm } from './TwoFactorModal';\n\ntype TwoFactorPasswordModalProps = {\n\tonConfirm: OnConfirm;\n\tonClose: () => void;\n};\n\nconst TwoFactorPasswordModal = ({ onConfirm, onClose }: TwoFactorPasswordModalProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst [code, setCode] = useState<string>('');\n\tconst ref = useAutoFocus();\n\n\tconst onConfirmTotpCode = (): void => {\n\t\tonConfirm(code, Method.PASSWORD);\n\t};\n\n\tconst onChange = ({ currentTarget }: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetCode(currentTarget.value);\n\t};\n\n\treturn (\n\t\t<GenericModal\n\t\t\tonConfirm={onConfirmTotpCode}\n\t\t\tonCancel={onClose}\n\t\t\tconfirmText={t('Verify')}\n\t\t\ttitle={t('Please_enter_your_password')}\n\t\t\tonClose={onClose}\n\t\t\tvariant='warning'\n\t\t\ticon={<Icon size='x20' name='info' color='default' />}\n\t\t\tconfirmDisabled={!code}\n\t\t>\n\t\t\t<Box mbe='x16'>{t('For_your_security_you_must_enter_your_current_password_to_continue')}</Box>\n\t\t\t<Box mbe='x16' display='flex' justifyContent='stretch'>\n\t\t\t\t<PasswordInput ref={ref as Ref<HTMLInputElement>} value={code} onChange={onChange} placeholder={t('Password')}></PasswordInput>\n\t\t\t</Box>\n\t\t</GenericModal>\n\t);\n};\n\nexport default TwoFactorPasswordModal;\n","import { Box, TextInput, Icon } from '@rocket.chat/fuselage';\nimport { useAutoFocus } from '@rocket.chat/fuselage-hooks';\nimport React, { ReactElement, useState, ChangeEvent } from 'react';\n\nimport { useTranslation } from '../../contexts/TranslationContext';\nimport GenericModal from '../GenericModal';\nimport { Method, OnConfirm } from './TwoFactorModal';\n\ntype TwoFactorTotpModalProps = {\n\tonConfirm: OnConfirm;\n\tonClose: () => void;\n};\n\nconst TwoFactorTotpModal = ({ onConfirm, onClose }: TwoFactorTotpModalProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst [code, setCode] = useState<string>('');\n\tconst ref = useAutoFocus();\n\n\tconst onConfirmTotpCode = (): void => {\n\t\tonConfirm(code, Method.TOTP);\n\t};\n\n\tconst onChange = ({ currentTarget }: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetCode(currentTarget.value);\n\t};\n\n\treturn (\n\t\t<GenericModal\n\t\t\tonConfirm={onConfirmTotpCode}\n\t\t\tonCancel={onClose}\n\t\t\tconfirmText={t('Verify')}\n\t\t\ttitle={t('Two Factor Authentication')}\n\t\t\tonClose={onClose}\n\t\t\tvariant='warning'\n\t\t\ticon={<Icon size='x20' name='info' color='default' />}\n\t\t\tconfirmDisabled={!code}\n\t\t>\n\t\t\t<Box mbe='x16'>{t('Open_your_authentication_app_and_enter_the_code')}</Box>\n\t\t\t<Box mbe='x16' display='flex' justifyContent='stretch'>\n\t\t\t\t<TextInput ref={ref} value={code} onChange={onChange} placeholder={t('Enter_authentication_code')}></TextInput>\n\t\t\t</Box>\n\t\t</GenericModal>\n\t);\n};\n\nexport default TwoFactorTotpModal;\n","export { default } from './TwoFactorModal';\n","import { AutoComplete, Box, Option, Chip } from '@rocket.chat/fuselage';\nimport { useMutableCallback, useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport React, { memo, useMemo, useState } from 'react';\n\nimport { useEndpointData } from '../../hooks/useEndpointData';\nimport UserAvatar from '../avatar/UserAvatar';\n\nconst query = (term = '') => ({ selector: JSON.stringify({ term }) });\n\nconst UserAutoCompleteMultiple = (props) => {\n\tconst [filter, setFilter] = useState('');\n\tconst debouncedFilter = useDebouncedValue(filter, 1000);\n\tconst { value: data } = useEndpointData(\n\t\t'users.autocomplete',\n\t\tuseMemo(() => query(debouncedFilter), [debouncedFilter]),\n\t);\n\tconst options = useMemo(() => (data && data.items.map((user) => ({ value: user.username, label: user.name }))) || [], [data]);\n\tconst onClickRemove = useMutableCallback((e) => {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t\tprops.onChange(e.currentTarget.value, 'remove');\n\t});\n\n\treturn (\n\t\t<AutoComplete\n\t\t\t{...props}\n\t\t\tfilter={filter}\n\t\t\tsetFilter={setFilter}\n\t\t\trenderSelected={({ value: selected }) =>\n\t\t\t\tselected?.map((value) => (\n\t\t\t\t\t<Chip key={value} {...props} height='x20' value={value} onClick={onClickRemove} mie='x4'>\n\t\t\t\t\t\t<UserAvatar size='x20' username={value} />\n\t\t\t\t\t\t<Box is='span' margin='none' mis='x4'>\n\t\t\t\t\t\t\t{value}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Chip>\n\t\t\t\t))\n\t\t\t}\n\t\t\trenderItem={({ value, label, ...props }) => (\n\t\t\t\t<Option key={value} {...props}>\n\t\t\t\t\t<Option.Avatar>\n\t\t\t\t\t\t<UserAvatar username={value} size='x20' />\n\t\t\t\t\t</Option.Avatar>\n\t\t\t\t\t<Option.Content>\n\t\t\t\t\t\t{label} <Option.Description>({value})</Option.Description>\n\t\t\t\t\t</Option.Content>\n\t\t\t\t</Option>\n\t\t\t)}\n\t\t\toptions={options}\n\t\t/>\n\t);\n};\n\nexport default memo(UserAutoCompleteMultiple);\n","export { default } from './UserAutoCompleteMultiple';\n","import React from 'react';\n\nimport { renderEmoji } from '../lib/utils/renderEmoji';\n\nfunction Emoji({ emojiHandle, className = undefined }) {\n\tconst markup = { __html: `${renderEmoji(emojiHandle)}` };\n\treturn <span className={className} dangerouslySetInnerHTML={markup} />;\n}\n\nexport default Emoji;\n","import { Box, Button, ButtonGroup, Icon, Modal } from '@rocket.chat/fuselage';\nimport React, { FC, ComponentProps, ReactElement, ReactNode } from 'react';\n\nimport { useTranslation } from '../contexts/TranslationContext';\nimport { withDoNotAskAgain, RequiredModalProps } from './withDoNotAskAgain';\n\ntype VariantType = 'danger' | 'warning' | 'info' | 'success';\n\ntype GenericModalProps = RequiredModalProps & {\n\tvariant?: VariantType;\n\tchildren?: ReactNode;\n\tcancelText?: string;\n\tconfirmText?: string;\n\ttitle?: string | ReactElement;\n\ticon?: ComponentProps<typeof Icon>['name'] | ReactElement | null;\n\tconfirmDisabled?: boolean;\n\tonCancel?: () => void;\n\tonClose: () => void;\n\tonConfirm: () => void;\n};\n\nconst iconMap: Record<string, ComponentProps<typeof Icon>['name']> = {\n\tdanger: 'modal-warning',\n\twarning: 'modal-warning',\n\tinfo: 'info',\n\tsuccess: 'check',\n};\n\nconst getButtonProps = (variant: VariantType): ComponentProps<typeof Button> => {\n\tswitch (variant) {\n\t\tcase 'danger':\n\t\t\treturn { primary: true, danger: true };\n\t\tcase 'warning':\n\t\t\treturn { primary: true };\n\t\tdefault:\n\t\t\treturn {};\n\t}\n};\n\nconst renderIcon = (icon: GenericModalProps['icon'], variant: VariantType): ReactNode => {\n\tif (icon === null) {\n\t\treturn null;\n\t}\n\n\tif (icon === undefined) {\n\t\treturn <Icon color={variant} name={iconMap[variant]} size={24} />;\n\t}\n\n\tif (typeof icon === 'string') {\n\t\treturn <Icon color={variant} name={icon} size={24} />;\n\t}\n\n\treturn icon;\n};\n\nconst GenericModal: FC<GenericModalProps> = ({\n\tvariant = 'info',\n\tchildren,\n\tcancelText,\n\tconfirmText,\n\ttitle,\n\ticon,\n\tonCancel,\n\tonClose = onCancel,\n\tonConfirm,\n\tdontAskAgain,\n\tconfirmDisabled,\n\t...props\n}) => {\n\tconst t = useTranslation();\n\n\treturn (\n\t\t<Modal {...props}>\n\t\t\t<Modal.Header>\n\t\t\t\t{renderIcon(icon, variant)}\n\t\t\t\t<Modal.Title>{title ?? t('Are_you_sure')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={onClose} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content fontScale='p2'>{children}</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' alignItems='center'>\n\t\t\t\t\t{dontAskAgain}\n\t\t\t\t\t<ButtonGroup align='end' flexGrow={1} maxWidth='full'>\n\t\t\t\t\t\t{onCancel && (\n\t\t\t\t\t\t\t<Button ghost onClick={onCancel}>\n\t\t\t\t\t\t\t\t{cancelText ?? t('Cancel')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Button {...getButtonProps(variant)} onClick={onConfirm} disabled={confirmDisabled}>\n\t\t\t\t\t\t\t{confirmText ?? t('Ok')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Box>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport const GenericModalDoNotAskAgain = withDoNotAskAgain<GenericModalProps>(GenericModal);\n\nexport default GenericModal;\n","import { Box } from '@rocket.chat/fuselage';\nimport React, { ReactElement } from 'react';\n\nimport { useTranslation } from '../contexts/TranslationContext';\nimport GenericModal from './GenericModal';\n\ntype UrlChangeModalProps = {\n\tonConfirm: () => void;\n\tsiteUrl: string;\n\tcurrentUrl: string;\n\tonClose: () => void;\n};\n\nconst UrlChangeModal = ({ onConfirm, siteUrl, currentUrl, onClose }: UrlChangeModalProps): ReactElement => {\n\tconst t = useTranslation();\n\treturn (\n\t\t<GenericModal variant='warning' title={t('Warning')} onConfirm={onConfirm} onClose={onClose} onCancel={onClose} confirmText={t('Yes')}>\n\t\t\t<Box\n\t\t\t\tis='p'\n\t\t\t\tmbe='x16'\n\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t__html: t('The_setting_s_is_configured_to_s_and_you_are_accessing_from_s', t('Site_Url'), siteUrl, currentUrl),\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<p dangerouslySetInnerHTML={{ __html: t('Do_you_want_to_change_to_s_question', currentUrl) }} />\n\t\t</GenericModal>\n\t);\n};\n\nexport default UrlChangeModal;\n","import { Box, CheckBox } from '@rocket.chat/fuselage';\nimport React, { useState, FC, ReactElement, ComponentType } from 'react';\n\nimport { useMethod } from '../contexts/ServerContext';\nimport { useTranslation } from '../contexts/TranslationContext';\nimport { useUserPreference } from '../contexts/UserContext';\nimport { DontAskAgainList } from '../hooks/useDontAskAgain';\n\ntype DoNotAskAgainProps = {\n\tonConfirm: (...args: any) => any;\n\tdontAskAgain: {\n\t\taction: string;\n\t\tlabel: string;\n\t};\n};\n\nexport type RequiredModalProps = {\n\tonConfirm: (...args: any) => any;\n\tdontAskAgain?: ReactElement;\n};\n\nfunction withDoNotAskAgain<T extends RequiredModalProps>(\n\tComponent: ComponentType<any>,\n): FC<DoNotAskAgainProps & Omit<T, keyof RequiredModalProps>> {\n\tconst WrappedComponent: FC<DoNotAskAgainProps & Omit<T, keyof RequiredModalProps>> = function ({ onConfirm, dontAskAgain, ...props }) {\n\t\tconst t = useTranslation();\n\t\tconst dontAskAgainList = useUserPreference<DontAskAgainList>('dontAskAgainList');\n\t\tconst { action, label } = dontAskAgain;\n\n\t\tconst saveFn = useMethod('saveUserPreferences');\n\t\tconst [state, setState] = useState<boolean>(false);\n\n\t\tconst handleConfirm = async (): Promise<void> => {\n\t\t\ttry {\n\t\t\t\tif (state) {\n\t\t\t\t\tawait saveFn({ dontAskAgainList: [...(dontAskAgainList || []), { action, label }] });\n\t\t\t\t}\n\t\t\t\tawait onConfirm();\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t};\n\n\t\tconst onChange = (): void => {\n\t\t\tsetState(!state);\n\t\t};\n\n\t\treturn (\n\t\t\t<Component\n\t\t\t\t{...props}\n\t\t\t\tdontAskAgain={\n\t\t\t\t\t<Box display='flex' flexDirection='row'>\n\t\t\t\t\t\t<CheckBox checked={state} onChange={onChange} mie='x4' name='dont_ask_again' />\n\t\t\t\t\t\t<label htmlFor='dont_ask_again'>{t('Dont_ask_me_again')}</label>\n\t\t\t\t\t</Box>\n\t\t\t\t}\n\t\t\t\tonConfirm={handleConfirm}\n\t\t\t/>\n\t\t);\n\t};\n\n\tWrappedComponent.displayName = `withDoNotAskAgain(${Component.displayName ?? Component.name ?? 'Component'})`;\n\n\treturn WrappedComponent;\n}\n\nexport { withDoNotAskAgain };\n","import { t } from '../../../app/utils/client';\nimport { dispatchToastMessage } from '../toast';\nimport { process2faReturn } from './process2faReturn';\nimport { isTotpInvalidError, isTotpRequiredError } from './utils';\n\ntype LoginCallback = {\n\t(error: unknown): void;\n\t(error: unknown, result: unknown): void;\n};\n\ntype LoginMethod<A extends unknown[]> = (...args: [...args: A, cb: LoginCallback]) => void;\n\ntype LoginMethodWithTotp<A extends unknown[]> = (...args: [...args: A, code: string, cb: LoginCallback]) => void;\n\nexport const overrideLoginMethod = <A extends unknown[]>(\n\tloginMethod: LoginMethod<A>,\n\tloginArgs: A,\n\tcallback: LoginCallback,\n\tloginMethodTOTP: LoginMethodWithTotp<A>,\n\temailOrUsername: string,\n): void => {\n\tloginMethod.call(null, ...loginArgs, (error: unknown, result?: unknown) => {\n\t\tif (!isTotpRequiredError(error)) {\n\t\t\tcallback(error);\n\t\t\treturn;\n\t\t}\n\n\t\tprocess2faReturn({\n\t\t\terror,\n\t\t\tresult,\n\t\t\temailOrUsername,\n\t\t\toriginalCallback: callback,\n\t\t\tonCode: (code: string) => {\n\t\t\t\tloginMethodTOTP?.call(null, ...loginArgs, code, (error: unknown) => {\n\t\t\t\t\tif (isTotpInvalidError(error)) {\n\t\t\t\t\t\tdispatchToastMessage({ type: 'error', message: t('Invalid_two_factor_code') });\n\t\t\t\t\t\tcallback(null);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback(error);\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t});\n};\n","import { Meteor } from 'meteor/meteor';\nimport { SHA256 } from 'meteor/sha';\n\nimport TwoFactorModal from '../../components/TwoFactorModal';\nimport { imperativeModal } from '../imperativeModal';\nimport { isTotpRequiredError } from './utils';\n\nconst twoFactorMethods = ['totp', 'email', 'password'] as const;\n\ntype TwoFactorMethod = typeof twoFactorMethods[number];\n\nconst isTwoFactorMethod = (method: string): method is TwoFactorMethod => twoFactorMethods.includes(method as TwoFactorMethod);\n\nconst hasRequiredTwoFactorMethod = (error: Meteor.Error): error is Meteor.Error & { details: { method: TwoFactorMethod } } => {\n\tconst details = error.details as unknown;\n\n\treturn (\n\t\ttypeof details === 'object' &&\n\t\tdetails !== null &&\n\t\ttypeof (details as { method: unknown }).method === 'string' &&\n\t\tisTwoFactorMethod((details as { method: string }).method)\n\t);\n};\n\nfunction assertModalProps(props: {\n\tmethod: TwoFactorMethod;\n\temailOrUsername?: string;\n}): asserts props is { method: 'totp' } | { method: 'password' } | { method: 'email'; emailOrUsername: string } {\n\tif (props.method === 'email' && typeof props.emailOrUsername !== 'string') {\n\t\tthrow new Error('Invalid Two Factor method');\n\t}\n}\n\nexport function process2faReturn({\n\terror,\n\tresult,\n\toriginalCallback,\n\tonCode,\n\temailOrUsername,\n}: {\n\terror: unknown;\n\tresult: unknown;\n\toriginalCallback: {\n\t\t(error: unknown): void;\n\t\t(error: unknown, result: unknown): void;\n\t};\n\tonCode: (code: string, method: string) => void;\n\temailOrUsername: string | null | undefined;\n}): void {\n\tif (!isTotpRequiredError(error) || !hasRequiredTwoFactorMethod(error)) {\n\t\toriginalCallback(error, result);\n\t\treturn;\n\t}\n\n\tconst props = {\n\t\tmethod: error.details.method,\n\t\temailOrUsername: emailOrUsername ?? Meteor.user()?.username,\n\t};\n\n\tassertModalProps(props);\n\n\timperativeModal.open({\n\t\tcomponent: TwoFactorModal,\n\t\tprops: {\n\t\t\t...props,\n\t\t\tonConfirm: (code: string, method: string): void => {\n\t\t\t\timperativeModal.close();\n\t\t\t\tonCode(method === 'password' ? SHA256(code) : code, method);\n\t\t\t},\n\t\t\tonClose: (): void => {\n\t\t\t\timperativeModal.close();\n\t\t\t\toriginalCallback(new Meteor.Error('totp-canceled'));\n\t\t\t},\n\t\t},\n\t});\n}\n","import { Accounts } from 'meteor/accounts-base';\nimport { Meteor } from 'meteor/meteor';\n\nexport const isTotpRequiredError = (\n\terror: unknown,\n): error is Meteor.Error & ({ error: 'totp-required' } | { errorType: 'totp-required' }) =>\n\ttypeof error === 'object' &&\n\t((error as { error?: unknown } | undefined)?.error === 'totp-required' ||\n\t\t(error as { errorType?: unknown } | undefined)?.errorType === 'totp-required');\n\nexport const isTotpInvalidError = (error: unknown): error is Meteor.Error & ({ error: 'totp-invalid' } | { errorType: 'totp-invalid' }) =>\n\t(error as { error?: unknown } | undefined)?.error === 'totp-invalid' ||\n\t(error as { errorType?: unknown } | undefined)?.errorType === 'totp-invalid';\n\nexport const isLoginCancelledError = (error: unknown): error is Meteor.Error =>\n\terror instanceof Meteor.Error && error.error === Accounts.LoginCancelledError.numericError;\n\nexport const reportError = <T>(error: T, callback?: (error?: T) => void): void => {\n\tif (callback) {\n\t\tcallback(error);\n\t\treturn;\n\t}\n\n\tthrow error;\n};\n\nexport const convertError = <T>(error: T): Accounts.LoginCancelledError | T => {\n\tif (isLoginCancelledError(error)) {\n\t\treturn new Accounts.LoginCancelledError(error.reason);\n\t}\n\n\treturn error;\n};\n","export enum AsyncStatePhase {\n\tLOADING = 'loading',\n\tRESOLVED = 'resolved',\n\tREJECTED = 'rejected',\n\tUPDATING = 'updating',\n}\n","import { AsyncState } from './AsyncState';\nimport { AsyncStatePhase } from './AsyncStatePhase';\n\nexport const loading = <T>(): AsyncState<T> => ({\n\tphase: AsyncStatePhase.LOADING,\n\tvalue: undefined,\n\terror: undefined,\n});\n\nexport const updating = <T>(value: T): AsyncState<T> => ({\n\tphase: AsyncStatePhase.UPDATING,\n\tvalue,\n\terror: undefined,\n});\n\nexport const resolved = <T>(value: T): AsyncState<T> => ({\n\tphase: AsyncStatePhase.RESOLVED,\n\tvalue,\n\terror: undefined,\n});\n\nexport const rejected = <T>(error: Error): AsyncState<T> => ({\n\tphase: AsyncStatePhase.REJECTED,\n\tvalue: undefined,\n\terror,\n});\n\nexport const reload = <T>(prevState: AsyncState<T>): AsyncState<T> => {\n\tswitch (prevState.phase) {\n\t\tcase AsyncStatePhase.LOADING:\n\t\t\treturn prevState;\n\n\t\tcase AsyncStatePhase.UPDATING:\n\t\tcase AsyncStatePhase.RESOLVED:\n\t\t\treturn {\n\t\t\t\tphase: AsyncStatePhase.LOADING,\n\t\t\t\tvalue: prevState.value,\n\t\t\t\terror: undefined,\n\t\t\t};\n\n\t\tcase AsyncStatePhase.REJECTED:\n\t\t\treturn {\n\t\t\t\tphase: AsyncStatePhase.LOADING,\n\t\t\t\tvalue: undefined,\n\t\t\t\terror: prevState.error,\n\t\t\t};\n\t}\n};\n\nexport const update = <T>(prevState: AsyncState<T>): AsyncState<T> => {\n\tswitch (prevState.phase) {\n\t\tcase AsyncStatePhase.LOADING:\n\t\tcase AsyncStatePhase.UPDATING:\n\t\t\treturn prevState;\n\n\t\tcase AsyncStatePhase.RESOLVED:\n\t\t\treturn {\n\t\t\t\tphase: AsyncStatePhase.UPDATING,\n\t\t\t\tvalue: prevState.value,\n\t\t\t\terror: undefined,\n\t\t\t};\n\n\t\tcase AsyncStatePhase.REJECTED:\n\t\t\treturn {\n\t\t\t\tphase: AsyncStatePhase.LOADING,\n\t\t\t\tvalue: undefined,\n\t\t\t\terror: prevState.error,\n\t\t\t};\n\t}\n};\n\nexport const resolve = <T>(prevState: AsyncState<T>, value: T): AsyncState<T> => {\n\tswitch (prevState.phase) {\n\t\tcase AsyncStatePhase.LOADING:\n\t\tcase AsyncStatePhase.UPDATING:\n\t\t\treturn {\n\t\t\t\tphase: AsyncStatePhase.RESOLVED,\n\t\t\t\tvalue,\n\t\t\t\terror: undefined,\n\t\t\t};\n\n\t\tcase AsyncStatePhase.RESOLVED:\n\t\tcase AsyncStatePhase.REJECTED:\n\t\t\treturn prevState;\n\t}\n};\n\nexport const reject = <T>(prevState: AsyncState<T>, error: Error): AsyncState<T> => {\n\tswitch (prevState.phase) {\n\t\tcase AsyncStatePhase.LOADING:\n\t\tcase AsyncStatePhase.UPDATING:\n\t\t\treturn {\n\t\t\t\tphase: AsyncStatePhase.REJECTED,\n\t\t\t\tvalue: undefined,\n\t\t\t\terror,\n\t\t\t};\n\n\t\tcase AsyncStatePhase.RESOLVED:\n\t\tcase AsyncStatePhase.REJECTED:\n\t\t\treturn prevState;\n\t}\n};\n\nexport const value = <T>(state: AsyncState<T>): T | undefined => state.value;\n\nexport const error = <T>(state: AsyncState<T>): Error | undefined => state.error;\n","export { AsyncState } from './AsyncState';\nexport { AsyncStatePhase } from './AsyncStatePhase';\nexport * as asyncState from './functions';\n","import { Emitter } from '@rocket.chat/emitter';\nimport { Random } from 'meteor/random';\nimport type { ReactNode } from 'react';\nimport type { Subscription, Unsubscribe } from 'use-subscription';\n\ntype BlazePortalEntry = {\n\tkey: string;\n\tnode: ReactNode;\n};\n\nclass BlazePortalsSubscriptions extends Emitter<{ update: void }> implements Subscription<BlazePortalEntry[]> {\n\tprivate map = new Map<Blaze.TemplateInstance, BlazePortalEntry>();\n\n\tgetCurrentValue = (): BlazePortalEntry[] => Array.from(this.map.values());\n\n\tsubscribe = (callback: () => void): Unsubscribe => this.on('update', callback);\n\n\tregister = (template: Blaze.TemplateInstance, node: ReactNode): void => {\n\t\tconst entry = this.map.get(template);\n\n\t\tif (!entry) {\n\t\t\tthis.map.set(template, { key: Random.id(), node });\n\t\t\tthis.emit('update');\n\t\t\treturn;\n\t\t}\n\n\t\tif (entry.node === node) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.map.set(template, { ...entry, node });\n\t\tthis.emit('update');\n\t};\n\n\tunregister = (template: Blaze.TemplateInstance): void => {\n\t\tif (this.map.delete(template)) {\n\t\t\tthis.emit('update');\n\t\t}\n\t};\n}\n\nexport const blazePortals = new BlazePortalsSubscriptions();\n","import type { ComponentType, PropsWithoutRef } from 'react';\n\nimport { createLazyPortal } from './createLazyPortal';\nimport { registerPortal } from './portalsSubscription';\n\nexport const createEphemeralPortal = <Props extends {} = {}>(\n\tfactory: () => Promise<{ default: ComponentType<Props> }>,\n\tpropsFn: () => PropsWithoutRef<Props>,\n\tcontainer: Element,\n): (() => void) => {\n\tconst portal = createLazyPortal(factory, propsFn, container);\n\treturn registerPortal(container, portal);\n};\n","import { Tracker } from 'meteor/tracker';\nimport { ComponentType, ReactElement, PropsWithoutRef, createElement, lazy, useEffect, useState, Suspense, FC } from 'react';\n\nexport const createLazyElement = <Props extends {} = {}>(\n\tfactory: () => Promise<{ default: ComponentType<Props> }>,\n\tgetProps?: () => PropsWithoutRef<Props> | undefined,\n): ReactElement => {\n\tconst LazyComponent = lazy(factory);\n\n\tif (!getProps) {\n\t\treturn createElement(LazyComponent);\n\t}\n\n\tconst WrappedComponent: FC = () => {\n\t\tconst [props, setProps] = useState(() => Tracker.nonreactive(getProps));\n\n\t\tuseEffect(() => {\n\t\t\tconst computation = Tracker.autorun(() => {\n\t\t\t\tsetProps(getProps());\n\t\t\t});\n\n\t\t\treturn (): void => {\n\t\t\t\tcomputation.stop();\n\t\t\t};\n\t\t}, []);\n\n\t\treturn createElement(Suspense, { fallback: null }, createElement(LazyComponent, props));\n\t};\n\n\treturn createElement(WrappedComponent);\n};\n","import { ComponentType, PropsWithoutRef, ReactPortal } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport { createLazyElement } from './createLazyElement';\n\nexport const createLazyPortal = <Props extends {} = {}>(\n\tfactory: () => Promise<{ default: ComponentType<Props> }>,\n\tgetProps: () => PropsWithoutRef<Props> | undefined,\n\tcontainer: Element,\n): ReactPortal => createPortal(createLazyElement(factory, getProps), container);\n","import { Blaze } from 'meteor/blaze';\nimport { HTML } from 'meteor/htmljs';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\nimport type { ComponentType, PropsWithoutRef } from 'react';\n\nimport { blazePortals } from './blazePortals';\nimport { createLazyPortal } from './createLazyPortal';\n\nexport const createTemplateForComponent = <Props extends {} = {}>(\n\tname: string,\n\tfactory: () => Promise<{ default: ComponentType<Props> }>,\n\toptions:\n\t\t| {\n\t\t\t\trenderContainerView?: () => unknown;\n\t\t  }\n\t\t| {\n\t\t\t\tattachment: 'at-parent';\n\t\t\t\tprops?: () => PropsWithoutRef<Props>;\n\t\t  } = {\n\t\trenderContainerView: (): unknown => HTML.DIV(),\n\t},\n): string => {\n\tif (Template[name]) {\n\t\treturn name;\n\t}\n\n\tconst renderFunction =\n\t\t('renderContainerView' in options && options.renderContainerView) ||\n\t\t('attachment' in options && options.attachment === 'at-parent' && ((): unknown => HTML.Comment('anchor'))) ||\n\t\t((): unknown => HTML.DIV());\n\n\tconst template = new Blaze.Template(name, renderFunction);\n\ttemplate.onRendered(function (this: Blaze.TemplateInstance) {\n\t\tconst props = new ReactiveVar(this.data as PropsWithoutRef<Props>);\n\t\tthis.autorun(() => {\n\t\t\tprops.set({\n\t\t\t\t...('props' in options && typeof options.props === 'function' && options.props()),\n\t\t\t\t...Template.currentData(),\n\t\t\t});\n\t\t});\n\n\t\tconst container =\n\t\t\t('renderContainerView' in options && (this.firstNode as Element)) ||\n\t\t\t('attachment' in options && options.attachment === 'at-parent' && (this.firstNode as Node).parentElement) ||\n\t\t\tnull;\n\n\t\tif (!container) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst portal = createLazyPortal(factory, () => props.get(), container);\n\n\t\tblazePortals.register(this, portal);\n\t});\n\n\ttemplate.onDestroyed(function (this: Blaze.TemplateInstance) {\n\t\tblazePortals.unregister(this);\n\t});\n\n\tTemplate[name] = template;\n\n\treturn name;\n};\n","import { Emitter } from '@rocket.chat/emitter';\nimport { Random } from 'meteor/random';\nimport type { ReactElement } from 'react';\nimport type { Subscription, Unsubscribe } from 'use-subscription';\n\ntype SubscribedPortal = {\n\tportal: ReactElement;\n\tkey: string;\n};\n\ntype PortalsSubscription = Subscription<SubscribedPortal[]> & {\n\thas: (key: unknown) => boolean;\n\tset: (key: unknown, portal: ReactElement) => void;\n\tdelete: (key: unknown) => void;\n};\n\nconst createPortalsSubscription = (): PortalsSubscription => {\n\tconst portalsMap = new Map<unknown, SubscribedPortal>();\n\tconst emitter = new Emitter<{ update: void }>();\n\n\treturn {\n\t\tgetCurrentValue: (): SubscribedPortal[] => Array.from(portalsMap.values()),\n\t\tsubscribe: (callback): Unsubscribe => emitter.on('update', callback),\n\t\tdelete: (key): void => {\n\t\t\tportalsMap.delete(key);\n\t\t\temitter.emit('update');\n\t\t},\n\t\tset: (key, portal): void => {\n\t\t\tportalsMap.set(key, { portal, key: Random.id() });\n\t\t\temitter.emit('update');\n\t\t},\n\t\thas: (key): boolean => portalsMap.has(key),\n\t};\n};\n\nexport const portalsSubscription = createPortalsSubscription();\n\nexport const unregisterPortal = (key: unknown): void => {\n\tportalsSubscription.delete(key);\n};\n\nexport const registerPortal = (key: unknown, portal: ReactElement): (() => void) => {\n\tportalsSubscription.set(key, portal);\n\treturn (): void => {\n\t\tunregisterPortal(key);\n\t};\n};\n","import { CachedCollection } from '../../../app/ui-cached-collection/client';\n\nexport class PublicSettingsCachedCollection extends CachedCollection {\n\tconstructor() {\n\t\tsuper({\n\t\t\tname: 'public-settings',\n\t\t\teventType: 'onAll',\n\t\t\tuserRelated: false,\n\t\t\tlistenChangesForLoggedUsersOnly: true,\n\t\t});\n\t}\n\n\tstatic instance: PublicSettingsCachedCollection;\n\n\tstatic get(): PublicSettingsCachedCollection {\n\t\tif (!PublicSettingsCachedCollection.instance) {\n\t\t\tPublicSettingsCachedCollection.instance = new PublicSettingsCachedCollection();\n\t\t}\n\n\t\treturn PublicSettingsCachedCollection.instance;\n\t}\n}\n","import { TAPi18n, TAPi18next } from 'meteor/rocketchat:tap-i18n';\n\nimport { settings } from '../../../app/settings/client';\n\nexport const applyCustomTranslations = (): void => {\n\tconst customTranslations: string | undefined = settings.get('Custom_Translations');\n\n\tif (!customTranslations) {\n\t\treturn;\n\t}\n\n\ttry {\n\t\tconst parsedCustomTranslations: Record<string, unknown> = JSON.parse(customTranslations);\n\n\t\tfor (const [lang, translations] of Object.entries(parsedCustomTranslations)) {\n\t\t\tTAPi18next.addResourceBundle(lang, 'project', translations);\n\t\t}\n\t\tTAPi18n._language_changed_tracker.changed();\n\t} catch (e) {\n\t\tconsole.error('Invalid setting Custom_Translations', e);\n\t}\n};\n","import { Meteor } from 'meteor/meteor';\n\nimport { ServerMethodName, ServerMethodParameters, ServerMethodReturn } from '../../contexts/ServerContext';\n\nexport const call = <M extends ServerMethodName>(method: M, ...params: ServerMethodParameters<M>): Promise<ServerMethodReturn<M>> =>\n\tnew Promise((resolve, reject) => {\n\t\tMeteor.call(method, ...params, (error: Error, result: ServerMethodReturn<M>) => {\n\t\t\tif (error) {\n\t\t\t\treject(error);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresolve(result);\n\t\t});\n\t});\n","import { ServerMethodName, ServerMethodParameters, ServerMethodReturn } from '../../contexts/ServerContext';\nimport { call } from './call';\nimport { handleError } from './handleError';\n\nexport const callWithErrorHandling = async <M extends ServerMethodName>(\n\tmethod: M,\n\t...params: ServerMethodParameters<M>\n): Promise<ServerMethodReturn<M>> => {\n\ttry {\n\t\treturn await call(method, ...params);\n\t} catch (error) {\n\t\thandleError(error);\n\t\tthrow error;\n\t}\n};\n","import { Meteor } from 'meteor/meteor';\nimport moment, { MomentInput } from 'moment';\n\nimport { hasPermission } from '../../../app/authorization/client';\nimport { settings } from '../../../app/settings/client';\nimport { IRoom } from '../../../definition/IRoom';\nimport { IUser } from '../../../definition/IUser';\n\nexport const canDeleteMessage = ({ rid, ts, uid }: { rid: IRoom['_id']; ts: MomentInput; uid: IUser['_id'] }): boolean => {\n\tconst userId = Meteor.userId();\n\n\tconst forceDelete = hasPermission('force-delete-message', rid);\n\tif (forceDelete) {\n\t\treturn true;\n\t}\n\n\tconst isDeleteAllowed: boolean | undefined = settings.get('Message_AllowDeleting');\n\tif (!isDeleteAllowed) {\n\t\treturn false;\n\t}\n\n\tconst allowed = hasPermission('delete-message', rid);\n\n\tconst deleteOwn = allowed || (uid === userId && hasPermission('delete-own-message'));\n\tif (!allowed && !deleteOwn) {\n\t\treturn false;\n\t}\n\n\tconst blockDeleteInMinutes: number | undefined = settings.get('Message_AllowDeleting_BlockDeleteInMinutes');\n\tif (blockDeleteInMinutes && blockDeleteInMinutes !== 0) {\n\t\tif (!ts) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst msgTs = moment(ts);\n\t\tconst now = moment();\n\n\t\treturn now.diff(msgTs, 'minutes') < blockDeleteInMinutes;\n\t}\n\n\treturn true;\n};\n","export const createAnchor = (id: string, target = document.body): HTMLDivElement => {\n\tconst div = document.createElement('div');\n\tdiv.id = id;\n\ttarget.appendChild(div);\n\treturn div;\n};\n","export const delegate = ({\n\tparent = document,\n\teventName,\n\telementSelector,\n\tlistener,\n}: {\n\tparent?: Document | Element;\n\teventName: string;\n\telementSelector: string;\n\tlistener: (this: Element, e: Event, currentTarget: Element) => void;\n}): (() => void) => {\n\tconst effectiveListener = function (this: Document | Element, e: Event): void {\n\t\t// loop parent nodes from the target to the delegation node\n\t\tfor (let { target } = e; target && target instanceof Element && target !== this; target = target.parentNode) {\n\t\t\tif (target.matches(elementSelector)) {\n\t\t\t\tlistener.call(target, e, target);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\tparent.addEventListener(eventName, effectiveListener, false);\n\n\treturn (): void => {\n\t\tparent.removeEventListener(eventName, effectiveListener, false);\n\t};\n};\n\nexport const triggerClick = (target: EventTarget | null): void => {\n\tconst clickEvent = document.createEvent('HTMLEvents');\n\tclickEvent.initEvent('click', true, false);\n\ttarget?.dispatchEvent(clickEvent);\n};\n","export const filterLanguage = (language: string): string => {\n\t// Fix browsers having all-lowercase language settings eg. pt-br, en-us\n\tconst regex = /([a-z]{2,3})-([a-z]{2,4})/;\n\tconst matches = regex.exec(language);\n\tif (matches) {\n\t\treturn `${matches[1]}-${matches[2].toUpperCase()}`;\n\t}\n\n\treturn language;\n};\n","import { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../../app/settings/client';\n\nexport const fireGlobalEvent = (eventName: string, detail?: unknown): void => {\n\twindow.dispatchEvent(new CustomEvent(eventName, { detail }));\n\n\tTracker.autorun((computation) => {\n\t\tconst enabled = settings.get('Iframe_Integration_send_enable');\n\t\tif (enabled === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tcomputation.stop();\n\n\t\tif (enabled) {\n\t\t\tparent.postMessage(\n\t\t\t\t{\n\t\t\t\t\teventName,\n\t\t\t\t\tdata: detail,\n\t\t\t\t},\n\t\t\t\tsettings.get('Iframe_Integration_send_target_origin'),\n\t\t\t);\n\t\t}\n\t});\n};\n","export const formatBytes = (bytes: number, decimals?: number): string => {\n\tif (bytes === 0) {\n\t\treturn '0 Bytes';\n\t}\n\n\tconst k = 1024;\n\tconst dm = decimals || 0;\n\n\tconst sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB'];\n\n\tconst i = Math.floor(Math.log(bytes) / Math.log(k));\n\n\treturn `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n};\n","import mem from 'mem';\nimport { Tracker } from 'meteor/tracker';\nimport moment, { MomentInput } from 'moment';\n\nimport { settings } from '../../../app/settings/client';\n\nexport const formatDate = mem(\n\t(time: MomentInput) => {\n\t\tconst messageDateFormat = Tracker.nonreactive(() => settings.get('Message_DateFormat'));\n\t\treturn moment(time).format(messageDateFormat);\n\t},\n\t{ maxAge: 5000 },\n);\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport moment, { MomentInput } from 'moment';\n\nimport { settings } from '../../../app/settings/client';\nimport { getUserPreference } from '../../../app/utils/lib/getUserPreference';\n\nexport const formatDateAndTime = (time: MomentInput): string => {\n\tconst clockMode = Tracker.nonreactive(() => getUserPreference(Meteor.userId(), 'clockMode', false));\n\tconst messageTimeAndDateFormat = Tracker.nonreactive(() => settings.get('Message_TimeAndDateFormat'));\n\n\tswitch (clockMode) {\n\t\tcase 1:\n\t\t\treturn moment(time).format('MMMM D, Y h:mm A');\n\t\tcase 2:\n\t\t\treturn moment(time).format('MMMM D, Y H:mm');\n\t\tdefault:\n\t\t\treturn moment(time).format(messageTimeAndDateFormat);\n\t}\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport moment, { MomentInput } from 'moment';\n\nimport { settings } from '../../../app/settings/client';\nimport { getUserPreference } from '../../../app/utils/lib/getUserPreference';\n\nconst dayFormat = ['h:mm A', 'H:mm'];\n\nexport const formatTime = (time: MomentInput): string => {\n\tconst clockMode = Tracker.nonreactive(() => getUserPreference(Meteor.userId(), 'clockMode', false));\n\tconst messageTimeFormat = Tracker.nonreactive(() => settings.get('Message_TimeFormat'));\n\tconst sameDay = dayFormat[clockMode - 1] || messageTimeFormat;\n\n\tswitch (clockMode) {\n\t\tcase 1:\n\t\tcase 2:\n\t\t\treturn moment(time).format(sameDay);\n\t\tdefault:\n\t\t\treturn moment(time).format(messageTimeFormat);\n\t}\n};\n","import { getUserAvatarURL } from '../../../app/utils/lib/getUserAvatarURL';\nimport { IUser } from '../../../definition/IUser';\n\nexport const getAvatarAsPng = (username: IUser['username'], cb: (dataURL: string) => void): (() => void) => {\n\tconst image = new Image();\n\n\tconst onLoad = (): void => {\n\t\tconst canvas = document.createElement('canvas');\n\t\tcanvas.width = image.width;\n\t\tcanvas.height = image.height;\n\t\tconst context = canvas.getContext('2d');\n\n\t\tif (!context) {\n\t\t\tthrow new Error('failed to get canvas context');\n\t\t}\n\n\t\tcontext.drawImage(image, 0, 0);\n\t\ttry {\n\t\t\treturn cb(canvas.toDataURL('image/png'));\n\t\t} catch (e) {\n\t\t\treturn cb('');\n\t\t}\n\t};\n\n\tconst onError = (): void => cb('');\n\n\timage.onload = onLoad;\n\timage.onerror = onError;\n\timage.src = getUserAvatarURL(username);\n\n\treturn onError;\n};\n","import { Meteor } from 'meteor/meteor';\n\nexport const getConfig = (key: string): string | null => {\n\tconst searchParams = new URLSearchParams(window.location.search);\n\treturn searchParams.get(key) || Meteor._localStorage.getItem(`rc-config-${key}`);\n};\n","import { Meteor } from 'meteor/meteor';\n\nimport { Rooms } from '../../../app/models/client';\nimport { IRoom } from '../../../definition/IRoom';\nimport { IUser } from '../../../definition/IUser';\n\nexport const getUidDirectMessage = (rid: IRoom['_id'], userId: IUser['_id'] | null = Meteor.userId()): string | undefined => {\n\tconst room: IRoom | null = Rooms.findOne({ _id: rid }, { fields: { uids: 1 } });\n\n\tif (!room || !room.uids || room.uids.length > 2) {\n\t\treturn undefined;\n\t}\n\n\treturn room.uids.filter((uid) => uid !== userId)[0];\n};\n","import { memoize } from '@rocket.chat/memo';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { ChatSubscription } from '../../../app/models/client';\nimport { roomTypes } from '../../../app/utils/client';\nimport { IRoom } from '../../../definition/IRoom';\nimport { callWithErrorHandling } from './callWithErrorHandling';\n\nconst getRoomById = memoize((rid: IRoom['_id']) => callWithErrorHandling('getRoomById', rid));\n\nexport const goToRoomById = async (rid: IRoom['_id']): Promise<void> => {\n\tif (!rid) {\n\t\treturn;\n\t}\n\n\tconst subscription = ChatSubscription.findOne({ rid });\n\n\tif (subscription) {\n\t\troomTypes.openRouteLink(subscription.t, subscription, FlowRouter.current().queryParams);\n\t\treturn;\n\t}\n\n\tconst room = await getRoomById(rid);\n\troomTypes.openRouteLink(room.t, { rid: room._id, ...room }, FlowRouter.current().queryParams);\n};\n","import { escapeHTML } from '@rocket.chat/string-helpers';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport toastr from 'toastr';\n\nconst hasXHR = (error: {}): error is { xhr: JQuery.jqXHR } => 'xhr' in error;\n\nconst hasDetails = (error: {}): error is { details: Record<string, string> } =>\n\t'details' in error && typeof (error as { details: unknown }).details === 'object';\n\nconst hasToastrShowed = (error: {}): error is { toastrShowed: true } =>\n\t'toastrShowed' in error && (error as { toastrShowed: unknown }).toastrShowed === true;\n\nconst hasError = (error: {}): error is { error: string } => 'error' in error && typeof (error as { error: unknown }).error === 'string';\n\nconst hasMessage = (error: {}): error is { message: string } =>\n\t'error' in error && typeof (error as { message: unknown }).message === 'string';\n\nconst hasErrorTitle = (details: Record<string, string>): details is Record<string, string> & { errorTitle: string } =>\n\t'errorTitle' in details && typeof (details as Record<string, string> & { errorTitle: unknown }) === 'string';\n\nexport const handleError = (error: {}, useToastr = true): JQuery<HTMLElement> | string | undefined => {\n\tif (hasXHR(error) && error.xhr.responseJSON) {\n\t\treturn handleError(error.xhr.responseJSON, useToastr);\n\t}\n\n\tconst message = (hasError(error) && error.error) || (hasMessage(error) && error.message) || undefined;\n\tconst details = hasDetails(error) ? error.details : {};\n\n\tif (useToastr) {\n\t\tif (hasToastrShowed(error)) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn toastr.error(\n\t\t\tTAPi18n.__(message, Object.fromEntries(Object.entries(details).map(([key, value]) => [key, escapeHTML(TAPi18n.__(value))]))),\n\t\t\thasErrorTitle(details) ? TAPi18n.__(details.errorTitle) : undefined,\n\t\t);\n\t}\n\n\treturn escapeHTML(TAPi18n.__(message, Object.fromEntries(Object.entries(details).map(([key, value]) => [key, TAPi18n.__(value)]))));\n};\n","export const isIE11: boolean = ((): boolean => {\n\tconst { userAgent } = window.navigator;\n\tconst msieIdx = userAgent.indexOf('MSIE');\n\n\tif (msieIdx > 0) {\n\t\treturn parseInt(userAgent.substring(msieIdx + 5, userAgent.indexOf('.', msieIdx))) === 11;\n\t}\n\n\t// If MSIE detection fails, check the Trident engine version\n\tif (navigator.userAgent.match(/Trident\\/7\\./)) {\n\t\treturn true;\n\t}\n\n\treturn false;\n})();\n","export const isIOsDevice = !!navigator.platform.match(/iPhone|iPod|iPad/);\n","import { FlowRouter } from 'meteor/kadira:flow-router';\n\nexport const isLayoutEmbedded = (): boolean => FlowRouter.getQueryParam('layout') === 'embedded';\n","// http://stackoverflow.com/a/14824756\n\nconst ltrChars = 'A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u2C00-\\uFB1C\\uFDFE-\\uFE6F\\uFEFD-\\uFFFF';\nconst rtlChars = '\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC';\nconst rtlRegExp = new RegExp(`^[^${ltrChars}]*[${rtlChars}]`);\n\nexport const isRTL = (text: string): boolean => rtlRegExp.test(text);\n","export const keyCodes = {\n\tTAB: 9,\n\tCARRIAGE_RETURN: 10,\n\tNEW_LINE: 13,\n\tSHIFT: 16,\n\tCONTROL: 17,\n\tALT: 18,\n\tPAUSE_BREAK: 19,\n\tCAPS_LOCK: 20,\n\tESCAPE: 27,\n\tPAGE_DOWN: 33,\n\tPAGE_UP: 34,\n\tEND: 35,\n\tHOME: 36,\n\tARROW_LEFT: 37,\n\tARROW_UP: 38,\n\tARROW_RIGHT: 39,\n\tARROW_DOWN: 40,\n\tINSERT: 45,\n\tSUPER: 91,\n\tMENU: 93,\n\tF1: 112,\n\tF2: 113,\n\tF3: 114,\n\tF4: 115,\n\tF5: 116,\n\tF6: 117,\n\tF7: 118,\n\tF8: 119,\n\tF9: 120,\n\tF10: 121,\n\tF11: 122,\n\tF12: 123,\n\tNUM_LOCK: 144,\n\tSCROLL_LOCK: 145,\n} as const;\n","import { Meteor } from 'meteor/meteor';\n\nimport { Rooms, Users } from '../../../app/models/client';\nimport { MessageAction } from '../../../app/ui-utils/client/lib/MessageAction';\nimport { IMessage } from '../../../definition/IMessage';\nimport { IRoom } from '../../../definition/IRoom';\n\nexport const prependReplies = async (msg: string, replies: IMessage[] = [], mention = false): Promise<string> => {\n\tconst { username } = Users.findOne({ _id: Meteor.userId() }, { fields: { username: 1 } });\n\n\tconst chunks = await Promise.all(\n\t\treplies.map(async ({ _id, rid, u }) => {\n\t\t\tconst permalink = await MessageAction.getPermaLink(_id);\n\t\t\tconst room: IRoom | null = Rooms.findOne(rid, { fields: { t: 1 } });\n\n\t\t\tlet chunk = `[ ](${permalink})`;\n\t\t\tif (room?.t === 'd' && u.username !== username && mention) {\n\t\t\t\tchunk += ` @${u.username}`;\n\t\t\t}\n\n\t\t\treturn chunk;\n\t\t}),\n\t);\n\n\tchunks.push(msg);\n\treturn chunks.join(' ');\n};\n","import { emoji } from '../../../app/emoji/lib/rocketchat';\n\nconst emojiList = emoji.list as Record<string, { emojiPackage: string }>;\nconst emojiPackages = emoji.packages as Record<string, { render(emojiName: string): string }>;\n\nexport const renderEmoji = (emojiName: string): string | undefined => {\n\tconst emojiPackageName = emojiList[emojiName]?.emojiPackage;\n\tif (emojiPackageName) {\n\t\tconst emojiPackage = emojiPackages[emojiPackageName];\n\t\treturn emojiPackage.render(emojiName);\n\t}\n\n\treturn undefined;\n};\n","import { escapeHTML } from '@rocket.chat/string-helpers';\n\nimport { IMessage } from '../../../definition/IMessage';\nimport { callbacks } from '../../../lib/callbacks';\n\nexport const renderMessageBody = <T extends Partial<IMessage> & { tokens?: { token: string; text: string }[]; html?: string }>(\n\tmessage: T,\n): string => {\n\tmessage.html = message.msg?.trim() ? escapeHTML(message.msg.trim()) : '';\n\n\tconst { tokens, html } = callbacks.run('renderMessage', message);\n\n\treturn (Array.isArray(tokens) ? tokens.reverse() : []).reduce((html, { token, text }) => html.replace(token, () => text), html ?? '');\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport moment, { Moment, MomentInput } from 'moment';\n\nimport { settings } from '../../../app/settings/client';\nimport { t } from '../../../app/utils/client';\nimport { getUserPreference } from '../../../app/utils/lib/getUserPreference';\n\nconst dayFormat = ['h:mm A', 'H:mm'];\n\nexport const timeAgo = (date: MomentInput): string => {\n\tconst clockMode = Tracker.nonreactive(() => getUserPreference(Meteor.userId(), 'clockMode', false));\n\tconst messageTimeFormat = Tracker.nonreactive(() => settings.get('Message_TimeFormat'));\n\tconst sameDay = dayFormat[clockMode - 1] || messageTimeFormat;\n\n\treturn moment(date).calendar(null, {\n\t\tlastDay: `[${t('yesterday')}]`,\n\t\tsameDay,\n\t\tlastWeek: 'dddd',\n\t\tsameElse(this: Moment, now) {\n\t\t\tconst diff = Math.ceil(this.diff(now, 'years', true));\n\t\t\treturn diff < 0 ? 'MMM D YYYY' : 'MMM D';\n\t\t},\n\t});\n};\n","import { Tracker } from 'meteor/tracker';\n\nexport const waitUntilFind = <T>(fn: () => T | undefined): Promise<T> =>\n\tnew Promise((resolve) => {\n\t\tTracker.autorun((c) => {\n\t\t\tconst result = fn();\n\n\t\t\tif (result === undefined) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tc.stop();\n\t\t\tresolve(result);\n\t\t});\n\t});\n","import { Emitter } from '@rocket.chat/emitter';\nimport { useEffect, useMemo } from 'react';\nimport { useSubscription, Subscription, Unsubscribe } from 'use-subscription';\n\nimport { IRoom } from '../../definition/IRoom';\nimport { useUserId, useUserRoom, useUserSubscription } from '../contexts/UserContext';\nimport { useAsyncState } from '../hooks/useAsyncState';\nimport { AsyncState } from './asyncState';\nimport { getConfig } from './utils/getConfig';\n\nconst debug = !!(getConfig('debug') || getConfig('debug-RoomStore'));\n\nexport class RoomStore extends Emitter<{\n\tchanged: undefined;\n}> {\n\tlastTime?: Date;\n\n\tscroll?: number;\n\n\tlm?: Date;\n\n\tatBottom = true;\n\n\tconstructor(readonly rid: string) {\n\t\tsuper();\n\n\t\tdebug && this.on('changed', () => console.log(`RoomStore ${this.rid} changed`, this));\n\t}\n\n\tupdate({ scroll, lastTime, atBottom }: { scroll?: number; lastTime?: Date; atBottom?: boolean }): void {\n\t\tif (scroll !== undefined) {\n\t\t\tthis.scroll = scroll;\n\t\t}\n\t\tif (lastTime !== undefined) {\n\t\t\tthis.lastTime = lastTime;\n\t\t}\n\n\t\tif (atBottom !== undefined) {\n\t\t\tthis.atBottom = atBottom;\n\t\t}\n\t\tif (scroll || lastTime) {\n\t\t\tthis.emit('changed');\n\t\t}\n\t}\n}\n\nconst debugRoomManager = !!(getConfig('debug') || getConfig('debug-RoomManager'));\nexport const RoomManager = new (class RoomManager extends Emitter<{\n\tchanged: IRoom['_id'] | undefined;\n\topened: IRoom['_id'];\n\tclosed: IRoom['_id'];\n\tback: IRoom['_id'];\n\tremoved: IRoom['_id'];\n}> {\n\tprivate rid: IRoom['_id'] | undefined;\n\n\tprivate lastRid: IRoom['_id'] | undefined;\n\n\tprivate rooms: Map<IRoom['_id'], RoomStore> = new Map();\n\n\tconstructor() {\n\t\tsuper();\n\t\tdebugRoomManager &&\n\t\t\tthis.on('opened', (rid) => {\n\t\t\t\tconsole.log('room opened ->', rid);\n\t\t\t});\n\n\t\tdebugRoomManager &&\n\t\t\tthis.on('back', (rid) => {\n\t\t\t\tconsole.log('room moved to back ->', rid);\n\t\t\t});\n\n\t\tdebugRoomManager &&\n\t\t\tthis.on('closed', (rid) => {\n\t\t\t\tconsole.log('room close ->', rid);\n\t\t\t});\n\t}\n\n\tget lastOpened(): IRoom['_id'] | undefined {\n\t\treturn this.lastRid;\n\t}\n\n\tget opened(): IRoom['_id'] | undefined {\n\t\treturn this.rid;\n\t}\n\n\tvisitedRooms(): IRoom['_id'][] {\n\t\treturn [...this.rooms.keys()];\n\t}\n\n\tback(rid: IRoom['_id']): void {\n\t\tif (rid === this.rid) {\n\t\t\tthis.lastRid = rid;\n\t\t\tthis.rid = undefined;\n\t\t\tthis.emit('back', rid);\n\t\t\tthis.emit('changed', this.rid);\n\t\t}\n\t}\n\n\tclose(rid: IRoom['_id']): void {\n\t\tif (!this.rooms.has(rid)) {\n\t\t\tthis.rooms.delete(rid);\n\t\t\tthis.emit('closed', rid);\n\t\t}\n\t\tthis.emit('changed', this.rid);\n\t}\n\n\topen(rid: IRoom['_id']): void {\n\t\tif (rid === this.rid) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.back(rid);\n\t\tif (!this.rooms.has(rid)) {\n\t\t\tthis.rooms.set(rid, new RoomStore(rid));\n\t\t}\n\t\tthis.rid = rid;\n\t\tthis.emit('opened', this.rid);\n\t\tthis.emit('changed', this.rid);\n\t}\n\n\tgetStore(rid: IRoom['_id']): RoomStore | undefined {\n\t\treturn this.rooms.get(rid);\n\t}\n})();\n\nconst subscribeVisitedRooms: Subscription<IRoom['_id'][]> = {\n\tgetCurrentValue: () => RoomManager.visitedRooms(),\n\tsubscribe(callback) {\n\t\treturn RoomManager.on('changed', callback);\n\t},\n};\n\nconst subscribeOpenedRoom: Subscription<IRoom['_id'] | undefined> = {\n\tgetCurrentValue: () => RoomManager.opened,\n\tsubscribe(callback) {\n\t\treturn RoomManager.on('opened', callback);\n\t},\n};\n\nconst fields = {};\n\nexport const useHandleRoom = <T extends IRoom>(rid: IRoom['_id']): AsyncState<T> => {\n\tconst { resolve, update, ...state } = useAsyncState<T>();\n\tconst uid = useUserId();\n\tconst subscription = useUserSubscription(rid, fields) as unknown as T;\n\tconst _room = useUserRoom(rid, fields) as unknown as T;\n\n\tconst room = uid ? subscription || _room : _room;\n\n\tuseEffect(() => {\n\t\tif (room) {\n\t\t\tupdate();\n\t\t\tresolve(room);\n\t\t}\n\t}, [resolve, update, room]);\n\n\treturn state;\n};\n\nexport const useVisitedRooms = (): IRoom['_id'][] => useSubscription(subscribeVisitedRooms);\n\nexport const useOpenedRoom = (): IRoom['_id'] | undefined => useSubscription(subscribeOpenedRoom);\n\nexport const useRoomStore = (rid: IRoom['_id']): RoomStore => {\n\tconst subscribeStore: Subscription<RoomStore | undefined> = useMemo(\n\t\t() => ({\n\t\t\tgetCurrentValue: (): RoomStore | undefined => RoomManager.getStore(rid),\n\t\t\tsubscribe(callback): Unsubscribe {\n\t\t\t\treturn RoomManager.on('changed', callback);\n\t\t\t},\n\t\t}),\n\t\t[rid],\n\t);\n\n\tconst store = useSubscription(subscribeStore);\n\n\tif (!store) {\n\t\tthrow new Error('Something wrong');\n\t}\n\treturn store;\n};\n","import { Emitter } from '@rocket.chat/emitter';\nimport { ComponentProps, createElement, lazy, ReactElement } from 'react';\nimport { Subscription, Unsubscribe } from 'use-subscription';\n\nconst MainLayout = lazy(() => import('../views/root/MainLayout'));\n\ntype AppLayoutDescriptor = ReactElement | null;\n\nclass AppLayoutSubscription extends Emitter<{ update: void }> implements Subscription<AppLayoutDescriptor> {\n\tprivate descriptor: AppLayoutDescriptor = null;\n\n\tgetCurrentValue = (): AppLayoutDescriptor => this.descriptor;\n\n\tsubscribe = (callback: () => void): Unsubscribe => this.on('update', callback);\n\n\tsetCurrentValue(descriptor: AppLayoutDescriptor): void {\n\t\tthis.descriptor = descriptor;\n\t\tthis.emit('update');\n\t}\n\n\trenderMainLayout(props: ComponentProps<typeof MainLayout> = {}): void {\n\t\tthis.setCurrentValue(createElement(MainLayout, props));\n\t}\n\n\trender(element: ReactElement): void {\n\t\tthis.setCurrentValue(element);\n\t}\n}\n\nexport const appLayout = new AppLayoutSubscription();\n","import { Emitter } from '@rocket.chat/emitter';\nimport { Icon } from '@rocket.chat/fuselage';\nimport { ComponentProps } from 'react';\nimport { Subscription } from 'use-subscription';\n\nimport { UiKitBannerPayload } from '../../definition/UIKit';\n\nexport type LegacyBannerPayload = {\n\tid: string;\n\tclosable?: boolean;\n\ttitle?: string;\n\ttext?: string;\n\thtml?: string;\n\ticon?: ComponentProps<typeof Icon>['name'];\n\tmodifiers?: ('large' | 'danger')[];\n\ttimer?: number;\n\taction?: () => void;\n\tonClose?: () => void;\n};\n\ntype BannerPayload = LegacyBannerPayload | UiKitBannerPayload;\n\nexport const isLegacyPayload = (payload: BannerPayload): payload is LegacyBannerPayload => !('blocks' in payload);\n\nconst queue: BannerPayload[] = [];\nconst emitter = new Emitter<{\n\t'update': undefined;\n\t'update-first': undefined;\n}>();\n\nexport const firstSubscription: Subscription<BannerPayload | null> = {\n\tgetCurrentValue: () => queue[0] ?? null,\n\tsubscribe: (callback) => emitter.on('update-first', callback),\n};\n\nexport const open = (payload: BannerPayload): void => {\n\tlet index = queue.findIndex((_payload) => {\n\t\tif (isLegacyPayload(_payload)) {\n\t\t\treturn _payload.id === (payload as LegacyBannerPayload).id;\n\t\t}\n\t\treturn (_payload as UiKitBannerPayload).viewId === (payload as UiKitBannerPayload).viewId;\n\t});\n\n\tif (index === -1) {\n\t\tindex = queue.length;\n\t}\n\n\tqueue[index] = payload;\n\n\temitter.emit('update');\n\n\tif (index === 0) {\n\t\temitter.emit('update-first');\n\t}\n};\n\nexport const closeById = (id: string): void => {\n\tconst index = queue.findIndex((banner) => {\n\t\tif (!isLegacyPayload(banner)) {\n\t\t\treturn banner.viewId === id;\n\t\t}\n\t\treturn banner.id === id;\n\t});\n\n\tif (index < 0) {\n\t\treturn;\n\t}\n\n\tqueue.splice(index, 1);\n\temitter.emit('update');\n\tindex === 0 && emitter.emit('update-first');\n};\n\nexport const close = (): void => {\n\tqueue.shift();\n\temitter.emit('update');\n\temitter.emit('update-first');\n};\n\nexport const clear = (): void => {\n\tqueue.splice(0, queue.length);\n\temitter.emit('update');\n\temitter.emit('update-first');\n};\n","export const baseURI: string = ((): string => {\n\tif (document.baseURI) {\n\t\treturn document.baseURI;\n\t}\n\n\t// Should be exactly one tag:\n\t//   https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base\n\tconst base = document.getElementsByTagName('base');\n\n\t// Return location from BASE tag.\n\tif (base.length > 0) {\n\t\treturn base[0].href;\n\t}\n\n\t// Else use implementation of documentURI:\n\t//   http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-baseURI\n\treturn document.URL;\n})();\n","import { FlowRouter, Group, RouteOptions } from 'meteor/kadira:flow-router';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport { ComponentType, createElement, lazy, ReactNode } from 'react';\n\nimport { appLayout } from './appLayout';\nimport { createTemplateForComponent } from './portals/createTemplateForComponent';\n\ntype RouteRegister = {\n\t(\n\t\tpath: string,\n\t\toptions: RouteOptions & {\n\t\t\tlazyRouteComponent: () => Promise<{ default: ComponentType }>;\n\t\t\tprops?: Record<string, unknown>;\n\t\t\tready?: boolean;\n\t\t},\n\t): [register: () => void, unregister: () => void];\n\t(path: string, options: RouteOptions): void;\n};\n\nconst registerLazyComponentRoute = (\n\trouteGroup: Group,\n\timportRouter: () => Promise<{\n\t\tdefault: ComponentType<{\n\t\t\trenderRoute?: () => ReactNode;\n\t\t}>;\n\t}>,\n\tpath: string,\n\t{\n\t\tlazyRouteComponent,\n\t\tprops,\n\t\tready = true,\n\t\t...rest\n\t}: RouteOptions & {\n\t\tlazyRouteComponent: () => Promise<{ default: ComponentType }>;\n\t\tprops?: Record<string, unknown>;\n\t\tready?: boolean;\n\t},\n): [register: () => void, unregister: () => void] => {\n\tconst enabled = new ReactiveVar(ready ? true : undefined);\n\tlet computation: Tracker.Computation | undefined;\n\n\tconst handleEnter = (_context: unknown, _redirect: (pathDef: string) => void, stop: () => void): void => {\n\t\tconst _enabled = Tracker.nonreactive(() => enabled.get());\n\t\tif (_enabled === false) {\n\t\t\tstop();\n\t\t\treturn;\n\t\t}\n\n\t\tcomputation = Tracker.autorun(() => {\n\t\t\tconst _enabled = enabled.get();\n\n\t\t\tif (_enabled === false) {\n\t\t\t\tFlowRouter.go('/');\n\t\t\t}\n\t\t});\n\t};\n\n\tconst handleExit = (): void => {\n\t\tcomputation?.stop();\n\t};\n\n\tconst RouteComponent = lazy(lazyRouteComponent);\n\tconst renderRoute = (): ReactNode => createElement(RouteComponent, props);\n\n\trouteGroup.route(path, {\n\t\t...rest,\n\t\ttriggersEnter: [handleEnter, ...(rest.triggersEnter ?? [])],\n\t\ttriggersExit: [handleExit, ...(rest.triggersExit ?? [])],\n\t\taction() {\n\t\t\tconst center = createTemplateForComponent(\n\t\t\t\tTracker.nonreactive(() => FlowRouter.getRouteName()),\n\t\t\t\timportRouter,\n\t\t\t\t{\n\t\t\t\t\tattachment: 'at-parent',\n\t\t\t\t\tprops: () => ({ renderRoute }),\n\t\t\t\t},\n\t\t\t);\n\t\t\tappLayout.renderMainLayout({ center });\n\t\t},\n\t});\n\n\treturn [(): void => enabled.set(true), (): void => enabled.set(false)];\n};\n\nexport const createRouteGroup = (\n\tname: string,\n\tprefix: string,\n\timportRouter: () => Promise<{\n\t\tdefault: ComponentType<{\n\t\t\trenderRoute?: () => ReactNode;\n\t\t}>;\n\t}>,\n): RouteRegister => {\n\tconst routeGroup = FlowRouter.group({\n\t\tname,\n\t\tprefix,\n\t});\n\n\tfunction registerRoute(\n\t\tpath: string,\n\t\toptions: RouteOptions & {\n\t\t\tlazyRouteComponent: () => Promise<{ default: ComponentType }>;\n\t\t\tprops?: Record<string, unknown>;\n\t\t\tready?: boolean;\n\t\t},\n\t): [register: () => void, unregister: () => void];\n\tfunction registerRoute(path: string, options: RouteOptions): void;\n\tfunction registerRoute(\n\t\tpath: string,\n\t\toptions:\n\t\t\t| RouteOptions\n\t\t\t| (RouteOptions & {\n\t\t\t\t\tlazyRouteComponent: () => Promise<{ default: ComponentType }>;\n\t\t\t\t\tprops?: Record<string, unknown>;\n\t\t\t\t\tready?: boolean;\n\t\t\t  }),\n\t): [register: () => void, unregister: () => void] | void {\n\t\tif ('lazyRouteComponent' in options) {\n\t\t\treturn registerLazyComponentRoute(routeGroup, importRouter, path, options);\n\t\t}\n\n\t\trouteGroup.route(path, options);\n\t}\n\n\tregisterRoute('/', {\n\t\tname: `${name}-index`,\n\t\taction() {\n\t\t\tconst center = createTemplateForComponent(`${name}-index`, importRouter, {\n\t\t\t\tattachment: 'at-parent',\n\t\t\t});\n\t\t\tappLayout.renderMainLayout({ center });\n\t\t},\n\t});\n\n\treturn registerRoute;\n};\n","import type { Subscription } from 'use-subscription';\n\ntype SidebarItem = {\n\ti18nLabel: string;\n\thref?: string;\n\ticon?: string;\n\tpermissionGranted?: boolean | (() => boolean);\n};\n\nexport const createSidebarItems = (\n\tinitialItems: SidebarItem[] = [],\n): {\n\tregisterSidebarItem: (item: SidebarItem) => void;\n\tunregisterSidebarItem: (i18nLabel: SidebarItem['i18nLabel']) => void;\n\titemsSubscription: Subscription<SidebarItem[]>;\n} => {\n\tconst items = initialItems;\n\tlet updateCb: () => void = () => undefined;\n\n\tconst itemsSubscription: Subscription<SidebarItem[]> = {\n\t\tsubscribe: (cb) => {\n\t\t\tupdateCb = cb;\n\t\t\treturn (): void => {\n\t\t\t\tupdateCb = (): void => undefined;\n\t\t\t};\n\t\t},\n\t\tgetCurrentValue: () => items,\n\t};\n\n\tconst registerSidebarItem = (item: SidebarItem): void => {\n\t\titems.push(item);\n\t\tupdateCb();\n\t};\n\n\tconst unregisterSidebarItem = (i18nLabel: SidebarItem['i18nLabel']): void => {\n\t\tconst index = items.findIndex((item) => item.i18nLabel === i18nLabel);\n\t\tdelete items[index];\n\t\tupdateCb();\n\t};\n\n\treturn {\n\t\tregisterSidebarItem,\n\t\tunregisterSidebarItem,\n\t\titemsSubscription,\n\t};\n};\n","import { IUser } from '../../definition/IUser';\n\nexport const getUserDisplayName = (name: IUser['name'], username: IUser['username'], useRealName: boolean): string | undefined =>\n\tuseRealName ? name || username : username;\n","import { Emitter } from '@rocket.chat/emitter';\nimport { ComponentType } from 'react';\n\ntype ReactModalDescriptor<TProps extends {}> = {\n\tcomponent: ComponentType<TProps>;\n\tprops?: TProps;\n};\n\ntype ModalDescriptor = ReactModalDescriptor<{}> | null;\n\nclass ImperativeModalEmmiter extends Emitter<{ update: ModalDescriptor }> {\n\tupdate(descriptor: ModalDescriptor): void {\n\t\tthis.emit('update', descriptor);\n\t}\n\n\topen = <TProps extends {}>(descriptor: ReactModalDescriptor<TProps> | null): void => {\n\t\t// There are some TS shenanigans causing errors if this is not asserted\n\t\t// Since this method is for internal use only, it's ok to use this here\n\t\t// This will not affect prop types inference when using the method.\n\t\tthis.update(descriptor as ModalDescriptor);\n\t};\n\n\tclose = (): void => {\n\t\tthis.update(null);\n\t};\n}\n\nexport const imperativeModal = new ImperativeModalEmmiter();\n","import { DDPCommon } from 'meteor/ddp-common';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { APIClient } from '../../app/utils/client';\n\nconst bypassMethods: string[] = ['setUserStatus', 'logout'];\n\nfunction shouldBypass({ method, params }: Meteor.IDDPMessage): boolean {\n\tif (method === 'login' && params[0]?.resume) {\n\t\treturn true;\n\t}\n\n\tif (method.startsWith('UserPresence:') || bypassMethods.includes(method)) {\n\t\treturn true;\n\t}\n\n\tif (method.startsWith('stream-')) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nfunction wrapMeteorDDPCalls(): void {\n\tconst { _send } = Meteor.connection;\n\n\tMeteor.connection._send = function _DDPSendOverREST(message): void {\n\t\tif (message.msg !== 'method' || shouldBypass(message)) {\n\t\t\treturn _send.call(Meteor.connection, message);\n\t\t}\n\n\t\tconst endpoint = Tracker.nonreactive(() => (!Meteor.userId() ? 'method.callAnon' : 'method.call'));\n\n\t\tconst restParams = {\n\t\t\tmessage: DDPCommon.stringifyDDP({ ...message }),\n\t\t};\n\n\t\tconst processResult = (_message: any): void => {\n\t\t\tMeteor.connection._livedata_data({\n\t\t\t\tmsg: 'updated',\n\t\t\t\tmethods: [message.id],\n\t\t\t});\n\t\t\tMeteor.connection.onMessage(_message);\n\t\t};\n\n\t\tAPIClient.v1\n\t\t\t.post(`${endpoint}/${encodeURIComponent(message.method.replace(/\\//g, ':'))}`, restParams)\n\t\t\t.then(({ message: _message }) => {\n\t\t\t\tprocessResult(_message);\n\t\t\t\tif (message.method === 'login') {\n\t\t\t\t\tconst parsedMessage = DDPCommon.parseDDP(_message) as { result?: { token?: string } };\n\t\t\t\t\tif (parsedMessage.result?.token) {\n\t\t\t\t\t\tMeteor.loginWithToken(parsedMessage.result.token);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error(error);\n\t\t\t});\n\t};\n}\n\nwindow.USE_REST_FOR_DDP_CALLS && wrapMeteorDDPCalls();\n","import type { IMessage } from '../../definition/IMessage';\nimport { createAsyncTransformChain } from '../../lib/transforms';\n\nexport const onClientBeforeSendMessage = createAsyncTransformChain<IMessage>();\n","import type { IMessage } from '../../definition/IMessage';\nimport { createAsyncTransformChain } from '../../lib/transforms';\n\nexport const onClientMessageReceived = createAsyncTransformChain<IMessage>();\n","import { Emitter, EventHandlerOf } from '@rocket.chat/emitter';\nimport { Meteor } from 'meteor/meteor';\n\nimport { APIClient } from '../../app/utils/client';\nimport { IUser } from '../../definition/IUser';\nimport { UserStatus } from '../../definition/UserStatus';\n\nexport const STATUS_MAP = [UserStatus.OFFLINE, UserStatus.ONLINE, UserStatus.AWAY, UserStatus.BUSY];\n\ntype InternalEvents = {\n\tremove: IUser['_id'];\n\treset: undefined;\n\trestart: undefined;\n};\n\ntype ExternalEvents = {\n\t[key: string]: UserPresence | undefined;\n};\n\ntype Events = InternalEvents & ExternalEvents;\n\nconst emitter = new Emitter<Events>();\n\nconst store = new Map<string, UserPresence>();\n\nexport type UserPresence = Pick<IUser, '_id' | 'username' | 'name' | 'status' | 'utcOffset' | 'statusText' | 'avatarETag'>;\n\ntype UsersPresencePayload = {\n\tusers: UserPresence[];\n\tfull: boolean;\n};\n\nconst isUid = (eventType: keyof Events): eventType is UserPresence['_id'] =>\n\tBoolean(eventType) && typeof eventType === 'string' && !['reset', 'restart', 'remove'].includes(eventType);\n\nconst uids = new Set<UserPresence['_id']>();\n\nconst update: EventHandlerOf<ExternalEvents, string> = (update) => {\n\tif (update?._id) {\n\t\tstore.set(update._id, update);\n\t\tuids.delete(update._id);\n\t}\n};\n\nconst notify = (presence: UserPresence): void => {\n\tif (presence._id) {\n\t\tupdate(presence);\n\t\temitter.emit(presence._id, presence);\n\t}\n};\n\nconst getPresence = ((): ((uid: UserPresence['_id']) => void) => {\n\tlet timer: ReturnType<typeof setTimeout>;\n\n\tconst deletedUids = new Set<UserPresence['_id']>();\n\n\tconst fetch = (delay = 500): void => {\n\t\ttimer && clearTimeout(timer);\n\t\ttimer = setTimeout(async () => {\n\t\t\tconst currentUids = new Set(uids);\n\t\t\tuids.clear();\n\n\t\t\tconst ids = Array.from(currentUids);\n\t\t\tconst removed = Array.from(deletedUids);\n\n\t\t\tMeteor.subscribe('stream-user-presence', '', {\n\t\t\t\t...(ids.length > 0 && { added: Array.from(currentUids) }),\n\t\t\t\t...(removed.length && { removed: Array.from(deletedUids) }),\n\t\t\t});\n\n\t\t\tdeletedUids.clear();\n\n\t\t\tif (ids.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tconst params = {\n\t\t\t\t\tids: [...currentUids],\n\t\t\t\t};\n\n\t\t\t\tconst { users } = (await APIClient.v1.get('users.presence', params)) as UsersPresencePayload;\n\n\t\t\t\tusers.forEach((user) => {\n\t\t\t\t\tif (!store.has(user._id)) {\n\t\t\t\t\t\tnotify(user);\n\t\t\t\t\t}\n\t\t\t\t\tcurrentUids.delete(user._id);\n\t\t\t\t});\n\n\t\t\t\tcurrentUids.forEach((uid) => {\n\t\t\t\t\tnotify({ _id: uid, status: UserStatus.OFFLINE });\n\t\t\t\t});\n\n\t\t\t\tcurrentUids.clear();\n\t\t\t} catch {\n\t\t\t\tfetch(delay + delay);\n\t\t\t} finally {\n\t\t\t\tcurrentUids.forEach((item) => uids.add(item));\n\t\t\t}\n\t\t}, delay);\n\t};\n\n\tconst get = (uid: UserPresence['_id']): void => {\n\t\tuids.add(uid);\n\t\tfetch();\n\t};\n\tconst stop = (uid: UserPresence['_id']): void => {\n\t\tdeletedUids.add(uid);\n\t\tfetch();\n\t};\n\temitter.on('remove', (uid) => {\n\t\tif (emitter.has(uid)) {\n\t\t\treturn;\n\t\t}\n\n\t\tstore.delete(uid);\n\t\tstop(uid);\n\t});\n\n\temitter.on('reset', () => {\n\t\temitter\n\t\t\t.events()\n\t\t\t.filter(isUid)\n\t\t\t.forEach((uid) => {\n\t\t\t\temitter.emit(uid, undefined);\n\t\t\t});\n\t\temitter.once('restart', () => {\n\t\t\temitter.events().filter(isUid).forEach(get);\n\t\t});\n\t});\n\n\treturn get;\n})();\n\nconst listen = (uid: UserPresence['_id'], handler: EventHandlerOf<ExternalEvents, UserPresence['_id']> | (() => void)): void => {\n\tif (!uid) {\n\t\treturn;\n\t}\n\temitter.on(uid, handler);\n\n\tconst user = store.has(uid) && store.get(uid);\n\tif (user) {\n\t\treturn;\n\t}\n\n\tgetPresence(uid);\n};\n\nconst stop = (uid: UserPresence['_id'], handler: EventHandlerOf<ExternalEvents, UserPresence['_id']> | (() => void)): void => {\n\tsetTimeout(() => {\n\t\temitter.off(uid, handler);\n\t\temitter.emit('remove', uid);\n\t}, 5000);\n};\n\nconst reset = (): void => {\n\tstore.clear();\n\temitter.emit('reset');\n};\n\nconst restart = (): void => {\n\temitter.emit('restart');\n};\n\nconst get = async (uid: UserPresence['_id']): Promise<UserPresence | undefined> =>\n\tnew Promise((resolve) => {\n\t\tconst user = store.has(uid) && store.get(uid);\n\t\tif (user) {\n\t\t\treturn resolve(user);\n\t\t}\n\n\t\tconst callback: EventHandlerOf<ExternalEvents, UserPresence['_id']> = (args): void => {\n\t\t\tresolve(args);\n\t\t\tstop(uid, callback);\n\t\t};\n\t\tlisten(uid, callback);\n\t});\n\nexport const Presence = {\n\tlisten,\n\tstop,\n\treset,\n\trestart,\n\tnotify,\n\tstore,\n\tget,\n};\n","import { QueryClient } from 'react-query';\n\nexport const queryClient = new QueryClient();\n","import { Emitter } from '@rocket.chat/emitter';\n\nexport type ToastMessagePayload = {\n\ttype: 'success' | 'info' | 'warning' | 'error';\n\tmessage: string | Error;\n\ttitle?: string;\n\toptions?: object;\n};\n\nconst emitter = new Emitter<{\n\tnotify: ToastMessagePayload;\n}>();\n\nexport const dispatchToastMessage = (payload: ToastMessagePayload): void => {\n\t// TODO: buffer it if there is no subscriber\n\temitter.emit('notify', payload);\n};\n\nexport const subscribeToToastMessages = (callback: (payload: ToastMessagePayload) => void): (() => void) => emitter.on('notify', callback);\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\n\nimport { Users } from '../../app/models/client';\nimport { Notifications } from '../../app/notifications/client';\nimport { APIClient } from '../../app/utils/client';\nimport type { IUser, IUserDataEvent } from '../../definition/IUser';\nimport { Serialized } from '../../definition/Serialized';\n\nexport const isSyncReady = new ReactiveVar(false);\n\ntype RawUserData = Serialized<\n\tPick<\n\t\tIUser,\n\t\t| '_id'\n\t\t| 'type'\n\t\t| 'name'\n\t\t| 'username'\n\t\t| 'emails'\n\t\t| 'status'\n\t\t| 'statusDefault'\n\t\t| 'statusText'\n\t\t| 'statusConnection'\n\t\t| 'avatarOrigin'\n\t\t| 'utcOffset'\n\t\t| 'language'\n\t\t| 'settings'\n\t\t| 'roles'\n\t\t| 'active'\n\t\t| 'defaultRoom'\n\t\t| 'customFields'\n\t\t| 'statusLivechat'\n\t\t| 'oauth'\n\t\t| 'createdAt'\n\t\t| '_updatedAt'\n\t\t| 'avatarETag'\n\t>\n>;\n\nconst updateUser = (userData: IUser): void => {\n\tconst user: IUser = Users.findOne({ _id: userData._id });\n\n\tif (!user || !user._updatedAt || user._updatedAt.getTime() < userData._updatedAt.getTime()) {\n\t\tMeteor.users.upsert({ _id: userData._id }, userData);\n\t\treturn;\n\t}\n\n\t// delete data already on user's collection as those are newer\n\tObject.keys(user).forEach((key) => {\n\t\tdelete userData[key as keyof IUser];\n\t});\n\tMeteor.users.update({ _id: user._id }, { $set: userData });\n};\n\nlet cancel: undefined | (() => void);\nexport const synchronizeUserData = async (uid: Meteor.User['_id']): Promise<RawUserData | void> => {\n\tif (!uid) {\n\t\treturn;\n\t}\n\n\t// Remove data from any other user that we may have retained\n\tMeteor.users.remove({ _id: { $ne: uid } });\n\n\tcancel?.();\n\n\tcancel = await Notifications.onUser('userData', (data: IUserDataEvent) => {\n\t\tswitch (data.type) {\n\t\t\tcase 'inserted':\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\t\t\t\tconst { type, id, ...user } = data;\n\t\t\t\tMeteor.users.insert(user);\n\t\t\t\tbreak;\n\n\t\t\tcase 'updated':\n\t\t\t\tMeteor.users.upsert({ _id: uid }, { $set: data.diff, $unset: data.unset });\n\t\t\t\tbreak;\n\n\t\t\tcase 'removed':\n\t\t\t\tMeteor.users.remove({ _id: uid });\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tconst userData: RawUserData = await APIClient.v1.get('me');\n\tif (userData) {\n\t\tupdateUser({\n\t\t\t...userData,\n\t\t\tcreatedAt: new Date(userData.createdAt),\n\t\t\t_updatedAt: new Date(userData._updatedAt),\n\t\t});\n\t}\n\tisSyncReady.set(true);\n\n\treturn userData;\n};\n\nexport const removeLocalUserData = (): number => Meteor.users.remove({});\n","import { createContext, useCallback, useContext, useMemo } from 'react';\n\nimport type { IServerInfo } from '../../../definition/IServerInfo';\nimport type { Serialized } from '../../../definition/Serialized';\nimport type { Method, PathFor, OperationParams, MatchPathPattern, OperationResult, PathPattern } from '../../../definition/rest';\nimport { ServerMethodFunction, ServerMethodName, ServerMethodParameters, ServerMethodReturn, ServerMethods } from './methods';\n\ntype ServerContextValue = {\n\tinfo?: IServerInfo;\n\tabsoluteUrl: (path: string) => string;\n\tcallMethod?: <MethodName extends ServerMethodName>(\n\t\tmethodName: MethodName,\n\t\t...args: ServerMethodParameters<MethodName>\n\t) => Promise<ServerMethodReturn<MethodName>>;\n\tcallEndpoint: <TMethod extends Method, TPath extends PathFor<TMethod>>(\n\t\tmethod: TMethod,\n\t\tpath: TPath,\n\t\tparams: Serialized<OperationParams<TMethod, MatchPathPattern<TPath>>>,\n\t) => Promise<Serialized<OperationResult<TMethod, MatchPathPattern<TPath>>>>;\n\tuploadToEndpoint: (endpoint: string, params: any, formData: any) => Promise<void>;\n\tgetStream: (streamName: string, options?: {}) => <T>(eventName: string, callback: (data: T) => void) => () => void;\n};\n\nexport const ServerContext = createContext<ServerContextValue>({\n\tinfo: undefined,\n\tabsoluteUrl: (path) => path,\n\tcallEndpoint: () => {\n\t\tthrow new Error('not implemented');\n\t},\n\tuploadToEndpoint: async () => undefined,\n\tgetStream: () => () => (): void => undefined,\n});\n\nexport const useServerInformation = (): IServerInfo => {\n\tconst { info } = useContext(ServerContext);\n\tif (!info) {\n\t\tthrow new Error('useServerInformation: no info available');\n\t}\n\treturn info;\n};\n\nexport const useAbsoluteUrl = (): ((path: string) => string) => useContext(ServerContext).absoluteUrl;\n\nexport const useMethod = <MethodName extends keyof ServerMethods>(methodName: MethodName): ServerMethodFunction<MethodName> => {\n\tconst { callMethod } = useContext(ServerContext);\n\n\treturn useCallback(\n\t\t(...args: ServerMethodParameters<MethodName>) => {\n\t\t\tif (!callMethod) {\n\t\t\t\tthrow new Error(`cannot use useMethod(${methodName}) hook without a wrapping ServerContext`);\n\t\t\t}\n\n\t\t\treturn callMethod(methodName, ...args);\n\t\t},\n\t\t[callMethod, methodName],\n\t);\n};\n\ntype EndpointFunction<TMethod extends Method, TPathPattern extends PathPattern> = (\n\tparams: void extends OperationParams<TMethod, TPathPattern> ? void : Serialized<OperationParams<TMethod, TPathPattern>>,\n) => Promise<Serialized<OperationResult<TMethod, TPathPattern>>>;\n\nexport const useEndpoint = <TMethod extends Method, TPath extends PathFor<TMethod>>(\n\tmethod: TMethod,\n\tpath: TPath,\n): EndpointFunction<TMethod, MatchPathPattern<TPath>> => {\n\tconst { callEndpoint } = useContext(ServerContext);\n\n\treturn useCallback((params) => callEndpoint(method, path, params), [callEndpoint, path, method]);\n};\n\nexport const useUpload = (endpoint: string): ((params: any, formData: any) => Promise<void>) => {\n\tconst { uploadToEndpoint } = useContext(ServerContext);\n\treturn useCallback((params, formData: any) => uploadToEndpoint(endpoint, params, formData), [endpoint, uploadToEndpoint]);\n};\n\nexport const useStream = (streamName: string, options?: {}): (<T>(eventName: string, callback: (data: T) => void) => () => void) => {\n\tconst { getStream } = useContext(ServerContext);\n\treturn useMemo(() => getStream(streamName, options), [getStream, streamName, options]);\n};\n","export * from './ServerContext';\nexport * from './methods';\n","import { Emitter } from '@rocket.chat/emitter';\nimport { createContext, useContext, useMemo, useCallback } from 'react';\nimport { useSubscription, Subscription, Unsubscribe } from 'use-subscription';\n\nimport { IRole } from '../../definition/IUser';\n\ntype IRoles = { [_id: string]: IRole };\n\nexport class RoleStore extends Emitter<{\n\tchange: IRoles;\n}> {\n\troles: IRoles = {};\n}\n\nexport type AuthorizationContextValue = {\n\tqueryPermission(permission: string | Mongo.ObjectID, scope?: string | Mongo.ObjectID): Subscription<boolean>;\n\tqueryAtLeastOnePermission(permission: (string | Mongo.ObjectID)[], scope?: string | Mongo.ObjectID): Subscription<boolean>;\n\tqueryAllPermissions(permission: (string | Mongo.ObjectID)[], scope?: string | Mongo.ObjectID): Subscription<boolean>;\n\tqueryRole(role: string | Mongo.ObjectID): Subscription<boolean>;\n\troleStore: RoleStore;\n};\n\nexport const AuthorizationContext = createContext<AuthorizationContextValue>({\n\tqueryPermission: () => ({\n\t\tgetCurrentValue: (): boolean => false,\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n\tqueryAtLeastOnePermission: () => ({\n\t\tgetCurrentValue: (): boolean => false,\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n\tqueryAllPermissions: () => ({\n\t\tgetCurrentValue: (): boolean => false,\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n\tqueryRole: () => ({\n\t\tgetCurrentValue: (): boolean => false,\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n\troleStore: new RoleStore(),\n});\n\nexport const usePermission = (permission: string | Mongo.ObjectID, scope?: string | Mongo.ObjectID): boolean => {\n\tconst { queryPermission } = useContext(AuthorizationContext);\n\tconst subscription = useMemo(() => queryPermission(permission, scope), [queryPermission, permission, scope]);\n\treturn useSubscription(subscription);\n};\n\nexport const useAtLeastOnePermission = (permissions: (string | Mongo.ObjectID)[], scope?: string | Mongo.ObjectID): boolean => {\n\tconst { queryAtLeastOnePermission } = useContext(AuthorizationContext);\n\tconst subscription = useMemo(() => queryAtLeastOnePermission(permissions, scope), [queryAtLeastOnePermission, permissions, scope]);\n\treturn useSubscription(subscription);\n};\n\nexport const useAllPermissions = (permissions: (string | Mongo.ObjectID)[], scope?: string | Mongo.ObjectID): boolean => {\n\tconst { queryAllPermissions } = useContext(AuthorizationContext);\n\tconst subscription = useMemo(() => queryAllPermissions(permissions, scope), [queryAllPermissions, permissions, scope]);\n\treturn useSubscription(subscription);\n};\n\nexport const useRolesDescription = (): ((ids: Array<string>) => [string]) => {\n\tconst { roleStore } = useContext(AuthorizationContext);\n\n\tconst subscription = useMemo(\n\t\t() => ({\n\t\t\tgetCurrentValue: (): IRoles => roleStore.roles,\n\t\t\tsubscribe: (callback: () => void): (() => void) => {\n\t\t\t\troleStore.on('change', callback);\n\t\t\t\treturn (): void => {\n\t\t\t\t\troleStore.off('change', callback);\n\t\t\t\t};\n\t\t\t},\n\t\t}),\n\t\t[roleStore],\n\t);\n\n\tconst roles = useSubscription<IRoles>(subscription);\n\n\treturn useCallback((values) => values.map((role: string) => (roles[role] && roles[role].description) || role), [roles]) as (\n\t\tids: Array<string>,\n\t) => [string];\n};\n\nexport const useRole = (role: string | Mongo.ObjectID): boolean => {\n\tconst { queryRole } = useContext(AuthorizationContext);\n\tconst subscription = useMemo(() => queryRole(role), [queryRole, role]);\n\treturn useSubscription(subscription);\n};\n","import { createContext, useContext } from 'react';\n\nconst dummy = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQYV2Oora39DwAFaQJ3y3rKeAAAAABJRU5ErkJggg==';\n\ntype AvatarContextValue = {\n\tgetUserPathAvatar: (uid: string, etag?: string) => string;\n\tgetRoomPathAvatar: (...args: any) => string;\n};\nconst AvatarUrlContextValueDefault: AvatarContextValue = {\n\tgetUserPathAvatar: () => dummy,\n\tgetRoomPathAvatar: () => dummy,\n};\n\nexport const AvatarUrlContext = createContext<AvatarContextValue>(AvatarUrlContextValueDefault);\n\nexport const useRoomAvatarPath = (): ((uid: string, etag?: string) => string) => useContext(AvatarUrlContext).getRoomPathAvatar;\n\nexport const useUserAvatarPath = (): ((...args: any) => string) => useContext(AvatarUrlContext).getUserPathAvatar;\n","import { createContext, useContext } from 'react';\n\nexport type SizeLayout = {\n\tsidebar: string;\n\tcontextualBar: string;\n};\n\nexport type LayoutContextValue = {\n\tisEmbedded: boolean;\n\tshowTopNavbarEmbeddedLayout: boolean;\n\tisMobile: boolean;\n\tsidebar: any;\n\tsize: SizeLayout;\n\tcontextualBarExpanded: boolean;\n\tcontextualBarPosition: 'absolute' | 'relative' | 'fixed';\n};\n\nexport const LayoutContext = createContext<LayoutContextValue>({\n\tisEmbedded: false,\n\tshowTopNavbarEmbeddedLayout: false,\n\tisMobile: false,\n\tsidebar: {},\n\tsize: {\n\t\tsidebar: '380px',\n\t\tcontextualBar: '380px',\n\t},\n\tcontextualBarPosition: 'relative',\n\tcontextualBarExpanded: false,\n});\n\nexport const useLayout = (): LayoutContextValue => useContext(LayoutContext);\n","import { createContext, useContext, useMemo } from 'react';\nimport { useSubscription, Subscription } from 'use-subscription';\n\ntype RouteName = string;\n\ntype RouteParameters = Record<string, string>;\n\ntype QueryStringParameters = Record<string, string>;\n\ntype RouteGroupName = string;\n\nexport type RouterContextValue = {\n\tqueryRoutePath: (\n\t\tname: RouteName,\n\t\tparameters: RouteParameters | undefined,\n\t\tqueryStringParameters: QueryStringParameters | undefined,\n\t) => Subscription<string | undefined>;\n\tqueryRouteUrl: (\n\t\tname: RouteName,\n\t\tparameters: RouteParameters | undefined,\n\t\tqueryStringParameters: QueryStringParameters | undefined,\n\t) => Subscription<string | undefined>;\n\tpushRoute: (name: RouteName, parameters: RouteParameters | undefined, queryStringParameters: QueryStringParameters | undefined) => void;\n\treplaceRoute: (\n\t\tname: RouteName,\n\t\tparameters: RouteParameters | undefined,\n\t\tqueryStringParameters: QueryStringParameters | undefined,\n\t) => void;\n\tqueryRouteParameter: (name: string) => Subscription<string | undefined>;\n\tqueryQueryStringParameter: (name: string) => Subscription<string | undefined>;\n\tqueryCurrentRoute: () => Subscription<[RouteName?, RouteParameters?, QueryStringParameters?, RouteGroupName?]>;\n};\n\nexport const RouterContext = createContext<RouterContextValue>({\n\tqueryRoutePath: () => ({\n\t\tgetCurrentValue: (): undefined => undefined,\n\t\tsubscribe: () => (): void => undefined,\n\t}),\n\tqueryRouteUrl: () => ({\n\t\tgetCurrentValue: (): undefined => undefined,\n\t\tsubscribe: () => (): void => undefined,\n\t}),\n\tpushRoute: () => undefined,\n\treplaceRoute: () => undefined,\n\tqueryRouteParameter: () => ({\n\t\tgetCurrentValue: (): undefined => undefined,\n\t\tsubscribe: () => (): void => undefined,\n\t}),\n\tqueryQueryStringParameter: () => ({\n\t\tgetCurrentValue: (): undefined => undefined,\n\t\tsubscribe: () => (): void => undefined,\n\t}),\n\tqueryCurrentRoute: () => ({\n\t\tgetCurrentValue: (): [undefined, {}, {}, undefined] => [undefined, {}, {}, undefined],\n\t\tsubscribe: () => (): void => undefined,\n\t}),\n});\n\ntype Route = {\n\tgetPath: (parameters?: RouteParameters, queryStringParameters?: QueryStringParameters) => string | undefined;\n\tgetUrl: (parameters?: RouteParameters, queryStringParameters?: QueryStringParameters) => string | undefined;\n\tpush: (parameters?: RouteParameters, queryStringParameters?: QueryStringParameters) => void;\n\treplace: (parameters?: RouteParameters, queryStringParameters?: QueryStringParameters) => void;\n};\n\nexport const useRoute = (name: string): Route => {\n\tconst { queryRoutePath, queryRouteUrl, pushRoute, replaceRoute } = useContext(RouterContext);\n\n\treturn useMemo<Route>(\n\t\t() => ({\n\t\t\tgetPath: (parameters, queryStringParameters): string | undefined =>\n\t\t\t\tqueryRoutePath(name, parameters, queryStringParameters).getCurrentValue(),\n\t\t\tgetUrl: (parameters, queryStringParameters): ReturnType<Route['getUrl']> =>\n\t\t\t\tqueryRouteUrl(name, parameters, queryStringParameters).getCurrentValue(),\n\t\t\tpush: (parameters, queryStringParameters): ReturnType<Route['push']> => pushRoute(name, parameters, queryStringParameters),\n\t\t\treplace: (parameters, queryStringParameters): ReturnType<Route['replace']> => replaceRoute(name, parameters, queryStringParameters),\n\t\t}),\n\t\t[queryRoutePath, queryRouteUrl, name, pushRoute, replaceRoute],\n\t);\n};\n\nexport const useRoutePath = (\n\tname: string,\n\tparameters?: RouteParameters,\n\tqueryStringParameters?: QueryStringParameters,\n): string | undefined => {\n\tconst { queryRoutePath } = useContext(RouterContext);\n\n\treturn useSubscription(\n\t\tuseMemo(() => queryRoutePath(name, parameters, queryStringParameters), [queryRoutePath, name, parameters, queryStringParameters]),\n\t);\n};\n\nexport const useRouteUrl = (\n\tname: string,\n\tparameters?: RouteParameters,\n\tqueryStringParameters?: QueryStringParameters,\n): string | undefined => {\n\tconst { queryRouteUrl } = useContext(RouterContext);\n\n\treturn useSubscription(\n\t\tuseMemo(() => queryRouteUrl(name, parameters, queryStringParameters), [queryRouteUrl, name, parameters, queryStringParameters]),\n\t);\n};\n\nexport const useRouteParameter = (name: string): string | undefined => {\n\tconst { queryRouteParameter } = useContext(RouterContext);\n\n\treturn useSubscription(useMemo(() => queryRouteParameter(name), [queryRouteParameter, name]));\n};\n\nexport const useQueryStringParameter = (name: string): string | undefined => {\n\tconst { queryQueryStringParameter } = useContext(RouterContext);\n\n\treturn useSubscription(useMemo(() => queryQueryStringParameter(name), [queryQueryStringParameter, name]));\n};\n\nexport const useCurrentRoute = (): [RouteName?, RouteParameters?, QueryStringParameters?, RouteGroupName?] => {\n\tconst { queryCurrentRoute } = useContext(RouterContext);\n\n\treturn useSubscription(useMemo(() => queryCurrentRoute(), [queryCurrentRoute]));\n};\n","import { createContext, useCallback, useContext, useMemo } from 'react';\nimport { useSubscription, Subscription, Unsubscribe } from 'use-subscription';\n\nimport { SettingId, ISetting, GroupId, SectionName, TabId } from '../../definition/ISetting';\n\nexport type SettingsContextQuery = {\n\treadonly _id?: SettingId[];\n\treadonly group?: GroupId;\n\treadonly section?: SectionName;\n\treadonly tab?: TabId;\n};\n\nexport type SettingsContextValue = {\n\treadonly hasPrivateAccess: boolean;\n\treadonly isLoading: boolean;\n\treadonly querySetting: (_id: SettingId) => Subscription<ISetting | undefined>;\n\treadonly querySettings: (query: SettingsContextQuery) => Subscription<ISetting[]>;\n\treadonly dispatch: (changes: Partial<ISetting>[]) => Promise<void>;\n};\n\nexport const SettingsContext = createContext<SettingsContextValue>({\n\thasPrivateAccess: false,\n\tisLoading: false,\n\tquerySetting: () => ({\n\t\tgetCurrentValue: (): undefined => undefined,\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n\tquerySettings: () => ({\n\t\tgetCurrentValue: (): ISetting[] => [],\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n\tdispatch: async () => undefined,\n});\n\nexport const useIsPrivilegedSettingsContext = (): boolean => useContext(SettingsContext).hasPrivateAccess;\n\nexport const useIsSettingsContextLoading = (): boolean => useContext(SettingsContext).isLoading;\n\nexport const useSettingStructure = (_id: SettingId): ISetting | undefined => {\n\tconst { querySetting } = useContext(SettingsContext);\n\tconst subscription = useMemo(() => querySetting(_id), [querySetting, _id]);\n\treturn useSubscription(subscription);\n};\n\nexport const useSetting = (_id: SettingId): unknown | undefined => useSettingStructure(_id)?.value;\n\nexport const useSettings = (query?: SettingsContextQuery): ISetting[] => {\n\tconst { querySettings } = useContext(SettingsContext);\n\tconst subscription = useMemo(() => querySettings(query ?? {}), [querySettings, query]);\n\treturn useSubscription(subscription);\n};\n\nexport const useSettingsDispatch = (): ((changes: Partial<ISetting>[]) => Promise<void>) => useContext(SettingsContext).dispatch;\n\nexport const useSettingSetValue = <T extends ISetting['value']>(_id: SettingId): ((value: T) => Promise<void>) => {\n\tconst dispatch = useSettingsDispatch();\n\treturn useCallback((value: T) => dispatch([{ _id, value }]), [dispatch, _id]);\n};\n","import { createContext, useContext } from 'react';\n\ntype ToastMessagePayload = {\n\ttype: 'success' | 'info' | 'warning' | 'error';\n\tmessage: string | Error;\n\ttitle?: string;\n\toptions?: object;\n};\n\ntype ToastMessagesContextValue = {\n\tdispatch: (payload: ToastMessagePayload) => void;\n};\n\nexport const ToastMessagesContext = createContext<ToastMessagesContextValue>({\n\tdispatch: () => undefined,\n});\n\nexport const useToastMessageDispatch = (): ToastMessagesContextValue['dispatch'] => useContext(ToastMessagesContext).dispatch;\n","import { createContext, useContext } from 'react';\n\nimport type keys from '../../packages/rocketchat-i18n/i18n/en.i18n.json';\n\nexport type TranslationLanguage = {\n\tname: string;\n\ten: string;\n\tkey: string;\n};\n\nexport type TranslationKey = keyof typeof keys;\n\nexport type TranslationContextValue = {\n\tlanguages: TranslationLanguage[];\n\tlanguage: TranslationLanguage['key'];\n\tloadLanguage: (language: TranslationLanguage['key']) => Promise<void>;\n\ttranslate: {\n\t\t(key: TranslationKey, ...replaces: unknown[]): string;\n\t\thas: (key: TranslationKey) => boolean;\n\t};\n};\n\nexport const TranslationContext = createContext<TranslationContextValue>({\n\tlanguages: [\n\t\t{\n\t\t\tname: 'Default',\n\t\t\ten: 'Default',\n\t\t\tkey: '',\n\t\t},\n\t],\n\tlanguage: '',\n\tloadLanguage: async () => undefined,\n\ttranslate: Object.assign((key: string) => key, {\n\t\thas: () => true,\n\t}),\n});\n\nexport const useLanguages = (): TranslationContextValue['languages'] => useContext(TranslationContext).languages;\n\nexport const useLanguage = (): TranslationContextValue['language'] => useContext(TranslationContext).language;\n\nexport const useLoadLanguage = (): TranslationContextValue['loadLanguage'] => useContext(TranslationContext).loadLanguage;\n\nexport const useTranslation = (): TranslationContextValue['translate'] => useContext(TranslationContext).translate;\n","import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { FilterQuery } from 'mongodb';\nimport { createContext, useContext, useMemo } from 'react';\nimport { useSubscription, Subscription, Unsubscribe } from 'use-subscription';\n\nimport { IRoom } from '../../definition/IRoom';\nimport { ISubscription } from '../../definition/ISubscription';\nimport { IUser } from '../../definition/IUser';\nimport { useRoute } from './RouterContext';\n\ntype SubscriptionQuery =\n\t| {\n\t\t\trid: string | Mongo.ObjectID;\n\t  }\n\t| {\n\t\t\tname: string;\n\t  }\n\t| {\n\t\t\topen: boolean;\n\t  }\n\t| object;\n\ntype Fields = {\n\t[key: string]: boolean;\n};\n\ntype Sort = {\n\t[key: string]: -1 | 1 | number;\n};\n\ntype FindOptions = {\n\tfields?: Fields;\n\tsort?: Sort;\n};\n\ntype UserContextValue = {\n\tuserId: string | null;\n\tuser: IUser | null;\n\tloginWithPassword: (user: string | object, password: string) => Promise<void>;\n\tlogout: () => Promise<void>;\n\tqueryPreference: <T>(key: string | Mongo.ObjectID, defaultValue?: T) => Subscription<T | undefined>;\n\tquerySubscription: (query: FilterQuery<ISubscription>, fields?: Fields, sort?: Sort) => Subscription<ISubscription | undefined>;\n\tqueryRoom: (query: FilterQuery<IRoom>, fields?: Fields, sort?: Sort) => Subscription<IRoom | undefined>;\n\tquerySubscriptions: (query: SubscriptionQuery, options?: FindOptions) => Subscription<Array<ISubscription> | []>;\n};\n\nexport const UserContext = createContext<UserContextValue>({\n\tuserId: null,\n\tuser: null,\n\tloginWithPassword: async () => undefined,\n\tlogout: () => Promise.resolve(),\n\tqueryPreference: () => ({\n\t\tgetCurrentValue: (): undefined => undefined,\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n\tquerySubscription: () => ({\n\t\tgetCurrentValue: (): undefined => undefined,\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n\tqueryRoom: () => ({\n\t\tgetCurrentValue: (): undefined => undefined,\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n\tquerySubscriptions: () => ({\n\t\tgetCurrentValue: (): [] => [],\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n});\n\nexport const useUserId = (): string | null => useContext(UserContext).userId;\n\n// TODO: Use IUser instead\nexport const useUser = (): IUser | null => useContext(UserContext).user;\n\nexport const useLoginWithPassword = (): ((user: string | object, password: string) => Promise<void>) =>\n\tuseContext(UserContext).loginWithPassword;\n\nexport const useLogout = (): (() => void) => {\n\tconst router = useRoute('home');\n\tconst { logout } = useContext(UserContext);\n\n\tconst handleLogout = useMutableCallback(() => {\n\t\tlogout();\n\t\trouter.push({});\n\t});\n\n\treturn handleLogout;\n};\n\nexport const useUserPreference = <T>(key: string, defaultValue?: T): T | undefined => {\n\tconst { queryPreference } = useContext(UserContext);\n\tconst subscription = useMemo(() => queryPreference(key, defaultValue), [queryPreference, key, defaultValue]);\n\treturn useSubscription(subscription);\n};\n\nexport const useUserSubscription = (rid: string, fields?: Fields): ISubscription | undefined => {\n\tconst { querySubscription } = useContext(UserContext);\n\tconst subscription = useMemo(() => querySubscription({ rid }, fields), [querySubscription, rid, fields]);\n\treturn useSubscription(subscription);\n};\n\nexport const useUserRoom = (rid: string, fields?: Fields): IRoom | undefined => {\n\tconst { queryRoom } = useContext(UserContext);\n\tconst subscription = useMemo(() => queryRoom({ _id: rid }, fields), [queryRoom, rid, fields]);\n\treturn useSubscription(subscription);\n};\n\nexport const useUserSubscriptions = (query: SubscriptionQuery, options?: FindOptions): Array<ISubscription> | [] => {\n\tconst { querySubscriptions } = useContext(UserContext);\n\tconst subscription = useMemo(() => querySubscriptions(query, options), [querySubscriptions, query, options]);\n\treturn useSubscription(subscription);\n};\n\nexport const useUserSubscriptionByName = (name: string, fields: Fields, sort?: Sort): ISubscription | undefined => {\n\tconst { querySubscription } = useContext(UserContext);\n\tconst subscription = useMemo(() => querySubscription({ name }, fields, sort), [querySubscription, name, fields, sort]);\n\treturn useSubscription(subscription);\n};\n","import { useSafely } from '@rocket.chat/fuselage-hooks';\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { AsyncStatePhase, AsyncState, asyncState } from '../lib/asyncState';\n\ntype AsyncStateObject<T> = AsyncState<T> & {\n\tresolve: (value: T | ((prev: T | undefined) => T)) => void;\n\treject: (error: Error) => void;\n\treset: () => void;\n\tupdate: () => void;\n};\n\nexport const useAsyncState = <T>(initialValue?: T | (() => T)): AsyncStateObject<T> => {\n\tconst [state, setState] = useSafely(\n\t\tuseState<AsyncState<T>>(() => {\n\t\t\tif (typeof initialValue === 'undefined') {\n\t\t\t\treturn asyncState.loading<T>();\n\t\t\t}\n\n\t\t\treturn asyncState.resolved<T>(typeof initialValue === 'function' ? (initialValue as () => T)() : initialValue);\n\t\t}),\n\t);\n\n\tconst resolve = useCallback(\n\t\t(value: T | ((prev: T | undefined) => T)) => {\n\t\t\tsetState((state) => {\n\t\t\t\tif (typeof value === 'function') {\n\t\t\t\t\treturn asyncState.resolve(state, (value as (prev: T | undefined) => T)(state.value));\n\t\t\t\t}\n\n\t\t\t\treturn asyncState.resolve(state, value);\n\t\t\t});\n\t\t},\n\t\t[setState],\n\t);\n\n\tconst reject = useCallback(\n\t\t(error: Error) => {\n\t\t\tsetState((state) => asyncState.reject(state, error));\n\t\t},\n\t\t[setState],\n\t);\n\n\tconst update = useCallback(() => {\n\t\tsetState((state) => asyncState.update(state));\n\t}, [setState]);\n\n\tconst reset = useCallback(() => {\n\t\tsetState((state) => asyncState.reload(state));\n\t}, [setState]);\n\n\treturn useMemo(\n\t\t() => ({\n\t\t\t...state,\n\t\t\tresolve,\n\t\t\treject,\n\t\t\treset,\n\t\t\tupdate,\n\t\t}),\n\t\t[state, resolve, reject, reset, update],\n\t);\n};\n\nexport { AsyncStatePhase, AsyncState };\n","import { useCallback } from 'react';\n\nimport { Serialized } from '../../definition/Serialized';\nimport { MatchPathPattern, Method, OperationParams, OperationResult, PathFor } from '../../definition/rest';\nimport { useEndpoint } from '../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../contexts/ToastMessagesContext';\n\nexport const useEndpointActionExperimental = <TMethod extends Method, TPath extends PathFor<TMethod>>(\n\tmethod: TMethod,\n\tpath: TPath,\n\tsuccessMessage?: string,\n): ((\n\tparams: Serialized<OperationParams<TMethod, MatchPathPattern<TPath>>>,\n) => Promise<Serialized<OperationResult<TMethod, MatchPathPattern<TPath>>>>) => {\n\tconst sendData = useEndpoint(method, path);\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\treturn useCallback(\n\t\tasync (params) => {\n\t\t\ttry {\n\t\t\t\tconst data = await sendData(params);\n\n\t\t\t\tif (successMessage) {\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: successMessage });\n\t\t\t\t}\n\n\t\t\t\treturn data;\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t// return { success: false };\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t},\n\t\t[dispatchToastMessage, sendData, successMessage],\n\t);\n};\n","import { useCallback, useEffect } from 'react';\n\nimport { Serialized } from '../../definition/Serialized';\nimport { MatchPathPattern, OperationParams, OperationResult, PathFor } from '../../definition/rest';\nimport { useEndpoint } from '../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../contexts/ToastMessagesContext';\nimport { AsyncState, useAsyncState } from './useAsyncState';\n\nexport const useEndpointData = <TPath extends PathFor<'GET'>>(\n\tendpoint: TPath,\n\tparams: void extends OperationParams<'GET', MatchPathPattern<TPath>>\n\t\t? void\n\t\t: Serialized<OperationParams<'GET', MatchPathPattern<TPath>>> = undefined as void extends OperationParams<\n\t\t'GET',\n\t\tMatchPathPattern<TPath>\n\t>\n\t\t? void\n\t\t: Serialized<OperationParams<'GET', MatchPathPattern<TPath>>>,\n\tinitialValue?:\n\t\t| Serialized<OperationResult<'GET', MatchPathPattern<TPath>>>\n\t\t| (() => Serialized<OperationResult<'GET', MatchPathPattern<TPath>>>),\n): AsyncState<Serialized<OperationResult<'GET', MatchPathPattern<TPath>>>> & {\n\treload: () => void;\n} => {\n\tconst { resolve, reject, reset, ...state } = useAsyncState(initialValue);\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst getData = useEndpoint('GET', endpoint);\n\n\tconst fetchData = useCallback(() => {\n\t\treset();\n\t\tgetData(params)\n\t\t\t.then(resolve)\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error(error);\n\t\t\t\tdispatchToastMessage({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tmessage: error,\n\t\t\t\t});\n\t\t\t\treject(error);\n\t\t\t});\n\t}, [reset, getData, params, resolve, dispatchToastMessage, reject]);\n\n\tuseEffect(() => {\n\t\tfetchData();\n\t}, [fetchData]);\n\n\treturn {\n\t\t...state,\n\t\treload: fetchData,\n\t};\n};\n","import { capitalize } from '@rocket.chat/string-helpers';\nimport { useCallback, useReducer, useMemo, ChangeEvent } from 'react';\n\ntype Field = {\n\tname: string;\n\tcurrentValue: unknown;\n\tinitialValue: unknown;\n\tchanged: boolean;\n};\n\ntype FormState<Values extends Record<string, unknown>> = {\n\tfields: Field[];\n\tvalues: Values;\n\thasUnsavedChanges: boolean;\n};\n\ntype FormAction<Values extends Record<string, unknown>> = {\n\t(prevState: FormState<Values>): FormState<Values>;\n};\n\nconst reduceForm = <Values extends Record<string, unknown>>(state: FormState<Values>, action: FormAction<Values>): FormState<Values> =>\n\taction(state);\n\nconst initForm = <Values extends Record<string, unknown>>(initialValues: Values): FormState<Values> => {\n\tconst fields = [];\n\n\tfor (const [fieldName, initialValue] of Object.entries(initialValues)) {\n\t\tfields.push({\n\t\t\tname: fieldName,\n\t\t\tcurrentValue: initialValue,\n\t\t\tinitialValue,\n\t\t\tchanged: false,\n\t\t});\n\t}\n\n\treturn {\n\t\tfields,\n\t\tvalues: { ...initialValues },\n\t\thasUnsavedChanges: false,\n\t};\n};\n\nconst valueChanged =\n\t<Values extends Record<string, unknown>>(fieldName: string, newValue: unknown): FormAction<Values> =>\n\t(state: FormState<Values>): FormState<Values> => {\n\t\tlet { fields } = state;\n\t\tconst field = fields.find(({ name }) => name === fieldName);\n\n\t\tif (!field || field.currentValue === newValue) {\n\t\t\treturn state;\n\t\t}\n\n\t\tconst newField = {\n\t\t\t...field,\n\t\t\tcurrentValue: newValue,\n\t\t\tchanged: JSON.stringify(newValue) !== JSON.stringify(field.initialValue),\n\t\t};\n\n\t\tfields = state.fields.map((field) => {\n\t\t\tif (field.name === fieldName) {\n\t\t\t\treturn newField;\n\t\t\t}\n\n\t\t\treturn field;\n\t\t});\n\n\t\treturn {\n\t\t\t...state,\n\t\t\tfields,\n\t\t\tvalues: {\n\t\t\t\t...state.values,\n\t\t\t\t[newField.name]: newField.currentValue,\n\t\t\t},\n\t\t\thasUnsavedChanges: newField.changed || fields.some((field) => field.changed),\n\t\t};\n\t};\n\nconst formCommitted =\n\t<Values extends Record<string, unknown>>(): FormAction<Values> =>\n\t(state: FormState<Values>): FormState<Values> => ({\n\t\t...state,\n\t\tfields: state.fields.map((field) => ({\n\t\t\t...field,\n\t\t\tinitialValue: field.currentValue,\n\t\t\tchanged: false,\n\t\t})),\n\t\thasUnsavedChanges: false,\n\t});\n\nconst formReset =\n\t<Values extends Record<string, unknown>>(): FormAction<Values> =>\n\t(state: FormState<Values>): FormState<Values> => ({\n\t\t...state,\n\t\tfields: state.fields.map((field) => ({\n\t\t\t...field,\n\t\t\tcurrentValue: field.initialValue,\n\t\t\tchanged: false,\n\t\t})),\n\t\tvalues: state.fields.reduce(\n\t\t\t(values, field) => ({\n\t\t\t\t...values,\n\t\t\t\t[field.name]: field.initialValue,\n\t\t\t}),\n\t\t\t{} as Values,\n\t\t),\n\t\thasUnsavedChanges: false,\n\t});\n\nconst isChangeEvent = (x: any): x is ChangeEvent =>\n\t(typeof x === 'object' || typeof x === 'function') && typeof x?.currentTarget !== 'undefined';\n\nconst getValue = (eventOrValue: ChangeEvent | unknown): unknown => {\n\tif (!isChangeEvent(eventOrValue)) {\n\t\treturn eventOrValue;\n\t}\n\n\tconst target = eventOrValue.currentTarget;\n\n\tif (target instanceof HTMLTextAreaElement) {\n\t\treturn target.value;\n\t}\n\n\tif (target instanceof HTMLSelectElement) {\n\t\treturn target.value;\n\t}\n\n\tif (!(target instanceof HTMLInputElement)) {\n\t\treturn undefined;\n\t}\n\n\tif (target.type === 'checkbox' || target.type === 'radio') {\n\t\treturn target.checked;\n\t}\n\n\treturn target.value;\n};\n\n/**\n * @deprecated prefer react-hook-form's `useForm`\n */\nexport const useForm = <\n\tReducer extends (\n\t\tstate: FormState<Record<string, unknown>>,\n\t\taction: FormAction<Record<string, unknown>>,\n\t) => FormState<Record<string, unknown>>,\n>(\n\tinitialValues: Parameters<Reducer>[0]['values'],\n\tonChange: (...args: unknown[]) => void = (): void => undefined,\n): {\n\tvalues: Parameters<Reducer>[0]['values'];\n\thandlers: Record<string, (eventOrValue: ChangeEvent | unknown) => void>;\n\thasUnsavedChanges: boolean;\n\tcommit: () => void;\n\treset: () => void;\n} => {\n\tconst [state, dispatch] = useReducer(reduceForm, initialValues, initForm);\n\n\tconst commit = useCallback(() => {\n\t\tdispatch(formCommitted());\n\t}, []);\n\n\tconst reset = useCallback(() => {\n\t\tdispatch(formReset());\n\t}, []);\n\n\tconst handlers = useMemo<Record<string, (eventOrValue: ChangeEvent | unknown) => void>>(\n\t\t() =>\n\t\t\tstate.fields.reduce(\n\t\t\t\t(handlers, { name, initialValue }) => ({\n\t\t\t\t\t...handlers,\n\t\t\t\t\t[`handle${capitalize(name)}`]: (eventOrValue: ChangeEvent | unknown): void => {\n\t\t\t\t\t\tconst newValue = getValue(eventOrValue);\n\t\t\t\t\t\tdispatch(valueChanged(name, newValue));\n\t\t\t\t\t\tonChange({\n\t\t\t\t\t\t\tinitialValue,\n\t\t\t\t\t\t\tvalue: newValue,\n\t\t\t\t\t\t\tkey: name,\n\t\t\t\t\t\t\tvalues: state.values,\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\t{},\n\t\t\t),\n\t\t[onChange, state.fields, state.values],\n\t);\n\n\treturn {\n\t\thandlers,\n\t\tvalues: state.values,\n\t\thasUnsavedChanges: state.hasUnsavedChanges,\n\t\tcommit,\n\t\treset,\n\t};\n};\n","import moment from 'moment';\nimport { useCallback } from 'react';\n\nimport { useSetting } from '../contexts/SettingsContext';\nimport { useUserPreference } from '../contexts/UserContext';\n\nexport const useFormatDateAndTime = () => {\n\tconst clockMode = useUserPreference('clockMode', false);\n\tconst format = useSetting('Message_TimeAndDateFormat');\n\n\treturn useCallback(\n\t\t(time) => {\n\t\t\tswitch (clockMode) {\n\t\t\t\tcase 1:\n\t\t\t\t\treturn moment(time).format('MMMM D, Y h:mm A');\n\t\t\t\tcase 2:\n\t\t\t\t\treturn moment(time).format('MMMM D, Y H:mm');\n\t\t\t\tdefault:\n\t\t\t\t\treturn moment(time).format(format);\n\t\t\t}\n\t\t},\n\t\t[clockMode, format],\n\t);\n};\n","import { useCallback, useEffect } from 'react';\n\nimport { ServerMethods, useMethod } from '../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../contexts/ToastMessagesContext';\nimport { AsyncState, useAsyncState } from './useAsyncState';\n\nconst defaultArgs: unknown[] = [];\n\nexport const useMethodData = <T>(\n\tmethodName: keyof ServerMethods,\n\targs: any[] = defaultArgs,\n\tinitialValue?: T | (() => T),\n): AsyncState<T> & { reload: () => void } => {\n\tconst { resolve, reject, reset, ...state } = useAsyncState<T>(initialValue);\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst getData: (...args: unknown[]) => Promise<T> = useMethod(methodName);\n\n\tconst fetchData = useCallback(() => {\n\t\treset();\n\t\tgetData(...args)\n\t\t\t.then(resolve)\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error(error);\n\t\t\t\tdispatchToastMessage({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tmessage: error,\n\t\t\t\t});\n\t\t\t\treject(error);\n\t\t\t});\n\t}, [reset, getData, args, resolve, dispatchToastMessage, reject]);\n\n\tuseEffect(() => {\n\t\tfetchData();\n\t}, [fetchData]);\n\n\treturn {\n\t\t...state,\n\t\treload: fetchData,\n\t};\n};\n","import { Tracker } from 'meteor/tracker';\nimport { useMemo } from 'react';\nimport { Subscription, Unsubscribe, useSubscription } from 'use-subscription';\n\nexport const useReactiveValue = <T>(computeCurrentValue: () => T): T => {\n\tconst subscription: Subscription<T> = useMemo(() => {\n\t\tconst callbacks = new Set<Unsubscribe>();\n\n\t\tlet currentValue: T;\n\n\t\tconst computation = Tracker.autorun(() => {\n\t\t\tcurrentValue = computeCurrentValue();\n\t\t\tcallbacks.forEach((callback) => {\n\t\t\t\tcallback();\n\t\t\t});\n\t\t});\n\n\t\treturn {\n\t\t\tgetCurrentValue: (): T => currentValue,\n\t\t\tsubscribe: (callback): Unsubscribe => {\n\t\t\t\tcallbacks.add(callback);\n\n\t\t\t\treturn (): void => {\n\t\t\t\t\tcallbacks.delete(callback);\n\n\t\t\t\t\tif (callbacks.size === 0) {\n\t\t\t\t\t\tcomputation.stop();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\t\t};\n\t}, [computeCurrentValue]);\n\n\treturn useSubscription(subscription);\n};\n","import { IUser } from '../../definition/IUser';\nimport { useSetting } from '../contexts/SettingsContext';\nimport { getUserDisplayName } from '../lib/getUserDisplayName';\n\nexport const useUserDisplayName = ({ name, username }: Pick<IUser, 'name' | 'username'>): string | undefined => {\n\tconst useRealName = useSetting('UI_Use_Real_Name');\n\n\treturn getUserDisplayName(name, username, !!useRealName);\n};\n","import { Meteor } from 'meteor/meteor';\n\nimport { callbacks } from '../../../lib/callbacks';\nimport { fireGlobalEvent } from '../../lib/utils/fireGlobalEvent';\n\nMeteor.startup(() => {\n\tcallbacks.add('afterLogoutCleanUp', () => fireGlobalEvent('Custom_Script_On_Logout'), callbacks.priority.LOW, 'custom-script-on-logout');\n});\n","import './customScriptOnLogout';\n","import { useMemo, lazy, LazyExoticComponent, FC } from 'react';\n\nimport { usePermission } from '../../contexts/AuthorizationContext';\nimport { addAction } from '../../views/room/lib/Toolbox';\n\naddAction('export-messages', ({ room }) => {\n\tconst hasPermission = usePermission('mail-messages', room._id);\n\treturn useMemo(\n\t\t() =>\n\t\t\thasPermission\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\t\t\t\tid: 'export-messages',\n\t\t\t\t\t\tanonymous: true,\n\t\t\t\t\t\ttitle: 'Export_Messages',\n\t\t\t\t\t\ticon: 'mail',\n\t\t\t\t\t\ttemplate: lazy(() => import('../../views/room/contextualBar/ExportMessages')) as LazyExoticComponent<FC>,\n\t\t\t\t\t\tfull: true,\n\t\t\t\t\t\torder: 12,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[hasPermission],\n\t);\n});\n","import './exportMessages';\n","import './konchatNotifications';\nimport './updateAvatar';\nimport './usersNameChanged';\n","import { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport { Tracker } from 'meteor/tracker';\n\nimport { CachedChatSubscription } from '../../../app/models/client';\nimport { Notifications } from '../../../app/notifications/client';\nimport { readMessage } from '../../../app/ui-utils/client';\nimport { KonchatNotification } from '../../../app/ui/client';\nimport { getUserPreference } from '../../../app/utils/client';\nimport { IMessage } from '../../../definition/IMessage';\nimport { IRoom } from '../../../definition/IRoom';\nimport { ISubscription } from '../../../definition/ISubscription';\nimport { fireGlobalEvent } from '../../lib/utils/fireGlobalEvent';\nimport { isLayoutEmbedded } from '../../lib/utils/isLayoutEmbedded';\n\nconst notifyNewRoom = (sub: ISubscription): void => {\n\tif (Session.equals(`user_${Meteor.userId()}_status`, 'busy')) {\n\t\treturn;\n\t}\n\n\tif ((!FlowRouter.getParam('name') || FlowRouter.getParam('name') !== sub.name) && !sub.ls && sub.alert === true) {\n\t\tKonchatNotification.newRoom(sub.rid);\n\t}\n};\n\ntype NotificationEvent = {\n\ttitle: string;\n\ttext: string;\n\tduration: number;\n\tpayload: {\n\t\t_id: IMessage['_id'];\n\t\trid: IMessage['rid'];\n\t\ttmid: IMessage['_id'];\n\t\tsender: IMessage['u'];\n\t\ttype: IRoom['t'];\n\t\tname: IRoom['name'];\n\t\tmessage: {\n\t\t\tmsg: IMessage['msg'];\n\t\t\tt: string;\n\t\t};\n\t};\n};\n\nfunction notifyNewMessageAudio(rid: string): void {\n\tconst openedRoomId = Session.get('openedRoom');\n\n\t// This logic is duplicated in /client/startup/unread.coffee.\n\tconst hasFocus = readMessage.isEnable();\n\tconst messageIsInOpenedRoom = openedRoomId === rid;\n\tconst muteFocusedConversations = getUserPreference(Meteor.userId(), 'muteFocusedConversations');\n\n\tif (isLayoutEmbedded()) {\n\t\tif (!hasFocus && messageIsInOpenedRoom) {\n\t\t\t// Play a notification sound\n\t\t\tKonchatNotification.newMessage(rid);\n\t\t}\n\t} else if (!hasFocus || !messageIsInOpenedRoom || !muteFocusedConversations) {\n\t\t// Play a notification sound\n\t\tKonchatNotification.newMessage(rid);\n\t}\n}\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn;\n\t\t}\n\n\t\tNotifications.onUser('notification', (notification: NotificationEvent) => {\n\t\t\tlet openedRoomId = undefined;\n\t\t\tif (['channel', 'group', 'direct'].includes(FlowRouter.getRouteName())) {\n\t\t\t\topenedRoomId = Session.get('openedRoom');\n\t\t\t}\n\n\t\t\t// This logic is duplicated in /client/startup/unread.coffee.\n\t\t\tconst hasFocus = readMessage.isEnable();\n\t\t\tconst messageIsInOpenedRoom = openedRoomId === notification.payload.rid;\n\n\t\t\tfireGlobalEvent('notification', {\n\t\t\t\tnotification,\n\t\t\t\tfromOpenedRoom: messageIsInOpenedRoom,\n\t\t\t\thasFocus,\n\t\t\t});\n\n\t\t\tif (isLayoutEmbedded()) {\n\t\t\t\tif (!hasFocus && messageIsInOpenedRoom) {\n\t\t\t\t\t// Show a notification.\n\t\t\t\t\tKonchatNotification.showDesktop(notification);\n\t\t\t\t}\n\t\t\t} else if (!hasFocus || !messageIsInOpenedRoom) {\n\t\t\t\t// Show a notification.\n\t\t\t\tKonchatNotification.showDesktop(notification);\n\t\t\t}\n\n\t\t\tnotifyNewMessageAudio(notification.payload.rid);\n\t\t});\n\n\t\tCachedChatSubscription.onSyncData = ((action: 'changed' | 'removed', sub: ISubscription): void => {\n\t\t\tif (action !== 'removed') {\n\t\t\t\tnotifyNewRoom(sub);\n\t\t\t}\n\t\t}) as () => void;\n\n\t\tNotifications.onUser('subscriptions-changed', (_action: 'changed' | 'removed', sub: ISubscription) => {\n\t\t\tnotifyNewRoom(sub);\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { Notifications } from '../../../app/notifications/client';\nimport { IUser } from '../../../definition/IUser';\n\ntype UpdateAvatarEvent = {\n\tusername: IUser['username'];\n\tetag: IUser['avatarETag'];\n};\n\nMeteor.startup(() => {\n\tNotifications.onLogged('updateAvatar', (data: UpdateAvatarEvent) => {\n\t\tconst { username, etag } = data;\n\t\tusername && Meteor.users.update({ username }, { $set: { avatarETag: etag } });\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { Messages, RoomRoles, Subscriptions } from '../../../app/models/client';\nimport { Notifications } from '../../../app/notifications/client';\nimport { IUser } from '../../../definition/IUser';\n\ntype UsersNameChangedEvent = Partial<IUser>;\n\nMeteor.startup(() => {\n\tNotifications.onLogged('Users:NameChanged', ({ _id, name, username }: UsersNameChangedEvent) => {\n\t\tMessages.update(\n\t\t\t{\n\t\t\t\t'u._id': _id,\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\t'u.username': username,\n\t\t\t\t\t'u.name': name,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tmulti: true,\n\t\t\t},\n\t\t);\n\n\t\tMessages.update(\n\t\t\t{\n\t\t\t\tmentions: {\n\t\t\t\t\t$elemMatch: { _id },\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\t'mentions.$.username': username,\n\t\t\t\t\t'mentions.$.name': name,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tmulti: true,\n\t\t\t},\n\t\t);\n\n\t\tSubscriptions.update(\n\t\t\t{\n\t\t\t\tname: username,\n\t\t\t\tt: 'd',\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\tfname: name,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\n\t\tRoomRoles.update(\n\t\t\t{\n\t\t\t\t'u._id': _id,\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\t'u.name': name,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tmulti: true,\n\t\t\t},\n\t\t);\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../../app/settings/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst isEnabled = settings.get('AutoLinker') === true;\n\n\t\tif (!isEnabled) {\n\t\t\tcallbacks.remove('renderMessage', 'autolinker');\n\t\t\treturn;\n\t\t}\n\n\t\tconst options = {\n\t\t\tstripPrefix: settings.get('AutoLinker_StripPrefix'),\n\t\t\turls: {\n\t\t\t\tschemeMatches: settings.get('AutoLinker_Urls_Scheme'),\n\t\t\t\twwwMatches: settings.get('AutoLinker_Urls_www'),\n\t\t\t\ttldMatches: settings.get('AutoLinker_Urls_TLD'),\n\t\t\t},\n\t\t\temail: settings.get('AutoLinker_Email'),\n\t\t\tphone: settings.get('AutoLinker_Phone'),\n\t\t};\n\n\t\timport('../../../app/autolinker/client').then(({ createAutolinkerMessageRenderer }) => {\n\t\t\tconst renderMessage = createAutolinkerMessageRenderer(options);\n\t\t\tcallbacks.remove('renderMessage', 'autolinker');\n\t\t\tcallbacks.add('renderMessage', renderMessage, callbacks.priority.MEDIUM, 'autolinker');\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { hasPermission } from '../../../app/authorization/client';\nimport { settings } from '../../../app/settings/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst isEnabled = settings.get('AutoTranslate_Enabled') && hasPermission('auto-translate');\n\n\t\tif (!isEnabled) {\n\t\t\tcallbacks.remove('renderMessage', 'autotranslate');\n\t\t\treturn;\n\t\t}\n\n\t\timport('../../../app/autotranslate/client').then(({ createAutoTranslateMessageRenderer }) => {\n\t\t\tconst renderMessage = createAutoTranslateMessageRenderer();\n\t\t\tcallbacks.remove('renderMessage', 'autotranslate');\n\t\t\tcallbacks.add('renderMessage', renderMessage, callbacks.priority.HIGH - 3, 'autotranslate');\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { getUserPreference } from '../../../app/utils/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst isEnabled = getUserPreference(Meteor.userId(), 'useEmojis');\n\n\t\tif (!isEnabled) {\n\t\t\tcallbacks.remove('renderMessage', 'emoji');\n\t\t\treturn;\n\t\t}\n\n\t\timport('../../../app/emoji/client').then(({ createEmojiMessageRenderer }) => {\n\t\t\tconst renderMessage = createEmojiMessageRenderer();\n\t\t\tcallbacks.remove('renderMessage', 'emoji');\n\t\t\tcallbacks.add('renderMessage', renderMessage, callbacks.priority.LOW, 'emoji');\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../../app/settings/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst isEnabled = settings.get('HexColorPreview_Enabled') === true;\n\n\t\tif (!isEnabled) {\n\t\t\tcallbacks.remove('renderMessage', 'hexcolor');\n\t\t\treturn;\n\t\t}\n\n\t\timport('../../../app/colors/client').then(({ createHexColorPreviewMessageRenderer }) => {\n\t\t\tconst renderMessage = createHexColorPreviewMessageRenderer();\n\t\t\tcallbacks.remove('renderMessage', 'hexcolor');\n\t\t\tcallbacks.add('renderMessage', renderMessage, callbacks.priority.MEDIUM, 'hexcolor');\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { getUserPreference } from '../../../app/utils/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst highlights: (string | undefined)[] | undefined = getUserPreference(Meteor.userId(), 'highlights');\n\t\tconst isEnabled = highlights?.some((highlight) => highlight?.trim()) ?? false;\n\n\t\tif (!isEnabled) {\n\t\t\tcallbacks.remove('renderMessage', 'highlight-words');\n\t\t\treturn;\n\t\t}\n\n\t\tconst options = {\n\t\t\twordsToHighlight: highlights?.filter((highlight) => highlight?.trim()),\n\t\t};\n\n\t\timport('../../../app/highlight-words').then(({ createHighlightWordsMessageRenderer }) => {\n\t\t\tconst renderMessage = createHighlightWordsMessageRenderer(options);\n\t\t\tcallbacks.remove('renderMessage', 'highlight-words');\n\t\t\tcallbacks.add('renderMessage', renderMessage, callbacks.priority.MEDIUM + 1, 'highlight-words');\n\t\t});\n\t});\n});\n","import './autolinker';\nimport './autotranslate';\nimport './emoji';\nimport './hexcolor';\nimport './highlightWords';\nimport './issuelink';\nimport './katex';\nimport './markdown';\nimport './mentionsMessage';\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../../app/settings/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst isEnabled = settings.get('IssueLinks_Enabled');\n\n\t\tif (!isEnabled) {\n\t\t\tcallbacks.remove('renderMessage', 'issuelink');\n\t\t\treturn;\n\t\t}\n\n\t\tconst options = {\n\t\t\ttemplate: settings.get('IssueLinks_Template'),\n\t\t};\n\n\t\timport('../../../app/issuelinks/client').then(({ createIssueLinksMessageRenderer }) => {\n\t\t\tconst renderMessage = createIssueLinksMessageRenderer(options);\n\t\t\tcallbacks.remove('renderMessage', 'issuelink');\n\t\t\tcallbacks.add('renderMessage', renderMessage, callbacks.priority.MEDIUM, 'issuelink');\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../../app/settings/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst isEnabled = settings.get('Katex_Enabled');\n\n\t\tif (!isEnabled) {\n\t\t\tcallbacks.remove('renderMessage', 'katex');\n\t\t\treturn;\n\t\t}\n\n\t\tconst options = {\n\t\t\tdollarSyntax: settings.get('Katex_Dollar_Syntax'),\n\t\t\tparenthesisSyntax: settings.get('Katex_Parenthesis_Syntax'),\n\t\t};\n\n\t\timport('../../../app/katex/client').then(({ createKatexMessageRendering }) => {\n\t\t\tconst renderMessage = createKatexMessageRendering(options);\n\t\t\tcallbacks.remove('renderMessage', 'katex');\n\t\t\tcallbacks.add('renderMessage', renderMessage, callbacks.priority.HIGH + 1, 'katex');\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../../app/settings/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst options = {\n\t\t\tparser: settings.get('Markdown_Parser'),\n\t\t\tsupportSchemesForLink: settings.get('Markdown_SupportSchemesForLink'),\n\t\t\theaders: settings.get('Markdown_Headers'),\n\t\t\trootUrl: Meteor.absoluteUrl(),\n\t\t\tmarked: {\n\t\t\t\tgfm: settings.get('Markdown_Marked_GFM'),\n\t\t\t\ttables: settings.get('Markdown_Marked_Tables'),\n\t\t\t\tbreaks: settings.get('Markdown_Marked_Breaks'),\n\t\t\t\tpedantic: settings.get('Markdown_Marked_Pedantic'),\n\t\t\t\tsmartLists: settings.get('Markdown_Marked_SmartLists'),\n\t\t\t\tsmartypants: settings.get('Markdown_Marked_Smartypants'),\n\t\t\t},\n\t\t};\n\n\t\timport('../../../app/markdown/client').then(({ createMarkdownMessageRenderer }) => {\n\t\t\tconst renderMessage = createMarkdownMessageRenderer(options);\n\t\t\tcallbacks.remove('renderMessage', 'markdown');\n\t\t\tcallbacks.add('renderMessage', renderMessage, callbacks.priority.HIGH, 'markdown');\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { Users } from '../../../app/models/client';\nimport { settings } from '../../../app/settings/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst uid = Meteor.userId();\n\t\tconst options = {\n\t\t\tme: uid && (Users.findOne(uid, { fields: { username: 1 } }) || {}).username,\n\t\t\tpattern: settings.get('UTF8_User_Names_Validation'),\n\t\t\tuseRealName: settings.get('UI_Use_Real_Name'),\n\t\t};\n\n\t\timport('../../../app/mentions/client').then(({ createMentionsMessageRenderer }) => {\n\t\t\tconst renderMessage = createMentionsMessageRenderer(options);\n\t\t\tcallbacks.remove('renderMessage', 'mentions-message');\n\t\t\tcallbacks.add('renderMessage', renderMessage, callbacks.priority.MEDIUM, 'mentions-message');\n\t\t});\n\t});\n});\n","import './markdown';\n","import { Meteor } from 'meteor/meteor';\n\nimport { settings } from '../../../app/settings/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tconst options = {\n\t\tsupportSchemesForLink: settings.get('Markdown_SupportSchemesForLink'),\n\t};\n\n\timport('../../../app/markdown/client').then(({ createMarkdownNotificationRenderer }) => {\n\t\tconst renderNotification = createMarkdownNotificationRenderer(options);\n\t\tcallbacks.remove('renderNotification', 'filter-markdown');\n\t\tcallbacks.add('renderNotification', renderNotification, callbacks.priority.HIGH, 'filter-markdown');\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { hasPermission } from '../../../app/authorization/client';\nimport { settings } from '../../../app/settings/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst isEnabled = settings.get('AutoTranslate_Enabled') && hasPermission('auto-translate');\n\n\t\tif (!isEnabled) {\n\t\t\tcallbacks.remove('streamMessage', 'autotranslate-stream');\n\t\t\treturn;\n\t\t}\n\n\t\timport('../../../app/autotranslate/client').then(({ createAutoTranslateMessageStreamHandler }) => {\n\t\t\tconst streamMessage = createAutoTranslateMessageStreamHandler();\n\t\t\tcallbacks.remove('streamMessage', 'autotranslate-stream');\n\t\t\tcallbacks.add('streamMessage', streamMessage, callbacks.priority.HIGH - 3, 'autotranslate-stream');\n\t\t});\n\t});\n});\n","import './autotranslate';\n","import { Meteor } from 'meteor/meteor';\n\nimport { ChatMessage } from '../../app/models/client';\nimport { Notifications } from '../../app/notifications/client';\nimport { IUser } from '../../definition/IUser';\n\nMeteor.startup(() => {\n\tNotifications.onLogged('Users:Deleted', ({ userId }: { userId: IUser['_id'] }) => {\n\t\tChatMessage.remove({\n\t\t\t'u._id': userId,\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { baseURI } from '../lib/baseURI';\n\nMeteor.absoluteUrl.defaultOptions.rootUrl = baseURI;\n","import { Meteor } from 'meteor/meteor';\nimport React from 'react';\nimport { render } from 'react-dom';\n\nimport AppRoot from '../views/root/AppRoot';\n\nconst createContainer = (): Element => {\n\tconst container = document.getElementById('react-root');\n\n\tif (!container) {\n\t\tthrow new Error('could not find the element #react-root on DOM tree');\n\t}\n\n\tdocument.body.insertBefore(container, document.body.firstChild);\n\n\treturn container;\n};\n\nMeteor.startup(() => {\n\tconst container = createContainer();\n\trender(<AppRoot />, container);\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { Notifications } from '../../app/notifications/client';\nimport { APIClient } from '../../app/utils/client';\nimport { IBanner, BannerPlatform } from '../../definition/IBanner';\nimport { Serialized } from '../../definition/Serialized';\nimport * as banners from '../lib/banners';\n\nconst fetchInitialBanners = async (): Promise<void> => {\n\tconst response: Serialized<{\n\t\tbanners: IBanner[];\n\t}> = await APIClient.get('v1/banners', {\n\t\tplatform: BannerPlatform.Web,\n\t});\n\n\tfor (const banner of response.banners) {\n\t\tbanners.open({\n\t\t\t...banner.view,\n\t\t\tviewId: banner.view.viewId || banner._id,\n\t\t});\n\t}\n};\n\nconst handleBanner = async (event: { bannerId: string }): Promise<void> => {\n\tconst response: Serialized<{\n\t\tbanners: IBanner[];\n\t}> = await APIClient.get(`v1/banners/${event.bannerId}`, {\n\t\tplatform: BannerPlatform.Web,\n\t});\n\n\tif (!response.banners.length) {\n\t\treturn banners.closeById(event.bannerId);\n\t}\n\n\tfor (const banner of response.banners) {\n\t\tbanners.open({\n\t\t\t...banner.view,\n\t\t\tviewId: banner.view.viewId || banner._id,\n\t\t});\n\t}\n};\n\nconst watchBanners = (): (() => void) => {\n\tfetchInitialBanners();\n\n\tNotifications.onLogged('banner-changed', handleBanner);\n\n\treturn (): void => {\n\t\tNotifications.unLogged(handleBanner);\n\t\tbanners.clear();\n\t};\n};\n\nMeteor.startup(() => {\n\tlet unwatchBanners: () => void | undefined;\n\n\tTracker.autorun(() => {\n\t\tunwatchBanners?.();\n\n\t\tif (!Meteor.userId()) {\n\t\t\treturn;\n\t\t}\n\n\t\tunwatchBanners = Tracker.nonreactive(watchBanners);\n\t});\n});\n","import { performance } from 'universal-perf-hooks';\n\nimport { callbacks } from '../../lib/callbacks';\nimport { getConfig } from '../lib/utils/getConfig';\n\nif ([getConfig('debug'), getConfig('timed-callbacks')].includes('true')) {\n\tcallbacks.setMetricsTrackers({\n\t\ttrackCallback: ({ hook, id, stack }) => {\n\t\t\tconst start = performance.now();\n\n\t\t\treturn (): void => {\n\t\t\t\tconst end = performance.now();\n\t\t\t\tconsole.log(String(end - start), hook, id, stack?.split('\\n')?.[2]?.match(/\\(.+\\)/)?.[0]);\n\t\t\t};\n\t\t},\n\t\ttrackHook: ({ hook }) => {\n\t\t\tconst start = performance.now();\n\n\t\t\treturn (): void => {\n\t\t\t\tconst end = performance.now();\n\t\t\t\tconsole.log(`${hook}:`, end - start);\n\t\t\t};\n\t\t},\n\t});\n}\n","import { Meteor } from 'meteor/meteor';\nimport { ServiceConfiguration } from 'meteor/service-configuration';\n\nimport { CustomOAuth } from '../../app/custom-oauth/client/custom_oauth_client';\nimport { isOauthCustomConfiguration } from '../../definition/rest/v1/settings';\n\nMeteor.startup(() => {\n\tServiceConfiguration.configurations\n\t\t.find({\n\t\t\tcustom: true,\n\t\t})\n\t\t.observe({\n\t\t\tadded(record) {\n\t\t\t\tif (!isOauthCustomConfiguration(record)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tnew CustomOAuth(record.service, {\n\t\t\t\t\tserverURL: record.serverURL,\n\t\t\t\t\tauthorizePath: record.authorizePath,\n\t\t\t\t\tscope: record.scope,\n\t\t\t\t});\n\t\t\t},\n\t\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { Session } from 'meteor/session';\nimport { Tracker } from 'meteor/tracker';\n\nimport { applyCustomTranslations } from '../lib/utils/applyCustomTranslations';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\t// Re apply translations if tap language was changed\n\t\tSession.get(TAPi18n._loaded_lang_session_key);\n\t\tapplyCustomTranslations();\n\t});\n});\n","import { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { e2e } from '../../app/e2e/client/rocketchat.e2e';\nimport { Subscriptions, Rooms } from '../../app/models/client';\nimport { Notifications } from '../../app/notifications/client';\nimport { settings } from '../../app/settings/client';\nimport { IMessage } from '../../definition/IMessage';\nimport { IRoom } from '../../definition/IRoom';\nimport { ISubscription } from '../../definition/ISubscription';\nimport { onClientBeforeSendMessage } from '../lib/onClientBeforeSendMessage';\nimport { onClientMessageReceived } from '../lib/onClientMessageReceived';\nimport { isLayoutEmbedded } from '../lib/utils/isLayoutEmbedded';\nimport { waitUntilFind } from '../lib/utils/waitUntilFind';\n\nconst handle = async (roomId: IRoom['_id'], keyId: string): Promise<void> => {\n\tconst e2eRoom = await e2e.getInstanceByRoomId(roomId);\n\tif (!e2eRoom) {\n\t\treturn;\n\t}\n\n\te2eRoom.provideKeyToUser(keyId);\n};\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst adminEmbedded = isLayoutEmbedded() && FlowRouter.current().path.startsWith('/admin');\n\n\t\tif (!adminEmbedded && settings.get('E2E_Enable') && window.crypto) {\n\t\t\te2e.startClient();\n\t\t\te2e.enabled.set(true);\n\t\t} else {\n\t\t\te2e.enabled.set(false);\n\t\t\te2e.closeAlert();\n\t\t}\n\t});\n\n\tlet observable: Meteor.LiveQueryHandle | null = null;\n\tlet offClientMessageReceived: undefined | (() => void);\n\tlet offClientBeforeSendMessage: undefined | (() => void);\n\tTracker.autorun(() => {\n\t\tif (!e2e.isReady()) {\n\t\t\toffClientMessageReceived?.();\n\t\t\tNotifications.unUser('e2ekeyRequest', handle);\n\t\t\tobservable?.stop();\n\t\t\toffClientBeforeSendMessage?.();\n\t\t\treturn;\n\t\t}\n\n\t\tNotifications.onUser('e2ekeyRequest', handle);\n\n\t\tobservable = Subscriptions.find().observe({\n\t\t\tchanged: async (doc: ISubscription) => {\n\t\t\t\tif (!doc.encrypted && !doc.E2EKey) {\n\t\t\t\t\te2e.removeInstanceByRoomId(doc.rid);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst e2eRoom = await e2e.getInstanceByRoomId(doc.rid);\n\t\t\t\tif (!e2eRoom) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tdoc.encrypted ? e2eRoom.resume() : e2eRoom.pause();\n\n\t\t\t\t// Cover private groups and direct messages\n\t\t\t\tif (!e2eRoom.isSupportedRoomType(doc.t)) {\n\t\t\t\t\te2eRoom.disable();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (doc.E2EKey && e2eRoom.isWaitingKeys()) {\n\t\t\t\t\te2eRoom.keyReceived();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!e2eRoom.isReady()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\te2eRoom.decryptSubscription();\n\t\t\t},\n\t\t\tadded: async (doc: ISubscription) => {\n\t\t\t\tif (!doc.encrypted && !doc.E2EKey) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treturn e2e.getInstanceByRoomId(doc.rid);\n\t\t\t},\n\t\t\tremoved: (doc: ISubscription) => {\n\t\t\t\te2e.removeInstanceByRoomId(doc.rid);\n\t\t\t},\n\t\t});\n\n\t\toffClientMessageReceived = onClientMessageReceived.use(async (msg: IMessage) => {\n\t\t\tconst e2eRoom = await e2e.getInstanceByRoomId(msg.rid);\n\t\t\tif (!e2eRoom || !e2eRoom.shouldConvertReceivedMessages()) {\n\t\t\t\treturn msg;\n\t\t\t}\n\t\t\treturn e2e.decryptMessage(msg);\n\t\t});\n\n\t\t// Encrypt messages before sending\n\t\toffClientBeforeSendMessage = onClientBeforeSendMessage.use(async (message: IMessage) => {\n\t\t\tconst e2eRoom = await e2e.getInstanceByRoomId(message.rid);\n\n\t\t\tif (!e2eRoom) {\n\t\t\t\treturn message;\n\t\t\t}\n\n\t\t\tconst subscription = await waitUntilFind(() => Rooms.findOne({ _id: message.rid }));\n\n\t\t\tsubscription.encrypted ? e2eRoom.resume() : e2eRoom.pause();\n\n\t\t\tif (!(await e2eRoom.shouldConvertSentMessages())) {\n\t\t\t\treturn message;\n\t\t\t}\n\n\t\t\t// Should encrypt this message.\n\t\t\tconst msg = await e2eRoom.encrypt(message);\n\n\t\t\tmessage.msg = msg;\n\t\t\tmessage.t = 'e2e';\n\t\t\tmessage.e2e = 'pending';\n\t\t\treturn message;\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { Session } from 'meteor/session';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../app/settings/client';\nimport { dispatchToastMessage } from '../lib/toast';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst user = Meteor.user();\n\t\tif (\n\t\t\tuser?.emails?.[0] &&\n\t\t\tuser.emails[0].verified !== true &&\n\t\t\tsettings.get('Accounts_EmailVerification') === true &&\n\t\t\t!Session.get('Accounts_EmailVerification_Warning')\n\t\t) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'warning',\n\t\t\t\tmessage: TAPi18n.__('You_have_not_verified_your_email'),\n\t\t\t});\n\t\t\tSession.set('Accounts_EmailVerification_Warning', true);\n\t\t}\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { Tracker } from 'meteor/tracker';\nimport moment from 'moment';\n\nimport { Users } from '../../app/models/client';\nimport { settings } from '../../app/settings/client';\nimport { isRtl } from '../../app/utils/client';\nimport { filterLanguage } from '../lib/utils/filterLanguage';\n\nconst currentLanguage = new ReactiveVar<string | null>(null);\n\nMeteor.startup(() => {\n\t// eslint-disable-next-line @typescript-eslint/camelcase\n\tTAPi18n.conf.i18n_files_route = Meteor._relativeToSiteRootUrl('/tap-i18n');\n\tcurrentLanguage.set(Meteor._localStorage.getItem('userLanguage'));\n\n\tconst availableLanguages = TAPi18n.getLanguages();\n\n\tconst getBrowserLanguage = (): string => filterLanguage(window.navigator.userLanguage ?? window.navigator.language);\n\n\tconst loadMomentLocale = (language: string): Promise<string> =>\n\t\tnew Promise((resolve, reject) => {\n\t\t\tif (moment.locales().includes(language.toLowerCase())) {\n\t\t\t\tresolve(language);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tMeteor.call('loadLocale', language, (error: unknown, localeSrc: string) => {\n\t\t\t\tif (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tFunction(localeSrc).call({ moment });\n\t\t\t\tresolve(language);\n\t\t\t});\n\t\t});\n\n\tconst applyLanguage = (language: string | undefined = 'en'): void => {\n\t\tlanguage = filterLanguage(language);\n\n\t\tif (!availableLanguages[language]) {\n\t\t\tlanguage = language.split('-').shift();\n\t\t}\n\n\t\tif (!language) {\n\t\t\treturn;\n\t\t}\n\t\tdocument.documentElement.classList[isRtl(language) ? 'add' : 'remove']('rtl');\n\t\tdocument.documentElement.setAttribute('dir', isRtl(language) ? 'rtl' : 'ltr');\n\t\tdocument.documentElement.lang = language;\n\n\t\tTAPi18n.setLanguage(language);\n\t\tloadMomentLocale(language)\n\t\t\t.then((locale) => moment.locale(locale))\n\t\t\t.catch((error) => {\n\t\t\t\tmoment.locale('en');\n\t\t\t\tconsole.error('Error loading moment locale:', error);\n\t\t\t});\n\t};\n\n\tconst setLanguage = (language: string): void => {\n\t\tconst lang = filterLanguage(language);\n\t\tcurrentLanguage.set(lang);\n\t\tMeteor._localStorage.setItem('userLanguage', lang);\n\t};\n\twindow.setLanguage = setLanguage;\n\n\tconst defaultUserLanguage = (): string => settings.get('Language') || getBrowserLanguage() || 'en';\n\twindow.defaultUserLanguage = defaultUserLanguage;\n\n\tTracker.autorun(() => {\n\t\tconst user = Users.findOne(Meteor.userId(), { fields: { language: 1 } });\n\n\t\tsetLanguage(user?.language || defaultUserLanguage());\n\t});\n\n\tTracker.autorun(() => {\n\t\tconst language = currentLanguage.get();\n\t\tif (language) {\n\t\t\tapplyLanguage(language);\n\t\t}\n\t});\n});\n","import './absoluteUrl';\nimport './afterLogoutCleanUp';\nimport './appRoot';\nimport './banners';\nimport './callbacks';\nimport './contextualBar';\nimport './customOAuth';\nimport './customTranslations';\nimport './e2e';\nimport './emailVerification';\nimport './i18n';\nimport './ldap';\nimport './loginViaQuery';\nimport './messageTypes';\nimport './notifications';\nimport './oauth';\nimport './readReceipt';\nimport './renderMessage';\nimport './renderNotification';\nimport './roomObserve';\nimport './rootUrlChange';\nimport './routes';\nimport './setupWizard';\nimport './slashCommands';\nimport './startup';\nimport './streamMessage';\nimport './theme';\nimport './unread';\nimport './UserDeleted';\nimport './userRoles';\nimport './userSetUtcOffset';\nimport './usersObserve';\nimport './userStatusManuallySet';\n","import { Accounts } from 'meteor/accounts-base';\nimport { Meteor } from 'meteor/meteor';\n\n(Meteor as any).loginWithLDAP = function (username: string, password: string, callback?: (err?: any) => void): void {\n\tAccounts.callLoginMethod({\n\t\tmethodArguments: [\n\t\t\t{\n\t\t\t\tldap: true,\n\t\t\t\tusername,\n\t\t\t\tldapPass: password,\n\t\t\t\tldapOptions: {},\n\t\t\t},\n\t\t],\n\t\tuserCallback: callback,\n\t});\n};\n","import { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nMeteor.startup(() => {\n\tTracker.afterFlush(() => {\n\t\tconst resumeToken = FlowRouter.getQueryParam('resumeToken');\n\t\tif (!resumeToken) {\n\t\t\treturn;\n\t\t}\n\n\t\tMeteor.loginWithToken(resumeToken, () => {\n\t\t\tif (FlowRouter.getRouteName()) {\n\t\t\t\tFlowRouter.setQueryParams({ resumeToken: null, userId: null });\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tFlowRouter.go('/home');\n\t\t});\n\t});\n});\n","import { escapeHTML } from '@rocket.chat/string-helpers';\nimport { Meteor } from 'meteor/meteor';\n\nimport { MessageTypes } from '../../app/ui-utils/client';\nimport { t } from '../../app/utils/client';\nimport { IMessage } from '../../definition/IMessage';\n\nMeteor.startup(() => {\n\tMessageTypes.registerType({\n\t\tid: 'room_changed_privacy',\n\t\tsystem: true,\n\t\tmessage: 'room_changed_privacy',\n\t\tdata(message: IMessage) {\n\t\t\treturn {\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\tuser_by: message.u && message.u.username,\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\troom_type: t(message.msg),\n\t\t\t};\n\t\t},\n\t});\n\n\tMessageTypes.registerType({\n\t\tid: 'room_changed_topic',\n\t\tsystem: true,\n\t\tmessage: 'room_changed_topic',\n\t\tdata(message: IMessage) {\n\t\t\treturn {\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\tuser_by: message.u && message.u.username,\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\troom_topic: escapeHTML(message.msg || `(${t('None').toLowerCase()})`),\n\t\t\t};\n\t\t},\n\t});\n\n\tMessageTypes.registerType({\n\t\tid: 'room_changed_avatar',\n\t\tsystem: true,\n\t\tmessage: 'room_changed_avatar',\n\t\tdata(message: IMessage) {\n\t\t\treturn {\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\tuser_by: message.u && message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\n\tMessageTypes.registerType({\n\t\tid: 'room_changed_announcement',\n\t\tsystem: true,\n\t\tmessage: 'room_changed_announcement',\n\t\tdata(message: IMessage) {\n\t\t\treturn {\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\tuser_by: message.u && message.u.username,\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\troom_announcement: escapeHTML(message.msg || `(${t('None').toLowerCase()})`),\n\t\t\t};\n\t\t},\n\t});\n\n\tMessageTypes.registerType({\n\t\tid: 'room_changed_description',\n\t\tsystem: true,\n\t\tmessage: 'room_changed_description',\n\t\tdata(message: IMessage) {\n\t\t\treturn {\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\tuser_by: message.u && message.u.username,\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\troom_description: escapeHTML(message.msg || `(${t('None').toLowerCase()})`),\n\t\t\t};\n\t\t},\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\n// @ts-ignore #ToDo: Add definitions for meteor/oauth\nimport { OAuth } from 'meteor/oauth';\n\n// OAuth._retrieveCredentialSecret is a meteor method modified to also check the global localStorage\n// This was necessary because of the \"Forget User Session on Window Close\" setting.\n// The setting changes Meteor._localStorage to use the browser's session storage instead, but that doesn't happen on the Oauth's popup code.\n\nMeteor.startup(() => {\n\tconst meteorOAuthRetrieveCredentialSecret = OAuth._retrieveCredentialSecret;\n\tOAuth._retrieveCredentialSecret = (credentialToken: string): string | undefined => {\n\t\tlet secret = meteorOAuthRetrieveCredentialSecret.call(OAuth, credentialToken);\n\t\tif (!secret) {\n\t\t\tconst localStorageKey = `${OAuth._storageTokenPrefix}${credentialToken}`;\n\t\t\tsecret = localStorage.getItem(localStorageKey);\n\t\t\tlocalStorage.removeItem(localStorageKey);\n\t\t}\n\n\t\treturn secret;\n\t};\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../app/settings/client';\nimport { MessageAction, messageArgs } from '../../app/ui-utils/client';\nimport { imperativeModal } from '../lib/imperativeModal';\nimport ReadReceiptsModal from '../views/room/modals/ReadReceiptsModal';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst enabled = settings.get('Message_Read_Receipt_Store_Users');\n\n\t\tif (!enabled) {\n\t\t\treturn MessageAction.removeButton('receipt-detail');\n\t\t}\n\n\t\tMessageAction.addButton({\n\t\t\tid: 'receipt-detail',\n\t\t\ticon: 'info-circled',\n\t\t\tlabel: 'Info',\n\t\t\tcontext: ['starred', 'message', 'message-mobile', 'threads'],\n\t\t\taction() {\n\t\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\t\timperativeModal.open({\n\t\t\t\t\tcomponent: ReadReceiptsModal,\n\t\t\t\t\tprops: { messageId: message._id, onClose: imperativeModal.close },\n\t\t\t\t});\n\t\t\t},\n\t\t\torder: 10,\n\t\t\tgroup: 'menu',\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport { ChatRoom } from '../../app/models/client';\n\nMeteor.startup(() => {\n\tChatRoom.find().observe({\n\t\tadded(data) {\n\t\t\tSession.set(`roomData${data._id}`, data);\n\t\t},\n\t\tchanged(data) {\n\t\t\tSession.set(`roomData${data._id}`, data);\n\t\t},\n\t\tremoved(data) {\n\t\t\tSession.set(`roomData${data._id}`, undefined);\n\t\t},\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { hasRole } from '../../app/authorization/client';\nimport { Roles } from '../../app/models/client';\nimport { settings } from '../../app/settings/client';\nimport { t } from '../../app/utils/client';\nimport UrlChangeModal from '../components/UrlChangeModal';\nimport { imperativeModal } from '../lib/imperativeModal';\nimport { dispatchToastMessage } from '../lib/toast';\nimport { isSyncReady } from '../lib/userData';\n\nMeteor.startup(() => {\n\tTracker.autorun((c) => {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Roles.ready.get() || !isSyncReady.get()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (hasRole(Meteor.userId(), 'admin') === false) {\n\t\t\treturn c.stop();\n\t\t}\n\n\t\tconst siteUrl = settings.get('Site_Url');\n\t\tif (!siteUrl) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst currentUrl = location.origin + window.__meteor_runtime_config__.ROOT_URL_PATH_PREFIX;\n\t\tif (window.__meteor_runtime_config__.ROOT_URL.replace(/\\/$/, '') !== currentUrl) {\n\t\t\tconst confirm = (): void => {\n\t\t\t\timperativeModal.close();\n\t\t\t\tMeteor.call('saveSetting', 'Site_Url', currentUrl, () => {\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Saved') });\n\t\t\t\t});\n\t\t\t};\n\t\t\timperativeModal.open({\n\t\t\t\tcomponent: UrlChangeModal,\n\t\t\t\tprops: {\n\t\t\t\t\tonConfirm: confirm,\n\t\t\t\t\tsiteUrl,\n\t\t\t\t\tcurrentUrl,\n\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst documentDomain = settings.get('Document_Domain');\n\t\tif (documentDomain) {\n\t\t\twindow.document.domain = documentDomain;\n\t\t}\n\n\t\treturn c.stop();\n\t});\n});\n","import { Accounts } from 'meteor/accounts-base';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Meteor } from 'meteor/meteor';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { Session } from 'meteor/session';\nimport { Tracker } from 'meteor/tracker';\nimport React, { lazy } from 'react';\nimport toastr from 'toastr';\n\nimport { KonchatNotification } from '../../app/ui/client';\nimport { APIClient } from '../../app/utils/client';\nimport { IUser } from '../../definition/IUser';\nimport { appLayout } from '../lib/appLayout';\nimport { createTemplateForComponent } from '../lib/portals/createTemplateForComponent';\nimport { dispatchToastMessage } from '../lib/toast';\nimport { handleError } from '../lib/utils/handleError';\n\nconst InvitePage = lazy(() => import('../views/invite/InvitePage'));\nconst SecretURLPage = lazy(() => import('../views/invite/SecretURLPage'));\nconst CMSPage = lazy(() => import('../views/root/CMSPage'));\nconst ResetPasswordPage = lazy(() => import('../views/login/ResetPassword/ResetPassword'));\nconst SetupWizardRoute = lazy(() => import('../views/setupWizard/SetupWizardRoute'));\nconst MailerUnsubscriptionPage = lazy(() => import('../views/mailer/MailerUnsubscriptionPage'));\nconst NotFoundPage = lazy(() => import('../views/notFound/NotFoundPage'));\nconst MeetPage = lazy(() => import('../views/meet/MeetPage'));\n\nFlowRouter.wait();\n\nFlowRouter.route('/', {\n\tname: 'index',\n\taction() {\n\t\tappLayout.renderMainLayout({ center: 'loading' });\n\t\tif (!Meteor.userId()) {\n\t\t\treturn FlowRouter.go('home');\n\t\t}\n\n\t\tTracker.autorun((c) => {\n\t\t\tif (FlowRouter.subsReady() === true) {\n\t\t\t\tMeteor.defer(() => {\n\t\t\t\t\tconst user = Meteor.user() as IUser | null;\n\t\t\t\t\tif (user?.defaultRoom) {\n\t\t\t\t\t\tconst room = user.defaultRoom.split('/');\n\t\t\t\t\t\tFlowRouter.go(room[0], { name: room[1] }, FlowRouter.current().queryParams);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tFlowRouter.go('home');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tc.stop();\n\t\t\t}\n\t\t});\n\t},\n});\n\nFlowRouter.route('/login', {\n\tname: 'login',\n\n\taction() {\n\t\tFlowRouter.go('home');\n\t},\n});\n\nFlowRouter.route('/meet/:rid', {\n\tname: 'meet',\n\n\tasync action(_params, queryParams) {\n\t\tif (queryParams?.token !== undefined) {\n\t\t\t// visitor login\n\t\t\tconst visitor = await APIClient.v1.get(`livechat/visitor/${queryParams?.token}`);\n\t\t\tif (visitor?.visitor) {\n\t\t\t\tappLayout.render(<MeetPage />);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttoastr.error(TAPi18n.__('Visitor_does_not_exist'));\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Meteor.userId()) {\n\t\t\tFlowRouter.go('home');\n\t\t\treturn;\n\t\t}\n\n\t\tappLayout.render(<MeetPage />);\n\t},\n});\n\nFlowRouter.route('/home', {\n\tname: 'home',\n\n\taction(_params, queryParams) {\n\t\tKonchatNotification.getDesktopPermission();\n\t\tif (queryParams?.saml_idp_credentialToken !== undefined) {\n\t\t\tconst token = queryParams.saml_idp_credentialToken;\n\t\t\tFlowRouter.setQueryParams({\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\tsaml_idp_credentialToken: null,\n\t\t\t});\n\t\t\t(Meteor as any).loginWithSamlToken(token, (error?: any) => {\n\t\t\t\tif (error) {\n\t\t\t\t\tif (error.reason) {\n\t\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error.reason });\n\t\t\t\t\t} else {\n\t\t\t\t\t\thandleError(error);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tappLayout.renderMainLayout({ center: 'home' });\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tappLayout.renderMainLayout({ center: 'home' });\n\t},\n});\n\nFlowRouter.route('/directory/:tab?', {\n\tname: 'directory',\n\taction: () => {\n\t\tconst DirectoryPage = createTemplateForComponent('DirectoryPage', () => import('../views/directory/DirectoryPage'), {\n\t\t\tattachment: 'at-parent',\n\t\t});\n\t\tappLayout.renderMainLayout({ center: DirectoryPage });\n\t},\n});\n\nFlowRouter.route('/omnichannel-directory/:page?/:bar?/:id?/:tab?/:context?', {\n\tname: 'omnichannel-directory',\n\taction: () => {\n\t\tconst OmnichannelDirectoryPage = createTemplateForComponent(\n\t\t\t'OmnichannelDirectoryPage',\n\t\t\t() => import('../views/omnichannel/directory/OmnichannelDirectoryPage'),\n\t\t\t{ attachment: 'at-parent' },\n\t\t);\n\t\tappLayout.renderMainLayout({ center: OmnichannelDirectoryPage });\n\t},\n});\n\nFlowRouter.route('/livechat-queue', {\n\tname: 'livechat-queue',\n\taction: () => {\n\t\tconst OmnichannelQueueList = createTemplateForComponent('QueueList', () => import('../views/omnichannel/queueList'), {\n\t\t\tattachment: 'at-parent',\n\t\t});\n\t\tappLayout.renderMainLayout({ center: OmnichannelQueueList });\n\t},\n});\n\nFlowRouter.route('/account/:group?', {\n\tname: 'account',\n\taction: () => {\n\t\tconst AccountRoute = createTemplateForComponent('AccountRoute', () => import('../views/account/AccountRoute'), {\n\t\t\tattachment: 'at-parent',\n\t\t});\n\t\tappLayout.renderMainLayout({ center: AccountRoute });\n\t},\n});\n\nFlowRouter.route('/terms-of-service', {\n\tname: 'terms-of-service',\n\taction: () => {\n\t\tappLayout.render(<CMSPage page='Layout_Terms_of_Service' />);\n\t},\n});\n\nFlowRouter.route('/privacy-policy', {\n\tname: 'privacy-policy',\n\taction: () => {\n\t\tappLayout.render(<CMSPage page='Layout_Privacy_Policy' />);\n\t},\n});\n\nFlowRouter.route('/legal-notice', {\n\tname: 'legal-notice',\n\taction: () => {\n\t\tappLayout.render(<CMSPage page='Layout_Legal_Notice' />);\n\t},\n});\n\nFlowRouter.route('/room-not-found/:type/:name', {\n\tname: 'room-not-found',\n\taction: ({ type, name } = {}) => {\n\t\tSession.set('roomNotFound', { type, name });\n\t\tappLayout.renderMainLayout({ center: 'roomNotFound' });\n\t},\n});\n\nFlowRouter.route('/register/:hash', {\n\tname: 'register-secret-url',\n\taction: () => {\n\t\tappLayout.render(<SecretURLPage />);\n\t},\n});\n\nFlowRouter.route('/invite/:hash', {\n\tname: 'invite',\n\taction: () => {\n\t\tappLayout.render(<InvitePage />);\n\t},\n});\n\nFlowRouter.route('/setup-wizard/:step?', {\n\tname: 'setup-wizard',\n\taction: () => {\n\t\tappLayout.render(<SetupWizardRoute />);\n\t},\n});\n\nFlowRouter.route('/mailer/unsubscribe/:_id/:createdAt', {\n\tname: 'mailer-unsubscribe',\n\taction: () => {\n\t\tappLayout.render(<MailerUnsubscriptionPage />);\n\t},\n});\n\nFlowRouter.route('/login-token/:token', {\n\tname: 'tokenLogin',\n\taction(params) {\n\t\tAccounts.callLoginMethod({\n\t\t\tmethodArguments: [\n\t\t\t\t{\n\t\t\t\t\tloginToken: params?.token,\n\t\t\t\t},\n\t\t\t],\n\t\t\tuserCallback(error) {\n\t\t\t\tconsole.error(error);\n\t\t\t\tFlowRouter.go('/');\n\t\t\t},\n\t\t});\n\t},\n});\n\nFlowRouter.route('/reset-password/:token', {\n\tname: 'resetPassword',\n\taction() {\n\t\tappLayout.render(<ResetPasswordPage />);\n\t},\n});\n\nFlowRouter.route('/snippet/:snippetId/:snippetName', {\n\tname: 'snippetView',\n\taction() {\n\t\tappLayout.renderMainLayout({ center: 'snippetPage' });\n\t},\n});\n\nFlowRouter.route('/oauth/authorize', {\n\tname: 'oauth/authorize',\n\taction(_params, queryParams) {\n\t\tappLayout.renderMainLayout({\n\t\t\tcenter: 'authorize',\n\t\t\tmodal: true,\n\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\tclient_id: queryParams?.client_id,\n\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\tredirect_uri: queryParams?.redirect_uri,\n\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\tresponse_type: queryParams?.response_type,\n\t\t\tstate: queryParams?.state,\n\t\t});\n\t},\n});\n\nFlowRouter.route('/oauth/error/:error', {\n\tname: 'oauth/error',\n\taction(params) {\n\t\tappLayout.renderMainLayout({\n\t\t\tcenter: 'oauth404',\n\t\t\tmodal: true,\n\t\t\terror: params?.error,\n\t\t});\n\t},\n});\n\nFlowRouter.notFound = {\n\taction: (): void => {\n\t\tappLayout.render(<NotFoundPage />);\n\t},\n};\n\nMeteor.startup(() => {\n\tFlowRouter.initialize();\n});\n","import { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { hasRole } from '../../app/authorization/client';\nimport { settings } from '../../app/settings/client';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst userId = Meteor.userId();\n\t\tconst setupWizardState = settings.get('Show_Setup_Wizard');\n\n\t\tconst mustRedirect =\n\t\t\t(!userId && setupWizardState === 'pending') || (!!userId && !!hasRole(userId, 'admin') && setupWizardState === 'in_progress');\n\n\t\tif (mustRedirect) {\n\t\t\tFlowRouter.go('setup-wizard');\n\t\t}\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { slashCommands, APIClient } from '../../app/utils/client';\nimport { IUser } from '../../definition/IUser';\n\nlet oldUserId: IUser['_id'] | null = null;\n\nTracker.autorun(() => {\n\tconst newUserId = Meteor.userId();\n\tif (oldUserId === null && newUserId) {\n\t\tAPIClient.v1.get('commands.list').then((result) => {\n\t\t\tresult.commands.forEach((command: { command: string }) => {\n\t\t\t\tslashCommands.commands[command.command] = command;\n\t\t\t});\n\t\t});\n\t}\n\n\toldUserId = Meteor.userId();\n});\n","import { Accounts } from 'meteor/accounts-base';\nimport { UserPresence } from 'meteor/konecty:user-presence';\nimport { Meteor } from 'meteor/meteor';\nimport { TimeSync } from 'meteor/mizzao:timesync';\nimport { Session } from 'meteor/session';\nimport { Tracker } from 'meteor/tracker';\nimport toastr from 'toastr';\n\nimport { hasPermission } from '../../app/authorization/client';\nimport { register } from '../../app/markdown/lib/hljs';\nimport { settings } from '../../app/settings/client';\nimport { getUserPreference, t } from '../../app/utils/client';\nimport 'highlight.js/styles/github.css';\nimport { UserStatus } from '../../definition/UserStatus';\nimport * as banners from '../lib/banners';\nimport { synchronizeUserData, removeLocalUserData } from '../lib/userData';\nimport { fireGlobalEvent } from '../lib/utils/fireGlobalEvent';\n\nif (window.DISABLE_ANIMATION) {\n\ttoastr.options.timeOut = 1;\n\ttoastr.options.showDuration = 0;\n\ttoastr.options.hideDuration = 0;\n\ttoastr.options.extendedTimeOut = 0;\n}\n\nMeteor.startup(() => {\n\tfireGlobalEvent('startup', true);\n\n\tAccounts.onLogout(() => Session.set('openedRoom', null));\n\n\tTimeSync.loggingEnabled = false;\n\n\tSession.setDefault('AvatarRandom', 0);\n\n\twindow.lastMessageWindow = {};\n\twindow.lastMessageWindowHistory = {};\n\n\tlet status: UserStatus | undefined = undefined;\n\tTracker.autorun(async () => {\n\t\tconst uid = Meteor.userId();\n\t\tif (!uid) {\n\t\t\tremoveLocalUserData();\n\t\t\treturn;\n\t\t}\n\t\tif (!Meteor.status().connected) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst user = await synchronizeUserData(uid);\n\n\t\tif (!user) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (getUserPreference(user, 'enableAutoAway')) {\n\t\t\tconst idleTimeLimit = getUserPreference(user, 'idleTimeLimit') || 300;\n\t\t\tUserPresence.awayTime = idleTimeLimit * 1000;\n\t\t} else {\n\t\t\tdelete UserPresence.awayTime;\n\t\t\tUserPresence.stopTimer();\n\t\t}\n\n\t\tUserPresence.start();\n\n\t\tif (user.status !== status) {\n\t\t\tstatus = user.status;\n\t\t\tfireGlobalEvent('status-changed', status);\n\t\t}\n\t});\n\n\tTracker.autorun(async (c) => {\n\t\tconst uid = Meteor.userId();\n\t\tif (!uid) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!hasPermission('manage-cloud')) {\n\t\t\treturn;\n\t\t}\n\n\t\tMeteor.call('cloud:checkRegisterStatus', (err: unknown, data: { connectToCloud?: boolean; workspaceRegistered?: boolean }) => {\n\t\t\tif (err) {\n\t\t\t\tconsole.log(err);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tc.stop();\n\t\t\tconst { connectToCloud = false, workspaceRegistered = false } = data;\n\t\t\tif (connectToCloud === true && workspaceRegistered !== true) {\n\t\t\t\tbanners.open({\n\t\t\t\t\tid: 'cloud-registration',\n\t\t\t\t\ttitle: t('Cloud_registration_pending_title'),\n\t\t\t\t\thtml: t('Cloud_registration_pending_html'),\n\t\t\t\t\tmodifiers: ['large', 'danger'],\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t});\n});\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst code = settings.get('Message_Code_highlight') as string | undefined;\n\t\tcode?.split(',').forEach((language: string) => {\n\t\t\tlanguage.trim() && register(language.trim());\n\t\t});\n\t});\n});\n","import createLess from 'less/browser';\nimport { Meteor } from 'meteor/meteor';\nimport _ from 'underscore';\n\nimport { settings } from '../../app/settings/client';\nimport { ISetting, ISettingColor } from '../../definition/ISetting';\n\nconst variables = new Map();\nconst lessExpressions = new Map([\n\t['default-action-color', 'darken(@secondary-background-color, 15%)'],\n\t['default-action-contrast', 'contrast(@default-action-color, #444444)'],\n\t['primary-background-contrast', 'contrast(@primary-background-color, #444444)'],\n\t['primary-action-contrast', 'contrast(@primary-action-color, #444444)'],\n\t['secondary-background-contrast', 'contrast(@secondary-background-color, #444444)'],\n\t['secondary-action-contrast', 'contrast(@secondary-action-color, #444444)'],\n\t['selection-background', 'lighten(@selection-color, 30%)'],\n\t['success-background', 'lighten(@success-color, 45%)'],\n\t['success-border', 'lighten(@success-color, 30%)'],\n\t['error-background', 'lighten(@error-color, 45%)'],\n\t['error-border', 'lighten(@error-color, 30%)'],\n\t['error-contrast', 'contrast(@error-color)'],\n\t['pending-background', 'lighten(@pending-color, 45%)'],\n\t['pending-border', 'lighten(@pending-color, 30%)'],\n\t['transparent-darkest', 'rgba(17, 12, 12, 0.5)'],\n\t['transparent-darker', 'rgba(0, 0, 0, 0.15)'],\n\t['transparent-dark', 'rgba(15, 34, 0, 0.05)'],\n\t['transparent-light', 'rgba(255, 255, 255, 0.1)'],\n\t['transparent-lighter', 'rgba(255, 255, 255, 0.3)'],\n\t['transparent-lightest', 'rgba(255, 255, 255, 0.6)'],\n]);\n\nconst less = createLess(window, {});\n\nconst compileLess = async (): Promise<string> => {\n\tif (lessExpressions.size === 0) {\n\t\treturn '';\n\t}\n\n\tconst lessCode = [\n\t\t...Array.from(variables.entries(), ([name, value]) => `@${name}: ${value};`),\n\t\t...Array.from(lessExpressions.entries(), ([name, expression]) => `@${name}: ${expression};`),\n\t\t':root {',\n\t\t...Array.from(lessExpressions.entries(), ([name]) => `--${name}: @${name};`),\n\t\t'}',\n\t].join('\\n');\n\n\ttry {\n\t\tconst { css } = await less.render(lessCode);\n\t\treturn css;\n\t} catch (error) {\n\t\tconsole.error(error);\n\t\treturn '';\n\t}\n};\n\nlet cssVariablesElement: HTMLStyleElement | null = null;\n\nconst updateCssVariables = _.debounce(async () => {\n\tif (!cssVariablesElement) {\n\t\tcssVariablesElement = document.querySelector('#css-variables');\n\t}\n\n\tif (!cssVariablesElement) {\n\t\treturn;\n\t}\n\n\tcssVariablesElement.innerHTML = [\n\t\t':root {',\n\t\t...Array.from(variables.entries(), ([name, value]) => `--${name}: ${value};`),\n\t\t'}',\n\t\tawait compileLess(),\n\t].join('\\n');\n}, 50);\n\nconst handleThemeColorChanged = ({ _id, value, editor }: ISettingColor): void => {\n\tif (typeof value !== 'string') {\n\t\treturn;\n\t}\n\ttry {\n\t\tconst name = /^theme-color-(.*)$/.exec(_id)?.[1];\n\n\t\tif (!name) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst legacy = name.slice(0, 3) !== 'rc-';\n\n\t\tif (editor === 'color') {\n\t\t\tvariables.set(name, value);\n\t\t\treturn;\n\t\t}\n\n\t\tif (legacy) {\n\t\t\tlessExpressions.set(name, value);\n\t\t\treturn;\n\t\t}\n\n\t\tvariables.set(name, `var(--${value})`);\n\t} finally {\n\t\tupdateCssVariables();\n\t}\n};\n\nconst handleThemeFontChanged = ({ _id, value }: ISetting & { value: string }): void => {\n\ttry {\n\t\tconst name = /^theme-font-(.*)$/.exec(_id)?.[1];\n\t\tif (!name) {\n\t\t\treturn;\n\t\t}\n\n\t\tvariables.set(name, value);\n\t} finally {\n\t\tupdateCssVariables();\n\t}\n};\n\nMeteor.startup(() => {\n\tsettings.collection.find({ _id: /^theme-color-/i }, { fields: { value: 1, editor: 1 } }).observe({\n\t\tadded: handleThemeColorChanged,\n\t\tchanged: handleThemeColorChanged,\n\t});\n\n\tsettings.collection.find({ _id: /^theme-font-/i }, { fields: { value: 1 } }).observe({\n\t\tadded: handleThemeFontChanged,\n\t\tchanged: handleThemeFontChanged,\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport { Tracker } from 'meteor/tracker';\n\nimport { Favico } from '../../app/favico/client';\nimport { ChatSubscription, ChatRoom } from '../../app/models/client';\nimport { settings } from '../../app/settings/client';\nimport { menu } from '../../app/ui-utils/client';\nimport { getUserPreference } from '../../app/utils/client';\nimport { ISubscription } from '../../definition/ISubscription';\nimport { fireGlobalEvent } from '../lib/utils/fireGlobalEvent';\n\nconst fetchSubscriptions = (): ISubscription[] =>\n\tChatSubscription.find(\n\t\t{\n\t\t\topen: true,\n\t\t\thideUnreadStatus: { $ne: true },\n\t\t\tarchived: { $ne: true },\n\t\t},\n\t\t{\n\t\t\tfields: {\n\t\t\t\tunread: 1,\n\t\t\t\talert: 1,\n\t\t\t\trid: 1,\n\t\t\t\tt: 1,\n\t\t\t\tname: 1,\n\t\t\t\tls: 1,\n\t\t\t\tunreadAlert: 1,\n\t\t\t\tfname: 1,\n\t\t\t\tprid: 1,\n\t\t\t},\n\t\t},\n\t).fetch();\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst userUnreadAlert = getUserPreference(Meteor.userId(), 'unreadAlert');\n\n\t\tlet unreadAlert: false | '•' = false;\n\n\t\tconst unreadCount = fetchSubscriptions().reduce(\n\t\t\t(ret, subscription) =>\n\t\t\t\tTracker.nonreactive(() => {\n\t\t\t\t\tconst room = ChatRoom.findOne({ _id: subscription.rid }, { fields: { usersCount: 1 } });\n\t\t\t\t\tfireGlobalEvent('unread-changed-by-subscription', {\n\t\t\t\t\t\t...subscription,\n\t\t\t\t\t\tusersCount: room?.usersCount,\n\t\t\t\t\t});\n\n\t\t\t\t\tif (subscription.alert || subscription.unread > 0) {\n\t\t\t\t\t\t// Increment the total unread count.\n\t\t\t\t\t\tif (subscription.alert === true && subscription.unreadAlert !== 'nothing') {\n\t\t\t\t\t\t\tif (subscription.unreadAlert === 'all' || userUnreadAlert !== false) {\n\t\t\t\t\t\t\t\tunreadAlert = '•';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn ret + subscription.unread;\n\t\t\t\t\t}\n\t\t\t\t\treturn ret;\n\t\t\t\t}),\n\t\t\t0,\n\t\t);\n\n\t\tmenu.updateUnreadBars();\n\n\t\tif (unreadCount > 0) {\n\t\t\tif (unreadCount > 999) {\n\t\t\t\tSession.set('unread', '999+');\n\t\t\t} else {\n\t\t\t\tSession.set('unread', unreadCount);\n\t\t\t}\n\t\t} else if (unreadAlert !== false) {\n\t\t\tSession.set('unread', unreadAlert);\n\t\t} else {\n\t\t\tSession.set('unread', '');\n\t\t}\n\t});\n});\n\nMeteor.startup(() => {\n\tconst favicon = new (Favico as any)({\n\t\tposition: 'up',\n\t\tanimation: 'none',\n\t});\n\n\twindow.favico = favicon;\n\n\tTracker.autorun(() => {\n\t\tconst siteName = settings.get('Site_Name') ?? '';\n\n\t\tconst unread = Session.get('unread');\n\t\tfireGlobalEvent('unread-changed', unread);\n\n\t\tif (favicon) {\n\t\t\tfavicon.badge(unread, {\n\t\t\t\tbgColor: typeof unread !== 'number' ? '#3d8a3a' : '#ac1b1b',\n\t\t\t});\n\t\t}\n\n\t\tdocument.title = unread === '' ? siteName : `(${unread}) ${siteName}`;\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { UserRoles, RoomRoles, ChatMessage } from '../../app/models/client';\nimport { Notifications } from '../../app/notifications/client';\nimport { IRocketChatRecord } from '../../definition/IRocketChatRecord';\nimport { IRole, IUser } from '../../definition/IUser';\nimport { handleError } from '../lib/utils/handleError';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tif (Meteor.userId()) {\n\t\t\tMeteor.call('getUserRoles', (error: Error, results: IRocketChatRecord[]) => {\n\t\t\t\tif (error) {\n\t\t\t\t\treturn handleError(error);\n\t\t\t\t}\n\n\t\t\t\tfor (const record of results) {\n\t\t\t\t\tUserRoles.upsert({ _id: record._id }, record);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tNotifications.onLogged(\n\t\t\t\t'roles-change',\n\t\t\t\t(role: { type: 'added' | 'removed' | 'changed'; _id: IRole['_id']; u: Partial<IUser>; scope: IRole['scope'] }) => {\n\t\t\t\t\tif (role.type === 'added') {\n\t\t\t\t\t\tif (role.scope) {\n\t\t\t\t\t\t\tRoomRoles.upsert({ 'rid': role.scope, 'u._id': role.u._id }, { $setOnInsert: { u: role.u }, $addToSet: { roles: role._id } });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tUserRoles.upsert({ _id: role.u._id }, { $addToSet: { roles: role._id }, $set: { username: role.u.username } });\n\t\t\t\t\t\t\tChatMessage.update({ 'u._id': role.u._id }, { $addToSet: { roles: role._id } }, { multi: true });\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (role.type === 'removed') {\n\t\t\t\t\t\tif (role.scope) {\n\t\t\t\t\t\t\tRoomRoles.update({ 'rid': role.scope, 'u._id': role.u._id }, { $pull: { roles: role._id } });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tUserRoles.update({ _id: role.u._id }, { $pull: { roles: role._id } });\n\t\t\t\t\t\t\tChatMessage.update({ 'u._id': role.u._id }, { $pull: { roles: role._id } }, { multi: true });\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (role.type === 'changed') {\n\t\t\t\t\t\tChatMessage.update({ roles: role._id }, { $inc: { rerender: 1 } }, { multi: true });\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport moment from 'moment';\n\nimport { Users } from '../../app/models/client';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst user = Users.findOne({ _id: Meteor.userId() }, { fields: { statusConnection: 1, utcOffset: 1 } });\n\t\tif (user && user.statusConnection === 'online') {\n\t\t\tconst utcOffset = moment().utcOffset() / 60;\n\t\t\tif (user.utcOffset !== utcOffset) {\n\t\t\t\tMeteor.call('userSetUtcOffset', utcOffset);\n\t\t\t}\n\t\t}\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { UserStatus } from '../../definition/UserStatus';\nimport { callbacks } from '../../lib/callbacks';\nimport { fireGlobalEvent } from '../lib/utils/fireGlobalEvent';\n\n/* fire user state change globally, to listen on desktop electron client */\nMeteor.startup(() => {\n\tcallbacks.add('userStatusManuallySet', (status: UserStatus) => {\n\t\tfireGlobalEvent('user-status-manually-set', status);\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport { RoomManager } from '../../app/ui-utils/client';\nimport { IUser } from '../../definition/IUser';\n\nMeteor.startup(() => {\n\tMeteor.users\n\t\t.find(\n\t\t\t{},\n\t\t\t{\n\t\t\t\tfields: {\n\t\t\t\t\tname: 1,\n\t\t\t\t\tusername: 1,\n\t\t\t\t\tstatus: 1,\n\t\t\t\t\tutcOffset: 1,\n\t\t\t\t\tstatusText: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t)\n\t\t.observe({\n\t\t\tadded(user: IUser) {\n\t\t\t\tSession.set(`user_${user.username}_status`, user.status);\n\t\t\t\tSession.set(`user_${user.username}_status_text`, user.statusText);\n\t\t\t\tRoomManager.updateUserStatus(user, user.status, user.utcOffset);\n\t\t\t},\n\t\t\tchanged(user: IUser) {\n\t\t\t\tSession.set(`user_${user.username}_status`, user.status);\n\t\t\t\tif (user.statusText !== undefined) {\n\t\t\t\t\tSession.set(`user_${user.username}_status_text`, user.statusText);\n\t\t\t\t}\n\t\t\t\tRoomManager.updateUserStatus(user, user.status, user.utcOffset);\n\t\t\t},\n\t\t\tremoved(user) {\n\t\t\t\tSession.set(`user_${user.username}_status`, null);\n\t\t\t\tSession.set(`user_${user.username}_status_text`, null);\n\t\t\t\tRoomManager.updateUserStatus(user, 'offline', null);\n\t\t\t},\n\t\t});\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { ChatMessage } from '../../app/models/client';\nimport { canDeleteMessage } from '../lib/utils/canDeleteMessage';\n\nMeteor.methods({\n\tdeleteMessage(msg) {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// We're now only passed in the `_id` property to lower the amount of data sent to the server\n\t\tconst message = ChatMessage.findOne({ _id: msg._id });\n\n\t\tif (\n\t\t\t!canDeleteMessage({\n\t\t\t\trid: message.rid,\n\t\t\t\tts: message.ts,\n\t\t\t\tuid: message.u._id,\n\t\t\t})\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\tChatMessage.remove({\n\t\t\t'_id': message._id,\n\t\t\t'u._id': Meteor.userId(),\n\t\t});\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { ChatSubscription } from '../../app/models/client';\n\nMeteor.methods({\n\thideRoom(rid) {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tChatSubscription.update(\n\t\t\t{\n\t\t\t\trid,\n\t\t\t\t'u._id': Meteor.userId(),\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\talert: false,\n\t\t\t\t\topen: false,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { ChatSubscription } from '../../app/models/client';\n\nMeteor.methods({\n\topenRoom(rid) {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tChatSubscription.update(\n\t\t\t{\n\t\t\t\trid,\n\t\t\t\t'u._id': Meteor.userId(),\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\topen: true,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\n\nMeteor.methods({\n\tsetUserActiveStatus(userId, active) {\n\t\tMeteor.users.update(userId, { $set: { active } });\n\t\treturn true;\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { ChatSubscription } from '../../app/models/client';\n\nMeteor.methods({\n\ttoggleFavorite(rid, f) {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tChatSubscription.update(\n\t\t\t{\n\t\t\t\trid,\n\t\t\t\t'u._id': Meteor.userId(),\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\tf,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { TimeSync } from 'meteor/mizzao:timesync';\nimport { Tracker } from 'meteor/tracker';\nimport moment from 'moment';\nimport _ from 'underscore';\n\nimport { hasAtLeastOnePermission } from '../../app/authorization/client';\nimport { ChatMessage } from '../../app/models/client';\nimport { settings } from '../../app/settings/client';\nimport { t } from '../../app/utils/client';\nimport { callbacks } from '../../lib/callbacks';\nimport { dispatchToastMessage } from '../lib/toast';\n\nMeteor.methods({\n\tupdateMessage(message) {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst originalMessage = ChatMessage.findOne(message._id);\n\n\t\tconst hasPermission = hasAtLeastOnePermission('edit-message', message.rid);\n\t\tconst editAllowed = settings.get('Message_AllowEditing');\n\t\tlet editOwn = false;\n\t\tif (originalMessage.msg === message.msg) {\n\t\t\treturn;\n\t\t}\n\t\tif (originalMessage && originalMessage.u && originalMessage.u._id) {\n\t\t\teditOwn = originalMessage.u._id === Meteor.userId();\n\t\t}\n\n\t\tconst me = Meteor.users.findOne(Meteor.userId());\n\n\t\tif (!(hasPermission || (editAllowed && editOwn))) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('error-action-not-allowed', { action: t('Message_editing') }),\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tconst blockEditInMinutes = settings.get('Message_AllowEditing_BlockEditInMinutes');\n\t\tif (_.isNumber(blockEditInMinutes) && blockEditInMinutes !== 0) {\n\t\t\tif (originalMessage.ts) {\n\t\t\t\tconst msgTs = moment(originalMessage.ts);\n\t\t\t\tif (msgTs) {\n\t\t\t\t\tconst currentTsDiff = moment().diff(msgTs, 'minutes');\n\t\t\t\t\tif (currentTsDiff > blockEditInMinutes) {\n\t\t\t\t\t\tdispatchToastMessage({ type: 'error', message: t('error-message-editing-blocked') });\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tTracker.nonreactive(() => {\n\t\t\tif (isNaN(TimeSync.serverOffset())) {\n\t\t\t\tmessage.editedAt = new Date();\n\t\t\t} else {\n\t\t\t\tmessage.editedAt = new Date(Date.now() + TimeSync.serverOffset());\n\t\t\t}\n\n\t\t\tmessage.editedBy = {\n\t\t\t\t_id: Meteor.userId(),\n\t\t\t\tusername: me.username,\n\t\t\t};\n\n\t\t\tmessage = callbacks.run('beforeSaveMessage', message);\n\t\t\tconst messageObject = {\n\t\t\t\teditedAt: message.editedAt,\n\t\t\t\teditedBy: message.editedBy,\n\t\t\t\tmsg: message.msg,\n\t\t\t};\n\n\t\t\tif (originalMessage.attachments) {\n\t\t\t\tif (originalMessage.attachments[0].description !== undefined) {\n\t\t\t\t\tdelete messageObject.msg;\n\t\t\t\t}\n\t\t\t}\n\t\t\tChatMessage.update(\n\t\t\t\t{\n\t\t\t\t\t'_id': message._id,\n\t\t\t\t\t'u._id': Meteor.userId(),\n\t\t\t\t},\n\t\t\t\t{ $set: messageObject },\n\t\t\t);\n\t\t});\n\t},\n});\n","(function (arr): void {\n\tarr.forEach((item) => {\n\t\tif (item.hasOwnProperty('remove')) {\n\t\t\treturn;\n\t\t}\n\n\t\tObject.defineProperty(item, 'remove', {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\twritable: true,\n\t\t\tvalue: function remove() {\n\t\t\t\tthis.parentNode.removeChild(this);\n\t\t\t},\n\t\t});\n\t});\n})([Element.prototype, CharacterData.prototype, DocumentType.prototype]);\n","import _ from 'underscore';\n\ntype Variables = {\n\t[name: string]: (variables: Variables) => string;\n};\n\nconst findDeclarations = (code: string): [string, Variables[keyof Variables]][] =>\n\t(code.match(/(--[^:; ]+:..*?;)/g) ?? []).map((declaration) => {\n\t\tconst matches = /(.*?):\\s*(.*?)\\s*;/.exec(declaration);\n\n\t\tif (matches === null) {\n\t\t\tthrow new Error();\n\t\t}\n\n\t\tconst [, name, value] = matches;\n\t\treturn [\n\t\t\tname,\n\t\t\tvalue.indexOf('var(') >= 0\n\t\t\t\t? (variables: Variables): string => value.replace(/var\\((--.*?)\\)/gm, (_, name) => variables[name]?.call(null, variables))\n\t\t\t\t: (): string => value,\n\t\t];\n\t});\n\nconst replaceReferences = (code: string, variables: Variables): string =>\n\tcode.replace(/var\\((--.*?)\\)/gm, (_, name) => variables[name]?.call(null, variables));\n\nlet cssVariablesElement: HTMLElement;\nconst originalCodes = new Map();\n\nconst update = _.debounce(() => {\n\tconst declarations = ([] as [string, Variables[keyof Variables]][]).concat(\n\t\t...Array.from(originalCodes.values(), findDeclarations),\n\t\tfindDeclarations(cssVariablesElement.innerHTML),\n\t);\n\n\tconst variables = Object.fromEntries(declarations);\n\n\toriginalCodes.forEach((originalCode, element) => {\n\t\tconst patchedCode = replaceReferences(originalCode, variables);\n\n\t\tlet patchedElement = element.nextElementSibling;\n\t\tif (!patchedElement || !patchedElement.classList.contains('patched-css-variables')) {\n\t\t\tpatchedElement = document.createElement('style');\n\t\t\tpatchedElement.type = 'text/css';\n\t\t\tpatchedElement.classList.add('patched-css-variables');\n\t\t\telement.insertAdjacentElement('afterend', patchedElement);\n\t\t}\n\n\t\tconst { sheet } = patchedElement;\n\t\twhile (sheet.cssRules.length > 0) {\n\t\t\tsheet.deleteRule(0);\n\t\t}\n\t\tsheet.insertRule(`@media all {${patchedCode}}`, 0);\n\t});\n}, 100);\n\nconst findAndPatchFromLinkElements = (): void => {\n\tArray.from(document.querySelectorAll('link[type=\"text/css\"].__meteor-css__')).forEach(async (linkElement) => {\n\t\tconst url = linkElement.getAttribute('href');\n\n\t\tif (url === null) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst response = await fetch(url);\n\t\t\tconst code = await response.text();\n\t\t\toriginalCodes.set(linkElement, code);\n\t\t} catch (error) {\n\t\t\tconsole.warn(error);\n\t\t} finally {\n\t\t\tupdate();\n\t\t}\n\t});\n};\n\nconst waitAndInitialize = (): void => {\n\tif (document.readyState !== 'complete') {\n\t\trequestAnimationFrame(waitAndInitialize);\n\t\treturn;\n\t}\n\n\tconst element = document.getElementById('css-variables');\n\n\tif (element === null) {\n\t\trequestAnimationFrame(waitAndInitialize);\n\t\treturn;\n\t}\n\n\tcssVariablesElement = element;\n\n\tconst cssVariablesElementObserver = new MutationObserver(() => {\n\t\tupdate();\n\t});\n\n\tcssVariablesElementObserver.observe(cssVariablesElement, { childList: true });\n\n\tfindAndPatchFromLinkElements();\n};\n\n((): void => {\n\tif (window.CSS && window.CSS.supports && window.CSS.supports('(--foo: red)')) {\n\t\treturn;\n\t}\n\n\twaitAndInitialize();\n})();\n","((): void => {\n\tif (typeof window.CustomEvent === 'function') {\n\t\treturn;\n\t}\n\n\tconst CustomEvent = function <T>(\n\t\ttype: string,\n\t\t{ bubbles = false, cancelable = false, detail = null as unknown as T }: CustomEventInit<T> = {},\n\t): CustomEvent<T> {\n\t\tconst evt = document.createEvent('CustomEvent') as CustomEvent<T>;\n\t\tevt.initCustomEvent(type, bubbles, cancelable, detail);\n\t\treturn evt;\n\t} as unknown as {\n\t\tprototype: CustomEvent;\n\t\tnew <T>(typeArg: string, eventInitDict?: CustomEventInit<T>): CustomEvent<T>;\n\t};\n\n\twindow.CustomEvent = CustomEvent;\n})();\n","import * as domEvents from '../lib/utils/domEvents';\nimport { isIOsDevice } from '../lib/utils/isIOsDevice';\n\n((): void => {\n\tif (!isIOsDevice || !window.matchMedia('(hover: none)').matches) {\n\t\treturn;\n\t}\n\n\tdomEvents.delegate({\n\t\tparent: document.body,\n\t\teventName: 'touchend',\n\t\telementSelector: 'a:hover',\n\t\tlistener: (_, element): void => {\n\t\t\tdomEvents.triggerClick(element);\n\t\t},\n\t});\n})();\n","import '@rocket.chat/fuselage-polyfills';\nimport 'url-polyfill';\nimport './childNodeRemove';\nimport './cssVars';\nimport './customEventPolyfill';\nimport './hoverTouchClick';\nimport './objectFromEntries';\n","Object.fromEntries =\n\tObject.fromEntries ||\n\tfunction fromEntries<T>(entries: Iterable<readonly [PropertyKey, T]>): { [k: string]: T } {\n\t\treturn [...entries].reduce((obj, { 0: key, 1: val }) => Object.assign(obj, { [key]: val }), {});\n\t};\n","import { Template } from 'meteor/templating';\n\nimport { getUserAvatarURL } from '../../app/utils/lib/getUserAvatarURL';\n\nTemplate.registerHelper('avatarUrlFromUsername', getUserAvatarURL);\n","import { Template } from 'meteor/templating';\n\nimport { getEmojiUrlFromName } from '../../app/emoji-custom/client/lib/emojiCustom';\n\nTemplate.registerHelper('emojiUrlFromName', getEmojiUrlFromName);\n","import { Template } from 'meteor/templating';\n\nimport { hasAtLeastOnePermission } from '../../app/authorization/client';\n\nTemplate.registerHelper('hasPermission', hasAtLeastOnePermission);\n","import './log';\nimport './renderEmoji';\nimport './avatarUrlFromUsername';\nimport './emojiUrlFromName';\nimport './nrrargs';\nimport './hasPermission';\nimport './userHasAllPermission';\n","import { Template } from 'meteor/templating';\n\nTemplate.registerHelper('log', (...args: unknown[]) => {\n\tconsole.log(...args);\n});\n","import { Template } from 'meteor/templating';\n\nTemplate.registerHelper('nrrargs', <T extends any[]>(...args: T) => ({\n\t_arguments: args,\n}));\n","import { Template } from 'meteor/templating';\n\nimport { renderEmoji } from '../lib/utils/renderEmoji';\n\nTemplate.registerHelper('renderEmoji', renderEmoji);\n","import { Template } from 'meteor/templating';\n\nimport { userHasAllPermission } from '../../app/authorization/client';\nimport { IPermission } from '../../definition/IPermission';\nimport { IRole, IUser } from '../../definition/IUser';\n\nTemplate.registerHelper(\n\t'userHasAllPermission',\n\t(userId: IUser['_id'] | null, permission: IPermission['_id'] | IPermission['_id'][], scope: IRole['scope']) =>\n\t\tuserHasAllPermission(permission, scope, userId),\n);\n","import '../app/cors/client';\nimport '../app/2fa/client';\nimport '../app/analytics/client';\nimport '../app/authorization';\nimport '../app/autotranslate/client';\nimport '../app/cas/client';\nimport '../app/channel-settings';\nimport '../app/crowd/client';\nimport '../app/custom-oauth';\nimport '../app/custom-sounds/client';\nimport '../app/dolphin/client';\nimport '../app/drupal/client';\nimport '../app/emoji/client';\nimport '../app/emoji-emojione/client';\nimport '../app/emoji-custom/client';\nimport '../app/favico';\nimport '../app/file-upload';\nimport '../app/github-enterprise/client';\nimport '../app/gitlab/client';\nimport '../app/iframe-login/client';\nimport '../app/importer/client';\nimport '../app/importer-csv/client';\nimport '../app/importer-hipchat-enterprise/client';\nimport '../app/importer-slack/client';\nimport '../app/importer-slack-users/client';\nimport '../app/integrations/client/startup';\nimport '../app/lib/client';\nimport '../app/livestream/client';\nimport '../app/logger/client';\nimport '../app/markdown/client';\nimport '../app/mentions-flextab/client';\nimport '../app/message-attachments/client';\nimport '../app/message-mark-as-unread/client';\nimport '../app/message-pin/client';\nimport '../app/message-snippet/client';\nimport '../app/message-star/client';\nimport '../app/nextcloud/client';\nimport '../app/oauth2-server-config/client';\nimport '../app/oembed/client';\nimport '../app/otr/client';\nimport '../app/push-notifications/client';\nimport '../app/apps/client';\nimport '../app/slackbridge/client';\nimport '../app/slashcommands-archiveroom/client';\nimport '../app/slashcommand-asciiarts/client';\nimport '../app/slashcommands-create/client';\nimport '../app/slashcommands-hide/client';\nimport '../app/slashcommands-invite/client';\nimport '../app/slashcommands-inviteall/client';\nimport '../app/slashcommands-join/client';\nimport '../app/slashcommands-kick/client';\nimport '../app/slashcommands-open/client';\nimport '../app/slashcommands-topic/client';\nimport '../app/slashcommands-unarchiveroom/client';\nimport '../app/tokenpass/client';\nimport '../app/ui/client';\nimport '../app/ui-account/client';\nimport '../app/ui-clean-history/client';\nimport '../app/ui-login/client';\nimport '../app/ui-master/client';\nimport '../app/ui-message/client';\nimport '../app/ui-sidenav/client';\nimport '../app/ui-vrecord/client';\nimport '../app/videobridge/client';\nimport '../app/webdav/client';\nimport '../app/webrtc/client';\nimport '../app/wordpress/client';\nimport '../app/nrr/client';\nimport '../app/meteor-accounts-saml/client';\nimport '../app/e2e/client';\nimport '../app/blockstack/client';\nimport '../app/version-check/client';\nimport '../app/search/client';\nimport '../app/chatpal-search/client';\nimport '../app/lazy-load/client';\nimport '../app/discussion/client';\nimport '../app/threads/client';\nimport '../app/mail-messages/client';\nimport '../app/user-status/client';\nimport '../app/utils/client';\nimport '../app/settings/client';\nimport '../app/models/client';\nimport '../app/notifications/client';\nimport '../app/ui-utils/client';\nimport '../app/ui-cached-collection/client';\nimport '../app/action-links/client';\nimport '../app/reactions/client';\nimport '../app/livechat/client';\nimport '../app/meteor-autocomplete/client';\nimport '../app/theme/client';\nimport '../app/custom/client';\n","import { HTML } from 'meteor/htmljs';\n\nimport { createTemplateForComponent } from './lib/portals/createTemplateForComponent';\n\ncreateTemplateForComponent('MessageActions', () => import('./components/Message/Actions'));\n\ncreateTemplateForComponent('reactAttachments', () => import('./components/Message/Attachments'));\n\ncreateTemplateForComponent('ThreadMetric', () => import('./components/Message/Metrics/Thread'), {\n\trenderContainerView: () =>\n\t\tHTML.DIV({\n\t\t\tstyle: 'min-height: 36px;',\n\t\t}),\n});\n\ncreateTemplateForComponent('DiscussionMetric', () => import('./components/Message/Metrics/Discussion'), {\n\trenderContainerView: () =>\n\t\tHTML.DIV({\n\t\t\tstyle: 'min-height: 36px;',\n\t\t}),\n});\n\ncreateTemplateForComponent('MessageBody', () => import('./components/Message/Body'));\n\ncreateTemplateForComponent('BroadCastMetric', () => import('./components/Message/Metrics/Broadcast'));\n\ncreateTemplateForComponent(\n\t'Checkbox',\n\tasync (): Promise<{ default: typeof import('@rocket.chat/fuselage').CheckBox }> => {\n\t\tconst { CheckBox } = await import('@rocket.chat/fuselage');\n\t\treturn { default: CheckBox };\n\t},\n\t{\n\t\tattachment: 'at-parent',\n\t},\n);\n\ncreateTemplateForComponent('RoomForeword', () => import('./components/RoomForeword'), {\n\tattachment: 'at-parent',\n});\n\ncreateTemplateForComponent('messageLocation', () => import('./views/location/MessageLocation'));\n\ncreateTemplateForComponent('sidebarHeader', () => import('./sidebar/header'));\n\ncreateTemplateForComponent('sidebarChats', () => import('./sidebar/RoomList/index'), {\n\trenderContainerView: () =>\n\t\tHTML.DIV({\n\t\t\tstyle: 'display: flex; flex: 1 1 100%;',\n\t\t}),\n});\n\ncreateTemplateForComponent('omnichannelFlex', () => import('./views/omnichannel/sidebar/OmnichannelSidebar'), {\n\trenderContainerView: () => HTML.DIV({ style: 'height: 100%; position: relative;' }),\n});\n\ncreateTemplateForComponent('auditPage', () => import('../ee/client/audit/AuditPage'), {\n\tattachment: 'at-parent',\n});\n\ncreateTemplateForComponent('auditLogPage', () => import('../ee/client/audit/AuditLogPage'), {\n\tattachment: 'at-parent',\n});\n\ncreateTemplateForComponent('DiscussionMessageList', () => import('./views/room/contextualBar/Discussions'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('ThreadsList', () => import('./views/room/contextualBar/Threads'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('ExportMessages', () => import('./views/room/contextualBar/ExportMessages'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('KeyboardShortcuts', () => import('./views/room/contextualBar/KeyboardShortcuts'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('room', () => import('./views/room/Room'), {\n\trenderContainerView: () => HTML.DIV({ style: 'height: 100%; position: relative;' }),\n});\n\ncreateTemplateForComponent('AutoTranslate', () => import('./views/room/contextualBar/AutoTranslate'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('NotificationsPreferences', () => import('./views/room/contextualBar/NotificationPreferences'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('InviteUsers', () => import('./views/room/contextualBar/RoomMembers/InviteUsers'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('EditInvite', () => import('./views/room/contextualBar/RoomMembers/EditInvite'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('AddUsers', () => import('./views/room/contextualBar/RoomMembers/AddUsers'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('membersList', () => import('./views/room/contextualBar/RoomMembers'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('OTR', () => import('./views/room/contextualBar/OTR'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('EditRoomInfo', () => import('./views/room/contextualBar/Info/EditRoomInfo'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('RoomInfo', () => import('./views/room/contextualBar/Info/RoomInfo'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('UserInfoWithData', () => import('./views/room/contextualBar/UserInfo'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('channelFilesList', () => import('./views/room/contextualBar/RoomFiles'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('RoomAnnouncement', () => import('./views/room/Announcement'));\n\ncreateTemplateForComponent('PruneMessages', () => import('./views/room/contextualBar/PruneMessages'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('Burger', () => import('./components/BurgerMenu'));\n\ncreateTemplateForComponent('loginLayoutHeader', () => import('./views/login/LoginLayout/Header'));\n\ncreateTemplateForComponent('loginLayoutFooter', () => import('./views/login/LoginLayout/Footer'));\n\ncreateTemplateForComponent('ModalBlock', () => import('./views/blocks/ConnectedModalBlock'), {\n\trenderContainerView: () => HTML.DIV({ style: 'display: flex; width: 100%; height: 100%;' }),\n});\n\ncreateTemplateForComponent('Blocks', () => import('./views/blocks/MessageBlock'));\n\ncreateTemplateForComponent('adminFlex', () => import('./views/admin/sidebar/AdminSidebar'), {\n\trenderContainerView: () => HTML.DIV({ style: 'height: 100%; position: relative;' }),\n});\n\ncreateTemplateForComponent('accountFlex', () => import('./views/account/AccountSidebar'), {\n\trenderContainerView: () => HTML.DIV({ style: 'height: 100%; position: relative;' }),\n});\n\ncreateTemplateForComponent('SortList', () => import('./components/SortList'));\n\ncreateTemplateForComponent('CreateRoomList', () => import('./sidebar/header/actions/CreateRoomList'));\n\ncreateTemplateForComponent('AppleOauthButton', () => import('./views/login/AppleOauth/AppleOauthButton'), {\n\trenderContainerView: () => HTML.DIV({ style: 'display: flex; justify-content: center;' }),\n});\n\ncreateTemplateForComponent('UserDropdown', () => import('./sidebar/header/UserDropdown'));\n\ncreateTemplateForComponent('sidebarFooter', () => import('./sidebar/footer'));\n\ncreateTemplateForComponent('roomNotFound', () => import('./views/room/Room/RoomNotFound'), {\n\trenderContainerView: () => HTML.DIV({ style: 'height: 100%;' }),\n});\n","import '../ee/client/ecdh';\nimport './polyfills';\n\nimport './lib/meteorCallWrapper';\nimport './importPackages';\n\nimport '../ee/client';\nimport './templateHelpers';\nimport './methods/deleteMessage';\nimport './methods/hideRoom';\nimport './methods/openRoom';\nimport './methods/setUserActiveStatus';\nimport './methods/toggleFavorite';\nimport './methods/updateMessage';\nimport './startup';\nimport './views/admin';\nimport './views/teams';\nimport './templates';\n","import { Meteor } from 'meteor/meteor';\nimport { FilterQuery } from 'mongodb';\n\nimport type { IBusinessHourBehavior } from '../app/livechat/server/business-hour/AbstractBusinessHour';\nimport type { Logger } from '../app/logger/server';\nimport type { IMessage } from '../definition/IMessage';\nimport type { IRoom } from '../definition/IRoom';\nimport type { IUser } from '../definition/IUser';\nimport type { ILivechatDepartmentRecord } from '../definition/ILivechatDepartmentRecord';\nimport type { ILivechatAgent } from '../definition/ILivechatAgent';\nimport type { OmnichannelAgentStatus } from '../definition/IOmnichannelAgent';\nimport type { ILivechatInquiryRecord } from '../definition/IInquiry';\nimport type { ILivechatVisitor } from '../definition/ILivechatVisitor';\nimport { getRandomId } from './random';\n\nenum CallbackPriority {\n\tHIGH = -1000,\n\tMEDIUM = 0,\n\tLOW = 1000,\n}\n\n/**\n * Callbacks returning void, like event listeners.\n *\n * TODO: move those to event-based systems\n */\ntype EventLikeCallbackSignatures = {\n\t'afterActivateUser': (user: IUser) => void;\n\t'afterCreateChannel': (owner: IUser, room: IRoom) => void;\n\t'afterCreatePrivateGroup': (owner: IUser, room: IRoom) => void;\n\t'afterDeactivateUser': (user: IUser) => void;\n\t'afterDeleteMessage': (message: IMessage, room: IRoom) => void;\n\t'validateUserRoles': (userData: Partial<IUser>) => void;\n\t'workspaceLicenseChanged': (license: string) => void;\n\t'afterReadMessages': (rid: IRoom['_id'], params: { uid: IUser['_id']; lastSeen: Date }) => void;\n\t'beforeReadMessages': (rid: IRoom['_id'], uid: IUser['_id']) => void;\n\t'afterDeleteUser': (user: IUser) => void;\n\t'afterFileUpload': (params: { user: IUser; room: IRoom; message: IMessage }) => void;\n\t'afterSaveMessage': (message: IMessage, room: IRoom) => void;\n\t'livechat.removeAgentDepartment': (params: { departmentId: ILivechatDepartmentRecord['_id']; agentsId: ILivechatAgent['_id'][] }) => void;\n\t'livechat.saveAgentDepartment': (params: { departmentId: ILivechatDepartmentRecord['_id']; agentsId: ILivechatAgent['_id'][] }) => void;\n\t'livechat.closeRoom': (room: IRoom) => void;\n\t'livechat.saveRoom': (room: IRoom) => void;\n\t'livechat:afterReturnRoomAsInquiry': (params: { room: IRoom }) => void;\n\t'livechat.setUserStatusLivechat': (params: { userId: IUser['_id']; status: OmnichannelAgentStatus }) => void;\n\t'livechat.agentStatusChanged': (params: { userId: IUser['_id']; status: OmnichannelAgentStatus }) => void;\n\t'livechat.afterTakeInquiry': (inq: ILivechatInquiryRecord, agent: ILivechatAgent) => void;\n};\n\n/**\n * Callbacks that are supposed to be composed like a chain.\n *\n * TODO: develop a middleware alternative and grant independence of execution order\n */\ntype ChainedCallbackSignatures = {\n\t'afterCreateUser': (user: IUser) => IUser;\n\t'afterDeleteRoom': (rid: IRoom['_id']) => IRoom['_id'];\n\t'livechat:afterOnHold': (room: IRoom) => IRoom;\n\t'livechat:afterOnHoldChatResumed': (room: IRoom) => IRoom;\n\t'livechat:onTransferFailure': (params: { room: IRoom; guest: ILivechatVisitor; transferData: { [k: string]: string | any } }) => {\n\t\troom: IRoom;\n\t\tguest: ILivechatVisitor;\n\t\ttransferData: { [k: string]: string | any };\n\t};\n\t'livechat.afterForwardChatToAgent': (params: { rid: IRoom['_id']; servedBy: unknown; oldServedBy: unknown }) => {\n\t\trid: IRoom['_id'];\n\t\tservedBy: unknown;\n\t\toldServedBy: unknown;\n\t};\n\t'livechat.afterForwardChatToDepartment': (params: {\n\t\trid: IRoom['_id'];\n\t\tnewDepartmentId: ILivechatDepartmentRecord['_id'];\n\t\toldDepartmentId: ILivechatDepartmentRecord['_id'];\n\t}) => {\n\t\trid: IRoom['_id'];\n\t\tnewDepartmentId: ILivechatDepartmentRecord['_id'];\n\t\toldDepartmentId: ILivechatDepartmentRecord['_id'];\n\t};\n\t'livechat.afterInquiryQueued': (inquiry: ILivechatInquiryRecord) => ILivechatInquiryRecord;\n\t'livechat.afterRemoveDepartment': (params: { departmentId: ILivechatDepartmentRecord['_id']; agentsId: ILivechatAgent['_id'][] }) => {\n\t\tdepartmentId: ILivechatDepartmentRecord['_id'];\n\t\tagentsId: ILivechatAgent['_id'][];\n\t};\n\t'livechat.applySimultaneousChatRestrictions': (_: undefined, params: { departmentId?: ILivechatDepartmentRecord['_id'] }) => undefined;\n\t'livechat.beforeCloseRoom': (params: { room: IRoom; options: unknown }) => { room: IRoom; options: unknown };\n\t'livechat.beforeDelegateAgent': (agent: ILivechatAgent, params: { department?: ILivechatDepartmentRecord }) => ILivechatAgent;\n\t'livechat.applyDepartmentRestrictions': (\n\t\tquery: FilterQuery<ILivechatDepartmentRecord>,\n\t\tparams: { userId: IUser['_id'] },\n\t) => FilterQuery<ILivechatDepartmentRecord>;\n\t'livechat.onMaxNumberSimultaneousChatsReached': (inquiry: ILivechatInquiryRecord) => ILivechatInquiryRecord;\n\t'on-business-hour-start': (params: { BusinessHourBehaviorClass: { new (): IBusinessHourBehavior } }) => {\n\t\tBusinessHourBehaviorClass: { new (): IBusinessHourBehavior };\n\t};\n};\n\ntype Hook =\n\t| keyof EventLikeCallbackSignatures\n\t| keyof ChainedCallbackSignatures\n\t| 'afterJoinRoom'\n\t| 'afterLeaveRoom'\n\t| 'afterLogoutCleanUp'\n\t| 'afterProcessOAuthUser'\n\t| 'afterRemoveFromRoom'\n\t| 'afterRoomArchived'\n\t| 'afterRoomNameChange'\n\t| 'afterSaveUser'\n\t| 'afterValidateLogin'\n\t| 'afterValidateNewOAuthUser'\n\t| 'archiveRoom'\n\t| 'beforeActivateUser'\n\t| 'beforeCreateRoom'\n\t| 'beforeCreateUser'\n\t| 'beforeGetMentions'\n\t| 'beforeJoinRoom'\n\t| 'beforeLeaveRoom'\n\t| 'beforeReadMessages'\n\t| 'beforeRemoveFromRoom'\n\t| 'beforeSaveMessage'\n\t| 'beforeSendMessageNotifications'\n\t| 'beforeValidateLogin'\n\t| 'cachedCollection-loadFromServer-rooms'\n\t| 'cachedCollection-loadFromServer-subscriptions'\n\t| 'cachedCollection-received-rooms'\n\t| 'cachedCollection-received-subscriptions'\n\t| 'cachedCollection-sync-rooms'\n\t| 'cachedCollection-sync-subscriptions'\n\t| 'enter-room'\n\t| 'livechat.beforeForwardRoomToDepartment'\n\t| 'livechat.beforeInquiry'\n\t| 'livechat.beforeListTags'\n\t| 'livechat.beforeRoom'\n\t| 'livechat.beforeRouteChat'\n\t| 'livechat.chatQueued'\n\t| 'livechat.checkAgentBeforeTakeInquiry'\n\t| 'livechat.checkDefaultAgentOnNewRoom'\n\t| 'livechat.closeRoom'\n\t| 'livechat.leadCapture'\n\t| 'livechat.newRoom'\n\t| 'livechat.offlineMessage'\n\t| 'livechat.onAgentAssignmentFailed'\n\t| 'livechat.onCheckRoomApiParams'\n\t| 'livechat.onLoadConfigApi'\n\t| 'livechat.onLoadForwardDepartmentRestrictions'\n\t| 'livechat.saveInfo'\n\t| 'loginPageStateChange'\n\t| 'mapLDAPUserData'\n\t| 'oembed:afterParseContent'\n\t| 'oembed:beforeGetUrlContent'\n\t| 'onCreateUser'\n\t| 'onLDAPLogin'\n\t| 'onValidateLogin'\n\t| 'openBroadcast'\n\t| 'renderMessage'\n\t| 'renderNotification'\n\t| 'roomAnnouncementChanged'\n\t| 'roomAvatarChanged'\n\t| 'roomNameChanged'\n\t| 'roomTopicChanged'\n\t| 'roomTypeChanged'\n\t| 'setReaction'\n\t| 'streamMessage'\n\t| 'streamNewMessage'\n\t| 'unarchiveRoom'\n\t| 'unsetReaction'\n\t| 'userAvatarSet'\n\t| 'userConfirmationEmailRequested'\n\t| 'userForgotPasswordEmailRequested'\n\t| 'usernameSet'\n\t| 'userPasswordReset'\n\t| 'userRegistered'\n\t| 'userStatusManuallySet';\n\ntype Callback = {\n\t(item: unknown, constant?: unknown): unknown;\n\thook: Hook;\n\tid: string;\n\tpriority: CallbackPriority;\n\tstack: string;\n};\n\ntype CallbackTracker = (callback: Callback) => () => void;\n\ntype HookTracker = (params: { hook: Hook; length: number }) => () => void;\n\nclass Callbacks {\n\tprivate logger: Logger | undefined = undefined;\n\n\tprivate trackCallback: CallbackTracker | undefined = undefined;\n\n\tprivate trackHook: HookTracker | undefined = undefined;\n\n\tprivate callbacks = new Map<Hook, Callback[]>();\n\n\tprivate sequentialRunners = new Map<Hook, (item: unknown, constant?: unknown) => unknown>();\n\n\tprivate asyncRunners = new Map<Hook, (item: unknown, constant?: unknown) => unknown>();\n\n\treadonly priority = CallbackPriority;\n\n\tsetLogger(logger: Logger): void {\n\t\tthis.logger = logger;\n\t}\n\n\tsetMetricsTrackers({ trackCallback, trackHook }: { trackCallback?: CallbackTracker; trackHook?: HookTracker }): void {\n\t\tthis.trackCallback = trackCallback;\n\t\tthis.trackHook = trackHook;\n\t}\n\n\tprivate runOne(callback: Callback, item: unknown, constant: unknown): unknown {\n\t\tconst stopTracking = this.trackCallback?.(callback);\n\n\t\ttry {\n\t\t\treturn callback(item, constant);\n\t\t} finally {\n\t\t\tstopTracking?.();\n\t\t}\n\t}\n\n\tprivate createSequentialRunner(hook: Hook, callbacks: Callback[]): (item: unknown, constant?: unknown) => unknown {\n\t\tconst wrapCallback =\n\t\t\t(callback: Callback) =>\n\t\t\t(item: unknown, constant?: unknown): unknown => {\n\t\t\t\tthis.logger?.debug(`Executing callback with id ${callback.id} for hook ${callback.hook}`);\n\n\t\t\t\treturn this.runOne(callback, item, constant) ?? item;\n\t\t\t};\n\n\t\tconst identity = <TItem>(item: TItem): TItem => item;\n\n\t\tconst pipe =\n\t\t\t(curr: (item: unknown, constant?: unknown) => unknown, next: (item: unknown, constant?: unknown) => unknown) =>\n\t\t\t(item: unknown, constant?: unknown): unknown =>\n\t\t\t\tnext(curr(item, constant), constant);\n\n\t\tconst fn = callbacks.map(wrapCallback).reduce(pipe, identity);\n\n\t\treturn (item: unknown, constant?: unknown): unknown => {\n\t\t\tconst stopTracking = this.trackHook?.({ hook, length: callbacks.length });\n\n\t\t\ttry {\n\t\t\t\treturn fn(item, constant);\n\t\t\t} finally {\n\t\t\t\tstopTracking?.();\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate createAsyncRunner(_: Hook, callbacks: Callback[]) {\n\t\treturn (item: unknown, constant?: unknown): unknown => {\n\t\t\tif (typeof window !== 'undefined') {\n\t\t\t\tthrow new Error('callbacks.runAsync on client server not allowed');\n\t\t\t}\n\n\t\t\tfor (const callback of callbacks) {\n\t\t\t\tMeteor.defer(() => {\n\t\t\t\t\tthis.runOne(callback, item, constant);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn item;\n\t\t};\n\t}\n\n\tgetCallbacks(hook: Hook): Callback[] {\n\t\treturn this.callbacks.get(hook) ?? [];\n\t}\n\n\tsetCallbacks(hook: Hook, callbacks: Callback[]): void {\n\t\tthis.callbacks.set(hook, callbacks);\n\t\tthis.sequentialRunners.set(hook, this.createSequentialRunner(hook, callbacks));\n\t\tthis.asyncRunners.set(hook, this.createAsyncRunner(hook, callbacks));\n\t}\n\n\t/**\n\t * Add a callback function to a hook\n\t *\n\t * @param hook the name of the hook\n\t * @param callback the callback function\n\t * @param priority the callback run priority (order)\n\t * @param id human friendly name for this callback\n\t */\n\tadd<THook extends keyof EventLikeCallbackSignatures>(\n\t\thook: THook,\n\t\tcallback: EventLikeCallbackSignatures[THook],\n\t\tpriority?: CallbackPriority,\n\t\tid?: string,\n\t): void;\n\n\tadd<THook extends keyof ChainedCallbackSignatures>(\n\t\thook: THook,\n\t\tcallback: ChainedCallbackSignatures[THook],\n\t\tpriority?: CallbackPriority,\n\t\tid?: string,\n\t): void;\n\n\tadd<TItem, TConstant, TNextItem = TItem>(\n\t\thook: Hook,\n\t\tcallback: (item: TItem, constant?: TConstant) => TNextItem,\n\t\tpriority?: CallbackPriority,\n\t\tid?: string,\n\t): void;\n\n\tadd(hook: Hook, callback: (item: unknown, constant?: unknown) => unknown, priority = this.priority.MEDIUM, id = getRandomId()): void {\n\t\tconst callbacks = this.getCallbacks(hook);\n\n\t\tif (callbacks.some((cb) => cb.id === id)) {\n\t\t\treturn;\n\t\t}\n\n\t\tcallbacks.push(\n\t\t\tObject.assign(callback as Callback, {\n\t\t\t\thook,\n\t\t\t\tpriority,\n\t\t\t\tid,\n\t\t\t\tstack: new Error().stack,\n\t\t\t}),\n\t\t);\n\t\tconst rank = (callback: Callback): number => callback.priority ?? this.priority.MEDIUM;\n\t\tcallbacks.sort((a, b) => rank(a) - rank(b));\n\n\t\tthis.setCallbacks(hook, callbacks);\n\t}\n\n\t/**\n\t * Remove a callback from a hook\n\t *\n\t * @param hook the name of the hook\n\t * @param id the callback's id\n\t */\n\tremove(hook: Hook, id: string): void {\n\t\tconst hooks = this.getCallbacks(hook).filter((callback) => callback.id !== id);\n\t\tthis.setCallbacks(hook, hooks);\n\t}\n\n\t/**\n\t * Successively run all of a hook's callbacks on an item\n\t *\n\t * @param hook the name of the hook\n\t * @param item the post, comment, modifier, etc. on which to run the callbacks\n\t * @param constant an optional constant that will be passed along to each callback\n\t * @returns returns the item after it's been through all the callbacks for this hook\n\t */\n\trun<THook extends keyof EventLikeCallbackSignatures>(hook: THook, ...args: Parameters<EventLikeCallbackSignatures[THook]>): void;\n\n\trun<THook extends keyof ChainedCallbackSignatures>(\n\t\thook: THook,\n\t\t...args: Parameters<ChainedCallbackSignatures[THook]>\n\t): ReturnType<ChainedCallbackSignatures[THook]>;\n\n\trun<TItem, TConstant, TNextItem = TItem>(hook: Hook, item: TItem, constant?: TConstant): TNextItem;\n\n\trun(hook: Hook, item: unknown, constant?: unknown): unknown {\n\t\tconst runner = this.sequentialRunners.get(hook) ?? ((item: unknown, _constant?: unknown): unknown => item);\n\t\treturn runner(item, constant);\n\t}\n\n\t/**\n\t * Successively run all of a hook's callbacks on an item, in async mode (only works on server)\n\t *\n\t * @param hook the name of the hook\n\t * @param item the post, comment, modifier, etc. on which to run the callbacks\n\t * @param constant an optional constant that will be passed along to each callback\n\t * @returns the post, comment, modifier, etc. on which to run the callbacks\n\t */\n\trunAsync<THook extends keyof EventLikeCallbackSignatures>(hook: THook, ...args: Parameters<EventLikeCallbackSignatures[THook]>): void;\n\n\trunAsync(hook: Hook, item: unknown, constant?: unknown): unknown {\n\t\tconst runner = this.asyncRunners.get(hook) ?? ((item: unknown, _constant?: unknown): unknown => item);\n\t\treturn runner(item, constant);\n\t}\n}\n\n/**\n * Callback hooks provide an easy way to add extra steps to common operations.\n * @deprecated\n */\nexport const callbacks = new Callbacks();\n","export const validateEmail = (email: string, options: { style: string } = { style: 'basic' }): boolean => {\n\tconst basicEmailRegex = /^[^@]+@[^@]+$/;\n\tconst rfcEmailRegex =\n\t\t/^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n\n\tswitch (options.style) {\n\t\tcase 'rfc':\n\t\t\treturn rfcEmailRegex.test(email);\n\t\tcase 'basic':\n\t\tdefault:\n\t\t\treturn basicEmailRegex.test(email);\n\t}\n};\n","const extensionsMap: Record<string, string> = {\n\t'image/apng': 'apng',\n\t'image/avif': 'avif',\n\t'image/gif': 'gif',\n\t'image/jpeg': 'jpg',\n\t'image/png': 'png',\n\t'image/svg+xml': 'svg',\n\t'image/webp': 'webp',\n\t'image/bmp': 'bmp',\n\t'image/x-icon': 'ico',\n\t'image/tiff': 'tif',\n};\n\nexport const getImageExtensionFromMime = (mime: string): string | undefined => extensionsMap[mime];\n","import { Random } from 'meteor/random';\n\n/**\n * Facade for Meteor's `Random.id` function\n *\n * @param length length of the identifier in characters\n * @returns a unique identifier, such as `\"Jjwjg6gouWLXhMGKW\"`, that is likely to be unique in the whole world\n */\nexport const getRandomId = (length?: number): string => Random.id(length);\n","type Transform<T, U extends T | Promise<T>> = (x: T) => U;\n\ntype TransformChain<T, U extends T | Promise<T>> = {\n\t(x: T): U;\n\tuse(transform: Transform<T, U>): () => void;\n};\n\nexport const createTransformChain = <T>(...transforms: Transform<T, T>[]): TransformChain<T, T> => {\n\tlet chain = transforms;\n\n\tconst call = (x: T): T => chain.reduce((x, transform) => transform(x), x);\n\n\tconst use = (transform: Transform<T, T>): (() => void) => {\n\t\tchain.push(transform);\n\n\t\treturn (): void => {\n\t\t\tchain = chain.filter((t) => t !== transform);\n\t\t};\n\t};\n\n\treturn Object.assign(call, { use });\n};\n\nexport const createAsyncTransformChain = <T>(...transforms: Transform<T, Promise<T>>[]): TransformChain<T, Promise<T>> => {\n\tlet chain = transforms;\n\n\tconst call = (x: T): Promise<T> => chain.reduce((x, transform) => x.then(transform), Promise.resolve(x));\n\n\tconst use = (transform: Transform<T, Promise<T>>): (() => void) => {\n\t\tchain.push(transform);\n\n\t\treturn (): void => {\n\t\t\tchain = chain.filter((t) => t !== transform);\n\t\t};\n\t};\n\n\treturn Object.assign(call, { use });\n};\n","import { ISetting, ISettingColor } from '../../ISetting';\nimport { PaginatedResult } from '../helpers/PaginatedResult';\n\ntype SettingsUpdateProps = SettingsUpdatePropDefault | SettingsUpdatePropsActions | SettingsUpdatePropsColor;\n\ntype SettingsUpdatePropsActions = {\n\texecute: boolean;\n};\n\nexport type OauthCustomConfiguration = {\n\t_id: string;\n\tclientId?: string;\n\tcustom: unknown;\n\tservice?: string;\n\tserverURL: unknown;\n\ttokenPath: unknown;\n\tidentityPath: unknown;\n\tauthorizePath: unknown;\n\tscope: unknown;\n\tloginStyle: 'popup' | 'redirect';\n\ttokenSentVia: unknown;\n\tidentityTokenSentVia: unknown;\n\tkeyField: unknown;\n\tusernameField: unknown;\n\temailField: unknown;\n\tnameField: unknown;\n\tavatarField: unknown;\n\trolesClaim: unknown;\n\tgroupsClaim: unknown;\n\tmapChannels: unknown;\n\tchannelsMap: unknown;\n\tchannelsAdmin: unknown;\n\tmergeUsers: unknown;\n\tmergeRoles: unknown;\n\taccessTokenParam: unknown;\n\tshowButton: unknown;\n\n\tappId: unknown;\n\tconsumerKey?: string;\n\n\tclientConfig: unknown;\n\tbuttonLabelText: unknown;\n\tbuttonLabelColor: unknown;\n\tbuttonColor: unknown;\n};\n\nexport const isOauthCustomConfiguration = (config: any): config is OauthCustomConfiguration => Boolean(config);\n\nexport const isSettingsUpdatePropsActions = (props: Partial<SettingsUpdateProps>): props is SettingsUpdatePropsActions =>\n\t'execute' in props;\n\ntype SettingsUpdatePropsColor = {\n\teditor: ISettingColor['editor'];\n\tvalue: ISetting['value'];\n};\n\nexport const isSettingsUpdatePropsColor = (props: Partial<SettingsUpdateProps>): props is SettingsUpdatePropsColor =>\n\t'editor' in props && 'value' in props;\n\ntype SettingsUpdatePropDefault = {\n\tvalue: ISetting['value'];\n};\n\nexport const isSettingsUpdatePropDefault = (props: Partial<SettingsUpdateProps>): props is SettingsUpdatePropDefault => 'value' in props;\n\nexport type SettingsEndpoints = {\n\t'settings.public': {\n\t\tGET: () => PaginatedResult & {\n\t\t\tsettings: Array<ISetting>;\n\t\t};\n\t};\n\n\t'settings.oauth': {\n\t\tGET: () => {\n\t\t\tservices: Partial<OauthCustomConfiguration>[];\n\t\t};\n\t};\n\n\t'settings.addCustomOAuth': {\n\t\tPOST: (params: { name: string }) => void;\n\t};\n\n\t'settings': {\n\t\tGET: () => {\n\t\t\tsettings: ISetting[];\n\t\t};\n\t};\n\n\t'settings/:_id': {\n\t\tGET: () => Pick<ISetting, '_id' | 'value'>;\n\t\tPOST: (params: SettingsUpdateProps) => void;\n\t};\n\n\t'service.configurations': {\n\t\tGET: () => {\n\t\t\tconfigurations: Array<{\n\t\t\t\tappId: string;\n\t\t\t\tsecret: string;\n\t\t\t}>;\n\t\t};\n\t};\n};\n","import { IRocketChatRecord } from './IRocketChatRecord';\nimport { IUser } from './IUser';\nimport { UiKitBannerPayload } from './UIKit';\n\nexport enum BannerPlatform {\n\tWeb = 'web',\n\tMobile = 'mobile',\n}\nexport interface IBanner extends IRocketChatRecord {\n\tplatform: BannerPlatform[]; // pĺatforms a banner could be shown\n\texpireAt: Date; // date when banner should not be shown anymore\n\tstartAt: Date; // start date a banner should be presented\n\troles?: string[]; // only show the banner to this roles\n\tcreatedBy: Pick<IUser, '_id' | 'username'>;\n\tcreatedAt: Date;\n\tview: UiKitBannerPayload;\n\tactive?: boolean;\n\tinactivedAt?: Date;\n\tsnapshot?: string;\n}\n\nexport type InactiveBanner = IBanner & {\n\tactive: false;\n\tinactivedAt: Date;\n};\n\nexport const isInactiveBanner = (banner: IBanner): banner is InactiveBanner => banner.active === false;\n\nexport interface IBannerDismiss extends IRocketChatRecord {\n\tuserId: IUser['_id']; // user receiving the banner dismissed\n\tbannerId: IBanner['_id']; // banner dismissed\n\tdismissedAt: Date; // when is was dismissed\n\tdismissedBy: Pick<IUser, '_id' | 'username'>; // who dismissed (usually the same as userId)\n}\n","import { ILivechatDepartment } from './ILivechatDepartment';\n\nexport enum LivechatBusinessHourTypes {\n\tDEFAULT = 'default',\n\tCUSTOM = 'custom',\n}\n\nexport enum LivechatBusinessHourBehaviors {\n\tSINGLE = 'Single',\n\tMULTIPLE = 'Multiple',\n}\n\ninterface IBusinessHourTime {\n\ttime: string;\n\tutc: { dayOfWeek: string; time: string };\n\tcron: { dayOfWeek: string; time: string };\n}\n\nexport interface IBusinessHourWorkHour {\n\tday: string;\n\tstart: IBusinessHourTime;\n\tfinish: IBusinessHourTime;\n\topen: boolean;\n\tcode: unknown;\n}\n\nexport interface IBusinessHourTimezone {\n\tname: string;\n\tutc: string;\n}\n\nexport interface ILivechatBusinessHour {\n\t_id: string;\n\tname: string;\n\tactive: boolean;\n\ttype: LivechatBusinessHourTypes;\n\ttimezone: IBusinessHourTimezone;\n\tts: Date;\n\tworkHours: IBusinessHourWorkHour[];\n\t_updatedAt?: Date;\n\tdepartments?: ILivechatDepartment[];\n}\n","import { IRocketChatRecord } from './IRocketChatRecord';\nimport { IMessage } from './IMessage';\nimport { IUser, Username } from './IUser';\n\nexport type RoomType = 'c' | 'd' | 'p' | 'l';\ntype CallStatus = 'ringing' | 'ended' | 'declined' | 'ongoing';\n\nexport type RoomID = string;\nexport type ChannelName = string;\ninterface IRequestTranscript {\n\temail: string;\n\trequestedAt: Date;\n\trequestedBy: IUser;\n\tsubject: string;\n}\n\nexport interface IRoom extends IRocketChatRecord {\n\t_id: RoomID;\n\tt: RoomType;\n\tname?: string;\n\tfname: string;\n\tmsgs: number;\n\tdefault?: true;\n\tbroadcast?: true;\n\tfeatured?: true;\n\tencrypted?: boolean;\n\ttopic: any;\n\n\tu: Pick<IUser, '_id' | 'username' | 'name'>;\n\tuids: Array<string>;\n\n\tlastMessage?: IMessage;\n\tlm?: Date;\n\tusersCount: number;\n\tjitsiTimeout: Date;\n\tcallStatus?: CallStatus;\n\twebRtcCallStartTime?: Date;\n\tservedBy?: {\n\t\t_id: string;\n\t};\n\n\tstreamingOptions?: {\n\t\tid?: string;\n\t\ttype: string;\n\t};\n\n\tprid?: string;\n\tavatarETag?: string;\n\ttokenpass?: {\n\t\trequire: string;\n\t\ttokens: {\n\t\t\ttoken: string;\n\t\t\tbalance: number;\n\t\t}[];\n\t};\n\n\tteamMain?: boolean;\n\tteamId?: string;\n\tteamDefault?: boolean;\n\topen?: boolean;\n\n\tautoTranslateLanguage: string;\n\tautoTranslate?: boolean;\n\tunread?: number;\n\talert?: boolean;\n\thideUnreadStatus?: boolean;\n\n\tsysMes?: string[];\n\tmuted?: string[];\n\n\tusernames?: string[];\n\tts?: Date;\n}\n\nexport interface ICreatedRoom extends IRoom {\n\trid: string;\n}\n\nexport interface ITeamRoom extends IRoom {\n\tteamMain: boolean;\n\tteamId: string;\n}\n\nexport const isTeamRoom = (room: Partial<IRoom>): room is ITeamRoom => !!room.teamMain;\nexport const isPrivateTeamRoom = (room: Partial<IRoom>): room is ITeamRoom => isTeamRoom(room) && room.t === 'p';\nexport const isPublicTeamRoom = (room: Partial<IRoom>): room is ITeamRoom => isTeamRoom(room) && room.t === 'c';\n\nexport const isDiscussion = (room: Partial<IRoom>): room is IRoom => !!room.prid;\nexport const isPrivateDiscussion = (room: Partial<IRoom>): room is IRoom => isDiscussion(room) && room.t === 'p';\nexport const isPublicDiscussion = (room: Partial<IRoom>): room is IRoom => isDiscussion(room) && room.t === 'c';\n\nexport interface IDirectMessageRoom extends Omit<IRoom, 'default' | 'featured' | 'u' | 'name'> {\n\tt: 'd';\n\tuids: Array<string>;\n\tusernames: Array<Username>;\n}\n\nexport const isDirectMessageRoom = (room: Partial<IRoom>): room is IDirectMessageRoom => room.t === 'd';\nexport const isMultipleDirectMessageRoom = (room: Partial<IRoom>): room is IDirectMessageRoom =>\n\tisDirectMessageRoom(room) && room.uids.length > 2;\n\nexport enum OmnichannelSourceType {\n\tWIDGET = 'widget',\n\tEMAIL = 'email',\n\tSMS = 'sms',\n\tAPP = 'app',\n\tAPI = 'api',\n\tOTHER = 'other', // catch-all source type\n}\n\nexport interface IOmnichannelRoom extends Omit<IRoom, 'default' | 'featured' | 'broadcast' | ''> {\n\tt: 'l';\n\tv: {\n\t\t_id?: string;\n\t\ttoken?: string;\n\t\tstatus: 'online' | 'busy' | 'away' | 'offline';\n\t};\n\temail?: {\n\t\t// Data used when the room is created from an email, via email Integration.\n\t\tinbox: string;\n\t\tthread: string;\n\t\treplyTo: string;\n\t\tsubject: string;\n\t};\n\tsource: {\n\t\t// TODO: looks like this is not so required as the definition suggests\n\t\t// The source, or client, which created the Omnichannel room\n\t\ttype: OmnichannelSourceType;\n\t\t// An optional identification of external sources, such as an App\n\t\tid?: string;\n\t\t// A human readable alias that goes with the ID, for post analytical purposes\n\t\talias?: string;\n\t\t// A label to be shown in the room info\n\t\tlabel?: string;\n\t\t// The sidebar icon\n\t\tsidebarIcon?: string;\n\t\t// The default sidebar icon\n\t\tdefaultIcon?: string;\n\t};\n\ttranscriptRequest?: IRequestTranscript;\n\tservedBy?: {\n\t\t_id: string;\n\t\tts: Date;\n\t\tusername: IUser['username'];\n\t};\n\tonHold?: boolean;\n\tdepartmentId?: string;\n\n\tlastMessage?: IMessage & { token?: string };\n\n\ttags: any;\n\tclosedAt: any;\n\tmetrics: any;\n\twaitingResponse: any;\n\tresponseBy: any;\n\tpriorityId: any;\n\tlivechatData: any;\n\tqueuedAt?: Date;\n\n\tts: Date;\n\tlabel?: string;\n\tcrmData?: unknown;\n}\n\nexport interface IOmnichannelRoomFromAppSource extends IOmnichannelRoom {\n\tsource: {\n\t\ttype: OmnichannelSourceType.APP;\n\t\tid: string;\n\t\talias?: string;\n\t\tsidebarIcon?: string;\n\t\tdefaultIcon?: string;\n\t};\n}\n\nexport const isOmnichannelRoom = (room: IRoom): room is IOmnichannelRoom & IRoom => room.t === 'l';\n\nexport const isOmnichannelRoomFromAppSource = (room: IRoom): room is IOmnichannelRoomFromAppSource => {\n\tif (!isOmnichannelRoom(room)) {\n\t\treturn false;\n\t}\n\n\treturn room.source?.type === OmnichannelSourceType.APP;\n};\n","import { UIKitInteractionType as UIKitInteractionTypeApi } from '@rocket.chat/apps-engine/definition/uikit';\nimport {\n\tIDividerBlock,\n\tISectionBlock,\n\tIActionsBlock,\n\tIContextBlock,\n\tIInputBlock,\n} from '@rocket.chat/apps-engine/definition/uikit/blocks/Blocks';\n\nenum UIKitInteractionTypeExtended {\n\tBANNER_OPEN = 'banner.open',\n\tBANNER_UPDATE = 'banner.update',\n\tBANNER_CLOSE = 'banner.close',\n}\n\nexport type UIKitInteractionType = UIKitInteractionTypeApi | UIKitInteractionTypeExtended;\n\nexport const UIKitInteractionTypes = {\n\t...UIKitInteractionTypeApi,\n\t...UIKitInteractionTypeExtended,\n};\n\nexport type UiKitPayload = {\n\tviewId: string;\n\tappId: string;\n\tblocks: (IDividerBlock | ISectionBlock | IActionsBlock | IContextBlock | IInputBlock)[];\n};\n\nexport type UiKitBannerPayload = UiKitPayload & {\n\tinline?: boolean;\n\tvariant?: 'neutral' | 'info' | 'success' | 'warning' | 'danger';\n\ticon?: string;\n\ttitle?: string;\n};\n\nexport type UIKitUserInteraction = {\n\ttype: UIKitInteractionType;\n} & UiKitPayload;\n\nexport type UiKitBannerProps = {\n\tpayload: UiKitBannerPayload;\n};\n\nexport type UIKitUserInteractionResult = UIKitUserInteractionResultError | UIKitUserInteraction;\n\ntype UIKitUserInteractionResultError = UIKitUserInteraction & {\n\ttype: UIKitInteractionTypeApi.ERRORS;\n\terrors?: Array<{ [key: string]: string }>;\n};\n\nexport const isErrorType = (result: UIKitUserInteractionResult): result is UIKitUserInteractionResultError =>\n\tresult.type === UIKitInteractionTypeApi.ERRORS;\n\nexport type UIKitActionEvent = {\n\tblockId: string;\n\tvalue?: unknown;\n\tappId: string;\n\tactionId: string;\n\tviewId: string;\n};\n","export enum UserStatus {\n\tONLINE = 'online',\n\tAWAY = 'away',\n\tOFFLINE = 'offline',\n\tBUSY = 'busy',\n}\n"]}