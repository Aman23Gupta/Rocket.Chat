{"version":3,"sources":["meteor://💻app/app/ui/client/lib/codeMirror/codeMirrorComponent.js","meteor://💻app/app/ui/client/lib/codeMirror/index.js","meteor://💻app/app/ui/client/lib/recorderjs/audioEncoder.js","meteor://💻app/app/ui/client/lib/recorderjs/audioRecorder.js","meteor://💻app/app/ui/client/lib/recorderjs/videoRecorder.js","meteor://💻app/app/ui/client/lib/Tooltip.js","meteor://💻app/app/ui/client/lib/UserAction.ts","meteor://💻app/app/ui/client/lib/UserCard.js","meteor://💻app/app/ui/client/lib/accounts.js","meteor://💻app/app/ui/client/lib/chatMessages.js","meteor://💻app/app/ui/client/lib/collections.js","meteor://💻app/app/ui/client/lib/fileUpload.js","meteor://💻app/app/ui/client/lib/iframeCommands.js","meteor://💻app/app/ui/client/lib/menu.js","meteor://💻app/app/ui/client/lib/notification.js","meteor://💻app/app/ui/client/lib/parentTemplate.js","meteor://💻app/app/ui/client/lib/rocket.js","meteor://💻app/app/ui/client/lib/textarea-cursor.js","meteor://💻app/app/ui/client/lib/userPopoverStatus.js","meteor://💻app/app/ui/client/components/header/header.js","meteor://💻app/app/ui/client/components/icon.js","meteor://💻app/app/ui/client/components/popupList.js","meteor://💻app/app/ui/client/components/table.js","meteor://💻app/app/ui/client/components/tabs.js","meteor://💻app/app/ui/client/components/tooltip.js","meteor://💻app/app/ui/client/views/app/lib/getCommonRoomEvents.js","meteor://💻app/app/ui/client/views/app/burger.js","meteor://💻app/app/ui/client/views/app/home.js","meteor://💻app/app/ui/client/views/app/photoswipeContent.ts","meteor://💻app/app/ui/client/views/app/room.js","meteor://💻app/app/ui/client/views/app/roomSearch.js","meteor://💻app/app/ui/client/index.ts","meteor://💻app/app/ui/index.ts","meteor://💻app/app/lib/client/views/customFieldsForm.js","meteor://💻app/app/lib/client/lib/LoginPresence.js","meteor://💻app/app/lib/client/lib/RocketChatAnnouncement.js","meteor://💻app/app/lib/client/lib/index.js","meteor://💻app/app/lib/client/methods/sendMessage.js","meteor://💻app/app/lib/client/startup/settingsOnLoadSiteUrl.ts","meteor://💻app/app/lib/client/OAuthProxy.js","meteor://💻app/app/lib/client/index.js","meteor://💻app/app/lib/lib/roomTypes/conversation.js","meteor://💻app/app/lib/lib/roomTypes/direct.js","meteor://💻app/app/lib/lib/roomTypes/favorite.js","meteor://💻app/app/lib/lib/roomTypes/index.js","meteor://💻app/app/lib/lib/roomTypes/private.js","meteor://💻app/app/lib/lib/roomTypes/public.js","meteor://💻app/app/lib/lib/roomTypes/unread.js","meteor://💻app/app/lib/lib/MessageTypes.js","meteor://💻app/app/lib/startup/defaultRoomTypes.js","meteor://💻app/app/lib/index.js","meteor://💻app/app/ui-utils/client/lib/AccountBox.js","meteor://💻app/app/ui-utils/client/lib/IframeLogin.js","meteor://💻app/app/ui-utils/client/lib/MessageAction.js","meteor://💻app/app/ui-utils/client/lib/RoomHistoryManager.js","meteor://💻app/app/ui-utils/client/lib/RoomManager.js","meteor://💻app/app/ui-utils/client/lib/SideNav.js","meteor://💻app/app/ui-utils/client/lib/collapseArrow.js","meteor://💻app/app/ui-utils/client/lib/mainReady.js","meteor://💻app/app/ui-utils/client/lib/menu.js","meteor://💻app/app/ui-utils/client/lib/messageArgs.js","meteor://💻app/app/ui-utils/client/lib/messageBox.js","meteor://💻app/app/ui-utils/client/lib/messageContext.js","meteor://💻app/app/ui-utils/client/lib/modal.js","meteor://💻app/app/ui-utils/client/lib/openRoom.js","meteor://💻app/app/ui-utils/client/lib/popout.js","meteor://💻app/app/ui-utils/client/lib/popover.js","meteor://💻app/app/ui-utils/client/lib/readMessages.js","meteor://💻app/app/ui-utils/client/index.js","meteor://💻app/app/ui-utils/lib/Message.js","meteor://💻app/app/ui-utils/lib/MessageProperties.js","meteor://💻app/app/ui-utils/lib/MessageTypes.js","meteor://💻app/app/ui-utils/index.js","meteor://💻app/app/livechat/client/views/app/dialog/closeRoom.js","meteor://💻app/app/livechat/client/views/app/business-hours/BusinessHours.ts","meteor://💻app/app/livechat/client/views/app/business-hours/Single.ts","meteor://💻app/app/livechat/client/views/app/customTemplates/register.js","meteor://💻app/app/livechat/client/externalFrame/crypto.ts","meteor://💻app/app/livechat/client/externalFrame/externalFrameContainer.js","meteor://💻app/app/livechat/client/externalFrame/generateNewKey.ts","meteor://💻app/app/livechat/client/externalFrame/index.js","meteor://💻app/app/livechat/client/externalFrame/tabBar.ts","meteor://💻app/app/livechat/client/lib/messageTypes.js","meteor://💻app/app/livechat/client/collections/LivechatInquiry.js","meteor://💻app/app/livechat/client/startup/notifyUnreadRooms.js","meteor://💻app/app/livechat/client/index.js","meteor://💻app/app/livechat/client/roomType.js","meteor://💻app/app/livechat/client/route.js","meteor://💻app/app/livechat/client/tabBar.ts","meteor://💻app/app/livechat/client/ui.js","meteor://💻app/app/livechat/lib/LivechatRoomType.js","meteor://💻app/app/livechat/lib/messageTypes.js","meteor://💻app/app/message-snippet/client/tabBar/views/snippetedMessages.js","meteor://💻app/app/message-snippet/client/tabBar/tabBar.ts","meteor://💻app/app/message-snippet/client/page/snippetPage.js","meteor://💻app/app/message-snippet/client/actionButton.js","meteor://💻app/app/message-snippet/client/index.js","meteor://💻app/app/message-snippet/client/messageType.js","meteor://💻app/app/message-snippet/client/snippetMessage.js","meteor://💻app/app/apps/client/gameCenter/gameCenter.js","meteor://💻app/app/apps/client/gameCenter/gameContainer.js","meteor://💻app/app/apps/client/gameCenter/invitePlayers.js","meteor://💻app/app/apps/client/gameCenter/tabBar.ts","meteor://💻app/app/apps/client/communication/index.js","meteor://💻app/app/apps/client/communication/websockets.js","meteor://💻app/app/apps/client/RealAppsEngineUIHost.js","meteor://💻app/app/apps/client/i18n.js","meteor://💻app/app/apps/client/index.js","meteor://💻app/app/apps/client/orchestrator.js","meteor://💻app/app/apps/lib/misc/Utilities.js","meteor://💻app/app/chatpal-search/client/template/admin.js","meteor://💻app/app/chatpal-search/client/template/result.js","meteor://💻app/app/chatpal-search/client/template/suggestion.js","meteor://💻app/app/chatpal-search/client/index.js","meteor://💻app/app/livestream/client/views/broadcastView.js","meteor://💻app/app/livestream/client/views/liveStreamTab.js","meteor://💻app/app/livestream/client/views/liveStreamView.js","meteor://💻app/app/livestream/client/index.js","meteor://💻app/app/livestream/client/oauth.js","meteor://💻app/app/livestream/client/tabBar.tsx","meteor://💻app/app/mentions-flextab/client/views/mentionsFlexTab.js","meteor://💻app/app/mentions-flextab/client/actionButton.js","meteor://💻app/app/mentions-flextab/client/index.js","meteor://💻app/app/mentions-flextab/client/tabBar.ts","meteor://💻app/app/message-pin/client/views/pinnedMessages.js","meteor://💻app/app/message-pin/client/actionButton.js","meteor://💻app/app/message-pin/client/index.js","meteor://💻app/app/message-pin/client/messageType.js","meteor://💻app/app/message-pin/client/pinMessage.js","meteor://💻app/app/message-pin/client/tabBar.ts","meteor://💻app/app/message-star/client/views/starredMessages.js","meteor://💻app/app/message-star/client/actionButton.js","meteor://💻app/app/message-star/client/index.js","meteor://💻app/app/message-star/client/starMessage.js","meteor://💻app/app/message-star/client/tabBar.ts","meteor://💻app/app/oauth2-server-config/client/oauth/oauth2-client.js","meteor://💻app/app/oauth2-server-config/client/admin/startup.js","meteor://💻app/app/oauth2-server-config/client/index.js","meteor://💻app/app/search/client/provider/result.js","meteor://💻app/app/search/client/search/search.js","meteor://💻app/app/search/client/index.js","meteor://💻app/app/threads/client/flextab/messageBoxFollow.js","meteor://💻app/app/threads/client/flextab/thread.js","meteor://💻app/app/threads/client/flextab/threadlist.tsx","meteor://💻app/app/threads/client/flextab/threads.js","meteor://💻app/app/threads/client/lib/normalizeThreadTitle.js","meteor://💻app/app/threads/client/messageAction/follow.js","meteor://💻app/app/threads/client/messageAction/replyInThread.js","meteor://💻app/app/threads/client/messageAction/unfollow.js","meteor://💻app/app/threads/client/index.js","meteor://💻app/app/ui-account/client/avatar/avatar.js","meteor://💻app/app/ui-account/client/index.js","meteor://💻app/app/ui-login/client/login/form.js","meteor://💻app/app/ui-login/client/login/layout.js","meteor://💻app/app/ui-login/client/login/services.js","meteor://💻app/app/ui-login/client/username/username.js","meteor://💻app/app/ui-login/client/index.js","meteor://💻app/app/ui-master/client/loading/index.js","meteor://💻app/app/ui-master/client/body.js","meteor://💻app/app/ui-master/client/index.js","meteor://💻app/app/ui-message/client/messageBox/messageBox.js","meteor://💻app/app/ui-message/client/messageBox/messageBoxActions.js","meteor://💻app/app/ui-message/client/messageBox/messageBoxAudioMessage.js","meteor://💻app/app/ui-message/client/messageBox/messageBoxAutogrow.js","meteor://💻app/app/ui-message/client/messageBox/messageBoxFormatting.js","meteor://💻app/app/ui-message/client/messageBox/messageBoxNotSubscribed.js","meteor://💻app/app/ui-message/client/messageBox/messageBoxReadOnly.js","meteor://💻app/app/ui-message/client/messageBox/messageBoxReplyPreview.js","meteor://💻app/app/ui-message/client/messageBox/userActionIndicator.ts","meteor://💻app/app/ui-message/client/popup/customMessagePopups.js","meteor://💻app/app/ui-message/client/popup/messagePopup.js","meteor://💻app/app/ui-message/client/popup/messagePopupChannel.js","meteor://💻app/app/ui-message/client/popup/messagePopupConfig.js","meteor://💻app/app/ui-message/client/popup/messagePopupEmoji.js","meteor://💻app/app/ui-message/client/popup/messagePopupSlashCommandPreview.js","meteor://💻app/app/ui-message/client/actionButtons/lib/applyButtonFilters.ts","meteor://💻app/app/ui-message/client/actionButtons/messageAction.ts","meteor://💻app/app/ui-message/client/actionButtons/messageBox.ts","meteor://💻app/app/ui-message/client/actionButtons/tabbar.ts","meteor://💻app/app/ui-message/client/ActionButtonSyncer.ts","meteor://💻app/app/ui-message/client/ActionManager.js","meteor://💻app/app/ui-message/client/index.js","meteor://💻app/app/ui-message/client/message.js","meteor://💻app/app/ui-message/client/messageThread.js","meteor://💻app/app/videobridge/client/actionLink.js","meteor://💻app/app/videobridge/client/index.js","meteor://💻app/app/videobridge/client/tabBar.tsx","meteor://💻app/app/videobridge/lib/messageType.js","meteor://💻app/app/authorization/client/lib/ChatPermissions.js","meteor://💻app/app/authorization/client/lib/streamer.js","meteor://💻app/app/authorization/client/hasPermission.ts","meteor://💻app/app/authorization/client/hasRole.js","meteor://💻app/app/authorization/client/index.js","meteor://💻app/app/authorization/client/startup.js","meteor://💻app/app/authorization/lib/AuthorizationUtils.ts","meteor://💻app/app/authorization/index.js","meteor://💻app/app/emoji/client/lib/EmojiPicker.js","meteor://💻app/app/emoji/client/emojiParser.js","meteor://💻app/app/emoji/client/index.js","meteor://💻app/app/emoji/lib/rocketchat.js","meteor://💻app/app/emoji/index.js","meteor://💻app/app/lazy-load/client/index.js","meteor://💻app/app/lazy-load/client/lazyloadImage.js","meteor://💻app/app/meteor-autocomplete/client/autocomplete-client.js","meteor://💻app/app/meteor-autocomplete/client/collection.js","meteor://💻app/app/meteor-autocomplete/client/index.js","meteor://💻app/app/meteor-autocomplete/client/templates.js","meteor://💻app/app/oembed/client/baseWidget.js","meteor://💻app/app/oembed/client/index.js","meteor://💻app/app/oembed/client/oembedImageWidget.js","meteor://💻app/app/oembed/client/oembedUrlWidget.js","meteor://💻app/app/oembed/client/oembedVideoWidget.js","meteor://💻app/app/tokenpass/client/index.js","meteor://💻app/app/tokenpass/client/roomType.js","meteor://💻app/app/tokenpass/client/startup.js","meteor://💻app/app/tokenpass/client/tokenChannelsList.js","meteor://💻app/app/tokenpass/client/tokenpassChannelSettings.js","meteor://💻app/app/tokenpass/lib/common.js","meteor://💻app/app/ui-sidenav/client/index.js","meteor://💻app/app/ui-sidenav/client/roomList.js","meteor://💻app/app/ui-sidenav/client/sideNav.js","meteor://💻app/app/ui-sidenav/client/userPresence.js","meteor://💻app/app/ui-vrecord/client/VRecDialog.js","meteor://💻app/app/ui-vrecord/client/index.js","meteor://💻app/app/ui-vrecord/client/vrecord.js","meteor://💻app/app/webdav/client/index.js","meteor://💻app/app/discussion/client/lib/messageTypes/discussionMessage.js","meteor://💻app/app/discussion/client/createDiscussionMessageAction.js","meteor://💻app/app/discussion/client/discussionFromMessageBox.js","meteor://💻app/app/discussion/client/index.js","meteor://💻app/app/discussion/client/tabBar.ts","meteor://💻app/app/discussion/lib/discussionRoomType.js","meteor://💻app/app/markdown/lib/parser/filtered/filtered.js","meteor://💻app/app/markdown/lib/parser/marked/marked.js","meteor://💻app/app/markdown/lib/parser/original/code.js","meteor://💻app/app/markdown/lib/parser/original/markdown.js","meteor://💻app/app/markdown/lib/parser/original/original.js","meteor://💻app/app/markdown/lib/parser/original/token.ts","meteor://💻app/app/markdown/lib/getGlobalWindow.ts","meteor://💻app/app/markdown/lib/hljs.js","meteor://💻app/app/markdown/lib/markdown.js","meteor://💻app/app/markdown/client/getGlobalWindow.ts","meteor://💻app/app/markdown/client/index.js","meteor://💻app/app/action-links/client/lib/actionLinks.js","meteor://💻app/app/action-links/client/index.js","meteor://💻app/app/autotranslate/client/lib/actionButton.js","meteor://💻app/app/autotranslate/client/lib/autotranslate.js","meteor://💻app/app/autotranslate/client/lib/tabBar.ts","meteor://💻app/app/autotranslate/client/index.js","meteor://💻app/app/channel-settings/client/lib/ChannelSettings.js","meteor://💻app/app/channel-settings/client/index.js","meteor://💻app/app/channel-settings/client/tabBar.ts","meteor://💻app/app/channel-settings/index.js","meteor://💻app/app/custom-sounds/client/lib/CustomSounds.js","meteor://💻app/app/custom-sounds/client/notifications/deleteCustomSound.js","meteor://💻app/app/custom-sounds/client/notifications/updateCustomSound.js","meteor://💻app/app/custom-sounds/client/index.js","meteor://💻app/app/emoji-custom/client/lib/emojiCustom.js","meteor://💻app/app/emoji-custom/client/lib/function-isSet.js","meteor://💻app/app/emoji-custom/client/admin/startup.js","meteor://💻app/app/emoji-custom/client/notifications/deleteEmojiCustom.js","meteor://💻app/app/emoji-custom/client/notifications/updateEmojiCustom.js","meteor://💻app/app/emoji-custom/client/index.js","meteor://💻app/app/file-upload/client/lib/fileUploadHandler.js","meteor://💻app/app/file-upload/client/index.js","meteor://💻app/app/file-upload/lib/FileUploadBase.js","meteor://💻app/app/file-upload/index.js","meteor://💻app/app/notifications/client/lib/Notifications.js","meteor://💻app/app/notifications/client/lib/Presence.ts","meteor://💻app/app/notifications/client/index.js","meteor://💻app/app/notifications/index.js","meteor://💻app/app/settings/client/lib/settings.ts","meteor://💻app/app/settings/client/index.ts","meteor://💻app/app/settings/lib/settings.ts","meteor://💻app/app/settings/index.js","meteor://💻app/app/ui-clean-history/client/lib/tabBar.ts","meteor://💻app/app/ui-clean-history/client/index.js","meteor://💻app/app/user-status/client/lib/customUserStatus.js","meteor://💻app/app/user-status/client/lib/userStatus.ts","meteor://💻app/app/user-status/client/admin/startup.js","meteor://💻app/app/user-status/client/notifications/deleteCustomUserStatus.js","meteor://💻app/app/user-status/client/notifications/updateCustomUserStatus.js","meteor://💻app/app/user-status/client/index.js","meteor://💻app/app/utils/client/lib/RestApiClient.js","meteor://💻app/app/utils/client/lib/roomTypes.js","meteor://💻app/app/utils/client/index.js","meteor://💻app/app/utils/lib/RoomTypeConfig.js","meteor://💻app/app/utils/lib/RoomTypesCommon.js","meteor://💻app/app/utils/lib/fileUploadRestrictions.js","meteor://💻app/app/utils/lib/getAvatarColor.js","meteor://💻app/app/utils/lib/getAvatarURL.js","meteor://💻app/app/utils/lib/getDefaultSubscriptionPref.js","meteor://💻app/app/utils/lib/getRoomAvatarURL.js","meteor://💻app/app/utils/lib/getURL.js","meteor://💻app/app/utils/lib/getUserAvatarURL.js","meteor://💻app/app/utils/lib/getUserNotificationPreference.js","meteor://💻app/app/utils/lib/getUserPreference.js","meteor://💻app/app/utils/lib/isURL.js","meteor://💻app/app/utils/lib/placeholders.js","meteor://💻app/app/utils/lib/roomExit.js","meteor://💻app/app/utils/lib/slashCommand.js","meteor://💻app/app/utils/lib/tapi18n.js","meteor://💻app/app/utils/lib/templateVarHandler.js","meteor://💻app/app/utils/lib/timeConverter.js","meteor://💻app/app/utils/stream/constants.js","meteor://💻app/app/utils/index.js","meteor://💻app/app/dolphin/lib/common.js","meteor://💻app/app/dolphin/client/index.js","meteor://💻app/app/drupal/lib/common.js","meteor://💻app/app/drupal/client/index.js","meteor://💻app/app/emoji-emojione/lib/emojiPicker.js","meteor://💻app/app/emoji-emojione/lib/emojioneRender.js","meteor://💻app/app/emoji-emojione/lib/rocketchat.js","meteor://💻app/app/emoji-emojione/client/index.js","meteor://💻app/app/github-enterprise/lib/common.js","meteor://💻app/app/github-enterprise/client/index.js","meteor://💻app/app/gitlab/lib/common.js","meteor://💻app/app/gitlab/client/index.js","meteor://💻app/app/importer/lib/ImporterInfo.js","meteor://💻app/app/importer/lib/ImporterProgressStep.js","meteor://💻app/app/importer/lib/Importers.js","meteor://💻app/app/importer/client/index.js","meteor://💻app/app/importer-csv/lib/info.js","meteor://💻app/app/importer-csv/client/adder.js","meteor://💻app/app/importer-csv/client/index.js","meteor://💻app/app/importer-hipchat-enterprise/lib/info.js","meteor://💻app/app/importer-hipchat-enterprise/client/adder.js","meteor://💻app/app/importer-hipchat-enterprise/client/index.js","meteor://💻app/app/importer-slack/lib/info.js","meteor://💻app/app/importer-slack/client/adder.js","meteor://💻app/app/importer-slack/client/index.js","meteor://💻app/app/importer-slack-users/lib/info.js","meteor://💻app/app/importer-slack-users/client/adder.js","meteor://💻app/app/importer-slack-users/client/index.js","meteor://💻app/app/integrations/client/startup.js","meteor://💻app/app/mentions/lib/MentionsParser.js","meteor://💻app/app/mentions/client/client.js","meteor://💻app/app/nextcloud/lib/common.js","meteor://💻app/app/nextcloud/client/index.js","meteor://💻app/app/slashcommand-asciiarts/lib/gimme.js","meteor://💻app/app/slashcommand-asciiarts/lib/lenny.js","meteor://💻app/app/slashcommand-asciiarts/lib/shrug.js","meteor://💻app/app/slashcommand-asciiarts/lib/tableflip.js","meteor://💻app/app/slashcommand-asciiarts/lib/unflip.js","meteor://💻app/app/slashcommand-asciiarts/client/index.js","meteor://💻app/app/slashcommands-topic/lib/topic.js","meteor://💻app/app/slashcommands-topic/client/index.js","meteor://💻app/app/wordpress/lib/common.js","meteor://💻app/app/wordpress/client/index.js","meteor://💻app/app/theme/client/index.js","meteor://💻app/app/e2e/client/E2ERoomState.ts","meteor://💻app/app/e2e/client/events.js","meteor://💻app/app/e2e/client/helper.js","meteor://💻app/app/e2e/client/index.js","meteor://💻app/app/e2e/client/logger.ts","meteor://💻app/app/e2e/client/rocketchat.e2e.js","meteor://💻app/app/e2e/client/rocketchat.e2e.room.js","meteor://💻app/app/e2e/client/tabbar.ts","meteor://💻app/app/models/client/models/Avatars.js","meteor://💻app/app/models/client/models/CachedChannelList.js","meteor://💻app/app/models/client/models/CachedChatRoom.js","meteor://💻app/app/models/client/models/CachedChatSubscription.js","meteor://💻app/app/models/client/models/CachedUserList.js","meteor://💻app/app/models/client/models/ChatMessage.js","meteor://💻app/app/models/client/models/ChatPermissions.js","meteor://💻app/app/models/client/models/ChatRoom.js","meteor://💻app/app/models/client/models/ChatSubscription.js","meteor://💻app/app/models/client/models/CustomSounds.js","meteor://💻app/app/models/client/models/EmojiCustom.js","meteor://💻app/app/models/client/models/Roles.js","meteor://💻app/app/models/client/models/RoomRoles.js","meteor://💻app/app/models/client/models/Subscriptions.js","meteor://💻app/app/models/client/models/Uploads.js","meteor://💻app/app/models/client/models/UserAndRoom.js","meteor://💻app/app/models/client/models/UserDataFiles.js","meteor://💻app/app/models/client/models/UserRoles.js","meteor://💻app/app/models/client/models/Users.js","meteor://💻app/app/models/client/models/WebdavAccounts.js","meteor://💻app/app/models/client/models/_Base.js","meteor://💻app/app/models/client/index.js","meteor://💻app/app/models/index.js","meteor://💻app/app/otr/client/index.js","meteor://💻app/app/otr/client/rocketchat.otr.js","meteor://💻app/app/otr/client/rocketchat.otr.room.js","meteor://💻app/app/otr/client/tabBar.ts","meteor://💻app/app/reactions/client/methods/setReaction.js","meteor://💻app/app/reactions/client/index.js","meteor://💻app/app/reactions/client/init.js","meteor://💻app/app/ui-cached-collection/client/models/CachedCollection.js","meteor://💻app/app/ui-cached-collection/client/index.js","meteor://💻app/app/ui-cached-collection/index.js","meteor://💻app/app/2fa/client/TOTPCrowd.js","meteor://💻app/app/2fa/client/TOTPGoogle.js","meteor://💻app/app/2fa/client/TOTPLDAP.js","meteor://💻app/app/2fa/client/TOTPOAuth.js","meteor://💻app/app/2fa/client/TOTPPassword.js","meteor://💻app/app/2fa/client/TOTPSaml.js","meteor://💻app/app/2fa/client/index.ts","meteor://💻app/app/2fa/client/overrideMeteorCall.ts","meteor://💻app/app/analytics/client/index.js","meteor://💻app/app/analytics/client/loadScript.js","meteor://💻app/app/analytics/client/trackEvents.js","meteor://💻app/app/blockstack/client/index.js","meteor://💻app/app/blockstack/client/routes.js","meteor://💻app/app/cas/client/cas_client.js","meteor://💻app/app/cas/client/index.js","meteor://💻app/app/cors/client/index.js","meteor://💻app/app/crowd/client/index.js","meteor://💻app/app/crowd/client/loginHelper.js","meteor://💻app/app/custom-oauth/client/custom_oauth_client.js","meteor://💻app/app/custom-oauth/client/swapSessionStorage.js","meteor://💻app/app/custom-oauth/index.js","meteor://💻app/app/favico/client/favico.js","meteor://💻app/app/favico/client/index.js","meteor://💻app/app/favico/index.js","meteor://💻app/app/iframe-login/client/iframe_client.js","meteor://💻app/app/iframe-login/client/index.js","meteor://💻app/app/logger/client/index.js","meteor://💻app/app/logger/client/logger.js","meteor://💻app/app/mail-messages/client/index.js","meteor://💻app/app/mail-messages/client/startup.js","meteor://💻app/app/message-attachments/client/index.js","meteor://💻app/app/message-attachments/client/renderField.js","meteor://💻app/app/message-mark-as-unread/client/actionButton.js","meteor://💻app/app/message-mark-as-unread/client/index.js","meteor://💻app/app/meteor-accounts-saml/client/index.js","meteor://💻app/app/meteor-accounts-saml/client/saml_client.js","meteor://💻app/app/nrr/client/index.js","meteor://💻app/app/nrr/client/nrr.js","meteor://💻app/app/push-notifications/client/index.js","meteor://💻app/app/push-notifications/client/tabBar.ts","meteor://💻app/app/slackbridge/client/index.js","meteor://💻app/app/slackbridge/client/slackbridge_import.client.js","meteor://💻app/app/slashcommands-archiveroom/client/client.js","meteor://💻app/app/slashcommands-archiveroom/client/index.js","meteor://💻app/app/slashcommands-create/client/client.js","meteor://💻app/app/slashcommands-create/client/index.js","meteor://💻app/app/slashcommands-hide/client/hide.js","meteor://💻app/app/slashcommands-hide/client/index.js","meteor://💻app/app/slashcommands-invite/client/client.js","meteor://💻app/app/slashcommands-invite/client/index.js","meteor://💻app/app/slashcommands-inviteall/client/client.js","meteor://💻app/app/slashcommands-inviteall/client/index.js","meteor://💻app/app/slashcommands-join/client/client.ts","meteor://💻app/app/slashcommands-join/client/index.ts","meteor://💻app/app/slashcommands-kick/client/client.js","meteor://💻app/app/slashcommands-kick/client/index.js","meteor://💻app/app/slashcommands-open/client/client.js","meteor://💻app/app/slashcommands-open/client/index.js","meteor://💻app/app/slashcommands-unarchiveroom/client/client.js","meteor://💻app/app/slashcommands-unarchiveroom/client/index.js","meteor://💻app/app/version-check/client/index.js","meteor://💻app/app/webrtc/client/WebRTCClass.js","meteor://💻app/app/webrtc/client/actionLink.tsx","meteor://💻app/app/webrtc/client/adapter.js","meteor://💻app/app/webrtc/client/index.js","meteor://💻app/app/webrtc/client/screenShare.js","meteor://💻app/app/webrtc/client/tabBar.tsx","meteor://💻app/app/webrtc/index.js","meteor://💻app/ee/app/livechat-enterprise/client/views/app/customTemplates/visitorEditCustomFieldsForm.js","meteor://💻app/ee/app/livechat-enterprise/client/views/app/customTemplates/visitorInfoCustomForm.js","meteor://💻app/ee/app/livechat-enterprise/client/views/app/registerCustomTemplates.js","meteor://💻app/ee/app/livechat-enterprise/client/views/business-hours/Multiple.ts","meteor://💻app/ee/app/livechat-enterprise/client/views/livechatSideNavItems.js","meteor://💻app/ee/app/livechat-enterprise/client/SingleBusinessHour.ts","meteor://💻app/ee/app/livechat-enterprise/client/index.js","meteor://💻app/ee/app/livechat-enterprise/client/messageTypes.ts","meteor://💻app/ee/app/livechat-enterprise/client/route.js","meteor://💻app/ee/app/livechat-enterprise/client/startup.ts","meteor://💻app/ee/app/livechat-enterprise/lib/QuickActions/defaultActions.ts","meteor://💻app/ee/app/livechat-enterprise/lib/messageTypes.js","meteor://💻app/ee/app/auditing/client/templates/audit/audit.js","meteor://💻app/ee/app/auditing/client/templates/index.js","meteor://💻app/ee/app/auditing/client/index.js","meteor://💻app/ee/app/auditing/client/utils.js","meteor://💻app/ee/app/canned-responses/client/views/popup/addMessagePopupCannedResponse.js","meteor://💻app/ee/app/canned-responses/client/views/tabbar/cannedResponses.js","meteor://💻app/ee/app/canned-responses/client/views/tabbar/departmentCannedResponses.js","meteor://💻app/ee/app/canned-responses/client/collections/CannedResponse.js","meteor://💻app/ee/app/canned-responses/client/startup/responses.js","meteor://💻app/ee/app/canned-responses/client/index.js","meteor://💻app/ee/app/canned-responses/client/streamer.js","meteor://💻app/ee/app/canned-responses/client/tabBar.ts","meteor://💻app/ee/app/authorization/lib/addRoleRestrictions.js","meteor://💻app/ee/app/authorization/lib/guestPermissions.js","meteor://💻app/ee/app/authorization/client/index.ts","meteor://💻app/ee/app/license/client/index.ts","meteor://💻app/ee/client/lib/fetchFeatures.ts","meteor://💻app/ee/client/lib/onToggledFeature.ts","meteor://💻app/ee/client/omnichannel/additionalForms/register.js","meteor://💻app/ee/client/omnichannel/index.js","meteor://💻app/ee/client/omnichannel/routes.js","meteor://💻app/ee/client/hooks/useHasLicense.js","meteor://💻app/ee/client/startup/engagementDashboard.ts","meteor://💻app/ee/client/startup/index.ts","meteor://💻app/ee/client/startup/routes.ts","meteor://💻app/ee/client/ecdh.ts","meteor://💻app/ee/client/index.ts","meteor://💻app/client/views/room/lib/QuickActions/index.tsx","meteor://💻app/client/views/room/lib/Toolbox/IframeButtons.tsx","meteor://💻app/client/views/room/lib/Toolbox/generator.tsx","meteor://💻app/client/views/room/lib/Toolbox/index.tsx","meteor://💻app/client/views/room/modals/FileUploadModal/FilePreview.tsx","meteor://💻app/client/views/room/modals/FileUploadModal/FileUploadModal.tsx","meteor://💻app/client/views/room/modals/FileUploadModal/GenericPreview.tsx","meteor://💻app/client/views/room/modals/FileUploadModal/ImagePreview.tsx","meteor://💻app/client/views/room/modals/FileUploadModal/MediaPreview.tsx","meteor://💻app/client/views/room/modals/FileUploadModal/PreviewSkeleton.tsx","meteor://💻app/client/views/room/modals/FileUploadModal/index.ts","meteor://💻app/client/views/room/modals/ReactionListModal/ReactionListModal.tsx","meteor://💻app/client/views/room/modals/ReactionListModal/ReactionUserTag.tsx","meteor://💻app/client/views/room/modals/ReactionListModal/Reactions.tsx","meteor://💻app/client/views/room/modals/ReactionListModal/index.ts","meteor://💻app/client/views/room/modals/ReadReceiptsModal/ReadReceiptRow.tsx","meteor://💻app/client/views/room/modals/ReadReceiptsModal/ReadReceiptsModal.tsx","meteor://💻app/client/views/room/modals/ReadReceiptsModal/index.ts","meteor://💻app/client/views/admin/index.ts","meteor://💻app/client/views/admin/routes.js","meteor://💻app/client/views/admin/sidebarItems.js","meteor://💻app/client/views/omnichannel/additionalForms.js","meteor://💻app/client/views/omnichannel/routes.js","meteor://💻app/client/views/omnichannel/sidebarItems.js","meteor://💻app/client/views/teams/contextualBar/channels/tabBar.ts","meteor://💻app/client/views/teams/contextualBar/info/tabBar.ts","meteor://💻app/client/views/teams/index.js","meteor://💻app/client/views/root/AppRoot.tsx","meteor://💻app/client/views/root/PageLoading.tsx","meteor://💻app/client/views/e2e/EnterE2EPasswordModal.tsx","meteor://💻app/client/views/e2e/SaveE2EPasswordModal.tsx","meteor://💻app/client/components/RoomIcon/OmnichannelRoomIcon/lib/OmnichannelRoomIcon.ts","meteor://💻app/client/components/RoomIcon/OmnichannelRoomIcon/context/OmnichannelRoomIconContext.tsx","meteor://💻app/client/components/RoomIcon/OmnichannelRoomIcon/provider/OmnichannelRoomIconProvider.tsx","meteor://💻app/client/components/RoomAutoComplete/Avatar.js","meteor://💻app/client/components/RoomAutoComplete/RoomAutoComplete.js","meteor://💻app/client/components/RoomAutoComplete/index.ts","meteor://💻app/client/components/avatar/BaseAvatar.tsx","meteor://💻app/client/components/avatar/RoomAvatar.js","meteor://💻app/client/components/avatar/UserAvatar.tsx","meteor://💻app/client/components/CreateDiscussion/CreateDiscussion.tsx","meteor://💻app/client/components/CreateDiscussion/DefaultParentRoomField.tsx","meteor://💻app/client/components/Header/Avatar.tsx","meteor://💻app/client/components/Header/Button.tsx","meteor://💻app/client/components/Header/Content.tsx","meteor://💻app/client/components/Header/Header.tsx","meteor://💻app/client/components/Header/HeaderDivider.tsx","meteor://💻app/client/components/Header/HeaderIcon.tsx","meteor://💻app/client/components/Header/HeaderLink.tsx","meteor://💻app/client/components/Header/HeaderTag.tsx","meteor://💻app/client/components/Header/HeaderTagIcon.tsx","meteor://💻app/client/components/Header/HeaderTagSkeleton.tsx","meteor://💻app/client/components/Header/Row.tsx","meteor://💻app/client/components/Header/State.tsx","meteor://💻app/client/components/Header/Subtitle.tsx","meteor://💻app/client/components/Header/Title.tsx","meteor://💻app/client/components/Header/ToolBox.tsx","meteor://💻app/client/components/Header/ToolBoxAction.tsx","meteor://💻app/client/components/Header/ToolBoxActionBadge.tsx","meteor://💻app/client/components/Header/index.ts","meteor://💻app/client/components/TwoFactorModal/TwoFactorEmailModal.tsx","meteor://💻app/client/components/TwoFactorModal/TwoFactorModal.tsx","meteor://💻app/client/components/TwoFactorModal/TwoFactorPasswordModal.tsx","meteor://💻app/client/components/TwoFactorModal/TwoFactorTotpModal.tsx","meteor://💻app/client/components/TwoFactorModal/index.ts","meteor://💻app/client/components/UserAutoCompleteMultiple/UserAutoCompleteMultiple.js","meteor://💻app/client/components/UserAutoCompleteMultiple/index.ts","meteor://💻app/client/components/Emoji.js","meteor://💻app/client/components/GenericModal.tsx","meteor://💻app/client/components/UrlChangeModal.tsx","meteor://💻app/client/components/withDoNotAskAgain.tsx","meteor://💻app/client/lib/2fa/overrideLoginMethod.ts","meteor://💻app/client/lib/2fa/process2faReturn.ts","meteor://💻app/client/lib/2fa/utils.ts","meteor://💻app/client/lib/asyncState/AsyncStatePhase.ts","meteor://💻app/client/lib/asyncState/functions.ts","meteor://💻app/client/lib/asyncState/index.ts","meteor://💻app/client/lib/portals/blazePortals.ts","meteor://💻app/client/lib/portals/createEphemeralPortal.ts","meteor://💻app/client/lib/portals/createLazyElement.ts","meteor://💻app/client/lib/portals/createLazyPortal.ts","meteor://💻app/client/lib/portals/createTemplateForComponent.ts","meteor://💻app/client/lib/portals/portalsSubscription.ts","meteor://💻app/client/lib/settings/PublicSettingsCachedCollection.ts","meteor://💻app/client/lib/utils/applyCustomTranslations.ts","meteor://💻app/client/lib/utils/call.ts","meteor://💻app/client/lib/utils/callWithErrorHandling.ts","meteor://💻app/client/lib/utils/canDeleteMessage.ts","meteor://💻app/client/lib/utils/createAnchor.ts","meteor://💻app/client/lib/utils/domEvents.ts","meteor://💻app/client/lib/utils/filterLanguage.ts","meteor://💻app/client/lib/utils/fireGlobalEvent.ts","meteor://💻app/client/lib/utils/formatBytes.ts","meteor://💻app/client/lib/utils/formatDate.ts","meteor://💻app/client/lib/utils/formatDateAndTime.ts","meteor://💻app/client/lib/utils/formatTime.ts","meteor://💻app/client/lib/utils/getAvatarAsPng.ts","meteor://💻app/client/lib/utils/getConfig.ts","meteor://💻app/client/lib/utils/getUidDirectMessage.ts","meteor://💻app/client/lib/utils/goToRoomById.ts","meteor://💻app/client/lib/utils/handleError.ts","meteor://💻app/client/lib/utils/isIE11.ts","meteor://💻app/client/lib/utils/isIOsDevice.ts","meteor://💻app/client/lib/utils/isLayoutEmbedded.ts","meteor://💻app/client/lib/utils/isRTL.ts","meteor://💻app/client/lib/utils/keyCodes.ts","meteor://💻app/client/lib/utils/prependReplies.ts","meteor://💻app/client/lib/utils/renderEmoji.ts","meteor://💻app/client/lib/utils/renderMessageBody.ts","meteor://💻app/client/lib/utils/timeAgo.ts","meteor://💻app/client/lib/utils/waitUntilFind.ts","meteor://💻app/client/lib/RoomManager.ts","meteor://💻app/client/lib/appLayout.ts","meteor://💻app/client/lib/banners.ts","meteor://💻app/client/lib/baseURI.ts","meteor://💻app/client/lib/createRouteGroup.ts","meteor://💻app/client/lib/createSidebarItems.ts","meteor://💻app/client/lib/getUserDisplayName.ts","meteor://💻app/client/lib/imperativeModal.ts","meteor://💻app/client/lib/meteorCallWrapper.ts","meteor://💻app/client/lib/onClientBeforeSendMessage.ts","meteor://💻app/client/lib/onClientMessageReceived.ts","meteor://💻app/client/lib/presence.ts","meteor://💻app/client/lib/queryClient.ts","meteor://💻app/client/lib/toast.ts","meteor://💻app/client/lib/userData.ts","meteor://💻app/client/contexts/ServerContext/ServerContext.ts","meteor://💻app/client/contexts/ServerContext/index.ts","meteor://💻app/client/contexts/AuthorizationContext.ts","meteor://💻app/client/contexts/AvatarUrlContext.ts","meteor://💻app/client/contexts/LayoutContext.ts","meteor://💻app/client/contexts/RouterContext.ts","meteor://💻app/client/contexts/SettingsContext.ts","meteor://💻app/client/contexts/ToastMessagesContext.ts","meteor://💻app/client/contexts/TranslationContext.ts","meteor://💻app/client/contexts/UserContext.ts","meteor://💻app/client/hooks/useAsyncState.ts","meteor://💻app/client/hooks/useEndpointActionExperimental.ts","meteor://💻app/client/hooks/useEndpointData.ts","meteor://💻app/client/hooks/useForm.ts","meteor://💻app/client/hooks/useFormatDateAndTime.js","meteor://💻app/client/hooks/useMethodData.ts","meteor://💻app/client/hooks/useReactiveValue.ts","meteor://💻app/client/hooks/useUserDisplayName.ts","meteor://💻app/client/startup/afterLogoutCleanUp/customScriptOnLogout.ts","meteor://💻app/client/startup/afterLogoutCleanUp/index.ts","meteor://💻app/client/startup/contextualBar/exportMessages.ts","meteor://💻app/client/startup/contextualBar/index.ts","meteor://💻app/client/startup/notifications/index.ts","meteor://💻app/client/startup/notifications/konchatNotifications.ts","meteor://💻app/client/startup/notifications/updateAvatar.ts","meteor://💻app/client/startup/notifications/usersNameChanged.ts","meteor://💻app/client/startup/renderMessage/autolinker.ts","meteor://💻app/client/startup/renderMessage/autotranslate.ts","meteor://💻app/client/startup/renderMessage/emoji.ts","meteor://💻app/client/startup/renderMessage/hexcolor.ts","meteor://💻app/client/startup/renderMessage/highlightWords.ts","meteor://💻app/client/startup/renderMessage/index.ts","meteor://💻app/client/startup/renderMessage/issuelink.ts","meteor://💻app/client/startup/renderMessage/katex.ts","meteor://💻app/client/startup/renderMessage/markdown.ts","meteor://💻app/client/startup/renderMessage/mentionsMessage.ts","meteor://💻app/client/startup/renderNotification/index.ts","meteor://💻app/client/startup/renderNotification/markdown.ts","meteor://💻app/client/startup/streamMessage/autotranslate.ts","meteor://💻app/client/startup/streamMessage/index.ts","meteor://💻app/client/startup/UserDeleted.ts","meteor://💻app/client/startup/absoluteUrl.ts","meteor://💻app/client/startup/appRoot.tsx","meteor://💻app/client/startup/banners.ts","meteor://💻app/client/startup/callbacks.ts","meteor://💻app/client/startup/customOAuth.ts","meteor://💻app/client/startup/customTranslations.ts","meteor://💻app/client/startup/e2e.ts","meteor://💻app/client/startup/emailVerification.ts","meteor://💻app/client/startup/i18n.ts","meteor://💻app/client/startup/index.ts","meteor://💻app/client/startup/ldap.ts","meteor://💻app/client/startup/loginViaQuery.ts","meteor://💻app/client/startup/messageTypes.ts","meteor://💻app/client/startup/oauth.ts","meteor://💻app/client/startup/readReceipt.ts","meteor://💻app/client/startup/roomObserve.ts","meteor://💻app/client/startup/rootUrlChange.ts","meteor://💻app/client/startup/routes.tsx","meteor://💻app/client/startup/setupWizard.ts","meteor://💻app/client/startup/slashCommands.ts","meteor://💻app/client/startup/startup.ts","meteor://💻app/client/startup/theme.ts","meteor://💻app/client/startup/unread.ts","meteor://💻app/client/startup/userRoles.ts","meteor://💻app/client/startup/userSetUtcOffset.ts","meteor://💻app/client/startup/userStatusManuallySet.ts","meteor://💻app/client/startup/usersObserve.ts","meteor://💻app/client/methods/deleteMessage.js","meteor://💻app/client/methods/hideRoom.js","meteor://💻app/client/methods/openRoom.js","meteor://💻app/client/methods/setUserActiveStatus.js","meteor://💻app/client/methods/toggleFavorite.js","meteor://💻app/client/methods/updateMessage.js","meteor://💻app/client/polyfills/childNodeRemove.ts","meteor://💻app/client/polyfills/cssVars.ts","meteor://💻app/client/polyfills/customEventPolyfill.ts","meteor://💻app/client/polyfills/hoverTouchClick.ts","meteor://💻app/client/polyfills/index.ts","meteor://💻app/client/polyfills/objectFromEntries.ts","meteor://💻app/client/templateHelpers/avatarUrlFromUsername.ts","meteor://💻app/client/templateHelpers/emojiUrlFromName.ts","meteor://💻app/client/templateHelpers/hasPermission.ts","meteor://💻app/client/templateHelpers/index.ts","meteor://💻app/client/templateHelpers/log.ts","meteor://💻app/client/templateHelpers/nrrargs.ts","meteor://💻app/client/templateHelpers/renderEmoji.ts","meteor://💻app/client/templateHelpers/userHasAllPermission.ts","meteor://💻app/client/importPackages.ts","meteor://💻app/client/templates.ts","meteor://💻app/client/main.ts","meteor://💻app/lib/callbacks.ts","meteor://💻app/lib/emailValidator.ts","meteor://💻app/lib/getImageExtensionFromMime.ts","meteor://💻app/lib/random.ts","meteor://💻app/lib/transforms.ts","meteor://💻app/definition/rest/v1/settings.ts","meteor://💻app/definition/IBanner.ts","meteor://💻app/definition/ILivechatBusinessHour.ts","meteor://💻app/definition/IRoom.ts","meteor://💻app/definition/UIKit.ts","meteor://💻app/definition/UserStatus.ts"],"names":["Meteor","module","link","v","Session","Template","CodeMirrors","CodeMirror","onRendered","options","data","lineNumbers","textarea","find","editor","fromTextArea","autorun","c","code","currentData","undefined","stop","setValue","id","editorOnBlur","name","self","on","doc","val","getValue","value","reactiveVar","set","get","defer","refresh","destroyed","$","next","remove","helpers","editorId","editorName","export","AudioEncoder","Emitter","settings","constructor","source","bufferLen","numChannels","bitRate","handleWorkerMessage","event","command","blob","Blob","buffer","type","emit","worker","terminate","handleAudioProcess","channel","inputBuffer","numberOfChannels","getChannelData","postMessage","workerPath","absoluteUrl","Worker","onmessage","config","sampleRate","context","scriptNode","createScriptProcessor","createJavaScriptNode","call","onaudioprocess","connect","destination","close","AudioRecorder","instance","getUserMedia","navigator","mediaDevices","bind","legacyGetUserMedia","webkitGetUserMedia","mozGetUserMedia","msGetUserMedia","Promise","resolve","reject","window","AudioContext","webkitAudioContext","isSupported","Boolean","createAudioContext","audioContext","destroyAudioContext","createStream","stream","audio","destroyStream","getAudioTracks","forEach","track","createEncoder","encoder","input","createMediaStreamSource","destroyEncoder","start","cb","error","console","VideoRecorder","ReactiveVar","started","cameraStarted","recording","recordingAvailable","videoel","handleSuccess","startUserMedia","handleError","oldGetUserMedia","video","then","record","chunks","mediaRecorder","MediaRecorder","ondataavailable","blobev","push","srcObject","URL","webkitURL","src","createObjectURL","muted","onloadedmetadata","play","stopRecording","vtracks","getVideoTracks","vtrack","Array","from","atracks","atrack","pause","recorder","closeTooltip","openToolTip","Tracker","createEphemeralPortal","createAnchor","Dep","Dependency","state","dom","unregister","props","depend","title","anchor","changed","matchMedia","matches","document","body","addEventListener","timeout","e","clearTimeout","setTimeout","element","target","dataset","closest","removeAttribute","_objectSpread","default","closeUserCard","openUserCard","FlowRouter","container","routeComputation","createContainer","div","createElement","appendChild","afterFlush","args","onClose","watchPathChange","firstRun","Accounts","t","dispatchToastMessage","onEmailVerificationLink","token","done","verifyEmail","message","ChatMessages","moment","_","Random","TAPi18n","escapeHTML","KonchatNotification","UserAction","USER_ACTIVITIES","fileUpload","slashCommands","messageProperties","MessageTypes","readMessage","callbacks","hasAtLeastOnePermission","Messages","Rooms","ChatMessage","ChatSubscription","emoji","generateTriggerId","imperativeModal","GenericModal","keyCodes","prependReplies","callWithErrorHandling","onClientBeforeSendMessage","messageBoxState","saveValue","debounce","rid","tmid","key","filter","join","_localStorage","setItem","removeItem","restoreValue","getItem","restore","save","trigger","purgeAll","Object","keys","indexOf","add","priority","MEDIUM","collection","editing","records","initializeWrapper","wrapper","initializeInput","$input","restoreReplies","requestInputFocus","mid","getQueryParam","findOne","focus","recordInputAsDraft","draft","msg","clearCurrentDraft","hasValue","resetToDraft","oldValue","toPrevMessage","messages","querySelectorAll","pop","edit","previous","previousElementSibling","clearEditing","toNextMessage","nextElementSibling","isEditingTheNextOne","hasPermission","editAllowed","editOwn","u","_id","userId","classList","contains","blockEditInMinutes","currentTsDiff","msgTs","ts","diff","parentElement","attachments","description","cursorPosition","setCursorPosition","saved","savedCursor","selectionEnd","send","tshow","threadsEnabled","USER_TYPING","trim","mention","replies","length","originalMessage","fields","reactive","readNow","refreshUnreadMark","processMessageSend","removeData","isDescription","processMessageEditing","confirmDeleteMsg","processSetReaction","processTooLongMessage","removeRoomNotification","processSlashCommand","slice","reaction","list","lastMessage","sort","adjustedMessage","messageWithoutEmojiShortnames","Error","onConfirm","contentType","messageBlob","fileName","user","username","Date","file","File","lastModified","now","open","component","children","onCancel","variant","isSystemMessage","msgObject","match","commands","commandOptions","param","permission","clientOnly","callback","triggerId","appId","cmd","params","err","result","invalidCommandMsg","__","private","upsert","room","drid","prid","$exists","deleteMsg","onCloseModal","confirmText","forceDelete","blockDeleteInMinutes","keydown","currentTarget","which","keyCode","ESCAPE","preventDefault","stopPropagation","ARROW_UP","ARROW_DOWN","shiftKey","altKey","keyup","values","includes","onDestroyed","cancel","CachedChatRoom","CachedChatSubscription","startup","init","ready","uploadFileWithMessage","fileUploadIsValidContentType","APIClient","FileUploadModal","FormData","append","uploads","upload","percentage","xhr","promise","progress","Math","round","performContinuously","USER_UPLOADING","computation","isCanceling","delete","abort","remainingUploads","responseJSON","files","concat","uploadNextFile","onSubmit","invalidContentType","ServiceConfiguration","s","escapeRegExp","AccountBox","baseURI","path","newUrl","rtrim","ltrim","newParams","searchParams","entries","reduce","ret","newPath","pathname","replace","RegExp","__meteor_runtime_config__","ROOT_URL_PATH_PREFIX","go","current","queryParams","setStatus","status","customOAuthCallback","response","origin","siteUrl","Site_Url","redirectUrl","startsWith","service","customOauth","configurations","customLoginWith","capitalize","customRedirectUri","loginWithToken","log","logout","run","icon","label","externalCommand","origins","split","menu","lastState","futureState","e2e","Users","getUserPreference","getUserAvatarURL","CustomSounds","getAvatarAsPng","onClientMessageReceived","notificationStatus","getDesktopPermission","Notification","requestPermission","notify","notification","payload","text","requireInteraction","n","sender","stripTags","tag","canReply","silent","notificationDuration","duration","onclick","tab","jump","showDesktop","hasFocus","e2eRoom","getInstanceByRoomId","decrypt","avatarAsPng","newMessage","equals","newMessageNotification","audioVolume","sub","audioNotificationValue","volume","Number","toPrecision","newRoom","nonreactive","newRoomSound","union","without","removeClass","newRoomNotification","Blaze","TemplateInstance","prototype","parentTemplate","levels","view","currentView","substring","templateInstance","parentView","Login","Button","onClick","el","$el","addClass","onBlur","parents","check","form","$form","inputs","each","time","loading","attr","html","reset","fn","pos","index","p","setSelectionRange","createTextRange","range","collapse","moveEnd","moveStart","select","getPopoverStatusConfig","actionCallback","items","modifier","action","prop","popoverClass","columns","groups","offsetVertical","clientHeight","fireGlobalEvent","header","back","buttons","events","querySelector","blur","baseUrlFix","isMozillaFirefoxBelowVersion","upperVersion","version","userAgent","parseInt","isGoogleChromeBelowVersion","isBaseUrlFixNeeded","baseUrl","popupList","template","template_list","noMatchTemplate","template_item","popupList_default","item","popupList_item_default","showRealNames","table","dummyTr","prepend","onResize","onItemClick","onScroll","onSort","tabs","onCreated","activeTab","active","onChange","condition","isActive","ariaSelected","tooltip","initiated","render","opened","placeTip","arrowSize","sourceWidth","outerWidth","sourceHeight","outerHeight","left","top","offset","tip","tipWidth","tipHeight","css","toggleClass","showElement","sourceElement","elementClone","clone","empty","show","hide","getCommonRoomEvents","Clipboard","popover","MessageAction","addMessageToList","isURL","messageArgs","chatMessages","EmojiEvents","goToRoomById","isLayoutEmbedded","mountPopover","i","outerContext","messageContext","menuItems","getButtons","map","color","messageItems","deleteItem","activeElement","touchMoved","lastTouchX","lastTouchY","touchtime","touches","originalEvent","pageX","pagey","hasClass","nodeName","getAttribute","doLongTouch","href","deltaX","abs","deltaY","pageY","button","getButtonById","messageAction","tabBar","getRouteName","update","$set","openUserInfo","msgId","_chatMessages","ctx","actionContext","allItems","itemsBelowDivider","alertsItem","group","burger","unread","userUnreadAlert","unreadCount","unreadAlert","hideUnreadStatus","$ne","archived","alert","fetch","alertType","isMenuOpen","embeddedVersion","toggle","home","dropzoneHelpers","dropzoneEvents","ReactiveDict","roomTypes","WebRTC","RoomRoles","Subscriptions","RoomHistoryManager","RoomManager","hasAllPermission","hasRole","NewRoomManager","userCanDrop","readOnly","wipeFailedUploads","roomHasGlobalPurge","roomHasPurge","retention","enabled","roomFilesOnly","overrideGlobal","filesOnly","roomExcludePinned","excludePinned","roomMaxAge","maxAge","createFileFromUrl","url","metadata","mime","format","extension","addToInput","openedRoom","initText","selectionStart","finalText","change","dragAndDrop","isDropzoneDisabled","dragAndDropLabel","roomOld","subscribed","messagesHistory","showInMainThread","sysMes","hideSettings","settingValues","isArray","hideMessagesOfType","Set","array","query","_hidden","$or","$eq","size","$nin","hasMore","hasMoreNext","isLoading","windowId","uploading","roomLeader","roles","leader","statusText","statusDisplay","chatNowLink","getRouteLink","announcement","announcementDetails","roomData","messageboxData","sendToBottomIfNecessary","subscription","isEmbedded","showFormattingTips","onInputChanged","onKeyUp","apply","onKeyDown","onSend","getAnnouncementStyle","style","maxMessageLength","unreadData","count","getOpenedRoomByRid","since","unreadSince","containerBarsShow","hasUnreadData","isUploading","formatUnreadSince","calendar","sameDay","adminClass","messageViewMode","viewMode","modes","selectable","hideUsername","hideAvatar","canPreview","hideLeaderHeader","hasLeader","hasPurge","purgeTimeout","relativeTimeThreshold","humanize","openedThread","getParam","usernames","uids","types","dataTransfer","some","parentNode","dropzone","effectAllowed","dropEffect","transferData","getData","imgURL","filesToUpload","defineProperty","lookup","onFile","selection","getSelection","removeAllRanges","selectablePointer","selectedMessages","getSelectedMessages","selectedRange","selectMessages","difference","atBottom","clear","getRoom","firstUnread","$gt","ls","limit","getSurroundingMessages","throttle","$roomLeader","scrollTop","lastScrollTop","isAtBottom","height","getMore","ceil","scrollHeight","getMoreNext","repliedMessageId","message_link","hash","userDetail","getConfig","isGroupChat","autoTranslate","autoTranslateLanguage","showUsersOffline","flexTemplate","groupDetail","resetSelection","to","message1","message2","minTs","min","maxTs","max","pluck","$gte","$lte","previewMessages","addMessages","compact","uniq","clearUserDetail","setData","results","rolesObserve","observe","added","role","$addToSet","multi","$inc","rerender","removed","$pull","sendToBottom","off","removeEventListener","onWindowResize","observer","disconnect","chatMessage","scrollThreshold","store","getStore","afterMessageGroup","scroll","wrapperUl","messageBox","className","scrollTo","checkIfScrollIsAtBottom","ResizeObserver","wheelHandler","rtl","getElementFromPoint","topOffset","messageBoxOffset","elementFromPoint","width","updateUnreadCount","lastInvisibleMessageOnScreen","read","openCustomProfileTab","route","unreadNotLoaded","firstNode","webrtc","remoteItems","localUrl","editedAt","isAReplyInDMFromChannel","roomSearch","roomIcon","getIcon","userStatus","customFieldsForm","new","customFields","customFieldsArray","hideFromForm","fieldName","field","selectedField","formData","defaultValue","fieldValue","Accounts_CustomFields","JSON","parse","LoginPresence","awayTime","startTimer","stopTimer","timer","reconnect","RocketChatAnnouncement","announcementObject","getMessage","getCallback","getStyle","getByRoom","TimeSync","methods","sendMessage","messageAlreadyExists","isNaN","serverOffset","temp","insert","OAuth","launchLogin","wrap","func","proxy","loginService","redirect_uri","loginUrl","encodeURIComponent","ConversationRoomType","RoomTypeConfig","identifier","order","DirectMessageRoomRoute","DirectMessageRoomType","ChatRoom","openRoom","RoomTypeRouteConfig","RoomSettingsEnum","RoomMemberActions","UiTextContext","getAvatarURL","findRoom","roomName","fname","secondaryRoomName","groupByType","getUserStatus","roomId","getUserStatusText","allowRoomSettingChange","setting","TYPE","NAME","SYSTEM_MESSAGES","DESCRIPTION","READ_ONLY","REACT_WHEN_READ_ONLY","ARCHIVE_OR_UNARCHIVE","JOIN_CODE","E2E","allowMemberAction","BLOCK","enableMembersListProfile","userDetailShowAll","getUiText","HIDE_WARNING","LEAVE_WARNING","getNotificationDetails","notificationMessage","isServer","getAvatarPath","subData","avatarETag","users","includeInDashboard","FavoriteRoomType","PrivateRoomType","PublicRoomType","UnreadRoomType","PrivateRoomRoute","teamMain","canAddUser","canSendMessage","BROADCAST","broadcast","ro","cache","PublicRoomRoute","showJoinLink","includeInRoomSearch","getDiscussionType","MessageTypesValues","registerType","system","room_name","user_by","user_added","user_removed","user_left","user_muted","user_unmuted","i18nLabel","module1","exports","require","isClient","appLayout","SideNav","flexStatus","closeFlex","openFlex","addItem","newItem","actual","checkCondition","getItems","addRoute","newRoute","router","wait","customContainer","routeConfig","center","pageTemplate","i18nPageTitle","pageTitle","renderMainLayout","triggersEnter","sideNav","setFlex","IframeLogin","iframeLogin","Match","HTTP","reactiveIframeUrl","reactiveEnabled","iframeUrl","apiUrl","apiMethod","_storedLoginToken","tryLogin","beforeSend","withCredentials","separator","loginToken","tokenData","test","String","callLoginMethod","methodArguments","iframe","userCallback","mem","modal","ReactionList","canDeleteMessage","messagesList","_getButtons","sortBy","toArray","_getButtonsByGroup","addButton","cacheKey","stringify","btns","removeButton","updateButton","extend","allButtons","resetButtons","getPermaLink","roomURL","getURL","getChatMessagesFrom","openRouteLink","reply","dmRoom","isLivechatRoom","classes","permalink","clipboard","writeText","getElementById","isEditAllowed","Message_AllowEditing","Message_AllowEditing_BlockEditInMinutes","uid","inputPlaceholder","showCancelButton","confirmButtonColor","confirmButtonText","cancelButtonText","closeOnConfirm","inputValue","showInputError","showConfirmButton","reactions","_objectWithoutProperties","_extends","normalizeThreadMessage","waitUntilWrapperExists","upsertMessage","upsertMessageBulk","uuidv4","v4","differenceInMilliseconds","renderMessageBody","filterMarkdown","mentions","attachment","selector","MutationObserver","mutations","obs","childList","subtree","ignored","messageToUpsert","tcount","direct","following","threadMsg","repliesCount","msgs","queries","defaultLimit","waitAfterFlush","histories","requestsList","loaded","queue","requestId","lastRequest","once","unqueue","curValue","typeName","curRoomDoc","showMessageInMainThread","previousHeight","visibleMessages","heightDiff","updateMentionsMarksOfRoom","getView","w","msgElement","animate","moreAfter","moreBefore","getMoreIfIsEmpty","mainReady","Notifications","CachedCollectionManager","ROOM_DATA_STREAM","maxRoomsOpen","onDeleteMessageStream","$unset","onDeleteMessageBulkStream","ignoreDiscussion","pinned","$in","openedRooms","msgStream","Streamer","roomStream","onlineUsers","handleTrackSettingsChange","Cls","initClass","substr","streamActive","isNew","updateUnreadBars","onRoom","removeAllListeners","unRoom","closeOlderRooms","roomsToClose","reverse","roomToClose","closeAllRooms","lastSeen","invalidate","existsDomOfRoom","updateUserStatus","utcOffset","onlineUsersValue","loadMissedMessages","all","connectionWasOnline","connected","connection","currentUsername","roomType","reload","recordBefore","$lt","tick","recordAfter","onUser","onLogin","flexNav","animating","openQueue","toggleFlex","DISABLE_ANIMATION","routesNamesForRooms","getTypes","lastRid","getFlex","toggleCurrent","validate","invalid","prev","createCollapseable","getInicialFromInstance","collapsedMedia","collapsed","collapsedMediaVar","collapseArrow","isRtl","sideNavW","x","in_min","in_max","out_min","out_max","_open","listOffset","listHeight","showTop","showBottom","touchstart","movestarted","blockmove","touchstartX","touchstartY","sidebarWrap","closePopover","clientX","clientY","mainContent","touchmove","touch","diffX","diffY","absX","absY","sidebar","isOpen","translate","toFixed","touchend","ignore","clientWidth","passClosePopover","_arguments","MessageBoxActions","actions","actionExists","expression","getById","messageActions","AutoTranslate","actionLinks","openThread","runAction","actionlink","openDiscussion","replyBroadcast","_updatedAt","tunread","tunreadUser","tunreadGroup","translateLanguage","getLanguage","autoImageLoad","enableMessageParserEarlyAdoption","saveMobileBandwidth","Device","isPhone","collapseMediaByDefault","showreply","showReplyButton","hasPermissionDeleteMessage","hasPermissionDeleteOwnMessage","hideRoles","UI_Use_Real_Name","Chatops_Username","AutoTranslate_Enabled","Message_ShowEditedStatus","API_Embed","API_EmbedDisabledFor","Message_GroupingPeriod","modalStack","createModal","showFooter","confirmOnEnter","closeOnEscape","inputType","renderedModal","display","renderWithData","rc_modal","destroy","confirm","errorEl","innerHTML","dontAskAgain","dontAskAgainList","dontAsk","hasAction","modalIcon","oldFocus","inputAction","checked","dontAskAgainObject","getElementsByClassName","allowOutsideClick","currentTracker","omit","messageId","setParams","setQueryParams","popout","isAudioOnly","showVideoControls","showStreamControls","y","onCloseCallback","dragstart","popoutElement","dragover","dragend","drop","positionTop","positionLeft","isMinimized","isMuted","isPlaying","getStreamStatus","streamStatus","canOpenExternal","liveStreamPlayer","setSize","streamingSource","offsetX","offsetY","dispatchEvent","Event","playVideo","pauseVideo","mute","unMute","detail","YT","PlayerState","PLAYING","PAUSED","renderedPopover","targetRect","getBoundingClientRect","dataVar","click","offsetHorizontal","originalWidth","innerWidth","popoverContent","position","direction","verticalDirection","rtlDirection","rightDirection","horizontalDirection","customCSSProperties","mousePosition","offsetWidth","offsetHeight","leftDiff","popoverWidth","popoverHeight","windowWidth","windowHeight","innerHeight","property","realTop","overflow","bottom","opacity","visibility","isSafariIos","debug","enable","unreadMark","visible","disable","isEnable","lastReadRecord","firstUnreadRecord","unreadFirstId","Message","language","messageType","getType","GraphemeSplitter","splitter","countGraphemes","validateRoomComment","comment","validateRoomTags","tagsRequired","tags","checkUserTagPermission","availableUserTags","closeRoom","invalidComment","invalidTags","tagsPlaceHolder","placeholder","hasAvailableTags","availableTags","canRemoveTag","clientAction","valueOf","is","tagVal","agentDepartments","onEnterTag","v1","departmentId","department","requestTagBeforeClosingChat","departments","dept","tagsList","isAdmin","customFormTemplate","addCustomFormTemplate","removeCustomTemplate","getCustomFormTemplate","Map","customTemplateName","encrypt","getKeyFromString","ExternalFrameContainer","externalFrameUrl","authToken","frameURLSetting","frameURL","toString","getCredentials","keyStr","register","LivechatInquiry","Mongo","Collection","subs","loop","LivechatRoomType","livechatManagerRoutes","load","prefix","LivechatRoomRoute","notSubscribedTpl","readOnlyTpl","inquiry","INVITE","JOIN","servedBy","showQuickActionButtons","formatDistance","navigation","page","history","location","commentLabel","transferredBy","transferTypes","agent","transferredTo","nextDepartment","transfer","scope","requestData","visitor","requestTypes","guest","transcript","webRtcCallEndTs","callDuration","endTime","LIMIT_DEFAULT","snippetedMessages","hasMessages","snippeted","cursor","total","mentionsFlexTab","Markdown","formatTime","snippetPage","snippet","snippetContent","markdown","tokens","date","snippetId","snippetLink","snippetName","snippetMessage","getExternalComponents","externalComponents","games","openGame","gameManifestInfo","game","GameCenter","isReady","onTableScroll","end","showGame","gameContainerOptions","clearGameManifestInfo","showBackButton","content","Apps","getExternalComponent","externalComponent","realAppClientUIHost","getUIHost","currentUser","getClientUserInfo","currentRoom","getClientRoomInfo","GameContainer","isContextualBar","isModal","post","AutoComplete","InvitePlayers","onSelectUser","selectedUsers","myUsername","unshift","onClickTagUser","deleteLastItemUser","onClickTagRoom","deleteLastItemRoom","selectedRoom","onSelectRoom","roomCollection","roomSelector","$regex","roomModifier","f","part","userModifier","nameSuggestion","discussionName","privateGroupName","warn","arr","SearchInvitePlayers","ac","filteredList","templateItem","autocomplete","KEYCODE_BACKSPACE","KEYCODE_DELETE","deleteLastItem","onFocus","onClickTag","$element","selected","endpoint","onSelect","term","inputDelay","rules","matchAll","doNotChangeWidth","tmplInst","AppWebsocketReceiver","AppEvents","loadButtons","freeze","APP_ADDED","APP_REMOVED","APP_UPDATED","APP_STATUS_CHANGE","APP_SETTING_UPDATED","COMMAND_ADDED","COMMAND_DISABLED","COMMAND_UPDATED","COMMAND_REMOVED","ACTIONS_CHANGED","onCommandAddedOrUpdated","onCommandRemovedOrDisabled","onActionsChanged","streamer","listenStreamerEvents","eventName","registerListener","listener","unregisterListener","RealAppsEngineUIHost","AppsEngineUIHost","_baseURL","getUserAvatarUrl","avatarUrl","slugifiedName","cachedMembers","members","loadAppI18nResources","handleI18nResources","TAPi18next","Utilities","languages","translations","scopedTranslations","getI18nKeyForApp","addResourceBundle","handleAppAdded","getAppLanguages","apps","getAppsLanguages","getWsListener","AppClientManager","createDeferredValue","_resolve","_reject","AppClientOrchestrator","isEnabled","isLoaded","ws","setEnabled","deferredIsEnabled","getAppClientManager","_manager","getApps","getAppsFromMarketplace","appsOverviews","marketplace","latest","price","pricingPlans","purchaseType","isEnterpriseOnly","getAppsOnBundle","bundleId","getApp","app","getAppFromMarketplace","getLatestAppFromMarketplace","appVersion","getAppSettings","setAppSettings","updated","getAppApis","apis","installApp","permissionsGranted","updateApp","uninstallApp","syncApp","setAppStatus","effectiveStatus","enableApp","disableApp","buildExternalUrl","details","getCategories","categories","_appClientUIHost","initialize","curl","method","auth","headers","opts","newLine","verbose","toUpperCase","queryString","headerKeys","toLowerCase","validateEmail","ChatpalAdmin","apiKey","lang","tac","email","readtac","getAvatarUrl","formatDate","getDMUrl","ChatpalSearchResultTemplate","badRequest","resultType","DefaultResultType","parentPayload","evt","search","env","PageSize","rows","searching","navSelected","resultsFoundForAllSearch","numFound","moreMessagesThanDisplayed","docs","resultNumFound","resultMessagesOnly","resultPaging","pageSize","currentPage","numOfPages","ChatpalSearchSingleMessage","r","roomLink","getRoomName","roomNotSubscribed","created","ChatpalSearchSingleRoom","ChatpalSearchSingleUser","cleanUsername","user_username","ChatpalSuggestionItemTemplate","getMedia","createAndConnect","WebSocket","onerror","sendMessageToWebSocket","readyState","delay","waitForStreamStatus","currentStatus","streamId","waitForBroadcastStatus","broadcastActive","broadcastId","broadcastView","broadcastSource","mediaStream","getTracks","localMediaStream","mimeType","isTypeSupported","thumbnail","streamingOptions","popup","checkInterval","setInterval","closed","clearInterval","optionsFromUrl","parsedUrl","liveStreamTab","broadcastEnabled","streamingUnavailableMessage","thumbnailUrl","hasThumbnail","hasSource","canEdit","canDock","livestreamTabSource","popoutSource","isPopoutOpen","popoutOpen","docked","clearedObject","roomAnnouncement","livestream","onYouTubePlayerAPIReady","playerReadyEvent","liveStreamView","Player","videoId","playerVars","autoplay","controls","showinfo","enablejsapi","fs","modestbranding","rel","onStateChange","playerStateChangedEvent","CustomEvent","firstScriptTag","getElementsByTagName","insertBefore","oauthWindow","pinnedMessages","pinMessage","unpinMessage","starredMessages","starred","star","starMessage","findOneByRoomIdAndMessageId","authorize","oauthApp","client_id","getToken","LOGIN_TOKEN_KEY","getClient","oauth","authorizedClients","registerAdminSidebarItem","permissionGranted","DefaultSearchResultTemplate","globalSearchEnabled","GlobalSearchEnabled","searchAll","messageParse","searchedText","customClass","groupable","RocketSearch","provider","suggestions","suggestionActive","_search","_p","assign","suggest","suggestion","supportsSuggestions","suggestionSelected","messageBoxFollow","thread","mainMessage","Threads","messageBoxData","checkboxData","callbackRemove","threadsObserve","loadMore","lastJump","scrollBehavior","scrollIntoView","sendToChannel","normalizeThreadTitle","MentionsParser","emojiParser","filteredMessage","channels","me","pattern","useRealName","userTemplate","roomTemplate","parentMessage","getRoomAvatarURL","getUsername","getRoomETag","avatar","alt","loginForm","userName","namePlaceholder","showFormLogin","btnLoginSave","loginTerms","registrationAllowed","validSecretUrl","validSecretURL","linkReplacementText","passwordResetAllowed","requirePasswordConfirmation","emailOrUsernamePlaceholder","passwordPlaceholder","confirmPasswordPlaceholder","manuallyApproveNewUsers","typedEmail","secretURL","reason","loginWithPassword","pass","loginMethod","emailOrUsername","registrationForm","serializeArray","formObj","validationObj","isEmpty","loginLayout","backgroundUrl","asset","defaultUrl","loginServices","showButton","displayName","loginMethods","loadingIcon","serviceIcon","loginWithService","serviceConfig","clientConfig","error1","validateCustomFields","hasOwnProperty","customField","required","maxLength","minLength","usernameValue","blocked","unavailable","escaped","escape","ctrlKey","handleClearUnreadAllMessages","subscriptions","metaKey","tagName","inputMessage","handleMessageLinkClick","d","script","l","getTime","j","dl","async","setupAutogrow","formattingButtons","applyFormatting","EmojiPicker","getImageExtensionFromMime","isRTL","popupConfig","replyMessageData","isMicrophoneDenied","isSendIconVisible","insertNewLine","autogrow","sel","createRange","newPosition","before","after","inputSetup","isBlockedOrBlocker","mustJoinWithCode","isBlocked","isBlocker","blocker","joinCodeRequired","getInput","shadow","isAnonymousOrMustJoinWithCode","isAnonymous","isWritable","onHold","isReadOnly","isArchived","isEmojiEnabled","canSend","verifyCanSendMessage","actionGroups","actionGroup","isSubscribed","handleFormattingShortcut","isMacOS","platform","isCmdOrCtrlPressed","sendOnEnter","sendOnEnterActive","isDesktop","handleSubmit","isSubmitKey","CARRIAGE_RETURN","NEW_LINE","withModifier","isSending","joinCodeInput","joinCode","isOpened","emojiValue","caretPos","textAreaTxt","execCommand","isEventHandled","clipboardData","kind","fileItem","getAsFile","imageExtension","dir","onValueChanged","propertyName","sendIconDisabled","firstElementChild","VRecDialog","multiple","one","canGetGeolocation","getGeolocationPermission","permissions","getGeolocationPosition","resolvePos","geolocation","getCurrentPosition","enableHighAccuracy","maximumAge","getCoordinates","resolveModal","modalAnswer","closeOnCancel","isConfirm","newStatus","coords","latitude","longitude","coordinates","isMapViewEnabled","isGeolocationCurrentPositionSupported","googleMapsApiKey","startRecording","USER_RECORDING","recordingInterval","recordingRoomId","clearIntervalVariables","cancelRecording","messageBoxAudioMessage","permissionStatus","onchange","enumerateDevices","isAllowed","stateClass","startTime","distance","minutes","floor","seconds","padStart","replaceWhitespaces","whitespaces","repeat","font","lineHeight","maxHeight","maxHeightPx","getComputedStyle","resize","wordWrap","minHeight","lastWidth","lastHeight","textLenght","isMaximumHeightReached","isTextLengthOutdated","wasWidthChanged","shadowText","shadowHeight","updateThrottled","$textarea","selectedText","startPattern","startPatternFound","every","char","endPattern","endPatternFound","messageBoxNotSubscribed","customTemplate","getNotSubscribedTpl","canJoinRoom","verifyShowJoinLink","isJoinCodeRequired","isAnonymousReadAllowed","isAnonymousWriteAllowed","messageBoxReadOnly","getReadOnlyTpl","messageBoxReplyPreview","author_name","filtered","customMessagePopups","addMessagePopup","removeMessagePopup","nonReactiveGetFunc","configGetter","popupName","customMessagePopupsList","findIndex","listWithRemovedElement","TAB","ENTER","ESC","ARROW_LEFT","ARROW_RIGHT","getCursorPosition","selLen","move","messagePopup","textFilter","textFilterDelay","hasData","triggerAnywhere","closeOnEsc","blurOnSelectItem","suffix","matchSelectorRegex","selectorRegex","replaceRegex","up","down","verifySelection","first","onInputKeydown","enterValue","cleanOnEnter","setTextFilter","onInputKeyup","clickingItem","caret","firstPartValue","lastPartValue","filterCallback","getFilter","wasMenuIconClicked","emptyTemplate","subscriptionsReady","toolbar","toolbarData","sidebarHeaderHeight","sidebarWidth","messagePopupChannel","channelIcon","reloadUsersFromRoomMessages","usersFromRoomMessages","uniqueMessageUsersControl","notMapped","fetchUsersFromServer","filterText","nickname","outside","sortA","sortB","fetchRoomsFromServer","rooms","emojiSort","recents","a","b","idA","idB","exactFinalTone","colorBlind","seeColor","getEmojis","packages","emojione","asciiList","regExp","getRecent","addEmojiToRecents","pickerEl","_withTemplateInstanceFunc","addRecent","messagePopupConfig","getCustomConfig","popupUserConfig","suggestionsCount","filterRegex","popupChannelConfig","exp","findWhere","popupSlashCommandsConfig","isMatch","popupEmojiConfig","emojiText","popupReactionEmojiConfig","messagePopupEmoji","messagePopupSlashCommandPreview","preview","selectedItem","commandName","commandArgs","dragging","fetchPreviews","_previewFetcher","i18nTitle","enterKeyAction","selectedId","inputBox","selectionLogic","inputValueAtCursor","providesPreview","_messagePopupSlashCommandPreviewRendered","getArgs","isType","expected","triggerAction","triggerBlockAction","triggerActionButtonAction","triggerSubmitView","triggerCancel","getUserInteractionPayloadByViewId","UIKitIncomingInteractionType","UIKitInteractionTypes","banners","TRIGGER_TIMEOUT","TRIGGER_TIMEOUT_ERROR","triggersId","instances","invalidateTriggerId","handlePayloadUserInteraction","has","viewId","ERRORS","BANNER_UPDATE","MODAL_UPDATE","CONTEXTUAL_BAR_UPDATE","MODAL_OPEN","CONTEXTUAL_BAR_OPEN","BANNER_OPEN","closeById","BANNER_CLOSE","CONTEXTUAL_BAR_CLOSE","MODAL_ClOSE","actionId","rest","interactionType","ACTION_BUTTON","catch","VIEW_SUBMIT","MODAL_CLOSE","VIEW_CLOSED","dompurify","timeAgo","formatDateAndTime","UserRoles","Roles","renderMentions","renderBody","sanitize","str","md","i18nReplyCounter","i18nDiscussionCounter","dcount","encodeURI","isIgnored","ignoredClass","isDecrypting","isBot","bot","hasAttachments","roleTags","userRoles","roomRoles","isGroupable","allowGroup","avatarFromUsername","avatarFromMessage","getName","alias","showUsername","own","timestamp","chatops","useTimeAgo","isTemp","threadMessage","bodyClass","returnClass","showTranslated","autoTranslateFetching","autoTranslateShowInverse","translationProvider","providersMetadata","edited","editTime","editedBy","hasOembed","urls","oembedBaseWidget","myName","myDisplayName","names","displayNames","selectedDisplayNames","userReacted","markUserReaction","class","hideReactions","hideAddReaction","reactWhenReadOnly","hideMessageActions","actionLink","hideActionLinks","injectMessage","injectIndex","injectSettings","channelName","fromSearch","messageGroup","isSnippet","isThreadReply","_groupable","shouldHideBody","shouldCollapseReplies","isCollapsedThreadReply","collapseSwitchClass","showStar","readReceipt","readByEveryone","hasTempClass","node","getPreviousSentMessage","currentNode","previousValid","isNewDay","previousNode","forceDate","showDateSeparator","currentDataset","previousDataset","previousMessageDate","currentMessageDate","toDateString","isSequential","period","processSequentials","nextNode","bubbles","findParentMessage","waiting","pending","getMessages","_tmp","messageThread","currentTime","jitsiTimeout","ChatPermissions","AuthzCachedCollection","rolesStreamer","roleNames","isUserInRoles","userHasAllPermission","AuthorizationUtils","_collection","_docs","_map","_recomputeResults","updatePositions","recent","tone","pickCallback","scrollingToCategory","currentCategory","emojiPicker","setPosition","setTone","getTone","windowBorder","sourcePos","cssProperties","isLargerThanWindow","containerEl","emojiInput","calculateCategoryPositions","showCategory","emojiCustom","pickEmoji","_emoji","splice","base","emojisByCategory","updateRecent","removeFromRecent","category","emojiPickerImport","updateRecentEmoji","containerScroll","catPositions","getCategoryPositions","createEmojiMessageRenderer","isIE11","emojiPackage","checkEmojiOnly","emojis","hasText","nodeType","Node","ELEMENT_NODE","NodeFilter","FILTER_REJECT","FILTER_ACCEPT","walker","createTreeWalker","SHOW_ELEMENT","SHOW_TEXT","TEXT_NODE","nodeValue","emojiOnly","len","emojioneRender","emojiCategories","i18n","categoryIndex","toneList","renderPicker","emojiToRender","correctPackage","addImage","WeakMap","featureExists","IntersectionObserver","loadImage","img","Image","onload","entry","isIntersecting","unobserve","threshold","trackVisibility","emptyImageEncoded","imgsrcs","lazyloadImage","srcUrl","lazySrcUrl","Deps","getCaretCoordinates","AutoCompleteRecords","isServerSearch","rule","isString","validateRule","isWholeField","getRegExp","getFindParams","sortspec","isFunction","$options","getField","obj","string","KEYS","expressions","matched","ruleDep","filterDep","loadingDep","comp","matchedRule","setLoaded","endpointName","teardown","setMatchedRule","setFilter","_timeoutHandler","startpos","getText","breakLoop","hideList","processSelection","onItemHover","ensureSelection","isShowing","showing","positionContainer","replacement","setText","fullStuff","posfix","finalFight","offsetParent","currentItem","currentTemplate","exportDefault","acEvents","attributes","autocompleteHelpers","inputAutocomplete","textareaAutocomplete","autocompleteContainer","onViewReady","With","_autocompleteContainer","rendered","_noMatch","meta","twitterPlayerStreamContentType","oembedHtml","oembedImageWidget","downloadImages","unescapeHTML","getTitle","ogTitle","twitterTitle","getDescription","ogDescription","twitterDescription","oembedUrlWidget","_escape","host","image","decodedOgImage","ogImage","twitterImage","msapplicationTileImage","protocol","oembedVideoWidget","twitterPlayerStream","TokenPassRoomType","hasTokenpass","services","tokenpass","ChannelSettings","addOption","validation","tokenChannelsList","tokenpassRooms","channelSettings__tokenpass","addDisabled","balance","initial","requiredChecked","requireAll","requiredLabel","requiredDisabled","editDisabled","findAll","CustomOAuth","serverURL","identityPath","authorizePath","tokenPath","tokenSentVia","usernameField","mergeUsers","addAutopublishFields","forLoggedInUser","forOtherUsers","accessTokenParam","Tokenpass","configure","roomList","anonymous","lm","favoritesEnabled","$and","isLivechat","shouldAppear","noSubscriptionText","NO_ROOMS_SUBSCRIBED","getLowerCaseNames","nameDefault","fnameDefault","lowerCaseName","lowerCaseFName","mergeSubRoom","topic","encrypted","teamId","metrics","waitingResponse","transcriptRequest","closedAt","responseBy","priorityId","livechatData","queuedAt","lastRoomUpdate","cl","lr","mergeRoomSub","flexData","isCombined","loggedInUser","sidebarViewMode","sidebarHideAvatar","ellipsedElement","isTextEllipsed","scrollWidth","setAttribute","redirectToDefaultChannelIfNeeded","needToBeRedirect","firstChannelAfterLogin","groupedByType","userPref","Presence","lastEntries","handleEntries","isConnected","restart","onLogout","userPresence","dialogView","vrecDialog","dialog","initializeCamera","recordIcon","okDisabled","recordDisabled","stopVideoRecording","_set","right","CreateDiscussion","defaultParentRoom","parentMessageId","DiscussionRoomType","supportSchemesForLink","schemes","marked","_marked","createDOMPurify","hljs","getGlobalWindow","renderer","Renderer","highlight","out","codespan","blockquote","quote","linkRenderer","gfm","tables","breaks","pedantic","smartLists","smartypants","DomPurify","ADD_ATTR","addAsToken","inlinecode","p1","p2","noHtml","codeblocks","msgParts","codeMatch","singleLine","listLanguages","emptyLanguage","highlightAuto","isToken","validateAllowedTokens","validateUrl","endsWithWhitespace","getParseableMarkersCount","usableMarkers","getTextWrapper","marker","textPrepend","wrappedText","textAppend","getRegexReplacer","replaceFunction","getRegex","getParserWithCustomMarker","p3","finalMarkerCount","parseBold","parseStrike","parseItalic","p4","p5","parseNotEscaped","rootUrl","escapedUrl","original","clean","javascript","registerLanguage","createMarkdownMessageRenderer","createMarkdownNotificationRenderer","parsers","MarkdownClass","mountTokensBack","parseMessageNotEscaped","parser","mountTokensBackRecursively","tokenList","useHtml","missingTokens","filterMarkdownFromMessage","funct","function","ranClient","method_id","messageIdsToWait","createAutoTranslateMessageRenderer","createAutoTranslateMessageStreamHandler","userLanguage","initialized","supportedLanguages","findSubscriptionByRid","defaultUserLanguage","translateAttachments","observeChanges","getOptions","allOptions","allowedOptions","option","getCustomSoundId","sound","CustomSoundsClass","preload","random","getList","onAll","soundData","getEmojiUrlFromName","deleteEmojiCustom","updateEmojiCustom","isSetNotNull","emojiData","arrayIndex","rocket","arrayIndexList","aliases","aliasIndex","previousExists","previousName","currentAliases","aliasOf","customRender","emojisMatchGroup","_regexpSignature","_regexp","shortname","emojiAlias","dataCheck","currentEmoji","isSet","onLogged","fileUploadHandler","UploadFS","FileUploadBase","Uploads","Avatars","Store","model","directive","secure","cookie","canAccessRoom","process","tmpDir","TMPDIR","defaultStorePermissions","StorePermissions","message_id","getProgress","getFileName","handler","Uploader","onError","onComplete","fileData","pick","onProgress","logged","loginCb","streamAll","streamLogged","streamRoom","streamRoomUsers","streamUser","notifyRoom","notifyUser","notifyUsersOfRoom","visitorId","unUser","unAll","removeListener","unLogged","deleteCustomUserStatus","updateCustomUserStatus","customUserStatus","customUserStatusData","newUserStatus","statusType","localizeName","customStatus","userStatusData","UserStatusProps","jQuery","process2faReturn","_jqueryCall","put","xhrOptions","_jqueryFormDataCall","USER_ID_KEY","_generateQueryFromParams","encodedParams","joinedArray","dataType","_rlRestApiGet","ajax","success","_rlGetSuccess","_rlGetFailure","errorThrown","processTwoFactorError","originalCallback","_jqueryFormDataPromise","XMLHttpRequest","lengthComputable","percentComplete","processData","_jqueryFormDataSuccess","_jqueryFormDataError","errorType","onCode","RoomTypesCommon","RocketChatRoomTypes","roomTypesOrder","getSecondaryRoomName","getIdentifiers","except","getRoomType","unmuted","routeData","getDefaultSubscriptionPref","Info","fileUploadMediaWhiteList","getUserNotificationPreference","getAvatarColor","placeholders","templateVarHandler","secondsToHHMMSS","TOPIC","ANNOUNCEMENT","ARCHIVE","IGNORE","MUTE","SET_AS_OWNER","SET_AS_LEADER","SET_AS_MODERATOR","LEAVE","REMOVE_USER","CLOSE_WARNING","_name","_path","_identifier","_order","_icon","_header","_label","_route","canBeCreated","canBeDeleted","supportMembersList","userDetailShowAdmin","preventRenaming","getMsgSender","senderId","findOneById","canAccessUploadedFile","getReadReceiptsExtraData","roomExit","mainOrder","getTypesToShowOnDashboard","roomConfig","triggersExit","hasCustomLink","getRouteData","getRelativePath","customWhiteList","mediaTypeWhiteList","fileUploadMediaBlackList","blacklist","isTypeOnList","wildCardGlob","wildcards","blackList","whiteList","colors","desktopNotifications","pushNotifications","emailNotificationMode","highlights","preferences","userHighlights","desktopPrefOrigin","mobilePushNotifications","mobilePrefOrigin","emailNotifications","emailPrefOrigin","etag","externalSource","_getURL","getCloudUrl","_site_url","cloudRoute","cloudParams","cloudBaseUrl","cdn","full","cloud","cloud_route","cloud_params","_cdn_prefix","_root_url_path_prefix","_query","cdnPrefix","pathPrefix","finalPath","pref","preferenceKey","serverValue","preference","isRelativeURL","strLeft","strRightBack","password","unsubscribe","testIfPathAreEquals","oldPath","oldRoute","flex","templateData","_addingSlashCommand","previewer","previewCallback","_runningSlashCommand","getPreviews","_executeSlashCommandPreview","executePreview","slashCommand","replaces","isObject","postProcess","sprintf","shift","logger","Logger","variable","object","templateRegex","exec","tmpVariable","tmplVar","tmplAttrName","attrVal","sec","parseFloat","hours","Dolphin","DolphinOnCreateUser","dolphin","NickName","buttonLabelText","buttonColor","buttonLabelColor","clientId","secret","loginStyle","HIGH","Drupal","symbols","activity","objects","nature","food","people","regional","travel","flags","emojioneRenderFromShort","toImage","shortnameToImage","shortnames","regShortNames","emojioneList","uc_base","uc_output","uc_match","uc_greedy","ns","shortnameConversionMap","unicodeCharRegex","convertShortName","unicode","imageTitleTag","ePath","defaultPathPNG","imagePathPNG","emojiSize","unicodeAlt","convert","sprites","fileExtension","convertUnicode","entire","m1","m2","m3","mappedUnicode","mapUnicodeToShort","ascii","asciiRX","riskyMatchAscii","regAsciiRisky","regAscii","GitHubEnterprise","Gitlab","updateConfig","anyChange","ImporterInfo","warnings","importer","ProgressStep","ImportWaitingStates","ImportFileReadyStates","ImportPreparingStartedStates","ImportingStartedStates","ImportingDoneStates","ImportingErrorStates","NEW","UPLOADING","DOWNLOADING_FILE","FILE_LOADED","PREPARING_STARTED","PREPARING_USERS","PREPARING_CHANNELS","PREPARING_MESSAGES","USER_SELECTION","IMPORTING_STARTED","IMPORTING_USERS","IMPORTING_CHANNELS","IMPORTING_MESSAGES","IMPORTING_FILES","FINISHING","DONE","ERROR","CANCELLED","Importers","ImportersContainer","importers","info","getAll","CsvImporterInfo","HipChatEnterpriseImporterInfo","SlackImporterInfo","SlackUsersImporterInfo","userTemplateDefault","roomTemplateDefault","reference","replaceUsers","userMentionRegex","classNames","filterUser","filterTeam","mentionObj","m","replaceChannels","channelMentionRegex","dname","_me","_pattern","_useRealName","getUserMentions","getChannelMentions","createMentionsMessageRenderer","Nextcloud","fillServerURL","bindEnvironment","nextcloudURL","Gimme","LennyFace","Shrug","Tableflip","Unflip","Topic","WordPress","fillSettings","identityTokenSentVia","serverType","watchByRegex","stopClient","toArrayBuffer","joinVectorAndEcryptedData","splitVectorAndEcryptedData","encryptRSA","encryptAES","decryptRSA","decryptAES","generateAESKey","generateRSAKey","exportJWKKey","importRSAKey","importAESKey","importRawKey","deriveKey","readFileAsArrayBuffer","Deferred","ByteBuffer","StaticArrayBufferProto","ArrayBuffer","__proto__","thing","vector","encryptedData","cipherText","Uint8Array","output","crypto","subtle","iv","generateKey","modulusLength","publicExponent","exportKey","keyData","keyUsages","importKey","salt","baseKey","iterations","reader","FileReader","readAsArrayBuffer","EJSON","E2ERoom","logError","waitUntilFind","SaveE2EPasswordModal","EnterE2EPasswordModal","failedToDecodeKey","_ready","instancesByRoomId","decryptSubscriptions","e2eKeyId","removeInstanceByRoomId","startClient","public_key","private_key","loadKeysFromDB","db_public_key","db_private_key","decodePrivateKey","openAlert","modifiers","closable","closeAlert","loadKeys","createAndLoadKeys","encodePrivateKey","createRandomPassword","randomPassword","passwordRevealText","privateKey","changePassword","newPassword","publicKey","requestSubscriptionKeys","masterKey","getMasterKey","getRandomValues","encodedPrivateKey","requestPassword","showModal","showAlert","privKey","decryptMessage","decryptPendingMessages","decryptSubscription","Base64","E2ERoomState","KEY_ID","Symbol","permitedMutations","NOT_STARTED","ESTABLISHING","DISABLED","KEYS_RECEIVED","READY","WAITING_KEYS","filterMutation","currentState","nextState","typeOfRoom","handshake","setState","requestedState","isDisabled","resume","keyReceived","shouldConvertSentMessages","shouldConvertReceivedMessages","isWaitingKeys","keyID","groupKey","E2EKey","importGroupKey","CREATING_KEYS","createGroupKey","isSupportedRoomType","decode","decryptedKey","sessionKeyExportedString","encode","groupSessionKey","sessionKeyExported","encryptKeyForOtherParticipants","encryptForParticipant","userKey","encryptedUserKey","encryptFile","fileArrayBuffer","encryptedFile","decryptFile","encryptText","TextEncoder","ack","fraction","TextDecoder","provideKeyToUser","keyId","Base","_initModel","CachedChannelList","CachedCollection","CachedUserList","setReactions","unsetReactions","eventType","setReactionsInLastMessage","unsetReactionsInLastMessage","EmojiCustom","findByNameOrAlias","Models","findUsersInRole","roleScope","findUsersInRoles","roleName","isUserInRole","UserAndRoom","UserDataFiles","WebdavAccounts","_baseName","allow","deny","ensureIndex","dropIndex","tryEnsureIndex","tryDropIndex","OTR","OTRClass","Room","onUserStream","use","established","otrRoom","otrAck","getUidDirectMessage","peerId","establishing","userOnlineComputation","keyPair","exportedPublicKey","sessionKey","firstPeer","generateKeyPair","acknowledge","$room","$title","namedCurve","importPublicKey","peerPublicKey","deriveBits","public","bits","digest","hashedBits","sessionKeyData","enc","establishConnection","cancelText","setReaction","isPrivate","localforage","localforageGetItem","CachedCollectionManagerClass","_syncEnabled","_unstoreLoginToken","clearAllCacheOnLogout","WAITING_FIRST_CONNECTION","WAITING_FIRST_DISCONNECTION","LISTENING_RECONNECTIONS","step","cachedCollection","clearAllCache","clearCache","clearCacheOnLogout","countQueries","syncEnabled","onReconnect","nullLog","methodName","syncMethodName","userRelated","listenChangesForLoggedUsersOnly","useSync","maxCacheTime","onSyncData","updatedAt","loadFromCache","loadFromServer","lastTime","loadFromServerAndPopulate","removeRoomFromCacheWhenUserLeaves","setupListener","recordData","trySync","tm","sync","_outstandingMethodBlocks","changes","valueA","_deletedAt","valueB","actionTime","reportError","overrideLoginMethod","loginWithCrowdAndTOTP","loginRequest","crowd","crowdPassword","totp","login","loginWithCrowd","Google","loginWithGoogleAndTOTP","isCordova","signIn","_options","restrictCreationByEmailDomain","loginUrlParameters","hd","credentialRequestCompleteCallback","credentialRequestCompleteHandler","requestCredential","loginWithGoogle","loginWithLDAPAndTOTP","ldapPass","ldapOptions","ldap","loginWithLDAP","Facebook","Github","Twitter","MeteorDeveloperAccounts","Linkedin","convertError","lastCredentialToken","lastCredentialSecret","tryLoginAfterPopupClosed","credentialToken","totpCode","credentialSecret","_retrieveCredentialSecret","methodArgument","credentialTokenOrError","createOAuthTotpLoginMethod","credentialProvider","loginWithOAuthTokenAndTOTP","loginWithFacebookAndTOTP","loginWithFacebook","loginWithGithubAndTOTP","loginWithGithub","loginWithMeteorDeveloperAccountAndTOTP","loginWithMeteorDeveloperAccount","loginWithTwitterAndTOTP","loginWithTwitter","loginWithLinkedinAndTOTP","loginWithLinkedin","onPageLoadLogin","loginAttempt","oAuthArgs","arg","oldConfigureLogin","configureLogin","oldMethod","isTotpInvalidError","loginWithPasswordAndTOTP","_hashPassword","loginWithSamlTokenAndTOTP","saml","loginWithSamlToken","piwikUrl","piwikSiteId","piwikPrependDomain","piwikCookieDomain","piwikDomains","piwikAdditionalTracker","googleId","_paq","hostname","upperLevelDomain","domainsArray","domains","addTrackers","tracker","trackerURL","siteId","g","o","q","arguments","ga","trackEvent","triggers","enter","http","slashes","owner","oldUserId","newUserId","loginWithBlockstack","redirectURI","blockstackIDHost","scopes","ObjectIncluding","manifestURI","redirectToSignIn","meteorLogout","blockstackAuth","signUserOut","blockstackLogin","authResponse","userData","blockstack","isUserSignedIn","loadUserData","isSignInPending","handlePendingSignIn","openCenteredPopup","screenX","screenLeft","screenY","screenTop","features","newwindow","loginWithCas","login_url","popup_width","popup_height","appUrl","delim","checkPopupOpen","popupClosed","cas","defaultOptions","registerService","ConfigError","_loginStyle","_redirectUri","_stateParam","popupOptions","Reload","KEY_NAME","saveDataForRedirect","_migrate","immediateMigration","getDataAfterRedirect","migrationData","_storageTokenPrefix","sessionStorage","_debug","Favico","opt","_def","bgColor","textColor","fontFamily","fontStyle","animation","elementId","dataUrl","win","_opt","_orig","_h","_w","_canvas","_context","_img","_lastBadge","_running","_readyCb","_stop","_browser","_animTimeout","_drawTimeout","_doc","ff","InstallTrigger","chrome","opera","ie","safari","HTMLElement","supported","_queue","merge","hexToRgb","isUp","isLeft","h","getIcons","lastIcon","hasAttribute","getContext","clearRect","drawImage","setIcon","finished","circle","more","beginPath","textAlign","moveTo","lineTo","quadraticCurveTo","arc","PI","fillStyle","fill","closePath","stroke","fillText","rectangle","fillRect","badge","number","imageElement","newImg","ratio","videoElement","drawVideo","webcam","newVideo","oGetUserMedia","paused","ended","elms","getLinks","icons","links","canvas","toDataURL","elm","old","newIcon","removeChild","hex","shorthandRegex","def","mergedOpt","attrname","isPageHidden","hidden","msHidden","webkitHidden","mozHidden","fade","none","popFade","slide","revert","animationType","browser","logMatch","enableLogs","wrapHelpersAndEvents","dict","fn1","Function","completeName","viewName","wrapLifeCycle","registerFieldTemplate","MeteorLogout","logoutBehaviour","TERMINATE_SAML","ONLY_RC","samlService","idpSLORedirectURL","logoutWithSaml","loginWithSaml","HTML","Spacebars","makeCursorReactive","Cursor","_depend","toHTMLWithDataNonReactive","kw","toHTMLWithData","renderNonReactive","templateName","View","Raw","_onViewRendered","onViewRendered","nrr","Open","firstBanner","textArguments","ChromeScreenShare","WEB_RTC_EVENTS","WebRTCTransportClass","webrtcInstance","WEB_RTC","startCall","selfId","CALL","media","monitor","joinCall","sendCandidate","CANDIDATE","sendDescription","sendStatus","STATUS","onRemoteCall","onRemoteJoin","onRemoteCandidate","onRemoteDescription","onRemoteStatus","WebRTCClass","autoAccept","resetCallInProgress","callInProgress","stopPeerConnection","peerConnection","peerConnections","updateRemoteItems","iceServers","TransportClass","servers","server","serverConfig","decodeURIComponent","credential","remoteItemsById","audioEnabled","videoEnabled","overlayEnabled","screenShareEnabled","remoteMonitoring","toLocaleLowerCase","screenShareAvailable","transport","checkPeerConnections","iceConnectionState","createdAt","itemsById","getRemoteStreams","remoteStream","stateText","broadcastStatus","remoteConnections","remoteMedia","callInProgressTimeout","remoteConnection","getPeerConnection","RTCPeerConnection","eventNames","candidate","sdpMLineIndex","sdpMid","_getUserMedia","onSuccess","onSuccessLocal","createGain","peer","createMediaStreamDestination","gain","removeTrack","addTrack","desktop","getScreen","audioStream","isChromeExtensionInstalled","installed","isFirefoxExtensionInstalled","rocketchatscreenshare","webstore","install","_error","getScreenSuccess","mozMediaSource","mediaSource","getSourceId","mandatory","chromeMediaSource","chromeMediaSourceId","maxWidth","getAudioSuccess","getAudioError","getLocalUserMedia","localStream","disableAudio","disableVideo","addStream","stopAllPeerConnections","setAudioEnabled","enableAudio","toggleAudio","setVideoEnabled","disableScreenShare","setScreenShareEnabled","enableScreenShare","enableVideo","toggleVideo","startCallAsMonitor","fromUsername","signalingState","onOffer","offer","onLocalDescription","sdp","setLocalDescription","RTCSessionDescription","createOffer","OfferToReceiveAudio","OfferToReceiveVideo","onRemoteOffer","setRemoteDescription","onAnswer","answer","createAnswer","addIceCandidate","RTCIceCandidate","mozRTCPeerConnection","webkitRTCPeerConnection","mozRTCSessionDescription","webkitRTCSessionDescription","mozRTCIceCandidate","webkitRTCIceCandidate","mozAudioContext","sourceId","visitorEditCustomFieldsForm","availablePriorities","priorities","roomPriority","showPriorities","visitorInfoCustomForm","registerOmnichannelSidebarItem","hasLicense","priorityData","definedBy","loadMessages","startDate","endDate","messagesContext","audit","hasResults","convertDate","perTick","CannedResponse","templateFunc","shortcut","settingValue","cannedResponses","searchText","regex","hasNoCannedResponses","isDetailScreen","isNewResponse","isExistingResponse","isUserContext","isDepartmentContext","cannedResponse","canDeleteResponse","canModifyResponse","createdByString","createdBy","isPreviewMode","startPos","endPos","responseData","departmentCannedResponses","cannedResponsesStreamer","agentsId","responses","addRoleRestrictions","guestPermissions","addRolePermissionWhiteList","useMemo","lazy","registerForm","useCustomFieldsAdditionalForm","useMaxChatsPerAgent","useMaxChatsPerAgentDisplay","useEeNumberInput","useEeTextAreaInput","useEeTextInput","useBusinessHoursMultiple","useBusinessHoursTimeZone","useContactManager","useCurrentChatTags","useDepartmentBusinessHours","useDepartmentForwarding","usePrioritiesSelect","useSelectForwardDepartment","registerOmnichannelRoute","lazyRouteComponent","useHasLicense","useState","useEffect","licenseName","license","setLicense","registerAdminRoute","createRouteGroup","unregisterSidebarItem","itemsSubscription","createSidebarItems","registerSidebarItem","unregisterForm","formsSubscription","createFormSubscription","forms","updateCb","subscribe","getCurrentValue","newForm","Options","React","RoomAvatar","Avatar","AvatarSize","Option","Box","memo","useEndpointData","RoomAutoComplete","useRoomAvatarPath","BaseAvatar","getRoomPathAvatar","Chip","useMutableCallback","useDebouncedValue","UserAvatar","UserAutoCompleteMultiple","debouncedFilter","onClickRemove","renderEmoji","Emoji","emojiHandle","markup","__html","useFormatDateAndTime","useCallback","useSetting","useUserPreference","clockMode","deleteMessage","hideRoom","setUserActiveStatus","toggleFavorite","updateMessage","isNumber","messageObject"],"mappings":"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;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","file":"/app.js","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\nimport './codeMirrorComponent.html';\n\nconst CodeMirrors = {};\n\nTemplate.CodeMirror.onRendered(async function () {\n\tconst CodeMirror = await import('codemirror/lib/codemirror.js');\n\n\tawait import('./codeMirror');\n\tawait import('codemirror/lib/codemirror.css');\n\n\tconst options = this.data.options || { lineNumbers: true };\n\tconst textarea = this.find('textarea');\n\tconst editor = CodeMirror.fromTextArea(textarea, options);\n\n\tthis.autorun((c) => {\n\t\tconst { code } = Template.currentData();\n\t\tif (code === undefined) {\n\t\t\treturn;\n\t\t}\n\t\tc.stop();\n\t\teditor.setValue(code);\n\t});\n\n\tCodeMirrors[this.data.id || 'code-mirror-textarea'] = editor;\n\tif (this.data && this.data.editorOnBlur) {\n\t\tthis.data.editorOnBlur(this.data.name);\n\t}\n\n\tconst self = this;\n\teditor.on('change', function (doc) {\n\t\tconst val = doc.getValue();\n\t\ttextarea.value = val;\n\t\tif (self.data.reactiveVar) {\n\t\t\tSession.set(self.data.reactiveVar, val);\n\t\t}\n\t});\n\n\tif (this.data.reactiveVar) {\n\t\tthis.autorun(function () {\n\t\t\tconst val = Session.get(self.data.reactiveVar) || '';\n\t\t\tif (val !== editor.getValue()) {\n\t\t\t\teditor.setValue(val);\n\t\t\t}\n\t\t});\n\t}\n\n\tMeteor.defer(function () {\n\t\teditor.refresh();\n\t});\n});\n\nTemplate.CodeMirror.destroyed = function () {\n\tdelete CodeMirrors[this.data.id || 'code-mirror-textarea'];\n\tthis.$(`#${this.data.id || 'code-mirror-textarea'}`)\n\t\t.next('.CodeMirror')\n\t\t.remove();\n};\n\nTemplate.CodeMirror.helpers({\n\teditorId() {\n\t\treturn this.id || 'code-mirror-textarea';\n\t},\n\n\teditorName() {\n\t\treturn this.name || 'code-mirror-textarea';\n\t},\n});\n","import './codeMirrorComponent';\n","import { Meteor } from 'meteor/meteor';\nimport { Emitter } from '@rocket.chat/emitter';\n\nimport { settings } from '../../../../settings';\n\nclass AudioEncoder extends Emitter {\n\tconstructor(source, { bufferLen = 4096, numChannels = 1, bitRate = settings.get('Message_Audio_bitRate') || 32 } = {}) {\n\t\tsuper();\n\n\t\tconst workerPath = Meteor.absoluteUrl('workers/mp3-encoder/index.js');\n\n\t\tthis.worker = new Worker(workerPath);\n\t\tthis.worker.onmessage = this.handleWorkerMessage;\n\n\t\tthis.worker.postMessage({\n\t\t\tcommand: 'init',\n\t\t\tconfig: {\n\t\t\t\tsampleRate: source.context.sampleRate,\n\t\t\t\tnumChannels,\n\t\t\t\tbitRate,\n\t\t\t},\n\t\t});\n\n\t\tthis.scriptNode = (source.context.createScriptProcessor || source.context.createJavaScriptNode).call(\n\t\t\tsource.context,\n\t\t\tbufferLen,\n\t\t\tnumChannels,\n\t\t\tnumChannels,\n\t\t);\n\t\tthis.scriptNode.onaudioprocess = this.handleAudioProcess;\n\n\t\tsource.connect(this.scriptNode);\n\t\tthis.scriptNode.connect(source.context.destination);\n\t}\n\n\tclose() {\n\t\tthis.worker.postMessage({ command: 'finish' });\n\t}\n\n\thandleWorkerMessage = (event) => {\n\t\tswitch (event.data.command) {\n\t\t\tcase 'end': {\n\t\t\t\tconst blob = new Blob(event.data.buffer, { type: 'audio/mpeg' });\n\t\t\t\tthis.emit('encoded', blob);\n\t\t\t\tthis.worker.terminate();\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\thandleAudioProcess = (event) => {\n\t\tfor (let channel = 0; channel < event.inputBuffer.numberOfChannels; channel++) {\n\t\t\tconst buffer = event.inputBuffer.getChannelData(channel);\n\t\t\tthis.worker.postMessage({\n\t\t\t\tcommand: 'encode',\n\t\t\t\tbuffer,\n\t\t\t});\n\t\t}\n\t};\n}\n\nexport { AudioEncoder };\n","import { AudioEncoder } from './audioEncoder';\n\nconst getUserMedia = ((navigator) => {\n\tif (navigator.mediaDevices) {\n\t\treturn navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);\n\t}\n\n\tconst legacyGetUserMedia =\n\t\tnavigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n\n\tif (legacyGetUserMedia) {\n\t\treturn (options) =>\n\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\tlegacyGetUserMedia.call(navigator, options, resolve, reject);\n\t\t\t});\n\t}\n})(window.navigator);\n\nconst AudioContext = window.AudioContext || window.webkitAudioContext;\n\nclass AudioRecorder {\n\tisSupported() {\n\t\treturn Boolean(getUserMedia) && Boolean(AudioContext);\n\t}\n\n\tcreateAudioContext() {\n\t\tif (this.audioContext) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.audioContext = new AudioContext();\n\t}\n\n\tdestroyAudioContext() {\n\t\tif (!this.audioContext) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.audioContext.close();\n\t\tdelete this.audioContext;\n\t}\n\n\tasync createStream() {\n\t\tif (this.stream) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.stream = await getUserMedia({ audio: true });\n\t}\n\n\tdestroyStream() {\n\t\tif (!this.stream) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.stream.getAudioTracks().forEach((track) => track.stop());\n\t\tdelete this.stream;\n\t}\n\n\tasync createEncoder() {\n\t\tif (this.encoder) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst input = this.audioContext.createMediaStreamSource(this.stream);\n\t\tthis.encoder = new AudioEncoder(input);\n\t}\n\n\tdestroyEncoder() {\n\t\tif (!this.encoder) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.encoder.close();\n\t\tdelete this.encoder;\n\t}\n\n\tasync start(cb) {\n\t\ttry {\n\t\t\tawait this.createAudioContext();\n\t\t\tawait this.createStream();\n\t\t\tawait this.createEncoder();\n\t\t\tcb && cb.call(this, true);\n\t\t} catch (error) {\n\t\t\tconsole.error(error);\n\t\t\tthis.destroyEncoder();\n\t\t\tthis.destroyStream();\n\t\t\tthis.destroyAudioContext();\n\t\t\tcb && cb.call(this, false);\n\t\t}\n\t}\n\n\tstop(cb) {\n\t\tthis.encoder.on('encoded', cb);\n\t\tthis.encoder.close();\n\n\t\tthis.destroyEncoder();\n\t\tthis.destroyStream();\n\t\tthis.destroyAudioContext();\n\t}\n}\n\nconst instance = new AudioRecorder();\n\nexport { instance as AudioRecorder };\n","import { ReactiveVar } from 'meteor/reactive-var';\n\nexport const VideoRecorder = new (class VideoRecorder {\n\tconstructor() {\n\t\tthis.started = false;\n\t\tthis.cameraStarted = new ReactiveVar(false);\n\t\tthis.recording = new ReactiveVar(false);\n\t\tthis.recordingAvailable = new ReactiveVar(false);\n\t}\n\n\tstart(videoel, cb) {\n\t\tthis.videoel = videoel;\n\n\t\tconst handleSuccess = (stream) => {\n\t\t\tthis.startUserMedia(stream);\n\t\t\tcb && cb.call(this, true);\n\t\t};\n\n\t\tconst handleError = (error) => {\n\t\t\tconsole.error(error);\n\t\t\tcb && cb.call(this, false);\n\t\t};\n\n\t\tconst oldGetUserMedia = navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\n\n\t\tif (navigator.mediaDevices) {\n\t\t\tnavigator.mediaDevices.getUserMedia({ audio: true, video: true }).then(handleSuccess, handleError);\n\t\t\treturn;\n\t\t}\n\t\tif (oldGetUserMedia) {\n\t\t\toldGetUserMedia.call(navigator, { audio: true, video: true }, handleSuccess, handleError);\n\t\t\treturn;\n\t\t}\n\n\t\tcb && cb.call(this, false);\n\t}\n\n\trecord() {\n\t\tthis.chunks = [];\n\t\tif (this.stream == null) {\n\t\t\treturn;\n\t\t}\n\t\tthis.mediaRecorder = new MediaRecorder(this.stream, { type: 'video/webm' });\n\t\tthis.mediaRecorder.ondataavailable = (blobev) => {\n\t\t\tthis.chunks.push(blobev.data);\n\t\t\tif (!this.recordingAvailable.get()) {\n\t\t\t\treturn this.recordingAvailable.set(true);\n\t\t\t}\n\t\t};\n\t\tthis.mediaRecorder.start();\n\t\treturn this.recording.set(true);\n\t}\n\n\tstartUserMedia(stream) {\n\t\tthis.stream = stream;\n\n\t\ttry {\n\t\t\tthis.videoel.srcObject = stream;\n\t\t} catch (error) {\n\t\t\tconst URL = window.URL || window.webkitURL;\n\t\t\tthis.videoel.src = URL.createObjectURL(stream);\n\t\t}\n\n\t\tthis.videoel.muted = true;\n\t\tthis.videoel.onloadedmetadata = () => {\n\t\t\tthis.videoel && this.videoel.play();\n\t\t};\n\n\t\tthis.started = true;\n\t\treturn this.cameraStarted.set(true);\n\t}\n\n\tstop(cb) {\n\t\tif (!this.started) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.stopRecording();\n\n\t\tif (this.stream) {\n\t\t\tconst vtracks = this.stream.getVideoTracks();\n\t\t\tfor (const vtrack of Array.from(vtracks)) {\n\t\t\t\tvtrack.stop();\n\t\t\t}\n\n\t\t\tconst atracks = this.stream.getAudioTracks();\n\t\t\tfor (const atrack of Array.from(atracks)) {\n\t\t\t\tatrack.stop();\n\t\t\t}\n\t\t}\n\n\t\tif (this.videoel) {\n\t\t\tthis.videoel.pause;\n\t\t\tthis.videoel.src = '';\n\t\t}\n\n\t\tthis.started = false;\n\t\tthis.cameraStarted.set(false);\n\t\tthis.recordingAvailable.set(false);\n\n\t\tif (cb && this.chunks) {\n\t\t\tconst blob = new Blob(this.chunks, { type: 'video/webm' });\n\t\t\tcb(blob);\n\t\t}\n\n\t\tdelete this.recorder;\n\t\tdelete this.stream;\n\t\tdelete this.videoel;\n\t}\n\n\tstopRecording() {\n\t\tif (!this.started || !this.recording || !this.mediaRecorder) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.mediaRecorder.stop();\n\t\tthis.recording.set(false);\n\t\tdelete this.mediaRecorder;\n\t}\n})();\n","import { Tracker } from 'meteor/tracker';\n\nimport { createEphemeralPortal } from '../../../../client/lib/portals/createEphemeralPortal';\nimport { createAnchor } from '../../../../client/lib/utils/createAnchor';\n\nconst Dep = new Tracker.Dependency();\n\nlet state;\nlet dom;\nlet unregister;\n\nconst props = () => {\n\tDep.depend();\n\treturn state;\n};\n\nexport const closeTooltip = () => {\n\tif (!dom) {\n\t\treturn;\n\t}\n\tunregister = unregister && unregister();\n};\n\nexport const openToolTip = (title, anchor) => {\n\tdom = dom || createAnchor('react-tooltip');\n\tstate = {\n\t\ttitle,\n\t\tanchor,\n\t};\n\tDep.changed();\n\tunregister = unregister || createEphemeralPortal(() => import('../../../../client/components/TooltipComponent'), props, dom);\n};\n\nwindow.matchMedia('(hover: none)').matches ||\n\tdocument.body.addEventListener(\n\t\t'mouseover',\n\t\t(() => {\n\t\t\tlet timeout;\n\t\t\treturn (e) => {\n\t\t\t\ttimeout = timeout && clearTimeout(timeout);\n\t\t\t\ttimeout = setTimeout(() => {\n\t\t\t\t\tconst element = e.target.title || e.dataset?.title ? e.target : e.target.closest('[title], [data-title]');\n\t\t\t\t\tif (element) {\n\t\t\t\t\t\telement.dataset.title = element.title || element.dataset.title;\n\t\t\t\t\t\telement.removeAttribute('title');\n\t\t\t\t\t\topenToolTip(element.dataset.title, element);\n\t\t\t\t\t}\n\t\t\t\t}, 300);\n\t\t\t\tcloseTooltip();\n\t\t\t};\n\t\t})(),\n\t);\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveDict } from 'meteor/reactive-dict';\nimport { debounce } from 'lodash';\n\nimport { settings } from '../../../settings/client';\nimport { Notifications } from '../../../notifications/client';\nimport { IExtras, IRoomActivity, IActionsObject, IUser } from '../../../../definition/IUserAction';\n\nconst TIMEOUT = 15000;\nconst RENEW = TIMEOUT / 3;\n\nexport const USER_ACTIVITY = 'user-activity';\n\nexport const USER_ACTIVITIES = {\n\tUSER_RECORDING: 'user-recording',\n\tUSER_TYPING: 'user-typing',\n\tUSER_UPLOADING: 'user-uploading',\n};\n\nconst activityTimeouts = new Map();\nconst activityRenews = new Map();\nconst continuingIntervals = new Map();\nconst roomActivities = new Map<string, Set<string>>();\nconst rooms = new Map<string, Function>();\n\nconst performingUsers = new ReactiveDict<IActionsObject>();\n\nconst shownName = function (user: IUser | null | undefined): string | undefined {\n\tif (!user) {\n\t\treturn;\n\t}\n\tif (settings.get('UI_Use_Real_Name')) {\n\t\treturn user.name;\n\t}\n\treturn user.username;\n};\n\nconst emitActivities = debounce((rid: string, extras: IExtras): void => {\n\tconst activities = roomActivities.get(extras?.tmid || rid) || new Set();\n\tNotifications.notifyRoom(rid, USER_ACTIVITY, shownName(Meteor.user()), [...activities], extras);\n}, 500);\n\nfunction handleStreamAction(rid: string, username: string, activityTypes: string[], extras?: IExtras): void {\n\trid = extras?.tmid || rid;\n\tconst roomActivities = performingUsers.get(rid) || {};\n\n\tfor (const [, activity] of Object.entries(USER_ACTIVITIES)) {\n\t\troomActivities[activity] = roomActivities[activity] || new Map();\n\t\tconst users = roomActivities[activity];\n\t\tconst timeout = users[username];\n\n\t\tif (timeout) {\n\t\t\tclearTimeout(timeout);\n\t\t}\n\n\t\tif (activityTypes.includes(activity)) {\n\t\t\tactivityTypes.splice(activityTypes.indexOf(activity), 1);\n\t\t\tusers[username] = setTimeout(() => handleStreamAction(rid, username, activityTypes, extras), TIMEOUT);\n\t\t} else {\n\t\t\tdelete users[username];\n\t\t}\n\t}\n\n\tperformingUsers.set(rid, roomActivities);\n}\nexport const UserAction = new (class {\n\taddStream(rid: string): void {\n\t\tif (rooms.get(rid)) {\n\t\t\treturn;\n\t\t}\n\t\tconst handler = function (username: string, activityType: string[], extras?: object): void {\n\t\t\tconst user = Meteor.users.findOne(Meteor.userId() || undefined, {\n\t\t\t\tfields: { name: 1, username: 1 },\n\t\t\t});\n\t\t\tif (username === shownName(user)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\thandleStreamAction(rid, username, activityType, extras);\n\t\t};\n\t\trooms.set(rid, handler);\n\t\tNotifications.onRoom(rid, USER_ACTIVITY, handler);\n\t}\n\n\tperformContinuously(rid: string, activityType: string, extras: IExtras = {}): void {\n\t\tconst trid = extras?.tmid || rid;\n\t\tconst key = `${activityType}-${trid}`;\n\n\t\tif (continuingIntervals.get(key)) {\n\t\t\treturn;\n\t\t}\n\t\tthis.start(rid, activityType, extras);\n\n\t\tcontinuingIntervals.set(\n\t\t\tkey,\n\t\t\tsetInterval(() => {\n\t\t\t\tthis.start(rid, activityType, extras);\n\t\t\t}, RENEW),\n\t\t);\n\t}\n\n\tstart(rid: string, activityType: string, extras: IExtras = {}): void {\n\t\tconst trid = extras?.tmid || rid;\n\t\tconst key = `${activityType}-${trid}`;\n\n\t\tif (activityRenews.get(key)) {\n\t\t\treturn;\n\t\t}\n\n\t\tactivityRenews.set(\n\t\t\tkey,\n\t\t\tsetTimeout(() => {\n\t\t\t\tclearTimeout(activityRenews.get(key));\n\t\t\t\tactivityRenews.delete(key);\n\t\t\t}, RENEW),\n\t\t);\n\n\t\tconst activities = roomActivities.get(trid) || new Set();\n\t\tactivities.add(activityType);\n\t\troomActivities.set(trid, activities);\n\n\t\temitActivities(rid, extras);\n\n\t\tif (activityTimeouts.get(key)) {\n\t\t\tclearTimeout(activityTimeouts.get(key));\n\t\t\tactivityTimeouts.delete(key);\n\t\t}\n\n\t\tactivityTimeouts.set(\n\t\t\tkey,\n\t\t\tsetTimeout(() => this.stop(trid, activityType, extras), TIMEOUT),\n\t\t);\n\t\tactivityTimeouts.get(key);\n\t}\n\n\tstop(rid: string, activityType: string, extras: IExtras): void {\n\t\tconst trid = extras?.tmid || rid;\n\t\tconst key = `${activityType}-${trid}`;\n\n\t\tif (activityTimeouts.get(key)) {\n\t\t\tclearTimeout(activityTimeouts.get(key));\n\t\t\tactivityTimeouts.delete(key);\n\t\t}\n\t\tif (activityRenews.get(key)) {\n\t\t\tclearTimeout(activityRenews.get(key));\n\t\t\tactivityRenews.delete(key);\n\t\t}\n\t\tif (continuingIntervals.get(key)) {\n\t\t\tclearInterval(continuingIntervals.get(key));\n\t\t\tcontinuingIntervals.delete(key);\n\t\t}\n\n\t\tconst activities = roomActivities.get(trid) || new Set();\n\t\tactivities.delete(activityType);\n\t\troomActivities.set(trid, activities);\n\t\temitActivities(rid, extras);\n\t}\n\n\tcancel(rid: string): void {\n\t\tif (!rooms.get(rid)) {\n\t\t\treturn;\n\t\t}\n\n\t\tNotifications.unRoom(rid, USER_ACTIVITY, rooms.get(rid));\n\t\trooms.delete(rid);\n\t}\n\n\tget(roomId: string): IRoomActivity | undefined {\n\t\treturn performingUsers.get(roomId);\n\t}\n})();\n","import { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Tracker } from 'meteor/tracker';\n\nimport { createEphemeralPortal } from '../../../../client/lib/portals/createEphemeralPortal';\n\nconst Dep = new Tracker.Dependency();\n\nlet container;\nlet routeComputation;\nlet props;\nlet unregister;\n\nconst createContainer = () => {\n\tconst div = document.createElement('div');\n\tdiv.id = 'react-user-card';\n\tdocument.body.appendChild(div);\n\treturn div;\n};\n\nexport const closeUserCard = () => {\n\tif (!container) {\n\t\treturn;\n\t}\n\n\tif (routeComputation) {\n\t\trouteComputation.stop();\n\t\trouteComputation = undefined;\n\t}\n\n\tTracker.afterFlush(() => {\n\t\tif (unregister) {\n\t\t\tunregister();\n\t\t\tunregister = undefined;\n\t\t}\n\t});\n};\n\nexport const openUserCard = (args) => {\n\tprops = {\n\t\t...args,\n\t\tonClose: closeUserCard,\n\t};\n\n\tDep.changed();\n\n\tcontainer = container || createContainer();\n\n\tunregister =\n\t\tunregister ||\n\t\tcreateEphemeralPortal(\n\t\t\t() => import('../../../../client/views/room/UserCard'),\n\t\t\t() => {\n\t\t\t\tDep.depend();\n\t\t\t\treturn props;\n\t\t\t},\n\t\t\tcontainer,\n\t\t);\n\n\trouteComputation =\n\t\trouteComputation ||\n\t\tTracker.autorun((c) => {\n\t\t\tFlowRouter.watchPathChange();\n\n\t\t\tif (!c.firstRun) {\n\t\t\t\tcloseUserCard();\n\t\t\t}\n\t\t});\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\n\nimport { t } from '../../../utils';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\n\nAccounts.onEmailVerificationLink(function (token, done) {\n\tAccounts.verifyEmail(token, function (error) {\n\t\tif (error == null) {\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Email_verified') });\n\t\t\tMeteor.call('afterVerifyEmail');\n\t\t} else {\n\t\t\tdispatchToastMessage({ type: 'error', message: error.message });\n\t\t}\n\t\treturn done();\n\t});\n});\n","import moment from 'moment';\nimport _ from 'underscore';\nimport { Meteor } from 'meteor/meteor';\nimport { Random } from 'meteor/random';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Session } from 'meteor/session';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\n\nimport { KonchatNotification } from './notification';\nimport { UserAction, USER_ACTIVITIES } from '../index';\nimport { fileUpload } from './fileUpload';\nimport { t, slashCommands } from '../../../utils/client';\nimport { messageProperties, MessageTypes, readMessage } from '../../../ui-utils/client';\nimport { settings } from '../../../settings/client';\nimport { callbacks } from '../../../../lib/callbacks';\nimport { hasAtLeastOnePermission } from '../../../authorization/client';\nimport { Messages, Rooms, ChatMessage, ChatSubscription } from '../../../models/client';\nimport { emoji } from '../../../emoji/client';\nimport { generateTriggerId } from '../../../ui-message/client/ActionManager';\nimport { imperativeModal } from '../../../../client/lib/imperativeModal';\nimport GenericModal from '../../../../client/components/GenericModal';\nimport { keyCodes } from '../../../../client/lib/utils/keyCodes';\nimport { prependReplies } from '../../../../client/lib/utils/prependReplies';\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\nimport { handleError } from '../../../../client/lib/utils/handleError';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\nimport { onClientBeforeSendMessage } from '../../../../client/lib/onClientBeforeSendMessage';\n\nconst messageBoxState = {\n\tsaveValue: _.debounce(({ rid, tmid }, value) => {\n\t\tconst key = ['messagebox', rid, tmid].filter(Boolean).join('_');\n\t\tvalue ? Meteor._localStorage.setItem(key, value) : Meteor._localStorage.removeItem(key);\n\t}, 1000),\n\n\trestoreValue: ({ rid, tmid }) => {\n\t\tconst key = ['messagebox', rid, tmid].filter(Boolean).join('_');\n\t\treturn Meteor._localStorage.getItem(key);\n\t},\n\n\trestore: ({ rid, tmid }, input) => {\n\t\tconst value = messageBoxState.restoreValue({ rid, tmid });\n\t\tif (typeof value === 'string') {\n\t\t\tmessageBoxState.set(input, value);\n\t\t}\n\t},\n\n\tsave: ({ rid, tmid }, input) => {\n\t\tmessageBoxState.saveValue({ rid, tmid }, input.value);\n\t},\n\n\tset: (input, value) => {\n\t\tinput.value = value;\n\t\t$(input).trigger('change').trigger('input');\n\t},\n\n\tpurgeAll: () => {\n\t\tObject.keys(Meteor._localStorage)\n\t\t\t.filter((key) => key.indexOf('messagebox_') === 0)\n\t\t\t.forEach((key) => Meteor._localStorage.removeItem(key));\n\t},\n};\n\ncallbacks.add('afterLogoutCleanUp', messageBoxState.purgeAll, callbacks.priority.MEDIUM, 'chatMessages-after-logout-cleanup');\n\nexport class ChatMessages {\n\tconstructor(collection = ChatMessage) {\n\t\tthis.collection = collection;\n\t}\n\n\tediting = {};\n\n\trecords = {};\n\n\tinitializeWrapper(wrapper) {\n\t\tthis.wrapper = wrapper;\n\t}\n\n\tinitializeInput(input, { rid, tmid }) {\n\t\tthis.input = input;\n\t\tthis.$input = $(this.input);\n\n\t\tif (!input || !rid) {\n\t\t\treturn;\n\t\t}\n\n\t\tmessageBoxState.restore({ rid, tmid }, input);\n\t\tthis.restoreReplies();\n\t\tthis.requestInputFocus();\n\t}\n\n\tasync restoreReplies() {\n\t\tconst mid = FlowRouter.getQueryParam('reply');\n\t\tif (!mid) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst message = Messages.findOne(mid) || (await callWithErrorHandling('getSingleMessage', mid));\n\t\tif (!message) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.$input.data('reply', [message]).trigger('dataChange');\n\t}\n\n\trequestInputFocus() {\n\t\tsetTimeout(() => {\n\t\t\tif (this.input && window.matchMedia('screen and (min-device-width: 500px)').matches) {\n\t\t\t\tthis.input.focus();\n\t\t\t}\n\t\t}, 200);\n\t}\n\n\trecordInputAsDraft() {\n\t\tconst message = this.collection.findOne(this.editing.id);\n\t\tconst record = this.records[this.editing.id] || {};\n\t\tconst draft = this.input.value;\n\n\t\tif (draft === message.msg) {\n\t\t\tthis.clearCurrentDraft();\n\t\t\treturn;\n\t\t}\n\n\t\trecord.draft = draft;\n\t\tthis.records[this.editing.id] = record;\n\t}\n\n\tclearCurrentDraft() {\n\t\tconst hasValue = this.records[this.editing.id];\n\t\tdelete this.records[this.editing.id];\n\t\treturn !!hasValue;\n\t}\n\n\tresetToDraft(id) {\n\t\tconst message = this.collection.findOne(id);\n\t\tconst oldValue = this.input.value;\n\t\tmessageBoxState.set(this.input, message.msg);\n\t\treturn oldValue !== message.msg;\n\t}\n\n\ttoPrevMessage() {\n\t\tconst { element } = this.editing;\n\t\tif (!element) {\n\t\t\tconst messages = Array.from(this.wrapper.querySelectorAll('.own:not(.system)'));\n\t\t\tconst message = messages.pop();\n\t\t\treturn message && this.edit(message, false);\n\t\t}\n\n\t\tfor (let previous = element.previousElementSibling; previous; previous = previous.previousElementSibling) {\n\t\t\tif (previous.matches('.own:not(.system)')) {\n\t\t\t\treturn this.edit(previous, false);\n\t\t\t}\n\t\t}\n\t\tthis.clearEditing();\n\t}\n\n\ttoNextMessage() {\n\t\tconst { element } = this.editing;\n\t\tif (element) {\n\t\t\tlet next;\n\t\t\tfor (next = element.nextElementSibling; next; next = next.nextElementSibling) {\n\t\t\t\tif (next.matches('.own:not(.system)')) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tnext ? this.edit(next, true) : this.clearEditing();\n\t\t} else {\n\t\t\tthis.clearEditing();\n\t\t}\n\t}\n\n\tedit(element, isEditingTheNextOne) {\n\t\tconst message = this.collection.findOne(element.dataset.id);\n\n\t\tconst hasPermission = hasAtLeastOnePermission('edit-message', message.rid);\n\t\tconst editAllowed = settings.get('Message_AllowEditing');\n\t\tconst editOwn = message && message.u && message.u._id === Meteor.userId();\n\n\t\tif (!hasPermission && (!editAllowed || !editOwn)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (element.classList.contains('system')) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst blockEditInMinutes = settings.get('Message_AllowEditing_BlockEditInMinutes');\n\t\tif (blockEditInMinutes && blockEditInMinutes !== 0) {\n\t\t\tlet currentTsDiff;\n\t\t\tlet msgTs;\n\t\t\tif (message.ts) {\n\t\t\t\tmsgTs = moment(message.ts);\n\t\t\t}\n\t\t\tif (msgTs) {\n\t\t\t\tcurrentTsDiff = moment().diff(msgTs, 'minutes');\n\t\t\t}\n\t\t\tif (currentTsDiff > blockEditInMinutes) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tconst draft = this.records[message._id];\n\t\tlet msg = draft && draft.draft;\n\t\tmsg = msg || message.msg;\n\n\t\tthis.clearEditing();\n\n\t\tthis.editing.element = element;\n\t\tthis.editing.id = message._id;\n\t\tthis.input.parentElement.classList.add('editing');\n\t\telement.classList.add('editing');\n\n\t\tif (message.attachments && message.attachments[0].description) {\n\t\t\tmessageBoxState.set(this.input, message.attachments[0].description);\n\t\t} else {\n\t\t\tmessageBoxState.set(this.input, msg);\n\t\t}\n\n\t\tconst cursorPosition = isEditingTheNextOne ? 0 : -1;\n\t\tthis.input.focus();\n\t\tthis.$input.setCursorPosition(cursorPosition);\n\t}\n\n\tclearEditing() {\n\t\tif (!this.editing.element) {\n\t\t\tthis.editing.saved = this.input.value;\n\t\t\tthis.editing.savedCursor = this.input.selectionEnd;\n\t\t\treturn;\n\t\t}\n\n\t\tthis.recordInputAsDraft();\n\t\tthis.input.parentElement.classList.remove('editing');\n\t\tthis.editing.element.classList.remove('editing');\n\t\tdelete this.editing.id;\n\t\tdelete this.editing.element;\n\n\t\tmessageBoxState.set(this.input, this.editing.saved || '');\n\t\tconst cursorPosition = this.editing.savedCursor ? this.editing.savedCursor : -1;\n\t\tthis.$input.setCursorPosition(cursorPosition);\n\t}\n\n\tasync send(event, { rid, tmid, value, tshow }, done = () => {}) {\n\t\tconst threadsEnabled = settings.get('Threads_enabled');\n\n\t\tUserAction.stop(rid, USER_ACTIVITIES.USER_TYPING, { tmid });\n\n\t\tif (!ChatSubscription.findOne({ rid })) {\n\t\t\tawait callWithErrorHandling('joinRoom', rid);\n\t\t}\n\n\t\tmessageBoxState.save({ rid, tmid }, this.input);\n\n\t\tlet msg = value.trim();\n\t\tif (msg) {\n\t\t\tconst mention = this.$input.data('mention-user') || false;\n\t\t\tconst replies = this.$input.data('reply') || [];\n\t\t\tif (!mention || !threadsEnabled) {\n\t\t\t\tmsg = await prependReplies(msg, replies, mention);\n\t\t\t}\n\n\t\t\tif (mention && threadsEnabled && replies.length) {\n\t\t\t\ttmid = replies[0]._id;\n\t\t\t}\n\t\t}\n\n\t\t// don't add tmid or tshow if the message isn't part of a thread (it can happen if editing the main message of a thread)\n\t\tconst originalMessage = this.collection.findOne({ _id: this.editing.id }, { fields: { tmid: 1 }, reactive: false });\n\t\tif (originalMessage && tmid && !originalMessage.tmid) {\n\t\t\ttmid = undefined;\n\t\t\ttshow = undefined;\n\t\t}\n\n\t\tif (msg) {\n\t\t\treadMessage.readNow(rid);\n\t\t\treadMessage.refreshUnreadMark(rid);\n\n\t\t\tconst message = await onClientBeforeSendMessage({\n\t\t\t\t_id: Random.id(),\n\t\t\t\trid,\n\t\t\t\ttshow,\n\t\t\t\ttmid,\n\t\t\t\tmsg,\n\t\t\t});\n\n\t\t\ttry {\n\t\t\t\tawait this.processMessageSend(message);\n\t\t\t\tthis.$input.removeData('reply').trigger('dataChange');\n\t\t\t} catch (error) {\n\t\t\t\thandleError(error);\n\t\t\t}\n\t\t\treturn done();\n\t\t}\n\n\t\tif (this.editing.id) {\n\t\t\tconst message = this.collection.findOne(this.editing.id);\n\t\t\tconst isDescription = message.attachments && message.attachments[0] && message.attachments[0].description;\n\n\t\t\ttry {\n\t\t\t\tif (isDescription) {\n\t\t\t\t\tawait this.processMessageEditing({ _id: this.editing.id, rid, msg: '' });\n\t\t\t\t\treturn done();\n\t\t\t\t}\n\n\t\t\t\tthis.resetToDraft(this.editing.id);\n\t\t\t\tthis.confirmDeleteMsg(message, done);\n\t\t\t\treturn;\n\t\t\t} catch (error) {\n\t\t\t\thandleError(error);\n\t\t\t}\n\t\t}\n\n\t\treturn done();\n\t}\n\n\tasync processMessageSend(message) {\n\t\tif (await this.processSetReaction(message)) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.clearCurrentDraft();\n\n\t\tif (await this.processTooLongMessage(message)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (await this.processMessageEditing({ ...message, _id: this.editing.id })) {\n\t\t\treturn;\n\t\t}\n\n\t\tKonchatNotification.removeRoomNotification(message.rid);\n\n\t\tif (await this.processSlashCommand(message)) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait callWithErrorHandling('sendMessage', message);\n\t}\n\n\tasync processSetReaction({ rid, tmid, msg }) {\n\t\tif (msg.slice(0, 2) !== '+:') {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst reaction = msg.slice(1).trim();\n\t\tif (!emoji.list[reaction]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst lastMessage = this.collection.findOne({ rid, tmid }, { fields: { ts: 1 }, sort: { ts: -1 } });\n\t\tawait callWithErrorHandling('setReaction', reaction, lastMessage._id);\n\t\treturn true;\n\t}\n\n\tasync processTooLongMessage({ msg, rid, tmid }) {\n\t\tconst adjustedMessage = messageProperties.messageWithoutEmojiShortnames(msg);\n\t\tif (messageProperties.length(adjustedMessage) <= settings.get('Message_MaxAllowedSize') && msg) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!settings.get('FileUpload_Enabled') || !settings.get('Message_AllowConvertLongMessagesToAttachment') || this.editing.id) {\n\t\t\tthrow new Error({ error: 'Message_too_long' });\n\t\t}\n\n\t\tconst onConfirm = () => {\n\t\t\tconst contentType = 'text/plain';\n\t\t\tconst messageBlob = new Blob([msg], { type: contentType });\n\t\t\tconst fileName = `${Meteor.user().username} - ${new Date()}.txt`;\n\t\t\tconst file = new File([messageBlob], fileName, {\n\t\t\t\ttype: contentType,\n\t\t\t\tlastModified: Date.now(),\n\t\t\t});\n\t\t\tfileUpload([{ file, name: fileName }], this.input, { rid, tmid });\n\t\t\timperativeModal.close();\n\t\t};\n\n\t\tconst onClose = () => {\n\t\t\tmessageBoxState.set(this.input, msg);\n\t\t\timperativeModal.close();\n\t\t};\n\n\t\timperativeModal.open({\n\t\t\tcomponent: GenericModal,\n\t\t\tprops: {\n\t\t\t\ttitle: t('Message_too_long'),\n\t\t\t\tchildren: t('Send_it_as_attachment_instead_question'),\n\t\t\t\tonConfirm,\n\t\t\t\tonClose,\n\t\t\t\tonCancel: onClose,\n\t\t\t\tvariant: 'warning',\n\t\t\t},\n\t\t});\n\n\t\treturn true;\n\t}\n\n\tasync processMessageEditing(message) {\n\t\tif (!message._id) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (MessageTypes.isSystemMessage(message)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.clearEditing();\n\t\tawait callWithErrorHandling('updateMessage', message);\n\t\treturn true;\n\t}\n\n\tasync processSlashCommand(msgObject) {\n\t\tif (msgObject.msg[0] === '/') {\n\t\t\tconst match = msgObject.msg.match(/^\\/([^\\s]+)(?:\\s+(.*))?$/m);\n\t\t\tif (match) {\n\t\t\t\tlet command;\n\t\t\t\tif (slashCommands.commands[match[1]]) {\n\t\t\t\t\tconst commandOptions = slashCommands.commands[match[1]];\n\t\t\t\t\tcommand = match[1];\n\t\t\t\t\tconst param = match[2] || '';\n\n\t\t\t\t\tif (!commandOptions.permission || hasAtLeastOnePermission(commandOptions.permission, Session.get('openedRoom'))) {\n\t\t\t\t\t\tif (commandOptions.clientOnly) {\n\t\t\t\t\t\t\tcommandOptions.callback(command, param, msgObject);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst triggerId = generateTriggerId(slashCommands.commands[command].appId);\n\t\t\t\t\t\t\tMeteor.call('slashCommand', { cmd: command, params: param, msg: msgObject, triggerId }, (err, result) => {\n\t\t\t\t\t\t\t\ttypeof commandOptions.result === 'function' &&\n\t\t\t\t\t\t\t\t\tcommandOptions.result(err, result, {\n\t\t\t\t\t\t\t\t\t\tcmd: command,\n\t\t\t\t\t\t\t\t\t\tparams: param,\n\t\t\t\t\t\t\t\t\t\tmsg: msgObject,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (!settings.get('Message_AllowUnrecognizedSlashCommand')) {\n\t\t\t\t\tconst invalidCommandMsg = {\n\t\t\t\t\t\t_id: Random.id(),\n\t\t\t\t\t\trid: msgObject.rid,\n\t\t\t\t\t\tts: new Date(),\n\t\t\t\t\t\tmsg: TAPi18n.__('No_such_command', { command: escapeHTML(match[1]) }),\n\t\t\t\t\t\tu: {\n\t\t\t\t\t\t\tusername: settings.get('InternalHubot_Username') || 'rocket.cat',\n\t\t\t\t\t\t},\n\t\t\t\t\t\tprivate: true,\n\t\t\t\t\t};\n\n\t\t\t\t\tthis.collection.upsert({ _id: invalidCommandMsg._id }, invalidCommandMsg);\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tconfirmDeleteMsg(message, done = () => {}) {\n\t\tif (MessageTypes.isSystemMessage(message)) {\n\t\t\treturn done();\n\t\t}\n\n\t\tconst room =\n\t\t\tmessage.drid &&\n\t\t\tRooms.findOne({\n\t\t\t\t_id: message.drid,\n\t\t\t\tprid: { $exists: true },\n\t\t\t});\n\n\t\tconst onConfirm = () => {\n\t\t\tif (this.editing.id === message._id) {\n\t\t\t\tthis.clearEditing();\n\t\t\t}\n\n\t\t\tthis.deleteMsg(message);\n\n\t\t\tthis.$input.focus();\n\t\t\tdone();\n\n\t\t\timperativeModal.close();\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Your_entry_has_been_deleted') });\n\t\t};\n\n\t\tconst onCloseModal = () => {\n\t\t\timperativeModal.close();\n\t\t\tif (this.editing.id === message._id) {\n\t\t\t\tthis.clearEditing();\n\t\t\t}\n\t\t\tthis.$input.focus();\n\t\t\tdone();\n\t\t};\n\n\t\timperativeModal.open({\n\t\t\tcomponent: GenericModal,\n\t\t\tprops: {\n\t\t\t\ttitle: t('Are_you_sure'),\n\t\t\t\tchildren: room ? t('The_message_is_a_discussion_you_will_not_be_able_to_recover') : t('You_will_not_be_able_to_recover'),\n\t\t\t\tvariant: 'danger',\n\t\t\t\tconfirmText: t('Yes_delete_it'),\n\t\t\t\tonConfirm,\n\t\t\t\tonClose: onCloseModal,\n\t\t\t\tonCancel: onCloseModal,\n\t\t\t},\n\t\t});\n\t}\n\n\tasync deleteMsg({ _id, rid, ts }) {\n\t\tconst forceDelete = hasAtLeastOnePermission('force-delete-message', rid);\n\t\tconst blockDeleteInMinutes = settings.get('Message_AllowDeleting_BlockDeleteInMinutes');\n\t\tif (blockDeleteInMinutes && forceDelete === false) {\n\t\t\tlet msgTs;\n\t\t\tif (ts) {\n\t\t\t\tmsgTs = moment(ts);\n\t\t\t}\n\t\t\tlet currentTsDiff;\n\t\t\tif (msgTs) {\n\t\t\t\tcurrentTsDiff = moment().diff(msgTs, 'minutes');\n\t\t\t}\n\t\t\tif (currentTsDiff > blockDeleteInMinutes) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: t('Message_deleting_blocked') });\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tawait callWithErrorHandling('deleteMessage', { _id });\n\t}\n\n\tkeydown(event) {\n\t\tconst { currentTarget: input, which: keyCode } = event;\n\n\t\tif (keyCode === keyCodes.ESCAPE && this.editing.element) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tif (!this.resetToDraft(this.editing.id)) {\n\t\t\t\tthis.clearCurrentDraft();\n\t\t\t\tthis.clearEditing();\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (keyCode === keyCodes.ARROW_UP || keyCode === keyCodes.ARROW_DOWN) {\n\t\t\tif (event.shiftKey) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst cursorPosition = input.selectionEnd;\n\n\t\t\tif (keyCode === keyCodes.ARROW_UP) {\n\t\t\t\tif (cursorPosition === 0) {\n\t\t\t\t\tthis.toPrevMessage();\n\t\t\t\t} else if (!event.altKey) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (event.altKey) {\n\t\t\t\t\tthis.$input.setCursorPosition(0);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (cursorPosition === input.value.length) {\n\t\t\t\t\tthis.toNextMessage();\n\t\t\t\t} else if (!event.altKey) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (event.altKey) {\n\t\t\t\t\tthis.$input.setCursorPosition(-1);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t}\n\t}\n\n\tkeyup(event, { rid, tmid }) {\n\t\tconst { currentTarget: input, which: keyCode } = event;\n\n\t\tif (!Object.values(keyCodes).includes(keyCode)) {\n\t\t\tif (input.value.trim()) {\n\t\t\t\tUserAction.start(rid, USER_ACTIVITIES.USER_TYPING, { tmid });\n\t\t\t} else {\n\t\t\t\tUserAction.stop(rid, USER_ACTIVITIES.USER_TYPING, { tmid });\n\t\t\t}\n\t\t}\n\n\t\tmessageBoxState.save({ rid, tmid }, input);\n\t}\n\n\tonDestroyed(rid, tmid) {\n\t\tUserAction.cancel(rid);\n\t\t// TODO: check why we need too many ?. here :(\n\t\tif (this.input?.parentElement?.classList.contains('editing') === true) {\n\t\t\tif (!tmid) {\n\t\t\t\tthis.clearCurrentDraft();\n\t\t\t\tthis.clearEditing();\n\t\t\t}\n\t\t\tmessageBoxState.set(this.input, '');\n\t\t\tmessageBoxState.save({ rid, tmid }, this.$input);\n\t\t}\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../../settings';\nimport { CachedChatRoom, CachedChatSubscription } from '../../../models';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tif (!Meteor.userId() && settings.get('Accounts_AllowAnonymousRead') === true) {\n\t\t\tCachedChatRoom.init();\n\t\t\tCachedChatSubscription.ready.set(true);\n\t\t}\n\t});\n});\n","import { Tracker } from 'meteor/tracker';\nimport { Session } from 'meteor/session';\nimport { Random } from 'meteor/random';\n\nimport { settings } from '../../../settings/client';\nimport { UserAction, USER_ACTIVITIES } from '../index';\nimport { fileUploadIsValidContentType, APIClient } from '../../../utils';\nimport { imperativeModal } from '../../../../client/lib/imperativeModal';\nimport FileUploadModal from '../../../../client/views/room/modals/FileUploadModal';\nimport { prependReplies } from '../../../../client/lib/utils/prependReplies';\n\nexport const uploadFileWithMessage = async (rid, tmid, { description, fileName, msg, file }) => {\n\tconst data = new FormData();\n\tdescription && data.append('description', description);\n\tmsg && data.append('msg', msg);\n\ttmid && data.append('tmid', tmid);\n\tdata.append('file', file.file, fileName);\n\n\tconst uploads = Session.get('uploading') || [];\n\n\tconst upload = {\n\t\tid: Random.id(),\n\t\tname: fileName,\n\t\tpercentage: 0,\n\t};\n\n\tuploads.push(upload);\n\tSession.set('uploading', uploads);\n\n\tconst { xhr, promise } = APIClient.upload(`v1/rooms.upload/${rid}`, {}, data, {\n\t\tprogress(progress) {\n\t\t\tconst uploads = Session.get('uploading') || [];\n\n\t\t\tif (progress === 100) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tuploads\n\t\t\t\t.filter((u) => u.id === upload.id)\n\t\t\t\t.forEach((u) => {\n\t\t\t\t\tu.percentage = Math.round(progress) || 0;\n\t\t\t\t});\n\t\t\tSession.set('uploading', uploads);\n\t\t},\n\t\terror(error) {\n\t\t\tconst uploads = Session.get('uploading') || [];\n\t\t\tuploads\n\t\t\t\t.filter((u) => u.id === upload.id)\n\t\t\t\t.forEach((u) => {\n\t\t\t\t\tu.error = error.message;\n\t\t\t\t\tu.percentage = 0;\n\t\t\t\t});\n\t\t\tSession.set('uploading', uploads);\n\t\t},\n\t});\n\tif (Session.get('uploading').length) {\n\t\tUserAction.performContinuously(rid, USER_ACTIVITIES.USER_UPLOADING, { tmid });\n\t}\n\n\tTracker.autorun((computation) => {\n\t\tconst isCanceling = Session.get(`uploading-cancel-${upload.id}`);\n\t\tif (!isCanceling) {\n\t\t\treturn;\n\t\t}\n\t\tcomputation.stop();\n\t\tSession.delete(`uploading-cancel-${upload.id}`);\n\n\t\txhr.abort();\n\n\t\tconst uploads = Session.get('uploading') || {};\n\t\tSession.set(\n\t\t\t'uploading',\n\t\t\tuploads.filter((u) => u.id !== upload.id),\n\t\t);\n\t});\n\n\ttry {\n\t\tawait promise;\n\t\tconst uploads = Session.get('uploading') || [];\n\t\tconst remainingUploads = Session.set(\n\t\t\t'uploading',\n\t\t\tuploads.filter((u) => u.id !== upload.id),\n\t\t);\n\n\t\tif (!Session.get('uploading').length) {\n\t\t\tUserAction.stop(rid, USER_ACTIVITIES.USER_UPLOADING, { tmid });\n\t\t}\n\t\treturn remainingUploads;\n\t} catch (error) {\n\t\tconst uploads = Session.get('uploading') || [];\n\t\tuploads\n\t\t\t.filter((u) => u.id === upload.id)\n\t\t\t.forEach((u) => {\n\t\t\t\tu.error = (error.xhr && error.xhr.responseJSON && error.xhr.responseJSON.error) || error.message;\n\t\t\t\tu.percentage = 0;\n\t\t\t});\n\t\tif (!uploads.length) {\n\t\t\tUserAction.stop(rid, USER_ACTIVITIES.USER_UPLOADING, { tmid });\n\t\t}\n\t\tSession.set('uploading', uploads);\n\t}\n};\n\nexport const fileUpload = async (files, input, { rid, tmid }) => {\n\tconst threadsEnabled = settings.get('Threads_enabled');\n\n\tfiles = [].concat(files);\n\n\tconst replies = $(input).data('reply') || [];\n\tconst mention = $(input).data('mention-user') || false;\n\n\tlet msg = '';\n\n\tif (!mention || !threadsEnabled) {\n\t\tmsg = await prependReplies('', replies, mention);\n\t}\n\n\tif (mention && threadsEnabled && replies.length) {\n\t\ttmid = replies[0]._id;\n\t}\n\n\tconst uploadNextFile = () => {\n\t\tconst file = files.pop();\n\t\tif (!file) {\n\t\t\treturn;\n\t\t}\n\n\t\timperativeModal.open({\n\t\t\tcomponent: FileUploadModal,\n\t\t\tprops: {\n\t\t\t\tfile: file.file,\n\t\t\t\tfileName: file.name,\n\t\t\t\tonClose: () => {\n\t\t\t\t\timperativeModal.close();\n\t\t\t\t\tuploadNextFile();\n\t\t\t\t},\n\t\t\t\tonSubmit: (fileName, description) => {\n\t\t\t\t\tuploadFileWithMessage(rid, tmid, {\n\t\t\t\t\t\tdescription,\n\t\t\t\t\t\tfileName,\n\t\t\t\t\t\tmsg: msg || undefined,\n\t\t\t\t\t\tfile,\n\t\t\t\t\t});\n\t\t\t\t\timperativeModal.close();\n\t\t\t\t\tuploadNextFile();\n\t\t\t\t},\n\t\t\t\tinvalidContentType: file.file.type && !fileUploadIsValidContentType(file.file.type),\n\t\t\t},\n\t\t});\n\t};\n\n\tuploadNextFile();\n};\n","import { Meteor } from 'meteor/meteor';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { ServiceConfiguration } from 'meteor/service-configuration';\nimport s from 'underscore.string';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\n\nimport { AccountBox } from '../../../ui-utils';\nimport { settings } from '../../../settings';\nimport { callbacks } from '../../../../lib/callbacks';\nimport { add, remove } from '../../../../client/views/room/lib/Toolbox/IframeButtons';\nimport { baseURI } from '../../../../client/lib/baseURI';\n\nconst commands = {\n\t'go'(data) {\n\t\tif (typeof data.path !== 'string' || data.path.trim().length === 0) {\n\t\t\treturn console.error('`path` not defined');\n\t\t}\n\t\tconst newUrl = new URL(`${s.rtrim(baseURI, '/')}/${s.ltrim(data.path, '/')}`);\n\n\t\tconst newParams = Array.from(newUrl.searchParams.entries()).reduce((ret, [key, value]) => {\n\t\t\tret[key] = value;\n\t\t\treturn ret;\n\t\t}, {});\n\n\t\tconst newPath = newUrl.pathname.replace(new RegExp(`^${escapeRegExp(__meteor_runtime_config__.ROOT_URL_PATH_PREFIX)}`), '');\n\t\tFlowRouter.go(newPath, null, { ...FlowRouter.current().queryParams, ...newParams });\n\t},\n\n\t'set-user-status'(data) {\n\t\tAccountBox.setStatus(data.status);\n\t},\n\n\t'call-custom-oauth-login'(data, event) {\n\t\tconst customOAuthCallback = (response) => {\n\t\t\tevent.source.postMessage(\n\t\t\t\t{\n\t\t\t\t\tevent: 'custom-oauth-callback',\n\t\t\t\t\tresponse,\n\t\t\t\t},\n\t\t\t\tevent.origin,\n\t\t\t);\n\t\t};\n\n\t\tconst siteUrl = `${Meteor.settings.Site_Url}/`;\n\t\tif (typeof data.redirectUrl !== 'string' || !data.redirectUrl.startsWith(siteUrl)) {\n\t\t\tdata.redirectUrl = null;\n\t\t}\n\n\t\tif (typeof data.service === 'string' && window.ServiceConfiguration) {\n\t\t\tconst customOauth = ServiceConfiguration.configurations.findOne({ service: data.service });\n\n\t\t\tif (customOauth) {\n\t\t\t\tconst customLoginWith = Meteor[`loginWith${s.capitalize(customOauth.service, true)}`];\n\t\t\t\tconst customRedirectUri = data.redirectUrl || siteUrl;\n\t\t\t\tcustomLoginWith.call(Meteor, { redirectUrl: customRedirectUri }, customOAuthCallback);\n\t\t\t}\n\t\t}\n\t},\n\n\t'login-with-token'(data, ...args) {\n\t\tif (typeof data.token === 'string') {\n\t\t\tMeteor.loginWithToken(data.token, function () {\n\t\t\t\tconsole.log('Iframe command [login-with-token]: result', [data, ...args]);\n\t\t\t});\n\t\t}\n\t},\n\n\t'logout'() {\n\t\tconst user = Meteor.user();\n\t\tMeteor.logout(() => {\n\t\t\tcallbacks.run('afterLogoutCleanUp', user);\n\t\t\tMeteor.call('logoutCleanUp', user);\n\t\t\treturn FlowRouter.go('home');\n\t\t});\n\t},\n\n\t'set-toolbar-button'({ id, icon, label }) {\n\t\tadd(id, { id, icon, label });\n\t},\n\t'remove-toolbar-button'({ id }) {\n\t\tremove(id);\n\t},\n};\n\nwindow.addEventListener('message', (e) => {\n\tif (settings.get('Iframe_Integration_receive_enable') !== true) {\n\t\treturn;\n\t}\n\n\tif (typeof e.data !== 'object' || typeof e.data.externalCommand !== 'string') {\n\t\treturn;\n\t}\n\n\tconst origins = settings.get('Iframe_Integration_receive_origin');\n\n\tif (origins !== '*' && origins.split(',').indexOf(e.origin) === -1) {\n\t\treturn console.error('Origin not allowed', e.origin);\n\t}\n\n\tconst command = commands[e.data.externalCommand];\n\tif (command) {\n\t\tcommand(e.data, e);\n\t}\n});\n","import _ from 'underscore';\n\nimport { menu } from '../../../ui-utils';\n\nwindow.addEventListener(\n\t'resize',\n\t_.debounce(\n\t\t(() => {\n\t\t\tlet lastState = window.matchMedia('(min-width: 780px)').matches ? 'mini' : 'large';\n\t\t\tmenu.close();\n\t\t\treturn () => {\n\t\t\t\tconst futureState = window.matchMedia('(min-width: 780px)').matches ? 'mini' : 'large';\n\t\t\t\tif (lastState !== futureState) {\n\t\t\t\t\tlastState = futureState;\n\t\t\t\t\tmenu.close();\n\t\t\t\t}\n\t\t\t};\n\t\t})(),\n\t\t100,\n\t),\n);\n","// @TODO implementar 'clicar na notificacao' abre a janela do chat\nimport { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Random } from 'meteor/random';\nimport { Tracker } from 'meteor/tracker';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Session } from 'meteor/session';\nimport _ from 'underscore';\nimport s from 'underscore.string';\n\nimport { e2e } from '../../../e2e/client';\nimport { Users, ChatSubscription } from '../../../models';\nimport { getUserPreference } from '../../../utils';\nimport { getUserAvatarURL } from '../../../utils/lib/getUserAvatarURL';\nimport { CustomSounds } from '../../../custom-sounds/client/lib/CustomSounds';\nimport { getAvatarAsPng } from '../../../../client/lib/utils/getAvatarAsPng';\nimport { onClientMessageReceived } from '../../../../client/lib/onClientMessageReceived';\n\nexport const KonchatNotification = {\n\tnotificationStatus: new ReactiveVar(),\n\n\t// notificacoes HTML5\n\tgetDesktopPermission() {\n\t\tif (window.Notification && Notification.permission !== 'granted') {\n\t\t\treturn Notification.requestPermission(function (status) {\n\t\t\t\tKonchatNotification.notificationStatus.set(status);\n\t\t\t\tif (Notification.permission !== status) {\n\t\t\t\t\tNotification.permission = status;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\tnotify(notification) {\n\t\tif (window.Notification && Notification.permission === 'granted') {\n\t\t\tconst message = {\n\t\t\t\trid: notification.payload != null ? notification.payload.rid : undefined,\n\t\t\t\tmsg: notification.text,\n\t\t\t\tnotification: true,\n\t\t\t};\n\t\t\treturn onClientMessageReceived(message).then(function (message) {\n\t\t\t\tconst requireInteraction = getUserPreference(Meteor.userId(), 'desktopNotificationRequireInteraction');\n\t\t\t\tconst n = new Notification(notification.title, {\n\t\t\t\t\ticon: notification.icon || getUserAvatarURL(notification.payload.sender.username),\n\t\t\t\t\tbody: s.stripTags(message.msg),\n\t\t\t\t\ttag: notification.payload._id,\n\t\t\t\t\tcanReply: true,\n\t\t\t\t\tsilent: true,\n\t\t\t\t\trequireInteraction,\n\t\t\t\t});\n\n\t\t\t\tconst notificationDuration = !requireInteraction && (notification.duration - 0 || 10);\n\t\t\t\tif (notificationDuration > 0) {\n\t\t\t\t\tsetTimeout(() => n.close(), notificationDuration * 1000);\n\t\t\t\t}\n\n\t\t\t\tif (notification.payload && notification.payload.rid) {\n\t\t\t\t\tif (n.addEventListener) {\n\t\t\t\t\t\tn.addEventListener('reply', ({ response }) =>\n\t\t\t\t\t\t\tMeteor.call('sendMessage', {\n\t\t\t\t\t\t\t\t_id: Random.id(),\n\t\t\t\t\t\t\t\trid: notification.payload.rid,\n\t\t\t\t\t\t\t\tmsg: response,\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tn.onclick = function () {\n\t\t\t\t\t\tthis.close();\n\t\t\t\t\t\twindow.focus();\n\t\t\t\t\t\tswitch (notification.payload.type) {\n\t\t\t\t\t\t\tcase 'd':\n\t\t\t\t\t\t\t\treturn FlowRouter.go(\n\t\t\t\t\t\t\t\t\t'direct',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\trid: notification.payload.rid,\n\t\t\t\t\t\t\t\t\t\t...(notification.payload.tmid && {\n\t\t\t\t\t\t\t\t\t\t\ttab: 'thread',\n\t\t\t\t\t\t\t\t\t\t\tcontext: notification.payload.tmid,\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{ ...FlowRouter.current().queryParams, jump: notification.payload._id },\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcase 'c':\n\t\t\t\t\t\t\t\treturn FlowRouter.go(\n\t\t\t\t\t\t\t\t\t'channel',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: notification.payload.name,\n\t\t\t\t\t\t\t\t\t\t...(notification.payload.tmid && {\n\t\t\t\t\t\t\t\t\t\t\ttab: 'thread',\n\t\t\t\t\t\t\t\t\t\t\tcontext: notification.payload.tmid,\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{ ...FlowRouter.current().queryParams, jump: notification.payload._id },\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\tcase 'p':\n\t\t\t\t\t\t\t\treturn FlowRouter.go(\n\t\t\t\t\t\t\t\t\t'group',\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\tname: notification.payload.name,\n\t\t\t\t\t\t\t\t\t\t...(notification.payload.tmid && {\n\t\t\t\t\t\t\t\t\t\t\ttab: 'thread',\n\t\t\t\t\t\t\t\t\t\t\tcontext: notification.payload.tmid,\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{ ...FlowRouter.current().queryParams, jump: notification.payload._id },\n\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t},\n\n\tasync showDesktop(notification) {\n\t\tif (\n\t\t\tnotification.payload.rid === Session.get('openedRoom') &&\n\t\t\t(typeof window.document.hasFocus === 'function' ? window.document.hasFocus() : undefined)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (Meteor.user().status === 'busy') {\n\t\t\treturn;\n\t\t}\n\n\t\tif (notification.payload.message && notification.payload.message.t === 'e2e') {\n\t\t\tconst e2eRoom = await e2e.getInstanceByRoomId(notification.payload.rid);\n\t\t\tif (e2eRoom) {\n\t\t\t\tnotification.text = (await e2eRoom.decrypt(notification.payload.message.msg)).text;\n\t\t\t}\n\t\t}\n\n\t\treturn getAvatarAsPng(notification.payload.sender.username, function (avatarAsPng) {\n\t\t\tnotification.icon = avatarAsPng;\n\t\t\treturn KonchatNotification.notify(notification);\n\t\t});\n\t},\n\n\tnewMessage(rid) {\n\t\tif (Session.equals(`user_${Meteor.user().username}_status`, 'busy')) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst userId = Meteor.userId();\n\t\tconst newMessageNotification = getUserPreference(userId, 'newMessageNotification');\n\t\tconst audioVolume = getUserPreference(userId, 'notificationsSoundVolume');\n\n\t\tconst sub = ChatSubscription.findOne({ rid }, { fields: { audioNotificationValue: 1 } });\n\n\t\tif (!sub || sub.audioNotificationValue === 'none') {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tif (sub.audioNotificationValue && sub.audioNotificationValue !== '0') {\n\t\t\t\tCustomSounds.play(sub.audioNotificationValue, {\n\t\t\t\t\tvolume: Number((audioVolume / 100).toPrecision(2)),\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (newMessageNotification !== 'none') {\n\t\t\t\tCustomSounds.play(newMessageNotification, {\n\t\t\t\t\tvolume: Number((audioVolume / 100).toPrecision(2)),\n\t\t\t\t});\n\t\t\t}\n\t\t} catch (e) {\n\t\t\t// do nothing\n\t\t}\n\t},\n\n\tnewRoom(rid /* , withSound = true*/) {\n\t\tTracker.nonreactive(function () {\n\t\t\tlet newRoomSound = Session.get('newRoomSound');\n\t\t\tif (newRoomSound != null) {\n\t\t\t\tnewRoomSound = _.union(newRoomSound, [rid]);\n\t\t\t} else {\n\t\t\t\tnewRoomSound = [rid];\n\t\t\t}\n\n\t\t\treturn Session.set('newRoomSound', newRoomSound);\n\t\t});\n\t},\n\n\t// $('.link-room-' + rid).addClass('new-room-highlight')\n\n\tremoveRoomNotification(rid) {\n\t\tlet newRoomSound = Session.get('newRoomSound');\n\t\tnewRoomSound = _.without(newRoomSound, rid);\n\t\tTracker.nonreactive(() => Session.set('newRoomSound', newRoomSound));\n\n\t\treturn $(`.link-room-${rid}`).removeClass('new-room-highlight');\n\t},\n};\n\nMeteor.startup(() => {\n\tTracker.autorun(function () {\n\t\tconst user = Users.findOne(Meteor.userId(), {\n\t\t\tfields: {\n\t\t\t\t'settings.preferences.newRoomNotification': 1,\n\t\t\t\t'settings.preferences.notificationsSoundVolume': 1,\n\t\t\t},\n\t\t});\n\t\tconst newRoomNotification = getUserPreference(user, 'newRoomNotification');\n\t\tconst audioVolume = getUserPreference(user, 'notificationsSoundVolume');\n\n\t\tif ((Session.get('newRoomSound') || []).length > 0) {\n\t\t\tMeteor.defer(function () {\n\t\t\t\tif (newRoomNotification !== 'none') {\n\t\t\t\t\tCustomSounds.play(newRoomNotification, {\n\t\t\t\t\t\tvolume: Number((audioVolume / 100).toPrecision(2)),\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tCustomSounds.pause(newRoomNotification);\n\t\t}\n\t});\n});\n","import { Blaze } from 'meteor/blaze';\n\n/**\n * Get the parent template instance\n * @param {Number} [levels] How many levels to go up. Default is 1\n * @returns {Blaze.TemplateInstance}\n */\n\nBlaze.TemplateInstance.prototype.parentTemplate = function (levels) {\n\tlet view = Blaze.currentView;\n\tif (typeof levels === 'undefined') {\n\t\tlevels = 1;\n\t}\n\twhile (view) {\n\t\tif (view.name.substring(0, 9) === 'Template.' && !levels--) {\n\t\t\treturn view.templateInstance();\n\t\t}\n\t\tview = view.parentView;\n\t}\n};\n","export const Login = (function () {\n\tfunction onClick(el) {\n\t\tconst $el = $(el);\n\t\tif ($el.length) {\n\t\t\t$el.addClass('active');\n\t\t\treturn $el.find('input').focus();\n\t\t}\n\t}\n\tfunction onBlur(input) {\n\t\tconst $input = $(input);\n\t\tif ($input.length) {\n\t\t\tif (input.value === '') {\n\t\t\t\treturn $input.parents('.input-text').removeClass('active');\n\t\t\t}\n\t\t}\n\t}\n\tfunction check(form) {\n\t\tconst $form = $(form);\n\t\tif ($form.length) {\n\t\t\tconst inputs = $form.find('input');\n\t\t\treturn inputs.each(function () {\n\t\t\t\tif (this.value !== '') {\n\t\t\t\t\tconsole.log(this.value);\n\t\t\t\t\treturn $(this).parents('.input-text').addClass('active');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\treturn { check, onClick, onBlur };\n})();\n\nexport const Button = (function () {\n\tlet time = undefined;\n\tconst loading = function (el) {\n\t\tconst next = el.attr('data-loading-text');\n\t\tconst html = el.find('span').html();\n\t\tel.addClass('-progress').attr('data-def-text', html).find('span').html(next);\n\t\ttime = setTimeout(() => el.addClass('going'), 1);\n\t\treturn time;\n\t};\n\tconst done = function (el) {\n\t\treturn el.addClass('done');\n\t};\n\tconst reset = function (el) {\n\t\tif (time) {\n\t\t\tclearTimeout(time);\n\t\t}\n\t\tconst $el = $(el);\n\t\tconst html = $el.attr('data-def-text');\n\t\tif (html) {\n\t\t\t$el.find('span').html(html);\n\t\t}\n\t\treturn $el.removeClass('-progress going done');\n\t};\n\treturn { done, loading, reset };\n})();\n","// http://stackoverflow.com/a/499158\n\n$.fn.setCursorPosition = function (pos) {\n\tthis.each((index, element) => {\n\t\tconst p = pos < 0 ? element.value.length - pos : pos;\n\t\tif (element.setSelectionRange) {\n\t\t\telement.setSelectionRange(p, p);\n\t\t} else if (element.createTextRange) {\n\t\t\tconst range = element.createTextRange();\n\t\t\trange.collapse(true);\n\t\t\trange.moveEnd('character', p);\n\t\t\trange.moveStart('character', p);\n\t\t\trange.select();\n\t\t}\n\t});\n\n\treturn this;\n};\n","import { t } from '../../../utils';\nimport { settings } from '../../../settings/client';\n\nexport const getPopoverStatusConfig = (currentTarget, actionCallback) => {\n\tconst items = [\n\t\t{\n\t\t\ticon: 'circle',\n\t\t\tname: t('Online'),\n\t\t\tmodifier: 'online',\n\t\t\taction: () => {\n\t\t\t\ttypeof actionCallback === 'function' && actionCallback('online');\n\t\t\t\t$('input[name=statusType]').val('online');\n\t\t\t\t$(currentTarget).prop('class', 'rc-input__icon js-status-type edit-status-type-icon--online');\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ticon: 'circle',\n\t\t\tname: t('Away'),\n\t\t\tmodifier: 'away',\n\t\t\taction: () => {\n\t\t\t\ttypeof actionCallback === 'function' && actionCallback('away');\n\t\t\t\t$('input[name=statusType]').val('away');\n\t\t\t\t$(currentTarget).prop('class', 'rc-input__icon js-status-type edit-status-type-icon--away');\n\t\t\t},\n\t\t},\n\t\t{\n\t\t\ticon: 'circle',\n\t\t\tname: t('Busy'),\n\t\t\tmodifier: 'busy',\n\t\t\taction: () => {\n\t\t\t\ttypeof actionCallback === 'function' && actionCallback('busy');\n\t\t\t\t$('input[name=statusType]').val('busy');\n\t\t\t\t$(currentTarget).prop('class', 'rc-input__icon js-status-type edit-status-type-icon--busy');\n\t\t\t},\n\t\t},\n\t];\n\n\tif (settings.get('Accounts_AllowInvisibleStatusOption')) {\n\t\titems.push({\n\t\t\ticon: 'circle',\n\t\t\tname: t('Invisible'),\n\t\t\tmodifier: 'offline',\n\t\t\taction: () => {\n\t\t\t\ttypeof actionCallback === 'function' && actionCallback('offline');\n\t\t\t\t$('input[name=statusType]').val('offline');\n\t\t\t\t$(currentTarget).prop('class', 'rc-input__icon js-status-type edit-status-type-icon--offline');\n\t\t\t},\n\t\t});\n\t}\n\n\treturn {\n\t\tpopoverClass: 'edit-status-type',\n\t\tcolumns: [\n\t\t\t{\n\t\t\t\tgroups: [\n\t\t\t\t\t{\n\t\t\t\t\t\titems,\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t},\n\t\t],\n\t\tcurrentTarget,\n\t\toffsetVertical: currentTarget.clientHeight,\n\t};\n};\n","import { Template } from 'meteor/templating';\n\nimport { fireGlobalEvent } from '../../../../../client/lib/utils/fireGlobalEvent';\n\nimport './header.html';\n\nTemplate.header.helpers({\n\tback() {\n\t\treturn Template.instance().data.back;\n\t},\n\tbuttons() {\n\t\tconsole.log('asdasd');\n\t},\n});\n\nTemplate.header.events({\n\t'click .iframe-toolbar .js-iframe-action'(e) {\n\t\tfireGlobalEvent('click-toolbar-button', { id: this.id });\n\t\te.currentTarget.querySelector('button').blur();\n\t\treturn false;\n\t},\n});\n","import { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Template } from 'meteor/templating';\n\nimport { baseURI } from '../../../../client/lib/baseURI';\n\nimport './icon.html';\n\nconst baseUrlFix = () => `${baseURI}${FlowRouter.current().path.substring(1)}`;\n\nconst isMozillaFirefoxBelowVersion = (upperVersion) => {\n\tconst [, version] = navigator.userAgent.match(/Firefox\\/(\\d+)\\.\\d/) || [];\n\treturn parseInt(version, 10) < upperVersion;\n};\n\nconst isGoogleChromeBelowVersion = (upperVersion) => {\n\tconst [, version] = navigator.userAgent.match(/Chrome\\/(\\d+)\\.\\d/) || [];\n\treturn parseInt(version, 10) < upperVersion;\n};\n\nconst isBaseUrlFixNeeded = () => isMozillaFirefoxBelowVersion(55) || isGoogleChromeBelowVersion(55);\n\nTemplate.icon.helpers({\n\tbaseUrl: isBaseUrlFixNeeded() ? baseUrlFix : undefined,\n});\n","import { Template } from 'meteor/templating';\n\nimport { settings } from '../../../settings';\n\nTemplate.popupList.helpers({\n\tconfig() {\n\t\treturn {\n\t\t\ttemplate: this.data.template_list || 'popupList_default',\n\t\t\tdata: {\n\t\t\t\tready: this.ready,\n\t\t\t\tloading: this.ready !== undefined && !this.ready,\n\t\t\t\tnoMatchTemplate: this.data.noMatchTemplate,\n\t\t\t\ttemplate_item: this.data.template_item || 'popupList_item_default',\n\t\t\t\titems: this.items,\n\t\t\t\tonClick: this.data.onClick || function () {},\n\t\t\t\tmodifier:\n\t\t\t\t\tthis.data.modifier ||\n\t\t\t\t\tfunction (text) {\n\t\t\t\t\t\treturn text;\n\t\t\t\t\t},\n\t\t\t},\n\t\t};\n\t},\n\topen() {\n\t\tconst instance = Template.instance();\n\t\treturn instance.data.items.length > 0;\n\t},\n});\n\nTemplate.popupList_default.helpers({\n\tconfig(item) {\n\t\treturn {\n\t\t\ttemplate: this.template_item || 'popupList_item_default',\n\t\t\tdata: {\n\t\t\t\titem,\n\t\t\t\tonClick: this.onClick,\n\t\t\t\tmodifier: this.modifier,\n\t\t\t},\n\t\t};\n\t},\n});\n\nTemplate.popupList_item_default.helpers({\n\tshowRealNames() {\n\t\treturn settings.get('UI_Use_Real_Name');\n\t},\n});\n","import { Template } from 'meteor/templating';\nimport _ from 'underscore';\n\nTemplate.table.onRendered(function () {\n\tconst dummyTr = '<tr class=\"table-tr-dummy\"></tr>';\n\tthis.$('tbody').prepend(dummyTr).append(dummyTr);\n\n\tthis.onResize = this.data.onResize;\n\tif (this.onResize) {\n\t\tthis.onResize();\n\t\t$(window).on('resize', this.onResize);\n\t}\n});\n\nTemplate.table.onDestroyed(function () {\n\t$(window).on('off', this.onResize);\n});\n\nTemplate.table.events({\n\t'click tbody tr:not(.table-no-click)'(e, t) {\n\t\tt.data.onItemClick && t.data.onItemClick(this);\n\t},\n\t'scroll .table-scroll': _.debounce((e, t) => t.data.onScroll && t.data.onScroll(e.currentTarget), 300),\n\t'click .js-sort'(e, t) {\n\t\tt.data.onSort(e.currentTarget.dataset.sort);\n\t},\n});\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nimport './tabs.html';\n\nTemplate.tabs.onCreated(function () {\n\tthis.activeTab = new ReactiveVar(this.data.tabs.tabs.find((tab) => tab.active).value);\n});\n\nTemplate.tabs.events({\n\t'click .tab'(event, instance) {\n\t\tconst { value } = event.currentTarget.dataset;\n\t\tif (value === instance.activeTab.get()) {\n\t\t\treturn;\n\t\t}\n\t\tinstance.activeTab.set(value);\n\t\tinstance.data.tabs.onChange(value);\n\t},\n});\n\nTemplate.tabs.helpers({\n\ttabs() {\n\t\treturn Template.instance().data.tabs.tabs.filter((tab) => (tab.condition ? tab.condition() : tab));\n\t},\n\tisActive(value) {\n\t\treturn Template.instance().activeTab.get() === value;\n\t},\n\tariaSelected(value) {\n\t\treturn Template.instance().activeTab.get() === value ? { 'aria-selected': 'true' } : {};\n\t},\n});\n","import { Template } from 'meteor/templating';\nimport { Blaze } from 'meteor/blaze';\n\nimport './tooltip.html';\nimport './tooltip.css';\n\nlet initiated = false;\n\nconst init = () => {\n\tif (initiated) {\n\t\treturn;\n\t}\n\tinitiated = true;\n\n\tBlaze.render(Template.tooltip, document.body);\n};\n\nlet source = null;\nlet opened = false;\nlet timeout = null;\n\nconst placeTip = () => {\n\tconst arrowSize = 6;\n\tconst sourceWidth = $(source).outerWidth();\n\tconst sourceHeight = $(source).outerHeight();\n\tlet { left, top } = $(source).offset();\n\n\tconst tip = $('.tooltip');\n\tconst tipWidth = tip.outerWidth();\n\tconst tipHeight = tip.outerHeight();\n\n\tleft = left + sourceWidth / 2 - tipWidth / 2;\n\n\t$('.tooltip-arrow', tip).css({\n\t\t'margin-left': left < 0 ? `${left - arrowSize}px` : '',\n\t});\n\n\tif (left < 0) {\n\t\tleft = 0;\n\t}\n\n\ttop = top - tipHeight - arrowSize;\n\n\ttip.toggleClass('below', top < 0);\n\n\tif (top < 0) {\n\t\ttop = top + sourceHeight + arrowSize;\n\t}\n\n\treturn tip.css({\n\t\tleft: `${left}px`,\n\t\ttop: `${top}px`,\n\t});\n};\n\nconst showElement = (element, sourceElement) => {\n\tif (opened) {\n\t\treturn;\n\t}\n\n\tif (timeout) {\n\t\tclearTimeout(timeout);\n\t}\n\n\tconst elementClone = $(element).clone();\n\n\ttimeout = setTimeout(() => {\n\t\ttimeout = null;\n\t\tsource = sourceElement;\n\n\t\t$('.tooltip .content').empty().append(elementClone.show());\n\t\tplaceTip().addClass('show');\n\n\t\topened = true;\n\t}, 300);\n};\n\nconst hide = () => {\n\tif (timeout) {\n\t\tclearTimeout(timeout);\n\t}\n\n\tif (opened) {\n\t\t$('.tooltip').removeClass('show');\n\t\t$('.tooltip .content').empty();\n\t\topened = false;\n\t}\n};\n\nexport const tooltip = {\n\tinit,\n\tshowElement,\n\thide,\n};\n","import Clipboard from 'clipboard';\nimport { Meteor } from 'meteor/meteor';\nimport { Random } from 'meteor/random';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { popover, MessageAction } from '../../../../../ui-utils/client';\nimport { addMessageToList } from '../../../../../ui-utils/client/lib/MessageAction';\nimport { callWithErrorHandling } from '../../../../../../client/lib/utils/callWithErrorHandling';\nimport { isURL } from '../../../../../utils/lib/isURL';\nimport { openUserCard } from '../../../lib/UserCard';\nimport { messageArgs } from '../../../../../ui-utils/client/lib/messageArgs';\nimport { ChatMessage, Rooms, Messages } from '../../../../../models';\nimport { t } from '../../../../../utils/client';\nimport { chatMessages } from '../room';\nimport { EmojiEvents } from '../../../../../reactions/client/init';\nimport { goToRoomById } from '../../../../../../client/lib/utils/goToRoomById';\nimport { fireGlobalEvent } from '../../../../../../client/lib/utils/fireGlobalEvent';\nimport { isLayoutEmbedded } from '../../../../../../client/lib/utils/isLayoutEmbedded';\nimport { onClientBeforeSendMessage } from '../../../../../../client/lib/onClientBeforeSendMessage';\n\nconst mountPopover = (e, i, outerContext) => {\n\tlet context = $(e.target).parents('.message').data('context');\n\tif (!context) {\n\t\tcontext = 'message';\n\t}\n\n\tconst messageContext = messageArgs(outerContext);\n\n\tlet menuItems = MessageAction.getButtons(messageContext, context, 'menu').map((item) => ({\n\t\ticon: item.icon,\n\t\tname: t(item.label),\n\t\ttype: 'message-action',\n\t\tid: item.id,\n\t\tmodifier: item.color,\n\t}));\n\n\tif (window.matchMedia('(max-width: 500px)').matches) {\n\t\tconst messageItems = MessageAction.getButtons(messageContext, context, 'message').map((item) => ({\n\t\t\ticon: item.icon,\n\t\t\tname: t(item.label),\n\t\t\ttype: 'message-action',\n\t\t\tid: item.id,\n\t\t\tmodifier: item.color,\n\t\t}));\n\n\t\tmenuItems = menuItems.concat(messageItems);\n\t}\n\n\tconst [items, deleteItem] = menuItems.reduce(\n\t\t(result, value) => {\n\t\t\tresult[value.id === 'delete-message' ? 1 : 0].push(value);\n\t\t\treturn result;\n\t\t},\n\t\t[[], []],\n\t);\n\tconst groups = [{ items }];\n\n\tif (deleteItem.length) {\n\t\tgroups.push({ items: deleteItem });\n\t}\n\n\tconst config = {\n\t\tcolumns: [\n\t\t\t{\n\t\t\t\tgroups,\n\t\t\t},\n\t\t],\n\t\tinstance: i,\n\t\tcurrentTarget: e.currentTarget,\n\t\tdata: outerContext,\n\t\tactiveElement: $(e.currentTarget).parents('.message')[0],\n\t\tonRendered: () => new Clipboard('.rc-popover__item'),\n\t};\n\n\tpopover.open(config);\n};\n\nexport const getCommonRoomEvents = () => ({\n\t...(() => {\n\t\tlet touchMoved = false;\n\t\tlet lastTouchX = null;\n\t\tlet lastTouchY = null;\n\n\t\tlet touchtime = null;\n\t\treturn {\n\t\t\t...EmojiEvents,\n\t\t\t'click .message img'(e) {\n\t\t\t\tclearTimeout(touchtime);\n\t\t\t\tif (touchMoved === true) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t'touchstart .message'(e) {\n\t\t\t\tconst { touches } = e.originalEvent;\n\t\t\t\tif (touches && touches.length) {\n\t\t\t\t\tlastTouchX = touches[0].pageX;\n\t\t\t\t\tlastTouchY = touches[0].pagey;\n\t\t\t\t}\n\t\t\t\ttouchMoved = false;\n\t\t\t\tif (e.originalEvent.touches.length !== 1) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif ($(e.currentTarget).hasClass('system')) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (e.target && e.target.nodeName === 'AUDIO') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (e.target && e.target.nodeName === 'A' && isURL(e.target.getAttribute('href'))) {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\n\t\t\t\tconst doLongTouch = () => {\n\t\t\t\t\tmountPopover(e, t, this);\n\t\t\t\t};\n\n\t\t\t\tclearTimeout(touchtime);\n\t\t\t\ttouchtime = setTimeout(doLongTouch, 500);\n\t\t\t},\n\n\t\t\t'touchend .message'(e) {\n\t\t\t\tclearTimeout(touchtime);\n\t\t\t\tif (e.target && e.target.nodeName === 'A' && isURL(e.target.getAttribute('href'))) {\n\t\t\t\t\tif (touchMoved === true) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t\te.stopPropagation();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\twindow.open(e.target.href);\n\t\t\t\t}\n\t\t\t},\n\n\t\t\t'touchmove .message'(e) {\n\t\t\t\tconst { touches } = e.originalEvent;\n\t\t\t\tif (touches && touches.length) {\n\t\t\t\t\tconst deltaX = Math.abs(lastTouchX - touches[0].pageX);\n\t\t\t\t\tconst deltaY = Math.abs(lastTouchY - touches[0].pageY);\n\t\t\t\t\tif (deltaX > 5 || deltaY > 5) {\n\t\t\t\t\t\ttouchMoved = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tclearTimeout(touchtime);\n\t\t\t},\n\n\t\t\t'touchcancel .message'() {\n\t\t\t\tclearTimeout(touchtime);\n\t\t\t},\n\t\t};\n\t})(),\n\t'click [data-message-action]'(event, template) {\n\t\tconst button = MessageAction.getButtonById(event.currentTarget.dataset.messageAction);\n\t\tif ((button != null ? button.action : undefined) != null) {\n\t\t\tbutton.action.call(this, event, { tabBar: template.tabBar, rid: template.data.rid });\n\t\t}\n\t},\n\t'click .js-follow-thread'(e) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tconst { msg } = messageArgs(this);\n\t\tcallWithErrorHandling('followMessage', { mid: msg._id });\n\t},\n\t'click .js-unfollow-thread'(e) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tconst { msg } = messageArgs(this);\n\t\tcallWithErrorHandling('unfollowMessage', { mid: msg._id });\n\t},\n\t'click .js-open-thread'(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconst {\n\t\t\tmsg: { rid, _id, tmid },\n\t\t} = messageArgs(this);\n\t\tconst room = Rooms.findOne({ _id: rid });\n\n\t\tFlowRouter.go(\n\t\t\tFlowRouter.getRouteName(),\n\t\t\t{\n\t\t\t\trid,\n\t\t\t\tname: room.name,\n\t\t\t\ttab: 'thread',\n\t\t\t\tcontext: tmid || _id,\n\t\t\t},\n\t\t\t{\n\t\t\t\tjump: tmid && tmid !== _id && _id && _id,\n\t\t\t},\n\t\t);\n\t},\n\n\t'click .image-to-download'(event) {\n\t\tconst { msg } = messageArgs(this);\n\t\tChatMessage.update({ '_id': msg._id, 'urls.url': $(event.currentTarget).data('url') }, { $set: { 'urls.$.downloadImages': true } });\n\t\tChatMessage.update(\n\t\t\t{ '_id': msg._id, 'attachments.image_url': $(event.currentTarget).data('url') },\n\t\t\t{ $set: { 'attachments.$.downloadImages': true } },\n\t\t);\n\t},\n\t'click .user-card-message'(e, instance) {\n\t\tconst { msg } = messageArgs(this);\n\t\tif (!Meteor.userId()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { username } = msg.u;\n\n\t\tif (username) {\n\t\t\topenUserCard({\n\t\t\t\tusername,\n\t\t\t\trid: instance.data.rid,\n\t\t\t\ttarget: e.currentTarget,\n\t\t\t\topen: (e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tinstance.data.tabBar.openUserInfo(username);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t},\n\t'click .js-actionButton-respondWithMessage'(event, instance) {\n\t\tconst { rid } = instance.data;\n\t\tconst msg = event.currentTarget.value;\n\t\tif (!msg) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { input } = chatMessages[rid];\n\t\tinput.value = msg;\n\t\tinput.focus();\n\t},\n\tasync 'click .js-actionButton-respondWithQuotedMessage'(event, instance) {\n\t\tconst { rid } = instance.data;\n\t\tconst { id: msgId } = event.currentTarget;\n\t\tconst { $input } = chatMessages[rid];\n\n\t\tif (!msgId) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst message = Messages.findOne({ _id: msgId });\n\n\t\tlet messages = $input.data('reply') || [];\n\t\tmessages = addMessageToList(messages, message);\n\n\t\t$input.focus().data('mention-user', false).data('reply', messages).trigger('dataChange');\n\t},\n\tasync 'click .js-actionButton-sendMessage'(event, instance) {\n\t\tconst { rid } = instance.data;\n\t\tconst msg = event.currentTarget.value;\n\t\tlet msgObject = { _id: Random.id(), rid, msg };\n\t\tif (!msg) {\n\t\t\treturn;\n\t\t}\n\n\t\tmsgObject = await onClientBeforeSendMessage(msgObject);\n\n\t\tconst _chatMessages = chatMessages[rid];\n\t\tif (_chatMessages && (await _chatMessages.processSlashCommand(msgObject))) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait callWithErrorHandling('sendMessage', msgObject);\n\t},\n\t'click .message-actions__menu'(e, template) {\n\t\tconst messageContext = messageArgs(this);\n\t\tconst { msg: message, context: ctx } = messageContext;\n\t\tconst context = ctx || message.context || message.actionContext || 'message';\n\n\t\tconst allItems = MessageAction.getButtons(messageContext, context, 'menu').map((item) => ({\n\t\t\ticon: item.icon,\n\t\t\tname: t(item.label),\n\t\t\ttype: 'message-action',\n\t\t\tid: item.id,\n\t\t\tmodifier: item.color,\n\t\t}));\n\n\t\tconst itemsBelowDivider = ['delete-message', 'report-message'];\n\t\tconst [items, alertsItem] = allItems.reduce(\n\t\t\t(result, value) => {\n\t\t\t\tresult[itemsBelowDivider.includes(value.id) ? 1 : 0].push(value);\n\t\t\t\treturn result;\n\t\t\t},\n\t\t\t[[], []],\n\t\t);\n\t\tconst groups = [{ items }];\n\n\t\tif (alertsItem.length) {\n\t\t\tgroups.push({ items: alertsItem });\n\t\t}\n\t\tconst config = {\n\t\t\tcolumns: [\n\t\t\t\t{\n\t\t\t\t\tgroups,\n\t\t\t\t},\n\t\t\t],\n\t\t\tinstance: template,\n\t\t\trid: template.data.rid,\n\t\t\tdata: this,\n\t\t\tcurrentTarget: e.currentTarget,\n\t\t\tactiveElement: $(e.currentTarget).parents('.message')[0],\n\t\t\tonRendered: () => new Clipboard('.rc-popover__item'),\n\t\t};\n\n\t\tpopover.open(config);\n\t},\n\t'click .mention-link'(e, instance) {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\n\t\tif (!Meteor.userId()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst {\n\t\t\tcurrentTarget: {\n\t\t\t\tdataset: { channel, group, username },\n\t\t\t},\n\t\t} = e;\n\n\t\tif (channel) {\n\t\t\tif (isLayoutEmbedded()) {\n\t\t\t\tfireGlobalEvent('click-mention-link', {\n\t\t\t\t\tpath: FlowRouter.path('channel', { name: channel }),\n\t\t\t\t\tchannel,\n\t\t\t\t});\n\t\t\t}\n\t\t\tgoToRoomById(channel);\n\t\t\treturn;\n\t\t}\n\n\t\tif (group) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (username) {\n\t\t\topenUserCard({\n\t\t\t\tusername,\n\t\t\t\trid: instance.data.rid,\n\t\t\t\ttarget: e.currentTarget,\n\t\t\t\topen: (e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tinstance.data.tabBar.openUserInfo(username);\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\n\nimport { ChatSubscription } from '../../../../models/client';\nimport { menu } from '../../../../ui-utils/client';\nimport { isLayoutEmbedded } from '../../../../../client/lib/utils/isLayoutEmbedded';\nimport { getUserPreference } from '../../../../utils';\n\nTemplate.burger.helpers({\n\tunread() {\n\t\tconst userUnreadAlert = getUserPreference(Meteor.userId(), 'unreadAlert');\n\t\tconst [unreadCount, unreadAlert] = ChatSubscription.find(\n\t\t\t{\n\t\t\t\topen: true,\n\t\t\t\thideUnreadStatus: { $ne: true },\n\t\t\t\trid: { $ne: Session.get('openedRoom') },\n\t\t\t\tarchived: { $ne: true },\n\t\t\t},\n\t\t\t{\n\t\t\t\tfields: {\n\t\t\t\t\tunread: 1,\n\t\t\t\t\talert: 1,\n\t\t\t\t\tunreadAlert: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t)\n\t\t\t.fetch()\n\t\t\t.reduce(\n\t\t\t\t([unreadCount, unreadAlert], { alert, unread, unreadAlert: alertType }) => {\n\t\t\t\t\tif (alert || unread > 0) {\n\t\t\t\t\t\tunreadCount += unread;\n\t\t\t\t\t\tif (alert === true && alertType !== 'nothing') {\n\t\t\t\t\t\t\tif (alertType === 'all' || userUnreadAlert !== false) {\n\t\t\t\t\t\t\t\tunreadAlert = '•';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn [unreadCount, unreadAlert];\n\t\t\t\t},\n\t\t\t\t[0, false],\n\t\t\t);\n\n\t\tif (unreadCount > 0) {\n\t\t\treturn unreadCount > 99 ? '99+' : unreadCount;\n\t\t}\n\n\t\treturn unreadAlert || '';\n\t},\n\n\tisMenuOpen() {\n\t\tif (Session.equals('isMenuOpen', true)) {\n\t\t\treturn 'menu-opened';\n\t\t}\n\t},\n\n\tembeddedVersion() {\n\t\treturn isLayoutEmbedded();\n\t},\n});\n\nTemplate.burger.events({\n\t'click div.burger'() {\n\t\treturn menu.toggle();\n\t},\n});\n","import { Template } from 'meteor/templating';\n\nimport { settings } from '../../../../settings';\n\nTemplate.home.helpers({\n\ttitle() {\n\t\treturn settings.get('Layout_Home_Title');\n\t},\n\tbody() {\n\t\treturn settings.get('Layout_Home_Body');\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Blaze } from 'meteor/blaze';\nimport { Template } from 'meteor/templating';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\nimport type PhotoSwipe from 'photoswipe';\nimport type PhotoSwipeUiDefault from 'photoswipe/dist/photoswipe-ui-default';\n\nconst parseLength = (x: unknown): number | undefined => {\n\tconst length = typeof x === 'string' ? parseInt(x, 10) : undefined;\n\treturn Number.isFinite(length) ? length : undefined;\n};\n\nconst getImageSize = (src: string): Promise<[w: number, h: number]> =>\n\tnew Promise((resolve, reject) => {\n\t\tconst img = new Image();\n\n\t\timg.addEventListener('load', () => {\n\t\t\tresolve([img.naturalWidth, img.naturalHeight]);\n\t\t});\n\n\t\timg.addEventListener('error', (error) => {\n\t\t\treject(error.error);\n\t\t});\n\n\t\timg.src = src;\n\t});\n\ntype Slide = PhotoSwipeUiDefault.Item & { description?: string };\n\nconst fromElementToSlide = async (element: Element): Promise<Slide | null> => {\n\tif (!(element instanceof HTMLElement)) {\n\t\treturn null;\n\t}\n\n\tconst title = element.dataset.title || element.title;\n\tconst { description } = element.dataset;\n\n\tif (element instanceof HTMLAnchorElement) {\n\t\tconst src = element.dataset.src || element.href;\n\t\tlet w = parseLength(element.dataset.width);\n\t\tlet h = parseLength(element.dataset.height);\n\n\t\tif (w === undefined || h === undefined) {\n\t\t\t[w, h] = await getImageSize(src);\n\t\t}\n\n\t\treturn { src, w, h, title, description };\n\t}\n\n\tif (element instanceof HTMLImageElement) {\n\t\tlet msrc: string | undefined;\n\t\tlet { src } = element;\n\t\tlet w: number | undefined = element.naturalWidth;\n\t\tlet h: number | undefined = element.naturalHeight;\n\n\t\tif (element.dataset.src) {\n\t\t\tmsrc = element.src;\n\t\t\tsrc = element.dataset.src;\n\t\t\tw = parseLength(element.dataset.width);\n\t\t\th = parseLength(element.dataset.height);\n\n\t\t\tif (w === undefined || h === undefined) {\n\t\t\t\t[w, h] = await getImageSize(src);\n\t\t\t}\n\t\t}\n\n\t\treturn { msrc, src, w, h, title, description };\n\t}\n\n\treturn null;\n};\n\nlet currentGallery: PhotoSwipe<PhotoSwipeUiDefault.Options> | null = null;\n\nconst initGallery = async (items: Slide[], options: PhotoSwipeUiDefault.Options): Promise<void> => {\n\tconst [\n\t\t{ default: PhotoSwipe },\n\t\t{ default: PhotoSwipeUiDefault }, // eslint-disable-line @typescript-eslint/camelcase\n\t] = await Promise.all([\n\t\timport('photoswipe'),\n\t\timport('photoswipe/dist/photoswipe-ui-default'),\n\t\t// @ts-ignore\n\t\timport('photoswipe/dist/photoswipe.css'),\n\t\t// @ts-ignore\n\t\timport('./photoswipeContent.html'),\n\t]);\n\n\tBlaze.render(Template.photoswipeContent, document.body);\n\n\tif (!currentGallery) {\n\t\tconst container = document.getElementById('pswp');\n\n\t\tif (!container) {\n\t\t\tthrow new Error('Photoswipe container element not found');\n\t\t}\n\n\t\tcurrentGallery = new PhotoSwipe(container, PhotoSwipeUiDefault, items, options);\n\n\t\tcurrentGallery.listen('destroy', () => {\n\t\t\tcurrentGallery = null;\n\t\t});\n\n\t\tcurrentGallery.init();\n\t}\n};\n\nconst defaultGalleryOptions: PhotoSwipeUiDefault.Options = {\n\tbgOpacity: 0.7,\n\tshowHideOpacity: true,\n\tcounterEl: false,\n\tshareEl: false,\n\tclickToCloseNonZoomable: false,\n\tindex: 0,\n\taddCaptionHTMLFn(item: Slide, captionEl: HTMLElement): boolean {\n\t\tcaptionEl.children[0].innerHTML = `\n\t\t\t${escapeHTML(item.title ?? '')}<br/>\n\t\t\t<small>${escapeHTML(item.description ?? '')}</small>\n\t\t`;\n\t\treturn true;\n\t},\n};\n\nconst createEventListenerFor =\n\t(className: string) =>\n\t(event: JQuery.ClickEvent): void => {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconst { currentTarget } = event;\n\n\t\tArray.from(document.querySelectorAll(className))\n\t\t\t.sort((a, b) => {\n\t\t\t\tif (a === currentTarget) {\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\n\t\t\t\tif (b === currentTarget) {\n\t\t\t\t\treturn 1;\n\t\t\t\t}\n\n\t\t\t\treturn 0;\n\t\t\t})\n\t\t\t.map((element) => fromElementToSlide(element))\n\t\t\t.reduce(\n\t\t\t\t(p, curr) =>\n\t\t\t\t\tp\n\t\t\t\t\t\t.then(() => curr)\n\t\t\t\t\t\t.then(async (slide) => {\n\t\t\t\t\t\t\tif (!slide) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (!currentGallery) {\n\t\t\t\t\t\t\t\treturn initGallery([slide], defaultGalleryOptions);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tcurrentGallery.items.push(slide);\n\t\t\t\t\t\t\tcurrentGallery.invalidateCurrItems();\n\t\t\t\t\t\t\tcurrentGallery.updateSize(true);\n\t\t\t\t\t\t}),\n\t\t\t\tPromise.resolve(),\n\t\t\t);\n\t};\n\nMeteor.startup(() => {\n\t$(document).on('click', '.gallery-item', createEventListenerFor('.gallery-item'));\n});\n","import _ from 'underscore';\nimport moment from 'moment';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { ReactiveDict } from 'meteor/reactive-dict';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Random } from 'meteor/random';\nimport { Blaze } from 'meteor/blaze';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\n\nimport { t, roomTypes, getUserPreference } from '../../../../utils/client';\nimport { WebRTC } from '../../../../webrtc/client';\nimport { ChatMessage, RoomRoles, Users, Subscriptions, Rooms } from '../../../../models';\nimport { RoomHistoryManager, RoomManager, readMessage } from '../../../../ui-utils/client';\nimport { messageContext } from '../../../../ui-utils/client/lib/messageContext';\nimport { messageArgs } from '../../../../ui-utils/client/lib/messageArgs';\nimport { settings } from '../../../../settings/client';\nimport { callbacks } from '../../../../../lib/callbacks';\nimport { hasAllPermission, hasRole } from '../../../../authorization/client';\nimport { ChatMessages } from '../../lib/chatMessages';\nimport { fileUpload } from '../../lib/fileUpload';\nimport './room.html';\nimport { getCommonRoomEvents } from './lib/getCommonRoomEvents';\nimport { RoomManager as NewRoomManager } from '../../../../../client/lib/RoomManager';\nimport { isLayoutEmbedded } from '../../../../../client/lib/utils/isLayoutEmbedded';\nimport { handleError } from '../../../../../client/lib/utils/handleError';\n\nexport const chatMessages = {};\n\nconst userCanDrop = (_id) => !roomTypes.readOnly(_id, Users.findOne({ _id: Meteor.userId() }, { fields: { username: 1 } }));\n\nconst wipeFailedUploads = () => {\n\tconst uploads = Session.get('uploading');\n\n\tif (uploads) {\n\t\tSession.set(\n\t\t\t'uploading',\n\t\t\tuploads.filter((upload) => !upload.error),\n\t\t);\n\t}\n};\n\nfunction roomHasGlobalPurge(room) {\n\tif (!settings.get('RetentionPolicy_Enabled')) {\n\t\treturn false;\n\t}\n\n\tswitch (room.t) {\n\t\tcase 'c':\n\t\t\treturn settings.get('RetentionPolicy_AppliesToChannels');\n\t\tcase 'p':\n\t\t\treturn settings.get('RetentionPolicy_AppliesToGroups');\n\t\tcase 'd':\n\t\t\treturn settings.get('RetentionPolicy_AppliesToDMs');\n\t}\n\treturn false;\n}\n\nfunction roomHasPurge(room) {\n\tif (!room || !settings.get('RetentionPolicy_Enabled')) {\n\t\treturn false;\n\t}\n\n\tif (room.retention && room.retention.enabled !== undefined) {\n\t\treturn room.retention.enabled;\n\t}\n\n\treturn roomHasGlobalPurge(room);\n}\n\nfunction roomFilesOnly(room) {\n\tif (!room) {\n\t\treturn false;\n\t}\n\n\tif (room.retention && room.retention.overrideGlobal) {\n\t\treturn room.retention.filesOnly;\n\t}\n\n\treturn settings.get('RetentionPolicy_FilesOnly');\n}\n\nfunction roomExcludePinned(room) {\n\tif (!room) {\n\t\treturn false;\n\t}\n\n\tif (room.retention && room.retention.overrideGlobal) {\n\t\treturn room.retention.excludePinned;\n\t}\n\n\treturn settings.get('RetentionPolicy_DoNotPrunePinned');\n}\n\nfunction roomMaxAge(room) {\n\tif (!room) {\n\t\treturn;\n\t}\n\tif (!roomHasPurge(room)) {\n\t\treturn;\n\t}\n\n\tif (room.retention && room.retention.overrideGlobal) {\n\t\treturn room.retention.maxAge;\n\t}\n\n\tif (room.t === 'c') {\n\t\treturn settings.get('RetentionPolicy_MaxAge_Channels');\n\t}\n\tif (room.t === 'p') {\n\t\treturn settings.get('RetentionPolicy_MaxAge_Groups');\n\t}\n\tif (room.t === 'd') {\n\t\treturn settings.get('RetentionPolicy_MaxAge_DMs');\n\t}\n}\n\nasync function createFileFromUrl(url) {\n\tlet response;\n\ttry {\n\t\tresponse = await fetch(url);\n\t} catch (error) {\n\t\tthrow error;\n\t}\n\n\tconst data = await response.blob();\n\tconst metadata = {\n\t\ttype: data.type,\n\t};\n\tconst { mime } = await import('../../../../utils/lib/mimeTypes');\n\tconst file = new File(\n\t\t[data],\n\t\t`File - ${moment().format(settings.get('Message_TimeAndDateFormat'))}.${mime.extension(data.type)}`,\n\t\tmetadata,\n\t);\n\treturn file;\n}\n\nfunction addToInput(text) {\n\tconst { input } = chatMessages[RoomManager.openedRoom];\n\tconst initText = input.value.slice(0, input.selectionStart);\n\tconst finalText = input.value.slice(input.selectionEnd, input.value.length);\n\n\tinput.value = initText + text + finalText;\n\t$(input).change().trigger('input');\n}\n\ncallbacks.add('enter-room', wipeFailedUploads);\n\nexport const dropzoneHelpers = {\n\tdragAndDrop() {\n\t\treturn settings.get('FileUpload_Enabled') && 'dropzone--disabled';\n\t},\n\n\tisDropzoneDisabled() {\n\t\treturn settings.get('FileUpload_Enabled') ? 'dropzone-overlay--enabled' : 'dropzone-overlay--disabled';\n\t},\n\n\tdragAndDropLabel() {\n\t\tif (!userCanDrop(this._id)) {\n\t\t\treturn 'error-not-allowed';\n\t\t}\n\t\tif (!settings.get('FileUpload_Enabled')) {\n\t\t\treturn 'FileUpload_Disabled';\n\t\t}\n\t\treturn 'Drop_to_upload_file';\n\t},\n};\n\nTemplate.roomOld.helpers({\n\t...dropzoneHelpers,\n\ttabBar() {\n\t\treturn Template.instance().tabBar;\n\t},\n\tsubscribed() {\n\t\tconst { state } = Template.instance();\n\t\treturn state.get('subscribed');\n\t},\n\tmessagesHistory() {\n\t\tconst showInMainThread = getUserPreference(Meteor.userId(), 'showMessageInMainThread', false);\n\t\tconst { rid } = Template.instance();\n\t\tconst room = Rooms.findOne(rid, { fields: { sysMes: 1 } });\n\t\tconst hideSettings = settings.collection.findOne('Hide_System_Messages') || {};\n\t\tconst settingValues = Array.isArray(room?.sysMes) ? room.sysMes : hideSettings.value || [];\n\t\tconst hideMessagesOfType = new Set(\n\t\t\tsettingValues.reduce((array, value) => [...array, ...(value === 'mute_unmute' ? ['user-muted', 'user-unmuted'] : [value])], []),\n\t\t);\n\t\tconst query = {\n\t\t\trid,\n\t\t\t_hidden: { $ne: true },\n\t\t\t...(!showInMainThread && {\n\t\t\t\t$or: [{ tmid: { $exists: 0 } }, { tshow: { $eq: true } }],\n\t\t\t}),\n\t\t};\n\n\t\tif (hideMessagesOfType.size) {\n\t\t\tquery.t = { $nin: Array.from(hideMessagesOfType.values()) };\n\t\t}\n\n\t\tconst options = {\n\t\t\tsort: {\n\t\t\t\tts: 1,\n\t\t\t},\n\t\t};\n\n\t\treturn ChatMessage.find(query, options);\n\t},\n\n\thasMore() {\n\t\treturn RoomHistoryManager.hasMore(this._id);\n\t},\n\n\thasMoreNext() {\n\t\treturn RoomHistoryManager.hasMoreNext(this._id);\n\t},\n\n\tisLoading() {\n\t\treturn RoomHistoryManager.isLoading(this._id);\n\t},\n\n\twindowId() {\n\t\treturn `chat-window-${this._id}`;\n\t},\n\n\tuploading() {\n\t\treturn Session.get('uploading');\n\t},\n\n\troomLeader() {\n\t\tconst roles = RoomRoles.findOne({\n\t\t\t'rid': this._id,\n\t\t\t'roles': 'leader',\n\t\t\t'u._id': { $ne: Meteor.userId() },\n\t\t});\n\t\tif (roles) {\n\t\t\tconst leader = Users.findOne({ _id: roles.u._id }, { fields: { status: 1, statusText: 1 } }) || {};\n\n\t\t\treturn {\n\t\t\t\t...roles.u,\n\t\t\t\tname: settings.get('UI_Use_Real_Name') ? roles.u.name || roles.u.username : roles.u.username,\n\t\t\t\tstatus: leader.status || 'offline',\n\t\t\t\tstatusDisplay: leader.statusText || t(leader.status || 'offline'),\n\t\t\t};\n\t\t}\n\t},\n\n\tchatNowLink() {\n\t\treturn roomTypes.getRouteLink('d', { name: this.username });\n\t},\n\n\tannouncement() {\n\t\treturn Template.instance().state.get('announcement');\n\t},\n\n\tannouncementDetails() {\n\t\tconst roomData = Session.get(`roomData${this._id}`);\n\t\tif (!roomData) {\n\t\t\treturn false;\n\t\t}\n\t\tif (roomData.announcementDetails != null && roomData.announcementDetails.callback != null) {\n\t\t\treturn () => callbacks.run(roomData.announcementDetails.callback, this._id);\n\t\t}\n\t},\n\n\tmessageboxData() {\n\t\tconst { sendToBottomIfNecessary, subscription } = Template.instance();\n\t\tconst { _id: rid } = this;\n\t\tconst isEmbedded = isLayoutEmbedded();\n\t\tconst showFormattingTips = settings.get('Message_ShowFormattingTips');\n\n\t\treturn {\n\t\t\trid,\n\t\t\tsubscription: subscription.get(),\n\t\t\tisEmbedded,\n\t\t\tshowFormattingTips: showFormattingTips && !isEmbedded,\n\t\t\tonInputChanged: (input) => {\n\t\t\t\tif (!chatMessages[rid]) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tchatMessages[rid].initializeInput(input, { rid });\n\t\t\t},\n\t\t\tonResize: () => sendToBottomIfNecessary && sendToBottomIfNecessary(),\n\t\t\tonKeyUp: (...args) => chatMessages[rid] && chatMessages[rid].keyup.apply(chatMessages[rid], args),\n\t\t\tonKeyDown: (...args) => chatMessages[rid] && chatMessages[rid].keydown.apply(chatMessages[rid], args),\n\t\t\tonSend: (...args) => chatMessages[rid] && chatMessages[rid].send.apply(chatMessages[rid], args),\n\t\t};\n\t},\n\n\tgetAnnouncementStyle() {\n\t\tconst { room } = Template.instance();\n\t\tif (!room) {\n\t\t\treturn '';\n\t\t}\n\t\treturn room.announcementDetails && room.announcementDetails.style !== undefined ? room.announcementDetails.style : '';\n\t},\n\n\tmaxMessageLength() {\n\t\treturn settings.get('Message_MaxAllowedSize');\n\t},\n\n\tunreadData() {\n\t\tconst data = { count: Template.instance().state.get('count') };\n\n\t\tconst room = RoomManager.getOpenedRoomByRid(this._id);\n\t\tif (room) {\n\t\t\tdata.since = room.unreadSince.get();\n\t\t}\n\n\t\treturn data;\n\t},\n\n\tcontainerBarsShow(unreadData, uploading) {\n\t\tconst hasUnreadData = unreadData && unreadData.count && unreadData.since;\n\t\tconst isUploading = uploading && uploading.length;\n\n\t\tif (hasUnreadData || isUploading) {\n\t\t\treturn 'show';\n\t\t}\n\t},\n\n\tformatUnreadSince() {\n\t\tif (!this.since) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn moment(this.since).calendar(null, { sameDay: 'LT' });\n\t},\n\tadminClass() {\n\t\tif (hasRole(Meteor.userId(), 'admin')) {\n\t\t\treturn 'admin';\n\t\t}\n\t},\n\n\tmessageViewMode() {\n\t\tconst viewMode = getUserPreference(Meteor.userId(), 'messageViewMode');\n\t\tconst modes = ['', 'cozy', 'compact'];\n\t\treturn modes[viewMode] || modes[0];\n\t},\n\n\tselectable() {\n\t\treturn Template.instance().selectable.get();\n\t},\n\n\thideUsername() {\n\t\treturn getUserPreference(Meteor.userId(), 'hideUsernames') ? 'hide-usernames' : undefined;\n\t},\n\n\thideAvatar() {\n\t\treturn getUserPreference(Meteor.userId(), 'displayAvatars') ? undefined : 'hide-avatars';\n\t},\n\tcanPreview() {\n\t\tconst { room, state } = Template.instance();\n\n\t\tif (room && room.t !== 'c') {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (settings.get('Accounts_AllowAnonymousRead') === true) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (hasAllPermission('preview-c-room')) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn state.get('subscribed');\n\t},\n\thideLeaderHeader() {\n\t\treturn Template.instance().hideLeaderHeader.get() ? 'animated-hidden' : '';\n\t},\n\thasLeader() {\n\t\tif (RoomRoles.findOne({ 'rid': this._id, 'roles': 'leader', 'u._id': { $ne: Meteor.userId() } }, { fields: { _id: 1 } })) {\n\t\t\treturn 'has-leader';\n\t\t}\n\t},\n\thasPurge() {\n\t\tconst { room } = Template.instance();\n\t\treturn roomHasPurge(room);\n\t},\n\tfilesOnly() {\n\t\tconst { room } = Template.instance();\n\t\treturn roomFilesOnly(room);\n\t},\n\texcludePinned() {\n\t\tconst { room } = Template.instance();\n\t\treturn roomExcludePinned(room);\n\t},\n\tpurgeTimeout() {\n\t\tconst { room } = Template.instance();\n\t\tmoment.relativeTimeThreshold('s', 60);\n\t\tmoment.relativeTimeThreshold('ss', 0);\n\t\tmoment.relativeTimeThreshold('m', 60);\n\t\tmoment.relativeTimeThreshold('h', 24);\n\t\tmoment.relativeTimeThreshold('d', 31);\n\t\tmoment.relativeTimeThreshold('M', 12);\n\n\t\treturn moment.duration(roomMaxAge(room) * 1000 * 60 * 60 * 24).humanize();\n\t},\n\tmessageContext,\n\topenedThread() {\n\t\tFlowRouter.watchPathChange();\n\t\tconst tab = FlowRouter.getParam('tab');\n\t\tconst mid = FlowRouter.getParam('context');\n\t\tconst rid = Template.currentData()._id;\n\t\tconst jump = FlowRouter.getQueryParam('jump');\n\t\tconst subscription = Template.instance().subscription.get();\n\n\t\tif (tab !== 'thread' || !mid || rid !== Session.get('openedRoom')) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst room = Rooms.findOne(\n\t\t\t{ _id: rid },\n\t\t\t{\n\t\t\t\tfields: {\n\t\t\t\t\tt: 1,\n\t\t\t\t\tusernames: 1,\n\t\t\t\t\tuids: 1,\n\t\t\t\t\tname: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\n\t\treturn {\n\t\t\trid,\n\t\t\tmid,\n\t\t\troom,\n\t\t\tjump,\n\t\t\tsubscription,\n\t\t};\n\t},\n});\n\nexport const dropzoneEvents = {\n\t'dragenter .dropzone'(e) {\n\t\tconst types = e.originalEvent && e.originalEvent.dataTransfer && e.originalEvent.dataTransfer.types;\n\n\t\tif (\n\t\t\ttypes != null &&\n\t\t\ttypes.length > 0 &&\n\t\t\t_.some(types, (type) => type.indexOf('text/') === -1 || type.indexOf('text/uri-list') !== -1 || type.indexOf('text/plain') !== -1) &&\n\t\t\tuserCanDrop(this._id)\n\t\t) {\n\t\t\te.currentTarget.classList.add('over');\n\t\t}\n\t\te.stopPropagation();\n\t},\n\n\t'dragleave .dropzone-overlay'(e) {\n\t\te.currentTarget.parentNode.classList.remove('over');\n\t\te.stopPropagation();\n\t},\n\n\t'dragover .dropzone-overlay'(e) {\n\t\tdocument.querySelectorAll('.over.dropzone').forEach((dropzone) => {\n\t\t\tif (dropzone !== e.currentTarget.parentNode) {\n\t\t\t\tdropzone.classList.remove('over');\n\t\t\t}\n\t\t});\n\t\te = e.originalEvent || e;\n\t\tif (['move', 'linkMove'].includes(e.dataTransfer.effectAllowed)) {\n\t\t\te.dataTransfer.dropEffect = 'move';\n\t\t} else {\n\t\t\te.dataTransfer.dropEffect = 'copy';\n\t\t}\n\t\te.stopPropagation();\n\t},\n\n\tasync 'dropped .dropzone-overlay'(event, instance) {\n\t\tevent.currentTarget.parentNode.classList.remove('over');\n\n\t\tconst e = event.originalEvent || event;\n\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\n\t\tif (!userCanDrop(this._id) || !settings.get('FileUpload_Enabled')) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet files = (e.dataTransfer && e.dataTransfer.files) || [];\n\n\t\tif (files.length < 1) {\n\t\t\tconst transferData = e.dataTransfer.getData('text') || e.dataTransfer.getData('url');\n\n\t\t\tif (e.dataTransfer.types.includes('text/uri-list')) {\n\t\t\t\tconst url = e.dataTransfer.getData('text/html').match('<img.+src=(?:\"|\\')(.+?)(?:\"|\\')(?:.+?)>');\n\t\t\t\tconst imgURL = url && url[1];\n\n\t\t\t\tif (!imgURL) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst file = await createFileFromUrl(imgURL);\n\t\t\t\tif (typeof file === 'string') {\n\t\t\t\t\treturn addToInput(file);\n\t\t\t\t}\n\t\t\t\tfiles = [file];\n\t\t\t}\n\t\t\tif (e.dataTransfer.types.includes('text/plain') && !e.dataTransfer.types.includes('text/x-moz-url')) {\n\t\t\t\treturn addToInput(transferData.trim());\n\t\t\t}\n\t\t}\n\t\tconst { mime } = await import('../../../../utils/lib/mimeTypes');\n\t\tconst filesToUpload = Array.from(files).map((file) => {\n\t\t\tObject.defineProperty(file, 'type', { value: mime.lookup(file.name) });\n\t\t\treturn {\n\t\t\t\tfile,\n\t\t\t\tname: file.name,\n\t\t\t};\n\t\t});\n\n\t\treturn instance.onFile && instance.onFile(filesToUpload);\n\t},\n};\nMeteor.startup(() => {\n\tTemplate.roomOld.events({\n\t\t...getCommonRoomEvents(),\n\t\t...dropzoneEvents,\n\t\t'click .toggle-hidden'(e) {\n\t\t\tconst id = e.currentTarget.dataset.message;\n\t\t\tdocument.querySelector(`#${id}`).classList.toggle('message--ignored');\n\t\t},\n\n\t\t'click .message'(e, template) {\n\t\t\tif (template.selectable.get()) {\n\t\t\t\t(document.selection != null ? document.selection.empty() : undefined) ||\n\t\t\t\t\t(typeof window.getSelection === 'function' ? window.getSelection().removeAllRanges() : undefined);\n\t\t\t\tconst data = Blaze.getData(e.currentTarget);\n\t\t\t\tconst {\n\t\t\t\t\tmsg: { _id },\n\t\t\t\t} = messageArgs(data);\n\n\t\t\t\tif (!template.selectablePointer) {\n\t\t\t\t\ttemplate.selectablePointer = _id;\n\t\t\t\t}\n\n\t\t\t\tif (!e.shiftKey) {\n\t\t\t\t\ttemplate.selectedMessages = template.getSelectedMessages();\n\t\t\t\t\ttemplate.selectedRange = [];\n\t\t\t\t\ttemplate.selectablePointer = _id;\n\t\t\t\t}\n\n\t\t\t\ttemplate.selectMessages(_id);\n\n\t\t\t\tconst selectedMessages = $('.messages-box .message.selected').map((i, message) => message.id);\n\t\t\t\tconst removeClass = _.difference(selectedMessages, template.getSelectedMessages());\n\t\t\t\tconst addClass = _.difference(template.getSelectedMessages(), selectedMessages);\n\t\t\t\tremoveClass.forEach((message) => $(`.messages-box #${message}`).removeClass('selected'));\n\t\t\t\taddClass.forEach((message) => $(`.messages-box #${message}`).addClass('selected'));\n\t\t\t}\n\t\t},\n\t\t'click .jump-recent button'(e, template) {\n\t\t\te.preventDefault();\n\t\t\ttemplate.atBottom = true;\n\t\t\tRoomHistoryManager.clear(template && template.data && template.data._id);\n\t\t},\n\t\t'load .gallery-item'(e, template) {\n\t\t\ttemplate.sendToBottomIfNecessary();\n\t\t},\n\n\t\t'rendered .js-block-wrapper'(e, template) {\n\t\t\ttemplate.sendToBottomIfNecessary();\n\t\t},\n\t\t'click .new-message'(event, instance) {\n\t\t\tinstance.atBottom = true;\n\t\t\tinstance.sendToBottomIfNecessary();\n\t\t\tchatMessages[RoomManager.openedRoom].input.focus();\n\t\t},\n\t\t'click .upload-progress-close'(e) {\n\t\t\te.preventDefault();\n\t\t\tSession.set(`uploading-cancel-${this.id}`, true);\n\t\t},\n\t\t'click .unread-bar > button.mark-read'(e, t) {\n\t\t\treadMessage.readNow(t.data._id);\n\t\t},\n\n\t\t'click .unread-bar > button.jump-to'(e, t) {\n\t\t\tconst { _id } = t.data;\n\t\t\tconst room = RoomHistoryManager.getRoom(_id);\n\t\t\tlet message = room && room.firstUnread.get();\n\t\t\tif (!message) {\n\t\t\t\tconst subscription = Subscriptions.findOne({ rid: _id });\n\t\t\t\tmessage = ChatMessage.find(\n\t\t\t\t\t{ rid: _id, ts: { $gt: subscription != null ? subscription.ls : undefined } },\n\t\t\t\t\t{ sort: { ts: 1 }, limit: 1 },\n\t\t\t\t).fetch()[0];\n\t\t\t}\n\t\t\tRoomHistoryManager.getSurroundingMessages(message, 50);\n\t\t},\n\t\t'scroll .wrapper': _.throttle(function (e, t) {\n\t\t\tconst $roomLeader = $('.room-leader');\n\t\t\tif ($roomLeader.length) {\n\t\t\t\tif (e.target.scrollTop < t.lastScrollTop) {\n\t\t\t\t\tt.hideLeaderHeader.set(false);\n\t\t\t\t} else if (t.isAtBottom(100) === false && e.target.scrollTop > $roomLeader.height()) {\n\t\t\t\t\tt.hideLeaderHeader.set(true);\n\t\t\t\t}\n\t\t\t}\n\t\t\tt.lastScrollTop = e.target.scrollTop;\n\t\t\tconst height = e.target.clientHeight;\n\t\t\tconst isLoading = RoomHistoryManager.isLoading(this._id);\n\t\t\tconst hasMore = RoomHistoryManager.hasMore(this._id);\n\t\t\tconst hasMoreNext = RoomHistoryManager.hasMoreNext(this._id);\n\n\t\t\tif ((isLoading === false && hasMore === true) || hasMoreNext === true) {\n\t\t\t\tif (hasMore === true && t.lastScrollTop <= height / 3) {\n\t\t\t\t\tRoomHistoryManager.getMore(this._id);\n\t\t\t\t} else if (hasMoreNext === true && Math.ceil(t.lastScrollTop) >= e.target.scrollHeight - height) {\n\t\t\t\t\tRoomHistoryManager.getMoreNext(this._id);\n\t\t\t\t}\n\t\t\t}\n\t\t}, 100),\n\n\t\t'click .time a'(e) {\n\t\t\te.preventDefault();\n\t\t\tconst { msg } = messageArgs(this);\n\t\t\tconst repliedMessageId = msg.attachments[0].message_link.split('?msg=')[1];\n\t\t\tFlowRouter.go(FlowRouter.current().context.pathname, null, {\n\t\t\t\tmsg: repliedMessageId,\n\t\t\t\thash: Random.id(),\n\t\t\t});\n\t\t},\n\t});\n\n\tTemplate.roomOld.onCreated(function () {\n\t\t// this.scrollOnBottom = true\n\t\t// this.typing = new msgTyping this.data._id\n\t\tconst rid = this.data._id;\n\t\tthis.tabBar = this.data.tabBar;\n\n\t\tthis.onFile = (filesToUpload) => {\n\t\t\tfileUpload(filesToUpload, chatMessages[rid].input, { rid });\n\t\t};\n\n\t\tthis.rid = rid;\n\n\t\tthis.subscription = new ReactiveVar();\n\t\tthis.state = new ReactiveDict();\n\t\tthis.userDetail = new ReactiveVar('');\n\t\tconst user = Meteor.user();\n\t\tthis.autorun((c) => {\n\t\t\tconst room = Rooms.findOne(\n\t\t\t\t{ _id: rid },\n\t\t\t\t{\n\t\t\t\t\tfields: {\n\t\t\t\t\t\tt: 1,\n\t\t\t\t\t\tusernames: 1,\n\t\t\t\t\t\tuids: 1,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t);\n\n\t\t\tif (room.t !== 'd') {\n\t\t\t\treturn c.stop();\n\t\t\t}\n\n\t\t\tif (roomTypes.getConfig(room.t).isGroupChat(room)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst usernames = Array.from(new Set(room.usernames));\n\t\t\tthis.userDetail.set(\n\t\t\t\tthis.userDetail.get() || (usernames.length === 1 ? usernames[0] : usernames.filter((username) => username !== user.username)[0]),\n\t\t\t);\n\t\t});\n\n\t\tthis.autorun(() => {\n\t\t\tconst rid = Template.currentData()._id;\n\t\t\tconst room = Rooms.findOne({ _id: rid }, { fields: { announcement: 1 } });\n\t\t\tthis.state.set('announcement', room.announcement);\n\t\t});\n\n\t\tthis.autorun(() => {\n\t\t\tconst subscription = Subscriptions.findOne({ rid });\n\t\t\tthis.subscription.set(subscription);\n\t\t\tthis.state.set({\n\t\t\t\tsubscribed: !!subscription,\n\t\t\t\tautoTranslate: subscription && subscription.autoTranslate,\n\t\t\t\tautoTranslateLanguage: subscription && subscription.autoTranslateLanguage,\n\t\t\t});\n\t\t});\n\n\t\tthis.showUsersOffline = new ReactiveVar(false);\n\t\tthis.atBottom = !FlowRouter.getQueryParam('msg');\n\t\tthis.unreadCount = new ReactiveVar(0);\n\n\t\tthis.selectable = new ReactiveVar(false);\n\t\tthis.selectedMessages = [];\n\t\tthis.selectedRange = [];\n\t\tthis.selectablePointer = null;\n\n\t\tthis.flexTemplate = new ReactiveVar();\n\n\t\tthis.groupDetail = new ReactiveVar();\n\n\t\tthis.hideLeaderHeader = new ReactiveVar(false);\n\n\t\tthis.resetSelection = (enabled) => {\n\t\t\tthis.selectable.set(enabled);\n\t\t\t$('.messages-box .message.selected').removeClass('selected');\n\t\t\tthis.selectedMessages = [];\n\t\t\tthis.selectedRange = [];\n\t\t\tthis.selectablePointer = null;\n\t\t};\n\n\t\tthis.selectMessages = (to) => {\n\t\t\tif (this.selectablePointer === to && this.selectedRange.length > 0) {\n\t\t\t\tthis.selectedRange = [];\n\t\t\t} else {\n\t\t\t\tconst message1 = ChatMessage.findOne(this.selectablePointer);\n\t\t\t\tconst message2 = ChatMessage.findOne(to);\n\n\t\t\t\tconst minTs = _.min([message1.ts, message2.ts]);\n\t\t\t\tconst maxTs = _.max([message1.ts, message2.ts]);\n\n\t\t\t\tthis.selectedRange = _.pluck(ChatMessage.find({ rid: message1.rid, ts: { $gte: minTs, $lte: maxTs } }).fetch(), '_id');\n\t\t\t}\n\t\t};\n\n\t\tthis.getSelectedMessages = () => {\n\t\t\tlet previewMessages;\n\t\t\tconst messages = this.selectedMessages;\n\t\t\tlet addMessages = false;\n\t\t\tfor (const message of Array.from(this.selectedRange)) {\n\t\t\t\tif (messages.indexOf(message) === -1) {\n\t\t\t\t\taddMessages = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (addMessages) {\n\t\t\t\tpreviewMessages = _.compact(_.uniq(this.selectedMessages.concat(this.selectedRange)));\n\t\t\t} else {\n\t\t\t\tpreviewMessages = _.compact(_.difference(this.selectedMessages, this.selectedRange));\n\t\t\t}\n\n\t\t\treturn previewMessages;\n\t\t};\n\n\t\tthis.clearUserDetail = () => {\n\t\t\tthis.userDetail.set(null);\n\t\t\tthis.tabBar.setData({});\n\t\t\tthis.tabBar.close();\n\t\t};\n\n\t\tMeteor.call('getRoomRoles', this.data._id, function (error, results) {\n\t\t\tif (error) {\n\t\t\t\thandleError(error);\n\t\t\t}\n\n\t\t\treturn Array.from(results).forEach((record) => {\n\t\t\t\tdelete record._id;\n\t\t\t\tRoomRoles.upsert({ 'rid': record.rid, 'u._id': record.u._id }, record);\n\t\t\t});\n\t\t});\n\n\t\tthis.rolesObserve = RoomRoles.find({ rid: this.data._id }).observe({\n\t\t\tadded: (role) => {\n\t\t\t\tif (!role.u || !role.u._id) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tChatMessage.update({ 'rid': this.data._id, 'u._id': role.u._id }, { $addToSet: { roles: role._id } }, { multi: true });\n\t\t\t}, // Update message to re-render DOM\n\t\t\tchanged: (role) => {\n\t\t\t\tif (!role.u || !role.u._id) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tChatMessage.update({ 'rid': this.data._id, 'u._id': role.u._id }, { $inc: { rerender: 1 } }, { multi: true });\n\t\t\t}, // Update message to re-render DOM\n\t\t\tremoved: (role) => {\n\t\t\t\tif (!role.u || !role.u._id) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tChatMessage.update({ 'rid': this.data._id, 'u._id': role.u._id }, { $pull: { roles: role._id } }, { multi: true });\n\t\t\t},\n\t\t});\n\n\t\tthis.sendToBottomIfNecessary = () => {\n\t\t\tif (this.atBottom === true) {\n\t\t\t\tthis.sendToBottom();\n\t\t\t}\n\t\t};\n\t}); // Update message to re-render DOM\n\n\tTemplate.roomOld.onDestroyed(function () {\n\t\tif (this.rolesObserve) {\n\t\t\tthis.rolesObserve.stop();\n\t\t}\n\n\t\treadMessage.off(this.data._id);\n\n\t\twindow.removeEventListener('resize', this.onWindowResize);\n\n\t\tthis.observer && this.observer.disconnect();\n\n\t\tconst chatMessage = chatMessages[this.data._id];\n\t\tchatMessage.onDestroyed && chatMessage.onDestroyed(this.data._id);\n\n\t\tcallbacks.remove('streamNewMessage', this.data._id);\n\t});\n\n\tconst isAtBottom = function (element, scrollThreshold = 0) {\n\t\treturn element.scrollTop + scrollThreshold >= element.scrollHeight - element.clientHeight;\n\t};\n\n\tTemplate.roomOld.onRendered(function () {\n\t\tconst { _id: rid } = this.data;\n\n\t\tif (!chatMessages[rid]) {\n\t\t\tchatMessages[rid] = new ChatMessages();\n\t\t}\n\n\t\tconst wrapper = this.find('.wrapper');\n\n\t\tconst store = NewRoomManager.getStore(rid);\n\n\t\tconst afterMessageGroup = () => {\n\t\t\tif (store.scroll && !store.atBottom) {\n\t\t\t\twrapper.scrollTop = store.scroll;\n\t\t\t} else {\n\t\t\t\tthis.sendToBottom();\n\t\t\t}\n\t\t\twrapper.removeEventListener('MessageGroup', afterMessageGroup);\n\n\t\t\twrapper.addEventListener(\n\t\t\t\t'scroll',\n\t\t\t\t_.throttle(() => {\n\t\t\t\t\tstore.update({ scroll: wrapper.scrollTop, atBottom: isAtBottom(wrapper, 50) });\n\t\t\t\t}, 30),\n\t\t\t);\n\t\t};\n\n\t\twrapper.addEventListener('MessageGroup', afterMessageGroup);\n\n\t\tchatMessages[rid].initializeWrapper(this.find('.wrapper'));\n\t\tchatMessages[rid].initializeInput(this.find('.js-input-message'), { rid });\n\n\t\tconst wrapperUl = this.find('.wrapper > ul');\n\t\tconst newMessage = this.find('.new-message');\n\n\t\tconst template = this;\n\n\t\tconst messageBox = $('.messages-box');\n\n\t\ttemplate.isAtBottom = function (scrollThreshold = 0) {\n\t\t\tif (isAtBottom(wrapper, scrollThreshold)) {\n\t\t\t\tnewMessage.className = 'new-message background-primary-action-color color-content-background-color not';\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\n\t\ttemplate.sendToBottom = function () {\n\t\t\twrapper.scrollTo(30, wrapper.scrollHeight);\n\t\t\tnewMessage.className = 'new-message background-primary-action-color color-content-background-color not';\n\t\t};\n\n\t\ttemplate.checkIfScrollIsAtBottom = function () {\n\t\t\ttemplate.atBottom = template.isAtBottom(100);\n\t\t};\n\n\t\ttemplate.observer = new ResizeObserver(() => template.sendToBottomIfNecessary());\n\n\t\ttemplate.observer.observe(wrapperUl);\n\n\t\tconst wheelHandler = _.throttle(function () {\n\t\t\ttemplate.checkIfScrollIsAtBottom();\n\t\t}, 100);\n\n\t\twrapper.addEventListener('mousewheel', wheelHandler);\n\n\t\twrapper.addEventListener('wheel', wheelHandler);\n\n\t\twrapper.addEventListener('touchstart', () => {\n\t\t\ttemplate.atBottom = false;\n\t\t});\n\n\t\twrapper.addEventListener('touchend', function () {\n\t\t\ttemplate.checkIfScrollIsAtBottom();\n\t\t\tsetTimeout(() => template.checkIfScrollIsAtBottom(), 1000);\n\t\t\tsetTimeout(() => template.checkIfScrollIsAtBottom(), 2000);\n\t\t});\n\n\t\tTracker.afterFlush(() => {\n\t\t\twrapper.addEventListener('scroll', wheelHandler);\n\t\t});\n\n\t\tthis.lastScrollTop = $('.messages-box .wrapper').scrollTop();\n\n\t\tconst rtl = $('html').hasClass('rtl');\n\n\t\tconst getElementFromPoint = function (topOffset = 0) {\n\t\t\tconst messageBoxOffset = messageBox.offset();\n\n\t\t\tlet element;\n\t\t\tif (rtl) {\n\t\t\t\telement = document.elementFromPoint(messageBoxOffset.left + messageBox.width() - 1, messageBoxOffset.top + topOffset + 1);\n\t\t\t} else {\n\t\t\t\telement = document.elementFromPoint(messageBoxOffset.left + 1, messageBoxOffset.top + topOffset + 1);\n\t\t\t}\n\n\t\t\tif (element && element.classList.contains('message')) {\n\t\t\t\treturn element;\n\t\t\t}\n\t\t};\n\n\t\tconst updateUnreadCount = _.throttle(() => {\n\t\t\tTracker.afterFlush(() => {\n\t\t\t\tconst lastInvisibleMessageOnScreen = getElementFromPoint(0) || getElementFromPoint(20) || getElementFromPoint(40);\n\n\t\t\t\tif (!lastInvisibleMessageOnScreen || !lastInvisibleMessageOnScreen.id) {\n\t\t\t\t\treturn this.unreadCount.set(0);\n\t\t\t\t}\n\n\t\t\t\tconst lastMessage = ChatMessage.findOne(lastInvisibleMessageOnScreen.id);\n\t\t\t\tif (!lastMessage) {\n\t\t\t\t\treturn this.unreadCount.set(0);\n\t\t\t\t}\n\n\t\t\t\tthis.state.set('lastMessage', lastMessage.ts);\n\t\t\t});\n\t\t}, 300);\n\n\t\tconst read = _.debounce(function () {\n\t\t\tif (rid !== Session.get('openedRoom')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treadMessage.read(rid);\n\t\t}, 500);\n\n\t\tthis.autorun(() => {\n\t\t\tif (rid !== Session.get('openedRoom')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlet room = Rooms.findOne({ _id: rid }, { fields: { t: 1 } });\n\n\t\t\tif (room?.t === 'l') {\n\t\t\t\troom = Tracker.nonreactive(() => Rooms.findOne({ _id: rid }));\n\t\t\t\troomTypes.getConfig(room.t).openCustomProfileTab(this, room, room.v.username);\n\t\t\t}\n\t\t});\n\n\t\tthis.autorun(() => {\n\t\t\tif (\n\t\t\t\t!Object.values(roomTypes.roomTypes)\n\t\t\t\t\t.map(({ route }) => route && route.name)\n\t\t\t\t\t.filter(Boolean)\n\t\t\t\t\t.includes(FlowRouter.getRouteName())\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (rid !== Session.get('openedRoom')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst subscription = Subscriptions.findOne({ rid }, { fields: { alert: 1, unread: 1 } });\n\t\t\tread();\n\t\t\treturn subscription && (subscription.alert || subscription.unread) && readMessage.refreshUnreadMark(rid);\n\t\t});\n\n\t\tthis.autorun(() => {\n\t\t\tconst lastMessage = this.state.get('lastMessage');\n\n\t\t\tconst subscription = Subscriptions.findOne({ rid }, { fields: { ls: 1 } });\n\t\t\tif (!subscription) {\n\t\t\t\tthis.unreadCount.set(0);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst count = ChatMessage.find({\n\t\t\t\trid,\n\t\t\t\tts: { $lte: lastMessage, $gt: subscription && subscription.ls },\n\t\t\t}).count();\n\n\t\t\tthis.unreadCount.set(count);\n\t\t});\n\n\t\tthis.autorun(() => {\n\t\t\tconst count = RoomHistoryManager.getRoom(rid).unreadNotLoaded.get() + this.unreadCount.get();\n\t\t\tthis.state.set('count', count);\n\t\t});\n\n\t\tthis.autorun(() => {\n\t\t\tRooms.findOne(rid);\n\t\t\tconst count = this.state.get('count');\n\t\t\tif (count === 0) {\n\t\t\t\treturn read();\n\t\t\t}\n\t\t\treadMessage.refreshUnreadMark(rid);\n\t\t});\n\n\t\treadMessage.on(template.data._id, () => this.unreadCount.set(0));\n\n\t\twrapper.addEventListener('scroll', updateUnreadCount);\n\t\t// salva a data da renderização para exibir alertas de novas mensagens\n\t\t$.data(this.firstNode, 'renderedAt', new Date());\n\n\t\tconst webrtc = WebRTC.getInstanceByRoomId(template.data._id);\n\t\tif (webrtc) {\n\t\t\tthis.autorun(() => {\n\t\t\t\tconst remoteItems = webrtc.remoteItems.get();\n\t\t\t\tif ((remoteItems && remoteItems.length > 0) || webrtc.localUrl.get()) {\n\t\t\t\t\treturn this.tabBar.openUserInfo();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tcallbacks.add(\n\t\t\t'streamNewMessage',\n\t\t\t(msg) => {\n\t\t\t\tif (rid !== msg.rid || msg.editedAt || msg.tmid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (msg.u._id === Meteor.userId()) {\n\t\t\t\t\treturn template.sendToBottom();\n\t\t\t\t}\n\n\t\t\t\tif (!template.isAtBottom()) {\n\t\t\t\t\tnewMessage.classList.remove('not');\n\t\t\t\t}\n\t\t\t},\n\t\t\tcallbacks.priority.MEDIUM,\n\t\t\trid,\n\t\t);\n\n\t\tthis.autorun(function () {\n\t\t\tif (template.data._id !== RoomManager.openedRoom) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst room = Rooms.findOne({ _id: template.data._id });\n\t\t\tif (!room) {\n\t\t\t\treturn FlowRouter.go('home');\n\t\t\t}\n\t\t});\n\t});\n});\n\ncallbacks.add('enter-room', (sub) => {\n\tif (!sub) {\n\t\treturn;\n\t}\n\tconst isAReplyInDMFromChannel = FlowRouter.getQueryParam('reply') && sub.t === 'd';\n\tif (isAReplyInDMFromChannel && chatMessages[sub.rid]) {\n\t\tchatMessages[sub.rid].restoreReplies();\n\t}\n\tsetTimeout(() => readMessage.read(sub.rid), 1000);\n});\n","import { Template } from 'meteor/templating';\n\nimport { roomTypes } from '../../../../utils';\n\nTemplate.roomSearch.helpers({\n\troomIcon() {\n\t\tif (this.type === 'u') {\n\t\t\treturn 'icon-at';\n\t\t}\n\t\tif (this.type === 'r') {\n\t\t\treturn roomTypes.getIcon(this);\n\t\t}\n\t},\n\tuserStatus() {\n\t\tif (this.type === 'u') {\n\t\t\treturn `status-${this.status}`;\n\t\t}\n\t},\n});\n","import './lib/accounts';\nimport './lib/collections';\nimport './lib/iframeCommands';\nimport './lib/menu';\nimport './lib/parentTemplate';\nimport './lib/codeMirror';\nimport './lib/textarea-cursor';\nimport './views/app/burger.html';\nimport './views/app/home.html';\nimport './views/app/notAuthorized.html';\nimport './views/app/pageContainer.html';\nimport './views/app/pageCustomContainer.html';\nimport './views/app/roomSearch.html';\nimport './views/app/userSearch.html';\nimport './views/app/burger';\nimport './views/app/home';\nimport './views/app/roomSearch';\nimport './views/app/photoswipeContent.ts'; // without the *.ts extension, *.html gets loaded first\nimport './components/icon';\nimport './components/table.html';\nimport './components/table';\nimport './components/tabs';\nimport './components/popupList.html';\nimport './components/popupList';\nimport './components/selectDropdown.html';\n\nimport './components/header/header';\nimport './components/tooltip';\nimport './lib/Tooltip';\n\nexport { ChatMessages } from './lib/chatMessages';\nexport { fileUpload } from './lib/fileUpload';\nexport { UserAction, USER_ACTIVITIES } from './lib/UserAction';\nexport { KonchatNotification } from './lib/notification';\nexport { Login, Button } from './lib/rocket';\nexport { AudioRecorder } from './lib/recorderjs/audioRecorder';\nexport { VideoRecorder } from './lib/recorderjs/videoRecorder';\nexport { chatMessages } from './views/app/room';\nexport * from './lib/userPopoverStatus';\n","export * from './client/index';\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport { Template } from 'meteor/templating';\n\nimport { settings } from '../../../settings';\n\nTemplate.customFieldsForm.helpers({\n\tnew() {\n\t\treturn this.new;\n\t},\n\tcustomFields() {\n\t\tconst customFields = Template.instance().customFields.get();\n\n\t\tif (!customFields) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst customFieldsArray = [];\n\n\t\tObject.keys(customFields).forEach((key) => {\n\t\t\tconst value = customFields[key];\n\t\t\tif (value.hideFromForm === true && Template.instance().hideFromForm === true) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcustomFieldsArray.push({\n\t\t\t\tfieldName: key,\n\t\t\t\tfield: value,\n\t\t\t});\n\t\t});\n\n\t\treturn customFieldsArray;\n\t},\n\tselectedField(current, field) {\n\t\tconst { formData } = Template.instance();\n\n\t\tif (typeof formData[field.fieldName] !== 'undefined') {\n\t\t\treturn formData[field.fieldName] === current;\n\t\t}\n\t\tif (typeof field.defaultValue !== 'undefined') {\n\t\t\treturn field.defaultValue === current;\n\t\t}\n\t},\n\tfieldValue() {\n\t\tconst { formData } = Template.instance();\n\n\t\treturn formData[this.fieldName];\n\t},\n});\n\nTemplate.customFieldsForm.onCreated(function () {\n\tthis.customFields = new ReactiveVar();\n\n\tconst currentData = Template.currentData();\n\tthis.hideFromForm = currentData && currentData.hideFromForm;\n\tthis.formData = (currentData && currentData.formData) || {};\n\n\tTracker.autorun(() => {\n\t\tconst Accounts_CustomFields = settings.get('Accounts_CustomFields');\n\t\tif (typeof Accounts_CustomFields === 'string' && Accounts_CustomFields.trim() !== '') {\n\t\t\ttry {\n\t\t\t\tthis.customFields.set(JSON.parse(settings.get('Accounts_CustomFields')));\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error('Invalid JSON for Accounts_CustomFields');\n\t\t\t}\n\t\t} else {\n\t\t\tthis.customFields.set(undefined);\n\t\t}\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { settings } from '../../../settings';\n\nexport const LoginPresence = {\n\tawayTime: 600000, // 10 minutes\n\tstarted: false,\n\n\tstartTimer() {\n\t\tLoginPresence.stopTimer();\n\t\tif (!LoginPresence.awayTime) {\n\t\t\treturn;\n\t\t}\n\t\tthis.timer = setTimeout(LoginPresence.disconnect, LoginPresence.awayTime);\n\t},\n\tstopTimer() {\n\t\tclearTimeout(this.timer);\n\t},\n\tdisconnect() {\n\t\tconst status = Meteor.status();\n\t\tif (status && status.status !== 'offline') {\n\t\t\tif (!Meteor.userId() && settings.get('Accounts_AllowAnonymousRead') !== true) {\n\t\t\t\tMeteor.disconnect();\n\t\t\t}\n\t\t}\n\t\tLoginPresence.stopTimer();\n\t},\n\tconnect() {\n\t\tconst status = Meteor.status();\n\t\tif (status && status.status === 'offline') {\n\t\t\tMeteor.reconnect();\n\t\t}\n\t},\n\tstart() {\n\t\tif (LoginPresence.started) {\n\t\t\treturn;\n\t\t}\n\n\t\twindow.addEventListener('focus', () => {\n\t\t\tLoginPresence.stopTimer();\n\t\t\tLoginPresence.connect();\n\t\t});\n\n\t\twindow.addEventListener('blur', () => {\n\t\t\tLoginPresence.startTimer();\n\t\t});\n\n\t\tif (!window.document.hasFocus()) {\n\t\t\tLoginPresence.startTimer();\n\t\t}\n\n\t\tLoginPresence.started = true;\n\t},\n};\n\nLoginPresence.start();\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Session } from 'meteor/session';\n\nexport class RocketChatAnnouncement {\n\tconstructor(args = {}) {\n\t\tthis.room = new ReactiveVar(args.room);\n\t\tthis.message = new ReactiveVar(args.message);\n\t\tthis.callback = new ReactiveVar(args.callback);\n\t\tthis.style = new ReactiveVar(args.style);\n\t}\n\n\tsave() {\n\t\tconst announcementObject = {\n\t\t\tmessage: this.message.get(),\n\t\t\tcallback: this.callback.get(),\n\t\t\tstyle: this.style.get(),\n\t\t};\n\t\tMeteor.call('saveRoomSettings', this.room.get(), 'roomAnnouncement', announcementObject);\n\t}\n\n\tgetMessage() {\n\t\treturn this.message.get();\n\t}\n\n\tgetCallback() {\n\t\treturn this.callback.get();\n\t}\n\n\tgetStyle() {\n\t\treturn this.callback.get();\n\t}\n\n\tgetByRoom(rid) {\n\t\tconst roomData = Session.get(`roomData${rid}`);\n\t\tif (!roomData) {\n\t\t\treturn null;\n\t\t}\n\t\tthis.room.set(rid);\n\t\tthis.message.set(roomData.announcement);\n\t\tthis.callback.set(roomData.announcementDetails ? roomData.announcementDetails.callback : null);\n\t\tthis.style.set(roomData.announcementDetails ? roomData.announcementDetails.style : null);\n\t\treturn this;\n\t}\n\n\tclear() {\n\t\tthis.message.set(null);\n\t\tthis.callback.set(null);\n\t\tthis.style.set(null);\n\t\tMeteor.call('saveRoomSettings', this.room.get(), 'roomAnnouncement', {});\n\t}\n}\n","export { RocketChatAnnouncement } from './RocketChatAnnouncement';\nexport { LoginPresence } from './LoginPresence';\n","import { Meteor } from 'meteor/meteor';\nimport { TimeSync } from 'meteor/mizzao:timesync';\nimport s from 'underscore.string';\n\nimport { ChatMessage } from '../../../models';\nimport { settings } from '../../../settings';\nimport { callbacks } from '../../../../lib/callbacks';\nimport { t } from '../../../utils/client';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\nimport { onClientMessageReceived } from '../../../../client/lib/onClientMessageReceived';\n\nMeteor.methods({\n\tsendMessage(message) {\n\t\tif (!Meteor.userId() || s.trim(message.msg) === '') {\n\t\t\treturn false;\n\t\t}\n\t\tconst messageAlreadyExists = message._id && ChatMessage.findOne({ _id: message._id });\n\t\tif (messageAlreadyExists) {\n\t\t\treturn dispatchToastMessage({ type: 'error', message: t('Message_Already_Sent') });\n\t\t}\n\t\tconst user = Meteor.user();\n\t\tmessage.ts = isNaN(TimeSync.serverOffset()) ? new Date() : new Date(Date.now() + TimeSync.serverOffset());\n\t\tmessage.u = {\n\t\t\t_id: Meteor.userId(),\n\t\t\tusername: user.username,\n\t\t};\n\t\tif (settings.get('UI_Use_Real_Name')) {\n\t\t\tmessage.u.name = user.name;\n\t\t}\n\t\tmessage.temp = true;\n\t\tif (settings.get('Message_Read_Receipt_Enabled')) {\n\t\t\tmessage.unread = true;\n\t\t}\n\t\tmessage = callbacks.run('beforeSaveMessage', message);\n\t\tonClientMessageReceived(message).then(function (message) {\n\t\t\tChatMessage.insert(message);\n\t\t\treturn callbacks.run('afterSaveMessage', message);\n\t\t});\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../../settings/client';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst value = settings.get('Site_Url');\n\t\tif (value == null || value.trim() === '') {\n\t\t\treturn;\n\t\t}\n\t\t(window as any).__meteor_runtime_config__.ROOT_URL = value;\n\t});\n});\n","import _ from 'underscore';\nimport { OAuth } from 'meteor/oauth';\n\nimport { settings } from '../../settings';\n\nOAuth.launchLogin = _.wrap(OAuth.launchLogin, function (func, options) {\n\tconst proxy = settings.get('Accounts_OAuth_Proxy_services').replace(/\\s/g, '').split(',');\n\tif (proxy.includes(options.loginService)) {\n\t\tconst redirect_uri = options.loginUrl.match(/(&redirect_uri=)([^&]+|$)/)[2];\n\t\toptions.loginUrl = options.loginUrl.replace(\n\t\t\t/(&redirect_uri=)([^&]+|$)/,\n\t\t\t`$1${encodeURIComponent(settings.get('Accounts_OAuth_Proxy_host'))}/oauth_redirect`,\n\t\t);\n\t\toptions.loginUrl = options.loginUrl.replace(/(&state=)([^&]+|$)/, `$1${redirect_uri}!$2`);\n\t\toptions.loginUrl = `${settings.get('Accounts_OAuth_Proxy_host')}/redirect/${encodeURIComponent(options.loginUrl)}`;\n\t}\n\n\treturn func(options);\n});\n","import './startup/settingsOnLoadSiteUrl';\nimport '../lib/MessageTypes';\nimport './OAuthProxy';\nimport './methods/sendMessage';\nimport './views/customFieldsForm.html';\nimport './views/customFieldsForm';\nimport '../startup/defaultRoomTypes';\n\nexport * from './lib';\n","import { Meteor } from 'meteor/meteor';\n\nimport { getUserPreference, RoomTypeConfig } from '../../../utils';\n\nexport class ConversationRoomType extends RoomTypeConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tidentifier: 'merged',\n\t\t\torder: 30,\n\t\t\tlabel: 'Conversations',\n\t\t});\n\t}\n\n\tcondition() {\n\t\t// returns true only if sidebarGroupByType is not set\n\t\treturn !getUserPreference(Meteor.userId(), 'sidebarGroupByType');\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport { ChatRoom, Subscriptions } from '../../../models';\nimport { openRoom } from '../../../ui-utils';\nimport { getUserPreference, RoomTypeConfig, RoomTypeRouteConfig, RoomSettingsEnum, RoomMemberActions, UiTextContext } from '../../../utils';\nimport { hasPermission, hasAtLeastOnePermission } from '../../../authorization';\nimport { settings } from '../../../settings';\nimport { getUserAvatarURL } from '../../../utils/lib/getUserAvatarURL';\nimport { getAvatarURL } from '../../../utils/lib/getAvatarURL';\n\nexport class DirectMessageRoomRoute extends RoomTypeRouteConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tname: 'direct',\n\t\t\tpath: '/direct/:rid/:tab?/:context?',\n\t\t});\n\t}\n\n\taction(params) {\n\t\treturn openRoom('d', params.rid);\n\t}\n\n\tlink(sub) {\n\t\treturn { rid: sub.rid || sub.name };\n\t}\n}\n\nexport class DirectMessageRoomType extends RoomTypeConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tidentifier: 'd',\n\t\t\torder: 50,\n\t\t\ticon: 'at',\n\t\t\tlabel: 'Direct_Messages',\n\t\t\troute: new DirectMessageRoomRoute(),\n\t\t});\n\t}\n\n\tgetIcon(roomData) {\n\t\tif (this.isGroupChat(roomData)) {\n\t\t\treturn 'balloon';\n\t\t}\n\t\treturn this.icon;\n\t}\n\n\tfindRoom(identifier) {\n\t\tif (!hasPermission('view-d-room')) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst query = {\n\t\t\tt: 'd',\n\t\t\t$or: [{ name: identifier }, { rid: identifier }],\n\t\t};\n\n\t\tconst subscription = Subscriptions.findOne(query);\n\t\tif (subscription && subscription.rid) {\n\t\t\treturn ChatRoom.findOne(subscription.rid);\n\t\t}\n\t}\n\n\troomName(roomData) {\n\t\t// this function can receive different types of data\n\t\t// if it doesn't have fname and name properties, should be a Room object\n\t\t// so, need to find the related subscription\n\t\tconst subscription = roomData && (roomData.fname || roomData.name) ? roomData : Subscriptions.findOne({ rid: roomData._id });\n\n\t\tif (subscription === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (settings.get('UI_Use_Real_Name') && subscription.fname) {\n\t\t\treturn subscription.fname;\n\t\t}\n\n\t\treturn subscription.name;\n\t}\n\n\tsecondaryRoomName(roomData) {\n\t\tif (settings.get('UI_Use_Real_Name')) {\n\t\t\tconst subscription = Subscriptions.findOne({ rid: roomData._id }, { fields: { name: 1 } });\n\t\t\treturn subscription && subscription.name;\n\t\t}\n\t}\n\n\tcondition() {\n\t\tconst groupByType = getUserPreference(Meteor.userId(), 'sidebarGroupByType');\n\t\treturn groupByType && hasAtLeastOnePermission(['view-d-room', 'view-joined-room']);\n\t}\n\n\tgetUserStatus(roomId) {\n\t\tconst subscription = Subscriptions.findOne({ rid: roomId });\n\t\tif (subscription == null) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn Session.get(`user_${subscription.name}_status`);\n\t}\n\n\tgetUserStatusText(roomId) {\n\t\tconst subscription = Subscriptions.findOne({ rid: roomId });\n\t\tif (subscription == null) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn Session.get(`user_${subscription.name}_status_text`);\n\t}\n\n\tallowRoomSettingChange(room, setting) {\n\t\tswitch (setting) {\n\t\t\tcase RoomSettingsEnum.TYPE:\n\t\t\tcase RoomSettingsEnum.NAME:\n\t\t\tcase RoomSettingsEnum.SYSTEM_MESSAGES:\n\t\t\tcase RoomSettingsEnum.DESCRIPTION:\n\t\t\tcase RoomSettingsEnum.READ_ONLY:\n\t\t\tcase RoomSettingsEnum.REACT_WHEN_READ_ONLY:\n\t\t\tcase RoomSettingsEnum.ARCHIVE_OR_UNARCHIVE:\n\t\t\tcase RoomSettingsEnum.JOIN_CODE:\n\t\t\t\treturn false;\n\t\t\tcase RoomSettingsEnum.E2E:\n\t\t\t\treturn settings.get('E2E_Enable') === true;\n\t\t\tdefault:\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tallowMemberAction(room, action) {\n\t\tswitch (action) {\n\t\t\tcase RoomMemberActions.BLOCK:\n\t\t\t\treturn !this.isGroupChat(room);\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t}\n\n\tenableMembersListProfile() {\n\t\treturn true;\n\t}\n\n\tuserDetailShowAll(/* room */) {\n\t\treturn true;\n\t}\n\n\tgetUiText(context) {\n\t\tswitch (context) {\n\t\t\tcase UiTextContext.HIDE_WARNING:\n\t\t\t\treturn 'Hide_Private_Warning';\n\t\t\tcase UiTextContext.LEAVE_WARNING:\n\t\t\t\treturn 'Leave_Private_Warning';\n\t\t\tdefault:\n\t\t\t\treturn '';\n\t\t}\n\t}\n\n\t/**\n\t * Returns details to use on notifications\n\t *\n\t * @param {object} room\n\t * @param {object} user\n\t * @param {string} notificationMessage\n\t * @return {object} Notification details\n\t */\n\tgetNotificationDetails(room, user, notificationMessage) {\n\t\tif (!Meteor.isServer) {\n\t\t\treturn {};\n\t\t}\n\n\t\tif (this.isGroupChat(room)) {\n\t\t\treturn {\n\t\t\t\ttitle: this.roomName(room),\n\t\t\t\ttext: `${(settings.get('UI_Use_Real_Name') && user.name) || user.username}: ${notificationMessage}`,\n\t\t\t};\n\t\t}\n\n\t\treturn {\n\t\t\ttitle: (settings.get('UI_Use_Real_Name') && user.name) || user.username,\n\t\t\ttext: notificationMessage,\n\t\t};\n\t}\n\n\tgetAvatarPath(roomData, subData) {\n\t\tif (!roomData && !subData) {\n\t\t\treturn '';\n\t\t}\n\n\t\t// if coming from sidenav search\n\t\tif (roomData.name && roomData.avatarETag) {\n\t\t\treturn getUserAvatarURL(roomData.name, roomData.avatarETag);\n\t\t}\n\n\t\tif (this.isGroupChat(roomData)) {\n\t\t\treturn getAvatarURL({ username: roomData.uids.length + roomData.usernames.join() });\n\t\t}\n\n\t\tconst sub = subData || Subscriptions.findOne({ rid: roomData._id }, { fields: { name: 1 } });\n\n\t\tif (sub && sub.name) {\n\t\t\tconst user = Meteor.users.findOne({ username: sub.name }, { fields: { username: 1, avatarETag: 1 } });\n\t\t\treturn getUserAvatarURL(user?.username || sub.name, user?.avatarETag);\n\t\t}\n\n\t\tif (roomData) {\n\t\t\treturn getUserAvatarURL(roomData.name || this.roomName(roomData)); // rooms should have no name for direct messages...\n\t\t}\n\t}\n\n\tincludeInDashboard() {\n\t\treturn true;\n\t}\n\n\tisGroupChat(room) {\n\t\treturn room && room.uids && room.uids.length > 2;\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\n\nimport { settings } from '../../../settings';\nimport { getUserPreference, RoomTypeConfig } from '../../../utils';\n\nexport class FavoriteRoomType extends RoomTypeConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tidentifier: 'f',\n\t\t\torder: 20,\n\t\t\theader: 'favorite',\n\t\t\ticon: 'star',\n\t\t\tlabel: 'Favorites',\n\t\t});\n\t}\n\n\tcondition() {\n\t\treturn settings.get('Favorite_Rooms') && getUserPreference(Meteor.userId(), 'sidebarShowFavorites');\n\t}\n}\n","import { ConversationRoomType } from './conversation';\nimport { DirectMessageRoomType } from './direct';\nimport { FavoriteRoomType } from './favorite';\nimport { PrivateRoomType } from './private';\nimport { PublicRoomType } from './public';\nimport { UnreadRoomType } from './unread';\n\nexport { ConversationRoomType, DirectMessageRoomType, FavoriteRoomType, PrivateRoomType, PublicRoomType, UnreadRoomType };\n","import { Meteor } from 'meteor/meteor';\n\nimport { ChatRoom, ChatSubscription } from '../../../models';\nimport { openRoom } from '../../../ui-utils';\nimport { settings } from '../../../settings';\nimport { hasAtLeastOnePermission, hasPermission } from '../../../authorization';\nimport { getUserPreference, RoomSettingsEnum, RoomTypeConfig, RoomTypeRouteConfig, UiTextContext, RoomMemberActions } from '../../../utils';\nimport { getAvatarURL } from '../../../utils/lib/getAvatarURL';\n\nexport class PrivateRoomRoute extends RoomTypeRouteConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tname: 'group',\n\t\t\tpath: '/group/:name/:tab?/:context?',\n\t\t});\n\t}\n\n\taction(params) {\n\t\treturn openRoom('p', params.name);\n\t}\n}\n\nexport class PrivateRoomType extends RoomTypeConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tidentifier: 'p',\n\t\t\torder: 40,\n\t\t\ticon: 'hashtag-lock',\n\t\t\tlabel: 'Private_Groups',\n\t\t\troute: new PrivateRoomRoute(),\n\t\t});\n\t}\n\n\tgetIcon(roomData) {\n\t\tif (roomData.prid) {\n\t\t\treturn 'discussion';\n\t\t}\n\t\tif (roomData.teamMain) {\n\t\t\treturn 'team-lock';\n\t\t}\n\t\treturn this.icon;\n\t}\n\n\tfindRoom(identifier) {\n\t\tconst query = {\n\t\t\tt: 'p',\n\t\t\tname: identifier,\n\t\t};\n\n\t\treturn ChatRoom.findOne(query);\n\t}\n\n\troomName(roomData) {\n\t\tif (roomData.prid) {\n\t\t\treturn roomData.fname;\n\t\t}\n\t\tif (settings.get('UI_Allow_room_names_with_special_chars')) {\n\t\t\treturn roomData.fname || roomData.name;\n\t\t}\n\n\t\treturn roomData.name;\n\t}\n\n\tcondition() {\n\t\tconst groupByType = getUserPreference(Meteor.userId(), 'sidebarGroupByType');\n\t\treturn groupByType && hasPermission('view-p-room');\n\t}\n\n\tisGroupChat() {\n\t\treturn true;\n\t}\n\n\tcanAddUser(room) {\n\t\treturn hasAtLeastOnePermission(['add-user-to-any-p-room', 'add-user-to-joined-room'], room._id);\n\t}\n\n\tcanSendMessage(roomId) {\n\t\t// TODO: remove duplicated code\n\t\treturn (\n\t\t\tChatSubscription.find({\n\t\t\t\trid: roomId,\n\t\t\t}).count() > 0\n\t\t);\n\t}\n\n\tallowRoomSettingChange(room, setting) {\n\t\tswitch (setting) {\n\t\t\tcase RoomSettingsEnum.JOIN_CODE:\n\t\t\t\treturn false;\n\t\t\tcase RoomSettingsEnum.BROADCAST:\n\t\t\t\treturn room.broadcast;\n\t\t\tcase RoomSettingsEnum.READ_ONLY:\n\t\t\t\treturn !room.broadcast;\n\t\t\tcase RoomSettingsEnum.REACT_WHEN_READ_ONLY:\n\t\t\t\treturn !room.broadcast && room.ro;\n\t\t\tcase RoomSettingsEnum.E2E:\n\t\t\t\treturn settings.get('E2E_Enable') === true;\n\t\t\tcase RoomSettingsEnum.SYSTEM_MESSAGES:\n\t\t\tdefault:\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tallowMemberAction(room, action) {\n\t\tswitch (action) {\n\t\t\tcase RoomMemberActions.BLOCK:\n\t\t\t\treturn false;\n\t\t\tdefault:\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tenableMembersListProfile() {\n\t\treturn true;\n\t}\n\n\tgetUiText(context) {\n\t\tswitch (context) {\n\t\t\tcase UiTextContext.HIDE_WARNING:\n\t\t\t\treturn 'Hide_Group_Warning';\n\t\t\tcase UiTextContext.LEAVE_WARNING:\n\t\t\t\treturn 'Leave_Group_Warning';\n\t\t\tdefault:\n\t\t\t\treturn '';\n\t\t}\n\t}\n\n\tgetAvatarPath(roomData) {\n\t\treturn getAvatarURL({ roomId: roomData._id, cache: roomData.avatarETag });\n\t}\n\n\tincludeInDashboard() {\n\t\treturn true;\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\n\nimport { openRoom } from '../../../ui-utils';\nimport { ChatRoom, ChatSubscription } from '../../../models';\nimport { settings } from '../../../settings';\nimport { hasAtLeastOnePermission } from '../../../authorization';\nimport { getUserPreference, RoomTypeConfig, RoomTypeRouteConfig, RoomSettingsEnum, UiTextContext, RoomMemberActions } from '../../../utils';\nimport { getAvatarURL } from '../../../utils/lib/getAvatarURL';\n\nexport class PublicRoomRoute extends RoomTypeRouteConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tname: 'channel',\n\t\t\tpath: '/channel/:name/:tab?/:context?',\n\t\t});\n\t}\n\n\taction(params) {\n\t\treturn openRoom('c', params.name);\n\t}\n}\n\nexport class PublicRoomType extends RoomTypeConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tidentifier: 'c',\n\t\t\torder: 30,\n\t\t\ticon: 'hashtag',\n\t\t\tlabel: 'Channels',\n\t\t\troute: new PublicRoomRoute(),\n\t\t});\n\t}\n\n\tgetIcon(roomData) {\n\t\tif (roomData.prid) {\n\t\t\treturn 'discussion';\n\t\t}\n\t\tif (roomData.teamMain) {\n\t\t\treturn 'team';\n\t\t}\n\t\treturn this.icon;\n\t}\n\n\tfindRoom(identifier) {\n\t\tconst query = {\n\t\t\tt: 'c',\n\t\t\tname: identifier,\n\t\t};\n\t\treturn ChatRoom.findOne(query);\n\t}\n\n\troomName(roomData) {\n\t\tif (roomData.prid) {\n\t\t\treturn roomData.fname;\n\t\t}\n\t\tif (settings.get('UI_Allow_room_names_with_special_chars')) {\n\t\t\treturn roomData.fname || roomData.name;\n\t\t}\n\t\treturn roomData.name;\n\t}\n\n\tcondition() {\n\t\tconst groupByType = getUserPreference(Meteor.userId(), 'sidebarGroupByType');\n\t\treturn (\n\t\t\tgroupByType && (hasAtLeastOnePermission(['view-c-room', 'view-joined-room']) || settings.get('Accounts_AllowAnonymousRead') === true)\n\t\t);\n\t}\n\n\tshowJoinLink(roomId) {\n\t\treturn !!ChatRoom.findOne({ _id: roomId, t: 'c' });\n\t}\n\n\tincludeInRoomSearch() {\n\t\treturn true;\n\t}\n\n\tisGroupChat() {\n\t\treturn true;\n\t}\n\n\tincludeInDashboard() {\n\t\treturn true;\n\t}\n\n\tcanAddUser(room) {\n\t\treturn hasAtLeastOnePermission(['add-user-to-any-c-room', 'add-user-to-joined-room'], room._id);\n\t}\n\n\tcanSendMessage(roomId) {\n\t\tconst room = ChatRoom.findOne({ _id: roomId, t: 'c' }, { fields: { prid: 1 } });\n\t\tif (room.prid) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// TODO: remove duplicated code\n\t\treturn (\n\t\t\tChatSubscription.find({\n\t\t\t\trid: roomId,\n\t\t\t}).count() > 0\n\t\t);\n\t}\n\n\tenableMembersListProfile() {\n\t\treturn true;\n\t}\n\n\tallowRoomSettingChange(room, setting) {\n\t\tswitch (setting) {\n\t\t\tcase RoomSettingsEnum.BROADCAST:\n\t\t\t\treturn room.broadcast;\n\t\t\tcase RoomSettingsEnum.READ_ONLY:\n\t\t\t\treturn !room.broadcast;\n\t\t\tcase RoomSettingsEnum.REACT_WHEN_READ_ONLY:\n\t\t\t\treturn !room.broadcast && room.ro;\n\t\t\tcase RoomSettingsEnum.E2E:\n\t\t\t\treturn false;\n\t\t\tcase RoomSettingsEnum.SYSTEM_MESSAGES:\n\t\t\tdefault:\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tallowMemberAction(room, action) {\n\t\tswitch (action) {\n\t\t\tcase RoomMemberActions.BLOCK:\n\t\t\t\treturn false;\n\t\t\tdefault:\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tgetUiText(context) {\n\t\tswitch (context) {\n\t\t\tcase UiTextContext.HIDE_WARNING:\n\t\t\t\treturn 'Hide_Room_Warning';\n\t\t\tcase UiTextContext.LEAVE_WARNING:\n\t\t\t\treturn 'Leave_Room_Warning';\n\t\t\tdefault:\n\t\t\t\treturn '';\n\t\t}\n\t}\n\n\tgetAvatarPath(roomData) {\n\t\treturn getAvatarURL({ roomId: roomData._id, cache: roomData.avatarETag });\n\t}\n\n\tgetDiscussionType() {\n\t\treturn 'c';\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\n\nimport { getUserPreference, RoomTypeConfig } from '../../../utils';\n\nexport class UnreadRoomType extends RoomTypeConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tidentifier: 'unread',\n\t\t\torder: 10,\n\t\t\tlabel: 'Unread',\n\t\t});\n\n\t\tthis.unread = true;\n\t}\n\n\tcondition() {\n\t\treturn getUserPreference(Meteor.userId(), 'sidebarShowUnread');\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\n\nimport { MessageTypes } from '../../ui-utils';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(function () {\n\tMessageTypes.registerType({\n\t\tid: 'r',\n\t\tsystem: true,\n\t\tmessage: 'Room_name_changed',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\troom_name: message.msg,\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'au',\n\t\tsystem: true,\n\t\tmessage: 'User_added_by',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser_added: message.msg,\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'ru',\n\t\tsystem: true,\n\t\tmessage: 'User_removed_by',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser_removed: message.msg,\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'ul',\n\t\tsystem: true,\n\t\tmessage: 'User_left',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser_left: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'ult',\n\t\tsystem: true,\n\t\tmessage: 'User_left_team',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser_left: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'uj',\n\t\tsystem: true,\n\t\tmessage: 'User_joined_channel',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'ujt',\n\t\tsystem: true,\n\t\tmessage: 'User_joined_team',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'ut',\n\t\tsystem: true,\n\t\tmessage: 'User_joined_conversation',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'wm',\n\t\tsystem: true,\n\t\tmessage: 'Welcome',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'rm',\n\t\tsystem: true,\n\t\tmessage: 'Message_removed',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'rtc',\n\t\trender(message) {\n\t\t\treturn callbacks.run('renderRtcMessage', message);\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'user-muted',\n\t\tsystem: true,\n\t\tmessage: 'User_muted_by',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser_muted: message.msg,\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'user-unmuted',\n\t\tsystem: true,\n\t\tmessage: 'User_unmuted_by',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser_unmuted: message.msg,\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'subscription-role-added',\n\t\tsystem: true,\n\t\tmessage: '__username__was_set__role__by__user_by_',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tusername: message.msg,\n\t\t\t\trole: message.role,\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'subscription-role-removed',\n\t\tsystem: true,\n\t\tmessage: '__username__is_no_longer__role__defined_by__user_by_',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tusername: message.msg,\n\t\t\t\trole: message.role,\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'room-archived',\n\t\tsystem: true,\n\t\tmessage: 'This_room_has_been_archived_by__username_',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tusername: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'room-unarchived',\n\t\tsystem: true,\n\t\tmessage: 'This_room_has_been_unarchived_by__username_',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tusername: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'room-removed-read-only',\n\t\tsystem: true,\n\t\tmessage: 'room_removed_read_only',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'room-set-read-only',\n\t\tsystem: true,\n\t\tmessage: 'room_set_read_only',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'room-allowed-reacting',\n\t\tsystem: true,\n\t\tmessage: 'room_allowed_reacting',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'room-disallowed-reacting',\n\t\tsystem: true,\n\t\tmessage: 'room_disallowed_reacting',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tuser_by: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'room_e2e_enabled',\n\t\tsystem: true,\n\t\tmessage: 'This_room_encryption_has_been_enabled_by__username_',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tusername: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\tMessageTypes.registerType({\n\t\tid: 'room_e2e_disabled',\n\t\tsystem: true,\n\t\tmessage: 'This_room_encryption_has_been_disabled_by__username_',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tusername: message.u.username,\n\t\t\t};\n\t\t},\n\t});\n});\n\nexport const MessageTypesValues = [\n\t{\n\t\tkey: 'uj',\n\t\ti18nLabel: 'Message_HideType_uj',\n\t},\n\t{\n\t\tkey: 'ul',\n\t\ti18nLabel: 'Message_HideType_ul',\n\t},\n\t{\n\t\tkey: 'ru',\n\t\ti18nLabel: 'Message_HideType_ru',\n\t},\n\t{\n\t\tkey: 'au',\n\t\ti18nLabel: 'Message_HideType_au',\n\t},\n\t{\n\t\tkey: 'mute_unmute',\n\t\ti18nLabel: 'Message_HideType_mute_unmute',\n\t},\n\t{\n\t\tkey: 'r',\n\t\ti18nLabel: 'Message_HideType_r',\n\t},\n\t{\n\t\tkey: 'ut',\n\t\ti18nLabel: 'Message_HideType_ut',\n\t},\n\t{\n\t\tkey: 'wm',\n\t\ti18nLabel: 'Message_HideType_wm',\n\t},\n\t{\n\t\tkey: 'rm',\n\t\ti18nLabel: 'Message_HideType_rm',\n\t},\n\t{\n\t\tkey: 'subscription-role-added',\n\t\ti18nLabel: 'Message_HideType_subscription_role_added',\n\t},\n\t{\n\t\tkey: 'subscription-role-removed',\n\t\ti18nLabel: 'Message_HideType_subscription_role_removed',\n\t},\n\t{\n\t\tkey: 'room_archived',\n\t\ti18nLabel: 'Message_HideType_room_archived',\n\t},\n\t{\n\t\tkey: 'room_unarchived',\n\t\ti18nLabel: 'Message_HideType_room_unarchived',\n\t},\n\t{\n\t\tkey: 'room_changed_privacy',\n\t\ti18nLabel: 'Message_HideType_room_changed_privacy',\n\t},\n\t{\n\t\tkey: 'room_changed_avatar',\n\t\ti18nLabel: 'Message_HideType_room_changed_avatar',\n\t},\n\t{\n\t\tkey: 'room_changed_topic',\n\t\ti18nLabel: 'Message_HideType_room_changed_topic',\n\t},\n\t{\n\t\tkey: 'room_e2e_enabled',\n\t\ti18nLabel: 'Message_HideType_room_enabled_encryption',\n\t},\n\t{\n\t\tkey: 'room_e2e_disabled',\n\t\ti18nLabel: 'Message_HideType_room_disabled_encryption',\n\t},\n\t{\n\t\tkey: 'room-removed-read-only',\n\t\ti18nLabel: 'Message_HideType_room_removed_read_only',\n\t},\n\t{\n\t\tkey: 'room-set-read-only',\n\t\ti18nLabel: 'Message_HideType_room_set_read_only',\n\t},\n\t{\n\t\tkey: 'room-disallowed-reacting',\n\t\ti18nLabel: 'Message_HideType_room_disallowed_reacting',\n\t},\n\t{\n\t\tkey: 'room-allowed-reacting',\n\t\ti18nLabel: 'Message_HideType_room_allowed_reacting',\n\t},\n];\n","import { roomTypes } from '../../utils';\nimport {\n\tConversationRoomType,\n\tDirectMessageRoomType,\n\tFavoriteRoomType,\n\tPrivateRoomType,\n\tPublicRoomType,\n\tUnreadRoomType,\n} from '../lib/roomTypes';\n\nroomTypes.add(new UnreadRoomType());\nroomTypes.add(new FavoriteRoomType());\nroomTypes.add(new ConversationRoomType());\nroomTypes.add(new PublicRoomType());\nroomTypes.add(new PrivateRoomType());\nroomTypes.add(new DirectMessageRoomType());\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/index.js');\n}\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/index.js');\n}\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Session } from 'meteor/session';\nimport _ from 'underscore';\n\nimport { appLayout } from '../../../../client/lib/appLayout';\nimport { SideNav } from './SideNav';\n\nexport const AccountBox = (function () {\n\tlet status = 0;\n\tconst items = new ReactiveVar([]);\n\tfunction setStatus(status, statusText) {\n\t\treturn Meteor.call('setUserStatus', status, statusText);\n\t}\n\tfunction open() {\n\t\tif (SideNav.flexStatus()) {\n\t\t\tSideNav.closeFlex();\n\t\t\treturn;\n\t\t}\n\t\tstatus = 1;\n\t}\n\tfunction close() {\n\t\tstatus = 0;\n\t}\n\tfunction toggle() {\n\t\tif (status) {\n\t\t\treturn close();\n\t\t}\n\t\treturn open();\n\t}\n\tfunction openFlex() {\n\t\tstatus = 0;\n\t}\n\n\t/*\n\t * @param newOption:\n\t *   name: Button label\n\t *   icon: Button icon\n\t *   class: Class of the item\n\t *   permissions: Which permissions a user should have (all of them) to see this item\n\t */\n\tfunction addItem(newItem) {\n\t\treturn Tracker.nonreactive(function () {\n\t\t\tconst actual = items.get();\n\t\t\tactual.push(newItem);\n\t\t\treturn items.set(actual);\n\t\t});\n\t}\n\tfunction checkCondition(item) {\n\t\treturn item.condition == null || item.condition();\n\t}\n\tfunction getItems() {\n\t\treturn _.filter(items.get(), function (item) {\n\t\t\tif (checkCondition(item)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t});\n\t}\n\tfunction addRoute(newRoute, router, wait = () => {}) {\n\t\tif (router == null) {\n\t\t\trouter = FlowRouter;\n\t\t}\n\t\tconst container = newRoute.customContainer ? 'pageCustomContainer' : 'pageContainer';\n\t\tconst routeConfig = {\n\t\t\tcenter: container,\n\t\t\tpageTemplate: newRoute.pageTemplate,\n\t\t};\n\t\tif (newRoute.i18nPageTitle != null) {\n\t\t\trouteConfig.i18nPageTitle = newRoute.i18nPageTitle;\n\t\t}\n\t\tif (newRoute.pageTitle != null) {\n\t\t\trouteConfig.pageTitle = newRoute.pageTitle;\n\t\t}\n\t\treturn router.route(newRoute.path, {\n\t\t\tname: newRoute.name,\n\t\t\tasync action() {\n\t\t\t\tawait wait();\n\t\t\t\tSession.set('openedRoom');\n\t\t\t\tappLayout.renderMainLayout(routeConfig);\n\t\t\t},\n\t\t\ttriggersEnter: [\n\t\t\t\tfunction () {\n\t\t\t\t\tif (newRoute.sideNav != null) {\n\t\t\t\t\t\tSideNav.setFlex(newRoute.sideNav);\n\t\t\t\t\t\tSideNav.openFlex();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t],\n\t\t});\n\t}\n\treturn {\n\t\tsetStatus,\n\t\ttoggle,\n\t\topen,\n\t\tclose,\n\t\topenFlex,\n\t\taddRoute,\n\t\taddItem,\n\t\tgetItems,\n\t};\n})();\n","import { Meteor } from 'meteor/meteor';\nimport { Match } from 'meteor/check';\nimport { Accounts } from 'meteor/accounts-base';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport { HTTP } from 'meteor/http';\n\nimport { settings } from '../../../settings';\n\nexport class IframeLogin {\n\tconstructor() {\n\t\tthis.enabled = false;\n\t\tthis.reactiveIframeUrl = new ReactiveVar();\n\t\tthis.reactiveEnabled = new ReactiveVar();\n\t\tthis.iframeUrl = undefined;\n\t\tthis.apiUrl = undefined;\n\t\tthis.apiMethod = undefined;\n\n\t\tTracker.autorun((c) => {\n\t\t\tthis.enabled = settings.get('Accounts_iframe_enabled');\n\t\t\tthis.reactiveEnabled.set(this.enabled);\n\n\t\t\tthis.iframeUrl = settings.get('Accounts_iframe_url');\n\t\t\tthis.apiUrl = settings.get('Accounts_Iframe_api_url');\n\t\t\tthis.apiMethod = settings.get('Accounts_Iframe_api_method');\n\n\t\t\tif (this.enabled === false) {\n\t\t\t\treturn c.stop();\n\t\t\t}\n\n\t\t\tif (this.enabled === true && this.iframeUrl && this.apiUrl && this.apiMethod) {\n\t\t\t\tc.stop();\n\t\t\t\tif (!Accounts._storedLoginToken()) {\n\t\t\t\t\tthis.tryLogin(() => {});\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\ttryLogin(callback) {\n\t\tif (!this.enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.iframeUrl || !this.apiUrl || !this.apiMethod) {\n\t\t\treturn;\n\t\t}\n\n\t\tconsole.log('tryLogin');\n\t\tconst options = {\n\t\t\tbeforeSend: (xhr) => {\n\t\t\t\txhr.withCredentials = true;\n\t\t\t},\n\t\t};\n\n\t\tlet { iframeUrl } = this;\n\t\tlet separator = '?';\n\t\tif (iframeUrl.indexOf('?') > -1) {\n\t\t\tseparator = '&';\n\t\t}\n\n\t\tif (navigator.userAgent.indexOf('Electron') > -1) {\n\t\t\tiframeUrl += `${separator}client=electron`;\n\t\t}\n\n\t\tHTTP.call(this.apiMethod, this.apiUrl, options, (error, result) => {\n\t\t\tconsole.log(error, result);\n\t\t\tif (result && result.data && (result.data.token || result.data.loginToken)) {\n\t\t\t\tthis.loginWithToken(result.data, (error, result) => {\n\t\t\t\t\tif (error) {\n\t\t\t\t\t\tthis.reactiveIframeUrl.set(iframeUrl);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.reactiveIframeUrl.set();\n\t\t\t\t\t}\n\t\t\t\t\tcallback(error, result);\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.reactiveIframeUrl.set(iframeUrl);\n\t\t\t\tcallback(error, result);\n\t\t\t}\n\t\t});\n\t}\n\n\tloginWithToken(tokenData, callback) {\n\t\tif (!this.enabled) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (Match.test(tokenData, String)) {\n\t\t\ttokenData = {\n\t\t\t\ttoken: tokenData,\n\t\t\t};\n\t\t}\n\n\t\tconsole.log('loginWithToken');\n\n\t\tif (tokenData.loginToken) {\n\t\t\treturn Meteor.loginWithToken(tokenData.loginToken, callback);\n\t\t}\n\n\t\tAccounts.callLoginMethod({\n\t\t\tmethodArguments: [\n\t\t\t\t{\n\t\t\t\t\tiframe: true,\n\t\t\t\t\ttoken: tokenData.token,\n\t\t\t\t},\n\t\t\t],\n\t\t\tuserCallback: callback,\n\t\t});\n\t}\n}\n\nexport const iframeLogin = new IframeLogin();\n","import _ from 'underscore';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport moment from 'moment';\nimport mem from 'mem';\nimport { Meteor } from 'meteor/meteor';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport { Session } from 'meteor/session';\n\nimport { messageArgs } from './messageArgs';\nimport { roomTypes } from '../../../utils/client';\nimport { Messages, Rooms, Subscriptions } from '../../../models/client';\nimport { hasAtLeastOnePermission, hasPermission } from '../../../authorization/client';\nimport { modal } from './modal';\nimport { imperativeModal } from '../../../../client/lib/imperativeModal';\nimport ReactionList from '../../../../client/views/room/modals/ReactionListModal';\nimport { call } from '../../../../client/lib/utils/call';\nimport { canDeleteMessage } from '../../../../client/lib/utils/canDeleteMessage';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\n\nexport const addMessageToList = (messagesList, message) => {\n\t// checks if the message is not already on the list\n\tif (!messagesList.find(({ _id }) => _id === message._id)) {\n\t\tmessagesList.push(message);\n\t}\n\n\treturn messagesList;\n};\n\nexport const MessageAction = new (class {\n\t/*\n  \tconfig expects the following keys (only id is mandatory):\n  \t\tid (mandatory)\n  \t\ticon: string\n  \t\tlabel: string\n  \t\taction: function(event, instance)\n  \t\tcondition: function(message)\n\t\t\torder: integer\n\t\t\tgroup: string (message or menu)\n   */\n\n\tconstructor() {\n\t\tthis.buttons = new ReactiveVar({});\n\t}\n\n\taddButton(config) {\n\t\tif (!config || !config.id) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!config.group) {\n\t\t\tconfig.group = 'menu';\n\t\t}\n\n\t\tif (config.condition) {\n\t\t\tconfig.condition = mem(config.condition, { maxAge: 1000, cacheKey: JSON.stringify });\n\t\t}\n\n\t\treturn Tracker.nonreactive(() => {\n\t\t\tconst btns = this.buttons.get();\n\t\t\tbtns[config.id] = config;\n\t\t\tmem.clear(this._getButtons);\n\t\t\tmem.clear(this._getButtonsByGroup);\n\t\t\treturn this.buttons.set(btns);\n\t\t});\n\t}\n\n\tremoveButton(id) {\n\t\treturn Tracker.nonreactive(() => {\n\t\t\tconst btns = this.buttons.get();\n\t\t\tdelete btns[id];\n\t\t\tmem.clear(this._getButtons);\n\t\t\tmem.clear(this._getButtonsByGroup);\n\t\t\treturn this.buttons.set(btns);\n\t\t});\n\t}\n\n\tupdateButton(id, config) {\n\t\treturn Tracker.nonreactive(() => {\n\t\t\tconst btns = this.buttons.get();\n\t\t\tif (btns[id]) {\n\t\t\t\tbtns[id] = _.extend(btns[id], config);\n\t\t\t\tmem.clear(this._getButtons);\n\t\t\t\tmem.clear(this._getButtonsByGroup);\n\t\t\t\treturn this.buttons.set(btns);\n\t\t\t}\n\t\t});\n\t}\n\n\tgetButtonById(id) {\n\t\tconst allButtons = this.buttons.get();\n\t\treturn allButtons[id];\n\t}\n\n\t_getButtons = mem(function () {\n\t\treturn _.sortBy(_.toArray(this.buttons.get()), 'order');\n\t});\n\n\t_getButtonsByGroup = mem(function (group) {\n\t\treturn this._getButtons().filter((button) => (Array.isArray(button.group) ? button.group.includes(group) : button.group === group));\n\t});\n\n\tgetButtons(message, context, group) {\n\t\tconst allButtons = group ? this._getButtonsByGroup(group) : this._getButtons();\n\n\t\tif (message) {\n\t\t\treturn allButtons.filter(function (button) {\n\t\t\t\tif (button.context == null || button.context.includes(context)) {\n\t\t\t\t\treturn button.condition == null || button.condition(message, context);\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t});\n\t\t}\n\t\treturn allButtons;\n\t}\n\n\tresetButtons() {\n\t\tmem.clear(this._getButtons);\n\t\tmem.clear(this._getButtonsByGroup);\n\t\treturn this.buttons.set({});\n\t}\n\n\tasync getPermaLink(msgId) {\n\t\tif (!msgId) {\n\t\t\tthrow new Error('invalid-parameter');\n\t\t}\n\n\t\tconst msg = Messages.findOne(msgId) || (await call('getSingleMessage', msgId));\n\t\tif (!msg) {\n\t\t\tthrow new Error('message-not-found');\n\t\t}\n\t\tconst roomData = Rooms.findOne({\n\t\t\t_id: msg.rid,\n\t\t});\n\n\t\tif (!roomData) {\n\t\t\tthrow new Error('room-not-found');\n\t\t}\n\n\t\tconst subData = Subscriptions.findOne({ 'rid': roomData._id, 'u._id': Meteor.userId() });\n\t\tconst roomURL = roomTypes.getURL(roomData.t, subData || roomData);\n\t\treturn `${roomURL}?msg=${msgId}`;\n\t}\n})();\n\nMeteor.startup(async function () {\n\tconst { chatMessages } = await import('../../../ui');\n\n\tconst getChatMessagesFrom = (msg) => {\n\t\tconst { rid = Session.get('openedRoom'), tmid = msg._id } = msg;\n\n\t\treturn chatMessages[`${rid}-${tmid}`] || chatMessages[rid];\n\t};\n\n\tMessageAction.addButton({\n\t\tid: 'reply-directly',\n\t\ticon: 'reply-directly',\n\t\tlabel: 'Reply_in_direct_message',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\taction() {\n\t\t\tconst { msg } = messageArgs(this);\n\t\t\troomTypes.openRouteLink(\n\t\t\t\t'd',\n\t\t\t\t{ name: msg.u.username },\n\t\t\t\t{\n\t\t\t\t\t...FlowRouter.current().queryParams,\n\t\t\t\t\treply: msg._id,\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\tcondition({ subscription, room, msg, u }) {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (room.t === 'd' || room.t === 'l') {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t// Check if we already have a DM started with the message user (not ourselves) or we can start one\n\t\t\tif (u._id !== msg.u._id && !hasPermission('create-d')) {\n\t\t\t\tconst dmRoom = Rooms.findOne({ _id: [u._id, msg.u._id].sort().join('') });\n\t\t\t\tif (!dmRoom || !Subscriptions.findOne({ 'rid': dmRoom._id, 'u._id': u._id })) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\torder: 0,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'quote-message',\n\t\ticon: 'quote',\n\t\tlabel: 'Quote',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tconst { input } = getChatMessagesFrom(message);\n\t\t\tconst $input = $(input);\n\n\t\t\tlet messages = $input.data('reply') || [];\n\n\t\t\tmessages = addMessageToList(messages, message, input);\n\n\t\t\t$input.focus().data('mention-user', false).data('reply', messages).trigger('dataChange');\n\t\t},\n\t\tcondition({ subscription, room }) {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst isLivechatRoom = roomTypes.isLivechatRoom(room.t);\n\t\t\tif (isLivechatRoom) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\torder: -3,\n\t\tgroup: ['message', 'menu'],\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'permalink',\n\t\ticon: 'permalink',\n\t\tlabel: 'Get_link',\n\t\tclasses: 'clipboard',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\tasync action() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tconst permalink = await MessageAction.getPermaLink(message._id);\n\t\t\tnavigator.clipboard.writeText(permalink);\n\t\t\tdispatchToastMessage({ type: 'success', message: TAPi18n.__('Copied') });\n\t\t},\n\t\tcondition({ subscription }) {\n\t\t\treturn !!subscription;\n\t\t},\n\t\torder: 4,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'copy',\n\t\ticon: 'copy',\n\t\tlabel: 'Copy',\n\t\tclasses: 'clipboard',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\taction() {\n\t\t\tconst {\n\t\t\t\tmsg: { msg },\n\t\t\t} = messageArgs(this);\n\t\t\tnavigator.clipboard.writeText(msg);\n\t\t\tdispatchToastMessage({ type: 'success', message: TAPi18n.__('Copied') });\n\t\t},\n\t\tcondition({ subscription }) {\n\t\t\treturn !!subscription;\n\t\t},\n\t\torder: 5,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'edit-message',\n\t\ticon: 'edit',\n\t\tlabel: 'Edit',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\taction() {\n\t\t\tconst { msg } = messageArgs(this);\n\t\t\tgetChatMessagesFrom(msg).edit(document.getElementById(msg.tmid ? `thread-${msg._id}` : msg._id));\n\t\t},\n\t\tcondition({ msg: message, subscription, settings }) {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst hasPermission = hasAtLeastOnePermission('edit-message', message.rid);\n\t\t\tconst isEditAllowed = settings.Message_AllowEditing;\n\t\t\tconst editOwn = message.u && message.u._id === Meteor.userId();\n\t\t\tif (!(hasPermission || (isEditAllowed && editOwn))) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst blockEditInMinutes = settings.Message_AllowEditing_BlockEditInMinutes;\n\t\t\tif (blockEditInMinutes) {\n\t\t\t\tlet msgTs;\n\t\t\t\tif (message.ts != null) {\n\t\t\t\t\tmsgTs = moment(message.ts);\n\t\t\t\t}\n\t\t\t\tlet currentTsDiff;\n\t\t\t\tif (msgTs != null) {\n\t\t\t\t\tcurrentTsDiff = moment().diff(msgTs, 'minutes');\n\t\t\t\t}\n\t\t\t\treturn currentTsDiff < blockEditInMinutes;\n\t\t\t}\n\t\t\treturn true;\n\t\t},\n\t\torder: 6,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'delete-message',\n\t\ticon: 'trash',\n\t\tlabel: 'Delete',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\tcolor: 'alert',\n\t\taction() {\n\t\t\tconst { msg } = messageArgs(this);\n\t\t\tgetChatMessagesFrom(msg).confirmDeleteMsg(msg);\n\t\t},\n\t\tcondition({ msg: message, subscription, room }) {\n\t\t\tif (!subscription) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst isLivechatRoom = roomTypes.isLivechatRoom(room.t);\n\t\t\tif (isLivechatRoom) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn canDeleteMessage({\n\t\t\t\trid: message.rid,\n\t\t\t\tts: message.ts,\n\t\t\t\tuid: message.u._id,\n\t\t\t});\n\t\t},\n\t\torder: 18,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'report-message',\n\t\ticon: 'report',\n\t\tlabel: 'Report',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\tcolor: 'alert',\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tmodal.open(\n\t\t\t\t{\n\t\t\t\t\ttitle: TAPi18n.__('Report_this_message_question_mark'),\n\t\t\t\t\ttext: message.msg,\n\t\t\t\t\tinputPlaceholder: TAPi18n.__('Why_do_you_want_to_report_question_mark'),\n\t\t\t\t\ttype: 'input',\n\t\t\t\t\tshowCancelButton: true,\n\t\t\t\t\tconfirmButtonColor: '#DD6B55',\n\t\t\t\t\tconfirmButtonText: TAPi18n.__('Report_exclamation_mark'),\n\t\t\t\t\tcancelButtonText: TAPi18n.__('Cancel'),\n\t\t\t\t\tcloseOnConfirm: false,\n\t\t\t\t\thtml: false,\n\t\t\t\t},\n\t\t\t\t(inputValue) => {\n\t\t\t\t\tif (inputValue === false) {\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!inputValue.trim()) {\n\t\t\t\t\t\tmodal.showInputError(TAPi18n.__('You_need_to_write_something'));\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\n\t\t\t\t\tMeteor.call('reportMessage', message._id, inputValue);\n\n\t\t\t\t\tmodal.open({\n\t\t\t\t\t\ttitle: TAPi18n.__('Report_sent'),\n\t\t\t\t\t\ttext: TAPi18n.__('Thank_you_exclamation_mark'),\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\ttimer: 1000,\n\t\t\t\t\t\tshowConfirmButton: false,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t);\n\t\t},\n\t\tcondition({ subscription, room }) {\n\t\t\tconst isLivechatRoom = roomTypes.isLivechatRoom(room.t);\n\t\t\tif (isLivechatRoom) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn Boolean(subscription);\n\t\t},\n\t\torder: 17,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'reaction-list',\n\t\ticon: 'emoji',\n\t\tlabel: 'Reactions',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\taction(_, { tabBar, rid }) {\n\t\t\tconst {\n\t\t\t\tmsg: { reactions },\n\t\t\t} = messageArgs(this);\n\n\t\t\timperativeModal.open({\n\t\t\t\tcomponent: ReactionList,\n\t\t\t\tprops: { reactions, rid, tabBar, onClose: imperativeModal.close },\n\t\t\t});\n\t\t},\n\t\tcondition({ msg: { reactions } }) {\n\t\t\treturn !!reactions;\n\t\t},\n\t\torder: 18,\n\t\tgroup: 'menu',\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Blaze } from 'meteor/blaze';\nimport { v4 as uuidv4 } from 'uuid';\nimport differenceInMilliseconds from 'date-fns/differenceInMilliseconds';\nimport { Emitter } from '@rocket.chat/emitter';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\n\nimport { RoomManager } from './RoomManager';\nimport { readMessage } from './readMessages';\nimport { renderMessageBody } from '../../../../client/lib/utils/renderMessageBody';\nimport { getConfig } from '../../../../client/lib/utils/getConfig';\nimport { ChatMessage, ChatSubscription, ChatRoom } from '../../../models';\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\nimport { filterMarkdown } from '../../../markdown/lib/markdown';\nimport { getUserPreference } from '../../../utils/client';\nimport { onClientMessageReceived } from '../../../../client/lib/onClientMessageReceived';\n\nexport const normalizeThreadMessage = ({ ...message }) => {\n\tif (message.msg) {\n\t\tmessage.msg = filterMarkdown(message.msg);\n\t\tdelete message.mentions;\n\t\treturn renderMessageBody(message).replace(/<br\\s?\\\\?>/g, ' ');\n\t}\n\n\tif (message.attachments) {\n\t\tconst attachment = message.attachments.find((attachment) => attachment.title || attachment.description);\n\n\t\tif (attachment && attachment.description) {\n\t\t\treturn escapeHTML(attachment.description);\n\t\t}\n\n\t\tif (attachment && attachment.title) {\n\t\t\treturn escapeHTML(attachment.title);\n\t\t}\n\t}\n};\n\nexport const waitUntilWrapperExists = async (selector = '.messages-box .wrapper') =>\n\tdocument.querySelector(selector) ||\n\tnew Promise((resolve) => {\n\t\tconst observer = new MutationObserver(function (mutations, obs) {\n\t\t\tconst element = document.querySelector(selector);\n\t\t\tif (element) {\n\t\t\t\tobs.disconnect(); // stop observing\n\t\t\t\treturn resolve(element);\n\t\t\t}\n\t\t});\n\t\tobserver.observe(document, {\n\t\t\tchildList: true,\n\t\t\tsubtree: true,\n\t\t});\n\t});\n\nexport const upsertMessage = async ({ msg, subscription, uid = Tracker.nonreactive(() => Meteor.userId()) }, collection = ChatMessage) => {\n\tconst userId = msg.u && msg.u._id;\n\n\tif (subscription && subscription.ignored && subscription.ignored.indexOf(userId) > -1) {\n\t\tmsg.ignored = true;\n\t}\n\n\t// const roles = [\n\t// \t(userId && UserRoles.findOne(userId, { fields: { roles: 1 } })) || {},\n\t// \t(userId && RoomRoles.findOne({ rid: msg.rid, 'u._id': userId })) || {},\n\t// ].map((e) => e.roles);\n\t// msg.roles = _.union.apply(_.union, roles);\n\n\tif (msg.t === 'e2e' && !msg.file) {\n\t\tmsg.e2e = 'pending';\n\t}\n\tmsg = (await onClientMessageReceived(msg)) || msg;\n\n\tconst { _id, ...messageToUpsert } = msg;\n\n\tif (msg.tcount) {\n\t\tcollection.direct.update(\n\t\t\t{ tmid: _id },\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\tfollowing: msg.replies && msg.replies.indexOf(uid) > -1,\n\t\t\t\t\tthreadMsg: normalizeThreadMessage(messageToUpsert),\n\t\t\t\t\trepliesCount: msg.tcount,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{ multi: true },\n\t\t);\n\t}\n\n\treturn collection.direct.upsert({ _id }, messageToUpsert);\n};\n\nexport function upsertMessageBulk({ msgs, subscription }, collection = ChatMessage) {\n\tconst uid = Tracker.nonreactive(() => Meteor.userId());\n\tconst { queries } = ChatMessage;\n\tcollection.queries = [];\n\tmsgs.forEach((msg, index) => {\n\t\tif (index === msgs.length - 1) {\n\t\t\tChatMessage.queries = queries;\n\t\t}\n\t\tupsertMessage({ msg, subscription, uid }, collection);\n\t});\n}\n\nconst defaultLimit = parseInt(getConfig('roomListLimit')) || 50;\n\nconst waitAfterFlush = (fn) => setTimeout(() => Tracker.afterFlush(fn), 10);\n\nexport const RoomHistoryManager = new (class extends Emitter {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.histories = {};\n\t\tthis.requestsList = [];\n\t}\n\n\tgetRoom(rid) {\n\t\tif (!this.histories[rid]) {\n\t\t\tthis.histories[rid] = {\n\t\t\t\thasMore: new ReactiveVar(true),\n\t\t\t\thasMoreNext: new ReactiveVar(false),\n\t\t\t\tisLoading: new ReactiveVar(false),\n\t\t\t\tunreadNotLoaded: new ReactiveVar(0),\n\t\t\t\tfirstUnread: new ReactiveVar(),\n\t\t\t\tloaded: undefined,\n\t\t\t};\n\t\t}\n\n\t\treturn this.histories[rid];\n\t}\n\n\tasync queue() {\n\t\treturn new Promise((resolve) => {\n\t\t\tconst requestId = uuidv4();\n\t\t\tconst done = () => {\n\t\t\t\tthis.lastRequest = new Date();\n\t\t\t\tresolve();\n\t\t\t};\n\t\t\tif (this.requestsList.length === 0) {\n\t\t\t\treturn this.run(done);\n\t\t\t}\n\t\t\tthis.requestsList.push(requestId);\n\t\t\tthis.once(requestId, done);\n\t\t});\n\t}\n\n\trun(fn) {\n\t\tconst difference = differenceInMilliseconds(new Date(), this.lastRequest);\n\t\tif (!this.lastRequest || difference > 500) {\n\t\t\treturn fn();\n\t\t}\n\t\treturn setTimeout(fn, 500 - difference);\n\t}\n\n\tunqueue() {\n\t\tconst requestId = this.requestsList.pop();\n\t\tif (!requestId) {\n\t\t\treturn;\n\t\t}\n\t\tthis.run(() => this.emit(requestId));\n\t}\n\n\tasync getMore(rid, limit = defaultLimit) {\n\t\tlet ts;\n\t\tconst room = this.getRoom(rid);\n\n\t\tif (room.hasMore.curValue !== true) {\n\t\t\treturn;\n\t\t}\n\n\t\troom.isLoading.set(true);\n\n\t\tawait this.queue();\n\n\t\t// ScrollListener.setLoader true\n\t\tconst lastMessage = ChatMessage.findOne({ rid, _hidden: { $ne: true } }, { sort: { ts: 1 } });\n\t\t// lastMessage ?= ChatMessage.findOne({rid: rid}, {sort: {ts: 1}})\n\n\t\tif (lastMessage) {\n\t\t\t({ ts } = lastMessage);\n\t\t} else {\n\t\t\tts = undefined;\n\t\t}\n\n\t\tlet ls = undefined;\n\t\tlet typeName = undefined;\n\n\t\tconst subscription = ChatSubscription.findOne({ rid });\n\t\tif (subscription) {\n\t\t\t({ ls } = subscription);\n\t\t\ttypeName = subscription.t + subscription.name;\n\t\t} else {\n\t\t\tconst curRoomDoc = ChatRoom.findOne({ _id: rid });\n\t\t\ttypeName = (curRoomDoc ? curRoomDoc.t : undefined) + (curRoomDoc ? curRoomDoc.name : undefined);\n\t\t}\n\n\t\tconst showMessageInMainThread = getUserPreference(Meteor.userId(), 'showMessageInMainThread', false);\n\t\tconst result = await callWithErrorHandling('loadHistory', rid, ts, limit, ls, showMessageInMainThread);\n\n\t\tthis.unqueue();\n\n\t\tlet previousHeight;\n\t\tlet scroll;\n\t\tconst { messages = [] } = result;\n\t\troom.unreadNotLoaded.set(result.unreadNotLoaded);\n\t\troom.firstUnread.set(result.firstUnread);\n\n\t\tconst wrapper = await waitUntilWrapperExists();\n\n\t\tif (wrapper) {\n\t\t\tpreviousHeight = wrapper.scrollHeight;\n\t\t\tscroll = wrapper.scrollTop;\n\t\t}\n\n\t\tupsertMessageBulk({\n\t\t\tmsgs: messages.filter((msg) => msg.t !== 'command'),\n\t\t\tsubscription,\n\t\t});\n\n\t\tif (!room.loaded) {\n\t\t\troom.loaded = 0;\n\t\t}\n\n\t\tconst visibleMessages = messages.filter((msg) => !msg.tmid || showMessageInMainThread || msg.tshow);\n\n\t\troom.loaded += visibleMessages.length;\n\n\t\tif (messages.length < limit) {\n\t\t\troom.hasMore.set(false);\n\t\t}\n\n\t\tif (room.hasMore.get() && (visibleMessages.length === 0 || room.loaded < limit)) {\n\t\t\treturn this.getMore(rid);\n\t\t}\n\n\t\twaitAfterFlush(() => {\n\t\t\tconst heightDiff = wrapper.scrollHeight - previousHeight;\n\t\t\twrapper.scrollTop = scroll + heightDiff;\n\t\t});\n\n\t\troom.isLoading.set(false);\n\t\twaitAfterFlush(() => {\n\t\t\treadMessage.refreshUnreadMark(rid);\n\t\t\treturn RoomManager.updateMentionsMarksOfRoom(typeName);\n\t\t});\n\t}\n\n\tasync getMoreNext(rid, limit = defaultLimit) {\n\t\tconst room = this.getRoom(rid);\n\t\tif (room.hasMoreNext.curValue !== true) {\n\t\t\treturn;\n\t\t}\n\n\t\tawait this.queue();\n\t\tconst instance = Blaze.getView($('.messages-box .wrapper')[0]).templateInstance();\n\t\tinstance.atBottom = false;\n\n\t\troom.isLoading.set(true);\n\n\t\tconst lastMessage = ChatMessage.findOne({ rid, _hidden: { $ne: true } }, { sort: { ts: -1 } });\n\n\t\tlet typeName = undefined;\n\n\t\tconst subscription = ChatSubscription.findOne({ rid });\n\t\tif (subscription) {\n\t\t\t// const { ls } = subscription;\n\t\t\ttypeName = subscription.t + subscription.name;\n\t\t} else {\n\t\t\tconst curRoomDoc = ChatRoom.findOne({ _id: rid });\n\t\t\ttypeName = (curRoomDoc ? curRoomDoc.t : undefined) + (curRoomDoc ? curRoomDoc.name : undefined);\n\t\t}\n\n\t\tconst { ts } = lastMessage;\n\n\t\tif (ts) {\n\t\t\tconst result = await callWithErrorHandling('loadNextMessages', rid, ts, limit);\n\t\t\tupsertMessageBulk({\n\t\t\t\tmsgs: Array.from(result.messages).filter((msg) => msg.t !== 'command'),\n\t\t\t\tsubscription,\n\t\t\t});\n\n\t\t\tMeteor.defer(() => RoomManager.updateMentionsMarksOfRoom(typeName));\n\n\t\t\troom.isLoading.set(false);\n\t\t\tif (!room.loaded) {\n\t\t\t\troom.loaded = 0;\n\t\t\t}\n\n\t\t\troom.loaded += result.messages.length;\n\t\t\tif (result.messages.length < limit) {\n\t\t\t\troom.hasMoreNext.set(false);\n\t\t\t}\n\t\t}\n\t\tawait this.unqueue();\n\t}\n\n\tasync getSurroundingMessages(message, limit = defaultLimit) {\n\t\tif (!message || !message.rid) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst w = await waitUntilWrapperExists();\n\n\t\tconst instance = Blaze.getView(w).templateInstance();\n\n\t\tif (ChatMessage.findOne({ _id: message._id, _hidden: { $ne: true } })) {\n\t\t\tconst msgElement = $(`#${message._id}`, w);\n\t\t\tif (msgElement.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst wrapper = $('.messages-box .wrapper');\n\t\t\tconst pos = wrapper.scrollTop() + msgElement.offset().top - wrapper.height() / 2;\n\t\t\twrapper.animate(\n\t\t\t\t{\n\t\t\t\t\tscrollTop: pos,\n\t\t\t\t},\n\t\t\t\t500,\n\t\t\t);\n\n\t\t\treturn setTimeout(() => msgElement.removeClass('highlight'), 500);\n\t\t}\n\n\t\tconst room = this.getRoom(message.rid);\n\t\troom.isLoading.set(true);\n\t\tlet typeName = undefined;\n\n\t\tconst subscription = ChatSubscription.findOne({ rid: message.rid });\n\t\tif (subscription) {\n\t\t\t// const { ls } = subscription;\n\t\t\ttypeName = subscription.t + subscription.name;\n\t\t} else {\n\t\t\tconst curRoomDoc = ChatRoom.findOne({ _id: message.rid });\n\t\t\ttypeName = (curRoomDoc ? curRoomDoc.t : undefined) + (curRoomDoc ? curRoomDoc.name : undefined);\n\t\t}\n\n\t\treturn Meteor.call('loadSurroundingMessages', message, limit, function (err, result) {\n\t\t\tif (!result || !result.messages) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tChatMessage.remove({ rid: message.rid });\n\t\t\tfor (const msg of Array.from(result.messages)) {\n\t\t\t\tif (msg.t !== 'command') {\n\t\t\t\t\tupsertMessage({ msg, subscription });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treadMessage.refreshUnreadMark(message.rid);\n\t\t\tRoomManager.updateMentionsMarksOfRoom(typeName);\n\n\t\t\tTracker.afterFlush(() => {\n\t\t\t\tconst wrapper = $('.messages-box .wrapper');\n\t\t\t\tconst msgElement = $(`#${message._id}`, wrapper);\n\t\t\t\tconst pos = wrapper.scrollTop() + msgElement.offset().top - wrapper.height() / 2;\n\t\t\t\twrapper.animate(\n\t\t\t\t\t{\n\t\t\t\t\t\tscrollTop: pos,\n\t\t\t\t\t},\n\t\t\t\t\t500,\n\t\t\t\t);\n\n\t\t\t\tmsgElement.addClass('highlight');\n\t\t\t\troom.isLoading.set(false);\n\t\t\t\tconst messages = wrapper[0];\n\t\t\t\tinstance.atBottom = !result.moreAfter && messages.scrollTop >= messages.scrollHeight - messages.clientHeight;\n\t\t\t\tsetTimeout(() => msgElement.removeClass('highlight'), 500);\n\t\t\t});\n\n\t\t\tif (!room.loaded) {\n\t\t\t\troom.loaded = 0;\n\t\t\t}\n\t\t\troom.loaded += result.messages.length;\n\t\t\troom.hasMore.set(result.moreBefore);\n\t\t\treturn room.hasMoreNext.set(result.moreAfter);\n\t\t});\n\t}\n\n\thasMore(rid) {\n\t\tconst room = this.getRoom(rid);\n\t\treturn room.hasMore.get();\n\t}\n\n\thasMoreNext(rid) {\n\t\tconst room = this.getRoom(rid);\n\t\treturn room.hasMoreNext.get();\n\t}\n\n\tgetMoreIfIsEmpty(rid) {\n\t\tconst room = this.getRoom(rid);\n\n\t\tif (room.loaded === undefined) {\n\t\t\treturn this.getMore(rid);\n\t\t}\n\t}\n\n\tisLoading(rid) {\n\t\tconst room = this.getRoom(rid);\n\t\treturn room.isLoading.get();\n\t}\n\n\tclear(rid) {\n\t\tChatMessage.remove({ rid });\n\t\tif (this.histories[rid]) {\n\t\t\tthis.histories[rid].hasMore.set(true);\n\t\t\tthis.histories[rid].isLoading.set(false);\n\t\t\tthis.histories[rid].loaded = undefined;\n\t\t}\n\t}\n})();\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Session } from 'meteor/session';\nimport { Tracker } from 'meteor/tracker';\nimport { Blaze } from 'meteor/blaze';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport _ from 'underscore';\n\nimport { fireGlobalEvent } from '../../../../client/lib/utils/fireGlobalEvent';\nimport { upsertMessage, RoomHistoryManager } from './RoomHistoryManager';\nimport { mainReady } from './mainReady';\nimport { menu } from './menu';\nimport { roomTypes } from '../../../utils';\nimport { callbacks } from '../../../../lib/callbacks';\nimport { Notifications } from '../../../notifications';\nimport { CachedChatRoom, ChatMessage, ChatSubscription, CachedChatSubscription, ChatRoom } from '../../../models';\nimport { CachedCollectionManager } from '../../../ui-cached-collection';\nimport { getConfig } from '../../../../client/lib/utils/getConfig';\nimport { ROOM_DATA_STREAM } from '../../../utils/stream/constants';\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\nimport { RoomManager as NewRoomManager } from '../../../../client/lib/RoomManager';\n\nconst maxRoomsOpen = parseInt(getConfig('maxRoomsOpen')) || 5;\n\nconst onDeleteMessageStream = (msg) => {\n\tChatMessage.remove({ _id: msg._id });\n\n\t// remove thread refenrece from deleted message\n\tChatMessage.update({ tmid: msg._id }, { $unset: { tmid: 1 } }, { multi: true });\n};\nconst onDeleteMessageBulkStream = ({ rid, ts, excludePinned, ignoreDiscussion, users }) => {\n\tconst query = { rid, ts };\n\tif (excludePinned) {\n\t\tquery.pinned = { $ne: true };\n\t}\n\tif (ignoreDiscussion) {\n\t\tquery.drid = { $exists: false };\n\t}\n\tif (users && users.length) {\n\t\tquery['u.username'] = { $in: users };\n\t}\n\tChatMessage.remove(query);\n};\n\nexport const RoomManager = new (function () {\n\tconst openedRooms = {};\n\tconst msgStream = new Meteor.Streamer('room-messages');\n\tconst roomStream = new Meteor.Streamer(ROOM_DATA_STREAM);\n\tconst onlineUsers = new ReactiveVar({});\n\tconst Dep = new Tracker.Dependency();\n\n\tconst handleTrackSettingsChange = (msg) => {\n\t\tconst openedRoom = Tracker.nonreactive(() => Session.get('openedRoom'));\n\t\tif (openedRoom !== msg.rid) {\n\t\t\treturn;\n\t\t}\n\n\t\tTracker.nonreactive(() => {\n\t\t\tif (msg.t === 'room_changed_privacy') {\n\t\t\t\tconst type = FlowRouter.current().route.name === 'channel' ? 'c' : 'p';\n\t\t\t\tRoomManager.close(type + FlowRouter.getParam('name'));\n\n\t\t\t\tconst subscription = ChatSubscription.findOne({ rid: msg.rid });\n\t\t\t\tconst route = subscription.t === 'c' ? 'channel' : 'group';\n\t\t\t\tFlowRouter.go(route, { name: subscription.name }, FlowRouter.current().queryParams);\n\t\t\t}\n\n\t\t\tif (msg.t === 'r') {\n\t\t\t\tconst room = ChatRoom.findOne(msg.rid);\n\t\t\t\tif (room.name !== FlowRouter.getParam('name')) {\n\t\t\t\t\tRoomManager.close(room.t + FlowRouter.getParam('name'));\n\t\t\t\t\troomTypes.openRouteLink(room.t, room, FlowRouter.current().queryParams);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t};\n\n\tconst Cls = class {\n\t\tstatic initClass() {\n\t\t\tthis.prototype.openedRooms = openedRooms;\n\t\t\tthis.prototype.onlineUsers = onlineUsers;\n\t\t\tthis.prototype.roomStream = roomStream;\n\t\t\tthis.prototype.computation = Tracker.autorun(() => {\n\t\t\t\tconst ready = CachedChatRoom.ready.get() && mainReady.get();\n\t\t\t\tif (ready !== true) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst user = Meteor.user();\n\t\t\t\tTracker.nonreactive(() =>\n\t\t\t\t\tObject.entries(openedRooms).forEach(([typeName, record]) => {\n\t\t\t\t\t\tif (record.active !== true || record.ready === true) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst type = typeName.substr(0, 1);\n\t\t\t\t\t\tconst name = typeName.substr(1);\n\n\t\t\t\t\t\tconst room = roomTypes.findRoom(type, name, user);\n\n\t\t\t\t\t\tif (room != null) {\n\t\t\t\t\t\t\trecord.rid = room._id;\n\t\t\t\t\t\t\tRoomHistoryManager.getMoreIfIsEmpty(room._id);\n\t\t\t\t\t\t\tif (record.streamActive !== true) {\n\t\t\t\t\t\t\t\trecord.streamActive = true;\n\t\t\t\t\t\t\t\tmsgStream.on(record.rid, async (msg) => {\n\t\t\t\t\t\t\t\t\t// Should not send message to room if room has not loaded all the current messages\n\t\t\t\t\t\t\t\t\tif (RoomHistoryManager.hasMoreNext(record.rid) !== false) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t// Do not load command messages into channel\n\t\t\t\t\t\t\t\t\tif (msg.t !== 'command') {\n\t\t\t\t\t\t\t\t\t\tconst subscription = ChatSubscription.findOne({ rid: record.rid }, { reactive: false });\n\t\t\t\t\t\t\t\t\t\tconst isNew = !ChatMessage.findOne({ _id: msg._id, temp: { $ne: true } });\n\t\t\t\t\t\t\t\t\t\tupsertMessage({ msg, subscription });\n\n\t\t\t\t\t\t\t\t\t\tmsg.room = {\n\t\t\t\t\t\t\t\t\t\t\ttype,\n\t\t\t\t\t\t\t\t\t\t\tname,\n\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\tif (isNew) {\n\t\t\t\t\t\t\t\t\t\t\tmenu.updateUnreadBars();\n\t\t\t\t\t\t\t\t\t\t\tcallbacks.run('streamNewMessage', msg);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\tmsg.name = room.name;\n\t\t\t\t\t\t\t\t\tTracker.afterFlush(() => RoomManager.updateMentionsMarksOfRoom(typeName));\n\n\t\t\t\t\t\t\t\t\thandleTrackSettingsChange(msg);\n\n\t\t\t\t\t\t\t\t\tcallbacks.run('streamMessage', msg);\n\n\t\t\t\t\t\t\t\t\treturn fireGlobalEvent('new-message', msg);\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\tNotifications.onRoom(record.rid, 'deleteMessage', onDeleteMessageStream); // eslint-disable-line no-use-before-define\n\t\t\t\t\t\t\t\tNotifications.onRoom(record.rid, 'deleteMessageBulk', onDeleteMessageBulkStream); // eslint-disable-line no-use-before-define\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trecord.ready = true;\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t\tDep.changed();\n\t\t\t});\n\t\t}\n\n\t\tgetOpenedRoomByRid(rid) {\n\t\t\treturn Object.keys(openedRooms)\n\t\t\t\t.map((typeName) => openedRooms[typeName])\n\t\t\t\t.find((openedRoom) => openedRoom.rid === rid);\n\t\t}\n\n\t\tclose(typeName) {\n\t\t\tif (openedRooms[typeName]) {\n\t\t\t\tif (openedRooms[typeName].rid != null) {\n\t\t\t\t\tmsgStream.removeAllListeners(openedRooms[typeName].rid);\n\t\t\t\t\tNotifications.unRoom(openedRooms[typeName].rid, 'deleteMessage', onDeleteMessageStream); // eslint-disable-line no-use-before-define\n\t\t\t\t\tNotifications.unRoom(openedRooms[typeName].rid, 'deleteMessageBulk', onDeleteMessageBulkStream); // eslint-disable-line no-use-before-define\n\t\t\t\t}\n\n\t\t\t\topenedRooms[typeName].ready = false;\n\t\t\t\topenedRooms[typeName].active = false;\n\t\t\t\tif (openedRooms[typeName].template != null) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tBlaze.remove(openedRooms[typeName].template);\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error('Error removing template from DOM', e);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tdelete openedRooms[typeName].dom;\n\t\t\t\tdelete openedRooms[typeName].template;\n\n\t\t\t\tconst { rid } = openedRooms[typeName];\n\t\t\t\tdelete openedRooms[typeName];\n\n\t\t\t\tif (rid != null) {\n\t\t\t\t\tNewRoomManager.close(rid);\n\t\t\t\t\treturn RoomHistoryManager.clear(rid);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tcloseOlderRooms() {\n\t\t\tif (Object.keys(openedRooms).length <= maxRoomsOpen) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst roomsToClose = _.sortBy(_.values(openedRooms), 'lastSeen').reverse().slice(maxRoomsOpen);\n\t\t\treturn Array.from(roomsToClose).map((roomToClose) => this.close(roomToClose.typeName));\n\t\t}\n\n\t\tcloseAllRooms() {\n\t\t\tObject.keys(openedRooms).forEach((key) => {\n\t\t\t\tconst openedRoom = openedRooms[key];\n\t\t\t\tthis.close(openedRoom.typeName);\n\t\t\t});\n\t\t\tSession.set('openedRoom');\n\t\t}\n\n\t\topen(typeName) {\n\t\t\tif (openedRooms[typeName] == null) {\n\t\t\t\topenedRooms[typeName] = {\n\t\t\t\t\ttypeName,\n\t\t\t\t\tactive: false,\n\t\t\t\t\tready: false,\n\t\t\t\t\tunreadSince: new ReactiveVar(undefined),\n\t\t\t\t};\n\t\t\t}\n\n\t\t\topenedRooms[typeName].lastSeen = new Date();\n\n\t\t\tif (openedRooms[typeName].ready) {\n\t\t\t\tthis.closeOlderRooms();\n\t\t\t}\n\n\t\t\tif (CachedChatSubscription.ready.get() === true) {\n\t\t\t\tif (openedRooms[typeName].active !== true) {\n\t\t\t\t\topenedRooms[typeName].active = true;\n\t\t\t\t\tif (this.computation) {\n\t\t\t\t\t\tthis.computation.invalidate();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\tready() {\n\t\t\t\t\tDep.depend();\n\t\t\t\t\treturn openedRooms[typeName].ready;\n\t\t\t\t},\n\t\t\t};\n\t\t}\n\n\t\texistsDomOfRoom(typeName) {\n\t\t\tconst room = openedRooms[typeName];\n\t\t\treturn (room != null ? room.dom : undefined) != null;\n\t\t}\n\n\t\tupdateUserStatus(user, status, utcOffset) {\n\t\t\tconst onlineUsersValue = onlineUsers.curValue;\n\n\t\t\tif (status === 'offline') {\n\t\t\t\tdelete onlineUsersValue[user.username];\n\t\t\t} else {\n\t\t\t\tonlineUsersValue[user.username] = {\n\t\t\t\t\t_id: user._id,\n\t\t\t\t\tstatus,\n\t\t\t\t\tutcOffset,\n\t\t\t\t};\n\t\t\t}\n\n\t\t\treturn onlineUsers.set(onlineUsersValue);\n\t\t}\n\n\t\tupdateMentionsMarksOfRoom(/* typeName */) {\n\t\t\t// const [ticksBar] = dom.getElementsByClassName('ticks-bar');\n\t\t\t// const [messagesBox] = dom.getElementsByClassName('messages-box');\n\t\t\t// const scrollTop = $('> .wrapper', messagesBox).scrollTop() - 50;\n\t\t\t// const totalHeight = $(' > .wrapper > ul', messagesBox).height() + 40;\n\t\t\t// if (!ticksBar) {\n\t\t\t// \treturn;\n\t\t\t// }\n\t\t\t// // TODO: thread quotes should NOT have mention links at all\n\t\t\t// const mentionsSelector = '.message .body .mention-link--me, .message .body .mention-link--group';\n\t\t\t// ticksBar.innerHTML = Array.from(messagesBox?.querySelectorAll(mentionsSelector) || [])\n\t\t\t// \t.map((mentionLink) => {\n\t\t\t// \t\tconst topOffset = $(mentionLink).offset().top + scrollTop;\n\t\t\t// \t\tconst percent = (100 / totalHeight) * topOffset;\n\t\t\t// \t\tconst className = [\n\t\t\t// \t\t\t'tick',\n\t\t\t// \t\t\tmentionLink.classList.contains('mention-link--me') && 'tick--me',\n\t\t\t// \t\t\tmentionLink.classList.contains('mention-link--group') && 'tick--group',\n\t\t\t// \t\t].filter(Boolean).join(' ');\n\t\t\t// \t\treturn `<div class=\"${ className }\" style=\"top: ${ percent }%;\"></div>`;\n\t\t\t// \t})\n\t\t\t// \t.join('');\n\t\t}\n\t};\n\tCls.initClass();\n\treturn new Cls();\n})();\n\nconst loadMissedMessages = async function (rid) {\n\tconst lastMessage = ChatMessage.findOne({ rid, _hidden: { $ne: true }, temp: { $exists: false } }, { sort: { ts: -1 }, limit: 1 });\n\n\tif (lastMessage == null) {\n\t\treturn;\n\t}\n\n\ttry {\n\t\tconst result = await callWithErrorHandling('loadMissedMessages', rid, lastMessage.ts);\n\t\tif (result) {\n\t\t\tconst subscription = ChatSubscription.findOne({ rid });\n\t\t\treturn Promise.all(Array.from(result).map((msg) => upsertMessage({ msg, subscription })));\n\t\t}\n\t\treturn [];\n\t} catch (error) {\n\t\treturn [];\n\t}\n};\n\nlet connectionWasOnline = true;\nTracker.autorun(function () {\n\tconst { connected } = Meteor.connection.status();\n\n\tif (connected === true && connectionWasOnline === false && RoomManager.openedRooms != null) {\n\t\tObject.keys(RoomManager.openedRooms).forEach((key) => {\n\t\t\tconst value = RoomManager.openedRooms[key];\n\t\t\tif (value.rid != null) {\n\t\t\t\tloadMissedMessages(value.rid);\n\t\t\t}\n\t\t});\n\t}\n\tconnectionWasOnline = connected;\n});\n\nMeteor.startup(() => {\n\t// Reload rooms after login\n\tlet currentUsername = undefined;\n\tTracker.autorun(() => {\n\t\tconst user = Meteor.user();\n\t\tif (currentUsername === undefined && (user != null ? user.username : undefined) != null) {\n\t\t\tcurrentUsername = user.username;\n\t\t\tRoomManager.closeAllRooms();\n\t\t\tconst { roomTypes: types } = roomTypes;\n\n\t\t\t// Reload only if the current route is a channel route\n\t\t\tconst roomType = Object.keys(types).find((key) => types[key].route && types[key].route.name === FlowRouter.current().route.name);\n\t\t\tif (roomType) {\n\t\t\t\tFlowRouter.reload();\n\t\t\t}\n\t\t}\n\t});\n\n\tChatMessage.find().observe({\n\t\tremoved(record) {\n\t\t\tif (RoomManager.getOpenedRoomByRid(record.rid) != null) {\n\t\t\t\tconst recordBefore = ChatMessage.findOne({ ts: { $lt: record.ts } }, { sort: { ts: -1 } });\n\t\t\t\tif (recordBefore != null) {\n\t\t\t\t\tChatMessage.update({ _id: recordBefore._id }, { $set: { tick: new Date() } });\n\t\t\t\t}\n\n\t\t\t\tconst recordAfter = ChatMessage.findOne({ ts: { $gt: record.ts } }, { sort: { ts: 1 } });\n\t\t\t\tif (recordAfter != null) {\n\t\t\t\t\treturn ChatMessage.update({ _id: recordAfter._id }, { $set: { tick: new Date() } });\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t});\n});\n\nTracker.autorun(function () {\n\tif (Meteor.userId()) {\n\t\treturn Notifications.onUser('message', function (msg) {\n\t\t\tmsg.u = msg.u || { username: 'rocket.cat' };\n\t\t\tmsg.private = true;\n\n\t\t\treturn ChatMessage.upsert({ _id: msg._id }, msg);\n\t\t});\n\t}\n});\n\ncallbacks.add('afterLogoutCleanUp', () => RoomManager.closeAllRooms(), callbacks.priority.MEDIUM, 'roommanager-after-logout-cleanup');\n\nCachedCollectionManager.onLogin(() => {\n\tNotifications.onUser('subscriptions-changed', (action, sub) => {\n\t\tconst ignored = sub && sub.ignored ? { $nin: sub.ignored } : { $exists: true };\n\n\t\tChatMessage.update({ rid: sub.rid, ignored }, { $unset: { ignored: true } }, { multi: true });\n\t\tif (sub && sub.ignored) {\n\t\t\tChatMessage.update(\n\t\t\t\t{ 'rid': sub.rid, 't': { $ne: 'command' }, 'u._id': { $in: sub.ignored } },\n\t\t\t\t{ $set: { ignored: true } },\n\t\t\t\t{ multi: true },\n\t\t\t);\n\t\t}\n\t});\n});\n","import { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Session } from 'meteor/session';\n\nimport { AccountBox } from './AccountBox';\nimport { roomTypes } from '../../../utils/client/lib/roomTypes';\nimport { Subscriptions } from '../../../models';\nimport { RoomManager } from '../../../../client/lib/RoomManager';\n\nexport const SideNav = new (class {\n\tconstructor() {\n\t\tthis.initiated = false;\n\t\tthis.sideNav = {};\n\t\tthis.flexNav = {};\n\t\tthis.animating = false;\n\t\tthis.openQueue = [];\n\t}\n\n\ttoggleFlex(status, callback) {\n\t\tif (this.animating === true) {\n\t\t\treturn;\n\t\t}\n\t\tthis.animating = true;\n\t\tif (status === -1 || (status !== 1 && this.flexNav.opened)) {\n\t\t\tthis.flexNav.opened = false;\n\t\t\tthis.flexNav.addClass('animated-hidden');\n\t\t} else {\n\t\t\tthis.flexNav.opened = true;\n\t\t\tif (window.DISABLE_ANIMATION === true) {\n\t\t\t\tthis.flexNav.removeClass('animated-hidden');\n\t\t\t} else {\n\t\t\t\tsetTimeout(() => this.flexNav.removeClass('animated-hidden'), 50);\n\t\t\t}\n\t\t}\n\n\t\tif (window.DISABLE_ANIMATION === true) {\n\t\t\t!this.flexNav.opened && this.setFlex();\n\t\t\tthis.animating = false;\n\t\t\treturn typeof callback === 'function' && callback();\n\t\t}\n\n\t\treturn setTimeout(() => {\n\t\t\t!this.flexNav.opened && this.setFlex();\n\t\t\tthis.animating = false;\n\t\t\treturn typeof callback === 'function' && callback();\n\t\t}, 500);\n\t}\n\n\tcloseFlex(callback = null) {\n\t\tconst routesNamesForRooms = roomTypes\n\t\t\t.getTypes()\n\t\t\t.filter((i) => i.route)\n\t\t\t.map((i) => i.route.name);\n\t\tif (!routesNamesForRooms.includes(FlowRouter.current().route.name)) {\n\t\t\tconst subscription = Subscriptions.findOne({ rid: RoomManager.lastRid });\n\t\t\tif (subscription) {\n\t\t\t\troomTypes.openRouteLink(subscription.t, subscription, FlowRouter.current().queryParams);\n\t\t\t} else {\n\t\t\t\tFlowRouter.go('home');\n\t\t\t}\n\t\t}\n\t\tif (this.animating === true) {\n\t\t\treturn;\n\t\t}\n\t\tthis.toggleFlex(-1, callback);\n\t}\n\n\tflexStatus() {\n\t\treturn this.flexNav.opened;\n\t}\n\n\tsetFlex(template, data = {}) {\n\t\tSession.set('flex-nav-template', template);\n\t\treturn Session.set('flex-nav-data', data);\n\t}\n\n\tgetFlex() {\n\t\treturn {\n\t\t\ttemplate: Session.get('flex-nav-template'),\n\t\t\tdata: Session.get('flex-nav-data'),\n\t\t};\n\t}\n\n\ttoggleCurrent() {\n\t\tif (this.flexNav && this.flexNav.opened) {\n\t\t\treturn this.closeFlex();\n\t\t}\n\t\treturn AccountBox.toggle();\n\t}\n\n\tvalidate() {\n\t\tconst invalid = [];\n\t\tthis.sideNav.find('input.required').each(function () {\n\t\t\tif (!this.value.length) {\n\t\t\t\treturn invalid.push($(this).prev('label').html());\n\t\t\t}\n\t\t});\n\t\tif (invalid.length) {\n\t\t\treturn invalid;\n\t\t}\n\t\treturn false;\n\t}\n\n\topenFlex(callback = () => {}) {\n\t\tif (!this.initiated) {\n\t\t\treturn this.openQueue.push({\n\t\t\t\tconfig: this.getFlex(),\n\t\t\t\tcallback,\n\t\t\t});\n\t\t}\n\t\tif (this.animating === true) {\n\t\t\treturn;\n\t\t}\n\t\tthis.toggleFlex(1, callback);\n\t}\n\n\tinit() {\n\t\tthis.sideNav = $('.sidebar');\n\t\tthis.flexNav = this.sideNav.find('.flex-nav');\n\t\tthis.setFlex('');\n\t\tthis.initiated = true;\n\t\tif (this.openQueue.length > 0) {\n\t\t\tthis.openQueue.forEach((item) => {\n\t\t\t\tthis.setFlex(item.config.template, item.config.data);\n\t\t\t\treturn this.openFlex(item.callback);\n\t\t\t});\n\t\t\tthis.openQueue = [];\n\t\t}\n\t}\n})();\n","import { Template } from 'meteor/templating';\nimport { ReactiveVar } from 'meteor/reactive-var';\n\nimport './collapseArrow.html';\n\nexport const createCollapseable = (template, getInicialFromInstance = () => false) => {\n\ttemplate.onCreated(function () {\n\t\tthis.collapsedMedia = new ReactiveVar(getInicialFromInstance(Template.instance()));\n\t});\n\ttemplate.helpers({\n\t\tcollapsed() {\n\t\t\treturn Template.instance().collapsedMedia.get();\n\t\t},\n\t\tcollapsedMediaVar() {\n\t\t\treturn Template.instance().collapsedMedia;\n\t\t},\n\t});\n};\n\nTemplate.collapseArrow.events({\n\t'click .collapse-switch'(e, i) {\n\t\te.preventDefault();\n\t\ti.data.collapsedMedia.set(!i.data.collapsedMedia.get());\n\t},\n});\n\nTemplate.collapseArrow.helpers({\n\tcollapsed() {\n\t\treturn this.collapsedMedia.get();\n\t},\n});\n","import { ReactiveVar } from 'meteor/reactive-var';\n\nexport let mainReady = new ReactiveVar(false); // eslint-disable-line\n","import { Session } from 'meteor/session';\nimport { Meteor } from 'meteor/meteor';\nimport _ from 'underscore';\nimport { Emitter } from '@rocket.chat/emitter';\n\nimport { isRtl } from '../../../utils';\n\nconst sideNavW = 280;\nconst map = (x, in_min, in_max, out_min, out_max) => ((x - in_min) * (out_max - out_min)) / (in_max - in_min) + out_min;\n\nexport const menu = new (class extends Emitter {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._open = false;\n\t\tthis.updateUnreadBars = _.throttle(() => {\n\t\t\tif (this.list == null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst listOffset = this.list.offset();\n\t\t\tconst listHeight = this.list.height();\n\t\t\tlet showTop = false;\n\t\t\tlet showBottom = false;\n\t\t\t$('li.sidebar-item--unread').each(function () {\n\t\t\t\tif ($(this).offset().top < listOffset.top - $(this).height()) {\n\t\t\t\t\tshowTop = true;\n\t\t\t\t}\n\t\t\t\tif ($(this).offset().top > listOffset.top + listHeight) {\n\t\t\t\t\tshowBottom = true;\n\t\t\t\t}\n\t\t\t});\n\t\t\tif (showTop === true) {\n\t\t\t\t$('.top-unread-rooms').removeClass('hidden');\n\t\t\t} else {\n\t\t\t\t$('.top-unread-rooms').addClass('hidden');\n\t\t\t}\n\t\t\tif (showBottom === true) {\n\t\t\t\treturn $('.bottom-unread-rooms').removeClass('hidden');\n\t\t\t}\n\t\t\treturn $('.bottom-unread-rooms').addClass('hidden');\n\t\t}, 200);\n\t\tthis.sideNavW = sideNavW;\n\t}\n\n\tget isRtl() {\n\t\treturn isRtl(Meteor._localStorage.getItem('userLanguage'));\n\t}\n\n\ttouchstart(e) {\n\t\tthis.movestarted = false;\n\t\tthis.blockmove = false;\n\t\tthis.touchstartX = undefined;\n\t\tthis.touchstartY = undefined;\n\t\tthis.diff = 0;\n\t\tif (e.target === this.sidebarWrap[0] || $(e.target).closest('.main-content').length > 0) {\n\t\t\tthis.closePopover();\n\t\t\tthis.touchstartX = e.touches[0].clientX;\n\t\t\tthis.touchstartY = e.touches[0].clientY;\n\t\t\tthis.mainContent = $('.main-content');\n\t\t}\n\t}\n\n\ttouchmove(e) {\n\t\tif (this.touchstartX == null) {\n\t\t\treturn;\n\t\t}\n\t\tconst [touch] = e.touches;\n\t\tconst diffX = touch.clientX - this.touchstartX;\n\t\tconst diffY = touch.clientY - this.touchstartY;\n\t\tconst absX = Math.abs(diffX);\n\t\tconst absY = Math.abs(diffY);\n\n\t\tif (!this.movestarted && absY > 5) {\n\t\t\tthis.blockmove = true;\n\t\t}\n\t\tif (this.blockmove) {\n\t\t\treturn;\n\t\t}\n\t\tthis.sidebar.css('transition', 'none');\n\t\tthis.sidebarWrap.css('transition', 'none');\n\t\tif (this.movestarted === true || absX > 5) {\n\t\t\tthis.movestarted = true;\n\t\t\tif (this.isRtl) {\n\t\t\t\tif (this.isOpen()) {\n\t\t\t\t\tthis.diff = -sideNavW + diffX;\n\t\t\t\t} else {\n\t\t\t\t\tthis.diff = diffX;\n\t\t\t\t}\n\t\t\t\tif (this.diff < -sideNavW) {\n\t\t\t\t\tthis.diff = -sideNavW;\n\t\t\t\t}\n\t\t\t\tif (this.diff > 0) {\n\t\t\t\t\tthis.diff = 0;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (this.isOpen()) {\n\t\t\t\t\tthis.diff = sideNavW + diffX;\n\t\t\t\t} else {\n\t\t\t\t\tthis.diff = diffX;\n\t\t\t\t}\n\t\t\t\tif (this.diff > sideNavW) {\n\t\t\t\t\tthis.diff = sideNavW;\n\t\t\t\t}\n\t\t\t\tif (this.diff < 0) {\n\t\t\t\t\tthis.diff = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// if (map((this.diff / sideNavW), 0, 1, -.1, .8) > 0) {\n\t\t\tthis.sidebar.css('box-shadow', '0 0 15px 1px rgba(0,0,0,.3)');\n\t\t\t// this.sidebarWrap.css('z-index', '9998');\n\t\t\tthis.translate(this.diff);\n\t\t\t// }\n\t\t}\n\t}\n\n\ttranslate(diff, width = sideNavW) {\n\t\tif (diff === undefined) {\n\t\t\tdiff = this.isRtl ? -1 * sideNavW : sideNavW;\n\t\t}\n\t\tthis.sidebarWrap.css('width', '100%');\n\t\tthis.wrapper.css('overflow', 'hidden');\n\t\tthis.sidebarWrap.css('background-color', '#000');\n\t\tthis.sidebarWrap.css('opacity', map(Math.abs(diff) / width, 0, 1, -0.1, 0.8).toFixed(2));\n\t\tthis.isRtl\n\t\t\t? this.sidebar.css('transform', `translate3d(${(sideNavW + diff).toFixed(3)}px, 0 , 0)`)\n\t\t\t: this.sidebar.css('transform', `translate3d(${(diff - sideNavW).toFixed(3)}px, 0 , 0)`);\n\t}\n\n\ttouchend() {\n\t\tconst [max, min] = [sideNavW * 0.76, sideNavW * 0.24];\n\t\tif (this.movestarted !== true) {\n\t\t\treturn;\n\t\t}\n\t\tthis.movestarted = false;\n\t\tif (this.isRtl) {\n\t\t\tif (this.isOpen()) {\n\t\t\t\treturn this.diff >= -max ? this.close() : this.open();\n\t\t\t}\n\t\t\tif (this.diff <= -min) {\n\t\t\t\treturn this.open();\n\t\t\t}\n\t\t\treturn this.close();\n\t\t}\n\t\tif (this.isOpen()) {\n\t\t\tif (this.diff >= max) {\n\t\t\t\treturn this.open();\n\t\t\t}\n\t\t\treturn this.close();\n\t\t}\n\t\tif (this.diff >= min) {\n\t\t\treturn this.open();\n\t\t}\n\t\treturn this.close();\n\t}\n\n\tinit() {\n\t\tthis.menu = $('.sidebar');\n\t\tthis.sidebar = this.menu;\n\t\tthis.sidebarWrap = $('.sidebar-wrap');\n\t\tthis.wrapper = $('.messages-box > .wrapper');\n\t\tconst ignore = (fn) => (event) => document.body.clientWidth <= 780 && fn(event);\n\n\t\tdocument.body.addEventListener(\n\t\t\t'touchstart',\n\t\t\tignore((e) => this.touchstart(e)),\n\t\t);\n\t\tdocument.body.addEventListener(\n\t\t\t'touchmove',\n\t\t\tignore((e) => this.touchmove(e)),\n\t\t);\n\t\tdocument.body.addEventListener(\n\t\t\t'touchend',\n\t\t\tignore((e) => this.touchend(e)),\n\t\t);\n\t\tthis.sidebarWrap.on(\n\t\t\t'click',\n\t\t\tignore((e) => {\n\t\t\t\te.target === this.sidebarWrap[0] && this.isOpen() && this.emit('clickOut', e);\n\t\t\t}),\n\t\t);\n\t\tthis.on('close', () => {\n\t\t\tthis.sidebarWrap.css('width', '');\n\t\t\t// this.sidebarWrap.css('z-index', '');\n\t\t\tthis.sidebarWrap.css('background-color', '');\n\t\t\tthis.sidebar.css('transform', '');\n\t\t\tthis.sidebar.css('box-shadow', '');\n\t\t\tthis.sidebar.css('transition', '');\n\t\t\tthis.sidebarWrap.css('transition', '');\n\t\t\tthis.wrapper && this.wrapper.css('overflow', '');\n\t\t});\n\t\tthis.on(\n\t\t\t'open',\n\t\t\tignore(() => {\n\t\t\t\tthis.sidebar.css('box-shadow', '0 0 15px 1px rgba(0,0,0,.3)');\n\t\t\t\t// this.sidebarWrap.css('z-index', '9998');\n\t\t\t\tthis.translate();\n\t\t\t}),\n\t\t);\n\t\tthis.mainContent = $('.main-content');\n\n\t\tthis.list = $('.rooms-list');\n\t\tthis._open = false;\n\t\tSession.set('isMenuOpen', this._open);\n\t}\n\n\tclosePopover() {\n\t\treturn this.menu.find('[data-popover=\"anchor\"]:checked').prop('checked', false).length > 0;\n\t}\n\n\tisOpen() {\n\t\treturn Session.get('isMenuOpen');\n\t}\n\n\topen() {\n\t\tthis._open = true;\n\t\tSession.set('isMenuOpen', this._open);\n\t\tthis.emit('open');\n\t}\n\n\tclose() {\n\t\tthis._open = false;\n\t\tSession.set('isMenuOpen', this._open);\n\t\tthis.emit('close');\n\t}\n\n\ttoggle() {\n\t\treturn this.isOpen() ? this.close() : this.open();\n\t}\n})();\n\nlet passClosePopover = false;\n\nmenu.on('clickOut', function () {\n\tif (!menu.closePopover()) {\n\t\tpassClosePopover = true;\n\t\tmenu.close();\n\t}\n});\n\nmenu.on('close', function () {\n\tif (!menu.sidebar) {\n\t\treturn;\n\t}\n\n\tmenu.sidebar.css('transition', '');\n\tmenu.sidebarWrap.css('transition', '');\n\tif (passClosePopover) {\n\t\tpassClosePopover = false;\n\t\treturn;\n\t}\n\tmenu.closePopover();\n});\n","export const messageArgs = (context) => (context && context._arguments && context._arguments[1] && context._arguments[1].hash) || context;\n","class MessageBoxActions {\n\tconstructor() {\n\t\tthis.actions = {};\n\t}\n\n\tadd(group, label, config) {\n\t\tif (!group && !label && !config) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this.actions[group]) {\n\t\t\tthis.actions[group] = [];\n\t\t}\n\n\t\tconst actionExists = this.actions[group].find((action) => action.label === label);\n\n\t\tif (actionExists) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.actions[group].push({ ...config, label });\n\t}\n\n\tremove(group, expression) {\n\t\tif (!group || !this.actions[group]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.actions[group] = this.actions[group].filter((action) => !expression.test(action.id));\n\t\treturn this.actions[group];\n\t}\n\n\tget(group) {\n\t\tif (!group) {\n\t\t\treturn Object.keys(this.actions).reduce((ret, key) => {\n\t\t\t\tconst actions = this.actions[key].filter((action) => !action.condition || action.condition());\n\t\t\t\tif (actions.length) {\n\t\t\t\t\tret[key] = actions;\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}, {});\n\t\t}\n\n\t\treturn this.actions[group].filter((action) => !action.condition || action.condition());\n\t}\n\n\tgetById(id) {\n\t\tconst messageActions = this.actions;\n\t\tlet actions = [];\n\t\tObject.keys(messageActions).forEach(function (action) {\n\t\t\tactions = actions.concat(messageActions[action]);\n\t\t});\n\n\t\treturn actions.filter((action) => action.id === id);\n\t}\n}\n\nexport const messageBox = {\n\tactions: new MessageBoxActions(),\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Tracker } from 'meteor/tracker';\n\nimport { Subscriptions, Rooms, Users } from '../../../models/client';\nimport { hasPermission } from '../../../authorization/client';\nimport { settings } from '../../../settings/client';\nimport { getUserPreference, roomTypes } from '../../../utils/client';\nimport { AutoTranslate } from '../../../autotranslate/client';\nimport { fireGlobalEvent } from '../../../../client/lib/utils/fireGlobalEvent';\nimport { actionLinks } from '../../../action-links/client';\nimport { goToRoomById } from '../../../../client/lib/utils/goToRoomById';\nimport { isLayoutEmbedded } from '../../../../client/lib/utils/isLayoutEmbedded';\nimport { handleError } from '../../../../client/lib/utils/handleError';\n\nconst fields = {\n\t'name': 1,\n\t'username': 1,\n\t'settings.preferences.enableMessageParserEarlyAdoption': 1,\n\t'settings.preferences.showMessageInMainThread': 1,\n\t'settings.preferences.autoImageLoad': 1,\n\t'settings.preferences.saveMobileBandwidth': 1,\n\t'settings.preferences.collapseMediaByDefault': 1,\n\t'settings.preferences.hideRoles': 1,\n};\n\nexport function messageContext({ rid } = Template.instance()) {\n\tconst uid = Meteor.userId();\n\tconst user = Users.findOne({ _id: uid }, { fields }) || {};\n\tconst instance = Template.instance();\n\tconst openThread = (e) => {\n\t\tconst { rid, mid, tmid } = e.currentTarget.dataset;\n\t\tconst room = Rooms.findOne({ _id: rid });\n\t\tFlowRouter.go(\n\t\t\tFlowRouter.getRouteName(),\n\t\t\t{\n\t\t\t\trid,\n\t\t\t\tname: room.name,\n\t\t\t\ttab: 'thread',\n\t\t\t\tcontext: tmid || mid,\n\t\t\t},\n\t\t\t{\n\t\t\t\tjump: tmid && tmid !== mid && mid && mid,\n\t\t\t},\n\t\t);\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t};\n\n\tconst runAction = isLayoutEmbedded()\n\t\t? (msg, e) => {\n\t\t\t\tconst { actionlink } = e.currentTarget.dataset;\n\t\t\t\treturn fireGlobalEvent('click-action-link', {\n\t\t\t\t\tactionlink,\n\t\t\t\t\tvalue: msg._id,\n\t\t\t\t\tmessage: msg,\n\t\t\t\t});\n\t\t  }\n\t\t: (msg, e) => {\n\t\t\t\tconst { actionlink } = e.currentTarget.dataset;\n\t\t\t\tactionLinks.run(actionlink, msg._id, instance, (err) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\thandleError(err);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t  };\n\n\tconst openDiscussion = (e) => {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tconst { drid } = e.currentTarget.dataset;\n\t\tgoToRoomById(drid);\n\t};\n\n\tconst replyBroadcast = (e) => {\n\t\tconst { username, mid } = e.currentTarget.dataset;\n\t\troomTypes.openRouteLink('d', { name: username }, { ...FlowRouter.current().queryParams, reply: mid });\n\t};\n\n\treturn {\n\t\tu: user,\n\t\troom: Tracker.nonreactive(() =>\n\t\t\tRooms.findOne(\n\t\t\t\t{ _id: rid },\n\t\t\t\t{\n\t\t\t\t\tfields: {\n\t\t\t\t\t\t_updatedAt: 0,\n\t\t\t\t\t\tlastMessage: 0,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t),\n\t\t),\n\t\tsubscription: Subscriptions.findOne(\n\t\t\t{ rid },\n\t\t\t{\n\t\t\t\tfields: {\n\t\t\t\t\tname: 1,\n\t\t\t\t\tautoTranslate: 1,\n\t\t\t\t\trid: 1,\n\t\t\t\t\ttunread: 1,\n\t\t\t\t\ttunreadUser: 1,\n\t\t\t\t\ttunreadGroup: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t),\n\t\tactions: {\n\t\t\topenThread() {\n\t\t\t\treturn openThread;\n\t\t\t},\n\t\t\trunAction(msg) {\n\t\t\t\treturn () => (e) => {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t\trunAction(msg, e);\n\t\t\t\t};\n\t\t\t},\n\t\t\topenDiscussion() {\n\t\t\t\treturn openDiscussion;\n\t\t\t},\n\t\t\treplyBroadcast() {\n\t\t\t\treturn replyBroadcast;\n\t\t\t},\n\t\t},\n\t\tsettings: {\n\t\t\ttranslateLanguage: AutoTranslate.getLanguage(rid),\n\t\t\tshowMessageInMainThread: getUserPreference(user, 'showMessageInMainThread'),\n\t\t\tautoImageLoad: getUserPreference(user, 'autoImageLoad'),\n\t\t\tenableMessageParserEarlyAdoption: getUserPreference(user, 'enableMessageParserEarlyAdoption'),\n\t\t\tsaveMobileBandwidth: Meteor.Device.isPhone() && getUserPreference(user, 'saveMobileBandwidth'),\n\t\t\tcollapseMediaByDefault: getUserPreference(user, 'collapseMediaByDefault'),\n\t\t\tshowreply: true,\n\t\t\tshowReplyButton: true,\n\t\t\thasPermissionDeleteMessage: hasPermission('delete-message', rid),\n\t\t\thasPermissionDeleteOwnMessage: hasPermission('delete-own-message'),\n\t\t\thideRoles: !settings.get('UI_DisplayRoles') || getUserPreference(user, 'hideRoles'),\n\t\t\tUI_Use_Real_Name: settings.get('UI_Use_Real_Name'),\n\t\t\tChatops_Username: settings.get('Chatops_Username'),\n\t\t\tAutoTranslate_Enabled: settings.get('AutoTranslate_Enabled'),\n\t\t\tMessage_AllowEditing: settings.get('Message_AllowEditing'),\n\t\t\tMessage_AllowEditing_BlockEditInMinutes: settings.get('Message_AllowEditing_BlockEditInMinutes'),\n\t\t\tMessage_ShowEditedStatus: settings.get('Message_ShowEditedStatus'),\n\t\t\tAPI_Embed: settings.get('API_Embed'),\n\t\t\tAPI_EmbedDisabledFor: settings.get('API_EmbedDisabledFor'),\n\t\t\tMessage_GroupingPeriod: settings.get('Message_GroupingPeriod') * 1000,\n\t\t},\n\t};\n}\n","import { Meteor } from 'meteor/meteor';\nimport { Blaze } from 'meteor/blaze';\nimport { Template } from 'meteor/templating';\n\nimport { t, getUserPreference } from '../../../utils';\nimport './modal.html';\nimport { handleError } from '../../../../client/lib/utils/handleError';\n\nlet modalStack = [];\n\nconst createModal = (config = {}, fn, onCancel) => {\n\tconfig.confirmButtonText = config.confirmButtonText || (config.type === 'error' ? t('Ok') : t('Send'));\n\tconfig.cancelButtonText = config.cancelButtonText || t('Cancel');\n\tconfig.closeOnConfirm = config.closeOnConfirm == null ? true : config.closeOnConfirm;\n\tconfig.showConfirmButton = config.showConfirmButton == null ? true : config.showConfirmButton;\n\tconfig.showFooter = config.showConfirmButton === true || config.showCancelButton === true;\n\tconfig.confirmOnEnter = config.confirmOnEnter == null ? true : config.confirmOnEnter;\n\tconfig.closeOnEscape = config.closeOnEscape == null ? true : config.closeOnEscape;\n\n\tif (config.type === 'input') {\n\t\tconfig.input = true;\n\t\tconfig.type = false;\n\n\t\tif (!config.inputType) {\n\t\t\tconfig.inputType = 'text';\n\t\t}\n\t}\n\n\tlet renderedModal;\n\tlet timer;\n\n\tconst instance = {\n\t\t...config,\n\n\t\trender: () => {\n\t\t\tif (renderedModal) {\n\t\t\t\trenderedModal.firstNode().style.display = '';\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\trenderedModal = Blaze.renderWithData(Template.rc_modal, instance, document.body);\n\n\t\t\tif (config.timer) {\n\t\t\t\ttimer = setTimeout(() => {\n\t\t\t\t\tinstance.close();\n\t\t\t\t}, config.timer);\n\t\t\t}\n\t\t},\n\n\t\thide: () => {\n\t\t\tif (renderedModal) {\n\t\t\t\trenderedModal.firstNode().style.display = 'none';\n\t\t\t}\n\n\t\t\tif (timer) {\n\t\t\t\tclearTimeout(timer);\n\t\t\t\ttimer = undefined;\n\t\t\t}\n\t\t},\n\n\t\tdestroy: () => {\n\t\t\tif (renderedModal) {\n\t\t\t\tBlaze.remove(renderedModal);\n\t\t\t\trenderedModal = undefined;\n\t\t\t}\n\n\t\t\tif (timer) {\n\t\t\t\tclearTimeout(timer);\n\t\t\t\ttimer = undefined;\n\t\t\t}\n\t\t},\n\n\t\tclose: () => {\n\t\t\tif (onCancel) {\n\t\t\t\tonCancel.call(instance);\n\t\t\t}\n\t\t\tinstance.destroy();\n\t\t\tmodalStack = modalStack.filter((modal) => modal !== instance);\n\t\t\tif (modalStack.length) {\n\t\t\t\tmodalStack[modalStack.length - 1].render();\n\t\t\t}\n\t\t},\n\n\t\tconfirm: (value) => {\n\t\t\tconfig.closeOnConfirm && instance.close();\n\n\t\t\tif (fn) {\n\t\t\t\tfn.call(instance, value);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tinstance.close();\n\t\t},\n\n\t\tcancel: () => {\n\t\t\tinstance.close();\n\t\t},\n\n\t\tshowInputError: (text) => {\n\t\t\tconst errorEl = document.querySelector('.rc-modal__content-error');\n\t\t\terrorEl.innerHTML = text;\n\t\t\terrorEl.style.display = 'block';\n\t\t},\n\t};\n\n\treturn instance;\n};\n\nexport const modal = {\n\topen: (config = {}, fn, onCancel) => {\n\t\tmodalStack.forEach((instance) => {\n\t\t\tinstance.destroy();\n\t\t});\n\t\tmodalStack = [];\n\n\t\tconst instance = createModal(config, fn, onCancel);\n\n\t\tif (config.dontAskAgain) {\n\t\t\tconst dontAskAgainList = getUserPreference(Meteor.userId(), 'dontAskAgainList');\n\n\t\t\tif (dontAskAgainList && dontAskAgainList.some((dontAsk) => dontAsk.action === config.dontAskAgain.action)) {\n\t\t\t\tinstance.confirm(true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tinstance.render();\n\t\tmodalStack.push(instance);\n\t},\n\tpush: (config = {}, fn, onCancel) => {\n\t\tconst instance = createModal(config, fn, onCancel);\n\n\t\tmodalStack.forEach((instance) => {\n\t\t\tinstance.hide();\n\t\t});\n\t\tinstance.render();\n\t\tmodalStack.push(instance);\n\t\treturn instance;\n\t},\n\tcancel: () => {\n\t\tif (modalStack.length) {\n\t\t\tmodalStack[modalStack.length - 1].cancel();\n\t\t}\n\t},\n\tclose: () => {\n\t\tif (modalStack.length) {\n\t\t\tmodalStack[modalStack.length - 1].close();\n\t\t}\n\t},\n\tconfirm: (value) => {\n\t\tif (modalStack.length) {\n\t\t\tmodalStack[modalStack.length - 1].confirm(value);\n\t\t}\n\t},\n\tshowInputError: (text) => {\n\t\tif (modalStack.length) {\n\t\t\tmodalStack[modalStack.length - 1].showInputError(text);\n\t\t}\n\t},\n\tonKeyDown: (event) => {\n\t\tif (!modalStack.length) {\n\t\t\treturn;\n\t\t}\n\t\tconst instance = modalStack[modalStack.length - 1];\n\t\tif (event.key === 'Escape') {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tinstance.close();\n\t\t}\n\n\t\tif (instance && instance.confirmOnEnter && event.key === 'Enter') {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tif (instance.input) {\n\t\t\t\treturn instance.confirm($('.js-modal-input').val());\n\t\t\t}\n\n\t\t\tinstance.confirm(true);\n\t\t}\n\t},\n};\n\nTemplate.rc_modal.helpers({\n\tshowFooter() {\n\t\tconst { showCancelButton, showConfirmButton } = this;\n\t\treturn showCancelButton || showConfirmButton;\n\t},\n\thasAction() {\n\t\treturn !!this.action;\n\t},\n\ttype() {\n\t\treturn this.type && `rc-modal__content-icon rc-modal__content-icon--modal-${this.type}`;\n\t},\n\tmodalIcon() {\n\t\tswitch (this.type) {\n\t\t\tcase 'success':\n\t\t\t\treturn 'checkmark-circled';\n\t\t\tcase 'error':\n\t\t\t\treturn 'circle-cross';\n\t\t\tcase 'info':\n\t\t\t\treturn 'info-circled';\n\t\t\tdefault:\n\t\t\t\treturn `modal-${this.type}`;\n\t\t}\n\t},\n});\n\nTemplate.rc_modal.onRendered(function () {\n\tthis.oldFocus = document.activeElement;\n\tif (this.data.input) {\n\t\t$('.js-modal-input', this.firstNode).focus();\n\t} else if (this.data.showConfirmButton && this.data.confirmOnEnter) {\n\t\t$('.js-confirm', this.firstNode).focus();\n\t}\n\tif (this.data.onRendered) {\n\t\tthis.data.onRendered();\n\t}\n\tthis.data.closeOnEscape && document.addEventListener('keydown', modal.onKeyDown);\n});\n\nTemplate.rc_modal.onDestroyed(function () {\n\tthis.oldFocus && this.oldFocus.focus();\n\tdocument.removeEventListener('keydown', modal.onKeyDown);\n});\n\nTemplate.rc_modal.events({\n\t'click .js-action'(event, instance) {\n\t\t!this.action || this.action.call(instance.data.data, event, instance);\n\t\tevent.stopPropagation();\n\t\tthis.close();\n\t},\n\t'click .js-input-action'(e, instance) {\n\t\t!this.inputAction || this.inputAction.call(instance.data.data, e, instance);\n\t\te.stopPropagation();\n\t},\n\t'click .js-close'(e) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tthis.cancel();\n\t},\n\t'click .js-confirm'(event, instance) {\n\t\tevent.stopPropagation();\n\t\tconst { dontAskAgain } = instance.data;\n\t\tif (dontAskAgain && document.getElementById('dont-ask-me-again').checked) {\n\t\t\tconst dontAskAgainObject = {\n\t\t\t\taction: dontAskAgain.action,\n\t\t\t\tlabel: dontAskAgain.label,\n\t\t\t};\n\n\t\t\tlet dontAskAgainList = getUserPreference(Meteor.userId(), 'dontAskAgainList');\n\t\t\tif (dontAskAgainList) {\n\t\t\t\tdontAskAgainList.push(dontAskAgainObject);\n\t\t\t} else {\n\t\t\t\tdontAskAgainList = [dontAskAgainObject];\n\t\t\t}\n\n\t\t\tMeteor.call('saveUserPreferences', { dontAskAgainList }, function (error) {\n\t\t\t\tif (error) {\n\t\t\t\t\treturn handleError(error);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\tif (instance.data.input) {\n\t\t\tthis.confirm(document.getElementsByClassName('js-modal-input')[0].value);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.confirm(true);\n\t},\n\t'click .rc-modal-wrapper'(event, instance) {\n\t\tif (instance.data.allowOutsideClick === false) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (event.currentTarget === event.target) {\n\t\t\tevent.stopPropagation();\n\t\t\tthis.close();\n\t\t}\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Session } from 'meteor/session';\nimport _ from 'underscore';\n\nimport { appLayout } from '../../../../client/lib/appLayout';\nimport { Messages, ChatSubscription } from '../../../models';\nimport { settings } from '../../../settings';\nimport { callbacks } from '../../../../lib/callbacks';\nimport { roomTypes } from '../../../utils';\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\nimport { call } from '../../../../client/lib/utils/call';\nimport { RoomManager, RoomHistoryManager } from '..';\nimport { RoomManager as NewRoomManager } from '../../../../client/lib/RoomManager';\nimport { Rooms } from '../../../models/client';\nimport { fireGlobalEvent } from '../../../../client/lib/utils/fireGlobalEvent';\n\nwindow.currentTracker = undefined;\n\n// cleanup session when hot reloading\nSession.set('openedRoom', null);\n\nNewRoomManager.on('changed', (rid) => {\n\tSession.set('openedRoom', rid);\n\tRoomManager.openedRoom = rid;\n});\n\nexport const openRoom = async function (type, name, render = true) {\n\twindow.currentTracker && window.currentTracker.stop();\n\twindow.currentTracker = Tracker.autorun(async function (c) {\n\t\tconst user = Meteor.user();\n\t\tif ((user && user.username == null) || (user == null && settings.get('Accounts_AllowAnonymousRead') === false)) {\n\t\t\tappLayout.renderMainLayout();\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst room = roomTypes.findRoom(type, name, user) || (await call('getRoomByTypeAndName', type, name));\n\t\t\tRooms.upsert({ _id: room._id }, _.omit(room, '_id'));\n\n\t\t\tif (room._id !== name && type === 'd') {\n\t\t\t\t// Redirect old url using username to rid\n\t\t\t\tRoomManager.close(type + name);\n\t\t\t\treturn FlowRouter.go('direct', { rid: room._id }, FlowRouter.current().queryParams);\n\t\t\t}\n\n\t\t\tif (room._id === Session.get('openedRoom') && !FlowRouter.getQueryParam('msg')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tRoomManager.open(type + name);\n\n\t\t\tif (render) {\n\t\t\t\tappLayout.renderMainLayout({ center: 'room' });\n\t\t\t}\n\n\t\t\tc.stop();\n\n\t\t\tif (window.currentTracker) {\n\t\t\t\twindow.currentTracker = undefined;\n\t\t\t}\n\n\t\t\tNewRoomManager.open(room._id);\n\n\t\t\tfireGlobalEvent('room-opened', _.omit(room, 'usernames'));\n\n\t\t\tSession.set('editRoomTitle', false);\n\t\t\t// KonchatNotification.removeRoomNotification(params._id)\n\t\t\t// update user's room subscription\n\t\t\tconst sub = ChatSubscription.findOne({ rid: room._id });\n\t\t\tif (sub && sub.open === false) {\n\t\t\t\tcallWithErrorHandling('openRoom', room._id);\n\t\t\t}\n\n\t\t\tif (FlowRouter.getQueryParam('msg')) {\n\t\t\t\tconst messageId = FlowRouter.getQueryParam('msg');\n\t\t\t\tconst msg = { _id: messageId, rid: room._id };\n\n\t\t\t\tconst message = Messages.findOne({ _id: msg._id }) || (await callWithErrorHandling('getMessages', [msg._id]))[0];\n\n\t\t\t\tif (message && (message.tmid || message.tcount)) {\n\t\t\t\t\treturn FlowRouter.setParams({ tab: 'thread', context: message.tmid || message._id });\n\t\t\t\t}\n\n\t\t\t\tRoomHistoryManager.getSurroundingMessages(msg);\n\t\t\t\tFlowRouter.setQueryParams({\n\t\t\t\t\tmsg: undefined,\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn callbacks.run('enter-room', sub);\n\t\t} catch (error) {\n\t\t\tc.stop();\n\t\t\tif (type === 'd') {\n\t\t\t\ttry {\n\t\t\t\t\tconst { rid } = await call('createDirectMessage', ...name.split(', '));\n\t\t\t\t\treturn FlowRouter.go('direct', { rid }, FlowRouter.current().queryParams);\n\t\t\t\t} catch (error) {\n\t\t\t\t\tconsole.error(error);\n\t\t\t\t}\n\t\t\t}\n\t\t\tSession.set('roomNotFound', { type, name, error });\n\t\t\tappLayout.renderMainLayout({ center: 'roomNotFound' });\n\t\t}\n\t});\n};\n","import './popout.html';\nimport { Blaze } from 'meteor/blaze';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nimport { callbacks } from '../../../../lib/callbacks';\n\nexport const popout = {\n\tcontext: null,\n\tisAudioOnly: false,\n\tshowVideoControls: true,\n\tshowStreamControls: false,\n\tx: 0,\n\ty: 0,\n\topen(config = {}, fn) {\n\t\tthis.close();\n\t\tthis.context = Blaze.renderWithData(Template.popout, config, document.body);\n\t\tthis.fn = fn;\n\t\tthis.config = config;\n\t\tthis.onCloseCallback = config.onCloseCallback || null;\n\t\tthis.timer = null;\n\t\tif (config.timer) {\n\t\t\tthis.timer = setTimeout(() => this.close(), config.timer);\n\t\t}\n\t\tif (config.data) {\n\t\t\tthis.isAudioOnly = config.data.isAudioOnly;\n\t\t\tthis.showVideoControls = config.data.showVideoControls;\n\t\t\tthis.showStreamControls = config.data.showStreamControls;\n\t\t}\n\t},\n\tclose() {\n\t\tif (this.context) {\n\t\t\tBlaze.remove(this.context);\n\t\t}\n\t\tthis.context = null;\n\t\tthis.fn = null;\n\t\tif (this.timer) {\n\t\t\tclearTimeout(this.timer);\n\t\t}\n\t\tif (typeof this.onCloseCallback === 'function') {\n\t\t\tthis.onCloseCallback();\n\t\t}\n\t},\n\tdragstart(event) {\n\t\tif (!event.target.classList.contains('dropzone-overlay')) {\n\t\t\tconst popoutElement = document.querySelector('.rc-popout-wrapper');\n\t\t\tsetTimeout(function () {\n\t\t\t\tpopoutElement.style.display = 'none';\n\t\t\t}, 0);\n\t\t}\n\t},\n\tdragover(event) {\n\t\tconst e = event.originalEvent || event;\n\t\te.dataTransfer.dropEffect = 'move';\n\t\te.preventDefault();\n\t},\n\tdragend(event) {\n\t\tif (!event.target.classList.contains('dropzone-overlay')) {\n\t\t\tconst popoutElement = document.querySelector('.rc-popout-wrapper');\n\t\t\tpopoutElement.style.display = 'initial';\n\t\t}\n\t},\n\tdrop(event) {\n\t\tconst e = event.originalEvent || event;\n\t\te.preventDefault();\n\t\t// do not mess with the position if we are dropping files in the dropzone\n\t\tif (!event.target.classList.contains('dropzone-overlay')) {\n\t\t\tconst popoutElement = document.querySelector('.rc-popout-wrapper');\n\t\t\tconst positionTop = e.clientY - popout.y;\n\t\t\tconst positionLeft = e.clientX - popout.x;\n\t\t\tpopoutElement.style.left = `${positionLeft >= 0 ? positionLeft : 0}px`;\n\t\t\tpopoutElement.style.top = `${positionTop >= 0 ? positionTop : 0}px`;\n\t\t}\n\t},\n};\n\nTemplate.popout.helpers({\n\tstate() {\n\t\treturn Template.instance().isMinimized.get() ? 'closed' : 'open';\n\t},\n\tisAudioOnly() {\n\t\treturn Template.instance().isAudioOnly.get();\n\t},\n\tisMuted() {\n\t\treturn Template.instance().isMuted.get();\n\t},\n\tisPlaying() {\n\t\treturn Template.instance().isPlaying.get();\n\t},\n\tshowVideoControls() {\n\t\treturn Template.instance().showVideoControls.get();\n\t},\n\tshowStreamControls() {\n\t\treturn Template.instance().showStreamControls.get();\n\t},\n\tgetStreamStatus() {\n\t\treturn Template.instance().streamStatus.get();\n\t},\n});\n\nTemplate.popout.onRendered(function () {\n\tTemplate.instance().isMinimized.set(popout.isAudioOnly);\n\tTemplate.instance().isAudioOnly.set(popout.isAudioOnly);\n\tTemplate.instance().showVideoControls.set(popout.showVideoControls);\n\tTemplate.instance().showStreamControls.set(popout.showStreamControls);\n\n\tif (this.data.onRendered) {\n\t\tthis.data.onRendered();\n\t}\n});\nTemplate.popout.onCreated(function () {\n\tthis.isMinimized = new ReactiveVar(popout.isAudioOnly);\n\tthis.isAudioOnly = new ReactiveVar(popout.isAudioOnly);\n\tthis.canOpenExternal = new ReactiveVar(popout.canOpenExternal);\n\tthis.showVideoControls = new ReactiveVar(popout.showVideoControls);\n\tthis.showStreamControls = new ReactiveVar(popout.showStreamControls);\n\n\tthis.isMuted = new ReactiveVar(false);\n\tthis.isPlaying = new ReactiveVar(true);\n\tthis.streamStatus = new ReactiveVar('preparing');\n\tdocument.body.addEventListener('dragstart', popout.dragstart, true);\n\tdocument.body.addEventListener('dragover', popout.dragover, true);\n\tdocument.body.addEventListener('dragend', popout.dragend, true);\n\tdocument.body.addEventListener('drop', popout.drop, true);\n});\n\nTemplate.popout.onDestroyed(function () {\n\tpopout.context = null;\n\tdocument.body.removeEventListener('dragstart', popout.dragstart, true);\n\tdocument.body.removeEventListener('dragover', popout.dragover, true);\n\tdocument.body.removeEventListener('dragend', popout.dragend, true);\n\tdocument.body.removeEventListener('drop', popout.drop, true);\n});\n\nTemplate.popout.events({\n\t'click .js-action'(e, instance) {\n\t\t!this.action || this.action.call(instance.data.data, e, instance);\n\t\te.stopPropagation();\n\t\tpopout.close();\n\t},\n\t'click .js-close'(e) {\n\t\te.stopPropagation();\n\t\tpopout.close();\n\t},\n\t'click .js-minimize'(e, i) {\n\t\te.stopPropagation();\n\t\tif (i.isMinimized.get()) {\n\t\t\ti.isMinimized.set(false);\n\t\t\twindow.liveStreamPlayer.setSize(380, 214);\n\t\t} else {\n\t\t\ti.isMinimized.set(true);\n\t\t\twindow.liveStreamPlayer.setSize(0, 0);\n\t\t}\n\t},\n\t'dragstart .rc-popout-wrapper'(event) {\n\t\tconst e = event.originalEvent || event;\n\t\tconst url = (this.data && this.data.streamingSource) || '.rc-popout-wrapper';\n\t\tpopout.x = e.offsetX;\n\t\tpopout.y = e.offsetY;\n\t\te.dataTransfer.setData('application/x-moz-node', e.currentTarget);\n\t\te.dataTransfer.setData('text/plain', url);\n\t\te.dataTransfer.effectAllowed = 'move';\n\t},\n\t'dragend .rc-popout-wrapper'(event) {\n\t\tevent.preventDefault();\n\t},\n\t'click .rc-popout__controls--record'(e, i) {\n\t\te.preventDefault();\n\t\tif (i.streamStatus.get() === 'ready') {\n\t\t\tdocument.querySelector('.streaming-popup').dispatchEvent(new Event('startStreaming'));\n\t\t\ti.streamStatus.set('starting');\n\t\t} else if (i.streamStatus.get() === 'broadcasting') {\n\t\t\tdocument.querySelector('.streaming-popup').dispatchEvent(new Event('stopStreaming'));\n\t\t\ti.streamStatus.set('finished');\n\t\t\tsetTimeout(() => popout && popout.close(), 2000);\n\t\t}\n\t},\n\t'broadcastStreamReady .streaming-popup'(e, i) {\n\t\te.preventDefault();\n\t\ti.streamStatus.set('ready');\n\t},\n\t'broadcastStream .streaming-popup'(e, i) {\n\t\te.preventDefault();\n\t\ti.streamStatus.set('broadcasting');\n\t},\n\t'click .rc-popout__controls--play'(e, i) {\n\t\twindow.liveStreamPlayer.playVideo();\n\t\ti.isPlaying.set(true);\n\t},\n\t'click .rc-popout__controls--pause'(e, i) {\n\t\twindow.liveStreamPlayer.pauseVideo();\n\t\ti.isPlaying.set(false);\n\t},\n\t'click .rc-popout__controls--mute'(e, i) {\n\t\twindow.liveStreamPlayer.mute();\n\t\ti.isMuted.set(true);\n\t},\n\t'click .rc-popout__controls--unmute'(e, i) {\n\t\twindow.liveStreamPlayer.unMute();\n\t\ti.isMuted.set(false);\n\t},\n\t'playerStateChanged .rc-popout'(e, i) {\n\t\tif (e.detail === window.YT.PlayerState.PLAYING) {\n\t\t\ti.isPlaying.set(true);\n\t\t} else if (e.detail === window.YT.PlayerState.PAUSED) {\n\t\t\ti.isPlaying.set(false);\n\t\t}\n\t},\n});\n\ncallbacks.add('afterLogoutCleanUp', () => popout.close(), callbacks.priority.MEDIUM, 'popout-close-after-logout-cleanup');\n","import './popover.html';\nimport { Blaze } from 'meteor/blaze';\nimport { Template } from 'meteor/templating';\nimport _ from 'underscore';\n\nimport { messageBox } from './messageBox';\nimport { MessageAction } from './MessageAction';\nimport { isRtl } from '../../../utils/client';\n\nexport const popover = {\n\trenderedPopover: null,\n\topen({ currentTarget, ...config }) {\n\t\t// Popover position must be computed as soon as possible, avoiding DOM changes over currentTarget\n\t\tconst data = {\n\t\t\ttargetRect: currentTarget?.getBoundingClientRect(),\n\t\t\t...config,\n\t\t};\n\t\tthis.renderedPopover = Blaze.renderWithData(Template.popover, data, document.body);\n\t},\n\tclose() {\n\t\tif (!this.renderedPopover) {\n\t\t\treturn false;\n\t\t}\n\n\t\tBlaze.remove(this.renderedPopover);\n\n\t\tconst { activeElement } = this.renderedPopover.dataVar.curValue;\n\t\tif (activeElement) {\n\t\t\t$(activeElement).removeClass('active');\n\t\t}\n\t},\n};\n\nTemplate.popover.helpers({\n\thasAction() {\n\t\treturn !!this.action;\n\t},\n});\n\nTemplate.popover.onRendered(function () {\n\tif (this.data.onRendered) {\n\t\tthis.data.onRendered();\n\t}\n\n\t$('.rc-popover').click(function (e) {\n\t\tif (e.currentTarget === e.target) {\n\t\t\tpopover.close();\n\t\t}\n\t});\n\tconst { offsetVertical = 0, offsetHorizontal = 0 } = this.data;\n\tconst { activeElement } = this.data;\n\tconst originalWidth = window.innerWidth;\n\tconst popoverContent = this.firstNode.children[0];\n\tconst position = _.throttle(() => {\n\t\tconst direction = typeof this.data.direction === 'function' ? this.data.direction() : this.data.direction;\n\n\t\tconst verticalDirection = /top/.test(direction) ? 'top' : 'bottom';\n\t\tconst rtlDirection = isRtl() ^ /inverted/.test(direction) ? 'left' : 'right';\n\t\tconst rightDirection = /right/.test(direction) ? 'right' : rtlDirection;\n\t\tconst horizontalDirection = /left/.test(direction) ? 'left' : rightDirection;\n\n\t\tconst position = typeof this.data.position === 'function' ? this.data.position() : this.data.position;\n\t\tconst customCSSProperties =\n\t\t\ttypeof this.data.customCSSProperties === 'function' ? this.data.customCSSProperties() : this.data.customCSSProperties;\n\n\t\tconst mousePosition =\n\t\t\ttypeof this.data.mousePosition === 'function'\n\t\t\t\t? this.data.mousePosition()\n\t\t\t\t: this.data.mousePosition || {\n\t\t\t\t\t\tx: this.data.targetRect[horizontalDirection === 'left' ? 'right' : 'left'],\n\t\t\t\t\t\ty: this.data.targetRect[verticalDirection],\n\t\t\t\t  };\n\t\tconst offsetWidth = offsetHorizontal * (horizontalDirection === 'left' ? 1 : -1);\n\t\tconst offsetHeight = offsetVertical * (verticalDirection === 'bottom' ? 1 : -1);\n\n\t\tconst leftDiff = window.innerWidth - originalWidth;\n\n\t\tif (position) {\n\t\t\tpopoverContent.style.top = `${position.top}px`;\n\t\t\tpopoverContent.style.left = `${position.left + leftDiff}px`;\n\t\t} else {\n\t\t\tconst clientHeight = this.data.targetRect.height;\n\t\t\tconst popoverWidth = popoverContent.offsetWidth;\n\t\t\tconst popoverHeight = popoverContent.offsetHeight;\n\t\t\tconst windowWidth = window.innerWidth;\n\t\t\tconst windowHeight = window.innerHeight;\n\n\t\t\tlet top = mousePosition.y - clientHeight + offsetHeight;\n\n\t\t\tif (verticalDirection === 'top') {\n\t\t\t\ttop = mousePosition.y - popoverHeight + offsetHeight;\n\n\t\t\t\tif (top < 0) {\n\t\t\t\t\ttop = 10 + offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (top + popoverHeight > windowHeight) {\n\t\t\t\ttop = windowHeight - 10 - popoverHeight - offsetHeight;\n\t\t\t}\n\n\t\t\tlet left = mousePosition.x - popoverWidth + offsetWidth;\n\n\t\t\tif (horizontalDirection === 'right') {\n\t\t\t\tleft = mousePosition.x + offsetWidth;\n\t\t\t}\n\n\t\t\tif (left + popoverWidth >= windowWidth) {\n\t\t\t\tleft = mousePosition.x - popoverWidth + offsetWidth;\n\t\t\t}\n\n\t\t\tif (left <= 0) {\n\t\t\t\tleft = mousePosition.x + offsetWidth;\n\t\t\t}\n\n\t\t\tpopoverContent.style.top = `${top}px`;\n\t\t\tpopoverContent.style.left = `${left + leftDiff}px`;\n\t\t}\n\n\t\tif (customCSSProperties) {\n\t\t\tObject.keys(customCSSProperties).forEach(function (property) {\n\t\t\t\tpopoverContent.style[property] = customCSSProperties[property];\n\t\t\t});\n\t\t}\n\n\t\tconst realTop = Number(popoverContent.style.top.replace('px', ''));\n\t\tif (realTop + popoverContent.offsetHeight > window.innerHeight) {\n\t\t\tpopoverContent.style.overflow = 'scroll';\n\t\t\tpopoverContent.style.bottom = 0;\n\t\t\tpopoverContent.className = 'rc-popover__content rc-popover__content-scroll';\n\t\t}\n\n\t\tif (activeElement) {\n\t\t\t$(activeElement).addClass('active');\n\t\t}\n\t\tpopoverContent.style.opacity = 1;\n\t}, 50);\n\n\tconst observer = new MutationObserver(position);\n\tobserver.observe(popoverContent, { childList: true, subtree: true });\n\n\t$(window).on('resize', position);\n\tposition();\n\tthis.position = position;\n\tthis.observer = observer;\n\n\tthis.firstNode.style.visibility = 'visible';\n});\n\nTemplate.popover.onDestroyed(function () {\n\tif (this.data.onDestroyed) {\n\t\tthis.data.onDestroyed();\n\t}\n\t$(window).off('resize', this.position);\n\tthis.observer?.disconnect();\n});\n\nTemplate.popover.events({\n\t'click .js-action'(e, instance) {\n\t\t!this.action || this.action.call(this, e, instance.data.data);\n\t\tpopover.close();\n\t},\n\t'click .js-close'() {\n\t\tpopover.close();\n\t},\n\t'click [data-type=\"messagebox-action\"]'(event, t) {\n\t\tconst { id } = event.currentTarget.dataset;\n\t\tconst actions = messageBox.actions.getById(id);\n\t\tactions\n\t\t\t.filter(({ action }) => !!action)\n\t\t\t.forEach(({ action }) => {\n\t\t\t\taction.call(null, {\n\t\t\t\t\t...t.data.data,\n\t\t\t\t\tevent,\n\t\t\t\t});\n\t\t\t});\n\t\tpopover.close();\n\t},\n\t'click [data-type=\"message-action\"]'(e, t) {\n\t\tconst button = MessageAction.getButtonById(e.currentTarget.dataset.id);\n\t\tif ((button != null ? button.action : undefined) != null) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\t\t\tconst { tabBar, rid } = t.data.instance;\n\t\t\tbutton.action.call(t.data.data, e, { tabBar, rid });\n\t\t\tpopover.close();\n\t\t\treturn false;\n\t\t}\n\t},\n});\n\nTemplate.popover.helpers({\n\tisSafariIos: /iP(ad|hone|od).+Version\\/[\\d\\.]+.*Safari/i.test(navigator.userAgent),\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport { Emitter } from '@rocket.chat/emitter';\n\nimport { RoomHistoryManager } from './RoomHistoryManager';\nimport { RoomManager } from './RoomManager';\nimport { ChatSubscription, ChatMessage } from '../../../models';\n/* DEFINITIONS\n- If window loses focus user needs to scroll or click/touch some place\n- On hit ESC enable read, force read of current room and remove unread mark\n- When user change room disable read until user interaction\n- Only read if mark of *first-unread* is visible for user or if flag *force* was passed\n- Always read the opened room\n- The default method *read* has a delay of 2000ms to prevent multiple reads and to user be able to see the mark\n*/\n\n// Meteor.startup ->\n// window.addEventListener 'focus', ->\n// readMessage.refreshUnreadMark(undefined, true)\n\nexport const readMessage = new (class extends Emitter {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.debug = false;\n\t\tthis.enable();\n\t}\n\n\tread(rid = Session.get('openedRoom')) {\n\t\tif (!this.enabled) {\n\t\t\tthis.log('readMessage -> readNow canceled by enabled: false');\n\t\t\treturn;\n\t\t}\n\n\t\tconst subscription = ChatSubscription.findOne({ rid });\n\t\tif (subscription == null) {\n\t\t\tthis.log('readMessage -> readNow canceled, no subscription found for rid:', rid);\n\t\t\treturn;\n\t\t}\n\n\t\tif (subscription.alert === false && subscription.unread === 0) {\n\t\t\tthis.log('readMessage -> readNow canceled, alert', subscription.alert, 'and unread', subscription.unread);\n\t\t\treturn;\n\t\t}\n\n\t\tconst room = RoomManager.getOpenedRoomByRid(rid);\n\t\tif (room == null) {\n\t\t\tthis.log('readMessage -> readNow canceled, no room found for typeName:', subscription.t + subscription.name);\n\t\t\treturn;\n\t\t}\n\n\t\t// Only read messages if user saw the first unread message\n\t\tconst unreadMark = $('.message.first-unread');\n\t\tif (unreadMark.length > 0) {\n\t\t\tconst position = unreadMark.position();\n\t\t\tconst visible = (position != null ? position.top : undefined) >= 0;\n\t\t\tif (!visible && room.unreadSince.get()) {\n\t\t\t\tthis.log('readMessage -> readNow canceled, unread mark visible:', visible, 'unread since exists', room.unreadSince.get() != null);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// if unread mark is not visible and there is more more not loaded unread messages\n\t\t} else if (RoomHistoryManager.getRoom(rid).unreadNotLoaded.get() > 0) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn this.readNow(rid);\n\t}\n\n\treadNow(rid = Session.get('openedRoom')) {\n\t\tif (rid == null) {\n\t\t\tthis.log('readMessage -> readNow canceled, no rid informed');\n\t\t\treturn;\n\t\t}\n\n\t\tconst subscription = ChatSubscription.findOne({ rid });\n\t\tif (subscription == null) {\n\t\t\tthis.log('readMessage -> readNow canceled, no subscription found for rid:', rid);\n\t\t\treturn;\n\t\t}\n\n\t\treturn Meteor.call('readMessages', rid, () => {\n\t\t\tRoomHistoryManager.getRoom(rid).unreadNotLoaded.set(0);\n\t\t\treturn this.emit(rid);\n\t\t});\n\t}\n\n\tlog(...args) {\n\t\treturn this.debug && console.log(...args);\n\t}\n\n\tdisable() {\n\t\tthis.enabled = false;\n\t}\n\n\tenable() {\n\t\tthis.enabled = document.hasFocus();\n\t}\n\n\tisEnable() {\n\t\treturn this.enabled === true;\n\t}\n\n\trefreshUnreadMark(rid) {\n\t\tif (rid == null) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst subscription = ChatSubscription.findOne({ rid }, { reactive: false });\n\t\tif (subscription == null) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst room = RoomManager.openedRooms[subscription.t + subscription.name];\n\t\tif (room == null) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!subscription.alert && subscription.unread === 0) {\n\t\t\t$('.message.first-unread').removeClass('first-unread');\n\t\t\troom.unreadSince.set(undefined);\n\t\t\treturn;\n\t\t}\n\n\t\tlet lastReadRecord = ChatMessage.findOne(\n\t\t\t{\n\t\t\t\trid: subscription.rid,\n\t\t\t\tts: {\n\t\t\t\t\t$lt: subscription.ls,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tsort: {\n\t\t\t\t\tts: -1,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t\tconst { unreadNotLoaded } = RoomHistoryManager.getRoom(rid);\n\n\t\tif (lastReadRecord == null && unreadNotLoaded.get() === 0) {\n\t\t\tlastReadRecord = { ts: new Date(0) };\n\t\t}\n\n\t\troom.unreadSince.set((lastReadRecord || unreadNotLoaded.get() > 0) && subscription.ls);\n\n\t\tif (!lastReadRecord) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst firstUnreadRecord = ChatMessage.findOne(\n\t\t\t{\n\t\t\t\t'rid': subscription.rid,\n\t\t\t\t'ts': {\n\t\t\t\t\t$gt: lastReadRecord.ts,\n\t\t\t\t},\n\t\t\t\t'u._id': {\n\t\t\t\t\t$ne: Meteor.userId(),\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tsort: {\n\t\t\t\t\tts: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\n\t\tif (firstUnreadRecord) {\n\t\t\troom.unreadFirstId = firstUnreadRecord._id;\n\t\t\t$('.message.first-unread').removeClass('first-unread');\n\t\t\t$(`.message#${firstUnreadRecord._id}`).addClass('first-unread');\n\t\t}\n\t}\n})();\n\nMeteor.startup(function () {\n\t$(window)\n\t\t.on('blur', () => readMessage.disable())\n\t\t.on('focus', () => {\n\t\t\treadMessage.enable();\n\t\t\treadMessage.read();\n\t\t})\n\t\t.on('touchend', () => {\n\t\t\treadMessage.enable();\n\t\t})\n\t\t.on('keyup', (e) => {\n\t\t\tconst key = e.which;\n\t\t\tif (key === 27) {\n\t\t\t\t// ESCAPE KEY\n\t\t\t\tconst rid = Session.get('openedRoom');\n\t\t\t\tif (!rid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treadMessage.readNow(rid);\n\t\t\t\treadMessage.refreshUnreadMark(rid);\n\t\t\t}\n\t\t});\n});\n","export { modal } from './lib/modal';\nexport { SideNav } from './lib/SideNav';\nexport { AccountBox } from './lib/AccountBox';\nexport { menu } from './lib/menu';\nexport { MessageAction } from './lib/MessageAction';\nexport { messageBox } from './lib/messageBox';\nexport { popover } from './lib/popover';\nexport { readMessage } from './lib/readMessages';\nexport { RoomManager } from './lib/RoomManager';\nexport { upsertMessage, RoomHistoryManager, normalizeThreadMessage } from './lib/RoomHistoryManager';\nexport { mainReady } from './lib/mainReady';\nexport { IframeLogin, iframeLogin } from './lib/IframeLogin';\nexport { popout } from './lib/popout';\nexport { messageProperties } from '../lib/MessageProperties';\nexport { MessageTypes } from '../lib/MessageTypes';\nexport { Message } from '../lib/Message';\nexport { openRoom } from './lib/openRoom';\nexport * from './lib/collapseArrow';\nexport * from './lib/messageArgs';\n","import { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { Meteor } from 'meteor/meteor';\nimport s from 'underscore.string';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\n\nimport { MessageTypes } from './MessageTypes';\nimport { settings } from '../../settings';\n\nexport const Message = {\n\tparse(msg, language) {\n\t\tconst messageType = MessageTypes.getType(msg);\n\t\tif (messageType) {\n\t\t\tif (messageType.render) {\n\t\t\t\treturn messageType.render(msg);\n\t\t\t}\n\t\t\tif (messageType.template) {\n\t\t\t\t// Render message\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (messageType.message) {\n\t\t\t\tif (!language) {\n\t\t\t\t\tlanguage = Meteor._localStorage.getItem('userLanguage');\n\t\t\t\t}\n\t\t\t\tconst data = (typeof messageType.data === 'function' && messageType.data(msg)) || {};\n\t\t\t\treturn TAPi18n.__(messageType.message, data, language);\n\t\t\t}\n\t\t}\n\t\tif (msg.u && msg.u.username === settings.get('Chatops_Username')) {\n\t\t\tmsg.html = msg.msg;\n\t\t\treturn msg.html;\n\t\t}\n\t\tmsg.html = msg.msg;\n\t\tif (s.trim(msg.html) !== '') {\n\t\t\tmsg.html = escapeHTML(msg.html);\n\t\t}\n\t\tmsg.html = msg.html.replace(/\\n/gm, '<br/>');\n\t\treturn msg.html;\n\t},\n};\n","import GraphemeSplitter from 'grapheme-splitter';\n\nimport { emoji } from '../../emoji';\n\nconst splitter = new GraphemeSplitter();\n\nexport const messageProperties = {\n\tlength: (message) => splitter.countGraphemes(message),\n\n\tmessageWithoutEmojiShortnames: (message) =>\n\t\tmessage.replace(/:\\w+:/gm, (match) => {\n\t\t\tif (emoji.list[match] !== undefined) {\n\t\t\t\treturn ' ';\n\t\t\t}\n\t\t\treturn match;\n\t\t}),\n};\n","export const MessageTypes = new (class {\n\tconstructor() {\n\t\tthis.types = {};\n\t}\n\n\tregisterType(options) {\n\t\tthis.types[options.id] = options;\n\t\treturn options;\n\t}\n\n\tgetType(message) {\n\t\treturn this.types[message && message.t];\n\t}\n\n\tisSystemMessage(message) {\n\t\tconst type = this.types[message && message.t];\n\t\treturn type && type.system;\n\t}\n})();\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/index.js');\n}\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/index.js');\n}\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { settings } from '../../../../../settings';\nimport { modal } from '../../../../../ui-utils/client';\nimport { APIClient, t } from '../../../../../utils';\nimport { hasRole } from '../../../../../authorization';\nimport './closeRoom.html';\nimport { handleError } from '../../../../../../client/lib/utils/handleError';\n\nconst validateRoomComment = (comment) => {\n\tif (!settings.get('Livechat_request_comment_when_closing_conversation')) {\n\t\treturn true;\n\t}\n\n\treturn comment?.length > 0;\n};\n\nconst validateRoomTags = (tagsRequired, tags) => {\n\tif (!tagsRequired) {\n\t\treturn true;\n\t}\n\n\treturn tags?.length > 0;\n};\n\nconst checkUserTagPermission = (availableUserTags = [], tag) => {\n\tif (hasRole(Meteor.userId(), ['admin', 'livechat-manager'])) {\n\t\treturn true;\n\t}\n\n\treturn availableUserTags.includes(tag);\n};\n\nTemplate.closeRoom.helpers({\n\tinvalidComment() {\n\t\treturn Template.instance().invalidComment.get();\n\t},\n\ttags() {\n\t\treturn Template.instance().tags.get();\n\t},\n\tinvalidTags() {\n\t\treturn Template.instance().invalidTags.get();\n\t},\n\tavailableUserTags() {\n\t\treturn Template.instance().availableUserTags.get();\n\t},\n\ttagsPlaceHolder() {\n\t\tlet placeholder = TAPi18n.__('Enter_a_tag');\n\n\t\tif (!Template.instance().tagsRequired.get()) {\n\t\t\tplaceholder = placeholder.concat(`(${TAPi18n.__('Optional')})`);\n\t\t}\n\n\t\treturn placeholder;\n\t},\n\thasAvailableTags() {\n\t\tconst tags = Template.instance().availableTags.get();\n\t\treturn tags?.length > 0;\n\t},\n\tcanRemoveTag(availableUserTags, tag) {\n\t\treturn checkUserTagPermission(availableUserTags, tag);\n\t},\n});\n\nTemplate.closeRoom.events({\n\tasync 'submit .close-room__content'(e, instance) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tconst comment = instance.$('#comment').val();\n\t\tinstance.invalidComment.set(!validateRoomComment(comment));\n\t\tif (instance.invalidComment.get()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst tagsRequired = instance.tagsRequired.get();\n\t\tconst tags = instance.tags.get();\n\n\t\tinstance.invalidTags.set(!validateRoomTags(tagsRequired, tags));\n\t\tif (instance.invalidTags.get()) {\n\t\t\treturn;\n\t\t}\n\n\t\tMeteor.call('livechat:closeRoom', this.rid, comment, { clientAction: true, tags }, function (error /* , result*/) {\n\t\t\tif (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t\treturn handleError(error);\n\t\t\t}\n\n\t\t\tmodal.open({\n\t\t\t\ttitle: t('Chat_closed'),\n\t\t\t\ttext: t('Chat_closed_successfully'),\n\t\t\t\ttype: 'success',\n\t\t\t\ttimer: 1000,\n\t\t\t\tshowConfirmButton: false,\n\t\t\t});\n\t\t});\n\t},\n\t'click .remove-tag'(e, instance) {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\n\t\tconst tag = this.valueOf();\n\t\tconst availableTags = instance.availableTags.get();\n\t\tconst hasAvailableTags = availableTags?.length > 0;\n\t\tconst availableUserTags = instance.availableUserTags.get();\n\t\tif (hasAvailableTags && !checkUserTagPermission(availableUserTags, tag)) {\n\t\t\treturn;\n\t\t}\n\n\t\tlet tags = instance.tags.get();\n\t\ttags = tags.filter((el) => el !== tag);\n\t\tinstance.tags.set(tags);\n\t},\n\t'click #addTag'(e, instance) {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\n\t\tif ($('#tagSelect').find(':selected').is(':disabled')) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst tags = [...instance.tags.get()];\n\t\tconst tagVal = $('#tagSelect').val();\n\t\tif (tagVal === '' || tags.includes(tagVal)) {\n\t\t\treturn;\n\t\t}\n\n\t\ttags.push(tagVal);\n\t\tinstance.tags.set(tags);\n\t\t$('#tagSelect').val('placeholder');\n\t},\n\t'keydown #tagInput'(e, instance) {\n\t\tif (e.which === 13) {\n\t\t\te.stopPropagation();\n\t\t\te.preventDefault();\n\n\t\t\tconst tags = [...instance.tags.get()];\n\t\t\tconst tagVal = $('#tagInput').val();\n\t\t\tif (tagVal === '' || tags.includes(tagVal)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttags.push(tagVal);\n\t\t\tinstance.tags.set(tags);\n\t\t\t$('#tagInput').val('');\n\t\t}\n\t},\n});\n\nTemplate.closeRoom.onRendered(function () {\n\tthis.find('#comment').focus();\n});\n\nTemplate.closeRoom.onCreated(async function () {\n\tthis.tags = new ReactiveVar([]);\n\tthis.invalidComment = new ReactiveVar(false);\n\tthis.invalidTags = new ReactiveVar(false);\n\tthis.tagsRequired = new ReactiveVar(false);\n\tthis.availableTags = new ReactiveVar([]);\n\tthis.availableUserTags = new ReactiveVar([]);\n\tthis.agentDepartments = new ReactiveVar([]);\n\n\tthis.onEnterTag = () => this.invalidTags.set(!validateRoomTags(this.tagsRequired.get(), this.tags.get()));\n\n\tconst { rid } = Template.currentData();\n\tconst { room } = await APIClient.v1.get(`rooms.info?roomId=${rid}`);\n\tthis.tags.set(room?.tags || []);\n\n\tif (room?.departmentId) {\n\t\tconst { department } = await APIClient.v1.get(`livechat/department/${room.departmentId}?includeAgents=false`);\n\t\tthis.tagsRequired.set(department?.requestTagBeforeClosingChat);\n\t}\n\n\tconst uid = Meteor.userId();\n\tconst { departments } = await APIClient.v1.get(`livechat/agents/${uid}/departments`);\n\tconst agentDepartments = departments.map((dept) => dept.departmentId);\n\tthis.agentDepartments.set(agentDepartments);\n\n\tMeteor.call('livechat:getTagsList', (err, tagsList) => {\n\t\tthis.availableTags.set(tagsList);\n\t\tconst isAdmin = hasRole(uid, ['admin', 'livechat-manager']);\n\t\tconst availableTags = tagsList\n\t\t\t.filter(({ departments }) => isAdmin || departments.length === 0 || departments.some((i) => agentDepartments.includes(i)))\n\t\t\t.map(({ name }) => name);\n\t\tthis.availableUserTags.set(availableTags);\n\t});\n});\n","import { IBusinessHourBehavior } from './IBusinessHourBehavior';\nimport { SingleBusinessHourBehavior } from './Single';\nimport { ILivechatBusinessHour } from '../../../../../../definition/ILivechatBusinessHour';\n\nclass BusinessHoursManager {\n\tprivate behavior: IBusinessHourBehavior;\n\n\tconstructor(businessHour: IBusinessHourBehavior) {\n\t\tthis.setBusinessHourBehavior(businessHour);\n\t}\n\n\tsetBusinessHourBehavior(businessHour: IBusinessHourBehavior): void {\n\t\tthis.registerBusinessHourBehavior(businessHour);\n\t}\n\n\tregisterBusinessHourBehavior(behavior: IBusinessHourBehavior): void {\n\t\tthis.behavior = behavior;\n\t}\n\n\tgetTemplate(): string {\n\t\treturn this.behavior.getView();\n\t}\n\n\tshowCustomTemplate(businessHourData: ILivechatBusinessHour): boolean {\n\t\treturn this.behavior.showCustomTemplate(businessHourData);\n\t}\n\n\tshowBackButton(): boolean {\n\t\treturn this.behavior.showBackButton();\n\t}\n\n\tshowTimezoneTemplate(): boolean {\n\t\treturn this.behavior.showTimezoneTemplate();\n\t}\n}\n\nexport const businessHourManager = new BusinessHoursManager(new SingleBusinessHourBehavior());\n","import { IBusinessHourBehavior } from './IBusinessHourBehavior';\n\nexport class SingleBusinessHourBehavior implements IBusinessHourBehavior {\n\tgetView(): string {\n\t\treturn 'livechatBusinessHoursForm';\n\t}\n\n\tshowCustomTemplate(): boolean {\n\t\treturn false;\n\t}\n\n\tshowBackButton(): boolean {\n\t\treturn false;\n\t}\n\n\tshowTimezoneTemplate(): boolean {\n\t\treturn false;\n\t}\n}\n","export const customFormTemplate = new Map();\n\nexport const addCustomFormTemplate = (form, customTemplateName) => customFormTemplate.set(form, customTemplateName);\n\nexport const removeCustomTemplate = (form) => customFormTemplate.delete(form);\n\nexport const getCustomFormTemplate = (form) => customFormTemplate.get(form);\n","function ab2str(buf: ArrayBuffer): string {\n\treturn String.fromCharCode(...new Uint16Array(buf));\n}\n\nfunction str2ab(str: string): ArrayBuffer {\n\tconst buf = new ArrayBuffer(str.length * 2); // 2 bytes for each char\n\tconst bufView = new Uint16Array(buf);\n\tfor (let i = 0, strLen = str.length; i < strLen; i++) {\n\t\tbufView[i] = str.charCodeAt(i);\n\t}\n\treturn buf;\n}\n\nexport async function generateKey(): Promise<string> {\n\tconst key = await crypto.subtle.generateKey({ name: 'AES-GCM', length: 256 }, true, ['encrypt', 'decrypt']);\n\tconst exportedKey = await crypto.subtle.exportKey('jwk', key);\n\treturn JSON.stringify(exportedKey);\n}\n\nexport async function getKeyFromString(keyStr: string): Promise<CryptoKey> {\n\tconst key = JSON.parse(keyStr);\n\treturn crypto.subtle.importKey('jwk', key, { name: 'AES-GCM', length: 256 }, true, ['encrypt', 'decrypt']);\n}\n\nexport async function encrypt(text: string, key: CryptoKey): Promise<string> {\n\tconst vector = crypto.getRandomValues(new Uint8Array(16));\n\tconst data = new TextEncoder().encode(text);\n\tconst enc = await crypto.subtle.encrypt({ name: 'AES-GCM', iv: vector }, key, data);\n\tconst cipherText = new Uint8Array(enc);\n\treturn encodeURIComponent(btoa(ab2str(vector) + ab2str(cipherText)));\n}\n\nexport async function decrypt(data: string, key: CryptoKey): Promise<string> {\n\tconst binaryData = atob(decodeURIComponent(data));\n\tconst vector = new Uint8Array(new Uint16Array(str2ab(binaryData.slice(0, 16))));\n\tconst buffer = new Uint8Array(new Uint16Array(str2ab(binaryData.slice(16))));\n\tconst decoded = await crypto.subtle.decrypt({ name: 'AES-GCM', iv: vector }, key, buffer);\n\treturn new TextDecoder().decode(decoded);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { Session } from 'meteor/session';\nimport { ReactiveVar } from 'meteor/reactive-var';\n\nimport { APIClient } from '../../../utils/client';\nimport { settings } from '../../../settings/client';\nimport { encrypt, getKeyFromString } from './crypto';\n\nimport './externalFrameContainer.html';\n\nTemplate.ExternalFrameContainer.helpers({\n\texternalFrameUrl() {\n\t\tconst authToken = Template.instance().authToken.get();\n\n\t\tif (!authToken) {\n\t\t\treturn '';\n\t\t}\n\n\t\tconst frameURLSetting = settings.get('Omnichannel_External_Frame_URL');\n\n\t\ttry {\n\t\t\tconst frameURL = new URL(frameURLSetting);\n\n\t\t\tframeURL.searchParams.append('uid', Meteor.userId());\n\t\t\tframeURL.searchParams.append('rid', Session.get('openedRoom'));\n\t\t\tframeURL.searchParams.append('t', authToken);\n\n\t\t\treturn frameURL.toString();\n\t\t} catch {\n\t\t\tconsole.error('Invalid URL provided to external frame');\n\n\t\t\treturn '';\n\t\t}\n\t},\n});\n\nTemplate.ExternalFrameContainer.onCreated(async function () {\n\tthis.authToken = new ReactiveVar();\n\n\tconst { 'X-Auth-Token': authToken } = APIClient.getCredentials();\n\tconst keyStr = settings.get('Omnichannel_External_Frame_Encryption_JWK');\n\n\tif (keyStr) {\n\t\treturn this.authToken.set(await encrypt(authToken, await getKeyFromString(keyStr)));\n\t}\n\n\tthis.authToken.set(authToken);\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { generateKey } from './crypto';\n\nMeteor.methods({\n\tasync omnichannelExternalFrameGenerateKey() {\n\t\tconst key = await generateKey();\n\t\tMeteor.call('saveSetting', 'Omnichannel_External_Frame_Encryption_JWK', key);\n\t},\n});\n","import './generateNewKey';\nimport './tabBar';\nimport './externalFrameContainer';\n","import { useMemo } from 'react';\n\nimport { useSetting } from '../../../../client/contexts/SettingsContext';\nimport { addAction } from '../../../../client/views/room/lib/Toolbox';\n\naddAction('omnichannel-external-frame', () => {\n\tconst enabled = useSetting('Omnichannel_External_Frame_Enabled');\n\n\treturn useMemo(\n\t\t() =>\n\t\t\tenabled\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['live'],\n\t\t\t\t\t\tid: 'omnichannel-external-frame',\n\t\t\t\t\t\ttitle: 'Omnichannel_External_Frame',\n\t\t\t\t\t\ticon: 'cube',\n\t\t\t\t\t\ttemplate: 'ExternalFrameContainer',\n\t\t\t\t\t\torder: -1,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[enabled],\n\t);\n});\n","import { actionLinks } from '../../../action-links/client';\n\nactionLinks.register('createLivechatCall', function (message, params, instance) {\n\tinstance.tabBar.open('video');\n});\n","import { Mongo } from 'meteor/mongo';\n\nexport const LivechatInquiry = new Mongo.Collection(null);\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../../settings';\nimport { getUserPreference } from '../../../utils';\nimport { Subscriptions, Users } from '../../../models';\nimport { CustomSounds } from '../../../custom-sounds/client';\n\nlet audio = null;\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tif (!settings.get('Livechat_continuous_sound_notification_new_livechat_room')) {\n\t\t\taudio && audio.pause();\n\t\t\treturn;\n\t\t}\n\n\t\tconst subs = Subscriptions.find({ t: 'l', ls: { $exists: 0 }, open: true }).count();\n\t\tif (subs === 0) {\n\t\t\taudio && audio.pause();\n\t\t\treturn;\n\t\t}\n\n\t\tconst user = Users.findOne(Meteor.userId(), {\n\t\t\tfields: {\n\t\t\t\t'settings.preferences.newRoomNotification': 1,\n\t\t\t},\n\t\t});\n\n\t\tconst newRoomNotification = getUserPreference(user, 'newRoomNotification');\n\n\t\taudio = CustomSounds.play(newRoomNotification, { loop: true });\n\t});\n});\n","import '../lib/messageTypes';\nimport './roomType';\nimport './route';\nimport './ui';\nimport './tabBar';\nimport './startup/notifyUnreadRooms';\nimport './views/app/dialog/closeRoom';\nimport './stylesheets/livechat.css';\nimport './externalFrame';\nimport './lib/messageTypes';\n","import { roomTypes } from '../../utils';\nimport LivechatRoomType from '../lib/LivechatRoomType';\n\nroomTypes.add(new LivechatRoomType());\n","import { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { AccountBox } from '../../ui-utils';\nimport '../../../client/views/omnichannel/routes';\n\nexport const livechatManagerRoutes = FlowRouter.group({\n\tprefix: '/omnichannel',\n\tname: 'omnichannel',\n});\n\nexport const load = () => import('./views/admin');\n\nAccountBox.addRoute(\n\t{\n\t\tname: 'livechat-dashboard',\n\t\tpath: '/dashboard',\n\t\tsideNav: 'omnichannelFlex',\n\t\ti18nPageTitle: 'Livechat_Dashboard',\n\t\tpageTemplate: 'livechatDashboard',\n\t},\n\tlivechatManagerRoutes,\n\tload,\n);\n\nAccountBox.addRoute(\n\t{\n\t\tname: 'livechat-departments',\n\t\tpath: '/departments',\n\t\tsideNav: 'omnichannelFlex',\n\t\ti18nPageTitle: 'Departments',\n\t\tpageTemplate: 'livechatDepartments',\n\t},\n\tlivechatManagerRoutes,\n\tload,\n);\n\nAccountBox.addRoute(\n\t{\n\t\tname: 'livechat-department-edit',\n\t\tpath: '/departments/:_id/edit',\n\t\tsideNav: 'omnichannelFlex',\n\t\ti18nPageTitle: 'Edit_Department',\n\t\tpageTemplate: 'livechatDepartmentForm',\n\t\tcustomContainer: true,\n\t},\n\tlivechatManagerRoutes,\n\tload,\n);\n\nAccountBox.addRoute(\n\t{\n\t\tname: 'livechat-department-new',\n\t\tpath: '/departments/new',\n\t\tsideNav: 'omnichannelFlex',\n\t\ti18nPageTitle: 'New_Department',\n\t\tpageTemplate: 'livechatDepartmentForm',\n\t\tcustomContainer: true,\n\t},\n\tlivechatManagerRoutes,\n\tload,\n);\n","import { lazy } from 'react';\n\nimport { addAction } from '../../../client/views/room/lib/Toolbox';\n\naddAction('room-info', {\n\tgroups: ['live'],\n\tid: 'room-info',\n\ttitle: 'Room_Info',\n\ticon: 'info-circled',\n\ttemplate: lazy(() => import('../../../client/views/omnichannel/directory/chats/contextualBar/ChatsContextualBar')),\n\torder: 0,\n});\n\naddAction('contact-chat-history', {\n\tgroups: ['live'],\n\tid: 'contact-chat-history',\n\ttitle: 'Contact_Chat_History',\n\ticon: 'clock',\n\ttemplate: 'contactChatHistory',\n\torder: 11,\n});\n","import { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../settings';\nimport { hasAllPermission } from '../../authorization';\nimport { AccountBox, MessageTypes } from '../../ui-utils';\n\nTracker.autorun((c) => {\n\t// import omnichannel tabbar templates right away if omnichannel enabled\n\tif (!settings.get('Livechat_enabled')) {\n\t\treturn;\n\t}\n\timport('./views/regular');\n\tc.stop();\n});\n\nAccountBox.addItem({\n\tname: 'Omnichannel',\n\ticon: 'headset',\n\thref: '/omnichannel/current',\n\tsideNav: 'omnichannelFlex',\n\tcondition: () => settings.get('Livechat_enabled') && hasAllPermission('view-livechat-manager'),\n});\n\nMessageTypes.registerType({\n\tid: 'livechat-close',\n\tsystem: true,\n\tmessage: 'Conversation_closed',\n\tdata(message) {\n\t\treturn {\n\t\t\tcomment: message.msg,\n\t\t};\n\t},\n});\n\nMessageTypes.registerType({\n\tid: 'livechat-started',\n\tsystem: true,\n\tmessage: 'Chat_started',\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport { ChatRoom } from '../../models';\nimport { settings } from '../../settings';\nimport { hasPermission } from '../../authorization';\nimport { openRoom } from '../../ui-utils';\nimport { RoomMemberActions, RoomSettingsEnum, UiTextContext, RoomTypeRouteConfig, RoomTypeConfig } from '../../utils';\nimport { getAvatarURL } from '../../utils/lib/getAvatarURL';\n\nlet LivechatInquiry;\nif (Meteor.isClient) {\n\t({ LivechatInquiry } = require('../client/collections/LivechatInquiry'));\n}\n\nclass LivechatRoomRoute extends RoomTypeRouteConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tname: 'live',\n\t\t\tpath: '/live/:id/:tab?/:context?',\n\t\t});\n\t}\n\n\taction(params) {\n\t\topenRoom('l', params.id);\n\t}\n\n\tlink(sub) {\n\t\treturn {\n\t\t\tid: sub.rid,\n\t\t};\n\t}\n}\n\nexport default class LivechatRoomType extends RoomTypeConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tidentifier: 'l',\n\t\t\torder: 5,\n\t\t\ticon: 'omnichannel',\n\t\t\tlabel: 'Omnichannel',\n\t\t\troute: new LivechatRoomRoute(),\n\t\t});\n\n\t\tthis.notSubscribedTpl = 'livechatNotSubscribed';\n\t\tthis.readOnlyTpl = 'livechatReadOnly';\n\t}\n\n\tenableMembersListProfile() {\n\t\treturn true;\n\t}\n\n\tfindRoom(identifier) {\n\t\treturn ChatRoom.findOne({ _id: identifier });\n\t}\n\n\troomName(roomData) {\n\t\treturn roomData.name || roomData.fname || roomData.label;\n\t}\n\n\tcondition() {\n\t\treturn settings.get('Livechat_enabled') && hasPermission('view-l-room');\n\t}\n\n\tcanSendMessage(rid) {\n\t\tconst room = ChatRoom.findOne({ _id: rid }, { fields: { open: 1 } });\n\t\treturn room && room.open === true;\n\t}\n\n\tgetUserStatus(rid) {\n\t\tconst room = Session.get(`roomData${rid}`);\n\t\tif (room) {\n\t\t\treturn room.v && room.v.status;\n\t\t}\n\t\tconst inquiry = LivechatInquiry.findOne({ rid });\n\t\treturn inquiry && inquiry.v && inquiry.v.status;\n\t}\n\n\tallowRoomSettingChange(room, setting) {\n\t\tswitch (setting) {\n\t\t\tcase RoomSettingsEnum.JOIN_CODE:\n\t\t\t\treturn false;\n\t\t\tdefault:\n\t\t\t\treturn true;\n\t\t}\n\t}\n\n\tallowMemberAction(room, action) {\n\t\treturn [RoomMemberActions.INVITE, RoomMemberActions.JOIN].includes(action);\n\t}\n\n\tgetUiText(context) {\n\t\tswitch (context) {\n\t\t\tcase UiTextContext.HIDE_WARNING:\n\t\t\t\treturn 'Hide_Livechat_Warning';\n\t\t\tcase UiTextContext.LEAVE_WARNING:\n\t\t\t\treturn 'Hide_Livechat_Warning';\n\t\t\tdefault:\n\t\t\t\treturn '';\n\t\t}\n\t}\n\n\treadOnly(rid) {\n\t\tconst room = ChatRoom.findOne({ _id: rid }, { fields: { open: 1, servedBy: 1 } });\n\t\tif (!room || !room.open) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst inquiry = LivechatInquiry.findOne({ rid }, { fields: { status: 1 } });\n\t\tif (inquiry && inquiry.status === 'queued') {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn !room.servedBy;\n\t}\n\n\tgetAvatarPath(roomData) {\n\t\treturn getAvatarURL({ username: `@${this.roomName(roomData)}` });\n\t}\n\n\topenCustomProfileTab(instance, room, username) {\n\t\tif (!room || !room.v || room.v.username !== username) {\n\t\t\treturn false;\n\t\t}\n\n\t\tinstance.tabBar.openUserInfo();\n\t\treturn true;\n\t}\n\n\tshowQuickActionButtons() {\n\t\treturn true;\n\t}\n\n\tisLivechatRoom() {\n\t\treturn true;\n\t}\n}\n","import formatDistance from 'date-fns/formatDistance';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport moment from 'moment';\n\nimport { MessageTypes } from '../../ui-utils';\n\nMessageTypes.registerType({\n\tid: 'livechat_navigation_history',\n\tsystem: true,\n\tmessage: 'New_visitor_navigation',\n\tdata(message) {\n\t\tif (!message.navigation || !message.navigation.page) {\n\t\t\treturn;\n\t\t}\n\t\treturn {\n\t\t\thistory: `${(message.navigation.page.title ? `${message.navigation.page.title} - ` : '') + message.navigation.page.location.href}`,\n\t\t};\n\t},\n});\n\nMessageTypes.registerType({\n\tid: 'livechat_transfer_history',\n\tsystem: true,\n\tmessage: 'New_chat_transfer',\n\tdata(message) {\n\t\tif (!message.transferData) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { comment } = message.transferData;\n\t\tconst commentLabel = comment && comment !== '' ? '_with_a_comment' : '';\n\t\tconst from =\n\t\t\tmessage.transferData.transferredBy && (message.transferData.transferredBy.name || message.transferData.transferredBy.username);\n\t\tconst transferTypes = {\n\t\t\tagent: () =>\n\t\t\t\tTAPi18n.__(`Livechat_transfer_to_agent${commentLabel}`, {\n\t\t\t\t\tfrom,\n\t\t\t\t\tto:\n\t\t\t\t\t\tmessage.transferData.transferredTo && (message.transferData.transferredTo.name || message.transferData.transferredTo.username),\n\t\t\t\t\t...(comment && { comment }),\n\t\t\t\t}),\n\t\t\tdepartment: () =>\n\t\t\t\tTAPi18n.__(`Livechat_transfer_to_department${commentLabel}`, {\n\t\t\t\t\tfrom,\n\t\t\t\t\tto: message.transferData.nextDepartment && message.transferData.nextDepartment.name,\n\t\t\t\t\t...(comment && { comment }),\n\t\t\t\t}),\n\t\t\tqueue: () =>\n\t\t\t\tTAPi18n.__('Livechat_transfer_return_to_the_queue', {\n\t\t\t\t\tfrom,\n\t\t\t\t}),\n\t\t};\n\t\treturn {\n\t\t\ttransfer: transferTypes[message.transferData.scope](),\n\t\t};\n\t},\n});\n\nMessageTypes.registerType({\n\tid: 'livechat_transcript_history',\n\tsystem: true,\n\tmessage: 'Livechat_chat_transcript_sent',\n\tdata(message) {\n\t\tif (!message.requestData) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { requestData: { type, visitor = {}, user = {} } = {} } = message;\n\t\tconst requestTypes = {\n\t\t\tvisitor: () =>\n\t\t\t\tTAPi18n.__('Livechat_visitor_transcript_request', {\n\t\t\t\t\tguest: visitor.name || visitor.username,\n\t\t\t\t}),\n\t\t\tuser: () =>\n\t\t\t\tTAPi18n.__('Livechat_user_sent_chat_transcript_to_visitor', {\n\t\t\t\t\tagent: user.name || user.username,\n\t\t\t\t\tguest: visitor.name || visitor.username,\n\t\t\t\t}),\n\t\t};\n\n\t\treturn {\n\t\t\ttranscript: requestTypes[type](),\n\t\t};\n\t},\n});\n\nMessageTypes.registerType({\n\tid: 'livechat_video_call',\n\tsystem: true,\n\tmessage: 'New_videocall_request',\n});\n\nMessageTypes.registerType({\n\tid: 'livechat_webrtc_video_call',\n\trender(message) {\n\t\tif (message.msg === 'ended' && message.webRtcCallEndTs && message.ts) {\n\t\t\treturn TAPi18n.__('WebRTC_call_ended_message', {\n\t\t\t\tcallDuration: formatDistance(new Date(message.webRtcCallEndTs), new Date(message.ts)),\n\t\t\t\tendTime: moment(message.webRtcCallEndTs).format('h:mm A'),\n\t\t\t});\n\t\t}\n\t\tif (message.msg === 'declined' && message.webRtcCallEndTs) {\n\t\t\treturn TAPi18n.__('WebRTC_call_declined_message');\n\t\t}\n\t\treturn message.msg;\n\t},\n});\n\nMessageTypes.registerType({\n\tid: 'omnichannel_placed_chat_on_hold',\n\tsystem: true,\n\tmessage: 'Omnichannel_placed_chat_on_hold',\n\tdata(message) {\n\t\treturn {\n\t\t\tcomment: message.comment,\n\t\t};\n\t},\n});\n\nMessageTypes.registerType({\n\tid: 'omnichannel_on_hold_chat_resumed',\n\tsystem: true,\n\tmessage: 'Omnichannel_on_hold_chat_resumed',\n\tdata(message) {\n\t\treturn {\n\t\t\tcomment: message.comment,\n\t\t};\n\t},\n});\n","import _ from 'underscore';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\nimport { Mongo } from 'meteor/mongo';\n\nimport { messageContext } from '../../../../ui-utils/client/lib/messageContext';\nimport { APIClient } from '../../../../utils/client';\nimport { Messages } from '../../../../models/client';\nimport { upsertMessageBulk } from '../../../../ui-utils/client/lib/RoomHistoryManager';\n\nconst LIMIT_DEFAULT = 50;\n\nTemplate.snippetedMessages.helpers({\n\thasMessages() {\n\t\treturn Template.instance().messages.find().count();\n\t},\n\tmessages() {\n\t\tconst instance = Template.instance();\n\t\treturn instance.messages.find({}, { limit: instance.limit.get(), sort: { ts: -1 } });\n\t},\n\thasMore() {\n\t\treturn Template.instance().hasMore.get();\n\t},\n\tmessageContext,\n});\n\nTemplate.snippetedMessages.onCreated(function () {\n\tthis.rid = this.data.rid;\n\tthis.hasMore = new ReactiveVar(true);\n\tthis.messages = new Mongo.Collection(null);\n\tthis.limit = new ReactiveVar(LIMIT_DEFAULT);\n\n\tthis.autorun(() => {\n\t\tconst query = {\n\t\t\t_hidden: { $ne: true },\n\t\t\tsnippeted: true,\n\t\t\trid: this.rid,\n\t\t};\n\n\t\tthis.cursor && this.cursor.stop();\n\n\t\tthis.limit.set(LIMIT_DEFAULT);\n\n\t\tthis.cursor = Messages.find(query).observe({\n\t\t\tadded: ({ _id, ...message }) => {\n\t\t\t\tthis.messages.upsert({ _id }, message);\n\t\t\t},\n\t\t\tchanged: ({ _id, ...message }) => {\n\t\t\t\tthis.messages.upsert({ _id }, message);\n\t\t\t},\n\t\t\tremoved: ({ _id }) => {\n\t\t\t\tthis.messages.remove({ _id });\n\t\t\t},\n\t\t});\n\t});\n\n\tthis.autorun(async () => {\n\t\tconst limit = this.limit.get();\n\t\tconst { messages, total } = await APIClient.v1.get(`chat.getSnippetedMessages?roomId=${this.rid}&count=${limit}`);\n\n\t\tupsertMessageBulk({ msgs: messages }, this.messages);\n\n\t\tthis.hasMore.set(total > limit);\n\t});\n});\n\nTemplate.mentionsFlexTab.onDestroyed(function () {\n\tthis.cursor.stop();\n});\n\nTemplate.snippetedMessages.events({\n\t'scroll .js-list': _.throttle(function (e, instance) {\n\t\tif (e.target.scrollTop >= e.target.scrollHeight - e.target.clientHeight && instance.hasMore.get()) {\n\t\t\treturn instance.limit.set(instance.limit.get() + 50);\n\t\t}\n\t}, 200),\n});\n","import { useMemo } from 'react';\n\nimport { addAction } from '../../../../client/views/room/lib/Toolbox';\nimport { useSetting } from '../../../../client/contexts/SettingsContext';\n\naddAction('snippeted-messages', () => {\n\tconst snippetingEnabled = useSetting('Message_AllowSnippeting');\n\treturn useMemo(\n\t\t() =>\n\t\t\tsnippetingEnabled\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\t\t\t\tid: 'snippeted-messages',\n\t\t\t\t\t\ttitle: 'snippet-message',\n\t\t\t\t\t\ticon: 'code',\n\t\t\t\t\t\ttemplate: 'snippetedMessages',\n\t\t\t\t\t\torder: 20,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[snippetingEnabled],\n\t);\n});\n","import { FlowRouter } from 'meteor/kadira:flow-router';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\nimport moment from 'moment';\n\nimport { settings } from '../../../settings';\nimport { Markdown } from '../../../markdown/client';\nimport { APIClient } from '../../../utils/client';\nimport { formatTime } from '../../../../client/lib/utils/formatTime';\n\nTemplate.snippetPage.helpers({\n\tsnippet() {\n\t\treturn Template.instance().message.get();\n\t},\n\tsnippetContent() {\n\t\tconst message = Template.instance().message.get();\n\t\tif (message === undefined) {\n\t\t\treturn null;\n\t\t}\n\t\tmessage.html = message.msg;\n\t\tconst markdown = Markdown.parse(message);\n\t\treturn markdown.tokens[0].text;\n\t},\n\tdate() {\n\t\tconst snippet = Template.instance().message.get();\n\t\tif (snippet !== undefined) {\n\t\t\treturn moment(snippet.ts).format(settings.get('Message_DateFormat'));\n\t\t}\n\t},\n\ttime() {\n\t\tconst snippet = Template.instance().message.get();\n\t\tif (snippet !== undefined) {\n\t\t\treturn formatTime(snippet.ts);\n\t\t}\n\t},\n});\n\nTemplate.snippetPage.onCreated(async function () {\n\tconst snippetId = FlowRouter.getParam('snippetId');\n\tthis.message = new ReactiveVar({});\n\n\tconst { message } = await APIClient.v1.get(`chat.getSnippetedMessageById?messageId=${snippetId}`);\n\tthis.message.set(message);\n});\n","// import { Meteor } from 'meteor/meteor';\n// import { MessageAction, modal } from '../../ui-utils';\n// import { messageArgs } from '../../ui-utils/client/lib/messageArgs';\n// import { t, handleError } from '../../utils';\n// import { settings } from '../../settings';\n// import { Subscriptions } from '../../models';\n// import { hasAtLeastOnePermission } from '../../authorization';\n//\n// Meteor.startup(function() {\n// \tMessageAction.addButton({\n// \t\tid: 'snippeted-message',\n// \t\ticon: 'code',\n// \t\tlabel: 'Snippet',\n// \t\tcontext: [\n// \t\t\t'snippeted',\n// \t\t\t'message',\n// \t\t\t'message-mobile',\n// \t\t],\n// \t\torder: 10,\n// \t\tgroup: 'menu',\n// \t\taction() {\n// \t\t\tconst { msg: message } = messageArgs(this);\n//\n// \t\t\tmodal.open({\n// \t\t\t\ttitle: 'Create a Snippet',\n// \t\t\t\ttext: 'The name of your snippet (with file extension):',\n// \t\t\t\ttype: 'input',\n// \t\t\t\tshowCancelButton: true,\n// \t\t\t\tcloseOnConfirm: false,\n// \t\t\t\tinputPlaceholder: 'Snippet name',\n// \t\t\t}, function(filename) {\n// \t\t\t\tif (filename === false) {\n// \t\t\t\t\treturn false;\n// \t\t\t\t}\n// \t\t\t\tif (filename === '') {\n// \t\t\t\t\tmodal.showInputError('You need to write something!');\n// \t\t\t\t\treturn false;\n// \t\t\t\t}\n// \t\t\t\tmessage.snippeted = true;\n// \t\t\t\tMeteor.call('snippetMessage', message, filename, function(error) {\n// \t\t\t\t\tif (error) {\n// \t\t\t\t\t\treturn handleError(error);\n// \t\t\t\t\t}\n// \t\t\t\t\tmodal.open({\n// \t\t\t\t\t\ttitle: t('Nice'),\n// \t\t\t\t\t\ttext: `Snippet '${ filename }' created.`,\n// \t\t\t\t\t\ttype: 'success',\n// \t\t\t\t\t\ttimer: 2000,\n// \t\t\t\t\t});\n// \t\t\t\t});\n// \t\t\t});\n//\n// \t\t},\n// \t\tcondition(message) {\n// \t\t\tif (Subscriptions.findOne({ rid: message.rid, 'u._id': Meteor.userId() }) === undefined) {\n// \t\t\t\treturn false;\n// \t\t\t}\n//\n// \t\t\tif (message.snippeted || ((settings.get('Message_AllowSnippeting') === undefined) ||\n// \t\t\t\t(settings.get('Message_AllowSnippeting') === null) ||\n// \t\t\t\t(settings.get('Message_AllowSnippeting')) === false)) {\n// \t\t\t\treturn false;\n// \t\t\t}\n//\n// \t\t\treturn hasAtLeastOnePermission('snippet-message', message.rid);\n// \t\t},\n// \t});\n//\n// });\n","import './actionButton';\nimport './messageType';\nimport './snippetMessage';\nimport './page/snippetPage.html';\nimport './page/snippetPage';\nimport './tabBar/tabBar';\nimport './tabBar/views/snippetedMessages.html';\nimport './tabBar/views/snippetedMessages';\nimport './page/stylesheets/snippetPage.css';\n","import { Meteor } from 'meteor/meteor';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\n\nimport { MessageTypes } from '../../ui-utils';\n\nMeteor.startup(function () {\n\tMessageTypes.registerType({\n\t\tid: 'message_snippeted',\n\t\tsystem: true,\n\t\tmessage: 'Snippeted_a_message',\n\t\tdata(message) {\n\t\t\tconst snippetLink = `<a href=\"/snippet/${message.snippetId}/${encodeURIComponent(message.snippetName)}\">${escapeHTML(\n\t\t\t\tmessage.snippetName,\n\t\t\t)}</a>`;\n\t\t\treturn { snippetLink };\n\t\t},\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { settings } from '../../settings';\nimport { ChatMessage, Subscriptions } from '../../models';\n\nMeteor.methods({\n\tsnippetMessage(message) {\n\t\tif (typeof Meteor.userId() === 'undefined' || Meteor.userId() === null) {\n\t\t\treturn false;\n\t\t}\n\t\tif (\n\t\t\ttypeof settings.get('Message_AllowSnippeting') === 'undefined' ||\n\t\t\tsettings.get('Message_AllowSnippeting') === null ||\n\t\t\tsettings.get('Message_AllowSnippeting') === false\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst subscription = Subscriptions.findOne({ 'rid': message.rid, 'u._id': Meteor.userId() });\n\n\t\tif (subscription === undefined) {\n\t\t\treturn false;\n\t\t}\n\t\tChatMessage.update(\n\t\t\t{\n\t\t\t\t_id: message._id,\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\tsnippeted: true,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t},\n});\n","import { Template } from 'meteor/templating';\nimport { ReactiveVar } from 'meteor/reactive-var';\n\nimport { modal } from '../../../ui-utils/client';\nimport { APIClient, t } from '../../../utils/client';\nimport './gameCenter.html';\nimport { handleError } from '../../../../client/lib/utils/handleError';\n\nconst getExternalComponents = async (instance) => {\n\ttry {\n\t\tconst { externalComponents } = await APIClient.get('apps/externalComponents');\n\t\tinstance.games.set(externalComponents);\n\t} catch (e) {\n\t\thandleError(e);\n\t}\n\n\tinstance.isLoading.set(false);\n\tinstance.ready.set(true);\n};\n\nconst openGame = (gameManifestInfo) => {\n\tconst instance = Template.instance();\n\tconst { location = 'MODAL' } = gameManifestInfo;\n\n\tif (location === 'CONTEXTUAL_BAR') {\n\t\tinstance.gameManifestInfo.set(gameManifestInfo);\n\t} else if (location === 'MODAL') {\n\t\tmodal.open({\n\t\t\tallowOutsideClick: false,\n\t\t\tdata: {\n\t\t\t\tgame: gameManifestInfo,\n\t\t\t},\n\t\t\ttemplate: 'GameContainer',\n\t\t\ttype: 'rc-game',\n\t\t});\n\t}\n};\n\nTemplate.GameCenter.helpers({\n\tisReady() {\n\t\tif (Template.instance().ready != null) {\n\t\t\treturn Template.instance().ready.get();\n\t\t}\n\t\treturn false;\n\t},\n\tgames() {\n\t\treturn Template.instance().games.get();\n\t},\n\tisLoading() {\n\t\treturn Template.instance().isLoading.get();\n\t},\n\tonTableScroll() {\n\t\tconst instance = Template.instance();\n\t\tif (instance.loading || instance.end.get()) {\n\t\t\treturn;\n\t\t}\n\t\treturn function (currentTarget) {\n\t\t\tif (currentTarget.offsetHeight + currentTarget.scrollTop >= currentTarget.scrollHeight - 100) {\n\t\t\t\treturn instance.page.set(instance.page.get() + 1);\n\t\t\t}\n\t\t};\n\t},\n\tshowGame() {\n\t\treturn Template.instance().gameManifestInfo.get();\n\t},\n\tgameContainerOptions() {\n\t\tconst { gameManifestInfo, clearGameManifestInfo } = Template.instance();\n\n\t\treturn {\n\t\t\tgame: gameManifestInfo.get(),\n\t\t\tshowBackButton: true,\n\t\t\tclearGameManifestInfo,\n\t\t};\n\t},\n});\n\nTemplate.GameCenter.onCreated(function () {\n\tthis.ready = new ReactiveVar(false);\n\tthis.games = new ReactiveVar([]);\n\tthis.isLoading = new ReactiveVar(true);\n\tthis.page = new ReactiveVar(0);\n\tthis.end = new ReactiveVar(false);\n\n\tthis.gameManifestInfo = new ReactiveVar(null);\n\n\tthis.clearGameManifestInfo = () => {\n\t\tthis.gameManifestInfo.set(null);\n\t};\n\n\tgetExternalComponents(this);\n});\n\nTemplate.GameCenter.events({\n\t'click .rc-game-center__game'() {\n\t\tconst gameManifestInfo = this;\n\n\t\topenGame(gameManifestInfo);\n\t},\n\t'click .js-invite'(event) {\n\t\tevent.stopPropagation();\n\t\tmodal.open({\n\t\t\ttitle: t('Apps_Game_Center_Invite_Friends'),\n\t\t\tcontent: 'InvitePlayers',\n\t\t\tdata: this,\n\t\t\tconfirmOnEnter: false,\n\t\t\tshowCancelButton: false,\n\t\t\tshowConfirmButton: false,\n\t\t\thtml: false,\n\t\t});\n\t},\n});\n","import { Template } from 'meteor/templating';\n\nimport { modal } from '../../../ui-utils/client';\nimport { Apps } from '../orchestrator';\nimport { APIClient } from '../../../utils/client';\n\nimport './gameContainer.html';\n\nconst getExternalComponent = async () => {\n\tconst {\n\t\tdata: { game: externalComponent },\n\t} = Template.instance();\n\tconst realAppClientUIHost = Apps.getUIHost();\n\tconst currentUser = await realAppClientUIHost.getClientUserInfo();\n\tconst currentRoom = await realAppClientUIHost.getClientRoomInfo();\n\n\texternalComponent.state = {\n\t\tcurrentUser,\n\t\tcurrentRoom,\n\t};\n\n\treturn externalComponent;\n};\n\nTemplate.GameContainer.helpers({\n\tisContextualBar() {\n\t\tconst {\n\t\t\tdata: { game },\n\t\t} = Template.instance();\n\t\tconst { location } = game;\n\n\t\treturn location === 'CONTEXTUAL_BAR';\n\t},\n\tisModal() {\n\t\tconst {\n\t\t\tdata: { game },\n\t\t} = Template.instance();\n\t\tconst { location } = game;\n\n\t\treturn location === 'MODAL';\n\t},\n});\n\nTemplate.GameContainer.events({\n\t'click .rc-game__close'() {\n\t\tconst {\n\t\t\tdata: { clearGameManifestInfo },\n\t\t} = Template.instance();\n\n\t\tclearGameManifestInfo();\n\t\tmodal.cancel();\n\t},\n\t'click .js-back'() {\n\t\tconst {\n\t\t\tdata: { clearGameManifestInfo },\n\t\t} = Template.instance();\n\n\t\tclearGameManifestInfo();\n\t},\n});\n\nTemplate.GameContainer.onCreated(async () => {\n\tconst externalComponent = await getExternalComponent();\n\n\tAPIClient.post('apps/externalComponentEvent', {\n\t\tevent: 'IPostExternalComponentOpened',\n\t\texternalComponent,\n\t});\n});\n\nTemplate.GameContainer.onDestroyed(async () => {\n\tconst externalComponent = await getExternalComponent();\n\n\tAPIClient.post('apps/externalComponentEvent', {\n\t\tevent: 'IPostExternalComponentClosed',\n\t\texternalComponent,\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Random } from 'meteor/random';\nimport { Template } from 'meteor/templating';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Blaze } from 'meteor/blaze';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { Tracker } from 'meteor/tracker';\nimport { Session } from 'meteor/session';\n\nimport { AutoComplete } from '../../../meteor-autocomplete/client';\nimport { roomTypes } from '../../../utils/client';\nimport { ChatRoom } from '../../../models/client';\nimport { modal } from '../../../ui-utils/client';\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\n\nimport './invitePlayers.html';\n\nTemplate.InvitePlayers.helpers({\n\tonSelectUser() {\n\t\treturn Template.instance().onSelectUser;\n\t},\n\tselectedUsers() {\n\t\tconst myUsername = Meteor.user().username;\n\t\tconst { message } = this;\n\t\tconst users = Template.instance()\n\t\t\t.selectedUsers.get()\n\t\t\t.map((e) => e);\n\t\tif (message) {\n\t\t\tusers.unshift(message.u);\n\t\t}\n\t\treturn users.filter(({ username }) => myUsername !== username);\n\t},\n\tonClickTagUser() {\n\t\treturn Template.instance().onClickTagUser;\n\t},\n\tdeleteLastItemUser() {\n\t\treturn Template.instance().deleteLastItemUser;\n\t},\n\tonClickTagRoom() {\n\t\treturn Template.instance().onClickTagRoom;\n\t},\n\tdeleteLastItemRoom() {\n\t\treturn Template.instance().deleteLastItemRoom;\n\t},\n\tselectedRoom() {\n\t\treturn Template.instance().selectedRoom.get();\n\t},\n\tonSelectRoom() {\n\t\treturn Template.instance().onSelectRoom;\n\t},\n\troomCollection() {\n\t\treturn ChatRoom;\n\t},\n\troomSelector() {\n\t\treturn (expression) => ({ name: { $regex: `.*${expression}.*` } });\n\t},\n\troomModifier() {\n\t\treturn (filter, text = '') => {\n\t\t\tconst f = filter.get();\n\t\t\treturn `#${f.length === 0 ? text : text.replace(new RegExp(filter.get(), 'i'), (part) => `<strong>${part}</strong>`)}`;\n\t\t};\n\t},\n\tuserModifier() {\n\t\treturn (filter, text = '') => {\n\t\t\tconst f = filter.get();\n\t\t\treturn `@${f.length === 0 ? text : text.replace(new RegExp(filter.get(), 'i'), (part) => `<strong>${part}</strong>`)}`;\n\t\t};\n\t},\n\tnameSuggestion() {\n\t\treturn Template.instance().discussionName.get();\n\t},\n});\n\nTemplate.InvitePlayers.events({\n\tasync 'submit #invite-players, click .js-invite-players'(e, instance) {\n\t\te.preventDefault();\n\n\t\tconst {\n\t\t\tdata: { name },\n\t\t} = instance;\n\t\tconst users = instance.selectedUsers.get().map(({ username }) => username);\n\t\tconst privateGroupName = `${name.replace(/\\s/g, '-')}-${Random.id(10)}`;\n\n\t\ttry {\n\t\t\tconst result = await callWithErrorHandling('createPrivateGroup', privateGroupName, users);\n\n\t\t\troomTypes.openRouteLink(result.t, result);\n\n\t\t\t// This ensures the message is only sent after the\n\t\t\t// user has been redirected to the new room, preventing a\n\t\t\t// weird bug that made the message appear as unsent until\n\t\t\t// the screen gets refreshed\n\t\t\tTracker.autorun((c) => {\n\t\t\t\tif (Session.get('openedRoom') !== result.rid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tcallWithErrorHandling('sendMessage', {\n\t\t\t\t\t_id: Random.id(),\n\t\t\t\t\trid: result.rid,\n\t\t\t\t\tmsg: TAPi18n.__('Apps_Game_Center_Play_Game_Together', { name }),\n\t\t\t\t});\n\n\t\t\t\tc.stop();\n\t\t\t});\n\n\t\t\tmodal.close();\n\t\t} catch (err) {\n\t\t\tconsole.warn(err);\n\t\t}\n\t},\n});\n\nTemplate.InvitePlayers.onCreated(function () {\n\tthis.selectedUsers = new ReactiveVar([]);\n\tthis.onSelectUser = ({ item: user }) => {\n\t\tif (user.username === Meteor.user().username) {\n\t\t\treturn;\n\t\t}\n\t\tconst users = this.selectedUsers.get();\n\t\tif (!users.find((u) => user.username === u.username)) {\n\t\t\tthis.selectedUsers.set([...users, user]);\n\t\t}\n\t};\n\tthis.onClickTagUser = ({ username }) => {\n\t\tthis.selectedUsers.set(this.selectedUsers.get().filter((user) => user.username !== username));\n\t};\n\tthis.deleteLastItemUser = () => {\n\t\tconst arr = this.selectedUsers.get();\n\t\tarr.pop();\n\t\tthis.selectedUsers.set(arr);\n\t};\n});\n\nTemplate.SearchInvitePlayers.helpers({\n\tlist() {\n\t\treturn this.list;\n\t},\n\titems() {\n\t\treturn Template.instance().ac.filteredList();\n\t},\n\tconfig() {\n\t\tconst { filter } = Template.instance();\n\t\tconst { noMatchTemplate, templateItem, modifier } = Template.instance().data;\n\t\treturn {\n\t\t\tfilter: filter.get(),\n\t\t\ttemplate_item: templateItem,\n\t\t\tnoMatchTemplate,\n\t\t\tmodifier(text) {\n\t\t\t\treturn modifier(filter, text);\n\t\t\t},\n\t\t};\n\t},\n\tautocomplete(key) {\n\t\tconst instance = Template.instance();\n\t\tconst param = instance.ac[key];\n\t\treturn typeof param === 'function' ? param.apply(instance.ac) : param;\n\t},\n});\n\nTemplate.SearchInvitePlayers.events({\n\t'input input'(e, t) {\n\t\tconst input = e.target;\n\t\tconst position = input.selectionEnd || input.selectionStart;\n\t\tconst { length } = input.value;\n\t\tdocument.activeElement === input && e && /input/i.test(e.type) && (input.selectionEnd = position + input.value.length - length);\n\t\tt.filter.set(input.value);\n\t},\n\t'click .rc-popup-list__item'(e, t) {\n\t\tt.ac.onItemClick(this, e);\n\t},\n\t'keydown input'(e, t) {\n\t\tconst KEYCODE_BACKSPACE = 8;\n\t\tconst KEYCODE_DELETE = 46;\n\n\t\tt.ac.onKeyDown(e);\n\t\tif ([KEYCODE_BACKSPACE, KEYCODE_DELETE].includes(e.keyCode) && e.target.value === '') {\n\t\t\tconst { deleteLastItem } = t;\n\t\t\treturn deleteLastItem && deleteLastItem();\n\t\t}\n\t},\n\t'keyup input'(e, t) {\n\t\tt.ac.onKeyUp(e);\n\t},\n\t'focus input'(e, t) {\n\t\tt.ac.onFocus(e);\n\t},\n\t'blur input'(e, t) {\n\t\tt.ac.onBlur(e);\n\t},\n\t'click .rc-tags__tag'({ target }, t) {\n\t\tconst { onClickTag } = t;\n\t\treturn onClickTag & onClickTag(Blaze.getData(target));\n\t},\n});\nTemplate.SearchInvitePlayers.onRendered(function () {\n\tconst { name } = this.data;\n\n\tthis.ac.element = this.firstNode.querySelector(`[name=${name}]`);\n\tthis.ac.$element = $(this.ac.element);\n});\n\nTemplate.SearchInvitePlayers.onCreated(function () {\n\tthis.filter = new ReactiveVar('');\n\tthis.selected = new ReactiveVar([]);\n\tthis.onClickTag = this.data.onClickTag;\n\tthis.deleteLastItem = this.data.deleteLastItem;\n\n\tconst { collection, endpoint, field, sort, onSelect, selector = (match) => ({ term: match }) } = this.data;\n\tthis.ac = new AutoComplete({\n\t\tselector: {\n\t\t\tanchor: '.rc-input__label',\n\t\t\titem: '.rc-popup-list__item',\n\t\t\tcontainer: '.rc-popup-list__list',\n\t\t},\n\t\tonSelect,\n\t\tposition: 'fixed',\n\t\tlimit: 10,\n\t\tinputDelay: 300,\n\t\trules: [\n\t\t\t{\n\t\t\t\tcollection,\n\t\t\t\tendpoint,\n\t\t\t\tfield,\n\t\t\t\tmatchAll: true,\n\t\t\t\tdoNotChangeWidth: false,\n\t\t\t\tselector,\n\t\t\t\tsort,\n\t\t\t},\n\t\t],\n\t});\n\tthis.ac.tmplInst = this;\n});\n","import { useMemo } from 'react';\n\nimport { addAction } from '../../../../client/views/room/lib/Toolbox';\nimport { useEndpointData } from '../../../../client/hooks/useEndpointData';\nimport { AsyncStatePhase } from '../../../../client/hooks/useAsyncState';\n\naddAction('game-center', () => {\n\tconst { value = { externalComponents: [] }, phase: state, error } = useEndpointData('/apps/externalComponents');\n\n\tconst hasExternalComponents = value && value.externalComponents.length > 0;\n\tconst hasError = !!error;\n\treturn useMemo(\n\t\t() =>\n\t\t\tstate === AsyncStatePhase.RESOLVED && !hasError && hasExternalComponents\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\t\t\t\tid: 'game-center',\n\t\t\t\t\t\ttitle: 'Apps_Game_Center',\n\t\t\t\t\t\ticon: 'game',\n\t\t\t\t\t\ttemplate: 'GameCenter',\n\t\t\t\t\t\torder: -1,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[hasError, hasExternalComponents, state],\n\t);\n});\n","export { AppWebsocketReceiver, AppEvents } from './websockets';\n","import { Meteor } from 'meteor/meteor';\nimport { Emitter } from '@rocket.chat/emitter';\n\nimport { slashCommands, APIClient } from '../../../utils';\nimport { CachedCollectionManager } from '../../../ui-cached-collection';\nimport { loadButtons } from '../../../ui-message/client/ActionButtonSyncer';\n\nexport const AppEvents = Object.freeze({\n\tAPP_ADDED: 'app/added',\n\tAPP_REMOVED: 'app/removed',\n\tAPP_UPDATED: 'app/updated',\n\tAPP_STATUS_CHANGE: 'app/statusUpdate',\n\tAPP_SETTING_UPDATED: 'app/settingUpdated',\n\tCOMMAND_ADDED: 'command/added',\n\tCOMMAND_DISABLED: 'command/disabled',\n\tCOMMAND_UPDATED: 'command/updated',\n\tCOMMAND_REMOVED: 'command/removed',\n\tACTIONS_CHANGED: 'actions/changed',\n});\n\nexport class AppWebsocketReceiver extends Emitter {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis.streamer = new Meteor.Streamer('apps');\n\n\t\tCachedCollectionManager.onLogin(() => {\n\t\t\tthis.listenStreamerEvents();\n\t\t});\n\t}\n\n\tlistenStreamerEvents() {\n\t\tObject.values(AppEvents).forEach((eventName) => {\n\t\t\tthis.streamer.on(eventName, this.emit.bind(this, eventName));\n\t\t});\n\n\t\tthis.streamer.on(AppEvents.COMMAND_ADDED, this.onCommandAddedOrUpdated);\n\t\tthis.streamer.on(AppEvents.COMMAND_UPDATED, this.onCommandAddedOrUpdated);\n\t\tthis.streamer.on(AppEvents.COMMAND_REMOVED, this.onCommandRemovedOrDisabled);\n\t\tthis.streamer.on(AppEvents.COMMAND_DISABLED, this.onCommandRemovedOrDisabled);\n\t\tthis.streamer.on(AppEvents.ACTIONS_CHANGED, this.onActionsChanged);\n\t}\n\n\tregisterListener(event, listener) {\n\t\tthis.on(event, listener);\n\t}\n\n\tunregisterListener(event, listener) {\n\t\tthis.off(event, listener);\n\t}\n\n\tonCommandAddedOrUpdated = (command) => {\n\t\tAPIClient.v1.get('commands.get', { command }).then((result) => {\n\t\t\tslashCommands.commands[command] = result.command;\n\t\t});\n\t};\n\n\tonCommandRemovedOrDisabled = (command) => {\n\t\tdelete slashCommands.commands[command];\n\t};\n\n\tonActionsChanged = () => loadButtons();\n}\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport { AppsEngineUIHost } from '@rocket.chat/apps-engine/client/AppsEngineUIHost';\n\nimport { Rooms } from '../../models/client';\nimport { APIClient } from '../../utils/client';\nimport { getUserAvatarURL } from '../../utils/lib/getUserAvatarURL';\nimport { baseURI } from '../../../client/lib/baseURI';\n\nexport class RealAppsEngineUIHost extends AppsEngineUIHost {\n\tconstructor() {\n\t\tsuper();\n\n\t\tthis._baseURL = baseURI.replace(/\\/$/, '');\n\t}\n\n\tgetUserAvatarUrl(username) {\n\t\tconst avatarUrl = getUserAvatarURL(username);\n\n\t\tif (!avatarUrl.startsWith('http') && !avatarUrl.startsWith('data')) {\n\t\t\treturn `${this._baseURL}${avatarUrl}`;\n\t\t}\n\n\t\treturn avatarUrl;\n\t}\n\n\tasync getClientRoomInfo() {\n\t\tconst { name: slugifiedName, _id: id } = Rooms.findOne(Session.get('openedRoom'));\n\n\t\tlet cachedMembers = [];\n\t\ttry {\n\t\t\tconst { members } = await APIClient.get('v1/groups.members', { roomId: id });\n\n\t\t\tcachedMembers = members.map(({ _id, username }) => ({\n\t\t\t\tid: _id,\n\t\t\t\tusername,\n\t\t\t\tavatarUrl: this.getUserAvatarUrl(username),\n\t\t\t}));\n\t\t} catch (error) {\n\t\t\tconsole.warn(error);\n\t\t}\n\n\t\treturn {\n\t\t\tid,\n\t\t\tslugifiedName,\n\t\t\tmembers: cachedMembers,\n\t\t};\n\t}\n\n\tasync getClientUserInfo() {\n\t\tconst { username, _id } = Meteor.user();\n\n\t\treturn {\n\t\t\tid: _id,\n\t\t\tusername,\n\t\t\tavatarUrl: this.getUserAvatarUrl(username),\n\t\t};\n\t}\n}\n","import { TAPi18next } from 'meteor/rocketchat:tap-i18n';\n\nimport { Apps } from './orchestrator';\nimport { Utilities } from '../lib/misc/Utilities';\nimport { AppEvents } from './communication';\n\nexport const loadAppI18nResources = (appId, languages) => {\n\tObject.entries(languages).forEach(([language, translations]) => {\n\t\ttry {\n\t\t\t// Translations keys must be scoped under app id\n\t\t\tconst scopedTranslations = Object.entries(translations).reduce((translations, [key, value]) => {\n\t\t\t\ttranslations[Utilities.getI18nKeyForApp(key, appId)] = value;\n\t\t\t\treturn translations;\n\t\t\t}, {});\n\n\t\t\tTAPi18next.addResourceBundle(language, 'project', scopedTranslations);\n\t\t} catch (error) {\n\t\t\tApps.handleError(error);\n\t\t}\n\t});\n};\n\nconst handleAppAdded = async (appId) => {\n\tconst languages = await Apps.getAppLanguages(appId);\n\tloadAppI18nResources(appId, languages);\n};\n\nexport const handleI18nResources = async () => {\n\tconst apps = await Apps.getAppsLanguages();\n\tapps.forEach(({ id, languages }) => {\n\t\tloadAppI18nResources(id, languages);\n\t});\n\n\tApps.getWsListener().unregisterListener(AppEvents.APP_ADDED, handleAppAdded);\n\tApps.getWsListener().registerListener(AppEvents.APP_ADDED, handleAppAdded);\n};\n","import './gameCenter/tabBar';\nimport './gameCenter/gameContainer';\nimport './gameCenter/gameCenter';\nimport './gameCenter/invitePlayers';\n\nexport { Apps } from './orchestrator';\n","import { AppClientManager } from '@rocket.chat/apps-engine/client/AppClientManager';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { dispatchToastMessage } from '../../../client/lib/toast';\nimport { hasAtLeastOnePermission } from '../../authorization';\nimport { settings } from '../../settings/client';\nimport { CachedCollectionManager } from '../../ui-cached-collection';\nimport { APIClient } from '../../utils';\nimport { AppWebsocketReceiver } from './communication';\nimport { handleI18nResources } from './i18n';\nimport { RealAppsEngineUIHost } from './RealAppsEngineUIHost';\n\nconst createDeferredValue = () => {\n\tlet resolve;\n\tlet reject;\n\tconst promise = new Promise((_resolve, _reject) => {\n\t\tresolve = _resolve;\n\t\treject = _reject;\n\t});\n\n\treturn [promise, resolve, reject];\n};\n\nclass AppClientOrchestrator {\n\tconstructor() {\n\t\tthis._appClientUIHost = new RealAppsEngineUIHost();\n\t\tthis._manager = new AppClientManager(this._appClientUIHost);\n\t\tthis.isLoaded = false;\n\t\t[this.deferredIsEnabled, this.setEnabled] = createDeferredValue();\n\t}\n\n\tload = async (isEnabled) => {\n\t\tif (!this.isLoaded) {\n\t\t\tthis.ws = new AppWebsocketReceiver();\n\t\t\tthis.isLoaded = true;\n\t\t}\n\n\t\tthis.setEnabled(isEnabled);\n\n\t\t// Since the deferred value (a promise) is immutable after resolved,\n\t\t// it need to be recreated to resolve a new value\n\t\t[this.deferredIsEnabled, this.setEnabled] = createDeferredValue();\n\n\t\tawait handleI18nResources();\n\t\tthis.setEnabled(isEnabled);\n\t};\n\n\tgetWsListener = () => this.ws;\n\n\tgetAppClientManager = () => this._manager;\n\n\thandleError = (error) => {\n\t\tconsole.error(error);\n\t\tif (hasAtLeastOnePermission(['manage-apps'])) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: error.message,\n\t\t\t});\n\t\t}\n\t};\n\n\tisEnabled = () => this.deferredIsEnabled;\n\n\tgetApps = async () => {\n\t\tconst { apps } = await APIClient.get('apps');\n\t\treturn apps;\n\t};\n\n\tgetAppsFromMarketplace = async () => {\n\t\tconst appsOverviews = await APIClient.get('apps', { marketplace: 'true' });\n\t\treturn appsOverviews.map(({ latest, price, pricingPlans, purchaseType, isEnterpriseOnly }) => ({\n\t\t\t...latest,\n\t\t\tprice,\n\t\t\tpricingPlans,\n\t\t\tpurchaseType,\n\t\t\tisEnterpriseOnly,\n\t\t}));\n\t};\n\n\tgetAppsOnBundle = async (bundleId) => {\n\t\tconst { apps } = await APIClient.get(`apps/bundles/${bundleId}/apps`);\n\t\treturn apps;\n\t};\n\n\tgetAppsLanguages = async () => {\n\t\tconst { apps } = await APIClient.get('apps/languages');\n\t\treturn apps;\n\t};\n\n\tgetApp = async (appId) => {\n\t\tconst { app } = await APIClient.get(`apps/${appId}`);\n\t\treturn app;\n\t};\n\n\tgetAppFromMarketplace = async (appId, version) => {\n\t\tconst { app } = await APIClient.get(`apps/${appId}`, {\n\t\t\tmarketplace: 'true',\n\t\t\tversion,\n\t\t});\n\t\treturn app;\n\t};\n\n\tgetLatestAppFromMarketplace = async (appId, version) => {\n\t\tconst { app } = await APIClient.get(`apps/${appId}`, {\n\t\t\tmarketplace: 'true',\n\t\t\tupdate: 'true',\n\t\t\tappVersion: version,\n\t\t});\n\t\treturn app;\n\t};\n\n\tgetAppSettings = async (appId) => {\n\t\tconst { settings } = await APIClient.get(`apps/${appId}/settings`);\n\t\treturn settings;\n\t};\n\n\tsetAppSettings = async (appId, settings) => {\n\t\tconst { updated } = await APIClient.post(`apps/${appId}/settings`, undefined, { settings });\n\t\treturn updated;\n\t};\n\n\tgetAppApis = async (appId) => {\n\t\tconst { apis } = await APIClient.get(`apps/${appId}/apis`);\n\t\treturn apis;\n\t};\n\n\tgetAppLanguages = async (appId) => {\n\t\tconst { languages } = await APIClient.get(`apps/${appId}/languages`);\n\t\treturn languages;\n\t};\n\n\tinstallApp = async (appId, version, permissionsGranted) => {\n\t\tconst { app } = await APIClient.post('apps/', {\n\t\t\tappId,\n\t\t\tmarketplace: true,\n\t\t\tversion,\n\t\t\tpermissionsGranted,\n\t\t});\n\t\treturn app;\n\t};\n\n\tupdateApp = async (appId, version, permissionsGranted) => {\n\t\tconst { app } = await APIClient.post(`apps/${appId}`, {\n\t\t\tappId,\n\t\t\tmarketplace: true,\n\t\t\tversion,\n\t\t\tpermissionsGranted,\n\t\t});\n\t\treturn app;\n\t};\n\n\tuninstallApp = (appId) => APIClient.delete(`apps/${appId}`);\n\n\tsyncApp = (appId) => APIClient.post(`apps/${appId}/sync`);\n\n\tsetAppStatus = async (appId, status) => {\n\t\tconst { status: effectiveStatus } = await APIClient.post(`apps/${appId}/status`, { status });\n\t\treturn effectiveStatus;\n\t};\n\n\tenableApp = (appId) => this.setAppStatus(appId, 'manually_enabled');\n\n\tdisableApp = (appId) => this.setAppStatus(appId, 'manually_disabled');\n\n\tbuildExternalUrl = (appId, purchaseType = 'buy', details = false) =>\n\t\tAPIClient.get('apps', {\n\t\t\tbuildExternalUrl: 'true',\n\t\t\tappId,\n\t\t\tpurchaseType,\n\t\t\tdetails,\n\t\t});\n\n\tgetCategories = async () => {\n\t\tconst categories = await APIClient.get('apps', { categories: 'true' });\n\t\treturn categories;\n\t};\n\n\tgetUIHost = () => this._appClientUIHost;\n}\n\nexport const Apps = new AppClientOrchestrator();\n\nMeteor.startup(() => {\n\tCachedCollectionManager.onLogin(() => {\n\t\tMeteor.call('apps/is-enabled', (error, isEnabled) => {\n\t\t\tif (error) {\n\t\t\t\tApps.handleError(error);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tApps.getAppClientManager().initialize();\n\t\t\tApps.load(isEnabled);\n\t\t});\n\t});\n\n\tTracker.autorun(() => {\n\t\tconst isEnabled = settings.get('Apps_Framework_enabled');\n\t\tApps.load(isEnabled);\n\t});\n});\n","export class Utilities {\n\tstatic getI18nKeyForApp(key, appId) {\n\t\treturn key && `apps-${appId}-${key}`;\n\t}\n\n\tstatic curl({ method, params, auth, headers = {}, url, query, content }, opts = {}) {\n\t\tconst newLine = '\\\\\\n   ';\n\n\t\tconst cmd = ['curl'];\n\n\t\t// curl options\n\t\tif (opts.verbose) {\n\t\t\tcmd.push('-v');\n\t\t}\n\t\tif (opts.headers) {\n\t\t\tcmd.push('-i');\n\t\t}\n\n\t\t// method\n\t\tcmd.push('-X');\n\t\tcmd.push((method || 'GET').toUpperCase());\n\n\t\t// URL\n\t\tlet u = url;\n\n\t\tif (typeof params === 'object') {\n\t\t\tObject.entries(params).forEach(([key, value]) => {\n\t\t\t\tu = u.replace(`:${key}`, value);\n\t\t\t});\n\t\t}\n\n\t\tif (typeof query === 'object') {\n\t\t\tconst queryString = Object.entries(query)\n\t\t\t\t.map(([key, value]) => `${key}=${value}`)\n\t\t\t\t.join('&');\n\t\t\tu += `?${queryString}`;\n\t\t}\n\t\tcmd.push(u);\n\n\t\t// username\n\t\tif (auth) {\n\t\t\tcmd.push(newLine);\n\t\t\tcmd.push('-u');\n\t\t\tcmd.push(auth);\n\t\t}\n\n\t\t// headers\n\t\tconst headerKeys = [];\n\t\tObject.entries(headers).forEach(([key, val]) => {\n\t\t\tkey = key.toLowerCase();\n\t\t\theaderKeys.push(key);\n\t\t\tcmd.push(newLine);\n\t\t\tcmd.push('-H');\n\t\t\tcmd.push(`\"${key}${val ? ': ' : ';'}${val || ''}\"`);\n\t\t});\n\n\t\tif (content) {\n\t\t\tif (typeof content === 'object') {\n\t\t\t\tif (!headerKeys.includes('content-type')) {\n\t\t\t\t\tcmd.push(newLine);\n\t\t\t\t\tcmd.push('-H');\n\t\t\t\t\tcmd.push('\"content-type: application/json\"');\n\t\t\t\t}\n\t\t\t\tcontent = JSON.stringify(content);\n\t\t\t}\n\n\t\t\tcmd.push(newLine);\n\t\t\tcmd.push('--data-binary');\n\t\t\tcmd.push(`'${content}'`);\n\t\t}\n\n\t\treturn cmd.join(' ');\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { settings } from '../../../settings';\nimport { hasRole } from '../../../authorization';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\nimport { validateEmail } from '../../../../lib/emailValidator';\n\nTemplate.ChatpalAdmin.onCreated(function () {\n\tthis.validateEmail = validateEmail;\n\n\tthis.apiKey = new ReactiveVar();\n\n\tconst lang = settings.get('Language');\n\n\tthis.lang = lang === 'de' || lang === 'en' ? lang : 'en';\n\n\tthis.tac = new ReactiveVar();\n\n\tMeteor.call('chatpalUtilsGetTaC', this.lang, (err, data) => {\n\t\tthis.tac.set(data);\n\t});\n});\n\nTemplate.ChatpalAdmin.events({\n\t'submit form'(e, t) {\n\t\te.preventDefault();\n\n\t\tconst email = e.target.email.value;\n\t\tconst tac = e.target.readtac.checked;\n\n\t\tif (!tac) {\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: TAPi18n.__('Chatpal_ERROR_TAC_must_be_checked'),\n\t\t\t});\n\t\t}\n\t\tif (!email || email === '') {\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: TAPi18n.__('Chatpal_ERROR_Email_must_be_set'),\n\t\t\t});\n\t\t}\n\t\tif (!t.validateEmail(email)) {\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: TAPi18n.__('Chatpal_ERROR_Email_must_be_valid'),\n\t\t\t});\n\t\t}\n\n\t\t// TODO register\n\t\ttry {\n\t\t\tMeteor.call('chatpalUtilsCreateKey', email, (err, key) => {\n\t\t\t\tif (!key) {\n\t\t\t\t\treturn dispatchToastMessage({\n\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\tmessage: TAPi18n.__('Chatpal_ERROR_username_already_exists'),\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tdispatchToastMessage({\n\t\t\t\t\ttype: 'info',\n\t\t\t\t\tmessage: TAPi18n.__('Chatpal_created_key_successfully'),\n\t\t\t\t});\n\n\t\t\t\tt.apiKey.set(key);\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tconsole.log(e);\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: TAPi18n.__('Chatpal_ERROR_username_already_exists'),\n\t\t\t}); // TODO error messages\n\t\t}\n\t},\n});\n\n// template\nTemplate.ChatpalAdmin.helpers({\n\tapiKey() {\n\t\treturn Template.instance().apiKey.get();\n\t},\n\tisAdmin() {\n\t\treturn hasRole(Meteor.userId(), 'admin');\n\t},\n\ttac() {\n\t\treturn Template.instance().tac.get();\n\t},\n});\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { roomTypes, getURL } from '../../../utils';\nimport { Subscriptions } from '../../../models';\nimport { getUserAvatarURL as getAvatarUrl } from '../../../utils/lib/getUserAvatarURL';\nimport { formatTime } from '../../../../client/lib/utils/formatTime';\nimport { formatDate } from '../../../../client/lib/utils/formatDate';\n\nconst getDMUrl = (username) => getURL(`/direct/${username}`);\n\nTemplate.ChatpalSearchResultTemplate.onCreated(function () {\n\tthis.badRequest = new ReactiveVar(false);\n\tthis.resultType = new ReactiveVar(this.data.settings.DefaultResultType);\n\tthis.data.parentPayload.resultType = this.resultType.get();\n});\n\nTemplate.ChatpalSearchResultTemplate.events = {\n\t'click .chatpal-search-typefilter li'(evt, t) {\n\t\tt.data.parentPayload.resultType = evt.currentTarget.getAttribute('value');\n\t\tt.data.payload.start = 0;\n\t\tt.resultType.set(t.data.parentPayload.resultType);\n\t\tt.data.search();\n\t},\n\t'click .chatpal-paging-prev'(env, t) {\n\t\tt.data.payload.start -= t.data.settings.PageSize;\n\t\tt.data.search();\n\t},\n\t'click .chatpal-paging-next'(env, t) {\n\t\tt.data.payload.start = (t.data.payload.start || 0) + t.data.settings.PageSize;\n\t\tt.data.search();\n\t},\n\t'click .chatpal-show-more-messages'(evt, t) {\n\t\tt.data.parentPayload.resultType = 'Messages';\n\t\tt.data.payload.start = 0;\n\t\tt.data.payload.rows = t.data.settings.PageSize;\n\t\tt.resultType.set(t.data.parentPayload.resultType);\n\t\tt.data.search();\n\t},\n};\n\nTemplate.ChatpalSearchResultTemplate.helpers({\n\tresult() {\n\t\treturn Template.instance().data.result.get();\n\t},\n\tsearching() {\n\t\treturn Template.instance().data.searching.get();\n\t},\n\tresultType() {\n\t\treturn Template.instance().resultType.get();\n\t},\n\tnavSelected(type) {\n\t\treturn Template.instance().resultType.get() === type ? 'selected' : '';\n\t},\n\tresultsFoundForAllSearch() {\n\t\tconst result = Template.instance().data.result.get();\n\n\t\tif (!result) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn result.message.numFound > 0 || result.user.numFound > 0 || result.room.numFound > 0;\n\t},\n\tmoreMessagesThanDisplayed() {\n\t\tconst result = Template.instance().data.result.get();\n\n\t\treturn result.message.docs.length < result.message.numFound;\n\t},\n\tresultNumFound() {\n\t\tconst result = Template.instance().data.result.get();\n\t\tif (result) {\n\t\t\tswitch (result.message.numFound) {\n\t\t\t\tcase 0:\n\t\t\t\t\treturn TAPi18n.__('Chatpal_no_search_results');\n\t\t\t\tcase 1:\n\t\t\t\t\treturn TAPi18n.__('Chatpal_one_search_result');\n\t\t\t\tdefault:\n\t\t\t\t\treturn TAPi18n.__('Chatpal_search_results', result.message.numFound);\n\t\t\t}\n\t\t}\n\t},\n\tresultMessagesOnly() {\n\t\treturn Template.instance().resultType.get() === 'Messages' || Template.instance().resultType.get() === 'Room';\n\t},\n\tresultPaging() {\n\t\tconst result = Template.instance().data.result.get();\n\t\tconst pageSize = Template.instance().data.settings.PageSize;\n\t\tif (result) {\n\t\t\treturn {\n\t\t\t\tcurrentPage: 1 + result.message.start / pageSize,\n\t\t\t\tnumOfPages: Math.ceil(result.message.numFound / pageSize),\n\t\t\t};\n\t\t}\n\t},\n});\n\nTemplate.ChatpalSearchSingleMessage.helpers({\n\troomIcon() {\n\t\tconst room = this.r;\n\t\tif (room && room.t === 'd') {\n\t\t\treturn 'at';\n\t\t}\n\t\treturn roomTypes.getIcon(room);\n\t},\n\n\troomLink() {\n\t\treturn roomTypes.getRouteLink(this.r.t, this.r);\n\t},\n\n\troomName() {\n\t\treturn roomTypes.getRoomName(this.r.t, this.r);\n\t},\n\n\troomNotSubscribed() {\n\t\tconst subscription = Subscriptions.findOne({ rid: this.rid });\n\t\treturn typeof subscription === 'undefined';\n\t},\n\n\ttime() {\n\t\treturn formatTime(this.created);\n\t},\n\tdate() {\n\t\treturn formatDate(this.created);\n\t},\n\tgetAvatarUrl,\n});\n\nTemplate.ChatpalSearchSingleRoom.helpers({\n\troomIcon() {\n\t\tif (this.t === 'd') {\n\t\t\treturn 'at';\n\t\t}\n\t\treturn roomTypes.getIcon(this);\n\t},\n\troomLink() {\n\t\treturn roomTypes.getRouteLink(this.t, this);\n\t},\n\troomNotSubscribed() {\n\t\tconst subscription = Subscriptions.findOne({ rid: this.rid });\n\t\treturn typeof subscription === 'undefined';\n\t},\n});\n\nTemplate.ChatpalSearchSingleUser.helpers({\n\tcleanUsername() {\n\t\tconst username = this.user_username || this.username; // varies whether users or messages of users are displayed\n\t\treturn username.replace(/<\\/?em>/gi, '');\n\t},\n\tgetAvatarUrl,\n\tgetDMUrl,\n});\n","import { Template } from 'meteor/templating';\n\nTemplate.ChatpalSuggestionItemTemplate.onCreated(function () {\n\tif (this.data.type === 'link') {\n\t\tthis.data.action = () => {\n\t\t\tconsole.log('an example for an external link');\n\t\t};\n\t}\n});\n","import './template/admin.html';\nimport './template/result.html';\nimport './template/suggestion.html';\nimport './template/admin';\nimport './template/result';\nimport './template/suggestion';\nimport './style.css';\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\n\nimport { handleError } from '../../../../client/lib/utils/handleError';\nimport { settings } from '../../../settings/client';\n\nconst getMedia = () => navigator.getUserMedia || navigator.webkitGetUserMedia || navigator.mozGetUserMedia || navigator.msGetUserMedia;\nconst createAndConnect = (url) => {\n\tif (!('WebSocket' in window)) {\n\t\t// eslint-disable-line no-negated-in-lhs\n\t\treturn false;\n\t}\n\n\tconst ws = new WebSocket(url);\n\tws.onerror = (evt) => console.error(`Error: ${evt.data}`);\n\treturn ws;\n};\nconst sendMessageToWebSocket = (message, ws) => {\n\tif (ws != null) {\n\t\tif (ws.readyState === 1) {\n\t\t\tws.send(message);\n\t\t}\n\t}\n};\nexport const call = (...args) =>\n\tnew Promise(function (resolve, reject) {\n\t\tMeteor.call(...args, function (err, result) {\n\t\t\tif (err) {\n\t\t\t\thandleError(err);\n\t\t\t\treject(err);\n\t\t\t}\n\t\t\tresolve(result);\n\t\t});\n\t});\n\nconst delay = (time) => new Promise((resolve) => setTimeout(resolve, time));\n\nconst waitForStreamStatus = async (id, status) => {\n\tconst streamActive = new Promise(async (resolve) => {\n\t\t// eslint-disable-next-line no-constant-condition\n\t\twhile (true) {\n\t\t\tconst currentStatus = await call('livestreamStreamStatus', { streamId: id }); // eslint-disable-line no-await-in-loop\n\t\t\tif (currentStatus === status) {\n\t\t\t\treturn resolve(status);\n\t\t\t}\n\t\t\tawait delay(1500); // eslint-disable-line no-await-in-loop\n\t\t}\n\t});\n\tawait streamActive;\n};\nconst waitForBroadcastStatus = async (id, status) => {\n\tconst broadcastActive = new Promise(async (resolve) => {\n\t\t// eslint-disable-next-line no-constant-condition\n\t\twhile (true) {\n\t\t\tconst currentStatus = await call('getBroadcastStatus', { broadcastId: id }); // eslint-disable-line no-await-in-loop\n\t\t\tif (currentStatus === status) {\n\t\t\t\treturn resolve(status);\n\t\t\t}\n\t\t\tawait delay(1500); // eslint-disable-line no-await-in-loop\n\t\t}\n\t});\n\tawait broadcastActive;\n};\n\nTemplate.broadcastView.helpers({\n\tbroadcastSource() {\n\t\treturn Template.instance().mediaStream.get() ? window.URL.createObjectURL(Template.instance().mediaStream.get()) : '';\n\t},\n\tmediaRecorder() {\n\t\tTemplate.instance().mediaRecorder.get();\n\t},\n});\n\nTemplate.broadcastView.onCreated(async function () {\n\tconst connection = createAndConnect(`${settings.get('Broadcasting_media_server_url')}/${this.data.id}`);\n\tthis.mediaStream = new ReactiveVar(null);\n\tthis.mediaRecorder = new ReactiveVar(null);\n\tthis.connection = new ReactiveVar(connection);\n});\nTemplate.broadcastView.onDestroyed(function () {\n\tif (this.connection.get()) {\n\t\tthis.connection.get().close();\n\t}\n\tif (this.mediaRecorder.get()) {\n\t\tthis.mediaRecorder.get().stop();\n\t\tthis.mediaRecorder.set(null);\n\t}\n\tif (this.mediaStream.get()) {\n\t\tthis.mediaStream\n\t\t\t.get()\n\t\t\t.getTracks()\n\t\t\t.map((track) => track.stop());\n\t\tthis.mediaStream.set(null);\n\t}\n});\nTemplate.broadcastView.onRendered(async function () {\n\tnavigator.getMedia = getMedia();\n\tif (!navigator.getMedia) {\n\t\treturn alert('getUserMedia() is not supported in your browser!');\n\t}\n\tconst localMediaStream = await new Promise((resolve, reject) => navigator.getMedia({ video: true, audio: true }, resolve, reject));\n\n\tconst connection = this.connection.get();\n\n\tthis.mediaStream.set(localMediaStream);\n\tlet options = { mimeType: 'video/webm;codecs=vp9' };\n\tif (!MediaRecorder.isTypeSupported(options.mimeType)) {\n\t\toptions = { mimeType: 'video/webm;codecs=vp8' };\n\t\tif (!MediaRecorder.isTypeSupported(options.mimeType)) {\n\t\t\toptions = { mimeType: 'video/webm' };\n\t\t\tif (!MediaRecorder.isTypeSupported(options.mimeType)) {\n\t\t\t\toptions = { mimeType: '' };\n\t\t\t}\n\t\t}\n\t}\n\ttry {\n\t\tconst mediaRecorder = new MediaRecorder(localMediaStream, options);\n\t\tmediaRecorder.ondataavailable = (event) => {\n\t\t\tif (!(event.data || event.data.size > 0)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tsendMessageToWebSocket(event.data, connection);\n\t\t};\n\t\tmediaRecorder.start(100); // collect 100ms of data\n\t\tthis.mediaRecorder.set(mediaRecorder);\n\n\t\tawait waitForStreamStatus(this.data.stream.id, 'active');\n\t\tawait call('setLivestreamStatus', { broadcastId: this.data.broadcast.id, status: 'testing' });\n\t\tawait waitForBroadcastStatus(this.data.broadcast.id, 'testing');\n\t\tdocument.querySelector('.streaming-popup').dispatchEvent(new Event('broadcastStreamReady'));\n\t} catch (e) {\n\t\tconsole.log(e);\n\t}\n});\n\nTemplate.broadcastView.events({\n\tasync 'startStreaming .streaming-popup'(e, i) {\n\t\tawait call('setLivestreamStatus', { broadcastId: i.data.broadcast.id, status: 'live' });\n\t\tdocument.querySelector('.streaming-popup').dispatchEvent(new Event('broadcastStream'));\n\t\tawait call('saveRoomSettings', Session.get('openedRoom'), 'streamingOptions', {\n\t\t\tid: i.data.broadcast.id,\n\t\t\turl: `https://www.youtube.com/embed/${i.data.broadcast.id}`,\n\t\t\tthumbnail: `https://img.youtube.com/vi/${i.data.broadcast.id}/0.jpg`,\n\t\t});\n\t},\n\tasync 'stopStreaming .streaming-popup'(e, i) {\n\t\tawait call('setBroadcastStatus', { broadcastId: i.data.broadcast.id, status: 'complete' });\n\t\tawait call('saveRoomSettings', Session.get('openedRoom'), 'streamingOptions', {}, (err) => {\n\t\t\tif (err) {\n\t\t\t\treturn handleError(err);\n\t\t\t}\n\t\t\ti.editing.set(false);\n\t\t\ti.streamingOptions.set({});\n\t\t});\n\t\tif (i.mediaRecorder.get()) {\n\t\t\ti.mediaRecorder.get().stop();\n\t\t\ti.mediaRecorder.set(null);\n\t\t}\n\t\tif (i.mediaStream.get()) {\n\t\t\ti.mediaStream\n\t\t\t\t.get()\n\t\t\t\t.getTracks()\n\t\t\t\t.map((track) => track.stop());\n\t\t\ti.mediaStream.set(null);\n\t\t}\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Blaze } from 'meteor/blaze';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { auth } from '../oauth.js';\nimport { RocketChatAnnouncement } from '../../../lib';\nimport { popout } from '../../../ui-utils';\nimport { t } from '../../../utils';\nimport { settings } from '../../../settings';\nimport { callbacks } from '../../../../lib/callbacks';\nimport { hasAllPermission } from '../../../authorization';\nimport { Users, Rooms } from '../../../models';\nimport { handleError } from '../../../../client/lib/utils/handleError';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\n\nexport const call = (...args) =>\n\tnew Promise(function (resolve, reject) {\n\t\tMeteor.call(...args, function (err, result) {\n\t\t\tif (err) {\n\t\t\t\thandleError(err);\n\t\t\t\treject(err);\n\t\t\t}\n\t\t\tresolve(result);\n\t\t});\n\t});\n\nexport const close = (popup) =>\n\tnew Promise(function (resolve) {\n\t\tconst checkInterval = setInterval(() => {\n\t\t\tif (popup.closed) {\n\t\t\t\tclearInterval(checkInterval);\n\t\t\t\tresolve();\n\t\t\t}\n\t\t}, 300);\n\t});\n\nfunction optionsFromUrl(url) {\n\tconst options = {};\n\tconst parsedUrl = url.match(\n\t\t/(http:|https:|)\\/\\/(www.)?(youtu(be\\.com|\\.be|be\\.googleapis\\.com))\\/(video\\/|embed\\/|watch\\?v=|v\\/|embed\\?clip=)?([A-Za-z0-9._%-]*)(\\&\\S+)?/,\n\t);\n\toptions.url = url;\n\tif (parsedUrl != null) {\n\t\toptions.id = parsedUrl[6];\n\t\tif (parsedUrl[3].includes('youtu')) {\n\t\t\toptions.url = `https://www.youtube.com/embed/${parsedUrl[6]}`;\n\t\t\toptions.thumbnail = `https://img.youtube.com/vi/${parsedUrl[6]}/0.jpg`;\n\t\t}\n\t\t// @TODO add support for other urls\n\t}\n\treturn options;\n}\n\nTemplate.liveStreamTab.helpers({\n\tbroadcastEnabled() {\n\t\treturn !!settings.get('Broadcasting_enabled');\n\t},\n\tstreamingSource() {\n\t\treturn Template.instance().streamingOptions.get() ? Template.instance().streamingOptions.get().url : '';\n\t},\n\tstreamingUnavailableMessage() {\n\t\treturn Template.instance().streamingOptions.get() &&\n\t\t\tTemplate.instance().streamingOptions.get().message &&\n\t\t\tTemplate.instance().streamingOptions.get().message !== ''\n\t\t\t? Template.instance().streamingOptions.get().message\n\t\t\t: t('Livestream_not_found');\n\t},\n\tthumbnailUrl() {\n\t\treturn Template.instance().streamingOptions.get() ? Template.instance().streamingOptions.get().thumbnail : '';\n\t},\n\thasThumbnail() {\n\t\treturn (\n\t\t\t!!Template.instance().streamingOptions.get() &&\n\t\t\t!!Template.instance().streamingOptions.get().thumbnail &&\n\t\t\tTemplate.instance().streamingOptions.get().thumbnail !== ''\n\t\t);\n\t},\n\thasSource() {\n\t\treturn (\n\t\t\t!!Template.instance().streamingOptions.get() &&\n\t\t\t!!Template.instance().streamingOptions.get().url &&\n\t\t\tTemplate.instance().streamingOptions.get().url !== ''\n\t\t);\n\t},\n\tcanEdit() {\n\t\treturn hasAllPermission('edit-room', this.rid);\n\t},\n\tediting() {\n\t\treturn (\n\t\t\tTemplate.instance().editing.get() ||\n\t\t\tTemplate.instance().streamingOptions.get() == null ||\n\t\t\t(Template.instance().streamingOptions.get() != null &&\n\t\t\t\t(Template.instance().streamingOptions.get().url == null || Template.instance().streamingOptions.get().url === ''))\n\t\t);\n\t},\n\tcanDock() {\n\t\tconst livestreamTabSource = Template.instance().streamingOptions.get().url;\n\t\tlet popoutSource = null;\n\t\ttry {\n\t\t\tif (popout.context) {\n\t\t\t\tpopoutSource = Blaze.getData(popout.context).data && Blaze.getData(popout.context).data.streamingSource;\n\t\t\t}\n\t\t\tif (popoutSource != null && livestreamTabSource === popoutSource) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} catch (e) {\n\t\t\treturn false;\n\t\t}\n\t\treturn false;\n\t},\n\tisPopoutOpen() {\n\t\treturn Template.instance().popoutOpen.get();\n\t},\n\tisAudioOnly() {\n\t\treturn Template.instance().streamingOptions.get() ? Template.instance().streamingOptions.get().isAudioOnly : false;\n\t},\n});\n\nTemplate.liveStreamTab.onCreated(function () {\n\tthis.editing = new ReactiveVar(false);\n\tthis.streamingOptions = new ReactiveVar();\n\tthis.popoutOpen = new ReactiveVar(popout.context != null);\n\n\tthis.autorun(() => {\n\t\tconst room = Rooms.findOne(this.data.rid, { fields: { streamingOptions: 1 } });\n\t\tthis.streamingOptions.set(room.streamingOptions);\n\t});\n});\n\nTemplate.liveStreamTab.onDestroyed(function () {\n\tif (popout.docked) {\n\t\tpopout.close();\n\t}\n});\n\nTemplate.liveStreamTab.events({\n\t'click .js-cancel'(e, i) {\n\t\te.preventDefault();\n\t\ti.editing.set(false);\n\t},\n\t'click .js-clear'(e, i) {\n\t\te.preventDefault();\n\n\t\tconst clearedObject = {};\n\n\t\tMeteor.call('saveRoomSettings', this.rid, 'streamingOptions', clearedObject, function (err) {\n\t\t\tif (err) {\n\t\t\t\treturn handleError(err);\n\t\t\t}\n\t\t\ti.editing.set(false);\n\t\t\ti.streamingOptions.set(clearedObject);\n\t\t\tconst roomAnnouncement = new RocketChatAnnouncement().getByRoom(i.data.rid);\n\t\t\tif (roomAnnouncement.getMessage() !== '') {\n\t\t\t\troomAnnouncement.clear();\n\t\t\t}\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: TAPi18n.__('Livestream_source_changed_succesfully'),\n\t\t\t});\n\t\t});\n\t},\n\t'click .js-save'(e, i) {\n\t\te.preventDefault();\n\n\t\tconst streamingOptions = {\n\t\t\t...optionsFromUrl(i.find('[name=streaming-source]').value),\n\t\t\tisAudioOnly: i.find('[name=streaming-audio-only]').checked,\n\t\t\tmessage: i.find('[name=streaming-message]').value,\n\t\t\ttype: 'livestream',\n\t\t};\n\n\t\tMeteor.call('saveRoomSettings', this.rid, 'streamingOptions', streamingOptions, function (err) {\n\t\t\tif (err) {\n\t\t\t\treturn handleError(err);\n\t\t\t}\n\t\t\ti.editing.set(false);\n\t\t\ti.streamingOptions.set(streamingOptions);\n\t\t\tif (streamingOptions.url !== '') {\n\t\t\t\tnew RocketChatAnnouncement({\n\t\t\t\t\troom: i.data.rid,\n\t\t\t\t\tmessage: 'Broadcast is now live. Click here to watch!',\n\t\t\t\t\tcallback: 'openBroadcast',\n\t\t\t\t}).save();\n\t\t\t} else {\n\t\t\t\tconst roomAnnouncement = new RocketChatAnnouncement().getByRoom(i.data.rid);\n\t\t\t\tif (roomAnnouncement.getMessage() !== '') {\n\t\t\t\t\troomAnnouncement.clear();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: TAPi18n.__('Livestream_source_changed_succesfully'),\n\t\t\t});\n\t\t});\n\t},\n\t'click .streaming-source-settings'(e, i) {\n\t\te.preventDefault();\n\t\ti.editing.set(true);\n\t},\n\t'click .js-dock'(e) {\n\t\te.stopPropagation();\n\t\tpopout.docked = true;\n\t},\n\t'click .js-close'(e, i) {\n\t\te.stopPropagation();\n\t\tlet popoutSource = '';\n\t\tif (popout.context) {\n\t\t\tpopoutSource = Blaze.getData(popout.context).data && Blaze.getData(popout.context).data.streamingSource;\n\t\t}\n\t\tpopout.close();\n\t\tif (popoutSource !== Template.instance().streamingOptions.get().url) {\n\t\t\tpopout.open({\n\t\t\t\tcontent: 'liveStreamView',\n\t\t\t\tdata: {\n\t\t\t\t\tstreamingSource: i.streamingOptions.get().url,\n\t\t\t\t\tisAudioOnly: i.streamingOptions.get().isAudioOnly,\n\t\t\t\t\tshowVideoControls: true,\n\t\t\t\t\tstreamingOptions: i.streamingOptions.get(),\n\t\t\t\t},\n\t\t\t\tonCloseCallback: () => i.popoutOpen.set(false),\n\t\t\t});\n\t\t}\n\t},\n\t'submit .liveStreamTab__form'(e, i) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tconst streamingOptions = {\n\t\t\t...optionsFromUrl(i.find('[name=streaming-source]').value),\n\t\t\tisAudioOnly: i.find('[name=streaming-audio-only]').checked,\n\t\t\tmessage: i.find('[name=streaming-message]').value,\n\t\t\ttype: 'livestream',\n\t\t};\n\n\t\tMeteor.call('saveRoomSettings', this.rid, 'streamingOptions', streamingOptions, function (err) {\n\t\t\tif (err) {\n\t\t\t\treturn handleError(err);\n\t\t\t}\n\t\t\ti.editing.set(false);\n\t\t\ti.streamingOptions.set(streamingOptions);\n\t\t\tif (streamingOptions.url !== '') {\n\t\t\t\tnew RocketChatAnnouncement({\n\t\t\t\t\troom: i.data.rid,\n\t\t\t\t\tmessage: 'Broadcast is now live. Click here to watch!',\n\t\t\t\t\tcallback: 'openBroadcast',\n\t\t\t\t}).save();\n\t\t\t} else {\n\t\t\t\tconst roomAnnouncement = new RocketChatAnnouncement().getByRoom(i.data.rid);\n\t\t\t\tif (roomAnnouncement.getMessage() !== '') {\n\t\t\t\t\troomAnnouncement.clear();\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: TAPi18n.__('Livestream_source_changed_succesfully'),\n\t\t\t});\n\t\t});\n\t},\n\t'click .js-popout'(e, i) {\n\t\te.preventDefault();\n\t\tpopout.open({\n\t\t\tcontent: 'liveStreamView',\n\t\t\tdata: {\n\t\t\t\tstreamingSource: i.streamingOptions.get().url,\n\t\t\t\tisAudioOnly: i.streamingOptions.get().isAudioOnly,\n\t\t\t\tshowVideoControls: true,\n\t\t\t\tstreamingOptions: i.streamingOptions.get(),\n\t\t\t},\n\t\t\tonCloseCallback: () => i.popoutOpen.set(false),\n\t\t});\n\t\ti.popoutOpen.set(true);\n\t},\n\tasync 'click .js-broadcast'(e, i) {\n\t\te.preventDefault();\n\t\te.currentTarget.classList.add('loading');\n\t\ttry {\n\t\t\tconst user = Users.findOne({ _id: Meteor.userId() }, { fields: { 'settings.livestream': 1 } });\n\t\t\tif (!user.settings || !user.settings.livestream) {\n\t\t\t\tawait auth();\n\t\t\t}\n\t\t\tconst result = await call('livestreamGet', { rid: i.data.rid });\n\t\t\tpopout.open({\n\t\t\t\tcontent: 'broadcastView',\n\t\t\t\tdata: {\n\t\t\t\t\t...result,\n\t\t\t\t\tshowVideoControls: false,\n\t\t\t\t\tshowStreamControls: true,\n\t\t\t\t},\n\t\t\t\tonCloseCallback: () => i.popoutOpen.set(false),\n\t\t\t});\n\t\t} catch (e) {\n\t\t\tconsole.log(e);\n\t\t} finally {\n\t\t\te.currentTarget.classList.remove('loading');\n\t\t}\n\t},\n});\n\ncallbacks.add('openBroadcast', (rid) => {\n\tconst roomData = Session.get(`roomData${rid}`);\n\tif (!roomData) {\n\t\treturn;\n\t}\n\tpopout.open({\n\t\tcontent: 'liveStreamView',\n\t\tdata: {\n\t\t\tstreamingSource: roomData.streamingOptions.url,\n\t\t\tisAudioOnly: roomData.streamingOptions.isAudioOnly,\n\t\t\tshowVideoControls: true,\n\t\t\tstreamingOptions: roomData.streamingOptions,\n\t\t},\n\t});\n});\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nthis.onYouTubePlayerAPIReady = function () {\n\tconst playerReadyEvent = new Event('playerReady');\n\tdocument.querySelector('.streaming-popup').dispatchEvent(playerReadyEvent);\n};\nthis.liveStreamPlayer = null;\n\nTemplate.liveStreamView.onCreated(function () {\n\tthis.streamingOptions = new ReactiveVar(this.data.streamingOptions);\n});\n\nTemplate.liveStreamView.onRendered(function () {\n\tif (window.YT) {\n\t\twindow.liveStreamPlayer = new window.YT.Player('ytplayer', {\n\t\t\twidth: '380',\n\t\t\theight: '214',\n\t\t\tvideoId: this.data.streamingOptions.id || '',\n\t\t\tplayerVars: {\n\t\t\t\tautoplay: 1,\n\t\t\t\tcontrols: 0,\n\t\t\t\tshowinfo: 0,\n\t\t\t\tenablejsapi: 1,\n\t\t\t\tfs: 0,\n\t\t\t\tmodestbranding: 1,\n\t\t\t\trel: 0,\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonStateChange: (e) => {\n\t\t\t\t\tconst playerStateChangedEvent = new CustomEvent('playerStateChanged', { detail: e.data });\n\t\t\t\t\tdocument.querySelector('.rc-popout').dispatchEvent(playerStateChangedEvent);\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t} else {\n\t\tconst tag = document.createElement('script');\n\t\ttag.src = 'https://www.youtube.com/player_api';\n\t\ttag.type = 'text/javascript';\n\t\tconst firstScriptTag = document.body.getElementsByTagName('script')[0];\n\t\tfirstScriptTag.parentNode.insertBefore(tag, firstScriptTag);\n\t}\n});\n\nTemplate.liveStreamView.events({\n\t'playerReady .streaming-popup'(e, i) {\n\t\twindow.liveStreamPlayer = new window.YT.Player('ytplayer', {\n\t\t\twidth: '380',\n\t\t\theight: '214',\n\t\t\tvideoId: i.streamingOptions.get().id || '',\n\t\t\tplayerVars: {\n\t\t\t\tautoplay: 1,\n\t\t\t\tcontrols: 0,\n\t\t\t\tshowinfo: 0,\n\t\t\t\tenablejsapi: 1,\n\t\t\t\tfs: 0,\n\t\t\t\tmodestbranding: 1,\n\t\t\t\trel: 0,\n\t\t\t},\n\t\t\tevents: {\n\t\t\t\tonStateChange: (e) => {\n\t\t\t\t\tconst playerStateChangedEvent = new CustomEvent('playerStateChanged', { detail: e.data });\n\t\t\t\t\tdocument.querySelector('.rc-popout').dispatchEvent(playerStateChangedEvent);\n\t\t\t\t},\n\t\t\t},\n\t\t});\n\t},\n});\n","import './views/liveStreamTab.html';\nimport './views/liveStreamTab';\nimport './views/livestreamBroadcast.html';\nimport './views/livestreamBroadcast';\nimport './views/broadcastView.html';\nimport './views/broadcastView';\nimport './views/liveStreamView.html';\nimport './views/liveStreamView';\nimport './tabBar';\nimport './styles/liveStreamTab.css';\n","import { Meteor } from 'meteor/meteor';\n\nimport { settings } from '../../settings';\n\nexport const close = (popup) =>\n\tnew Promise(function (resolve) {\n\t\tconst checkInterval = setInterval(() => {\n\t\t\tif (popup.closed) {\n\t\t\t\tclearInterval(checkInterval);\n\t\t\t\tresolve();\n\t\t\t}\n\t\t}, 300);\n\t});\n\nexport const auth = async () => {\n\tconst oauthWindow = window.open(\n\t\t`${settings.get('Site_Url')}/api/v1/livestream/oauth?userId=${Meteor.userId()}`,\n\t\t'youtube-integration-oauth',\n\t\t'width=400,height=600',\n\t);\n\treturn close(oauthWindow);\n};\n","import React, { ReactNode, useMemo } from 'react';\nimport { Option, Badge } from '@rocket.chat/fuselage';\n\nimport { useSetting } from '../../../client/contexts/SettingsContext';\nimport { useTranslation } from '../../../client/contexts/TranslationContext';\nimport { addAction } from '../../../client/views/room/lib/Toolbox';\nimport Header from '../../../client/components/Header';\n\naddAction('livestream', ({ room }) => {\n\tconst enabled = useSetting('Livestream_enabled');\n\tconst t = useTranslation();\n\n\tconst isLive = room?.streamingOptions?.id && room.streamingOptions.type === 'livestream';\n\n\treturn useMemo(\n\t\t() =>\n\t\t\tenabled\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['channel', 'group', 'team'],\n\t\t\t\t\t\tid: 'livestream',\n\t\t\t\t\t\ttitle: 'Livestream',\n\t\t\t\t\t\ticon: 'podcast',\n\t\t\t\t\t\ttemplate: 'liveStreamTab',\n\t\t\t\t\t\torder: isLive ? -1 : 15,\n\t\t\t\t\t\trenderAction: (props): ReactNode => (\n\t\t\t\t\t\t\t<Header.ToolBoxAction {...props}>\n\t\t\t\t\t\t\t\t{isLive ? (\n\t\t\t\t\t\t\t\t\t<Header.Badge title={t('Livestream_live_now')} variant='danger'>\n\t\t\t\t\t\t\t\t\t\t!\n\t\t\t\t\t\t\t\t\t</Header.Badge>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</Header.ToolBoxAction>\n\t\t\t\t\t\t),\n\t\t\t\t\t\trenderOption: ({ label: { title, icon }, ...props }: any): ReactNode => (\n\t\t\t\t\t\t\t<Option label={title} title={title} icon={icon} {...props}>\n\t\t\t\t\t\t\t\t{isLive ? (\n\t\t\t\t\t\t\t\t\t<Badge title={t('Livestream_live_now')} variant='danger'>\n\t\t\t\t\t\t\t\t\t\t!\n\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t),\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[enabled, isLive, t],\n\t);\n});\n","import _ from 'underscore';\nimport { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nimport { messageContext } from '../../../ui-utils/client/lib/messageContext';\nimport { upsertMessageBulk } from '../../../ui-utils/client/lib/RoomHistoryManager';\nimport { APIClient } from '../../../utils/client';\nimport { Messages, Users } from '../../../models/client';\nimport { getCommonRoomEvents } from '../../../ui/client/views/app/lib/getCommonRoomEvents';\n\nconst LIMIT_DEFAULT = 50;\n\nTemplate.mentionsFlexTab.helpers({\n\thasMessages() {\n\t\treturn Template.instance().messages.find().count();\n\t},\n\tmessages() {\n\t\tconst instance = Template.instance();\n\t\treturn instance.messages.find({}, { limit: instance.limit.get(), sort: { ts: -1 } });\n\t},\n\thasMore() {\n\t\treturn Template.instance().hasMore.get();\n\t},\n\tmessageContext,\n});\n\nTemplate.mentionsFlexTab.onCreated(function () {\n\tthis.messages = new Mongo.Collection(null);\n\n\tthis.hasMore = new ReactiveVar(true);\n\tthis.limit = new ReactiveVar(LIMIT_DEFAULT);\n\n\tthis.autorun(() => {\n\t\tconst query = {\n\t\t\t'_hidden': { $ne: true },\n\t\t\t'mentions.username': Users.findOne(Meteor.userId(), { fields: { username: 1 } }).username,\n\t\t\t'rid': this.data.rid,\n\t\t\t'_updatedAt': {\n\t\t\t\t$gt: new Date(),\n\t\t\t},\n\t\t};\n\n\t\tthis.cursor && this.cursor.stop();\n\n\t\tthis.limit.set(LIMIT_DEFAULT);\n\n\t\tthis.cursor = Messages.find(query).observe({\n\t\t\tadded: ({ _id, ...message }) => {\n\t\t\t\tthis.messages.upsert({ _id }, message);\n\t\t\t},\n\t\t\tchanged: ({ _id, ...message }) => {\n\t\t\t\tthis.messages.upsert({ _id }, message);\n\t\t\t},\n\t\t\tremoved: ({ _id }) => {\n\t\t\t\tthis.messages.remove({ _id });\n\t\t\t},\n\t\t});\n\t});\n\n\tthis.autorun(async () => {\n\t\tconst limit = this.limit.get();\n\t\tconst { messages, total } = await APIClient.v1.get(`chat.getMentionedMessages?roomId=${this.data.rid}&count=${limit}`);\n\n\t\tupsertMessageBulk({ msgs: messages }, this.messages);\n\n\t\tthis.hasMore.set(total > limit);\n\t});\n});\n\nTemplate.mentionsFlexTab.onDestroyed(function () {\n\tthis.cursor.stop();\n});\n\nTemplate.mentionsFlexTab.events({\n\t...getCommonRoomEvents(),\n\t'scroll .js-list': _.throttle(function (e, instance) {\n\t\tif (e.target.scrollTop >= e.target.scrollHeight - e.target.clientHeight && instance.hasMore.get()) {\n\t\t\treturn instance.limit.set(instance.limit.get() + 50);\n\t\t}\n\t}, 200),\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { MessageAction, RoomHistoryManager } from '../../ui-utils';\nimport { messageArgs } from '../../ui-utils/client/lib/messageArgs';\nimport { Rooms } from '../../models/client';\n\nMeteor.startup(function () {\n\tMessageAction.addButton({\n\t\tid: 'jump-to-message',\n\t\ticon: 'jump',\n\t\tlabel: 'Jump_to_message',\n\t\tcontext: ['mentions', 'threads'],\n\t\taction(e) {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tif (window.matchMedia('(max-width: 500px)').matches) {\n\t\t\t\tTemplate.instance().tabBar.close();\n\t\t\t}\n\t\t\tif (message.tmid) {\n\t\t\t\treturn FlowRouter.go(\n\t\t\t\t\tFlowRouter.getRouteName(),\n\t\t\t\t\t{\n\t\t\t\t\t\ttab: 'thread',\n\t\t\t\t\t\tcontext: message.tmid,\n\t\t\t\t\t\trid: message.rid,\n\t\t\t\t\t\tname: Rooms.findOne({ _id: message.rid }).name,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tjump: message._id,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tRoomHistoryManager.getSurroundingMessages(message, 50);\n\t\t},\n\t\torder: 100,\n\t\tgroup: ['message', 'menu'],\n\t});\n});\n","import './views/mentionsFlexTab.html';\nimport './views/mentionsFlexTab';\nimport './actionButton';\nimport './tabBar';\n","import { addAction } from '../../../client/views/room/lib/Toolbox';\n\naddAction('mentions', {\n\tgroups: ['channel', 'group', 'team'],\n\tid: 'mentions',\n\ttitle: 'Mentions',\n\ticon: 'at',\n\ttemplate: 'mentionsFlexTab',\n\torder: 9,\n});\n","import _ from 'underscore';\nimport { Mongo } from 'meteor/mongo';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nimport { upsertMessageBulk } from '../../../ui-utils/client/lib/RoomHistoryManager';\nimport { messageContext } from '../../../ui-utils/client/lib/messageContext';\nimport { APIClient } from '../../../utils/client';\nimport { Messages } from '../../../models/client';\nimport { getCommonRoomEvents } from '../../../ui/client/views/app/lib/getCommonRoomEvents';\n\nconst LIMIT_DEFAULT = 50;\n\nTemplate.pinnedMessages.helpers({\n\thasMessages() {\n\t\treturn Template.instance().messages.find().count();\n\t},\n\tmessages() {\n\t\tconst instance = Template.instance();\n\t\treturn instance.messages.find({}, { limit: instance.limit.get(), sort: { ts: -1 } });\n\t},\n\thasMore() {\n\t\treturn Template.instance().hasMore.get();\n\t},\n\tmessageContext,\n});\n\nTemplate.pinnedMessages.onCreated(function () {\n\tthis.pinnedMessages = new ReactiveVar([]);\n\tthis.hasMore = new ReactiveVar(true);\n\tthis.limit = new ReactiveVar(LIMIT_DEFAULT);\n\tthis.rid = this.data.rid;\n\tthis.messages = new Mongo.Collection(null);\n\n\tthis.autorun(() => {\n\t\tconst query = {\n\t\t\tt: { $ne: 'rm' },\n\t\t\t_hidden: { $ne: true },\n\t\t\tpinned: true,\n\t\t\trid: this.data.rid,\n\t\t\t_updatedAt: {\n\t\t\t\t$gte: new Date(),\n\t\t\t},\n\t\t};\n\n\t\tthis.cursor && this.cursor.stop();\n\n\t\tthis.limit.set(LIMIT_DEFAULT);\n\n\t\tthis.cursor = Messages.find(query).observe({\n\t\t\tadded: ({ _id, ...message }) => {\n\t\t\t\tthis.messages.upsert({ _id }, message);\n\t\t\t},\n\t\t\tchanged: ({ _id, ...message }) => {\n\t\t\t\tthis.messages.upsert({ _id }, message);\n\t\t\t},\n\t\t\tremoved: ({ _id }) => {\n\t\t\t\tthis.messages.remove({ _id });\n\t\t\t},\n\t\t});\n\t});\n\n\tthis.autorun(async () => {\n\t\tconst limit = this.limit.get();\n\t\tconst { messages, total } = await APIClient.v1.get(`chat.getPinnedMessages?roomId=${this.rid}&count=${limit}`);\n\n\t\tupsertMessageBulk({ msgs: messages }, this.messages);\n\n\t\tthis.hasMore.set(total > limit);\n\t});\n});\n\nTemplate.mentionsFlexTab.onDestroyed(function () {\n\tthis.cursor.stop();\n});\n\nTemplate.pinnedMessages.events({\n\t...getCommonRoomEvents(),\n\t'scroll .js-list': _.throttle(function (e, instance) {\n\t\tif (e.target.scrollTop >= e.target.scrollHeight - e.target.clientHeight && instance.hasMore.get()) {\n\t\t\treturn instance.limit.set(instance.limit.get() + 50);\n\t\t}\n\t}, 200),\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { RoomHistoryManager, MessageAction } from '../../ui-utils';\nimport { messageArgs } from '../../ui-utils/client/lib/messageArgs';\nimport { settings } from '../../settings';\nimport { hasAtLeastOnePermission } from '../../authorization';\nimport { Rooms } from '../../models/client';\nimport { roomTypes } from '../../utils/client';\nimport { handleError } from '../../../client/lib/utils/handleError';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\n\nMeteor.startup(function () {\n\tMessageAction.addButton({\n\t\tid: 'pin-message',\n\t\ticon: 'pin',\n\t\tlabel: 'Pin',\n\t\tcontext: ['pinned', 'message', 'message-mobile', 'threads', 'direct'],\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tmessage.pinned = true;\n\t\t\tMeteor.call('pinMessage', message, function (error) {\n\t\t\t\tif (error) {\n\t\t\t\t\treturn handleError(error);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tcondition({ msg, subscription, room }) {\n\t\t\tif (!settings.get('Message_AllowPinning') || msg.pinned || !subscription) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst isLivechatRoom = roomTypes.isLivechatRoom(room.t);\n\t\t\tif (isLivechatRoom) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn hasAtLeastOnePermission('pin-message', msg.rid);\n\t\t},\n\t\torder: 7,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'unpin-message',\n\t\ticon: 'pin',\n\t\tlabel: 'Unpin',\n\t\tcontext: ['pinned', 'message', 'message-mobile', 'threads', 'direct'],\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tmessage.pinned = false;\n\t\t\tMeteor.call('unpinMessage', message, function (error) {\n\t\t\t\tif (error) {\n\t\t\t\t\treturn handleError(error);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tcondition({ msg, subscription }) {\n\t\t\tif (!subscription || !settings.get('Message_AllowPinning') || !msg.pinned) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn hasAtLeastOnePermission('pin-message', msg.rid);\n\t\t},\n\t\torder: 8,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'jump-to-pin-message',\n\t\ticon: 'jump',\n\t\tlabel: 'Jump_to_message',\n\t\tcontext: ['pinned', 'message-mobile', 'direct'],\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tif (window.matchMedia('(max-width: 500px)').matches) {\n\t\t\t\tTemplate.instance().tabBar.close();\n\t\t\t}\n\t\t\tif (message.tmid) {\n\t\t\t\treturn FlowRouter.go(\n\t\t\t\t\tFlowRouter.getRouteName(),\n\t\t\t\t\t{\n\t\t\t\t\t\ttab: 'thread',\n\t\t\t\t\t\tcontext: message.tmid,\n\t\t\t\t\t\trid: message.rid,\n\t\t\t\t\t\tjump: message._id,\n\t\t\t\t\t\tname: Rooms.findOne({ _id: message.rid }).name,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tjump: message._id,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\treturn RoomHistoryManager.getSurroundingMessages(message, 50);\n\t\t},\n\t\tcondition({ subscription }) {\n\t\t\treturn !!subscription;\n\t\t},\n\t\torder: 100,\n\t\tgroup: ['message', 'menu'],\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'permalink-pinned',\n\t\ticon: 'permalink',\n\t\tlabel: 'Get_link',\n\t\tclasses: 'clipboard',\n\t\tcontext: ['pinned'],\n\t\tasync action() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tconst permalink = await MessageAction.getPermaLink(message._id);\n\t\t\tnavigator.clipboard.writeText(permalink);\n\t\t\tdispatchToastMessage({ type: 'success', message: TAPi18n.__('Copied') });\n\t\t},\n\t\tcondition({ subscription }) {\n\t\t\treturn !!subscription;\n\t\t},\n\t\torder: 101,\n\t\tgroup: 'menu',\n\t});\n});\n","import './actionButton';\nimport './messageType';\nimport './pinMessage';\nimport './tabBar';\nimport './views/pinnedMessages.html';\nimport './views/pinnedMessages';\nimport './views/stylesheets/messagepin.css';\n","import { Meteor } from 'meteor/meteor';\n\nimport { MessageTypes } from '../../ui-utils';\n\nMeteor.startup(function () {\n\tMessageTypes.registerType({\n\t\tid: 'message_pinned',\n\t\tsystem: true,\n\t\tmessage: 'Pinned_a_message',\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { settings } from '../../settings';\nimport { ChatMessage, Subscriptions } from '../../models';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\n\nMeteor.methods({\n\tpinMessage(message) {\n\t\tif (!Meteor.userId()) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('error-not-authorized') });\n\t\t\treturn false;\n\t\t}\n\t\tif (!settings.get('Message_AllowPinning')) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('pinning-not-allowed') });\n\t\t\treturn false;\n\t\t}\n\t\tif (Subscriptions.findOne({ rid: message.rid }) == null) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('error-pinning-message') });\n\t\t\treturn false;\n\t\t}\n\t\tif (typeof message._id !== 'string') {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('error-pinning-message') });\n\t\t\treturn false;\n\t\t}\n\t\tdispatchToastMessage({ type: 'success', message: TAPi18n.__('Message_has_been_pinned') });\n\t\treturn ChatMessage.update(\n\t\t\t{\n\t\t\t\t_id: message._id,\n\t\t\t\trid: message.rid,\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\tpinned: true,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t},\n\tunpinMessage(message) {\n\t\tif (!Meteor.userId()) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('error-not-authorized') });\n\t\t\treturn false;\n\t\t}\n\t\tif (!settings.get('Message_AllowPinning')) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('unpinning-not-allowed') });\n\t\t\treturn false;\n\t\t}\n\t\tif (Subscriptions.findOne({ rid: message.rid }) == null) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('error-unpinning-message') });\n\t\t\treturn false;\n\t\t}\n\t\tif (typeof message._id !== 'string') {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('error-unpinning-message') });\n\t\t\treturn false;\n\t\t}\n\t\tdispatchToastMessage({ type: 'success', message: TAPi18n.__('Message_has_been_unpinned') });\n\t\treturn ChatMessage.update(\n\t\t\t{\n\t\t\t\t_id: message._id,\n\t\t\t\trid: message.rid,\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\tpinned: false,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t},\n});\n","import { useMemo } from 'react';\n\nimport { addAction } from '../../../client/views/room/lib/Toolbox';\nimport { useSetting } from '../../../client/contexts/SettingsContext';\n\naddAction('pinned-messages', () => {\n\tconst pinningAllowed = useSetting('Message_AllowPinning');\n\treturn useMemo(\n\t\t() =>\n\t\t\tpinningAllowed\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\t\t\t\tid: 'pinned-messages',\n\t\t\t\t\t\ttitle: 'Pinned_Messages',\n\t\t\t\t\t\ticon: 'pin',\n\t\t\t\t\t\ttemplate: 'pinnedMessages',\n\t\t\t\t\t\torder: 11,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[pinningAllowed],\n\t);\n});\n","import _ from 'underscore';\nimport { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\nimport { Mongo } from 'meteor/mongo';\n\nimport { messageContext } from '../../../ui-utils/client/lib/messageContext';\nimport { Messages } from '../../../models/client';\nimport { upsertMessageBulk } from '../../../ui-utils/client/lib/RoomHistoryManager';\nimport { APIClient } from '../../../utils/client';\nimport { getCommonRoomEvents } from '../../../ui/client/views/app/lib/getCommonRoomEvents';\n\nconst LIMIT_DEFAULT = 50;\n\nTemplate.starredMessages.helpers({\n\thasMessages() {\n\t\treturn Template.instance().messages.find().count();\n\t},\n\tmessages() {\n\t\tconst instance = Template.instance();\n\t\treturn instance.messages.find({}, { limit: instance.limit.get(), sort: { ts: -1 } });\n\t},\n\thasMore() {\n\t\treturn Template.instance().hasMore.get();\n\t},\n\tmessageContext,\n});\n\nTemplate.starredMessages.onCreated(function () {\n\tthis.rid = this.data.rid;\n\tthis.messages = new Mongo.Collection(null);\n\tthis.hasMore = new ReactiveVar(true);\n\tthis.limit = new ReactiveVar(LIMIT_DEFAULT);\n\n\tthis.autorun(() => {\n\t\tconst query = {\n\t\t\t'_hidden': { $ne: true },\n\t\t\t'starred._id': Meteor.userId(),\n\t\t\t'rid': this.rid,\n\t\t\t'_updatedAt': {\n\t\t\t\t$gt: new Date(),\n\t\t\t},\n\t\t};\n\n\t\tthis.cursor && this.cursor.stop();\n\n\t\tthis.limit.set(LIMIT_DEFAULT);\n\n\t\tthis.cursor = Messages.find(query).observe({\n\t\t\tadded: ({ _id, ...message }) => {\n\t\t\t\tthis.messages.upsert({ _id }, message);\n\t\t\t},\n\t\t\tchanged: ({ _id, ...message }) => {\n\t\t\t\tthis.messages.upsert({ _id }, message);\n\t\t\t},\n\t\t\tremoved: ({ _id }) => {\n\t\t\t\tthis.messages.remove({ _id });\n\t\t\t},\n\t\t});\n\t});\n\n\tthis.autorun(async () => {\n\t\tconst limit = this.limit.get();\n\t\tconst { messages, total } = await APIClient.v1.get(`chat.getStarredMessages?roomId=${this.rid}&count=${limit}`);\n\n\t\tupsertMessageBulk({ msgs: messages }, this.messages);\n\n\t\tthis.hasMore.set(total > limit);\n\t});\n});\n\nTemplate.mentionsFlexTab.onDestroyed(function () {\n\tthis.cursor.stop();\n});\n\nTemplate.starredMessages.events({\n\t...getCommonRoomEvents(),\n\t'scroll .js-list': _.throttle(function (e, instance) {\n\t\tif (e.target.scrollTop >= e.target.scrollHeight - e.target.clientHeight) {\n\t\t\treturn instance.limit.set(instance.limit.get() + 50);\n\t\t}\n\t}, 200),\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { settings } from '../../settings';\nimport { RoomHistoryManager, MessageAction } from '../../ui-utils';\nimport { messageArgs } from '../../ui-utils/client/lib/messageArgs';\nimport { Rooms } from '../../models/client';\nimport { roomTypes } from '../../utils/client';\nimport { handleError } from '../../../client/lib/utils/handleError';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\n\nMeteor.startup(function () {\n\tMessageAction.addButton({\n\t\tid: 'star-message',\n\t\ticon: 'star',\n\t\tlabel: 'Star',\n\t\tcontext: ['starred', 'message', 'message-mobile', 'threads'],\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tmessage.starred = Meteor.userId();\n\t\t\tMeteor.call('starMessage', message, function (error) {\n\t\t\t\tif (error) {\n\t\t\t\t\treturn handleError(error);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tcondition({ msg: message, subscription, u, room }) {\n\t\t\tif (subscription == null && settings.get('Message_AllowStarring')) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst isLivechatRoom = roomTypes.isLivechatRoom(room.t);\n\t\t\tif (isLivechatRoom) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn !message.starred || !message.starred.find((star) => star._id === u._id);\n\t\t},\n\t\torder: 9,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'unstar-message',\n\t\ticon: 'star',\n\t\tlabel: 'Unstar_Message',\n\t\tcontext: ['starred', 'message', 'message-mobile', 'threads'],\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tmessage.starred = false;\n\t\t\tMeteor.call('starMessage', message, function (error) {\n\t\t\t\tif (error) {\n\t\t\t\t\thandleError(error);\n\t\t\t\t}\n\t\t\t});\n\t\t},\n\t\tcondition({ msg: message, subscription, u }) {\n\t\t\tif (subscription == null && settings.get('Message_AllowStarring')) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn message.starred && message.starred.find((star) => star._id === u._id);\n\t\t},\n\t\torder: 9,\n\t\tgroup: 'menu',\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'jump-to-star-message',\n\t\ticon: 'jump',\n\t\tlabel: 'Jump_to_message',\n\t\tcontext: ['starred', 'threads', 'message-mobile'],\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tif (window.matchMedia('(max-width: 500px)').matches) {\n\t\t\t\tTemplate.instance().tabBar.close();\n\t\t\t}\n\t\t\tif (message.tmid) {\n\t\t\t\treturn FlowRouter.go(\n\t\t\t\t\tFlowRouter.getRouteName(),\n\t\t\t\t\t{\n\t\t\t\t\t\ttab: 'thread',\n\t\t\t\t\t\tcontext: message.tmid,\n\t\t\t\t\t\trid: message.rid,\n\t\t\t\t\t\tjump: message._id,\n\t\t\t\t\t\tname: Rooms.findOne({ _id: message.rid }).name,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tjump: message._id,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\t\t\tRoomHistoryManager.getSurroundingMessages(message, 50);\n\t\t},\n\t\tcondition({ msg, subscription, u }) {\n\t\t\tif (subscription == null || !settings.get('Message_AllowStarring')) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn msg.starred && msg.starred.find((star) => star._id === u._id);\n\t\t},\n\t\torder: 100,\n\t\tgroup: ['message', 'menu'],\n\t});\n\n\tMessageAction.addButton({\n\t\tid: 'permalink-star',\n\t\ticon: 'permalink',\n\t\tlabel: 'Get_link',\n\t\tclasses: 'clipboard',\n\t\tcontext: ['starred', 'threads'],\n\t\tasync action() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tconst permalink = await MessageAction.getPermaLink(message._id);\n\t\t\tnavigator.clipboard.writeText(permalink);\n\t\t\tdispatchToastMessage({ type: 'success', message: TAPi18n.__('Copied') });\n\t\t},\n\t\tcondition({ msg, subscription, u }) {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn msg.starred && msg.starred.find((star) => star._id === u._id);\n\t\t},\n\t\torder: 101,\n\t\tgroup: 'menu',\n\t});\n});\n","import './actionButton';\nimport './starMessage';\nimport './tabBar';\nimport './views/starredMessages.html';\nimport './views/starredMessages';\nimport './views/stylesheets/messagestar.css';\n","import { Meteor } from 'meteor/meteor';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { settings } from '../../settings';\nimport { ChatMessage, Subscriptions } from '../../models';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\n\nMeteor.methods({\n\tstarMessage(message) {\n\t\tif (!Meteor.userId()) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('error-starring-message') });\n\t\t\treturn false;\n\t\t}\n\t\tif (Subscriptions.findOne({ rid: message.rid }) == null) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('error-starring-message') });\n\t\t\treturn false;\n\t\t}\n\t\tif (!ChatMessage.findOneByRoomIdAndMessageId(message.rid, message._id)) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('error-starring-message') });\n\t\t\treturn false;\n\t\t}\n\t\tif (!settings.get('Message_AllowStarring')) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('error-starring-message') });\n\t\t\treturn false;\n\t\t}\n\t\tif (message.starred) {\n\t\t\tdispatchToastMessage({ type: 'success', message: TAPi18n.__('Message_has_been_starred') });\n\t\t} else {\n\t\t\tdispatchToastMessage({ type: 'success', message: TAPi18n.__('Message_has_been_unstarred') });\n\t\t}\n\t\treturn ChatMessage.update(\n\t\t\t{\n\t\t\t\t_id: message._id,\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\tstarred: !!message.starred,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t},\n});\n","import { addAction } from '../../../client/views/room/lib/Toolbox';\n\naddAction('starred-messages', {\n\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\tid: 'starred-messages',\n\ttitle: 'Starred_Messages',\n\ticon: 'star',\n\ttemplate: 'starredMessages',\n\torder: 10,\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { Accounts } from 'meteor/accounts-base';\nimport { ReactiveVar } from 'meteor/reactive-var';\n\nimport { APIClient } from '../../../utils/client';\n\nTemplate.authorize.onCreated(async function () {\n\tthis.oauthApp = new ReactiveVar({});\n\tconst { oauthApp } = await APIClient.v1.get(`oauth-apps.get?clientId=${this.data.client_id()}`);\n\tthis.oauthApp.set(oauthApp);\n});\n\nTemplate.authorize.helpers({\n\tgetToken() {\n\t\treturn Meteor._localStorage.getItem(Accounts.LOGIN_TOKEN_KEY);\n\t},\n\tgetClient() {\n\t\treturn Template.instance().oauthApp.get();\n\t},\n});\n\nTemplate.authorize.events({\n\t'click #logout-oauth'() {\n\t\treturn Meteor.logout();\n\t},\n\t'click #cancel-oauth'() {\n\t\treturn window.close();\n\t},\n});\n\nTemplate.authorize.onRendered(function () {\n\tconst user = Meteor.user();\n\tif (user && user.oauth && user.oauth.authorizedClients && user.oauth.authorizedClients.includes(this.data.client_id())) {\n\t\t$('button[type=submit]').click();\n\t}\n});\n","import { hasAllPermission } from '../../../authorization';\nimport { registerAdminSidebarItem } from '../../../../client/views/admin';\n\nregisterAdminSidebarItem({\n\thref: 'admin-oauth-apps',\n\ti18nLabel: 'OAuth Apps',\n\ticon: 'discover',\n\tpermissionGranted() {\n\t\treturn hasAllPermission('manage-oauth-apps');\n\t},\n});\n","import './oauth/oauth2-client.html';\nimport './oauth/oauth2-client';\nimport './admin/startup';\nimport './oauth/stylesheets/oauth2.css';\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\nimport _ from 'underscore';\n\nimport { messageContext } from '../../../ui-utils/client/lib/messageContext';\nimport { MessageAction, RoomHistoryManager } from '../../../ui-utils';\nimport { messageArgs } from '../../../ui-utils/client/lib/messageArgs';\nimport { Rooms } from '../../../models/client';\nimport { getCommonRoomEvents } from '../../../ui/client/views/app/lib/getCommonRoomEvents';\nimport { goToRoomById } from '../../../../client/lib/utils/goToRoomById';\n\nMeteor.startup(function () {\n\tMessageAction.addButton({\n\t\tid: 'jump-to-search-message',\n\t\ticon: 'jump',\n\t\tlabel: 'Jump_to_message',\n\t\tcontext: ['search'],\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tif (message.tmid) {\n\t\t\t\treturn FlowRouter.go(\n\t\t\t\t\tFlowRouter.getRouteName(),\n\t\t\t\t\t{\n\t\t\t\t\t\ttab: 'thread',\n\t\t\t\t\t\tcontext: message.tmid,\n\t\t\t\t\t\trid: message.rid,\n\t\t\t\t\t\tname: Rooms.findOne({ _id: message.rid }).name,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tjump: message._id,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tif (Session.get('openedRoom') === message.rid) {\n\t\t\t\treturn RoomHistoryManager.getSurroundingMessages(message, 50);\n\t\t\t}\n\n\t\t\tgoToRoomById(message.rid);\n\t\t\t// RocketChat.MessageAction.hideDropDown();\n\n\t\t\tif (window.matchMedia('(max-width: 500px)').matches) {\n\t\t\t\tTemplate.instance().tabBar.close();\n\t\t\t}\n\n\t\t\twindow.setTimeout(() => {\n\t\t\t\tRoomHistoryManager.getSurroundingMessages(message, 50);\n\t\t\t}, 400);\n\t\t\t// 400ms is popular among game devs as a good delay before transition starts\n\t\t\t// ie. 50, 100, 200, 400, 800 are the favored timings\n\t\t},\n\t\torder: 100,\n\t\tgroup: 'menu',\n\t});\n});\n\nTemplate.DefaultSearchResultTemplate.onRendered(function () {\n\tconst list = this.firstNode.parentNode.querySelector('.rocket-default-search-results');\n\tthis.autorun(() => {\n\t\tconst result = this.data.result.get();\n\t\tif (result && this.hasMore.get()) {\n\t\t\tTracker.afterFlush(() => {\n\t\t\t\tif (list.scrollHeight < list.offsetHeight) {\n\t\t\t\t\tthis.data.payload.limit = (this.data.payload.limit || this.pageSize) + this.pageSize;\n\t\t\t\t\tthis.data.search();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n});\n\nTemplate.DefaultSearchResultTemplate.onCreated(function () {\n\t// paging\n\tthis.pageSize = this.data.settings.PageSize;\n\n\t// global search\n\tthis.globalSearchEnabled = this.data.settings.GlobalSearchEnabled;\n\tthis.data.parentPayload.searchAll = this.globalSearchEnabled;\n\n\tthis.hasMore = new ReactiveVar(true);\n\n\tthis.autorun(() => {\n\t\tconst result = this.data.result.get();\n\t\tthis.hasMore.set(!(result && result.message.docs.length < (this.data.payload.limit || this.pageSize)));\n\t});\n});\n\nTemplate.DefaultSearchResultTemplate.events({\n\t...getCommonRoomEvents(),\n\t'change #global-search'(e, t) {\n\t\tt.data.parentPayload.searchAll = e.target.checked;\n\t\tt.data.payload.limit = t.pageSize;\n\t\tt.data.result.set(undefined);\n\t\tt.data.search();\n\t},\n\t'scroll .rocket-default-search-results': _.throttle(function (e, t) {\n\t\tif (e.target.scrollTop >= e.target.scrollHeight - e.target.clientHeight && t.hasMore.get()) {\n\t\t\tt.data.payload.limit = (t.data.payload.limit || t.pageSize) + t.pageSize;\n\t\t\tt.data.search();\n\t\t}\n\t}, 200),\n});\n\nTemplate.DefaultSearchResultTemplate.helpers({\n\tresult() {\n\t\treturn Template.instance().data.result.get();\n\t},\n\tglobalSearchEnabled() {\n\t\treturn Template.instance().globalSearchEnabled;\n\t},\n\tsearching() {\n\t\treturn Template.instance().data.searching.get();\n\t},\n\thasMore() {\n\t\treturn Template.instance().hasMore.get();\n\t},\n\tmessageParse(msg) {\n\t\tconst text = Template.instance().data.text.get();\n\t\tmsg.searchedText = text;\n\t\treturn { customClass: 'search', actionContext: 'search', ...msg, groupable: false };\n\t},\n\tmessageContext() {\n\t\tconst result = messageContext.call(this, { rid: Session.get('openedRoom') });\n\t\treturn {\n\t\t\t...result,\n\t\t\tsettings: {\n\t\t\t\t...result.settings,\n\t\t\t\tshowReplyButton: false,\n\t\t\t\tshowreply: false,\n\t\t\t},\n\t\t};\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport _ from 'underscore';\n\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\n\nTemplate.RocketSearch.onCreated(function () {\n\tthis.provider = new ReactiveVar();\n\tthis.isActive = new ReactiveVar(false);\n\tthis.error = new ReactiveVar();\n\tthis.suggestions = new ReactiveVar();\n\tthis.suggestionActive = new ReactiveVar();\n\n\tMeteor.call('rocketchatSearch.getProvider', (error, provider) => {\n\t\tif (!error && provider) {\n\t\t\tthis.scope.settings = provider.settings;\n\t\t\tthis.provider.set(provider);\n\t\t\tthis.isActive.set(true);\n\t\t} else {\n\t\t\tthis.error.set('Search_current_provider_not_active');\n\t\t}\n\t});\n\n\tconst _search = () => {\n\t\tconst _p = Object.assign({}, this.scope.parentPayload, this.scope.payload);\n\n\t\tif (this.scope.text.get()) {\n\t\t\tthis.scope.searching.set(true);\n\n\t\t\tMeteor.call(\n\t\t\t\t'rocketchatSearch.search',\n\t\t\t\tthis.scope.text.get(),\n\t\t\t\t{ rid: Session.get('openedRoom'), uid: Meteor.userId() },\n\t\t\t\t_p,\n\t\t\t\t(err, result) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\tdispatchToastMessage({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\tmessage: TAPi18n.__('Search_message_search_failed'),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.scope.searching.set(false);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.scope.searching.set(false);\n\t\t\t\t\t\tthis.scope.result.set(result);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t};\n\n\tthis.scope = {\n\t\tsearching: new ReactiveVar(false),\n\t\tresult: new ReactiveVar(),\n\t\ttext: new ReactiveVar(),\n\t\tsettings: {},\n\t\tparentPayload: {},\n\t\tpayload: {},\n\t\tsearch: _search,\n\t};\n\n\tthis.search = (value) => {\n\t\tthis.scope.result.set(undefined);\n\t\tthis.scope.payload = {};\n\t\tthis.scope.text.set(value);\n\t\t_search();\n\t};\n\n\tthis.suggest = (value) => {\n\t\tthis.suggestions.set();\n\n\t\tconst _p = Object.assign({}, this.scope.parentPayload, this.scope.payload);\n\n\t\tMeteor.call(\n\t\t\t'rocketchatSearch.suggest',\n\t\t\tvalue,\n\t\t\t{ rid: Session.get('openedRoom'), uid: Meteor.userId() },\n\t\t\tthis.scope.parentPayload,\n\t\t\t_p,\n\t\t\t(err, result) => {\n\t\t\t\tif (err) {\n\t\t\t\t\t// TODO what should happen\n\t\t\t\t} else {\n\t\t\t\t\tthis.suggestionActive.set(undefined);\n\t\t\t\t\tif (value !== this.scope.text.get()) {\n\t\t\t\t\t\tthis.suggestions.set(result);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t);\n\t};\n});\n\nTemplate.RocketSearch.events = {\n\t'keydown #message-search'(evt, t) {\n\t\tif (evt.keyCode === 13) {\n\t\t\tif (t.suggestionActive.get() !== undefined) {\n\t\t\t\tconst suggestion = t.suggestions.get()[t.suggestionActive.get()];\n\t\t\t\tif (suggestion.action) {\n\t\t\t\t\tconst value = suggestion.action();\n\t\t\t\t\tif (value) {\n\t\t\t\t\t\tt.search(value);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tt.search(suggestion.text);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tt.search(evt.target.value.trim());\n\t\t\t}\n\t\t\tt.suggestions.set();\n\t\t\treturn evt.preventDefault();\n\t\t}\n\n\t\tconst suggestions = t.suggestions.get();\n\t\tconst suggestionActive = t.suggestionActive.get();\n\n\t\tif (evt.keyCode === 40 && suggestions) {\n\t\t\tt.suggestionActive.set(suggestionActive !== undefined && suggestionActive < suggestions.length - 1 ? suggestionActive + 1 : 0);\n\t\t\treturn;\n\t\t}\n\n\t\tif (evt.keyCode === 38 && suggestions) {\n\t\t\tt.suggestionActive.set(suggestionActive !== undefined && suggestionActive === 0 ? suggestions.length - 1 : suggestionActive - 1);\n\t\t}\n\t},\n\t'keyup #message-search': _.debounce(function (evt, t) {\n\t\tif (evt.keyCode === 13) {\n\t\t\treturn evt.preventDefault();\n\t\t}\n\n\t\tconst { value } = evt.target;\n\n\t\tif (evt.keyCode === 40 || evt.keyCode === 38) {\n\t\t\treturn evt.preventDefault();\n\t\t}\n\n\t\tif (!t.provider.get().supportsSuggestions) {\n\t\t\tt.search(value);\n\t\t} else {\n\t\t\tt.suggest(value);\n\t\t}\n\t}, 300),\n\t'click .rocket-search-suggestion-item'(e, t) {\n\t\tif (this.action) {\n\t\t\tconst value = this.action();\n\t\t\tif (value) {\n\t\t\t\tt.search(value);\n\t\t\t} else {\n\t\t\t\tt.suggestions.set();\n\t\t\t}\n\t\t} else {\n\t\t\tt.search(this.text);\n\t\t}\n\t},\n\t'mouseenter .rocket-search-suggestion-item'(e, t) {\n\t\tt.suggestionActive.set(t.suggestions.get().indexOf(this));\n\t},\n};\n\nTemplate.RocketSearch.helpers({\n\terror() {\n\t\treturn Template.instance().error.get();\n\t},\n\tprovider() {\n\t\treturn Template.instance().provider.get();\n\t},\n\tscope() {\n\t\treturn Template.instance().scope;\n\t},\n\ttext() {\n\t\treturn Template.instance().scope.text.get();\n\t},\n\tisActive() {\n\t\treturn Template.instance().isActive.get();\n\t},\n\tsuggestions() {\n\t\treturn Template.instance().suggestions.get();\n\t},\n\tsuggestionActive() {\n\t\treturn Template.instance().suggestionActive.get();\n\t},\n\tsuggestionSelected(index) {\n\t\treturn Template.instance().suggestionActive.get() === index ? 'active' : '';\n\t},\n});\n\n// add closer to suggestions\nTemplate.RocketSearch.onRendered(function () {\n\t$(document).on(`click.suggestionclose.${this.data.rid}`, () => {\n\t\t// if (e.target.id !== 'rocket-search-suggestions' && !$(e.target).parents('#rocket-search-suggestions').length) {\n\t\tthis.suggestions.set();\n\t\t// }\n\t});\n\tTracker.autorun((c) => {\n\t\tif (this.isActive.get() === true) {\n\t\t\tTracker.afterFlush(() => {\n\t\t\t\tdocument.querySelector('#message-search').focus();\n\t\t\t});\n\t\t\tc.stop();\n\t\t}\n\t});\n});\n\nTemplate.RocketSearch.onDestroyed(function () {\n\t$(document).off(`click.suggestionclose.${this.data.rid}`);\n});\n","import './search/search.html';\nimport './search/search';\nimport './provider/suggestion.html';\nimport './provider/result.html';\nimport './provider/result';\nimport './style/style.css';\n","import { Template } from 'meteor/templating';\n\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\nimport './messageBoxFollow.html';\n\nTemplate.messageBoxFollow.events({\n\t'click .js-follow'() {\n\t\tconst { tmid } = this;\n\t\tcallWithErrorHandling('followMessage', { mid: tmid });\n\t},\n});\n","import _ from 'underscore';\nimport { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport { Template } from 'meteor/templating';\nimport { Session } from 'meteor/session';\nimport { ReactiveDict } from 'meteor/reactive-dict';\nimport { Tracker } from 'meteor/tracker';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { chatMessages, ChatMessages } from '../../../ui';\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\nimport { messageContext } from '../../../ui-utils/client/lib/messageContext';\nimport { upsertMessageBulk } from '../../../ui-utils/client/lib/RoomHistoryManager';\nimport { Messages } from '../../../models';\nimport { fileUpload } from '../../../ui/client/lib/fileUpload';\nimport { dropzoneEvents, dropzoneHelpers } from '../../../ui/client/views/app/room';\nimport './thread.html';\nimport { getUserPreference } from '../../../utils';\nimport { settings } from '../../../settings/client';\nimport { callbacks } from '../../../../lib/callbacks';\nimport './messageBoxFollow';\nimport { getCommonRoomEvents } from '../../../ui/client/views/app/lib/getCommonRoomEvents';\nimport { keyCodes } from '../../../../client/lib/utils/keyCodes';\n\nconst sort = { ts: 1 };\n\nTemplate.thread.events({\n\t...dropzoneEvents,\n\t...getCommonRoomEvents(),\n\t'click .js-close'(e) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\t\tconst { close } = this;\n\t\treturn close && close();\n\t},\n\t'scroll .js-scroll-thread': _.throttle(({ currentTarget: e }, i) => {\n\t\ti.atBottom = e.scrollTop >= e.scrollHeight - e.clientHeight;\n\t}, 150),\n\t'click .toggle-hidden'(e) {\n\t\tconst id = e.currentTarget.dataset.message;\n\t\tdocument.querySelector(`#thread-${id}`).classList.toggle('message--ignored');\n\t},\n});\n\nTemplate.thread.helpers({\n\t...dropzoneHelpers,\n\tmainMessage() {\n\t\tconst { Threads, state } = Template.instance();\n\t\tconst tmid = state.get('tmid');\n\t\treturn Threads.findOne({ _id: tmid });\n\t},\n\tisLoading() {\n\t\treturn Template.instance().state.get('loading') !== false;\n\t},\n\tmessages() {\n\t\tconst { Threads, state } = Template.instance();\n\t\tconst tmid = state.get('tmid');\n\n\t\treturn Threads.find({ tmid, _id: { $ne: tmid } }, { sort });\n\t},\n\tmessageContext() {\n\t\tconst result = messageContext.call(this, { rid: this.mainMessage.rid });\n\t\treturn {\n\t\t\t...result,\n\t\t\tsettings: {\n\t\t\t\t...result.settings,\n\t\t\t\tshowReplyButton: false,\n\t\t\t\tshowreply: false,\n\t\t\t},\n\t\t};\n\t},\n\tmessageBoxData() {\n\t\tconst instance = Template.instance();\n\t\tconst {\n\t\t\tmainMessage: { rid, _id: tmid },\n\t\t\tsubscription,\n\t\t} = Template.currentData();\n\n\t\tconst showFormattingTips = settings.get('Message_ShowFormattingTips');\n\t\treturn {\n\t\t\tshowFormattingTips,\n\t\t\ttshow: instance.state.get('sendToChannel'),\n\t\t\tsubscription,\n\t\t\trid,\n\t\t\ttmid,\n\t\t\tonSend: (...args) => {\n\t\t\t\tinstance.sendToBottom();\n\t\t\t\tinstance.state.set('sendToChannel', false);\n\t\t\t\treturn instance.chatMessages && instance.chatMessages.send.apply(instance.chatMessages, args);\n\t\t\t},\n\t\t\tonKeyUp: (...args) => instance.chatMessages && instance.chatMessages.keyup.apply(instance.chatMessages, args),\n\t\t\tonKeyDown: (...args) => {\n\t\t\t\tconst result = instance.chatMessages && instance.chatMessages.keydown.apply(instance.chatMessages, args);\n\t\t\t\tconst [event] = args;\n\n\t\t\t\tconst { which: keyCode } = event;\n\n\t\t\t\tif (keyCode === keyCodes.ESCAPE && !result && !event.target.value.trim()) {\n\t\t\t\t\tconst {\n\t\t\t\t\t\troute: { name },\n\t\t\t\t\t\tparams: { context, tab, ...params },\n\t\t\t\t\t} = FlowRouter.current();\n\t\t\t\t\tFlowRouter.go(name, params);\n\t\t\t\t}\n\t\t\t},\n\t\t};\n\t},\n\thideUsername() {\n\t\treturn getUserPreference(Meteor.userId(), 'hideUsernames') ? 'hide-usernames' : undefined;\n\t},\n\tcheckboxData() {\n\t\tconst instance = Template.instance();\n\t\tconst checked = instance.state.get('sendToChannel');\n\t\treturn {\n\t\t\tid: 'sendAlso',\n\t\t\tchecked,\n\t\t\tonChange: () => instance.state.set('sendToChannel', !checked),\n\t\t};\n\t},\n});\n\nTemplate.thread.onRendered(function () {\n\tconst rid = Tracker.nonreactive(() => this.state.get('rid'));\n\tconst tmid = Tracker.nonreactive(() => this.state.get('tmid'));\n\tthis.atBottom = true;\n\n\tthis.chatMessages = new ChatMessages(this.Threads);\n\tthis.chatMessages.initializeWrapper(this.find('.js-scroll-thread'));\n\tthis.chatMessages.initializeInput(this.find('.js-input-message'), { rid, tmid });\n\n\tthis.sendToBottom = _.throttle(() => {\n\t\tthis.atBottom = true;\n\t\tthis.chatMessages.wrapper.scrollTop = this.chatMessages.wrapper.scrollHeight;\n\t}, 300);\n\n\tthis.sendToBottomIfNecessary = () => {\n\t\tthis.atBottom && this.sendToBottom();\n\t};\n\n\tconst observer = new ResizeObserver(this.sendToBottomIfNecessary);\n\tobserver.observe(this.firstNode.querySelector('.js-scroll-thread ul'));\n\n\tthis.onFile = (filesToUpload) => {\n\t\tfileUpload(filesToUpload, this.chatMessages.input, {\n\t\t\trid: this.state.get('rid'),\n\t\t\ttmid: this.state.get('tmid'),\n\t\t});\n\t};\n\n\tthis.autorun(() => {\n\t\tconst rid = this.state.get('rid');\n\t\tconst tmid = this.state.get('tmid');\n\t\tif (!rid) {\n\t\t\treturn;\n\t\t}\n\t\tthis.callbackRemove && this.callbackRemove();\n\n\t\tthis.callbackRemove = () => callbacks.remove('streamNewMessage', `thread-${rid}`);\n\n\t\tcallbacks.add(\n\t\t\t'streamNewMessage',\n\t\t\t_.debounce((msg) => {\n\t\t\t\tif (Session.get('openedRoom') !== msg.rid || rid !== msg.rid || msg.editedAt || msg.tmid !== tmid) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tMeteor.call('readThreads', tmid);\n\t\t\t}, 1000),\n\t\t\tcallbacks.priority.MEDIUM,\n\t\t\t`thread-${rid}`,\n\t\t);\n\t});\n\n\tthis.autorun(() => {\n\t\tconst tmid = this.state.get('tmid');\n\t\tthis.threadsObserve && this.threadsObserve.stop();\n\n\t\tthis.threadsObserve = Messages.find(\n\t\t\t{ $or: [{ tmid }, { _id: tmid }], _hidden: { $ne: true } },\n\t\t\t{\n\t\t\t\tfields: {\n\t\t\t\t\tcollapsed: 0,\n\t\t\t\t\tthreadMsg: 0,\n\t\t\t\t\trepliesCount: 0,\n\t\t\t\t},\n\t\t\t},\n\t\t).observe({\n\t\t\tadded: ({ _id, ...message }) => {\n\t\t\t\tthis.Threads.upsert({ _id }, message);\n\t\t\t},\n\t\t\tchanged: ({ _id, ...message }) => {\n\t\t\t\tthis.Threads.update({ _id }, message);\n\t\t\t},\n\t\t\tremoved: ({ _id }) => this.Threads.remove(_id),\n\t\t});\n\n\t\tthis.loadMore();\n\t});\n\n\tthis.autorun(() => {\n\t\tconst rid = this.state.get('rid');\n\t\tconst tmid = this.state.get('tmid');\n\t\tthis.chatMessages.initializeInput(this.find('.js-input-message'), { rid, tmid });\n\t\tif (rid && tmid) {\n\t\t\tchatMessages[`${rid}-${tmid}`] = this.chatMessages;\n\t\t}\n\t});\n\n\tthis.autorun(() => {\n\t\tFlowRouter.watchPathChange();\n\t\tconst jump = FlowRouter.getQueryParam('jump');\n\t\tconst { mainMessage } = Template.currentData();\n\t\tthis.state.set({\n\t\t\ttmid: mainMessage._id,\n\t\t\trid: mainMessage.rid,\n\t\t\tjump,\n\t\t});\n\t});\n\n\tthis.autorun(() => {\n\t\tconst jump = this.state.get('jump');\n\t\tconst loading = this.state.get('loading');\n\n\t\tif (jump && this.lastJump !== jump && loading === false) {\n\t\t\tthis.lastJump = jump;\n\t\t\tthis.find('.js-scroll-thread').style.scrollBehavior = 'smooth';\n\t\t\tthis.state.set('jump', null);\n\t\t\tTracker.afterFlush(() => {\n\t\t\t\tconst message = this.find(`#thread-${jump}`);\n\t\t\t\tmessage.classList.add('highlight');\n\t\t\t\tconst removeClass = () => {\n\t\t\t\t\tmessage.classList.remove('highlight');\n\t\t\t\t\tmessage.removeEventListener('animationend', removeClass);\n\t\t\t\t};\n\t\t\t\tmessage.addEventListener('animationend', removeClass);\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tmessage.scrollIntoView();\n\t\t\t\t}, 300);\n\t\t\t});\n\t\t}\n\t});\n});\n\nTemplate.thread.onCreated(async function () {\n\tthis.Threads = new Mongo.Collection(null);\n\n\tthis.state = new ReactiveDict({\n\t\tsendToChannel: !this.data.mainMessage.tcount,\n\t});\n\n\tthis.loadMore = async () => {\n\t\tconst { tmid } = Tracker.nonreactive(() => this.state.all());\n\t\tif (!tmid) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.state.set('loading', true);\n\n\t\tconst messages = await callWithErrorHandling('getThreadMessages', { tmid });\n\n\t\tupsertMessageBulk({ msgs: messages }, this.Threads);\n\n\t\tTracker.afterFlush(() => {\n\t\t\tthis.state.set('loading', false);\n\t\t});\n\t};\n});\n\nTemplate.thread.onDestroyed(function () {\n\tconst { Threads, threadsObserve, callbackRemove, state, chatMessages } = this;\n\tThreads.remove({});\n\tthreadsObserve && threadsObserve.stop();\n\n\tcallbackRemove && callbackRemove();\n\n\tconst tmid = state.get('tmid');\n\tconst rid = state.get('rid');\n\tif (rid && tmid) {\n\t\tchatMessages.onDestroyed && chatMessages.onDestroyed(rid, tmid);\n\t\tdelete chatMessages[`${rid}-${tmid}`];\n\t}\n});\n","import React, { useMemo, lazy, LazyExoticComponent, FC, ReactNode } from 'react';\nimport { BadgeProps } from '@rocket.chat/fuselage';\n\nimport { addAction } from '../../../../client/views/room/lib/Toolbox';\nimport { useSetting } from '../../../../client/contexts/SettingsContext';\nimport Header from '../../../../client/components/Header';\nimport { ISubscription } from '../../../../definition/ISubscription';\n\nconst getVariant = (tunreadUser: number, tunreadGroup: number): BadgeProps['variant'] => {\n\tif (tunreadUser > 0) {\n\t\treturn 'danger';\n\t}\n\tif (tunreadGroup > 0) {\n\t\treturn 'warning';\n\t}\n\treturn 'primary';\n};\n\nconst template = lazy(() => import('../../../../client/views/room/contextualBar/Threads')) as LazyExoticComponent<FC>;\n\naddAction('thread', (options) => {\n\tconst room = options.room as unknown as ISubscription;\n\tconst threadsEnabled = useSetting('Threads_enabled');\n\treturn useMemo(\n\t\t() =>\n\t\t\tthreadsEnabled\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\t\t\t\tid: 'thread',\n\t\t\t\t\t\tfull: true,\n\t\t\t\t\t\ttitle: 'Threads',\n\t\t\t\t\t\ticon: 'thread',\n\t\t\t\t\t\ttemplate,\n\t\t\t\t\t\trenderAction: (props): ReactNode => {\n\t\t\t\t\t\t\tconst tunread = room.tunread?.length || 0;\n\t\t\t\t\t\t\tconst tunreadUser = room.tunreadUser?.length || 0;\n\t\t\t\t\t\t\tconst tunreadGroup = room.tunreadGroup?.length || 0;\n\t\t\t\t\t\t\tconst unread = tunread > 99 ? '99+' : tunread;\n\t\t\t\t\t\t\tconst variant = getVariant(tunreadUser, tunreadGroup);\n\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t<Header.ToolBoxAction {...props}>\n\t\t\t\t\t\t\t\t\t{unread > 0 && <Header.Badge variant={variant}>{unread}</Header.Badge>}\n\t\t\t\t\t\t\t\t</Header.ToolBoxAction>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t},\n\t\t\t\t\t\torder: 2,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[threadsEnabled, room.tunread?.length, room.tunreadUser?.length, room.tunreadGroup?.length],\n\t);\n});\n","import '../threads.css';\n","import { Meteor } from 'meteor/meteor';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\n\nimport { filterMarkdown } from '../../../markdown/lib/markdown';\nimport { Users } from '../../../models/client';\nimport { settings } from '../../../settings/client';\nimport { MentionsParser } from '../../../mentions/lib/MentionsParser';\nimport { emojiParser } from '../../../emoji/client/emojiParser.js';\n\nexport const normalizeThreadTitle = ({ ...message }) => {\n\tif (message.msg) {\n\t\tconst filteredMessage = filterMarkdown(escapeHTML(message.msg));\n\t\tif (!message.channels && !message.mentions) {\n\t\t\treturn filteredMessage;\n\t\t}\n\t\tconst uid = Meteor.userId();\n\t\tconst me = uid && (Users.findOne(uid, { fields: { username: 1 } }) || {}).username;\n\t\tconst pattern = settings.get('UTF8_User_Names_Validation');\n\t\tconst useRealName = settings.get('UI_Use_Real_Name');\n\n\t\tconst instance = new MentionsParser({\n\t\t\tpattern: () => pattern,\n\t\t\tuseRealName: () => useRealName,\n\t\t\tme: () => me,\n\t\t\tuserTemplate: ({ label }) => `<strong> ${label} </strong>`,\n\t\t\troomTemplate: ({ prefix, mention }) => `${prefix}<strong> ${mention} </strong>`,\n\t\t});\n\t\tconst { html } = emojiParser({ html: filteredMessage });\n\t\treturn instance.parse({ ...message, msg: filteredMessage, html }).html;\n\t}\n\n\tif (message.attachments) {\n\t\tconst attachment = message.attachments.find((attachment) => attachment.title || attachment.description);\n\n\t\tif (attachment && attachment.description) {\n\t\t\treturn escapeHTML(attachment.description);\n\t\t}\n\n\t\tif (attachment && attachment.title) {\n\t\t\treturn escapeHTML(attachment.title);\n\t\t}\n\t}\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { Messages } from '../../../models/client';\nimport { settings } from '../../../settings/client';\nimport { MessageAction } from '../../../ui-utils/client';\nimport { messageArgs } from '../../../ui-utils/client/lib/messageArgs';\nimport { roomTypes } from '../../../utils/client';\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\n\nMeteor.startup(function () {\n\tTracker.autorun(() => {\n\t\tif (!settings.get('Threads_enabled')) {\n\t\t\treturn MessageAction.removeButton('follow-message');\n\t\t}\n\t\tMessageAction.addButton({\n\t\t\tid: 'follow-message',\n\t\t\ticon: 'bell',\n\t\t\tlabel: 'Follow_message',\n\t\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\t\tasync action() {\n\t\t\t\tconst { msg } = messageArgs(this);\n\t\t\t\tcallWithErrorHandling('followMessage', { mid: msg._id }).then(() =>\n\t\t\t\t\tdispatchToastMessage({\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\tmessage: TAPi18n.__('You_followed_this_message'),\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t},\n\t\t\tcondition({ msg: { _id, tmid, replies = [] }, u, room }, context) {\n\t\t\t\tif (tmid || context) {\n\t\t\t\t\tconst parentMessage = Messages.findOne({ _id: tmid || _id }, { fields: { replies: 1 } });\n\t\t\t\t\tif (parentMessage) {\n\t\t\t\t\t\treplies = parentMessage.replies || [];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tconst isLivechatRoom = roomTypes.isLivechatRoom(room.t);\n\t\t\t\tif (isLivechatRoom) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn !replies.includes(u._id);\n\t\t\t},\n\t\t\torder: 2,\n\t\t\tgroup: 'menu',\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { settings } from '../../../settings/client';\nimport { MessageAction } from '../../../ui-utils/client';\nimport { messageArgs } from '../../../ui-utils/client/lib/messageArgs';\nimport { roomTypes } from '../../../utils/client';\n\nMeteor.startup(function () {\n\tTracker.autorun(() => {\n\t\tif (!settings.get('Threads_enabled')) {\n\t\t\treturn MessageAction.removeButton('reply-in-thread');\n\t\t}\n\t\tMessageAction.addButton({\n\t\t\tid: 'reply-in-thread',\n\t\t\ticon: 'thread',\n\t\t\tlabel: 'Reply_in_thread',\n\t\t\tcontext: ['message', 'message-mobile'],\n\t\t\taction(e) {\n\t\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\t\te.stopPropagation();\n\t\t\t\tFlowRouter.setParams({\n\t\t\t\t\ttab: 'thread',\n\t\t\t\t\tcontext: message.tmid || message._id,\n\t\t\t\t});\n\t\t\t},\n\t\t\tcondition({ subscription, room }) {\n\t\t\t\tconst isLivechatRoom = roomTypes.isLivechatRoom(room.t);\n\t\t\t\tif (isLivechatRoom) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\treturn Boolean(subscription);\n\t\t\t},\n\t\t\torder: -1,\n\t\t\tgroup: ['message', 'menu'],\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { Messages } from '../../../models/client';\nimport { settings } from '../../../settings/client';\nimport { MessageAction } from '../../../ui-utils/client';\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\nimport { messageArgs } from '../../../ui-utils/client/lib/messageArgs';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\n\nMeteor.startup(function () {\n\tTracker.autorun(() => {\n\t\tif (!settings.get('Threads_enabled')) {\n\t\t\treturn MessageAction.removeButton('unfollow-message');\n\t\t}\n\t\tMessageAction.addButton({\n\t\t\tid: 'unfollow-message',\n\t\t\ticon: 'bell-off',\n\t\t\tlabel: 'Unfollow_message',\n\t\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\t\tasync action() {\n\t\t\t\tconst { msg } = messageArgs(this);\n\t\t\t\tcallWithErrorHandling('unfollowMessage', { mid: msg._id }).then(() =>\n\t\t\t\t\tdispatchToastMessage({\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\tmessage: TAPi18n.__('You_unfollowed_this_message'),\n\t\t\t\t\t}),\n\t\t\t\t);\n\t\t\t},\n\t\t\tcondition({ msg: { _id, tmid, replies = [] }, u }, context) {\n\t\t\t\tif (tmid || context) {\n\t\t\t\t\tconst parentMessage = Messages.findOne({ _id: tmid || _id }, { fields: { replies: 1 } });\n\t\t\t\t\tif (parentMessage) {\n\t\t\t\t\t\treplies = parentMessage.replies || [];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn replies.includes(u._id);\n\t\t\t},\n\t\t\torder: 2,\n\t\t\tgroup: 'menu',\n\t\t});\n\t});\n});\n","import './flextab/threadlist';\nimport './flextab/thread';\nimport './flextab/threads';\nimport './messageAction/follow';\nimport './messageAction/unfollow';\nimport './messageAction/replyInThread';\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\n\nimport { Rooms } from '../../../models/client';\nimport { getRoomAvatarURL } from '../../../utils/lib/getRoomAvatarURL';\nimport { getUserAvatarURL } from '../../../utils/lib/getUserAvatarURL';\n\nconst getUsername = ({ userId, username }) => {\n\tconst query = {};\n\tif (username) {\n\t\tquery.username = username;\n\t}\n\n\tif (userId) {\n\t\tquery._id = userId;\n\t}\n\n\tconst user = Meteor.users.findOne(query, { fields: { username: 1, avatarETag: 1 } });\n\tif (!user) {\n\t\treturn {};\n\t}\n\n\treturn user;\n};\n\nconst getRoomETag = (rid) => Rooms.findOne({ _id: rid }, { fields: { avatarETag: 1 } });\n\nTemplate.avatar.helpers({\n\tsrc() {\n\t\tconst { url, rid } = Template.instance().data;\n\t\tif (url) {\n\t\t\treturn url;\n\t\t}\n\n\t\tif (rid) {\n\t\t\tconst { avatarETag } = getRoomETag(rid) || {};\n\t\t\treturn getRoomAvatarURL(rid, avatarETag);\n\t\t}\n\n\t\tif (this.roomIcon && this.username) {\n\t\t\treturn getUserAvatarURL(`@${this.username}`);\n\t\t}\n\n\t\tconst { username, avatarETag } = getUsername(this);\n\t\tif (!username) {\n\t\t\tif (this.username) {\n\t\t\t\treturn getUserAvatarURL(this.username);\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\treturn getUserAvatarURL(username, avatarETag);\n\t},\n\n\talt() {\n\t\tconst { username } = getUsername(this);\n\t\treturn username;\n\t},\n});\n","import './avatar/avatar.html';\nimport './avatar/avatar';\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\nimport _ from 'underscore';\n\nimport { settings } from '../../../settings';\nimport { callbacks } from '../../../../lib/callbacks';\nimport { t } from '../../../utils';\nimport { handleError } from '../../../../client/lib/utils/handleError';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\n\nTemplate.loginForm.helpers({\n\tuserName() {\n\t\tconst user = Meteor.user();\n\t\treturn user && user.username;\n\t},\n\tnamePlaceholder() {\n\t\tif (settings.get('Accounts_RequireNameForSignUp')) {\n\t\t\treturn t('Name');\n\t\t}\n\t\treturn t('Name_optional');\n\t},\n\tshowFormLogin() {\n\t\treturn settings.get('Accounts_ShowFormLogin');\n\t},\n\tstate(...state) {\n\t\treturn state.indexOf(Template.instance().state.get()) > -1;\n\t},\n\tbtnLoginSave() {\n\t\tif (Template.instance().loading.get()) {\n\t\t\treturn `${t('Please_wait')}...`;\n\t\t}\n\t\tswitch (Template.instance().state.get()) {\n\t\t\tcase 'register':\n\t\t\t\treturn t('Register');\n\t\t\tcase 'login':\n\t\t\t\treturn t('Login');\n\t\t\tcase 'email-verification':\n\t\t\t\treturn t('Send_confirmation_email');\n\t\t\tcase 'forgot-password':\n\t\t\t\treturn t('Reset_password');\n\t\t}\n\t},\n\tloginTerms() {\n\t\treturn settings.get('Layout_Login_Terms');\n\t},\n\tregistrationAllowed() {\n\t\tconst validSecretUrl = Template.instance().validSecretURL;\n\t\treturn settings.get('Accounts_RegistrationForm') === 'Public' || (validSecretUrl && validSecretUrl.get());\n\t},\n\tlinkReplacementText() {\n\t\treturn settings.get('Accounts_RegistrationForm_LinkReplacementText');\n\t},\n\tpasswordResetAllowed() {\n\t\treturn settings.get('Accounts_PasswordReset');\n\t},\n\trequirePasswordConfirmation() {\n\t\treturn settings.get('Accounts_RequirePasswordConfirmation');\n\t},\n\temailOrUsernamePlaceholder() {\n\t\treturn settings.get('Accounts_EmailOrUsernamePlaceholder') || t('Email_or_username');\n\t},\n\tpasswordPlaceholder() {\n\t\treturn settings.get('Accounts_PasswordPlaceholder') || t('Password');\n\t},\n\tconfirmPasswordPlaceholder() {\n\t\treturn settings.get('Accounts_ConfirmPasswordPlaceholder') || t('Confirm_password');\n\t},\n\tmanuallyApproveNewUsers() {\n\t\treturn settings.get('Accounts_ManuallyApproveNewUsers');\n\t},\n\ttypedEmail() {\n\t\treturn Template.instance().typedEmail?.trim();\n\t},\n});\n\nTemplate.loginForm.events({\n\t'submit #login-card'(event, instance) {\n\t\tevent.preventDefault();\n\t\t$(event.target).find('button.login').focus();\n\t\tinstance.loading.set(true);\n\t\tconst formData = instance.validate();\n\t\tconst state = instance.state.get();\n\t\tif (formData) {\n\t\t\tif (state === 'email-verification') {\n\t\t\t\tMeteor.call('sendConfirmationEmail', formData.email?.trim(), () => {\n\t\t\t\t\tinstance.loading.set(false);\n\t\t\t\t\tcallbacks.run('userConfirmationEmailRequested');\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('We_have_sent_registration_email') });\n\t\t\t\t\treturn instance.state.set('login');\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (state === 'forgot-password') {\n\t\t\t\tMeteor.call('sendForgotPasswordEmail', formData.email?.trim(), (err) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\thandleError(err);\n\t\t\t\t\t\treturn instance.state.set('login');\n\t\t\t\t\t}\n\t\t\t\t\tinstance.loading.set(false);\n\t\t\t\t\tcallbacks.run('userForgotPasswordEmailRequested');\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('If_this_email_is_registered') });\n\t\t\t\t\treturn instance.state.set('login');\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (state === 'register') {\n\t\t\t\tformData.secretURL = FlowRouter.getParam('hash');\n\t\t\t\treturn Meteor.call('registerUser', formData, function (error) {\n\t\t\t\t\tinstance.loading.set(false);\n\t\t\t\t\tif (error != null) {\n\t\t\t\t\t\tif (error.reason === 'Email already exists.') {\n\t\t\t\t\t\t\tdispatchToastMessage({ type: 'error', message: t('Email_already_exists') });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\thandleError(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcallbacks.run('userRegistered');\n\t\t\t\t\treturn Meteor.loginWithPassword(formData.email?.trim(), formData.pass, function (error) {\n\t\t\t\t\t\tif (error && error.error === 'error-invalid-email') {\n\t\t\t\t\t\t\treturn instance.state.set('wait-email-activation');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (error && error.error === 'error-user-is-not-activated') {\n\t\t\t\t\t\t\treturn instance.state.set('wait-activation');\n\t\t\t\t\t\t}\n\t\t\t\t\t\tSession.set('forceLogin', false);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\t\t\tlet loginMethod = 'loginWithPassword';\n\t\t\tif (settings.get('LDAP_Enable')) {\n\t\t\t\tloginMethod = 'loginWithLDAP';\n\t\t\t}\n\t\t\tif (settings.get('CROWD_Enable')) {\n\t\t\t\tloginMethod = 'loginWithCrowd';\n\t\t\t}\n\t\t\treturn Meteor[loginMethod](formData.emailOrUsername?.trim(), formData.pass, function (error) {\n\t\t\t\tinstance.loading.set(false);\n\t\t\t\tif (error != null) {\n\t\t\t\t\tswitch (error.error) {\n\t\t\t\t\t\tcase 'error-user-is-not-activated':\n\t\t\t\t\t\t\treturn dispatchToastMessage({ type: 'error', message: t('Wait_activation_warning') });\n\t\t\t\t\t\tcase 'error-invalid-email':\n\t\t\t\t\t\t\tinstance.typedEmail = formData.emailOrUsername;\n\t\t\t\t\t\t\treturn instance.state.set('email-verification');\n\t\t\t\t\t\tcase 'error-app-user-is-not-allowed-to-login':\n\t\t\t\t\t\t\tdispatchToastMessage({ type: 'error', message: t('App_user_not_allowed_to_login') });\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'error-login-blocked-for-ip':\n\t\t\t\t\t\t\tdispatchToastMessage({ type: 'error', message: t('Error_login_blocked_for_ip') });\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'error-login-blocked-for-user':\n\t\t\t\t\t\t\tdispatchToastMessage({ type: 'error', message: t('Error_login_blocked_for_user') });\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'error-license-user-limit-reached':\n\t\t\t\t\t\t\tdispatchToastMessage({\n\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\tmessage: t('error-license-user-limit-reached'),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn dispatchToastMessage({\n\t\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\t\tmessage: t('User_not_found_or_incorrect_password'),\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tSession.set('forceLogin', false);\n\t\t\t});\n\t\t}\n\t},\n\t'click .register'() {\n\t\tTemplate.instance().state.set('register');\n\t\treturn callbacks.run('loginPageStateChange', Template.instance().state.get());\n\t},\n\t'click .back-to-login'() {\n\t\tTemplate.instance().state.set('login');\n\t\treturn callbacks.run('loginPageStateChange', Template.instance().state.get());\n\t},\n\t'click .forgot-password'() {\n\t\tTemplate.instance().state.set('forgot-password');\n\t\treturn callbacks.run('loginPageStateChange', Template.instance().state.get());\n\t},\n});\n\nTemplate.loginForm.onCreated(function () {\n\tconst instance = this;\n\tthis.loading = new ReactiveVar(false);\n\n\tif (Session.get('loginDefaultState')) {\n\t\tthis.state = new ReactiveVar(Session.get('loginDefaultState'));\n\t} else {\n\t\tthis.state = new ReactiveVar('login');\n\t}\n\n\tTracker.autorun(() => {\n\t\tconst registrationForm = settings.get('Accounts_RegistrationForm');\n\t\tif (registrationForm === 'Disabled' && this.state.get() === 'register') {\n\t\t\tthis.state.set('login');\n\t\t}\n\t});\n\n\tthis.validSecretURL = new ReactiveVar(false);\n\tthis.validate = function () {\n\t\tconst formData = $('#login-card').serializeArray();\n\t\tconst formObj = {};\n\t\tconst validationObj = {};\n\t\tformData.forEach((field) => {\n\t\t\tformObj[field.name] = field.value;\n\t\t});\n\t\tconst state = instance.state.get();\n\t\tif (state !== 'login') {\n\t\t\tif (!(formObj.email && /\\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]+\\b/i.test(formObj.email))) {\n\t\t\t\tvalidationObj.email = t('Invalid_email');\n\t\t\t}\n\t\t}\n\t\tif (state === 'login') {\n\t\t\tif (!formObj.emailOrUsername) {\n\t\t\t\tvalidationObj.emailOrUsername = t('Invalid_email');\n\t\t\t}\n\t\t}\n\t\tif (state !== 'forgot-password' && state !== 'email-verification') {\n\t\t\tif (!formObj.pass) {\n\t\t\t\tvalidationObj.pass = t('Invalid_pass');\n\t\t\t}\n\t\t}\n\t\tif (state === 'register') {\n\t\t\tif (settings.get('Accounts_RequireNameForSignUp') && !formObj.name) {\n\t\t\t\tvalidationObj.name = t('Invalid_name');\n\t\t\t}\n\t\t\tif (settings.get('Accounts_RequirePasswordConfirmation') && formObj['confirm-pass'] !== formObj.pass) {\n\t\t\t\tvalidationObj['confirm-pass'] = t('Invalid_confirm_pass');\n\t\t\t}\n\t\t\tif (settings.get('Accounts_ManuallyApproveNewUsers') && !formObj.reason) {\n\t\t\t\tvalidationObj.reason = t('Invalid_reason');\n\t\t\t}\n\t\t}\n\t\t$('#login-card h2').removeClass('error');\n\t\t$('#login-card input.error, #login-card select.error').removeClass('error');\n\t\t$('#login-card .input-error').text('');\n\t\tif (!_.isEmpty(validationObj)) {\n\t\t\t$('#login-card h2').addClass('error');\n\n\t\t\tObject.keys(validationObj).forEach((key) => {\n\t\t\t\tconst value = validationObj[key];\n\t\t\t\t$(`#login-card input[name=${key}], #login-card select[name=${key}]`).addClass('error');\n\t\t\t\t$(`#login-card input[name=${key}]~.input-error, #login-card select[name=${key}]~.input-error`).text(value);\n\t\t\t});\n\t\t\tinstance.loading.set(false);\n\t\t\treturn false;\n\t\t}\n\t\treturn formObj;\n\t};\n\tif (FlowRouter.getParam('hash')) {\n\t\treturn Meteor.call('checkRegistrationSecretURL', FlowRouter.getParam('hash'), () => this.validSecretURL.set(true));\n\t}\n});\n\nTemplate.loginForm.onRendered(function () {\n\tSession.set('loginDefaultState');\n\treturn Tracker.autorun(() => {\n\t\tcallbacks.run('loginPageStateChange', this.state.get());\n\t\tswitch (this.state.get()) {\n\t\t\tcase 'login':\n\t\t\tcase 'forgot-password':\n\t\t\tcase 'email-verification':\n\t\t\t\treturn Meteor.defer(function () {\n\t\t\t\t\treturn $('input[name=email]').select().focus();\n\t\t\t\t});\n\t\t\tcase 'register':\n\t\t\t\treturn Meteor.defer(function () {\n\t\t\t\t\treturn $('input[name=name]').select().focus();\n\t\t\t\t});\n\t\t}\n\t});\n});\n","import { Template } from 'meteor/templating';\n\nimport { settings } from '../../../settings';\n\nTemplate.loginLayout.helpers({\n\tbackgroundUrl() {\n\t\tconst asset = settings.get('Assets_background');\n\t\tconst prefix = __meteor_runtime_config__.ROOT_URL_PATH_PREFIX || '';\n\t\tif (asset && (asset.url || asset.defaultUrl)) {\n\t\t\treturn `${prefix}/${asset.url || asset.defaultUrl}`;\n\t\t}\n\t},\n});\n","import { capitalize } from '@rocket.chat/string-helpers';\nimport { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { ServiceConfiguration } from 'meteor/service-configuration';\n\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\n\nTemplate.loginServices.helpers({\n\tloginService() {\n\t\treturn ServiceConfiguration.configurations\n\t\t\t.find(\n\t\t\t\t{\n\t\t\t\t\tshowButton: { $ne: false },\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tsort: {\n\t\t\t\t\t\tservice: 1,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t)\n\t\t\t.fetch()\n\t\t\t.map((service) => {\n\t\t\t\tswitch (service.service) {\n\t\t\t\t\tcase 'meteor-developer':\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tservice,\n\t\t\t\t\t\t\tdisplayName: 'Meteor',\n\t\t\t\t\t\t\ticon: 'meteor',\n\t\t\t\t\t\t};\n\n\t\t\t\t\tcase 'github':\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tservice,\n\t\t\t\t\t\t\tdisplayName: 'GitHub',\n\t\t\t\t\t\t\ticon: 'github-circled',\n\t\t\t\t\t\t};\n\n\t\t\t\t\tcase 'gitlab':\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tservice,\n\t\t\t\t\t\t\tdisplayName: 'GitLab',\n\t\t\t\t\t\t\ticon: service.service,\n\t\t\t\t\t\t};\n\n\t\t\t\t\tcase 'wordpress':\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tservice,\n\t\t\t\t\t\t\tdisplayName: 'WordPress',\n\t\t\t\t\t\t\ticon: service.service,\n\t\t\t\t\t\t};\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tservice,\n\t\t\t\t\t\t\tdisplayName: capitalize(String(service.service || '')),\n\t\t\t\t\t\t\ticon: service.service,\n\t\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t});\n\t},\n});\n\nconst loginMethods = {\n\t'meteor-developer': 'MeteorDeveloperAccount',\n\t'linkedin': 'Linkedin',\n};\n\nTemplate.loginServices.events({\n\t'click .external-login'(e) {\n\t\tif (this.service == null || this.service.service == null) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst loadingIcon = $(e.currentTarget).find('.loading-icon');\n\t\tconst serviceIcon = $(e.currentTarget).find('.service-icon');\n\t\tloadingIcon.removeClass('hidden');\n\t\tserviceIcon.addClass('hidden');\n\n\t\tconst loginWithService = `loginWith${loginMethods[this.service.service] || capitalize(String(this.service.service || ''))}`;\n\t\tconst serviceConfig = this.service.clientConfig || {};\n\n\t\tMeteor[loginWithService](serviceConfig, (error) => {\n\t\t\tloadingIcon.addClass('hidden');\n\t\t\tserviceIcon.removeClass('hidden');\n\n\t\t\tif (!error) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (error.reason) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error.reason });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdispatchToastMessage({ type: 'error', message: error.message });\n\t\t});\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\nimport { Tracker } from 'meteor/tracker';\nimport _ from 'underscore';\n\nimport { settings } from '../../../settings';\nimport { Button } from '../../../ui';\nimport { t } from '../../../utils';\nimport { callbacks } from '../../../../lib/callbacks';\nimport { dispatchToastMessage } from '../../../../client/lib/toast';\n\nTemplate.username.onCreated(function () {\n\tconst self = this;\n\tself.customFields = new ReactiveVar();\n\tself.username = new ReactiveVar();\n\n\tTracker.autorun(() => {\n\t\tconst Accounts_CustomFields = settings.get('Accounts_CustomFields');\n\t\tif (typeof Accounts_CustomFields === 'string' && Accounts_CustomFields.trim() !== '') {\n\t\t\ttry {\n\t\t\t\treturn this.customFields.set(JSON.parse(settings.get('Accounts_CustomFields')));\n\t\t\t} catch (error1) {\n\t\t\t\treturn console.error('Invalid JSON for Accounts_CustomFields');\n\t\t\t}\n\t\t} else {\n\t\t\treturn this.customFields.set(null);\n\t\t}\n\t});\n\n\tconst validateCustomFields = function (formObj, validationObj) {\n\t\tconst customFields = self.customFields.get();\n\t\tif (!customFields) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (const field in formObj) {\n\t\t\tif (formObj.hasOwnProperty(field)) {\n\t\t\t\tconst value = formObj[field];\n\t\t\t\tif (customFields[field] == null) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tconst customField = customFields[field];\n\t\t\t\tif (customField.required === true && !value) {\n\t\t\t\t\tvalidationObj[field] = t('Field_required');\n\t\t\t\t\treturn validationObj[field];\n\t\t\t\t}\n\t\t\t\tif (customField.maxLength != null && value.length > customField.maxLength) {\n\t\t\t\t\tvalidationObj[field] = t('Max_length_is', customField.maxLength);\n\t\t\t\t\treturn validationObj[field];\n\t\t\t\t}\n\t\t\t\tif (customField.minLength != null && value.length < customField.minLength) {\n\t\t\t\t\tvalidationObj[field] = t('Min_length_is', customField.minLength);\n\t\t\t\t\treturn validationObj[field];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tthis.validate = function () {\n\t\tconst formData = $('#login-card').serializeArray();\n\t\tconst formObj = {};\n\t\tconst validationObj = {};\n\t\tformData.forEach((field) => {\n\t\t\tformObj[field.name] = field.value;\n\t\t});\n\n\t\t$('#login-card h2').removeClass('error');\n\t\t$('#login-card input.error, #login-card select.error').removeClass('error');\n\t\t$('#login-card .input-error').text('');\n\t\tvalidateCustomFields(formObj, validationObj);\n\t\tif (!_.isEmpty(validationObj)) {\n\t\t\t$('#login-card h2').addClass('error');\n\n\t\t\tObject.keys(validationObj).forEach((key) => {\n\t\t\t\tconst value = validationObj[key];\n\t\t\t\t$(`#login-card input[name=${key}], #login-card select[name=${key}]`).addClass('error');\n\t\t\t\t$(`#login-card input[name=${key}]~.input-error, #login-card select[name=${key}]~.input-error`).text(value);\n\t\t\t});\n\n\t\t\treturn false;\n\t\t}\n\t\treturn formObj;\n\t};\n\n\treturn Meteor.call('getUsernameSuggestion', function (error, username) {\n\t\tself.username.set({\n\t\t\tready: true,\n\t\t\tusername,\n\t\t});\n\t\treturn Meteor.defer(() => self.find('input').focus());\n\t});\n});\n\nTemplate.username.helpers({\n\tusername() {\n\t\treturn Template.instance().username.get();\n\t},\n\n\tbackgroundUrl() {\n\t\tconst asset = settings.get('Assets_background');\n\t\tconst prefix = __meteor_runtime_config__.ROOT_URL_PATH_PREFIX || '';\n\t\tif (asset && (asset.url || asset.defaultUrl)) {\n\t\t\treturn `${prefix}/${asset.url || asset.defaultUrl}`;\n\t\t}\n\t},\n});\n\nTemplate.username.events({\n\t'focus .input-text input'(event) {\n\t\treturn $(event.currentTarget).parents('.input-text').addClass('focus');\n\t},\n\n\t'blur .input-text input'(event) {\n\t\tif (event.currentTarget.value === '') {\n\t\t\treturn $(event.currentTarget).parents('.input-text').removeClass('focus');\n\t\t}\n\t},\n\t'reset #login-card'() {\n\t\tMeteor.logout();\n\t},\n\t'submit #login-card'(event, instance) {\n\t\tevent.preventDefault();\n\n\t\tconst formData = instance.validate();\n\n\t\tconst username = instance.username.get();\n\t\tusername.empty = false;\n\t\tusername.error = false;\n\t\tusername.invalid = false;\n\t\tinstance.username.set(username);\n\n\t\tconst button = $(event.target).find('button.login');\n\t\tButton.loading(button);\n\n\t\tif (!formData) {\n\t\t\tButton.reset(button);\n\t\t\treturn;\n\t\t}\n\n\t\tconst usernameValue = $('#username').val().trim();\n\t\tif (usernameValue === '') {\n\t\t\tusername.empty = true;\n\t\t\tinstance.username.set(username);\n\t\t\tButton.reset(button);\n\t\t\treturn;\n\t\t}\n\n\t\tMeteor.call('saveCustomFields', formData, function (err) {\n\t\t\tif (err != null) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: err.error });\n\t\t\t}\n\t\t});\n\n\t\tMeteor.call('setUsername', usernameValue, function (err) {\n\t\t\tif (err != null) {\n\t\t\t\tif (err.error === 'username-invalid') {\n\t\t\t\t\tusername.invalid = true;\n\t\t\t\t} else if (err.error === 'error-blocked-username') {\n\t\t\t\t\tusername.blocked = true;\n\t\t\t\t} else {\n\t\t\t\t\tusername.unavailable = true;\n\t\t\t\t}\n\t\t\t\tusername.username = usernameValue;\n\t\t\t\tusername.escaped = _.escape(usernameValue);\n\t\t\t}\n\n\t\t\tButton.reset(button);\n\t\t\tinstance.username.set(username);\n\t\t\treturn callbacks.run('usernameSet');\n\t\t});\n\t},\n});\n","import './login/form.html';\nimport './login/layout.html';\nimport './login/layout';\nimport './login/services.html';\nimport './username/username.html';\nimport './login/form';\nimport './login/services';\nimport './username/username';\n","import './loading.css';\nimport './loading.html';\n","import Clipboard from 'clipboard';\nimport s from 'underscore.string';\nimport { Meteor } from 'meteor/meteor';\nimport { Match } from 'meteor/check';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\n\nimport { t } from '../../utils/client';\nimport { chatMessages } from '../../ui';\nimport { popover, RoomManager } from '../../ui-utils';\nimport { settings } from '../../settings';\nimport { ChatSubscription } from '../../models';\nimport './body.html';\nimport { imperativeModal } from '../../../client/lib/imperativeModal';\nimport GenericModal from '../../../client/components/GenericModal';\nimport { fireGlobalEvent } from '../../../client/lib/utils/fireGlobalEvent';\nimport { isLayoutEmbedded } from '../../../client/lib/utils/isLayoutEmbedded';\n\nTemplate.body.onRendered(function () {\n\tnew Clipboard('.clipboard');\n\n\t$(document.body).on('keydown', function (e) {\n\t\tconst unread = Session.get('unread');\n\t\tif (e.keyCode === 27 && (e.shiftKey === true || e.ctrlKey === true) && unread != null && unread !== '') {\n\t\t\te.preventDefault();\n\t\t\te.stopPropagation();\n\n\t\t\tconst handleClearUnreadAllMessages = () => {\n\t\t\t\tconst subscriptions = ChatSubscription.find(\n\t\t\t\t\t{\n\t\t\t\t\t\topen: true,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tfields: {\n\t\t\t\t\t\t\tunread: 1,\n\t\t\t\t\t\t\talert: 1,\n\t\t\t\t\t\t\trid: 1,\n\t\t\t\t\t\t\tt: 1,\n\t\t\t\t\t\t\tname: 1,\n\t\t\t\t\t\t\tls: 1,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t);\n\n\t\t\t\tsubscriptions.forEach((subscription) => {\n\t\t\t\t\tif (subscription.alert || subscription.unread > 0) {\n\t\t\t\t\t\tMeteor.call('readMessages', subscription.rid);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\timperativeModal.close();\n\t\t\t};\n\n\t\t\timperativeModal.open({\n\t\t\t\tcomponent: GenericModal,\n\t\t\t\tprops: {\n\t\t\t\t\tchildren: t('Are_you_sure_you_want_to_clear_all_unread_messages'),\n\t\t\t\t\tvariant: 'warning',\n\t\t\t\t\ttitle: t('Clear_all_unreads_question'),\n\t\t\t\t\tconfirmText: t('Yes_clear_all'),\n\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t\tonCancel: imperativeModal.close,\n\t\t\t\t\tonConfirm: handleClearUnreadAllMessages,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t});\n\n\t$(document.body).on('keydown', function (e) {\n\t\tconst { target } = e;\n\t\tif (e.ctrlKey === true || e.metaKey === true) {\n\t\t\tpopover.close();\n\t\t\treturn;\n\t\t}\n\t\tif (!((e.keyCode > 45 && e.keyCode < 91) || e.keyCode === 8)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (/input|textarea|select/i.test(target.tagName)) {\n\t\t\treturn;\n\t\t}\n\t\tif (target.id === 'pswp') {\n\t\t\treturn;\n\t\t}\n\n\t\tpopover.close();\n\n\t\tif (document.querySelector('.rc-modal-wrapper dialog[open]')) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst inputMessage = chatMessages[RoomManager.openedRoom] && chatMessages[RoomManager.openedRoom].input;\n\t\tif (!inputMessage) {\n\t\t\treturn;\n\t\t}\n\t\tinputMessage.focus();\n\t});\n\n\tconst handleMessageLinkClick = (event) => {\n\t\tconst link = event.currentTarget;\n\t\tif (link.origin === s.rtrim(Meteor.absoluteUrl(), '/') && /msg=([a-zA-Z0-9]+)/.test(link.search)) {\n\t\t\tfireGlobalEvent('click-message-link', { link: link.pathname + link.search });\n\t\t}\n\t};\n\n\tthis.autorun(() => {\n\t\tif (isLayoutEmbedded()) {\n\t\t\t$(document.body).on('click', 'a', handleMessageLinkClick);\n\t\t} else {\n\t\t\t$(document.body).off('click', 'a', handleMessageLinkClick);\n\t\t}\n\t});\n\n\tthis.autorun(function (c) {\n\t\tconst w = window;\n\t\tconst d = document;\n\t\tconst script = 'script';\n\t\tconst l = 'dataLayer';\n\t\tconst i = settings.get('GoogleTagManager_id');\n\t\tif (Match.test(i, String) && i.trim() !== '') {\n\t\t\tc.stop();\n\t\t\treturn (function (w, d, s, l, i) {\n\t\t\t\tw[l] = w[l] || [];\n\t\t\t\tw[l].push({\n\t\t\t\t\t'gtm.start': new Date().getTime(),\n\t\t\t\t\t'event': 'gtm.js',\n\t\t\t\t});\n\t\t\t\tconst f = d.getElementsByTagName(s)[0];\n\t\t\t\tconst j = d.createElement(s);\n\t\t\t\tconst dl = l !== 'dataLayer' ? `&l=${l}` : '';\n\t\t\t\tj.async = true;\n\t\t\t\tj.src = `//www.googletagmanager.com/gtm.js?id=${i}${dl}`;\n\t\t\t\treturn f.parentNode.insertBefore(j, f);\n\t\t\t})(w, d, script, l, i);\n\t\t}\n\t});\n});\n","import './body';\nimport './loading';\nimport './error.html';\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { ReactiveDict } from 'meteor/reactive-dict';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\nimport { Tracker } from 'meteor/tracker';\nimport moment from 'moment';\n\nimport { setupAutogrow } from './messageBoxAutogrow';\nimport { formattingButtons, applyFormatting } from './messageBoxFormatting';\nimport { EmojiPicker } from '../../../emoji';\nimport { Users } from '../../../models';\nimport { settings } from '../../../settings';\nimport { fileUpload, KonchatNotification } from '../../../ui';\nimport { messageBox, popover } from '../../../ui-utils';\nimport { t, roomTypes, getUserPreference } from '../../../utils/client';\nimport './messageBoxActions';\nimport './messageBoxReplyPreview';\nimport './userActionIndicator.ts';\nimport './messageBoxAudioMessage';\nimport './messageBoxNotSubscribed';\nimport './messageBox.html';\nimport './messageBoxReadOnly';\nimport { getImageExtensionFromMime } from '../../../../lib/getImageExtensionFromMime';\nimport { keyCodes } from '../../../../client/lib/utils/keyCodes';\nimport { isRTL } from '../../../../client/lib/utils/isRTL';\nimport { call } from '../../../../client/lib/utils/call';\n\nTemplate.messageBox.onCreated(function () {\n\tthis.state = new ReactiveDict();\n\tthis.popupConfig = new ReactiveVar(null);\n\tthis.replyMessageData = new ReactiveVar();\n\tthis.isMicrophoneDenied = new ReactiveVar(true);\n\tthis.isSendIconVisible = new ReactiveVar(false);\n\n\tthis.set = (value) => {\n\t\tconst { input } = this;\n\t\tif (!input) {\n\t\t\treturn;\n\t\t}\n\n\t\tinput.value = value;\n\t\t$(input).trigger('change').trigger('input');\n\t};\n\n\tthis.insertNewLine = () => {\n\t\tconst { input, autogrow } = this;\n\t\tif (!input) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (document.selection) {\n\t\t\tinput.focus();\n\t\t\tconst sel = document.selection.createRange();\n\t\t\tsel.text = '\\n';\n\t\t} else if (input.selectionStart || input.selectionStart === 0) {\n\t\t\tconst newPosition = input.selectionStart + 1;\n\t\t\tconst before = input.value.substring(0, input.selectionStart);\n\t\t\tconst after = input.value.substring(input.selectionEnd, input.value.length);\n\t\t\tinput.value = `${before}\\n${after}`;\n\t\t\tinput.selectionStart = newPosition;\n\t\t\tinput.selectionEnd = newPosition;\n\t\t} else {\n\t\t\tinput.value += '\\n';\n\t\t}\n\t\t$(input).trigger('change').trigger('input');\n\n\t\tinput.blur();\n\t\tinput.focus();\n\t\tautogrow.update();\n\t};\n\n\tthis.send = (event) => {\n\t\tconst { input } = this;\n\n\t\tif (!input) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst {\n\t\t\tautogrow,\n\t\t\tdata: { rid, tmid, onSend, tshow },\n\t\t} = this;\n\t\tconst { value } = input;\n\t\tthis.set('');\n\n\t\tif (!onSend) {\n\t\t\treturn;\n\t\t}\n\n\t\tonSend.call(this.data, event, { rid, tmid, value, tshow }, () => {\n\t\t\tautogrow.update();\n\t\t\tinput.focus();\n\t\t});\n\t};\n});\n\nTemplate.messageBox.onRendered(function () {\n\tlet inputSetup = false;\n\n\tthis.autorun(() => {\n\t\tconst { rid, subscription } = Template.currentData();\n\t\tconst room = Session.get(`roomData${rid}`);\n\n\t\tif (!inputSetup) {\n\t\t\tconst $input = $(this.find('.js-input-message'));\n\t\t\tthis.source = $input[0];\n\t\t\tif (this.source) {\n\t\t\t\tinputSetup = true;\n\t\t\t}\n\t\t\t$input.on('dataChange', () => {\n\t\t\t\tconst messages = $input.data('reply') || [];\n\t\t\t\tthis.replyMessageData.set(messages);\n\t\t\t});\n\t\t}\n\n\t\tif (!room) {\n\t\t\treturn this.state.set({\n\t\t\t\troom: false,\n\t\t\t\tisBlockedOrBlocker: false,\n\t\t\t\tmustJoinWithCode: false,\n\t\t\t});\n\t\t}\n\n\t\tconst isBlocked = room && room.t === 'd' && subscription && subscription.blocked;\n\t\tconst isBlocker = room && room.t === 'd' && subscription && subscription.blocker;\n\t\tconst isBlockedOrBlocker = isBlocked || isBlocker;\n\n\t\tconst mustJoinWithCode = !subscription && room.joinCodeRequired;\n\n\t\treturn this.state.set({\n\t\t\troom: false,\n\t\t\tisBlockedOrBlocker,\n\t\t\tmustJoinWithCode,\n\t\t});\n\t});\n\n\tthis.autorun(() => {\n\t\tconst { rid, tmid, onInputChanged, onResize } = Template.currentData();\n\n\t\tTracker.afterFlush(() => {\n\t\t\tconst input = this.find('.js-input-message');\n\n\t\t\tif (this.input === input) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.input = input;\n\t\t\tonInputChanged && onInputChanged(input);\n\n\t\t\tif (input && rid) {\n\t\t\t\tthis.popupConfig.set({\n\t\t\t\t\trid,\n\t\t\t\t\ttmid,\n\t\t\t\t\tgetInput: () => input,\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.popupConfig.set(null);\n\t\t\t}\n\n\t\t\tif (this.autogrow) {\n\t\t\t\tthis.autogrow.destroy();\n\t\t\t\tthis.autogrow = null;\n\t\t\t}\n\n\t\t\tif (!input) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst shadow = this.find('.js-input-message-shadow');\n\t\t\tthis.autogrow = setupAutogrow(input, shadow, onResize);\n\t\t});\n\t});\n});\n\nTemplate.messageBox.onDestroyed(function () {\n\tif (!this.autogrow) {\n\t\treturn;\n\t}\n\n\tthis.autogrow.destroy();\n});\n\nTemplate.messageBox.helpers({\n\tisAnonymousOrMustJoinWithCode() {\n\t\tconst instance = Template.instance();\n\t\tconst { rid } = Template.currentData();\n\t\tif (!rid) {\n\t\t\treturn false;\n\t\t}\n\t\tconst isAnonymous = !Meteor.userId();\n\t\treturn isAnonymous || instance.state.get('mustJoinWithCode');\n\t},\n\tisWritable() {\n\t\tconst { rid, subscription } = Template.currentData();\n\t\tif (!rid) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst isBlockedOrBlocker = Template.instance().state.get('isBlockedOrBlocker');\n\n\t\tif (isBlockedOrBlocker) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (subscription?.onHold) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst isReadOnly = roomTypes.readOnly(rid, Users.findOne({ _id: Meteor.userId() }, { fields: { username: 1 } }));\n\t\tconst isArchived = roomTypes.archived(rid) || (subscription && subscription.t === 'd' && subscription.archived);\n\n\t\treturn !isReadOnly && !isArchived;\n\t},\n\tpopupConfig() {\n\t\treturn Template.instance().popupConfig.get();\n\t},\n\tinput() {\n\t\treturn Template.instance().input;\n\t},\n\treplyMessageData() {\n\t\treturn Template.instance().replyMessageData.get();\n\t},\n\tisEmojiEnabled() {\n\t\treturn getUserPreference(Meteor.userId(), 'useEmojis');\n\t},\n\tmaxMessageLength() {\n\t\treturn settings.get('Message_AllowConvertLongMessagesToAttachment') ? null : settings.get('Message_MaxAllowedSize');\n\t},\n\tisSendIconVisible() {\n\t\treturn Template.instance().isSendIconVisible.get();\n\t},\n\tcanSend() {\n\t\tconst { rid } = Template.currentData();\n\t\tif (!rid) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn roomTypes.verifyCanSendMessage(rid);\n\t},\n\tactions() {\n\t\tconst actionGroups = messageBox.actions.get();\n\t\treturn Object.values(actionGroups).reduce((actions, actionGroup) => [...actions, ...actionGroup], []);\n\t},\n\tformattingButtons() {\n\t\treturn formattingButtons.filter(({ condition }) => !condition || condition());\n\t},\n\tisBlockedOrBlocker() {\n\t\treturn Template.instance().state.get('isBlockedOrBlocker');\n\t},\n\tonHold() {\n\t\tconst { rid, subscription } = Template.currentData();\n\t\treturn rid && !!subscription?.onHold;\n\t},\n\tisSubscribed() {\n\t\tconst { subscription } = Template.currentData();\n\t\treturn !!subscription;\n\t},\n});\n\nconst handleFormattingShortcut = (event, instance) => {\n\tconst isMacOS = navigator.platform.indexOf('Mac') !== -1;\n\tconst isCmdOrCtrlPressed = (isMacOS && event.metaKey) || (!isMacOS && event.ctrlKey);\n\n\tif (!isCmdOrCtrlPressed) {\n\t\treturn false;\n\t}\n\n\tconst key = event.key.toLowerCase();\n\n\tconst { pattern } = formattingButtons.filter(({ condition }) => !condition || condition()).find(({ command }) => command === key) || {};\n\n\tif (!pattern) {\n\t\treturn false;\n\t}\n\n\tconst { input } = instance;\n\tapplyFormatting(pattern, input);\n\treturn true;\n};\n\nlet sendOnEnter;\nlet sendOnEnterActive;\n\nTracker.autorun(() => {\n\tsendOnEnter = getUserPreference(Meteor.userId(), 'sendOnEnter');\n\tsendOnEnterActive = sendOnEnter == null || sendOnEnter === 'normal' || (sendOnEnter === 'desktop' && Meteor.Device.isDesktop());\n});\n\nconst handleSubmit = (event, instance) => {\n\tconst { which: keyCode } = event;\n\n\tconst isSubmitKey = keyCode === keyCodes.CARRIAGE_RETURN || keyCode === keyCodes.NEW_LINE;\n\n\tif (!isSubmitKey) {\n\t\treturn false;\n\t}\n\n\tconst withModifier = event.shiftKey || event.ctrlKey || event.altKey || event.metaKey;\n\tconst isSending = (sendOnEnterActive && !withModifier) || (!sendOnEnterActive && withModifier);\n\n\tif (isSending) {\n\t\tinstance.send(event);\n\t\treturn true;\n\t}\n\n\tinstance.insertNewLine();\n\treturn true;\n};\n\nTemplate.messageBox.events({\n\tasync 'click .js-join'(event) {\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\n\t\tconst joinCodeInput = Template.instance().find('[name=joinCode]');\n\t\tconst joinCode = joinCodeInput && joinCodeInput.value;\n\n\t\tawait call('joinRoom', this.rid, joinCode);\n\t},\n\t'click .js-emoji-picker'(event, instance) {\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\n\t\tif (!getUserPreference(Meteor.userId(), 'useEmojis')) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (EmojiPicker.isOpened()) {\n\t\t\tEmojiPicker.close();\n\t\t\treturn;\n\t\t}\n\n\t\tEmojiPicker.open(instance.source, (emoji) => {\n\t\t\tconst emojiValue = `:${emoji}: `;\n\n\t\t\tconst { input } = instance;\n\n\t\t\tconst caretPos = input.selectionStart;\n\t\t\tconst textAreaTxt = input.value;\n\n\t\t\tinput.focus();\n\t\t\tif (!document.execCommand || !document.execCommand('insertText', false, emojiValue)) {\n\t\t\t\tinstance.set(textAreaTxt.substring(0, caretPos) + emojiValue + textAreaTxt.substring(caretPos));\n\t\t\t\tinput.focus();\n\t\t\t}\n\n\t\t\tinput.selectionStart = caretPos + emojiValue.length;\n\t\t\tinput.selectionEnd = caretPos + emojiValue.length;\n\t\t});\n\t},\n\t'focus .js-input-message'() {\n\t\tKonchatNotification.removeRoomNotification(this.rid);\n\t},\n\t'keydown .js-input-message'(event, instance) {\n\t\tconst isEventHandled = handleFormattingShortcut(event, instance) || handleSubmit(event, instance);\n\n\t\tif (isEventHandled) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\treturn;\n\t\t}\n\n\t\tconst { rid, tmid, onKeyDown } = this;\n\t\tonKeyDown && onKeyDown.call(this, event, { rid, tmid });\n\t},\n\t'keyup .js-input-message'(event) {\n\t\tconst { rid, tmid, onKeyUp } = this;\n\t\tonKeyUp && onKeyUp.call(this, event, { rid, tmid });\n\t},\n\t'paste .js-input-message'(event, instance) {\n\t\tconst { rid, tmid } = this;\n\t\tconst { input, autogrow } = instance;\n\n\t\tsetTimeout(() => autogrow && autogrow.update(), 50);\n\n\t\tif (!event.originalEvent.clipboardData) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst items = [...event.originalEvent.clipboardData.items];\n\n\t\tif (items.some(({ kind, type }) => kind === 'string' && type === 'text/plain')) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst files = items\n\t\t\t.filter((item) => item.kind === 'file' && item.type.indexOf('image/') !== -1)\n\t\t\t.map((item) => {\n\t\t\t\tconst fileItem = item.getAsFile();\n\n\t\t\t\tconst imageExtension = getImageExtensionFromMime(fileItem.type);\n\n\t\t\t\tconst extension = imageExtension ? `.${imageExtension}` : '';\n\n\t\t\t\treturn {\n\t\t\t\t\tfile: fileItem,\n\t\t\t\t\tname: `Clipboard - ${moment().format(settings.get('Message_TimeAndDateFormat'))}${extension}`,\n\t\t\t\t};\n\t\t\t})\n\t\t\t.filter(({ file }) => file !== null);\n\n\t\tif (files.length) {\n\t\t\tevent.preventDefault();\n\t\t\tfileUpload(files, input, { rid, tmid });\n\t\t}\n\t},\n\t'input .js-input-message'(event, instance) {\n\t\tconst { input } = instance;\n\t\tif (!input) {\n\t\t\treturn;\n\t\t}\n\n\t\tinstance.isSendIconVisible.set(!!input.value);\n\n\t\tif (input.value.length > 0) {\n\t\t\tinput.dir = isRTL(input.value) ? 'rtl' : 'ltr';\n\t\t}\n\n\t\tconst { rid, tmid, onValueChanged } = this;\n\t\tonValueChanged && onValueChanged.call(this, event, { rid, tmid });\n\t},\n\t'propertychange .js-input-message'(event, instance) {\n\t\tif (event.originalEvent.propertyName !== 'value') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { input } = instance;\n\t\tif (!input) {\n\t\t\treturn;\n\t\t}\n\n\t\tinstance.sendIconDisabled.set(!!input.value);\n\n\t\tif (input.value.length > 0) {\n\t\t\tinput.dir = isRTL(input.value) ? 'rtl' : 'ltr';\n\t\t}\n\n\t\tconst { rid, tmid, onValueChanged } = this;\n\t\tonValueChanged && onValueChanged.call(this, event, { rid, tmid });\n\t},\n\tasync 'click .js-send'(event, instance) {\n\t\tinstance.send(event);\n\t},\n\t'click .js-action-menu'(event, instance) {\n\t\tconst groups = messageBox.actions.get();\n\t\tconst config = {\n\t\t\tpopoverClass: 'message-box',\n\t\t\tcolumns: [\n\t\t\t\t{\n\t\t\t\t\tgroups: Object.keys(groups).map((group) => {\n\t\t\t\t\t\tconst items = [];\n\t\t\t\t\t\tgroups[group].forEach((item) => {\n\t\t\t\t\t\t\titems.push({\n\t\t\t\t\t\t\t\ticon: item.icon,\n\t\t\t\t\t\t\t\tname: t(item.label),\n\t\t\t\t\t\t\t\ttype: 'messagebox-action',\n\t\t\t\t\t\t\t\tid: item.id,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\ttitle: t(group),\n\t\t\t\t\t\t\titems,\n\t\t\t\t\t\t};\n\t\t\t\t\t}),\n\t\t\t\t},\n\t\t\t],\n\t\t\toffsetVertical: 10,\n\t\t\tdirection: 'top-inverted',\n\t\t\tcurrentTarget: event.currentTarget.firstElementChild.firstElementChild,\n\t\t\tdata: {\n\t\t\t\trid: this.rid,\n\t\t\t\ttmid: this.tmid,\n\t\t\t\tprid: this.subscription.prid,\n\t\t\t\tmessageBox: instance.firstNode,\n\t\t\t},\n\t\t\tactiveElement: event.currentTarget,\n\t\t};\n\n\t\tpopover.open(config);\n\t},\n\t'click .js-message-actions .js-message-action'(event, instance) {\n\t\tconst { id } = event.currentTarget.dataset;\n\t\tconst actions = messageBox.actions.getById(id);\n\t\tactions\n\t\t\t.filter(({ action }) => !!action)\n\t\t\t.forEach(({ action }) => {\n\t\t\t\taction.call(null, {\n\t\t\t\t\trid: this.rid,\n\t\t\t\t\ttmid: this.tmid,\n\t\t\t\t\tmessageBox: instance.firstNode,\n\t\t\t\t\tprid: this.subscription.prid,\n\t\t\t\t\tevent,\n\t\t\t\t});\n\t\t\t});\n\t},\n\t'click .js-format'(event, instance) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconst { id } = event.currentTarget.dataset;\n\t\tconst { pattern } = formattingButtons.filter(({ condition }) => !condition || condition()).find(({ label }) => label === id) || {};\n\n\t\tif (!pattern) {\n\t\t\treturn;\n\t\t}\n\n\t\tapplyFormatting(pattern, instance.input);\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Random } from 'meteor/random';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\n\nimport { VRecDialog } from '../../../ui-vrecord/client';\nimport { messageBox, modal } from '../../../ui-utils';\nimport { fileUpload } from '../../../ui';\nimport { settings } from '../../../settings';\nimport { t } from '../../../utils';\n\nmessageBox.actions.add('Create_new', 'Video_message', {\n\tid: 'video-message',\n\ticon: 'video',\n\tcondition: () =>\n\t\t(navigator.mediaDevices ||\n\t\t\tnavigator.getUserMedia ||\n\t\t\tnavigator.webkitGetUserMedia ||\n\t\t\tnavigator.mozGetUserMedia ||\n\t\t\tnavigator.msGetUserMedia) &&\n\t\twindow.MediaRecorder &&\n\t\tsettings.get('FileUpload_Enabled') &&\n\t\tsettings.get('Message_VideoRecorderEnabled') &&\n\t\t(!settings.get('FileUpload_MediaTypeBlackList') || !settings.get('FileUpload_MediaTypeBlackList').match(/video\\/webm|video\\/\\*/i)) &&\n\t\t(!settings.get('FileUpload_MediaTypeWhiteList') || settings.get('FileUpload_MediaTypeWhiteList').match(/video\\/webm|video\\/\\*/i)),\n\taction: ({ rid, tmid, messageBox }) => (VRecDialog.opened ? VRecDialog.close() : VRecDialog.open(messageBox, { rid, tmid })),\n});\n\nmessageBox.actions.add('Add_files_from', 'Computer', {\n\tid: 'file-upload',\n\ticon: 'computer',\n\tcondition: () => settings.get('FileUpload_Enabled'),\n\taction({ rid, tmid, event, messageBox }) {\n\t\tevent.preventDefault();\n\t\tconst $input = $(document.createElement('input'));\n\t\t$input.css('display', 'none');\n\t\t$input.attr({\n\t\t\tid: 'fileupload-input',\n\t\t\ttype: 'file',\n\t\t\tmultiple: 'multiple',\n\t\t});\n\n\t\t$(document.body).append($input);\n\n\t\t$input.one('change', async function (e) {\n\t\t\tconst { mime } = await import('../../../utils/lib/mimeTypes');\n\t\t\tconst filesToUpload = [...e.target.files].map((file) => {\n\t\t\t\tObject.defineProperty(file, 'type', {\n\t\t\t\t\tvalue: mime.lookup(file.name),\n\t\t\t\t});\n\t\t\t\treturn {\n\t\t\t\t\tfile,\n\t\t\t\t\tname: file.name,\n\t\t\t\t};\n\t\t\t});\n\n\t\t\tfileUpload(filesToUpload, $('.js-input-message', messageBox).get(0), { rid, tmid });\n\t\t\t$input.remove();\n\t\t});\n\n\t\t$input.click();\n\n\t\t// Simple hack for iOS aka codegueira\n\t\tif (navigator.userAgent.match(/(iPad|iPhone|iPod)/g)) {\n\t\t\t$input.click();\n\t\t}\n\t},\n});\n\nconst canGetGeolocation = new ReactiveVar(false);\n\nconst getGeolocationPermission = () =>\n\tnew Promise((resolve) => {\n\t\tif (!navigator.permissions) {\n\t\t\tresolve(true);\n\t\t}\n\t\tnavigator.permissions.query({ name: 'geolocation' }).then(({ state }) => {\n\t\t\tresolve(state);\n\t\t});\n\t});\n\nconst getGeolocationPosition = () =>\n\tnew Promise((resolvePos) => {\n\t\tnavigator.geolocation.getCurrentPosition(\n\t\t\tresolvePos,\n\t\t\t() => {\n\t\t\t\tresolvePos(false);\n\t\t\t},\n\t\t\t{\n\t\t\t\tenableHighAccuracy: true,\n\t\t\t\tmaximumAge: 0,\n\t\t\t\ttimeout: 10000,\n\t\t\t},\n\t\t);\n\t});\n\nconst getCoordinates = async () => {\n\tconst status = await getGeolocationPermission();\n\tif (status === 'prompt') {\n\t\tlet resolveModal;\n\t\tconst modalAnswer = new Promise((resolve) => {\n\t\t\tresolveModal = resolve;\n\t\t});\n\t\tmodal.open(\n\t\t\t{\n\t\t\t\ttitle: t('You_will_be_asked_for_permissions'),\n\t\t\t\tconfirmButtonText: t('Continue'),\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tcloseOnConfirm: true,\n\t\t\t\tcloseOnCancel: true,\n\t\t\t},\n\t\t\tasync (isConfirm) => {\n\t\t\t\tif (!isConfirm) {\n\t\t\t\t\tresolveModal(false);\n\t\t\t\t}\n\t\t\t\tconst position = await getGeolocationPosition();\n\t\t\t\tif (!position) {\n\t\t\t\t\tconst newStatus = getGeolocationPermission();\n\t\t\t\t\tresolveModal(newStatus);\n\t\t\t\t}\n\t\t\t\tresolveModal(position);\n\t\t\t},\n\t\t);\n\t\tconst position = await modalAnswer;\n\t\treturn position;\n\t}\n\n\tif (status === 'denied') {\n\t\treturn status;\n\t}\n\n\tconst position = await getGeolocationPosition();\n\treturn position;\n};\n\nmessageBox.actions.add('Share', 'My_location', {\n\tid: 'share-location',\n\ticon: 'map-pin',\n\tcondition: () => canGetGeolocation.get(),\n\tasync action({ rid, tmid }) {\n\t\tconst position = await getCoordinates();\n\n\t\tif (!position) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (position === 'denied') {\n\t\t\tmodal.open({\n\t\t\t\ttitle: t('Cannot_share_your_location'),\n\t\t\t\ttext: t('The_necessary_browser_permissions_for_location_sharing_are_not_granted'),\n\t\t\t\tconfirmButtonText: t('Ok'),\n\t\t\t\tcloseOnConfirm: true,\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tconst {\n\t\t\tcoords: { latitude, longitude },\n\t\t} = position;\n\t\tconst text = `<div class=\"upload-preview\"><div class=\"upload-preview-file\" style=\"background-size: cover; box-shadow: 0 0 0px 1px #dfdfdf; border-radius: 2px; height: 250px; width:100%; max-width: 500px; background-image:url(https://maps.googleapis.com/maps/api/staticmap?zoom=14&size=500x250&markers=color:gray%7Clabel:%7C${latitude},${longitude}&key=${settings.get(\n\t\t\t'MapView_GMapsAPIKey',\n\t\t)})\" ></div></div>`;\n\n\t\tmodal.open(\n\t\t\t{\n\t\t\t\ttitle: t('Share_Location_Title'),\n\t\t\t\ttext,\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tcloseOnConfirm: true,\n\t\t\t\tcloseOnCancel: true,\n\t\t\t\thtml: true,\n\t\t\t},\n\t\t\tfunction (isConfirm) {\n\t\t\t\tif (isConfirm !== true) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tMeteor.call('sendMessage', {\n\t\t\t\t\t_id: Random.id(),\n\t\t\t\t\trid,\n\t\t\t\t\ttmid,\n\t\t\t\t\tmsg: '',\n\t\t\t\t\tlocation: {\n\t\t\t\t\t\ttype: 'Point',\n\t\t\t\t\t\tcoordinates: [longitude, latitude],\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t},\n\t\t);\n\t},\n});\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst isMapViewEnabled = settings.get('MapView_Enabled') === true;\n\t\tconst isGeolocationCurrentPositionSupported = navigator.geolocation && navigator.geolocation.getCurrentPosition;\n\t\tconst googleMapsApiKey = settings.get('MapView_GMapsAPIKey');\n\t\tcanGetGeolocation.set(isMapViewEnabled && isGeolocationCurrentPositionSupported && googleMapsApiKey && googleMapsApiKey.length);\n\t});\n});\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nimport { settings } from '../../../settings';\nimport { AudioRecorder, fileUpload, USER_ACTIVITIES, UserAction } from '../../../ui';\nimport { t } from '../../../utils';\nimport './messageBoxAudioMessage.html';\n\nconst startRecording = async (rid, tmid) => {\n\ttry {\n\t\tawait AudioRecorder.start();\n\t\tUserAction.performContinuously(rid, USER_ACTIVITIES.USER_RECORDING, { tmid });\n\t} catch (error) {\n\t\tthrow error;\n\t}\n};\n\nconst stopRecording = async (rid, tmid) => {\n\tconst result = await new Promise((resolve) => AudioRecorder.stop(resolve));\n\tUserAction.stop(rid, USER_ACTIVITIES.USER_RECORDING, { tmid });\n\treturn result;\n};\n\nconst recordingInterval = new ReactiveVar(null);\nconst recordingRoomId = new ReactiveVar(null);\n\nconst clearIntervalVariables = () => {\n\tif (recordingInterval.get()) {\n\t\tclearInterval(recordingInterval.get());\n\t\trecordingInterval.set(null);\n\t\trecordingRoomId.set(null);\n\t}\n};\n\nconst cancelRecording = async (instance, rid, tmid) => {\n\tclearIntervalVariables();\n\n\tinstance.time.set('00:00');\n\n\tconst blob = await stopRecording(rid, tmid);\n\n\tinstance.state.set(null);\n\n\treturn blob;\n};\n\nTemplate.messageBoxAudioMessage.onCreated(async function () {\n\tthis.state = new ReactiveVar(null);\n\tthis.time = new ReactiveVar('00:00');\n\tthis.isMicrophoneDenied = new ReactiveVar(false);\n\n\tif (navigator.permissions) {\n\t\ttry {\n\t\t\tconst permissionStatus = await navigator.permissions.query({ name: 'microphone' });\n\t\t\tthis.isMicrophoneDenied.set(permissionStatus.state === 'denied');\n\t\t\tpermissionStatus.onchange = () => {\n\t\t\t\tthis.isMicrophoneDenied.set(permissionStatus.state === 'denied');\n\t\t\t};\n\t\t\treturn;\n\t\t} catch (error) {\n\t\t\tconsole.warn(error);\n\t\t}\n\t}\n\n\tif (!navigator.mediaDevices || !navigator.mediaDevices.enumerateDevices) {\n\t\tthis.isMicrophoneDenied.set(true);\n\t\treturn;\n\t}\n\n\ttry {\n\t\tif (!(await navigator.mediaDevices.enumerateDevices()).some(({ kind }) => kind === 'audioinput')) {\n\t\t\tthis.isMicrophoneDenied.set(true);\n\t\t\treturn;\n\t\t}\n\t} catch (error) {\n\t\tconsole.warn(error);\n\t}\n});\n\nTemplate.messageBoxAudioMessage.onDestroyed(async function () {\n\tif (this.state.get() === 'recording') {\n\t\tconst { rid, tmid } = this.data;\n\t\tawait cancelRecording(this, rid, tmid);\n\t}\n});\n\nTemplate.messageBoxAudioMessage.helpers({\n\tisAllowed() {\n\t\treturn (\n\t\t\tAudioRecorder.isSupported() &&\n\t\t\t!Template.instance().isMicrophoneDenied.get() &&\n\t\t\tsettings.get('FileUpload_Enabled') &&\n\t\t\tsettings.get('Message_AudioRecorderEnabled') &&\n\t\t\t(!settings.get('FileUpload_MediaTypeBlackList') || !settings.get('FileUpload_MediaTypeBlackList').match(/audio\\/mp3|audio\\/\\*/i)) &&\n\t\t\t(!settings.get('FileUpload_MediaTypeWhiteList') || settings.get('FileUpload_MediaTypeWhiteList').match(/audio\\/mp3|audio\\/\\*/i))\n\t\t);\n\t},\n\n\tstateClass() {\n\t\tif (recordingRoomId.get() && recordingRoomId.get() !== Template.currentData().rid) {\n\t\t\treturn 'rc-message-box__audio-message--busy';\n\t\t}\n\n\t\tconst state = Template.instance().state.get();\n\t\treturn state && `rc-message-box__audio-message--${state}`;\n\t},\n\n\ttime() {\n\t\treturn Template.instance().time.get();\n\t},\n});\n\nTemplate.messageBoxAudioMessage.events({\n\tasync 'click .js-audio-message-record'(event, instance) {\n\t\tevent.preventDefault();\n\n\t\tif (recordingRoomId.get() && recordingRoomId.get() !== this.rid) {\n\t\t\treturn;\n\t\t}\n\n\t\tinstance.state.set('recording');\n\n\t\ttry {\n\t\t\tawait startRecording(this.rid, this.tmid);\n\t\t\tconst startTime = new Date();\n\t\t\trecordingInterval.set(\n\t\t\t\tsetInterval(() => {\n\t\t\t\t\tconst now = new Date();\n\t\t\t\t\tconst distance = (now.getTime() - startTime.getTime()) / 1000;\n\t\t\t\t\tconst minutes = Math.floor(distance / 60);\n\t\t\t\t\tconst seconds = Math.floor(distance % 60);\n\t\t\t\t\tinstance.time.set(`${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`);\n\t\t\t\t}, 1000),\n\t\t\t);\n\t\t\trecordingRoomId.set(this.rid);\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t\tinstance.isMicrophoneDenied.set(true);\n\t\t\tinstance.state.set(null);\n\t\t}\n\t},\n\n\tasync 'click .js-audio-message-cancel'(event, instance) {\n\t\tevent.preventDefault();\n\n\t\tawait cancelRecording(instance, this.rid, this.tmid);\n\t},\n\n\tasync 'click .js-audio-message-done'(event, instance) {\n\t\tevent.preventDefault();\n\n\t\tinstance.state.set('loading');\n\n\t\tconst { rid, tmid } = this;\n\t\tconst blob = await cancelRecording(instance, rid, tmid);\n\n\t\tawait fileUpload([{ file: blob, type: 'video', name: `${t('Audio record')}.mp3` }], { input: blob }, { rid, tmid });\n\t},\n});\n","import _ from 'underscore';\n\nconst replaceWhitespaces = (whitespaces) => `${'&nbsp;'.repeat(whitespaces.length - 1)} `;\n\nexport const setupAutogrow = (textarea, shadow, callback) => {\n\tconst width = textarea.clientWidth;\n\tconst height = textarea.clientHeight;\n\tconst { font, lineHeight, maxHeight: maxHeightPx } = window.getComputedStyle(textarea);\n\n\tshadow.style.position = 'fixed';\n\tshadow.style.top = '-10000px';\n\tshadow.style.left = '-10000px';\n\tshadow.style.width = `${width}px`;\n\tshadow.style.font = font;\n\tshadow.style.lineHeight = lineHeight;\n\tshadow.style.resize = 'none';\n\tshadow.style.wordWrap = 'break-word';\n\n\tconst minHeight = height;\n\tconst maxHeight = parseInt(maxHeightPx, 10);\n\n\tlet lastWidth = width;\n\tlet lastHeight = minHeight;\n\tlet textLenght = 0;\n\n\tconst update = () => {\n\t\tconst { clientWidth: width, value: text } = textarea;\n\n\t\tconst isMaximumHeightReached = lastHeight >= maxHeight;\n\t\tconst isTextLengthOutdated = textLenght && textLenght < text.length;\n\t\tconst wasWidthChanged = width !== lastWidth;\n\n\t\tif (isMaximumHeightReached && isTextLengthOutdated && !wasWidthChanged) {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst shadowText = text\n\t\t\t.replace(/&/g, '&amp;')\n\t\t\t.replace(/</g, '&lt;')\n\t\t\t.replace(/>/g, '&gt;')\n\t\t\t.replace(/\\n$/, '<br/>&nbsp;')\n\t\t\t.replace(/\\n/g, '<br/>')\n\t\t\t.replace(/ {2,}/g, replaceWhitespaces);\n\t\tif (wasWidthChanged) {\n\t\t\tshadow.style.width = `${width}px`;\n\t\t\tlastWidth = width;\n\t\t}\n\n\t\tshadow.innerHTML = shadowText;\n\n\t\tconst shadowHeight = Math.max(shadow.clientHeight + 1, minHeight) + 1;\n\t\tconst height = Math.min(shadowHeight, maxHeight);\n\n\t\tif (height === lastHeight) {\n\t\t\treturn true;\n\t\t}\n\n\t\tlastHeight = height;\n\n\t\tconst overflow = height < maxHeight ? 'hidden' : '';\n\n\t\tif (height < maxHeight) {\n\t\t\ttextLenght = text.length;\n\t\t}\n\n\t\ttextarea.style.overflow = overflow;\n\t\ttextarea.style.height = `${height}px`;\n\n\t\tcallback && callback();\n\t};\n\n\tconst updateThrottled = _.throttle(update, 300);\n\n\tconst $textarea = $(textarea);\n\t$textarea.on('focus', update);\n\t$textarea.on('change input', updateThrottled);\n\twindow.addEventListener('resize', updateThrottled, false);\n\n\tconst destroy = () => {\n\t\t$textarea.off('focus', update);\n\t\t$textarea.off('change input', updateThrottled);\n\t\twindow.removeEventListener('resize', updateThrottled);\n\t};\n\n\tupdate();\n\n\treturn {\n\t\tupdate,\n\t\tdestroy,\n\t};\n};\n","import { Markdown } from '../../../markdown/client';\nimport { settings } from '../../../settings';\n\nexport const formattingButtons = [\n\t{\n\t\tlabel: 'bold',\n\t\ticon: 'bold',\n\t\tpattern: '*{{text}}*',\n\t\tcommand: 'b',\n\t\tcondition: () => Markdown && settings.get('Markdown_Parser') === 'original',\n\t},\n\t{\n\t\tlabel: 'bold',\n\t\ticon: 'bold',\n\t\tpattern: '**{{text}}**',\n\t\tcommand: 'b',\n\t\tcondition: () => Markdown && settings.get('Markdown_Parser') === 'marked',\n\t},\n\t{\n\t\tlabel: 'italic',\n\t\ticon: 'italic',\n\t\tpattern: '_{{text}}_',\n\t\tcommand: 'i',\n\t\tcondition: () => Markdown && settings.get('Markdown_Parser') !== 'disabled',\n\t},\n\t{\n\t\tlabel: 'strike',\n\t\ticon: 'strike',\n\t\tpattern: '~{{text}}~',\n\t\tcondition: () => Markdown && settings.get('Markdown_Parser') === 'original',\n\t},\n\t{\n\t\tlabel: 'strike',\n\t\ticon: 'strike',\n\t\tpattern: '~~{{text}}~~',\n\t\tcondition: () => Markdown && settings.get('Markdown_Parser') === 'marked',\n\t},\n\t{\n\t\tlabel: 'inline_code',\n\t\ticon: 'code',\n\t\tpattern: '`{{text}}`',\n\t\tcondition: () => Markdown && settings.get('Markdown_Parser') !== 'disabled',\n\t},\n\t{\n\t\tlabel: 'multi_line',\n\t\ticon: 'multiline',\n\t\tpattern: '```\\n{{text}}\\n``` ',\n\t\tcondition: () => Markdown && settings.get('Markdown_Parser') !== 'disabled',\n\t},\n\t{\n\t\tlabel: 'KaTeX',\n\t\ttext: () => {\n\t\t\tif (!settings.get('Katex_Enabled')) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (settings.get('Katex_Dollar_Syntax')) {\n\t\t\t\treturn '$$KaTeX$$';\n\t\t\t}\n\t\t\tif (settings.get('Katex_Parenthesis_Syntax')) {\n\t\t\t\treturn '\\\\[KaTeX\\\\]';\n\t\t\t}\n\t\t},\n\t\tlink: 'https://khan.github.io/KaTeX/function-support.html',\n\t\tcondition: () => settings.get('Katex_Enabled'),\n\t},\n];\n\nexport function applyFormatting(pattern, input) {\n\tconst { selectionEnd = input.value.length, selectionStart = 0 } = input;\n\tconst initText = input.value.slice(0, selectionStart);\n\tconst selectedText = input.value.slice(selectionStart, selectionEnd);\n\tconst finalText = input.value.slice(selectionEnd, input.value.length);\n\n\tinput.focus();\n\n\tconst startPattern = pattern.substr(0, pattern.indexOf('{{text}}'));\n\tconst startPatternFound = [...startPattern].reverse().every((char, index) => input.value.substr(selectionStart - index - 1, 1) === char);\n\n\tif (startPatternFound) {\n\t\tconst endPattern = pattern.substr(pattern.indexOf('{{text}}') + '{{text}}'.length);\n\t\tconst endPatternFound = [...endPattern].every((char, index) => input.value.substr(selectionEnd + index, 1) === char);\n\n\t\tif (endPatternFound) {\n\t\t\tinput.selectionStart = selectionStart - startPattern.length;\n\t\t\tinput.selectionEnd = selectionEnd + endPattern.length;\n\n\t\t\tif (!document.execCommand || !document.execCommand('insertText', false, selectedText)) {\n\t\t\t\tinput.value = initText.substr(0, initText.length - startPattern.length) + selectedText + finalText.substr(endPattern.length);\n\t\t\t}\n\n\t\t\tinput.selectionStart = selectionStart - startPattern.length;\n\t\t\tinput.selectionEnd = input.selectionStart + selectedText.length;\n\t\t\t$(input).change();\n\t\t\treturn;\n\t\t}\n\t}\n\n\tif (!document.execCommand || !document.execCommand('insertText', false, pattern.replace('{{text}}', selectedText))) {\n\t\tinput.value = initText + pattern.replace('{{text}}', selectedText) + finalText;\n\t}\n\n\tinput.selectionStart = selectionStart + pattern.indexOf('{{text}}');\n\tinput.selectionEnd = input.selectionStart + selectedText.length;\n\t$(input).change();\n}\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\n\nimport { settings } from '../../../settings/client';\nimport { RoomManager, RoomHistoryManager } from '../../../ui-utils/client';\nimport { roomTypes } from '../../../utils/client';\nimport { hasAllPermission } from '../../../authorization/client';\nimport './messageBoxNotSubscribed.html';\nimport { call } from '../../../../client/lib/utils/call';\n\nTemplate.messageBoxNotSubscribed.helpers({\n\tcustomTemplate() {\n\t\treturn roomTypes.getNotSubscribedTpl(this.rid);\n\t},\n\tcanJoinRoom() {\n\t\treturn Meteor.userId() && roomTypes.verifyShowJoinLink(this.rid);\n\t},\n\troomName() {\n\t\tconst room = Session.get(`roomData${this.rid}`);\n\t\treturn roomTypes.getRoomName(room.t, room);\n\t},\n\tisJoinCodeRequired() {\n\t\tconst room = Session.get(`roomData${this.rid}`);\n\t\treturn room && room.joinCodeRequired;\n\t},\n\tisAnonymousReadAllowed() {\n\t\treturn Meteor.userId() == null && settings.get('Accounts_AllowAnonymousRead') === true;\n\t},\n\tisAnonymousWriteAllowed() {\n\t\treturn (\n\t\t\tMeteor.userId() == null &&\n\t\t\tsettings.get('Accounts_AllowAnonymousRead') === true &&\n\t\t\tsettings.get('Accounts_AllowAnonymousWrite') === true\n\t\t);\n\t},\n});\n\nTemplate.messageBoxNotSubscribed.events({\n\tasync 'click .js-join-code'(event) {\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\n\t\tconst joinCodeInput = Template.instance().find('[name=joinCode]');\n\t\tconst joinCode = joinCodeInput && joinCodeInput.value;\n\n\t\tawait call('joinRoom', this.rid, joinCode);\n\n\t\tif (hasAllPermission('preview-c-room') === false && RoomHistoryManager.getRoom(this.rid).loaded === 0) {\n\t\t\tRoomManager.getOpenedRoomByRid(this.rid).streamActive = false;\n\t\t\tRoomManager.getOpenedRoomByRid(this.rid).ready = false;\n\t\t\tRoomHistoryManager.getRoom(this.rid).loaded = null;\n\t\t\tRoomManager.computation.invalidate();\n\t\t}\n\t},\n\t'click .js-register'(event) {\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\n\t\tSession.set('forceLogin', true);\n\t},\n\tasync 'click .js-register-anonymous'(event) {\n\t\tevent.stopPropagation();\n\t\tevent.preventDefault();\n\n\t\tconst { token } = await call('registerUser', {});\n\t\tMeteor.loginWithToken(token);\n\t},\n});\n","import { Template } from 'meteor/templating';\n\nimport { roomTypes } from '../../../utils';\nimport './messageBoxReadOnly.html';\n\nTemplate.messageBoxReadOnly.helpers({\n\tcustomTemplate() {\n\t\treturn roomTypes.getReadOnlyTpl(this.rid);\n\t},\n});\n","import { Template } from 'meteor/templating';\nimport './messageBoxReplyPreview.html';\n\nTemplate.messageBoxReplyPreview.helpers({\n\tattachments() {\n\t\tconst { replyMessageData } = this;\n\t\treturn [{ text: replyMessageData.msg, author_name: replyMessageData.u.username }];\n\t},\n});\n\nTemplate.messageBoxReplyPreview.events({\n\t'click .cancel-reply'(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\n\t\tconst { mid } = event.currentTarget.dataset;\n\t\tconst $input = $(this.input);\n\n\t\tthis.input.focus();\n\t\tconst messages = $input.data('reply') || [];\n\t\tconst filtered = messages.filter(({ _id }) => _id !== mid);\n\n\t\t$input.data('reply', filtered).trigger('dataChange');\n\t},\n});\n","import { Template } from 'meteor/templating';\n\nimport { UserAction } from '../../../ui';\nimport { t } from '../../../utils/client';\nimport { getConfig } from '../../../../client/lib/utils/getConfig';\n\nimport './userActionIndicator.html';\n\nconst maxUsernames = parseInt(getConfig('max-usernames-typing') || '2');\n\nTemplate.userActionIndicator.helpers({\n\tdata() {\n\t\tconst roomAction = UserAction.get(this.tmid || this.rid) || {};\n\t\tif (!Object.keys(roomAction).length) {\n\t\t\treturn [];\n\t\t}\n\n\t\tconst activities = Object.entries(roomAction);\n\t\tconst userActions = activities\n\t\t\t.map(([key, _users]) => {\n\t\t\t\tconst users = Object.keys(_users);\n\t\t\t\tif (users.length === 0) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tend: false,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tconst action = key.split('-')[1];\n\t\t\t\tif (users.length === 1) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\taction,\n\t\t\t\t\t\tmulti: false,\n\t\t\t\t\t\tusers: users[0],\n\t\t\t\t\t\tend: false,\n\t\t\t\t\t};\n\t\t\t\t}\n\n\t\t\t\tlet last = users.pop();\n\t\t\t\tif (users.length >= maxUsernames) {\n\t\t\t\t\tlast = t('others');\n\t\t\t\t}\n\n\t\t\t\tconst usernames = [users.slice(0, maxUsernames - 1).join(', '), last];\n\t\t\t\treturn {\n\t\t\t\t\taction,\n\t\t\t\t\tmulti: true,\n\t\t\t\t\tusers: usernames.join(` ${t('and')} `),\n\t\t\t\t\tend: false,\n\t\t\t\t};\n\t\t\t})\n\t\t\t.filter((i) => i.action);\n\n\t\tif (!Object.keys(userActions).length) {\n\t\t\treturn [];\n\t\t}\n\n\t\t// insert end=true for the last item.\n\t\tuserActions[userActions.length - 1].end = true;\n\t\treturn userActions;\n\t},\n});\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\n\nexport const customMessagePopups = new ReactiveVar([]);\n\nconst nonReactiveGetFunc = () => Tracker.nonreactive(() => customMessagePopups.get());\n\nexport const addMessagePopup = (configGetter, name) => {\n\tcustomMessagePopups.set([\n\t\t...nonReactiveGetFunc(),\n\t\t{\n\t\t\tconfigGetter,\n\t\t\tname,\n\t\t},\n\t]);\n};\n\nexport const removeMessagePopup = (popupName) => {\n\tconst customMessagePopupsList = nonReactiveGetFunc();\n\tconst element = customMessagePopupsList.findIndex(({ name }) => name === popupName);\n\tif (element < 0) {\n\t\treturn;\n\t}\n\tconst listWithRemovedElement = [\n\t\t...customMessagePopupsList.slice(0, element),\n\t\t...customMessagePopupsList.slice(element + 1, customMessagePopupsList.length),\n\t];\n\tcustomMessagePopups.set([...listWithRemovedElement]);\n};\n","// This is not supposed to be a complete list\n// it is just to improve readability in this file\n\nimport _ from 'underscore';\nimport { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nimport './messagePopup.html';\n\nconst keys = {\n\tTAB: 9,\n\tENTER: 13,\n\tESC: 27,\n\tARROW_LEFT: 37,\n\tARROW_UP: 38,\n\tARROW_RIGHT: 39,\n\tARROW_DOWN: 40,\n};\n\nfunction getCursorPosition(input) {\n\tif (input == null) {\n\t\treturn;\n\t}\n\tif (input.selectionStart != null) {\n\t\treturn input.selectionStart;\n\t}\n\tif (document.selection != null) {\n\t\tinput.focus();\n\t\tconst sel = document.selection.createRange();\n\t\tconst selLen = document.selection.createRange().text.length;\n\t\tsel.moveStart('character', -input.value.length);\n\t\treturn sel.text.length - selLen;\n\t}\n}\n\nfunction setCursorPosition(input, caretPos) {\n\tif (input == null) {\n\t\treturn;\n\t}\n\tif (input.selectionStart != null) {\n\t\tinput.focus();\n\t\treturn input.setSelectionRange(caretPos, caretPos);\n\t}\n\tif (document.selection != null) {\n\t\tconst range = input.createTextRange();\n\t\trange.move('character', caretPos);\n\t\treturn range.select();\n\t}\n}\n\nfunction val(v, d) {\n\tif (v != null) {\n\t\treturn v;\n\t}\n\treturn d;\n}\n\nTemplate.messagePopup.onCreated(function () {\n\tconst template = this;\n\ttemplate.textFilter = new ReactiveVar('');\n\ttemplate.textFilterDelay = val(template.data.textFilterDelay, 0);\n\ttemplate.open = val(template.data.open, new ReactiveVar(false));\n\ttemplate.hasData = new ReactiveVar(false);\n\ttemplate.value = new ReactiveVar();\n\ttemplate.trigger = val(template.data.trigger, '');\n\ttemplate.triggerAnywhere = val(template.data.triggerAnywhere, true);\n\ttemplate.closeOnEsc = val(template.data.closeOnEsc, true);\n\ttemplate.blurOnSelectItem = val(template.data.blurOnSelectItem, false);\n\ttemplate.prefix = val(template.data.prefix, template.trigger);\n\ttemplate.suffix = val(template.data.suffix, '');\n\tif (template.triggerAnywhere === true) {\n\t\ttemplate.matchSelectorRegex = val(template.data.matchSelectorRegex, new RegExp(`(?:^| |\\n)${template.trigger}[^\\\\s]*$`));\n\t} else {\n\t\ttemplate.matchSelectorRegex = val(template.data.matchSelectorRegex, new RegExp(`(?:^)${template.trigger}[^\\\\s]*$`));\n\t}\n\ttemplate.selectorRegex = val(template.data.selectorRegex, new RegExp(`${template.trigger}([^\\\\s]*)$`));\n\ttemplate.replaceRegex = val(template.data.replaceRegex, new RegExp(`${template.trigger}[^\\\\s]*$`));\n\ttemplate.getValue = val(template.data.getValue, function (_id) {\n\t\treturn _id;\n\t});\n\ttemplate.up = () => {\n\t\tconst current = template.find('.popup-item.selected');\n\t\tconst previous = $(current).prev('.popup-item')[0] || template.find('.popup-item:last-child');\n\t\tif (previous != null) {\n\t\t\tcurrent.className = current.className.replace(/\\sselected/, '').replace('sidebar-item__popup-active', '');\n\t\t\tprevious.className += ' selected sidebar-item__popup-active';\n\t\t\tprevious.scrollIntoView(false);\n\t\t\treturn template.value.set(previous.getAttribute('data-id'));\n\t\t}\n\t};\n\ttemplate.down = () => {\n\t\tconst current = template.find('.popup-item.selected');\n\t\tconst next = $(current).next('.popup-item')[0] || template.find('.popup-item');\n\t\tif (next && next.classList.contains('popup-item')) {\n\t\t\tcurrent.className = current.className.replace(/\\sselected/, '').replace('sidebar-item__popup-active', '');\n\t\t\tnext.className += ' selected sidebar-item__popup-active';\n\t\t\tnext.scrollIntoView(false);\n\t\t\treturn template.value.set(next.getAttribute('data-id'));\n\t\t}\n\t};\n\ttemplate.verifySelection = () => {\n\t\tif (!template.open.curValue) {\n\t\t\treturn;\n\t\t}\n\t\tconst current = template.find('.popup-item.selected');\n\t\tif (current == null) {\n\t\t\tconst first = template.find('.popup-item');\n\t\t\tif (first != null) {\n\t\t\t\tfirst.className += ' selected sidebar-item__popup-active';\n\t\t\t\treturn template.value.set(first.getAttribute('data-id'));\n\t\t\t}\n\t\t\treturn template.value.set(null);\n\t\t}\n\t};\n\ttemplate.onInputKeydown = (event) => {\n\t\tif (template.open.curValue !== true || template.hasData.curValue !== true) {\n\t\t\treturn;\n\t\t}\n\t\tif (event.which === keys.ENTER || event.which === keys.TAB) {\n\t\t\tif (template.blurOnSelectItem === true) {\n\t\t\t\ttemplate.input.blur();\n\t\t\t} else {\n\t\t\t\ttemplate.open.set(false);\n\t\t\t}\n\t\t\ttemplate.enterValue();\n\t\t\tif (template.data.cleanOnEnter) {\n\t\t\t\ttemplate.input.value = '';\n\t\t\t}\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\treturn;\n\t\t}\n\t\tif (event.which === keys.ARROW_UP) {\n\t\t\ttemplate.up();\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\treturn;\n\t\t}\n\t\tif (event.which === keys.ARROW_DOWN) {\n\t\t\ttemplate.down();\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t}\n\t};\n\n\ttemplate.setTextFilter = _.debounce(function (value) {\n\t\treturn template.textFilter.set(value);\n\t}, template.textFilterDelay);\n\n\ttemplate.onInputKeyup = (event) => {\n\t\tif (template.closeOnEsc === true && template.open.curValue === true && event.which === keys.ESC) {\n\t\t\ttemplate.open.set(false);\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\treturn;\n\t\t}\n\t\tconst value = template.input.value.substr(0, getCursorPosition(template.input));\n\n\t\tif (template.matchSelectorRegex.test(value)) {\n\t\t\ttemplate.setTextFilter(value.match(template.selectorRegex)[1]);\n\t\t\ttemplate.open.set(true);\n\t\t} else {\n\t\t\ttemplate.open.set(false);\n\t\t}\n\t\tif (template.open.curValue !== true) {\n\t\t\treturn;\n\t\t}\n\t\tif (event.which !== keys.ARROW_UP && event.which !== keys.ARROW_DOWN) {\n\t\t\treturn Meteor.defer(function () {\n\t\t\t\ttemplate.verifySelection();\n\t\t\t});\n\t\t}\n\t};\n\ttemplate.onFocus = () => {\n\t\ttemplate.clickingItem = false;\n\t\tif (template.open.curValue === true) {\n\t\t\treturn;\n\t\t}\n\t\tconst value = template.input.value.substr(0, getCursorPosition(template.input));\n\t\tif (template.matchSelectorRegex.test(value)) {\n\t\t\ttemplate.setTextFilter(value.match(template.selectorRegex)[1]);\n\t\t\ttemplate.open.set(true);\n\t\t\treturn Meteor.defer(function () {\n\t\t\t\treturn template.verifySelection();\n\t\t\t});\n\t\t}\n\t\treturn template.open.set(false);\n\t};\n\n\ttemplate.onBlur = () => {\n\t\tif (template.open.curValue === false) {\n\t\t\treturn;\n\t\t}\n\t\tif (template.clickingItem === true) {\n\t\t\treturn;\n\t\t}\n\t\treturn template.open.set(false);\n\t};\n\n\ttemplate.enterValue = function () {\n\t\tif (template.value.curValue == null) {\n\t\t\treturn;\n\t\t}\n\t\tconst { value } = template.input;\n\t\tconst caret = getCursorPosition(template.input);\n\t\tlet firstPartValue = value.substr(0, caret);\n\t\tconst lastPartValue = value.substr(caret);\n\t\tconst getValue = this.getValue(template.value.curValue, template.data.collection, template.records.get(), firstPartValue);\n\t\tif (!getValue) {\n\t\t\treturn;\n\t\t}\n\t\tfirstPartValue = firstPartValue.replace(template.selectorRegex, template.prefix + getValue + template.suffix);\n\t\ttemplate.input.value = firstPartValue + lastPartValue;\n\t\treturn setCursorPosition(template.input, firstPartValue.length);\n\t};\n\ttemplate.records = new ReactiveVar([]);\n\ttemplate.autorun(function () {\n\t\tconst filter = template.textFilter.get();\n\t\tif (filter != null) {\n\t\t\tconst filterCallback = (result) => {\n\t\t\t\ttemplate.hasData.set(result && result.length > 0);\n\t\t\t\ttemplate.records.set(result);\n\t\t\t\treturn Meteor.defer(function () {\n\t\t\t\t\treturn template.verifySelection();\n\t\t\t\t});\n\t\t\t};\n\t\t\tconst result = template.data.getFilter(template.data.collection, filter, filterCallback);\n\t\t\tif (result != null) {\n\t\t\t\treturn filterCallback(result);\n\t\t\t}\n\t\t}\n\t});\n});\n\nTemplate.messagePopup.onRendered(function () {\n\tif (this.data.getInput != null) {\n\t\tthis.input = typeof this.data.getInput === 'function' && this.data.getInput();\n\t} else if (this.data.input) {\n\t\tthis.input = this.parentTemplate().find(this.data.input);\n\t}\n\tif (this.input == null) {\n\t\tconsole.error('Input not found for popup');\n\t}\n\tconst self = this;\n\tself.autorun(() => {\n\t\tconst open = self.open.get();\n\t\tif ($('.reply-preview').length) {\n\t\t\tif (open === true) {\n\t\t\t\t$('.reply-preview').addClass('reply-preview-with-popup');\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t$('#popup').addClass('popup-with-reply-preview');\n\t\t\t\t}, 50);\n\t\t\t}\n\t\t}\n\t\tif (open === false) {\n\t\t\t$('.reply-preview').removeClass('reply-preview-with-popup');\n\t\t\t$('#popup').removeClass('popup-with-reply-preview');\n\t\t}\n\t});\n\t$(this.input).on('keyup', this.onInputKeyup.bind(this));\n\t$(this.input).on('keydown', this.onInputKeydown.bind(this));\n\t$(this.input).on('focus', this.onFocus.bind(this));\n\t$(this.input).on('blur', this.onBlur.bind(this));\n});\n\nTemplate.messagePopup.onDestroyed(function () {\n\t$(this.input).off('keyup', this.onInputKeyup);\n\t$(this.input).off('keydown', this.onInputKeydown);\n\t$(this.input).off('focus', this.onFocus);\n\t$(this.input).off('blur', this.onBlur);\n});\n\nTemplate.messagePopup.events({\n\t'mouseenter .popup-item'(e) {\n\t\tif (e.currentTarget.className.indexOf('selected') > -1) {\n\t\t\treturn;\n\t\t}\n\t\tconst template = Template.instance();\n\t\tconst current = template.find('.popup-item.selected');\n\t\tif (current != null) {\n\t\t\tcurrent.className = current.className.replace(/\\sselected/, '').replace('sidebar-item__popup-active', '');\n\t\t}\n\t\te.currentTarget.className += ' selected sidebar-item__popup-active';\n\t\treturn template.value.set(this._id);\n\t},\n\t'mousedown .popup-item, touchstart .popup-item'() {\n\t\tconst template = Template.instance();\n\t\ttemplate.clickingItem = true;\n\t},\n\t'mouseup .popup-item, touchend .popup-item'(e) {\n\t\te.stopPropagation();\n\t\tconst template = Template.instance();\n\t\tconst wasMenuIconClicked = e.target.classList.contains('sidebar-item__menu-icon');\n\t\ttemplate.clickingItem = false;\n\t\tif (!wasMenuIconClicked) {\n\t\t\ttemplate.value.set(this._id);\n\t\t\ttemplate.enterValue();\n\t\t\ttemplate.open.set(false);\n\t\t}\n\t},\n});\n\nTemplate.messagePopup.helpers({\n\tisOpen() {\n\t\treturn (\n\t\t\tTemplate.instance().open.get() &&\n\t\t\t(Template.instance().hasData.get() ||\n\t\t\t\tTemplate.instance().data.emptyTemplate != null ||\n\t\t\t\t!Template.instance().parentTemplate(1).subscriptionsReady())\n\t\t);\n\t},\n\tdata() {\n\t\tconst template = Template.instance();\n\t\treturn Object.assign(template.records.get(), { toolbar: true });\n\t},\n\ttoolbarData() {\n\t\treturn { ...Template.currentData(), toolbar: true };\n\t},\n\tsidebarHeaderHeight() {\n\t\treturn `${document.querySelector('.sidebar__header').offsetHeight}px`;\n\t},\n\tsidebarWidth() {\n\t\treturn `${document.querySelector('.sidebar').offsetWidth}px`;\n\t},\n});\n","import { Template } from 'meteor/templating';\n\nimport { roomTypes } from '../../../utils';\nimport './messagePopupChannel.html';\n\nTemplate.messagePopupChannel.helpers({\n\tchannelIcon() {\n\t\treturn roomTypes.getIcon(this);\n\t},\n});\n","import _ from 'underscore';\nimport { Blaze } from 'meteor/blaze';\nimport { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\nimport { Tracker } from 'meteor/tracker';\nimport { Session } from 'meteor/session';\nimport { Template } from 'meteor/templating';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\n\nimport { Messages, Subscriptions } from '../../../models/client';\nimport { settings } from '../../../settings/client';\nimport { hasAllPermission, hasAtLeastOnePermission } from '../../../authorization/client';\nimport { EmojiPicker, emoji } from '../../../emoji';\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\nimport { t, getUserPreference, slashCommands } from '../../../utils/client';\nimport { customMessagePopups } from './customMessagePopups';\nimport './messagePopupConfig.html';\nimport './messagePopupSlashCommand.html';\nimport './messagePopupUser.html';\n\nconst reloadUsersFromRoomMessages = (rid, template) => {\n\tconst user = Meteor.userId() && Meteor.users.findOne(Meteor.userId(), { fields: { username: 1 } });\n\tif (!rid || !user) {\n\t\treturn;\n\t}\n\n\ttemplate.usersFromRoomMessages.remove({});\n\n\tconst uniqueMessageUsersControl = {};\n\n\tMessages.find(\n\t\t{\n\t\t\trid,\n\t\t\t'u.username': { $ne: user.username },\n\t\t\t't': { $exists: false },\n\t\t},\n\t\t{\n\t\t\tfields: {\n\t\t\t\t'u.username': 1,\n\t\t\t\t'u.name': 1,\n\t\t\t\t'ts': 1,\n\t\t\t},\n\t\t\tsort: { ts: -1 },\n\t\t},\n\t)\n\t\t.fetch()\n\t\t.filter(({ u: { username } }) => {\n\t\t\tconst notMapped = !uniqueMessageUsersControl[username];\n\t\t\tuniqueMessageUsersControl[username] = true;\n\t\t\treturn notMapped;\n\t\t})\n\t\t.forEach(({ u: { username, name }, ts }) =>\n\t\t\ttemplate.usersFromRoomMessages.upsert(username, {\n\t\t\t\t_id: username,\n\t\t\t\tusername,\n\t\t\t\tname,\n\t\t\t\tstatus: Tracker.nonreactive(() => Session.get(`user_${username}_status`) || 'offline'),\n\t\t\t\tts,\n\t\t\t}),\n\t\t);\n};\n\nconst fetchUsersFromServer = _.throttle(async (filterText, records, rid, cb) => {\n\tconst usernames = records.map(({ username }) => username);\n\n\tconst { users } = await callWithErrorHandling('spotlight', filterText, usernames, { users: true, mentions: true }, rid);\n\n\tif (!users || users.length <= 0) {\n\t\treturn;\n\t}\n\n\tusers\n\t\t// .slice(0, 5)\n\t\t.forEach(({ username, nickname, name, status, avatarETag, outside }) => {\n\t\t\t// if (records.length < 5) {\n\t\t\trecords.push({\n\t\t\t\t_id: username,\n\t\t\t\tusername,\n\t\t\t\tnickname,\n\t\t\t\tname,\n\t\t\t\tstatus,\n\t\t\t\tavatarETag,\n\t\t\t\toutside,\n\t\t\t\tsort: 3,\n\t\t\t});\n\t\t\t// }\n\t\t});\n\n\trecords.sort(({ sort: sortA }, { sort: sortB }) => sortA - sortB);\n\n\tcb && cb(records);\n}, 1000);\n\nconst fetchRoomsFromServer = _.throttle(async (filterText, records, rid, cb) => {\n\tif (!hasAllPermission('view-outside-room')) {\n\t\tcb && cb([]);\n\t\treturn;\n\t}\n\n\tconst { rooms } = await callWithErrorHandling('spotlight', filterText, null, { rooms: true, mentions: true }, rid);\n\n\tif (!rooms || rooms.length <= 0) {\n\t\treturn;\n\t}\n\n\trooms.slice(0, 5).forEach((room) => {\n\t\tif (records.length < 5) {\n\t\t\trecords.push(room);\n\t\t}\n\t});\n\n\tcb && cb(records);\n}, 1000);\n\nconst emojiSort = (recents) => (a, b) => {\n\tlet idA = a._id;\n\tlet idB = a._id;\n\n\tif (recents.includes(a._id)) {\n\t\tidA = recents.indexOf(a._id) + idA;\n\t}\n\tif (recents.includes(b._id)) {\n\t\tidB = recents.indexOf(b._id) + idB;\n\t}\n\n\tif (idA < idB) {\n\t\treturn -1;\n\t}\n\n\tif (idA > idB) {\n\t\treturn 1;\n\t}\n\n\treturn 0;\n};\nconst exactFinalTone = new RegExp('^tone[1-5]:*$');\nconst colorBlind = new RegExp('tone[1-5]:*$');\nconst seeColor = new RegExp('_t(?:o|$)(?:n|$)(?:e|$)(?:[1-5]|$)(?::|$)$');\nconst getEmojis = (collection, filter) => {\n\tconst key = `:${filter}`;\n\n\tif (!getUserPreference(Meteor.userId(), 'useEmojis')) {\n\t\treturn [];\n\t}\n\n\tif (!emoji.packages.emojione || emoji.packages.emojione.asciiList[key]) {\n\t\treturn [];\n\t}\n\n\tconst regExp = new RegExp(escapeRegExp(filter), 'i');\n\tconst recents = EmojiPicker.getRecent().map((item) => `:${item}:`);\n\n\treturn Object.keys(collection)\n\t\t.map((_id) => {\n\t\t\tconst data = collection[key];\n\t\t\treturn { _id, data };\n\t\t})\n\t\t.filter(\n\t\t\t({ _id }) => regExp.test(_id) && (exactFinalTone.test(_id.substring(key.length)) || seeColor.test(key) || !colorBlind.test(_id)),\n\t\t)\n\t\t.sort(emojiSort(recents))\n\t\t.slice(0, 10);\n};\n\nconst addEmojiToRecents = (emoji) => {\n\tconst pickerEl = document.querySelector('.emoji-picker');\n\tif (!pickerEl) {\n\t\treturn;\n\t}\n\n\tconst view = Blaze.getView(pickerEl);\n\tif (!view) {\n\t\treturn;\n\t}\n\n\tTemplate._withTemplateInstanceFunc(view.templateInstance, () => {\n\t\tEmojiPicker.addRecent(emoji.replace(/:/g, ''));\n\t});\n};\n\nTemplate.messagePopupConfig.onCreated(function () {\n\tthis.usersFromRoomMessages = new Mongo.Collection(null);\n\n\tthis.autorun(() => {\n\t\tconst { rid } = this.data;\n\t\treloadUsersFromRoomMessages(rid, this);\n\t});\n});\n\nTemplate.messagePopupConfig.helpers({\n\tcustomMessagePopups() {\n\t\treturn customMessagePopups.get();\n\t},\n\n\tgetCustomConfig() {\n\t\tconst template = Template.instance();\n\t\treturn this.configGetter(template);\n\t},\n\n\tpopupUserConfig() {\n\t\tconst template = Template.instance();\n\t\tconst suggestionsCount = settings.get('Number_of_users_autocomplete_suggestions');\n\n\t\treturn {\n\t\t\ttitle: t('People'),\n\t\t\tcollection: template.usersFromRoomMessages,\n\t\t\ttemplate: 'messagePopupUser',\n\t\t\trid: this.rid,\n\t\t\tgetInput: this.getInput,\n\t\t\ttextFilterDelay: 500,\n\t\t\ttrigger: '@',\n\t\t\tsuffix: ' ',\n\t\t\tgetFilter: (collection, filter = '', cb) => {\n\t\t\t\tconst { rid } = this;\n\t\t\t\tconst filterText = filter.trim();\n\t\t\t\tconst filterRegex = filterText !== '' && new RegExp(`${escapeRegExp(filterText)}`, 'i');\n\n\t\t\t\tconst items = template.usersFromRoomMessages\n\t\t\t\t\t.find(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tts: { $exists: true },\n\t\t\t\t\t\t\t...(filterText && {\n\t\t\t\t\t\t\t\t$or: [{ username: filterRegex }, { name: filterRegex }],\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tlimit: filterText ? 2 : suggestionsCount,\n\t\t\t\t\t\t\tsort: { ts: -1 },\n\t\t\t\t\t\t},\n\t\t\t\t\t)\n\t\t\t\t\t.fetch()\n\t\t\t\t\t.map((u) => {\n\t\t\t\t\t\tu.suggestion = true;\n\t\t\t\t\t\treturn u;\n\t\t\t\t\t});\n\n\t\t\t\t// // If needed, add to list the online users\n\t\t\t\t// if (items.length < 5 && filterRegex) {\n\t\t\t\t// \tconst usernamesAlreadyFetched = items.map(({ username }) => username);\n\t\t\t\t// \tif (!hasAllPermission('view-outside-room')) {\n\t\t\t\t// \t\tconst usernamesFromDMs = Subscriptions\n\t\t\t\t// \t\t\t.find(\n\t\t\t\t// \t\t\t\t{\n\t\t\t\t// \t\t\t\t\tt: 'd',\n\t\t\t\t// \t\t\t\t\t$and: [\n\t\t\t\t// \t\t\t\t\t\t{\n\t\t\t\t// \t\t\t\t\t\t\t...filterRegex && {\n\t\t\t\t// \t\t\t\t\t\t\t\t$or: [\n\t\t\t\t// \t\t\t\t\t\t\t\t\t{ name: filterRegex },\n\t\t\t\t// \t\t\t\t\t\t\t\t\t{ fname: filterRegex },\n\t\t\t\t// \t\t\t\t\t\t\t\t],\n\t\t\t\t// \t\t\t\t\t\t\t},\n\t\t\t\t// \t\t\t\t\t\t},\n\t\t\t\t// \t\t\t\t\t\t{\n\t\t\t\t// \t\t\t\t\t\t\tname: { $nin: usernamesAlreadyFetched },\n\t\t\t\t// \t\t\t\t\t\t},\n\t\t\t\t// \t\t\t\t\t],\n\t\t\t\t// \t\t\t\t},\n\t\t\t\t// \t\t\t\t{\n\t\t\t\t// \t\t\t\t\tfields: { name: 1 },\n\t\t\t\t// \t\t\t\t},\n\t\t\t\t// \t\t\t)\n\t\t\t\t// \t\t\t.map(({ name }) => name);\n\t\t\t\t// \t\tconst newItems = Users\n\t\t\t\t// \t\t\t.find(\n\t\t\t\t// \t\t\t\t{\n\t\t\t\t// \t\t\t\t\tusername: {\n\t\t\t\t// \t\t\t\t\t\t$in: usernamesFromDMs,\n\t\t\t\t// \t\t\t\t\t},\n\t\t\t\t// \t\t\t\t},\n\t\t\t\t// \t\t\t\t{\n\t\t\t\t// \t\t\t\t\tfields: {\n\t\t\t\t// \t\t\t\t\t\tusername: 1,\n\t\t\t\t// \t\t\t\t\t\tnickname: 1,\n\t\t\t\t// \t\t\t\t\t\tname: 1,\n\t\t\t\t// \t\t\t\t\t\tstatus: 1,\n\t\t\t\t// \t\t\t\t\t},\n\t\t\t\t// \t\t\t\t\tlimit: 5 - usernamesAlreadyFetched.length,\n\t\t\t\t// \t\t\t\t},\n\t\t\t\t// \t\t\t)\n\t\t\t\t// \t\t\t.fetch()\n\t\t\t\t// \t\t\t.map(({ username, name, status, nickname }) => ({\n\t\t\t\t// \t\t\t\t_id: username,\n\t\t\t\t// \t\t\t\tusername,\n\t\t\t\t// \t\t\t\tnickname,\n\t\t\t\t// \t\t\t\tname,\n\t\t\t\t// \t\t\t\tstatus,\n\t\t\t\t// \t\t\t\tsort: 1,\n\t\t\t\t// \t\t\t}));\n\n\t\t\t\t// \t\titems.push(...newItems);\n\t\t\t\t// \t} else {\n\t\t\t\t// \t\tconst user = Meteor.users.findOne(Meteor.userId(), { fields: { username: 1 } });\n\t\t\t\t// \t\tconst newItems = Meteor.users.find({\n\t\t\t\t// \t\t\t$and: [\n\t\t\t\t// \t\t\t\t{\n\t\t\t\t// \t\t\t\t\t...filterRegex && {\n\t\t\t\t// \t\t\t\t\t\t$or: [\n\t\t\t\t// \t\t\t\t\t\t\t{ username: filterRegex },\n\t\t\t\t// \t\t\t\t\t\t\t{ name: filterRegex },\n\t\t\t\t// \t\t\t\t\t\t],\n\t\t\t\t// \t\t\t\t\t},\n\t\t\t\t// \t\t\t\t},\n\t\t\t\t// \t\t\t\t{\n\t\t\t\t// \t\t\t\t\tusername: {\n\t\t\t\t// \t\t\t\t\t\t$nin: [\n\t\t\t\t// \t\t\t\t\t\t\tuser && user.username,\n\t\t\t\t// \t\t\t\t\t\t\t...usernamesAlreadyFetched,\n\t\t\t\t// \t\t\t\t\t\t],\n\t\t\t\t// \t\t\t\t\t},\n\t\t\t\t// \t\t\t\t},\n\t\t\t\t// \t\t\t],\n\t\t\t\t// \t\t},\n\t\t\t\t// \t\t{\n\t\t\t\t// \t\t\tfields: {\n\t\t\t\t// \t\t\t\tusername: 1,\n\t\t\t\t// \t\t\t\tnickname: 1,\n\t\t\t\t// \t\t\t\tname: 1,\n\t\t\t\t// \t\t\t\tstatus: 1,\n\t\t\t\t// \t\t\t},\n\t\t\t\t// \t\t\tlimit: 5 - usernamesAlreadyFetched.length,\n\t\t\t\t// \t\t})\n\t\t\t\t// \t\t\t.fetch()\n\t\t\t\t// \t\t\t.map(({ username, name, status, nickname }) => ({\n\t\t\t\t// \t\t\t\t_id: username,\n\t\t\t\t// \t\t\t\tusername,\n\t\t\t\t// \t\t\t\tnickname,\n\t\t\t\t// \t\t\t\tname,\n\t\t\t\t// \t\t\t\tstatus,\n\t\t\t\t// \t\t\t\tsort: 1,\n\t\t\t\t// \t\t\t}));\n\n\t\t\t\t// \t\titems.push(...newItems);\n\t\t\t\t// \t}\n\t\t\t\t// }\n\n\t\t\t\t// Get users from Server\n\t\t\t\tif (items.length < suggestionsCount && filterText !== '') {\n\t\t\t\t\tfetchUsersFromServer(filterText, items, rid, cb);\n\t\t\t\t}\n\n\t\t\t\tif (!filterRegex || filterRegex.test('all')) {\n\t\t\t\t\titems.push({\n\t\t\t\t\t\t_id: 'all',\n\t\t\t\t\t\tusername: 'all',\n\t\t\t\t\t\tsystem: true,\n\t\t\t\t\t\tname: t('Notify_all_in_this_room'),\n\t\t\t\t\t\tsort: 4,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif (!filterRegex || filterRegex.test('here')) {\n\t\t\t\t\titems.push({\n\t\t\t\t\t\t_id: 'here',\n\t\t\t\t\t\tusername: 'here',\n\t\t\t\t\t\tsystem: true,\n\t\t\t\t\t\tname: t('Notify_active_in_this_room'),\n\t\t\t\t\t\tsort: 4,\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\treturn items;\n\t\t\t},\n\t\t\tgetValue: (_id) => _id,\n\t\t};\n\t},\n\tpopupChannelConfig() {\n\t\treturn {\n\t\t\ttitle: t('Channels'),\n\t\t\tcollection: Subscriptions,\n\t\t\ttrigger: '#',\n\t\t\tsuffix: ' ',\n\t\t\ttextFilterDelay: 500,\n\t\t\ttemplate: 'messagePopupChannel',\n\t\t\trid: this.rid,\n\t\t\tgetInput: this.getInput,\n\t\t\tgetFilter: (collection, filter, cb) => {\n\t\t\t\tconst { rid } = this;\n\t\t\t\tconst exp = new RegExp(filter, 'i');\n\t\t\t\tconst records = collection\n\t\t\t\t\t.find(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: exp,\n\t\t\t\t\t\t\tt: {\n\t\t\t\t\t\t\t\t$in: ['c', 'p'],\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\treactive: 1,\n\t\t\t\t\t\t\tlimit: 5,\n\t\t\t\t\t\t\tsort: {\n\t\t\t\t\t\t\t\tls: -1,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t)\n\t\t\t\t\t.fetch();\n\n\t\t\t\tif (records.length < 5 && filter && filter.trim() !== '') {\n\t\t\t\t\tfetchRoomsFromServer(filter, records, rid, cb);\n\t\t\t\t}\n\t\t\t\treturn records;\n\t\t\t},\n\t\t\tgetValue: (_id, collection, records) => {\n\t\t\t\tconst record = _.findWhere(records, {\n\t\t\t\t\t_id,\n\t\t\t\t});\n\t\t\t\treturn record && record.name;\n\t\t\t},\n\t\t};\n\t},\n\tpopupSlashCommandsConfig() {\n\t\treturn {\n\t\t\ttitle: t('Commands'),\n\t\t\tcollection: slashCommands.commands,\n\t\t\ttrigger: '/',\n\t\t\tsuffix: ' ',\n\t\t\ttriggerAnywhere: false,\n\t\t\ttemplate: 'messagePopupSlashCommand',\n\t\t\trid: this.rid,\n\t\t\tgetInput: this.getInput,\n\t\t\tgetFilter: (collection, filter) => {\n\t\t\t\tconst { rid } = this;\n\t\t\t\treturn Object.keys(collection)\n\t\t\t\t\t.map((command) => {\n\t\t\t\t\t\tconst item = collection[command];\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t_id: command,\n\t\t\t\t\t\t\tparams: item.params ? TAPi18n.__(item.params) : '',\n\t\t\t\t\t\t\tdescription: TAPi18n.__(item.description),\n\t\t\t\t\t\t\tpermission: item.permission,\n\t\t\t\t\t\t};\n\t\t\t\t\t})\n\t\t\t\t\t.filter((command) => {\n\t\t\t\t\t\tconst isMatch = command._id.indexOf(filter) > -1;\n\n\t\t\t\t\t\tif (!isMatch) {\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (!command.permission) {\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn hasAtLeastOnePermission(command.permission, rid);\n\t\t\t\t\t})\n\t\t\t\t\t.sort((a, b) => a._id > b._id)\n\t\t\t\t\t.slice(0, 11);\n\t\t\t},\n\t\t};\n\t},\n\tpopupEmojiConfig() {\n\t\treturn {\n\t\t\ttitle: t('Emoji'),\n\t\t\tcollection: emoji.list,\n\t\t\ttemplate: 'messagePopupEmoji',\n\t\t\ttrigger: ':',\n\t\t\tprefix: '',\n\t\t\tsuffix: ' ',\n\t\t\trid: this.rid,\n\t\t\tgetInput: this.getInput,\n\t\t\tgetFilter: getEmojis,\n\t\t\tgetValue: (emojiText) => {\n\t\t\t\taddEmojiToRecents(emojiText);\n\t\t\t\treturn emojiText;\n\t\t\t},\n\t\t};\n\t},\n\tpopupReactionEmojiConfig() {\n\t\treturn {\n\t\t\ttitle: t('Emoji'),\n\t\t\tcollection: emoji.list,\n\t\t\ttemplate: 'messagePopupEmoji',\n\t\t\ttrigger: '\\\\+:',\n\t\t\tprefix: '+',\n\t\t\tsuffix: ' ',\n\t\t\trid: this.rid,\n\t\t\tgetInput: this.getInput,\n\t\t\tgetFilter: getEmojis,\n\t\t\tgetValue: (emojiText) => {\n\t\t\t\taddEmojiToRecents(emojiText);\n\t\t\t\treturn emojiText;\n\t\t\t},\n\t\t};\n\t},\n});\n","import { Template } from 'meteor/templating';\nimport './messagePopupEmoji.html';\n\nTemplate.messagePopupEmoji.helpers({\n\tvalue() {\n\t\tconst { length } = this.data;\n\t\treturn this.data[length - 1];\n\t},\n});\n","import _ from 'underscore';\nimport { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nimport { slashCommands } from '../../../utils';\nimport { hasAtLeastOnePermission } from '../../../authorization';\nimport './messagePopupSlashCommandPreview.html';\n\nconst keys = {\n\tTAB: 9,\n\tENTER: 13,\n\tESC: 27,\n\tARROW_LEFT: 37,\n\tARROW_UP: 38,\n\tARROW_RIGHT: 39,\n\tARROW_DOWN: 40,\n};\n\nfunction getCursorPosition(input) {\n\tif (!input) {\n\t\treturn;\n\t}\n\n\tif (input.selectionStart) {\n\t\treturn input.selectionStart;\n\t}\n\tif (document.selection) {\n\t\tinput.focus();\n\t\tconst sel = document.selection.createRange();\n\t\tconst selLen = document.selection.createRange().text.length;\n\t\tsel.moveStart('character', -input.value.length);\n\t\treturn sel.text.length - selLen;\n\t}\n}\n\nTemplate.messagePopupSlashCommandPreview.onCreated(function () {\n\tthis.open = new ReactiveVar(false);\n\tthis.isLoading = new ReactiveVar(true);\n\tthis.preview = new ReactiveVar();\n\tthis.selectedItem = new ReactiveVar();\n\tthis.commandName = new ReactiveVar('');\n\tthis.commandArgs = new ReactiveVar('');\n\n\t// regex ensures a command is entered into the input\n\t// such as \"/testing \" before continuing\n\tthis.matchSelectorRegex = /(?:^)(\\/[\\w\\d\\S]+ )[^]*$/;\n\tthis.selectorRegex = /(\\/[\\w\\d\\S]+ )([^]*)$/;\n\tthis.replaceRegex = /(\\/[\\w\\d\\S]+ )[^]*$/; // WHAT'S THIS\n\n\tthis.dragging = false;\n\n\tconst template = this;\n\ttemplate.fetchPreviews = _.debounce(function _previewFetcher(cmd, args) {\n\t\tconst command = cmd;\n\t\tconst params = args;\n\t\tconst { rid, tmid } = template.data;\n\t\tMeteor.call('getSlashCommandPreviews', { cmd, params, msg: { rid, tmid } }, function (err, preview) {\n\t\t\tif (err) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (!preview || !Array.isArray(preview.items)) {\n\t\t\t\ttemplate.preview.set({\n\t\t\t\t\ti18nTitle: 'No_results_found_for',\n\t\t\t\t\titems: [],\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\ttemplate.preview.set(preview);\n\t\t\t}\n\n\t\t\ttemplate.commandName.set(command);\n\t\t\ttemplate.commandArgs.set(params);\n\t\t\ttemplate.isLoading.set(false);\n\n\t\t\tMeteor.defer(function () {\n\t\t\t\ttemplate.verifySelection();\n\t\t\t});\n\t\t});\n\t}, 500);\n\n\ttemplate.enterKeyAction = () => {\n\t\tconst current = template.find('.popup-item.selected');\n\n\t\tif (!current) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst selectedId = current.getAttribute('data-id');\n\n\t\tif (!selectedId) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst cmd = template.commandName.curValue;\n\t\tconst params = template.commandArgs.curValue;\n\n\t\tif (!cmd || !params) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst item = template.preview.curValue.items.find((i) => i.id === selectedId);\n\n\t\tif (!item) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst { rid, tmid } = template.data;\n\t\tMeteor.call('executeSlashCommandPreview', { cmd, params, msg: { rid, tmid } }, item, function (err) {\n\t\t\tif (err) {\n\t\t\t\tconsole.warn(err);\n\t\t\t}\n\t\t});\n\n\t\ttemplate.open.set(false);\n\t\ttemplate.inputBox.value = '';\n\t\ttemplate.preview.set();\n\t\ttemplate.commandName.set('');\n\t\ttemplate.commandArgs.set('');\n\t};\n\n\ttemplate.selectionLogic = () => {\n\t\tconst inputValueAtCursor = template.inputBox.value.substr(0, getCursorPosition(template.inputBox));\n\n\t\tif (!template.matchSelectorRegex.test(inputValueAtCursor)) {\n\t\t\ttemplate.open.set(false);\n\t\t\treturn;\n\t\t}\n\n\t\tconst matches = inputValueAtCursor.match(template.selectorRegex);\n\t\tconst cmd = matches[1].replace('/', '').trim().toLowerCase();\n\t\tconst command = slashCommands.commands[cmd];\n\n\t\t// Ensure the command they're typing actually exists\n\t\t// And it provides a command preview\n\t\t// And if it provides a permission to check, they have permission to run the command\n\t\tconst { rid } = template.data;\n\t\tif (!command || !command.providesPreview || (command.permission && !hasAtLeastOnePermission(command.permission, rid))) {\n\t\t\ttemplate.open.set(false);\n\t\t\treturn;\n\t\t}\n\n\t\tconst args = matches[2];\n\n\t\t// Check to verify there are no additional arguments passed,\n\t\t// Because we we don't care about what it if there isn't\n\t\tif (!args) {\n\t\t\ttemplate.open.set(false);\n\t\t\treturn;\n\t\t}\n\n\t\t// If they haven't changed a thing, show what we already got\n\t\tif (template.commandName.curValue === cmd && template.commandArgs.curValue === args && template.preview.curValue) {\n\t\t\ttemplate.isLoading.set(false);\n\t\t\ttemplate.open.set(true);\n\t\t\treturn;\n\t\t}\n\n\t\ttemplate.isLoading.set(true);\n\t\ttemplate.open.set(true);\n\n\t\t// Fetch and display them\n\t\ttemplate.fetchPreviews(cmd, args);\n\t};\n\n\ttemplate.verifySelection = () => {\n\t\tconst current = template.find('.popup-item.selected');\n\n\t\tif (!current) {\n\t\t\tconst first = template.find('.popup-item');\n\n\t\t\tif (first) {\n\t\t\t\tfirst.className += ' selected sidebar-item__popup-active';\n\t\t\t}\n\t\t}\n\t};\n\n\t// Typing data\n\ttemplate.onInputKeyup = (event) => {\n\t\tif (template.open.curValue === true && event.which === keys.ESC) {\n\t\t\ttemplate.open.set(false);\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.which === keys.ARROW_UP || event.which === keys.ARROW_DOWN) {\n\t\t\t// Arrow up and down are for navigating the choices\n\t\t\treturn;\n\t\t}\n\n\t\ttemplate.selectionLogic();\n\t};\n\n\t// Using the keyboard to navigate the options\n\ttemplate.onInputKeydown = (event) => {\n\t\tif (!template.open.curValue || template.isLoading.curValue) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.which === keys.ENTER) {\n\t\t\t// || event.which === keys.TAB) { <-- does using tab to select make sense?\n\t\t\ttemplate.enterKeyAction();\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.which === keys.ARROW_UP) {\n\t\t\ttemplate.up();\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t\treturn;\n\t\t}\n\n\t\tif (event.which === keys.ARROW_DOWN) {\n\t\t\ttemplate.down();\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\t\t}\n\t};\n\n\ttemplate.up = () => {\n\t\tconst current = template.find('.popup-item.selected');\n\t\tconst previous = $(current).prev('.popup-item')[0] || template.find('.popup-item:last-child');\n\n\t\tif (previous != null) {\n\t\t\tcurrent.className = current.className.replace(/\\sselected/, '').replace('sidebar-item__popup-active', '');\n\t\t\tprevious.className += ' selected sidebar-item__popup-active';\n\t\t}\n\t};\n\n\ttemplate.down = () => {\n\t\tconst current = template.find('.popup-item.selected');\n\t\tconst next = $(current).next('.popup-item')[0] || template.find('.popup-item');\n\n\t\tif (next && next.classList.contains('popup-item')) {\n\t\t\tcurrent.className = current.className.replace(/\\sselected/, '').replace('sidebar-item__popup-active', '');\n\t\t\tnext.className += ' selected sidebar-item__popup-active';\n\t\t}\n\t};\n\n\ttemplate.onFocus = () => {\n\t\ttemplate.clickingItem = false;\n\t\tif (template.open.curValue) {\n\t\t\treturn;\n\t\t}\n\n\t\ttemplate.selectionLogic();\n\t};\n\n\ttemplate.onBlur = () => {\n\t\tif (template.clickingItem) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn template.open.set(false);\n\t};\n});\n\nTemplate.messagePopupSlashCommandPreview.onRendered(function _messagePopupSlashCommandPreviewRendered() {\n\tif (!this.data.getInput) {\n\t\tthrow Error('Somethign wrong happened.');\n\t}\n\n\tthis.inputBox = this.data.getInput();\n\t$(this.inputBox).on('keyup', this.onInputKeyup.bind(this));\n\t$(this.inputBox).on('keydown', this.onInputKeydown.bind(this));\n\t$(this.inputBox).on('focus', this.onFocus.bind(this));\n\t$(this.inputBox).on('blur', this.onBlur.bind(this));\n\n\tconst self = this;\n\tself.autorun(() => {\n\t\tsetTimeout(self.selectionLogic, 500);\n\t});\n});\n\nTemplate.messagePopupSlashCommandPreview.onDestroyed(function () {\n\t$(this.inputBox).off('keyup', this.onInputKeyup);\n\t$(this.inputBox).off('keydown', this.onInputKeydown);\n\t$(this.inputBox).off('focus', this.onFocus);\n\t$(this.inputBox).off('blur', this.onBlur);\n});\n\nTemplate.messagePopupSlashCommandPreview.events({\n\t'mouseenter .popup-item, mousedown .popup-item, touchstart .popup-item'(e) {\n\t\tif (e.currentTarget.className.includes('selected')) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst template = Template.instance();\n\t\tconst current = template.find('.popup-item.selected');\n\t\tif (current) {\n\t\t\tcurrent.className = current.className.replace(/\\sselected/, '').replace('sidebar-item__popup-active', '');\n\t\t}\n\n\t\te.currentTarget.className += ' selected sidebar-item__popup-active';\n\t},\n\t'mousedown .popup-item, touchstart .popup-item'() {\n\t\tconst template = Template.instance();\n\t\ttemplate.clickingItem = true;\n\t},\n\t'mouseup .popup-item, touchend .popup-item'() {\n\t\tconst template = Template.instance();\n\t\tif (template.dragging) {\n\t\t\ttemplate.dragging = false;\n\t\t\treturn;\n\t\t}\n\n\t\ttemplate.clickingItem = false;\n\t\ttemplate.enterKeyAction();\n\t},\n\t'touchmove .popup-item'(e) {\n\t\te.stopPropagation();\n\t\tconst template = Template.instance();\n\t\ttemplate.dragging = true;\n\t},\n});\n\nTemplate.messagePopupSlashCommandPreview.helpers({\n\tisOpen() {\n\t\treturn Template.instance().open.get(); // && ((Template.instance().hasData.get() || (Template.instance().data.emptyTemplate != null)) || !Template.instance().parentTemplate(1).subscriptionsReady());\n\t},\n\tgetArgs() {\n\t\treturn Template.instance().commandArgs.get();\n\t},\n\tisLoading() {\n\t\treturn Template.instance().isLoading.get();\n\t},\n\tisType(actual, expected) {\n\t\treturn actual === expected;\n\t},\n\tpreview() {\n\t\treturn Template.instance().preview.get();\n\t},\n});\n","/* Style disabled as having some arrow functions in one-line hurts readability */\n/* eslint-disable arrow-body-style */\n\nimport { Meteor } from 'meteor/meteor';\nimport { IUIActionButton, RoomTypeFilter } from '@rocket.chat/apps-engine/definition/ui';\n\nimport { hasAtLeastOnePermission, hasPermission, hasRole } from '../../../../authorization/client';\nimport {\n\tIRoom,\n\tisDirectMessageRoom,\n\tisMultipleDirectMessageRoom,\n\tisOmnichannelRoom,\n\tisPrivateDiscussion,\n\tisPrivateTeamRoom,\n\tisPublicDiscussion,\n\tisPublicTeamRoom,\n} from '../../../../../definition/IRoom';\n\nexport const applyAuthFilter = (button: IUIActionButton, room?: IRoom): boolean => {\n\tconst { hasAllPermissions, hasOnePermission, hasAllRoles, hasOneRole } = button.when || {};\n\n\tconst hasAllPermissionsResult = hasAllPermissions ? hasPermission(hasAllPermissions) : true;\n\tconst hasOnePermissionResult = hasOnePermission ? hasAtLeastOnePermission(hasOnePermission) : true;\n\tconst hasAllRolesResult = hasAllRoles ? hasAllRoles.every((role) => hasRole(Meteor.userId(), role, room?._id)) : true;\n\tconst hasOneRoleResult = hasOneRole ? hasRole(Meteor.userId(), hasOneRole, room?._id) : true;\n\n\treturn hasAllPermissionsResult && hasOnePermissionResult && hasAllRolesResult && hasOneRoleResult;\n};\n\nconst enumToFilter: { [k in RoomTypeFilter]: (room: IRoom) => boolean } = {\n\t[RoomTypeFilter.PUBLIC_CHANNEL]: (room) => room.t === 'c',\n\t[RoomTypeFilter.PRIVATE_CHANNEL]: (room) => room.t === 'p',\n\t[RoomTypeFilter.PUBLIC_TEAM]: isPublicTeamRoom,\n\t[RoomTypeFilter.PRIVATE_TEAM]: isPrivateTeamRoom,\n\t[RoomTypeFilter.PUBLIC_DISCUSSION]: isPublicDiscussion,\n\t[RoomTypeFilter.PRIVATE_DISCUSSION]: isPrivateDiscussion,\n\t[RoomTypeFilter.DIRECT]: isDirectMessageRoom,\n\t[RoomTypeFilter.DIRECT_MULTIPLE]: isMultipleDirectMessageRoom,\n\t[RoomTypeFilter.LIVE_CHAT]: isOmnichannelRoom,\n};\n\nexport const applyRoomFilter = (button: IUIActionButton, room: IRoom): boolean => {\n\tconst { roomTypes } = button.when || {};\n\treturn !roomTypes || roomTypes.some((filter): boolean => enumToFilter[filter]?.(room));\n};\n\nexport const applyButtonFilters = (button: IUIActionButton, room?: IRoom): boolean => {\n\treturn applyAuthFilter(button, room) && (!room || applyRoomFilter(button, room));\n};\n","import { IUIActionButton } from '@rocket.chat/apps-engine/definition/ui';\n\nimport { Utilities } from '../../../apps/lib/misc/Utilities';\nimport { MessageAction, messageArgs } from '../../../ui-utils/client';\nimport { t } from '../../../utils/client';\nimport { triggerActionButtonAction } from '../ActionManager';\nimport { applyButtonFilters } from './lib/applyButtonFilters';\n\nconst getIdForActionButton = ({ appId, actionId }: IUIActionButton): string => `${appId}/${actionId}`;\n\nexport const onAdded = (button: IUIActionButton): void =>\n\t// eslint-disable-next-line no-void\n\tvoid MessageAction.addButton({\n\t\tid: getIdForActionButton(button),\n\t\t// icon: button.icon || '',\n\t\tlabel: t(Utilities.getI18nKeyForApp(button.labelI18n, button.appId)),\n\t\tcontext: button.when?.messageActionContext || ['message', 'message-mobile', 'threads', 'starred'],\n\t\tcondition({ room }: any) {\n\t\t\treturn applyButtonFilters(button, room);\n\t\t},\n\t\tasync action() {\n\t\t\tconst { msg } = messageArgs(this);\n\t\t\ttriggerActionButtonAction({\n\t\t\t\trid: msg.rid,\n\t\t\t\tmid: msg._id,\n\t\t\t\tactionId: button.actionId,\n\t\t\t\tappId: button.appId,\n\t\t\t\tpayload: { context: button.context },\n\t\t\t});\n\t\t},\n\t});\n\nexport const onRemoved = (button: IUIActionButton): void => MessageAction.removeButton(getIdForActionButton(button));\n","import { Session } from 'meteor/session';\nimport { IUIActionButton } from '@rocket.chat/apps-engine/definition/ui';\n\nimport { Rooms } from '../../../models/client';\nimport { messageBox } from '../../../ui-utils/client';\nimport { applyButtonFilters } from './lib/applyButtonFilters';\nimport { triggerActionButtonAction } from '../ActionManager';\nimport { t } from '../../../utils/client';\nimport { Utilities } from '../../../apps/lib/misc/Utilities';\n\nconst getIdForActionButton = ({ appId, actionId }: IUIActionButton): string => `${appId}/${actionId}`;\n\nconst APP_GROUP = 'Create_new';\n\nexport const onAdded = (button: IUIActionButton): void =>\n\t// eslint-disable-next-line no-void\n\tvoid messageBox.actions.add(APP_GROUP, t(Utilities.getI18nKeyForApp(button.labelI18n, button.appId)), {\n\t\tid: getIdForActionButton(button),\n\t\t// icon: button.icon || '',\n\t\tcondition() {\n\t\t\treturn applyButtonFilters(button, Rooms.findOne(Session.get('openedRoom')));\n\t\t},\n\t\taction() {\n\t\t\ttriggerActionButtonAction({\n\t\t\t\trid: Session.get('openedRoom'),\n\t\t\t\tactionId: button.actionId,\n\t\t\t\tappId: button.appId,\n\t\t\t\tpayload: { context: button.context },\n\t\t\t});\n\t\t},\n\t});\n\nexport const onRemoved = (button: IUIActionButton): void =>\n\t// eslint-disable-next-line no-void\n\tvoid messageBox.actions.remove(APP_GROUP, new RegExp(getIdForActionButton(button)));\n","import { IUIActionButton } from '@rocket.chat/apps-engine/definition/ui';\n\nimport { addAction, deleteAction } from '../../../../client/views/room/lib/Toolbox';\nimport { Utilities } from '../../../apps/lib/misc/Utilities';\nimport { t } from '../../../utils/client';\nimport { triggerActionButtonAction } from '../ActionManager';\nimport { applyButtonFilters } from './lib/applyButtonFilters';\n\nconst getIdForActionButton = ({ appId, actionId }: IUIActionButton): string => `${appId}/${actionId}`;\n\nexport const onAdded = (button: IUIActionButton): void =>\n\t// eslint-disable-next-line no-void\n\tvoid addAction(getIdForActionButton(button), ({ room }) =>\n\t\tapplyButtonFilters(button, room)\n\t\t\t? {\n\t\t\t\t\tid: button.actionId,\n\t\t\t\t\ticon: '', // Apps won't provide icons for now\n\t\t\t\t\torder: 300, // Make sure the button only shows up inside the room toolbox\n\t\t\t\t\ttitle: t(Utilities.getI18nKeyForApp(button.labelI18n, button.appId)) as any,\n\t\t\t\t\t// Filters were applied in the applyButtonFilters function\n\t\t\t\t\t// if the code made it this far, the button should be shown\n\t\t\t\t\tgroups: ['group', 'channel', 'live', 'team', 'direct', 'direct_multiple'],\n\t\t\t\t\taction: (): Promise<any> =>\n\t\t\t\t\t\ttriggerActionButtonAction({\n\t\t\t\t\t\t\trid: room._id,\n\t\t\t\t\t\t\tactionId: button.actionId,\n\t\t\t\t\t\t\tappId: button.appId,\n\t\t\t\t\t\t\tpayload: { context: button.context },\n\t\t\t\t\t\t}),\n\t\t\t  }\n\t\t\t: null,\n\t);\n\nexport const onRemoved = (button: IUIActionButton): boolean => deleteAction(getIdForActionButton(button));\n","import { Meteor } from 'meteor/meteor';\nimport { IUIActionButton, UIActionButtonContext } from '@rocket.chat/apps-engine/definition/ui';\n\nimport { APIClient } from '../../utils/client';\nimport * as TabBar from './actionButtons/tabbar';\nimport * as MessageAction from './actionButtons/messageAction';\nimport * as MessageBox from './actionButtons/messageBox';\n\nlet registeredButtons: Array<IUIActionButton> = [];\n\nexport const addButton = (button: IUIActionButton): void => {\n\tswitch (button.context) {\n\t\tcase UIActionButtonContext.MESSAGE_ACTION:\n\t\t\tMessageAction.onAdded(button);\n\t\t\tbreak;\n\t\tcase UIActionButtonContext.ROOM_ACTION:\n\t\t\tTabBar.onAdded(button);\n\t\t\tbreak;\n\t\tcase UIActionButtonContext.MESSAGE_BOX_ACTION:\n\t\t\tMessageBox.onAdded(button);\n\t\t\tbreak;\n\t}\n\n\tregisteredButtons.push(Object.freeze(button));\n};\n\nexport const removeButton = (button: IUIActionButton): void => {\n\tswitch (button.context) {\n\t\tcase UIActionButtonContext.MESSAGE_ACTION:\n\t\t\tMessageAction.onRemoved(button);\n\t\t\tbreak;\n\t\tcase UIActionButtonContext.ROOM_ACTION:\n\t\t\tTabBar.onRemoved(button);\n\t\t\tbreak;\n\t\tcase UIActionButtonContext.MESSAGE_BOX_ACTION:\n\t\t\tMessageBox.onRemoved(button);\n\t\t\tbreak;\n\t}\n};\n\nexport const loadButtons = (): Promise<void> =>\n\tAPIClient.get('apps/actionButtons').then((value: Array<IUIActionButton>) => {\n\t\tregisteredButtons.forEach((button) => removeButton(button));\n\t\tregisteredButtons = [];\n\t\tvalue.map(addButton);\n\t});\n\nMeteor.startup(() => loadButtons());\n","import { UIKitIncomingInteractionType } from '@rocket.chat/apps-engine/definition/uikit';\nimport { Meteor } from 'meteor/meteor';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Random } from 'meteor/random';\nimport { Emitter } from '@rocket.chat/emitter';\n\nimport Notifications from '../../notifications/client/lib/Notifications';\nimport { CachedCollectionManager } from '../../ui-cached-collection';\nimport { modal } from '../../ui-utils/client/lib/modal';\nimport { APIClient } from '../../utils';\nimport { UIKitInteractionTypes } from '../../../definition/UIKit';\nimport * as banners from '../../../client/lib/banners';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\nimport { t } from '../../utils/client';\n\nconst events = new Emitter();\n\nexport const on = (...args) => {\n\tevents.on(...args);\n};\n\nexport const off = (...args) => {\n\tevents.off(...args);\n};\n\nconst TRIGGER_TIMEOUT = 5000;\n\nconst TRIGGER_TIMEOUT_ERROR = 'TRIGGER_TIMEOUT_ERROR';\n\nconst triggersId = new Map();\n\nconst instances = new Map();\n\nconst invalidateTriggerId = (id) => {\n\tconst appId = triggersId.get(id);\n\ttriggersId.delete(id);\n\treturn appId;\n};\n\nexport const generateTriggerId = (appId) => {\n\tconst triggerId = Random.id();\n\ttriggersId.set(triggerId, appId);\n\tsetTimeout(invalidateTriggerId, TRIGGER_TIMEOUT, triggerId);\n\treturn triggerId;\n};\n\nconst handlePayloadUserInteraction = (type, { /* appId,*/ triggerId, ...data }) => {\n\tif (!triggersId.has(triggerId)) {\n\t\treturn;\n\t}\n\tconst appId = invalidateTriggerId(triggerId);\n\tif (!appId) {\n\t\treturn;\n\t}\n\n\tconst { view } = data;\n\tlet { viewId } = data;\n\n\tif (view && view.id) {\n\t\tviewId = view.id;\n\t}\n\n\tif (!viewId) {\n\t\treturn;\n\t}\n\n\tif ([UIKitInteractionTypes.ERRORS].includes(type)) {\n\t\tevents.emit(viewId, {\n\t\t\ttype,\n\t\t\ttriggerId,\n\t\t\tviewId,\n\t\t\tappId,\n\t\t\t...data,\n\t\t});\n\t\treturn UIKitInteractionTypes.ERRORS;\n\t}\n\n\tif (\n\t\t[UIKitInteractionTypes.BANNER_UPDATE, UIKitInteractionTypes.MODAL_UPDATE, UIKitInteractionTypes.CONTEXTUAL_BAR_UPDATE].includes(type)\n\t) {\n\t\tevents.emit(viewId, {\n\t\t\ttype,\n\t\t\ttriggerId,\n\t\t\tviewId,\n\t\t\tappId,\n\t\t\t...data,\n\t\t});\n\t\treturn type;\n\t}\n\n\tif ([UIKitInteractionTypes.MODAL_OPEN].includes(type)) {\n\t\tconst instance = modal.push({\n\t\t\ttemplate: 'ModalBlock',\n\t\t\tmodifier: 'uikit',\n\t\t\tcloseOnEscape: false,\n\t\t\tdata: {\n\t\t\t\ttriggerId,\n\t\t\t\tviewId,\n\t\t\t\tappId,\n\t\t\t\t...data,\n\t\t\t},\n\t\t});\n\n\t\tinstances.set(viewId, {\n\t\t\tclose() {\n\t\t\t\tinstance.close();\n\t\t\t\tinstances.delete(viewId);\n\t\t\t},\n\t\t});\n\n\t\treturn UIKitInteractionTypes.MODAL_OPEN;\n\t}\n\n\tif ([UIKitInteractionTypes.CONTEXTUAL_BAR_OPEN].includes(type)) {\n\t\tinstances.set(viewId, {\n\t\t\tpayload: {\n\t\t\t\ttype,\n\t\t\t\ttriggerId,\n\t\t\t\tappId,\n\t\t\t\tviewId,\n\t\t\t\t...data,\n\t\t\t},\n\t\t\tclose() {\n\t\t\t\tinstances.delete(viewId);\n\t\t\t},\n\t\t});\n\n\t\tFlowRouter.setParams({ tab: 'app', context: viewId });\n\n\t\treturn UIKitInteractionTypes.CONTEXTUAL_BAR_OPEN;\n\t}\n\n\tif ([UIKitInteractionTypes.BANNER_OPEN].includes(type)) {\n\t\tbanners.open(data);\n\t\tinstances.set(viewId, {\n\t\t\tclose() {\n\t\t\t\tbanners.closeById(viewId);\n\t\t\t},\n\t\t});\n\t\treturn UIKitInteractionTypes.BANNER_OPEN;\n\t}\n\n\tif ([UIKitIncomingInteractionType.BANNER_CLOSE].includes(type)) {\n\t\tconst instance = instances.get(viewId);\n\n\t\tif (instance) {\n\t\t\tinstance.close();\n\t\t}\n\t\treturn UIKitIncomingInteractionType.BANNER_CLOSE;\n\t}\n\n\tif ([UIKitIncomingInteractionType.CONTEXTUAL_BAR_CLOSE].includes(type)) {\n\t\tconst instance = instances.get(viewId);\n\n\t\tif (instance) {\n\t\t\tinstance.close();\n\t\t}\n\t\treturn UIKitIncomingInteractionType.CONTEXTUAL_BAR_CLOSE;\n\t}\n\n\treturn UIKitInteractionTypes.MODAL_ClOSE;\n};\n\nexport const triggerAction = async ({ type, actionId, appId, rid, mid, viewId, container, ...rest }) =>\n\tnew Promise(async (resolve, reject) => {\n\t\tconst triggerId = generateTriggerId(appId);\n\n\t\tconst payload = rest.payload || rest;\n\n\t\tsetTimeout(reject, TRIGGER_TIMEOUT, [TRIGGER_TIMEOUT_ERROR, { triggerId, appId }]);\n\n\t\tconst { type: interactionType, ...data } = await APIClient.post(`apps/ui.interaction/${appId}`, {\n\t\t\ttype,\n\t\t\tactionId,\n\t\t\tpayload,\n\t\t\tcontainer,\n\t\t\tmid,\n\t\t\trid,\n\t\t\ttriggerId,\n\t\t\tviewId,\n\t\t});\n\n\t\treturn resolve(handlePayloadUserInteraction(interactionType, data));\n\t});\n\nexport const triggerBlockAction = (options) => triggerAction({ type: UIKitIncomingInteractionType.BLOCK, ...options });\n\nexport const triggerActionButtonAction = (options) =>\n\ttriggerAction({ type: UIKitIncomingInteractionType.ACTION_BUTTON, ...options }).catch(async (reason) => {\n\t\tif (Array.isArray(reason) && reason[0] === TRIGGER_TIMEOUT_ERROR) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('UIKit_Interaction_Timeout'),\n\t\t\t});\n\t\t}\n\t});\n\nexport const triggerSubmitView = async ({ viewId, ...options }) => {\n\tconst close = () => {\n\t\tconst instance = instances.get(viewId);\n\n\t\tif (instance) {\n\t\t\tinstance.close();\n\t\t}\n\t};\n\n\ttry {\n\t\tconst result = await triggerAction({\n\t\t\ttype: UIKitIncomingInteractionType.VIEW_SUBMIT,\n\t\t\tviewId,\n\t\t\t...options,\n\t\t});\n\t\tif (!result || UIKitInteractionTypes.MODAL_CLOSE === result) {\n\t\t\tclose();\n\t\t}\n\t} catch {\n\t\tclose();\n\t}\n};\n\nexport const triggerCancel = async ({ view, ...options }) => {\n\tconst instance = instances.get(view.id);\n\ttry {\n\t\tawait triggerAction({ type: UIKitIncomingInteractionType.VIEW_CLOSED, view, ...options });\n\t} finally {\n\t\tif (instance) {\n\t\t\tinstance.close();\n\t\t}\n\t}\n};\n\nexport const getUserInteractionPayloadByViewId = (viewId) => {\n\tif (!viewId) {\n\t\tthrow new Error('No viewId provided when checking for `user interaction payload`');\n\t}\n\n\tconst instance = instances.get(viewId);\n\n\tif (!instance) {\n\t\treturn {};\n\t}\n\n\treturn instance.payload;\n};\n\nMeteor.startup(() =>\n\tCachedCollectionManager.onLogin(() =>\n\t\tNotifications.onUser('uiInteraction', ({ type, ...data }) => {\n\t\t\thandlePayloadUserInteraction(type, data);\n\t\t}),\n\t),\n);\n","import './message';\nimport './messageBox/messageBox';\nimport './popup/customMessagePopups';\nimport './popup/messagePopup';\nimport './popup/messagePopupChannel';\nimport './popup/messagePopupConfig';\nimport './popup/messagePopupEmoji';\nimport './popup/messagePopupSlashCommandPreview';\n","import _ from 'underscore';\nimport dompurify from 'dompurify';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { Template } from 'meteor/templating';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\n\nimport { timeAgo } from '../../../client/lib/utils/timeAgo';\nimport { formatDateAndTime } from '../../../client/lib/utils/formatDateAndTime';\nimport { normalizeThreadTitle } from '../../threads/client/lib/normalizeThreadTitle';\nimport { MessageTypes, MessageAction } from '../../ui-utils/client';\nimport { RoomRoles, UserRoles, Roles } from '../../models/client';\nimport { Markdown } from '../../markdown/client';\nimport { t, roomTypes } from '../../utils';\nimport { AutoTranslate } from '../../autotranslate/client';\nimport { renderMentions } from '../../mentions/client/client';\nimport { renderMessageBody } from '../../../client/lib/utils/renderMessageBody';\nimport { settings } from '../../settings/client';\nimport { formatTime } from '../../../client/lib/utils/formatTime';\nimport { formatDate } from '../../../client/lib/utils/formatDate';\nimport './messageThread';\nimport './message.html';\n\nconst renderBody = (msg, settings) => {\n\tconst searchedText = msg.searchedText ? msg.searchedText : '';\n\tconst isSystemMessage = MessageTypes.isSystemMessage(msg);\n\tconst messageType = MessageTypes.getType(msg) || {};\n\n\tif (messageType.render) {\n\t\tmsg = messageType.render(msg);\n\t} else if (messageType.template) {\n\t\t// render template\n\t} else if (messageType.message) {\n\t\tmsg.msg = escapeHTML(msg.msg);\n\t\tmsg = TAPi18n.__(messageType.message, { ...(typeof messageType.data === 'function' && messageType.data(msg)) });\n\t\tmsg = dompurify.sanitize(msg);\n\t} else if (msg.u && msg.u.username === settings.Chatops_Username) {\n\t\tmsg.html = msg.msg;\n\t\tmsg = renderMentions(msg);\n\t\tmsg = msg.html;\n\t} else {\n\t\tmsg = renderMessageBody(msg);\n\t}\n\n\tif (isSystemMessage) {\n\t\tmsg.html = Markdown.parse(msg.html);\n\t}\n\n\tif (searchedText) {\n\t\tmsg = msg.replace(new RegExp(searchedText, 'gi'), (str) => `<mark>${str}</mark>`);\n\t}\n\n\treturn msg;\n};\n\nTemplate.message.helpers({\n\tenableMessageParserEarlyAdoption() {\n\t\tconst {\n\t\t\tsettings: { enableMessageParserEarlyAdoption },\n\t\t\tmsg,\n\t\t} = this;\n\t\treturn enableMessageParserEarlyAdoption && msg.md;\n\t},\n\tunread() {\n\t\tconst { msg, subscription } = this;\n\t\treturn subscription?.tunread?.includes(msg._id);\n\t},\n\tmention() {\n\t\tconst { msg, subscription } = this;\n\t\treturn subscription?.tunreadUser?.includes(msg._id);\n\t},\n\n\tall() {\n\t\tconst { msg, subscription } = this;\n\t\treturn subscription?.tunreadGroup?.includes(msg._id);\n\t},\n\tfollowing() {\n\t\tconst { msg, u } = this;\n\t\treturn msg.replies && msg.replies.indexOf(u._id) > -1;\n\t},\n\tbody() {\n\t\tconst { msg, settings } = this;\n\t\treturn Tracker.nonreactive(() => renderBody(msg, settings));\n\t},\n\ti18nReplyCounter() {\n\t\tconst { msg } = this;\n\t\tif (msg.tcount === 1) {\n\t\t\treturn 'reply_counter';\n\t\t}\n\t\treturn 'reply_counter_plural';\n\t},\n\ti18nDiscussionCounter() {\n\t\tconst { msg } = this;\n\t\treturn `<span class='reply-counter'>${msg.dcount}</span>`;\n\t},\n\tformatDateAndTime,\n\tencodeURI(text) {\n\t\treturn encodeURI(text);\n\t},\n\tbroadcast() {\n\t\tconst { msg, room = {}, u } = this;\n\t\treturn !msg.private && !msg.t && msg.u._id !== u._id && room && room.broadcast;\n\t},\n\tisIgnored() {\n\t\tconst { ignored, msg } = this;\n\t\tconst isIgnored = typeof ignored !== 'undefined' ? ignored : msg.ignored;\n\t\treturn isIgnored;\n\t},\n\tignoredClass() {\n\t\tconst { ignored, msg } = this;\n\t\tconst isIgnored = typeof ignored !== 'undefined' ? ignored : msg.ignored;\n\t\treturn isIgnored ? 'message--ignored' : '';\n\t},\n\tisDecrypting() {\n\t\tconst { msg } = this;\n\t\treturn msg.e2e === 'pending';\n\t},\n\tisBot() {\n\t\tconst { msg } = this;\n\t\treturn msg.bot && 'bot';\n\t},\n\thasAttachments() {\n\t\tconst { msg } = this;\n\t\treturn msg.attachments?.length;\n\t},\n\troleTags() {\n\t\tconst { msg, hideRoles, settings } = this;\n\t\tif (settings.hideRoles || hideRoles) {\n\t\t\treturn [];\n\t\t}\n\n\t\tif (!msg.u || !msg.u._id) {\n\t\t\treturn [];\n\t\t}\n\t\tconst userRoles = UserRoles.findOne(msg.u._id);\n\t\tconst roomRoles = RoomRoles.findOne({\n\t\t\t'u._id': msg.u._id,\n\t\t\t'rid': msg.rid,\n\t\t});\n\t\tconst roles = [...((userRoles && userRoles.roles) || []), ...((roomRoles && roomRoles.roles) || [])];\n\t\treturn Roles.find(\n\t\t\t{\n\t\t\t\t_id: {\n\t\t\t\t\t$in: roles,\n\t\t\t\t},\n\t\t\t\tdescription: {\n\t\t\t\t\t$exists: 1,\n\t\t\t\t\t$ne: '',\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tfields: {\n\t\t\t\t\tdescription: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t},\n\tisGroupable() {\n\t\tconst { msg, room = {}, settings, groupable } = this;\n\t\tif (\n\t\t\tgroupable === false ||\n\t\t\tsettings.allowGroup === false ||\n\t\t\troom.broadcast ||\n\t\t\tmsg.groupable === false ||\n\t\t\t(MessageTypes.isSystemMessage(msg) && !msg.tmid)\n\t\t) {\n\t\t\treturn 'false';\n\t\t}\n\t},\n\tavatarFromUsername() {\n\t\tconst { msg } = this;\n\n\t\tif (msg.avatar != null && msg.avatar[0] === '@') {\n\t\t\treturn msg.avatar.replace(/^@/, '');\n\t\t}\n\t},\n\tavatarFromMessage() {\n\t\tconst { msg } = this;\n\t\tif (msg && msg.avatar) {\n\t\t\treturn encodeURI(msg.avatar);\n\t\t}\n\t\treturn '';\n\t},\n\tgetName() {\n\t\tconst { msg, settings } = this;\n\t\tif (msg.alias) {\n\t\t\treturn msg.alias;\n\t\t}\n\t\tif (!msg.u) {\n\t\t\treturn '';\n\t\t}\n\t\treturn (settings.UI_Use_Real_Name && msg.u.name) || msg.u.username;\n\t},\n\tshowUsername() {\n\t\tconst { msg, settings } = this;\n\t\treturn msg.alias || (settings.UI_Use_Real_Name && msg.u && msg.u.name);\n\t},\n\town() {\n\t\tconst { msg, u = {} } = this;\n\t\tif (msg.u && msg.u._id === u._id) {\n\t\t\treturn 'own';\n\t\t}\n\t},\n\tt() {\n\t\tconst { msg } = this;\n\t\treturn msg.t;\n\t},\n\ttimestamp() {\n\t\tconst { msg } = this;\n\t\treturn +msg.ts;\n\t},\n\tchatops() {\n\t\tconst { msg, settings } = this;\n\t\tif (msg.u && msg.u.username === settings.Chatops_Username) {\n\t\t\treturn 'chatops-message';\n\t\t}\n\t},\n\ttime() {\n\t\tconst { msg, timeAgo: useTimeAgo } = this;\n\n\t\treturn useTimeAgo ? timeAgo(msg.ts) : formatTime(msg.ts);\n\t},\n\tdate() {\n\t\tconst { msg } = this;\n\t\treturn formatDate(msg.ts);\n\t},\n\tisTemp() {\n\t\tconst { msg } = this;\n\t\tif (msg.temp === true) {\n\t\t\treturn 'temp';\n\t\t}\n\t},\n\tthreadMessage() {\n\t\tconst { msg } = this;\n\t\treturn normalizeThreadTitle(msg);\n\t},\n\tbodyClass() {\n\t\tconst { msg } = this;\n\t\treturn MessageTypes.isSystemMessage(msg) ? 'color-info-font-color' : 'color-primary-font-color';\n\t},\n\tsystem(returnClass) {\n\t\tconst { msg } = this;\n\t\tif (MessageTypes.isSystemMessage(msg)) {\n\t\t\tif (returnClass) {\n\t\t\t\treturn 'color-info-font-color';\n\t\t\t}\n\t\t\treturn 'system';\n\t\t}\n\t},\n\tshowTranslated() {\n\t\tconst { msg, subscription, settings, u } = this;\n\t\tif (settings.AutoTranslate_Enabled && msg.u && msg.u._id !== u._id && !MessageTypes.isSystemMessage(msg)) {\n\t\t\tconst autoTranslate = subscription && subscription.autoTranslate;\n\t\t\treturn (\n\t\t\t\tmsg.autoTranslateFetching ||\n\t\t\t\t(!!autoTranslate !== !!msg.autoTranslateShowInverse && msg.translations && msg.translations[settings.translateLanguage])\n\t\t\t);\n\t\t}\n\t},\n\ttranslationProvider() {\n\t\tconst instance = Template.instance();\n\t\tconst { translationProvider } = instance.data.msg;\n\t\treturn translationProvider && AutoTranslate.providersMetadata[translationProvider]?.displayName;\n\t},\n\tedited() {\n\t\tconst { msg } = this;\n\t\treturn msg.editedAt && !MessageTypes.isSystemMessage(msg);\n\t},\n\teditTime() {\n\t\tconst { msg } = this;\n\t\treturn msg.editedAt ? formatDateAndTime(msg.editedAt) : '';\n\t},\n\teditedBy() {\n\t\tconst { msg } = this;\n\t\tif (!msg.editedAt) {\n\t\t\treturn '';\n\t\t}\n\t\t// try to return the username of the editor,\n\t\t// otherwise a special \"?\" character that will be\n\t\t// rendered as a special avatar\n\t\treturn (msg.editedBy && msg.editedBy.username) || '?';\n\t},\n\tlabel() {\n\t\tconst { msg } = this;\n\n\t\tif (msg.i18nLabel) {\n\t\t\treturn t(msg.i18nLabel);\n\t\t}\n\t\tif (msg.label) {\n\t\t\treturn msg.label;\n\t\t}\n\t},\n\thasOembed() {\n\t\tconst { msg, settings } = this;\n\t\t// there is no URLs, there is no template to show the oembed (oembed package removed) or oembed is not enable\n\t\tif (!(msg.urls && msg.urls.length > 0) || !Template.oembedBaseWidget || !settings.API_Embed) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// check if oembed is disabled for message's sender\n\t\tif (\n\t\t\t(settings.API_EmbedDisabledFor || '')\n\t\t\t\t.split(',')\n\t\t\t\t.map((username) => username.trim())\n\t\t\t\t.includes(msg.u && msg.u.username)\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n\treactions() {\n\t\tconst {\n\t\t\tmsg: { reactions = {} },\n\t\t\tu: { username: myUsername, name: myName },\n\t\t} = this;\n\n\t\treturn Object.entries(reactions).map(([emoji, reaction]) => {\n\t\t\tconst myDisplayName = reaction.names ? myName : `@${myUsername}`;\n\t\t\tconst displayNames = reaction.names || reaction.usernames.map((username) => `@${username}`);\n\t\t\tconst selectedDisplayNames = displayNames.slice(0, 15).filter((displayName) => displayName !== myDisplayName);\n\n\t\t\tif (displayNames.some((displayName) => displayName === myDisplayName)) {\n\t\t\t\tselectedDisplayNames.unshift(t('You'));\n\t\t\t}\n\n\t\t\tlet usernames;\n\n\t\t\tif (displayNames.length > 15) {\n\t\t\t\tusernames = `${selectedDisplayNames.join(', ')} ${t('And_more', {\n\t\t\t\t\tlength: displayNames.length - 15,\n\t\t\t\t}).toLowerCase()}`;\n\t\t\t} else if (displayNames.length > 1) {\n\t\t\t\tusernames = `${selectedDisplayNames.slice(0, -1).join(', ')} ${t('and')} ${selectedDisplayNames[selectedDisplayNames.length - 1]}`;\n\t\t\t} else {\n\t\t\t\tusernames = selectedDisplayNames[0];\n\t\t\t}\n\n\t\t\treturn {\n\t\t\t\temoji,\n\t\t\t\tcount: displayNames.length,\n\t\t\t\tusernames,\n\t\t\t\treaction: ` ${t('Reacted_with').toLowerCase()} ${emoji}`,\n\t\t\t\tuserReacted: displayNames.indexOf(myDisplayName) > -1,\n\t\t\t};\n\t\t});\n\t},\n\tmarkUserReaction(reaction) {\n\t\tif (reaction.userReacted) {\n\t\t\treturn {\n\t\t\t\tclass: 'selected',\n\t\t\t};\n\t\t}\n\t},\n\thideReactions() {\n\t\tconst { msg } = this;\n\t\tif (_.isEmpty(msg.reactions)) {\n\t\t\treturn 'hidden';\n\t\t}\n\t},\n\thideAddReaction() {\n\t\tconst { room, u, msg, subscription } = this;\n\n\t\tif (!room) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (!subscription) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (msg.private) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (roomTypes.readOnly(room._id, u._id) && !room.reactWhenReadOnly) {\n\t\t\treturn true;\n\t\t}\n\t},\n\thideMessageActions() {\n\t\tconst { msg } = this;\n\n\t\treturn msg.private || MessageTypes.isSystemMessage(msg);\n\t},\n\tactionLinks() {\n\t\tconst { msg } = this;\n\t\t// remove 'method_id' and 'params' properties\n\t\treturn _.map(msg.actionLinks, function (actionLink, key) {\n\t\t\treturn _.extend(\n\t\t\t\t{\n\t\t\t\t\tid: key,\n\t\t\t\t},\n\t\t\t\t_.omit(actionLink, 'method_id', 'params'),\n\t\t\t);\n\t\t});\n\t},\n\thideActionLinks() {\n\t\tconst { msg } = this;\n\t\tif (_.isEmpty(msg.actionLinks)) {\n\t\t\treturn 'hidden';\n\t\t}\n\t},\n\tinjectMessage(data, { _id, rid }) {\n\t\tdata.msg = { _id, rid };\n\t},\n\tinjectIndex(data, index) {\n\t\tdata.index = index;\n\t},\n\tinjectSettings(data, settings) {\n\t\tdata.settings = settings;\n\t},\n\tclassName() {\n\t\treturn this.msg.className;\n\t},\n\tchannelName() {\n\t\tconst { subscription } = this;\n\t\t// const subscription = Subscriptions.findOne({ rid: this.rid });\n\t\treturn subscription && subscription.name;\n\t},\n\troomIcon() {\n\t\tconst { room } = this;\n\t\tif (room && room.t === 'd') {\n\t\t\treturn 'at';\n\t\t}\n\t\treturn roomTypes.getIcon(room);\n\t},\n\tcustomClass() {\n\t\tconst { customClass, msg } = this;\n\t\treturn customClass || msg.customClass;\n\t},\n\tfromSearch() {\n\t\tconst { customClass, msg } = this;\n\t\treturn [msg.customClass, customClass].includes('search');\n\t},\n\tactionContext() {\n\t\tconst { msg } = this;\n\t\treturn msg.actionContext;\n\t},\n\tmessageActions(group) {\n\t\tconst { msg, context: ctx } = this;\n\t\tlet messageGroup = group;\n\t\tlet context = ctx || msg.actionContext;\n\n\t\tif (!group) {\n\t\t\tmessageGroup = 'message';\n\t\t}\n\n\t\tif (!context) {\n\t\t\tcontext = 'message';\n\t\t}\n\n\t\treturn MessageAction.getButtons(this, context, messageGroup);\n\t},\n\tisSnippet() {\n\t\tconst { msg } = this;\n\t\treturn msg.actionContext === 'snippeted';\n\t},\n\tisThreadReply() {\n\t\tconst {\n\t\t\tgroupable,\n\t\t\tmsg: { tmid, t, groupable: _groupable },\n\t\t\tsettings: { showreply },\n\t\t} = this;\n\t\treturn !(groupable === true || _groupable === true) && !!(tmid && showreply && (!t || t === 'e2e'));\n\t},\n\tshouldHideBody() {\n\t\tconst {\n\t\t\tmsg: { tmid, actionContext },\n\t\t\tsettings: { showreply },\n\t\t\tcontext,\n\t\t} = this;\n\t\treturn showreply && tmid && !(actionContext || context);\n\t},\n\tcollapsed() {\n\t\tconst {\n\t\t\tmsg: { tmid, collapsed },\n\t\t\tsettings: { showreply },\n\t\t\tshouldCollapseReplies,\n\t\t} = this;\n\t\tconst isCollapsedThreadReply = shouldCollapseReplies && tmid && showreply && collapsed !== false;\n\t\tif (isCollapsedThreadReply) {\n\t\t\treturn 'collapsed';\n\t\t}\n\t},\n\tcollapseSwitchClass() {\n\t\tconst {\n\t\t\tmsg: { collapsed = true },\n\t\t} = this;\n\t\treturn collapsed ? 'icon-right-dir' : 'icon-down-dir';\n\t},\n\tparentMessage() {\n\t\tconst {\n\t\t\tmsg: { threadMsg },\n\t\t} = this;\n\t\treturn threadMsg;\n\t},\n\tshowStar() {\n\t\tconst { msg } = this;\n\t\treturn (\n\t\t\tmsg.starred &&\n\t\t\tmsg.starred.length > 0 &&\n\t\t\tmsg.starred.find((star) => star._id === Meteor.userId()) &&\n\t\t\t!(msg.actionContext === 'starred' || this.context === 'starred')\n\t\t);\n\t},\n\treadReceipt() {\n\t\tif (!settings.get('Message_Read_Receipt_Enabled')) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn {\n\t\t\treadByEveryone: (!this.msg.unread && 'read') || 'color-component-color',\n\t\t};\n\t},\n});\n\nconst hasTempClass = (node) => node.classList.contains('temp');\n\nconst getPreviousSentMessage = (currentNode) => {\n\tif (hasTempClass(currentNode)) {\n\t\treturn currentNode.previousElementSibling;\n\t}\n\tif (currentNode.previousElementSibling != null) {\n\t\tlet previousValid = currentNode.previousElementSibling;\n\t\twhile (previousValid != null && (hasTempClass(previousValid) || !previousValid.classList.contains('message'))) {\n\t\t\tpreviousValid = previousValid.previousElementSibling;\n\t\t}\n\t\treturn previousValid;\n\t}\n};\n\nconst isNewDay = (currentNode, previousNode, forceDate, showDateSeparator) => {\n\tif (!showDateSeparator) {\n\t\treturn false;\n\t}\n\n\tif (forceDate || !previousNode) {\n\t\treturn true;\n\t}\n\n\tconst { dataset: currentDataset } = currentNode;\n\tconst { dataset: previousDataset } = previousNode;\n\tconst previousMessageDate = new Date(parseInt(previousDataset.timestamp));\n\tconst currentMessageDate = new Date(parseInt(currentDataset.timestamp));\n\n\tif (previousMessageDate.toDateString() !== currentMessageDate.toDateString()) {\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\nconst isSequential = (currentNode, previousNode, forceDate, period, showDateSeparator, shouldCollapseReplies) => {\n\tif (!previousNode) {\n\t\treturn false;\n\t}\n\n\tif (showDateSeparator && forceDate) {\n\t\treturn false;\n\t}\n\n\tconst { dataset: currentDataset } = currentNode;\n\tconst { dataset: previousDataset } = previousNode;\n\tconst previousMessageDate = new Date(parseInt(previousDataset.timestamp));\n\tconst currentMessageDate = new Date(parseInt(currentDataset.timestamp));\n\n\tif (showDateSeparator && previousMessageDate.toDateString() !== currentMessageDate.toDateString()) {\n\t\treturn false;\n\t}\n\n\tif (!shouldCollapseReplies && currentDataset.tmid) {\n\t\treturn previousDataset.id === currentDataset.tmid || previousDataset.tmid === currentDataset.tmid;\n\t}\n\n\tif (previousDataset.tmid && !currentDataset.tmid) {\n\t\treturn false;\n\t}\n\n\tif ([previousDataset.groupable, currentDataset.groupable].includes('false')) {\n\t\treturn false;\n\t}\n\n\tif (previousDataset.username !== currentDataset.username) {\n\t\treturn false;\n\t}\n\n\tif (previousDataset.alias !== currentDataset.alias) {\n\t\treturn false;\n\t}\n\n\tif (parseInt(currentDataset.timestamp) - parseInt(previousDataset.timestamp) <= period) {\n\t\treturn true;\n\t}\n\n\treturn false;\n};\n\nconst processSequentials = ({ index, currentNode, settings, forceDate, showDateSeparator = true, groupable, shouldCollapseReplies }) => {\n\tif (!showDateSeparator && !groupable) {\n\t\treturn;\n\t}\n\t// const currentDataset = currentNode.dataset;\n\tconst previousNode = (index === undefined || index > 0) && getPreviousSentMessage(currentNode);\n\tconst nextNode = currentNode.nextElementSibling;\n\n\tif (!previousNode) {\n\t\tsetTimeout(() => {\n\t\t\tcurrentNode.dispatchEvent(new CustomEvent('MessageGroup', { bubbles: true }));\n\t\t}, 100);\n\t}\n\tif (isSequential(currentNode, previousNode, forceDate, settings.Message_GroupingPeriod, showDateSeparator, shouldCollapseReplies)) {\n\t\tcurrentNode.classList.add('sequential');\n\t} else {\n\t\tcurrentNode.classList.remove('sequential');\n\t}\n\n\tif (isNewDay(currentNode, previousNode, forceDate, showDateSeparator)) {\n\t\tcurrentNode.classList.add('new-day');\n\t} else {\n\t\tcurrentNode.classList.remove('new-day');\n\t}\n\n\tif (nextNode && nextNode.dataset) {\n\t\tif (isSequential(nextNode, currentNode, forceDate, settings.Message_GroupingPeriod, showDateSeparator, shouldCollapseReplies)) {\n\t\t\tnextNode.classList.add('sequential');\n\t\t} else {\n\t\t\tnextNode.classList.remove('sequential');\n\t\t}\n\n\t\tif (isNewDay(nextNode, currentNode, forceDate, showDateSeparator)) {\n\t\t\tnextNode.classList.add('new-day');\n\t\t} else {\n\t\t\tnextNode.classList.remove('new-day');\n\t\t}\n\t}\n};\n\nTemplate.message.onRendered(function () {\n\tconst currentNode = this.firstNode;\n\tthis.autorun(() => processSequentials({ currentNode, ...Template.currentData() }));\n});\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\nimport _ from 'underscore';\n\nimport { callWithErrorHandling } from '../../../client/lib/utils/callWithErrorHandling';\nimport { Messages } from '../../models/client';\nimport { normalizeThreadTitle } from '../../threads/client/lib/normalizeThreadTitle';\nimport './messageThread.html';\n\nconst findParentMessage = (() => {\n\tconst waiting = [];\n\tlet resolve;\n\tlet pending = new Promise((r) => {\n\t\tresolve = r;\n\t});\n\n\tconst getMessages = _.debounce(async function () {\n\t\tconst _tmp = [...waiting];\n\t\twaiting.length = 0;\n\t\tresolve(callWithErrorHandling('getMessages', _tmp));\n\t\tpending = new Promise((r) => {\n\t\t\tresolve = r;\n\t\t});\n\t}, 500);\n\n\tconst get = async (tmid) => {\n\t\tgetMessages();\n\t\tconst messages = await pending;\n\t\treturn messages.find(({ _id }) => _id === tmid);\n\t};\n\n\treturn async (tmid) => {\n\t\tconst message = Messages.findOne({ _id: tmid });\n\n\t\tif (message) {\n\t\t\treturn message;\n\t\t}\n\n\t\tif (waiting.indexOf(tmid) === -1) {\n\t\t\twaiting.push(tmid);\n\t\t}\n\t\treturn get(tmid);\n\t};\n})();\n\nTemplate.messageThread.helpers({\n\tparentMessage() {\n\t\tconst { parentMessage } = Template.instance();\n\t\tif (parentMessage) {\n\t\t\treturn normalizeThreadTitle(parentMessage.get());\n\t\t}\n\t},\n});\n\nTemplate.messageThread.onCreated(function () {\n\tthis.parentMessage = new ReactiveVar();\n\tthis.autorun(async () => {\n\t\tconst { tmid } = Template.currentData();\n\t\tthis.parentMessage.set(await findParentMessage(tmid));\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { actionLinks } from '../../action-links/client';\nimport { Rooms } from '../../models';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\n\nactionLinks.register('joinJitsiCall', function (message, params, instance) {\n\tif (Session.get('openedRoom')) {\n\t\tconst rid = Session.get('openedRoom');\n\n\t\tconst room = Rooms.findOne({ _id: rid });\n\t\tconst username = Meteor.user()?.username;\n\t\tconst currentTime = new Date().getTime();\n\t\tconst jitsiTimeout = new Date((room && room.jitsiTimeout) || currentTime).getTime();\n\n\t\tif (room && room?.muted?.includes(username)) {\n\t\t\tdispatchToastMessage({ type: 'error', message: TAPi18n.__('You_have_been_muted', '') });\n\t\t} else if (jitsiTimeout > currentTime) {\n\t\t\tinstance.tabBar.open('video');\n\t\t} else {\n\t\t\tdispatchToastMessage({ type: 'info', message: TAPi18n.__('Call Already Ended', '') });\n\t\t}\n\t}\n});\n","import './views/bbbLiveView.html';\nimport './tabBar';\nimport './actionLink';\nimport '../lib/messageType';\n","import React, { useMemo, lazy, ReactNode } from 'react';\nimport { useStableArray } from '@rocket.chat/fuselage-hooks';\nimport { Option, Badge } from '@rocket.chat/fuselage';\n\nimport { useSetting } from '../../../client/contexts/SettingsContext';\nimport { addAction, ToolboxActionConfig } from '../../../client/views/room/lib/Toolbox';\nimport { useTranslation } from '../../../client/contexts/TranslationContext';\nimport { useUser } from '../../../client/contexts/UserContext';\nimport Header from '../../../client/components/Header';\n\nconst templateBBB = lazy(() => import('../../../client/views/room/contextualBar/Call/BBB'));\n\naddAction('bbb_video', ({ room }) => {\n\tconst enabled = useSetting('bigbluebutton_Enabled');\n\tconst t = useTranslation();\n\n\tconst live = room?.streamingOptions && room.streamingOptions.type === 'call';\n\n\tconst enabledDirect = useSetting('bigbluebutton_enable_d');\n\tconst enabledGroup = useSetting('bigbluebutton_enable_p');\n\tconst enabledChannel = useSetting('bigbluebutton_enable_c');\n\tconst enabledTeams = useSetting('bigbluebutton_enable_teams');\n\n\tconst groups = useStableArray(\n\t\t[enabledDirect && 'direct', 'direct_multiple', enabledGroup && 'group', enabledTeams && 'team', enabledChannel && 'channel'].filter(\n\t\t\tBoolean,\n\t\t) as ToolboxActionConfig['groups'],\n\t);\n\tconst user = useUser();\n\tconst username = user ? user.username : '';\n\tconst enableOption = enabled && (!username || !room.muted?.includes(username));\n\n\treturn useMemo(\n\t\t() =>\n\t\t\tenableOption\n\t\t\t\t? {\n\t\t\t\t\t\tgroups,\n\t\t\t\t\t\tid: 'bbb_video',\n\t\t\t\t\t\ttitle: 'BBB_Video_Call',\n\t\t\t\t\t\ticon: 'phone',\n\t\t\t\t\t\ttemplate: templateBBB,\n\t\t\t\t\t\torder: live ? -1 : 4,\n\t\t\t\t\t\trenderAction: (props): ReactNode => (\n\t\t\t\t\t\t\t<Header.ToolBoxAction {...props}>\n\t\t\t\t\t\t\t\t{live ? (\n\t\t\t\t\t\t\t\t\t<Header.Badge title={t('Started_a_video_call')} variant='primary'>\n\t\t\t\t\t\t\t\t\t\t!\n\t\t\t\t\t\t\t\t\t</Header.Badge>\n\t\t\t\t\t\t\t\t) : null}\n\t\t\t\t\t\t\t</Header.ToolBoxAction>\n\t\t\t\t\t\t),\n\t\t\t\t\t\trenderOption: ({ label: { title, icon }, ...props }: any): ReactNode => (\n\t\t\t\t\t\t\t<Option label={title} title={title} icon={icon} {...props}>\n\t\t\t\t\t\t\t\t<Badge title={t('Started_a_video_call')} variant='primary'>\n\t\t\t\t\t\t\t\t\t!\n\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t),\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[enableOption, groups, live, t],\n\t);\n});\n\nconst templateJitsi = lazy(() => import('../../../client/views/room/contextualBar/Call/Jitsi'));\n\naddAction('video', ({ room }) => {\n\tconst enabled = useSetting('Jitsi_Enabled');\n\tconst t = useTranslation();\n\n\tconst enabledChannel = useSetting('Jitsi_Enable_Channels');\n\tconst enabledTeams = useSetting('Jitsi_Enable_Teams');\n\tconst enabledLiveChat = useSetting('Omnichannel_call_provider') === 'Jitsi';\n\n\tconst groups = useStableArray(\n\t\t['direct', 'direct_multiple', 'group', enabledLiveChat && 'live', enabledTeams && 'team', enabledChannel && 'channel'].filter(\n\t\t\tBoolean,\n\t\t) as ToolboxActionConfig['groups'],\n\t);\n\n\tconst currentTime = new Date().getTime();\n\tconst jitsiTimeout = new Date(room?.jitsiTimeout || currentTime).getTime();\n\tconst live = jitsiTimeout > currentTime || null;\n\tconst user = useUser();\n\tconst username = user ? user.username : '';\n\tconst enableOption = enabled && (!username || !room.muted?.includes(username));\n\n\treturn useMemo(\n\t\t() =>\n\t\t\tenableOption\n\t\t\t\t? {\n\t\t\t\t\t\tgroups,\n\t\t\t\t\t\tid: 'video',\n\t\t\t\t\t\ttitle: 'Call',\n\t\t\t\t\t\ticon: 'phone',\n\t\t\t\t\t\ttemplate: templateJitsi,\n\t\t\t\t\t\tfull: true,\n\t\t\t\t\t\torder: live ? -1 : 4,\n\t\t\t\t\t\trenderAction: (props): ReactNode => (\n\t\t\t\t\t\t\t<Header.ToolBoxAction {...props}>\n\t\t\t\t\t\t\t\t{live && (\n\t\t\t\t\t\t\t\t\t<Header.Badge title={t('Started_a_video_call')} variant='primary'>\n\t\t\t\t\t\t\t\t\t\t!\n\t\t\t\t\t\t\t\t\t</Header.Badge>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Header.ToolBoxAction>\n\t\t\t\t\t\t),\n\t\t\t\t\t\trenderOption: ({ label: { title, icon }, ...props }: any): ReactNode => (\n\t\t\t\t\t\t\t<Option label={title} title={title} icon={icon} {...props}>\n\t\t\t\t\t\t\t\t{live && (\n\t\t\t\t\t\t\t\t\t<Badge title={t('Started_a_video_call')} variant='primary'>\n\t\t\t\t\t\t\t\t\t\t!\n\t\t\t\t\t\t\t\t\t</Badge>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</Option>\n\t\t\t\t\t\t),\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[enableOption, groups, live, t],\n\t);\n});\n","import { Meteor } from 'meteor/meteor';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { MessageTypes } from '../../ui-utils';\n\nMeteor.startup(function () {\n\tMessageTypes.registerType({\n\t\tid: 'jitsi_call_started',\n\t\tsystem: true,\n\t\tmessage: TAPi18n.__('Started_a_video_call'),\n\t});\n});\n","import { AuthzCachedCollection } from '../../../models';\n\nexport const ChatPermissions = AuthzCachedCollection.collection;\n","import { Meteor } from 'meteor/meteor';\n\nexport const rolesStreamer = new Meteor.Streamer('roles');\n","import { Meteor } from 'meteor/meteor';\n\nimport { ChatPermissions } from './lib/ChatPermissions';\nimport * as Models from '../../models/client';\nimport { AuthorizationUtils } from '../lib/AuthorizationUtils';\nimport { IUser } from '../../../definition/IUser';\nimport { IRole } from '../../../definition/IRole';\nimport { IPermission } from '../../../definition/IPermission';\n\nconst isValidScope = (scope: IRole['scope']): boolean => typeof scope === 'string' && scope in Models;\n\nconst createPermissionValidator =\n\t(quantifier: (predicate: (permissionId: IPermission['_id']) => boolean) => boolean) =>\n\t(permissionIds: IPermission['_id'][], scope: string | undefined, userId: IUser['_id']): boolean => {\n\t\tconst user: IUser | null = Models.Users.findOneById(userId, { fields: { roles: 1 } });\n\n\t\tconst checkEachPermission = quantifier.bind(permissionIds);\n\n\t\treturn checkEachPermission((permissionId) => {\n\t\t\tif (user?.roles) {\n\t\t\t\tif (AuthorizationUtils.isPermissionRestrictedForRoleList(permissionId, user.roles)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst permission: IPermission | null = ChatPermissions.findOne(permissionId, {\n\t\t\t\tfields: { roles: 1 },\n\t\t\t});\n\t\t\tconst roles = permission?.roles ?? [];\n\n\t\t\treturn roles.some((roleName) => {\n\t\t\t\tconst role = Models.Roles.findOne(roleName, { fields: { scope: 1 } });\n\t\t\t\tconst roleScope = role?.scope;\n\n\t\t\t\tif (!isValidScope(roleScope)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tconst model = Models[roleScope as keyof typeof Models];\n\t\t\t\treturn model.isUserInRole && model.isUserInRole(userId, roleName, scope);\n\t\t\t});\n\t\t});\n\t};\n\nconst atLeastOne = createPermissionValidator(Array.prototype.some);\n\nconst all = createPermissionValidator(Array.prototype.every);\n\nconst validatePermissions = (\n\tpermissions: IPermission['_id'] | IPermission['_id'][],\n\tscope: string | undefined,\n\tpredicate: (permissionIds: IPermission['_id'][], scope: string | undefined, userId: IUser['_id']) => boolean,\n\tuserId?: IUser['_id'] | null,\n): boolean => {\n\tuserId = userId ?? Meteor.userId();\n\n\tif (!userId) {\n\t\treturn false;\n\t}\n\n\tif (!Models.AuthzCachedCollection.ready.get()) {\n\t\treturn false;\n\t}\n\n\treturn predicate(([] as IPermission['_id'][]).concat(permissions), scope, userId);\n};\n\nexport const hasAllPermission = (permissions: IPermission['_id'] | IPermission['_id'][], scope?: string): boolean =>\n\tvalidatePermissions(permissions, scope, all);\n\nexport const hasAtLeastOnePermission = (permissions: IPermission['_id'] | IPermission['_id'][], scope?: string): boolean =>\n\tvalidatePermissions(permissions, scope, atLeastOne);\n\nexport const userHasAllPermission = (\n\tpermissions: IPermission['_id'] | IPermission['_id'][],\n\tscope?: string,\n\tuserId?: IUser['_id'] | null,\n): boolean => validatePermissions(permissions, scope, all, userId);\n\nexport const hasPermission = hasAllPermission;\n","import { Roles } from '../../models';\n\nexport const hasRole = (userId, roleNames, scope) => {\n\troleNames = [].concat(roleNames);\n\treturn Roles.isUserInRoles(userId, roleNames, scope);\n};\n","import { hasAllPermission, hasAtLeastOnePermission, hasPermission, userHasAllPermission } from './hasPermission';\nimport { hasRole } from './hasRole';\nimport { AuthorizationUtils } from '../lib/AuthorizationUtils';\nimport './requiresPermission.html';\nimport './startup';\n\nexport { hasAllPermission, hasAtLeastOnePermission, hasRole, hasPermission, userHasAllPermission, AuthorizationUtils };\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { hasAtLeastOnePermission } from './hasPermission';\nimport { CachedCollectionManager } from '../../ui-cached-collection';\nimport { APIClient } from '../../utils/client';\nimport { Roles } from '../../models/client';\nimport { rolesStreamer } from './lib/streamer';\nimport { registerAdminSidebarItem } from '../../../client/views/admin';\n\nMeteor.startup(() => {\n\tCachedCollectionManager.onLogin(async () => {\n\t\tconst { roles } = await APIClient.v1.get('roles.list');\n\t\t// if a role is checked before this collection is populated, it will return undefined\n\t\tRoles._collection._docs._map = new Map(roles.map((record) => [record._id, record]));\n\t\tObject.values(Roles._collection.queries).forEach((query) => Roles._collection._recomputeResults(query));\n\n\t\tRoles.ready.set(true);\n\t});\n\n\tregisterAdminSidebarItem({\n\t\thref: 'admin-permissions',\n\t\ti18nLabel: 'Permissions',\n\t\ticon: 'lock',\n\t\tpermissionGranted() {\n\t\t\treturn hasAtLeastOnePermission(['access-permissions', 'access-setting-permissions']);\n\t\t},\n\t});\n\tconst events = {\n\t\tchanged: (role) => {\n\t\t\tdelete role.type;\n\t\t\tRoles.upsert({ _id: role._id }, role);\n\t\t},\n\t\tremoved: (role) => {\n\t\t\tRoles.remove({ _id: role._id });\n\t\t},\n\t};\n\n\tTracker.autorun((c) => {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn;\n\t\t}\n\t\trolesStreamer.on('roles', (role) => events[role.type](role));\n\t\tc.stop();\n\t});\n});\n","const restrictedRolePermissions = new Map();\n\nexport const AuthorizationUtils = class {\n\tstatic addRolePermissionWhiteList(roleId: string, list: string[]): void {\n\t\tif (!roleId) {\n\t\t\tthrow new Error('invalid-param');\n\t\t}\n\n\t\tif (!list) {\n\t\t\tthrow new Error('invalid-param');\n\t\t}\n\n\t\tif (!restrictedRolePermissions.has(roleId)) {\n\t\t\trestrictedRolePermissions.set(roleId, new Set());\n\t\t}\n\n\t\tconst rules = restrictedRolePermissions.get(roleId);\n\n\t\tfor (const permissionId of list) {\n\t\t\trules.add(permissionId);\n\t\t}\n\t}\n\n\tstatic isPermissionRestrictedForRole(permissionId: string, roleId: string): boolean {\n\t\tif (!roleId || !permissionId) {\n\t\t\tthrow new Error('invalid-param');\n\t\t}\n\n\t\tif (!restrictedRolePermissions.has(roleId)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst rules = restrictedRolePermissions.get(roleId);\n\t\tif (!rules || !rules.size) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn !rules.has(permissionId);\n\t}\n\n\tstatic isPermissionRestrictedForRoleList(permissionId: string, roleList: string[]): boolean {\n\t\tif (!roleList || !permissionId) {\n\t\t\tthrow new Error('invalid-param');\n\t\t}\n\n\t\tfor (const roleId of roleList) {\n\t\t\tif (this.isPermissionRestrictedForRole(permissionId, roleId)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n};\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/index.js');\n}\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/index.js');\n}\n","import _ from 'underscore';\nimport { Blaze } from 'meteor/blaze';\nimport { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\n\nimport { emoji } from '../../lib/rocketchat';\n\nlet updatePositions = true;\n\nexport const EmojiPicker = {\n\twidth: 365,\n\theight: 300,\n\tinitiated: false,\n\tinput: null,\n\tsource: null,\n\trecent: [],\n\ttone: null,\n\topened: false,\n\tpickCallback: null,\n\tscrollingToCategory: false,\n\tcurrentCategory: new ReactiveVar('recent'),\n\tasync init() {\n\t\tif (this.initiated) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.initiated = true;\n\n\t\tthis.recent = Meteor._localStorage.getItem('emoji.recent') ? Meteor._localStorage.getItem('emoji.recent').split(',') : [];\n\t\tthis.tone = Meteor._localStorage.getItem('emoji.tone') || 0;\n\n\t\tBlaze.render(Template.emojiPicker, document.body);\n\n\t\t$(document).click((event) => {\n\t\t\tif (!this.opened) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (!$(event.target).closest('.emoji-picker').length && !$(event.target).is('.emoji-picker')) {\n\t\t\t\tif (this.opened) {\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\t$(window).resize(\n\t\t\t_.debounce(() => {\n\t\t\t\tif (!this.opened) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.setPosition();\n\t\t\t}, 300),\n\t\t);\n\t},\n\tisOpened() {\n\t\treturn this.opened;\n\t},\n\tsetTone(tone) {\n\t\tthis.tone = tone;\n\t\tMeteor._localStorage.setItem('emoji.tone', tone);\n\t},\n\tgetTone() {\n\t\treturn this.tone;\n\t},\n\tgetRecent() {\n\t\treturn this.recent;\n\t},\n\tsetPosition() {\n\t\tconst windowHeight = window.innerHeight;\n\t\tconst windowWidth = window.innerWidth;\n\t\tconst windowBorder = 10;\n\t\tconst sourcePos = $(this.source).offset();\n\t\tconst { left, top } = sourcePos;\n\t\tconst cssProperties = { top, left };\n\t\tconst isLargerThanWindow = this.width + windowBorder > windowWidth;\n\n\t\tif (top + this.height >= windowHeight) {\n\t\t\tcssProperties.top = windowHeight - this.height - windowBorder - 75;\n\t\t}\n\n\t\tif (left < windowBorder) {\n\t\t\tcssProperties.left = isLargerThanWindow ? 0 : windowBorder;\n\t\t}\n\n\t\tif (left + this.width >= windowWidth) {\n\t\t\tcssProperties.left = isLargerThanWindow ? 0 : windowWidth - this.width - windowBorder;\n\t\t}\n\n\t\treturn $('.emoji-picker').css(cssProperties);\n\t},\n\tasync open(source, callback) {\n\t\tif (!this.initiated) {\n\t\t\tawait this.init();\n\t\t}\n\t\tthis.pickCallback = callback;\n\t\tthis.source = source;\n\n\t\tconst containerEl = this.setPosition();\n\t\tcontainerEl.addClass('show');\n\n\t\tconst emojiInput = containerEl.find('.js-emojipicker-search');\n\t\tif (emojiInput) {\n\t\t\temojiInput.focus();\n\t\t}\n\n\t\tthis.calculateCategoryPositions();\n\n\t\tif (this.recent.length === 0 && this.currentCategory.get() === 'recent') {\n\t\t\tthis.showCategory(emoji.packages.emojiCustom.list.length > 0 ? 'rocket' : 'people', false);\n\t\t}\n\n\t\tthis.opened = true;\n\t},\n\tclose() {\n\t\t$('.emoji-picker').removeClass('show');\n\t\tthis.opened = false;\n\t\tthis.source.focus();\n\t},\n\tpickEmoji(emoji) {\n\t\tthis.pickCallback(emoji);\n\n\t\tthis.close();\n\t\tthis.addRecent(emoji);\n\t},\n\taddRecent(_emoji) {\n\t\tconst pos = this.recent.indexOf(_emoji);\n\n\t\tif (pos !== -1) {\n\t\t\tthis.recent.splice(pos, 1);\n\t\t}\n\n\t\tthis.recent.unshift(_emoji);\n\n\t\t// limit recent emojis to 27 (3 rows of 9)\n\t\tthis.recent.splice(27);\n\n\t\tupdatePositions = true;\n\n\t\tMeteor._localStorage.setItem('emoji.recent', this.recent);\n\t\temoji.packages.base.emojisByCategory.recent = this.recent;\n\t\tthis.updateRecent('recent');\n\t},\n\tremoveFromRecent(_emoji) {\n\t\tconst pos = this.recent.indexOf(_emoji);\n\t\tif (pos === -1) {\n\t\t\treturn;\n\t\t}\n\t\tthis.recent.splice(pos, 1);\n\t\tMeteor._localStorage.setItem('emoji.recent', this.recent);\n\t},\n\tasync updateRecent(category) {\n\t\tconst emojiPickerImport = await import('../emojiPicker');\n\t\tconst { updateRecentEmoji } = emojiPickerImport;\n\t\tupdateRecentEmoji(category);\n\t},\n\tcalculateCategoryPositions() {\n\t\tif (!updatePositions) {\n\t\t\treturn;\n\t\t}\n\t\tupdatePositions = false;\n\n\t\tconst containerScroll = $('.emoji-picker .emojis').scrollTop();\n\n\t\tthis.catPositions = Array.from(document.querySelectorAll('.emoji-list-category')).map((el) => {\n\t\t\tconst { top } = $(el).position();\n\t\t\treturn {\n\t\t\t\tel,\n\t\t\t\ttop: top + containerScroll,\n\t\t\t};\n\t\t});\n\t},\n\tgetCategoryPositions() {\n\t\treturn this.catPositions;\n\t},\n\tshowCategory(category, animate = true) {\n\t\tthis.scrollingToCategory = animate;\n\n\t\t$('.emoji-picker .js-emojipicker-search').val('').change().focus();\n\n\t\tthis.currentCategory.set(category);\n\n\t\tTracker.afterFlush(() => {\n\t\t\tconst header = $(`#emoji-list-category-${category}`);\n\t\t\tconst container = $('.emoji-picker .emojis');\n\n\t\t\tconst scrollTop = header.position().top + container.scrollTop(); // - container.position().top;\n\n\t\t\tif (animate) {\n\t\t\t\treturn container.animate(\n\t\t\t\t\t{\n\t\t\t\t\t\tscrollTop,\n\t\t\t\t\t},\n\t\t\t\t\t300,\n\t\t\t\t\t() => {\n\t\t\t\t\t\tthis.scrollingToCategory = false;\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t}\n\n\t\t\tcontainer.scrollTop(scrollTop);\n\t\t});\n\t},\n};\n","import { isIE11 } from '../../../client/lib/utils/isIE11';\nimport { emoji } from '../lib/rocketchat';\n\n/*\n * emojiParser is a function that will replace emojis\n * @param {Object} message - The message object\n */\n\nconst emojiParser = (message) => {\n\tif (!message.html?.trim()) {\n\t\treturn message;\n\t}\n\n\tlet html = message.html.trim();\n\n\t// &#39; to apostrophe (') for emojis such as :')\n\thtml = html.replace(/&#39;/g, \"'\");\n\n\t// '<br>' to ' <br> ' for emojis such at line breaks\n\thtml = html.replace(/<br>/g, ' <br> ');\n\n\thtml = Object.entries(emoji.packages)\n\t\t.reverse()\n\t\t.reduce((value, [, emojiPackage]) => emojiPackage.render(value), html);\n\n\tconst checkEmojiOnly = document.createElement('div');\n\n\tcheckEmojiOnly.innerHTML = html;\n\n\tconst emojis = Array.from(checkEmojiOnly.querySelectorAll('.emoji:not(:empty), .emojione:not(:empty)'));\n\n\tlet hasText = false;\n\n\tif (!isIE11) {\n\t\tconst filter = (node) => {\n\t\t\tif (node.nodeType === Node.ELEMENT_NODE && (node.classList.contains('emojione') || node.classList.contains('emoji'))) {\n\t\t\t\treturn NodeFilter.FILTER_REJECT;\n\t\t\t}\n\t\t\treturn NodeFilter.FILTER_ACCEPT;\n\t\t};\n\n\t\tconst walker = document.createTreeWalker(checkEmojiOnly, NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_TEXT, filter);\n\n\t\twhile (walker.nextNode()) {\n\t\t\tif (walker.currentNode.nodeType === Node.TEXT_NODE && walker.currentNode.nodeValue.trim() !== '') {\n\t\t\t\thasText = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tconst emojiOnly = emojis.length && !hasText;\n\n\t\tif (emojiOnly) {\n\t\t\tfor (let i = 0, len = emojis.length; i < len; i++) {\n\t\t\t\tconst { classList } = emojis[i];\n\t\t\t\tclassList.add('big');\n\t\t\t}\n\t\t\thtml = checkEmojiOnly.innerHTML;\n\t\t}\n\t}\n\n\t// apostrophe (') back to &#39;\n\thtml = html.replace(/\\'/g, '&#39;');\n\n\t// line breaks ' <br> ' back to '<br>'\n\thtml = html.replace(/ <br> /g, '<br>');\n\n\treturn { ...message, html };\n};\n\nexport { emojiParser };\n\nexport const createEmojiMessageRenderer = () => emojiParser;\n","export { EmojiPicker } from './lib/EmojiPicker';\nexport { emoji } from '../lib/rocketchat';\nexport { createEmojiMessageRenderer } from './emojiParser';\n","import { emojioneRender } from '../../emoji-emojione/lib/emojioneRender';\n\nlet EmojiPicker;\nconst removeFromRecent = (emoji) => {\n\tif (!EmojiPicker) {\n\t\t// since this function will be only called client side, the import needs to happen here\n\t\t({ EmojiPicker } = require('../client/lib/EmojiPicker'));\n\t}\n\tEmojiPicker.removeFromRecent(emoji.replace(/(^:|:$)/g, ''));\n};\n\nexport const emoji = {\n\tpackages: {\n\t\tbase: {\n\t\t\temojiCategories: [{ key: 'recent', i18n: 'Frequently_Used' }],\n\t\t\tcategoryIndex: 0,\n\t\t\temojisByCategory: {\n\t\t\t\trecent: [],\n\t\t\t},\n\t\t\ttoneList: {},\n\t\t\trender: emojioneRender,\n\t\t\trenderPicker(emojiToRender) {\n\t\t\t\tif (!emoji.list[emojiToRender]) {\n\t\t\t\t\tremoveFromRecent(emojiToRender);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst correctPackage = emoji.list[emojiToRender].emojiPackage;\n\t\t\t\treturn emoji.packages[correctPackage].renderPicker(emojiToRender);\n\t\t\t},\n\t\t},\n\t},\n\tlist: {},\n};\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/index.js');\n}\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/index.js');\n}\n","import './lazyloadImage';\n\nconst map = new WeakMap();\n\nconst featureExists = !!window.IntersectionObserver;\nconst loadImage = (el) => {\n\tconst instance = map.get(el);\n\n\tmap.delete(el);\n\n\tif (!instance) {\n\t\treturn;\n\t}\n\n\tconst img = new Image();\n\tconst src = el.getAttribute('data-src');\n\timg.onload = () => {\n\t\tel.className = el.className.replace('lazy-img', '');\n\t\tel.src = src;\n\t\tel.removeAttribute('data-src');\n\t\tinstance.loaded.set(true);\n\t};\n\timg.src = src;\n};\n\nconst observer =\n\tfeatureExists &&\n\tnew IntersectionObserver(\n\t\t(entries, observer) =>\n\t\t\tentries.forEach((entry) => {\n\t\t\t\tif (entry.isIntersecting) {\n\t\t\t\t\tobserver.unobserve(entry.target);\n\t\t\t\t\treturn loadImage(entry.target);\n\t\t\t\t}\n\t\t\t}),\n\t\t{\n\t\t\tthreshold: [0],\n\t\t\ttrackVisibility: true,\n\t\t\tdelay: 230,\n\t\t},\n\t);\n\nexport const addImage = (instance) => {\n\tconst el = instance.firstNode;\n\tmap.set(el, instance);\n\tif (featureExists) {\n\t\treturn observer.observe(el);\n\t}\n\tloadImage(el);\n};\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nimport './lazyloadImage.html';\nimport { addImage } from '.';\n\nconst emptyImageEncoded = 'iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mP8+/u3PQAJJAM0dIyWdgAAAABJRU5ErkJggg==';\n\nconst imgsrcs = new Set();\n\nTemplate.lazyloadImage.helpers({\n\tclass() {\n\t\tconst loaded = Template.instance().loaded.get();\n\t\treturn `${this.class} ${loaded ? '' : 'lazy-img'}`;\n\t},\n\n\tsrcUrl() {\n\t\tif (Template.instance().loaded.get()) {\n\t\t\treturn;\n\t\t}\n\t\treturn this.src;\n\t},\n\n\tlazySrcUrl() {\n\t\tconst { preview, placeholder, src } = this;\n\t\tconst { loaded } = Template.instance();\n\n\t\tif (loaded.get() || (!preview && !placeholder) || imgsrcs.has(src)) {\n\t\t\treturn src;\n\t\t}\n\n\t\timgsrcs.add(this.src);\n\t\treturn `data:image/png;base64,${preview || emptyImageEncoded}`;\n\t},\n});\n\nTemplate.lazyloadImage.onCreated(function () {\n\tthis.loaded = new ReactiveVar(false);\n});\n\nTemplate.lazyloadImage.onRendered(function () {\n\taddImage(this);\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Match } from 'meteor/check';\nimport { Blaze } from 'meteor/blaze';\nimport { Deps } from 'meteor/deps';\nimport _ from 'underscore';\nimport { getCaretCoordinates } from 'meteor/dandv:caret-position';\n\nimport AutoCompleteRecords from './collection';\nimport { APIClient } from '../../utils/client';\n\nconst isServerSearch = function (rule) {\n\treturn _.isString(rule.collection);\n};\n\nconst validateRule = function (rule) {\n\tif (rule.subscription != null && !Match.test(rule.collection, String)) {\n\t\tthrow new Error('Collection name must be specified as string for server-side search');\n\t}\n\t// XXX back-compat message, to be removed\n\tif (rule.callback) {\n\t\tconsole.warn('autocomplete no longer supports callbacks; use event listeners instead.');\n\t}\n};\n\nconst isWholeField = function (rule) {\n\t// either '' or null both count as whole field.\n\treturn !rule.token;\n};\n\nconst getRegExp = function (rule) {\n\tif (!isWholeField(rule)) {\n\t\t// Expressions for the range from the last word break to the current cursor position\n\t\treturn new RegExp(`(^|\\\\b|\\\\s)${rule.token}([\\\\w.]*)$`);\n\t}\n\t// Whole-field behavior - word characters or spaces\n\treturn new RegExp('(^)(.*)$');\n};\n\nconst getFindParams = function (rule, filter, limit) {\n\t// This is a different 'filter' - the selector from the settings\n\t// We need to extend so that we don't copy over rule.filter\n\tconst selector = _.extend({}, rule.filter || {});\n\tconst options = {\n\t\tlimit,\n\t};\n\tif (!filter) {\n\t\t// Match anything, no sort, limit X\n\t\treturn [selector, options];\n\t}\n\tif (rule.sort && rule.field) {\n\t\tconst sortspec = {};\n\t\t// Only sort if there is a filter, for faster performance on a match of anything\n\t\tsortspec[rule.field] = 1;\n\t\toptions.sort = sortspec;\n\t}\n\tif (_.isFunction(rule.selector)) {\n\t\t// Custom selector\n\t\t_.extend(selector, rule.selector(filter));\n\t} else {\n\t\tselector[rule.field] = {\n\t\t\t$regex: rule.matchAll ? filter : `^${filter}`,\n\t\t\t// default is case insensitive search - empty string is not the same as undefined!\n\t\t\t$options: typeof rule.options === 'undefined' ? 'i' : rule.options,\n\t\t};\n\t}\n\treturn [selector, options];\n};\n\nconst getField = function (obj, str) {\n\tconst string = str.split('.');\n\tstring.forEach((key) => {\n\t\tobj = obj[key];\n\t});\n\treturn obj;\n};\n\nexport default class AutoComplete {\n\tconstructor(settings) {\n\t\tthis.KEYS = [40, 38, 13, 27, 9];\n\t\tthis.limit = settings.limit || 5;\n\t\tthis.position = settings.position || 'bottom';\n\t\tthis.rules = settings.rules;\n\t\tthis.selector = {\n\t\t\tcontainer: '.-autocomplete-container',\n\t\t\titem: '.-autocomplete-item',\n\t\t\t...settings.selector,\n\t\t};\n\t\tconst { rules } = this;\n\n\t\tObject.keys(rules).forEach((key) => {\n\t\t\tconst rule = rules[key];\n\t\t\tvalidateRule(rule);\n\t\t});\n\n\t\tthis.onSelect = settings.onSelect;\n\n\t\tthis.expressions = (() =>\n\t\t\tObject.keys(rules).map((key) => {\n\t\t\t\tconst rule = rules[key];\n\t\t\t\treturn getRegExp(rule);\n\t\t\t}))();\n\t\tthis.matched = -1;\n\t\tthis.loaded = true;\n\n\t\t// Reactive dependencies for current matching rule and filter\n\t\tthis.ruleDep = new Deps.Dependency();\n\t\tthis.filterDep = new Deps.Dependency();\n\t\tthis.loadingDep = new Deps.Dependency();\n\n\t\t// Autosubscribe to the record set published by the server based on the filter\n\t\t// This will tear down server subscriptions when they are no longer being used.\n\t\tthis.sub = null;\n\t\tthis.comp = Deps.autorun(async () => {\n\t\t\tconst rule = this.matchedRule();\n\t\t\tconst filter = this.getFilter();\n\t\t\tif (this.sub) {\n\t\t\t\t// Stop any existing sub immediately, don't wait\n\t\t\t\tthis.sub.stop();\n\t\t\t}\n\t\t\tif (!(rule && filter)) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// subscribe only for server-side collections\n\t\t\tif (!isServerSearch(rule)) {\n\t\t\t\tthis.setLoaded(true);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst [selector] = getFindParams(rule, filter, this.limit);\n\n\t\t\t// console.debug 'Subscribing to <%s> in <%s>.<%s>', filter, rule.collection, rule.field\n\t\t\tthis.setLoaded(false);\n\t\t\tconst endpointName = rule.endpoint || 'users.autocomplete';\n\t\t\tconst { items } = await APIClient.v1.get(`${endpointName}?selector=${JSON.stringify(selector)}`);\n\t\t\tAutoCompleteRecords.remove({});\n\t\t\titems.forEach((item) => AutoCompleteRecords.insert(item));\n\t\t\tthis.setLoaded(true);\n\t\t});\n\t}\n\n\tteardown() {\n\t\t// Stop the reactive computation we started for this autocomplete instance\n\t\tthis.comp.stop();\n\t}\n\n\tmatchedRule() {\n\t\t// reactive getters and setters for @filter and the currently matched rule\n\t\tthis.ruleDep.depend();\n\t\tif (this.matched >= 0) {\n\t\t\treturn this.rules[this.matched];\n\t\t}\n\t\treturn null;\n\t}\n\n\tsetMatchedRule(i) {\n\t\tthis.matched = i;\n\t\tthis.ruleDep.changed();\n\t}\n\n\tgetFilter() {\n\t\tthis.filterDep.depend();\n\t\treturn this.filter;\n\t}\n\n\tsetFilter(x) {\n\t\tthis.filter = x;\n\t\tthis.filterDep.changed();\n\t\treturn this.filter;\n\t}\n\n\tisLoaded() {\n\t\tthis.loadingDep.depend();\n\t\treturn this.loaded;\n\t}\n\n\tsetLoaded(val) {\n\t\tif (val === this.loaded) {\n\t\t\treturn; // Don't cause redraws unnecessarily\n\t\t}\n\t\tthis.loaded = val;\n\t\tthis.loadingDep.changed();\n\t}\n\n\tonKeyUp() {\n\t\tif (!this.$element) {\n\t\t\treturn; // Don't try to do this while loading\n\t\t}\n\n\t\tif (this._timeoutHandler) {\n\t\t\tclearTimeout(this._timeoutHandler);\n\t\t}\n\n\t\tthis._timeoutHandler = setTimeout(() => {\n\t\t\tthis._timeoutHandler = 0;\n\n\t\t\tconst startpos = this.element.selectionStart;\n\t\t\tconst val = this.getText().substring(0, startpos);\n\n\t\t\t/*\n\t\t\t\tMatching on multiple expressions.\n\t\t\t\tWe always go from a matched state to an unmatched one\n\t\t\t\tbefore going to a different matched one.\n\t\t\t */\n\t\t\tlet i = 0;\n\t\t\tlet breakLoop = false;\n\t\t\twhile (i < this.expressions.length) {\n\t\t\t\tconst matches = val.match(this.expressions[i]);\n\n\t\t\t\t// matching -> not matching\n\t\t\t\tif (!matches && this.matched === i) {\n\t\t\t\t\tthis.setMatchedRule(-1);\n\t\t\t\t\tbreakLoop = true;\n\t\t\t\t}\n\n\t\t\t\t// not matching -> matching\n\t\t\t\tif (matches && this.matched === -1) {\n\t\t\t\t\tthis.setMatchedRule(i);\n\t\t\t\t\tbreakLoop = true;\n\t\t\t\t}\n\n\t\t\t\t// Did filter change?\n\t\t\t\tif (matches && this.filter !== matches[2]) {\n\t\t\t\t\tthis.setFilter(matches[2]);\n\t\t\t\t\tbreakLoop = true;\n\t\t\t\t}\n\t\t\t\tif (breakLoop) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\ti++;\n\t\t\t}\n\t\t}, 300);\n\t}\n\n\tonKeyDown(e) {\n\t\tif (this.matched === -1 || this.KEYS.indexOf(e.keyCode) < 0) {\n\t\t\treturn;\n\t\t}\n\t\tswitch (e.keyCode) {\n\t\t\tcase 9: // TAB\n\t\t\tcase 13: // ENTER\n\t\t\t\tif (this.select()) {\n\t\t\t\t\t// Don't jump fields or submit if select successful\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\te.stopPropagation();\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\t// preventDefault needed below to avoid moving cursor when selecting\n\t\t\tcase 40: // DOWN\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.next();\n\t\t\t\tbreak;\n\t\t\tcase 38: // UP\n\t\t\t\te.preventDefault();\n\t\t\t\tthis.prev();\n\t\t\t\tbreak;\n\t\t\tcase 27: // ESCAPE\n\t\t\t\tthis.$element.blur();\n\t\t\t\tthis.hideList();\n\t\t}\n\t}\n\n\tonFocus() {\n\t\t// We need to run onKeyUp after the focus resolves,\n\t\t// or the caret position (selectionStart) will not be correct\n\t\tMeteor.defer(() => this.onKeyUp());\n\t}\n\n\tonBlur() {\n\t\t// We need to delay this so click events work\n\t\t// TODO this is a bit of a hack, see if we can't be smarter\n\t\tMeteor.setTimeout(() => {\n\t\t\tthis.hideList();\n\t\t}, 500);\n\t}\n\n\tonItemClick(doc) {\n\t\tthis.processSelection(doc, this.rules[this.matched]);\n\t}\n\n\tonItemHover(doc, e) {\n\t\tthis.tmplInst.$(this.selector.item).removeClass('selected');\n\t\t$(e.target).closest(this.selector.item).addClass('selected');\n\t}\n\n\tfilteredList() {\n\t\t// @ruleDep.depend() # optional as long as we use depend on filter, because list will always get re-rendered\n\t\tconst filter = this.getFilter(); // Reactively depend on the filter\n\t\tif (this.matched === -1) {\n\t\t\treturn null;\n\t\t}\n\t\tconst rule = this.rules[this.matched];\n\n\t\t// Don't display list unless we have a token or a filter (or both)\n\t\t// Single field: nothing displayed until something is typed\n\t\tif (!(rule.token || filter)) {\n\t\t\treturn null;\n\t\t}\n\t\tconst params = getFindParams(rule, filter, this.limit);\n\t\tconst selector = params[0];\n\t\tconst options = params[1];\n\t\tMeteor.defer(() => this.ensureSelection());\n\n\t\t// if server collection, the server has already done the filtering work\n\t\tif (isServerSearch(rule)) {\n\t\t\treturn AutoCompleteRecords.find({}, options);\n\t\t}\n\t\t// Otherwise, search on client\n\t\treturn rule.collection.find(selector, options);\n\t}\n\n\tisShowing() {\n\t\tconst rule = this.matchedRule();\n\t\t// Same rules as above\n\t\tconst showing = rule && (rule.token || this.getFilter());\n\n\t\t// Do this after the render\n\t\tif (showing) {\n\t\t\tMeteor.defer(() => {\n\t\t\t\tthis.positionContainer();\n\t\t\t\tthis.ensureSelection();\n\t\t\t});\n\t\t}\n\t\treturn showing;\n\t}\n\n\t// Replace text with currently selected item\n\tselect() {\n\t\tconst node = this.tmplInst.find(`${this.selector.item}.selected`);\n\t\tif (node == null) {\n\t\t\treturn false;\n\t\t}\n\t\tconst doc = Blaze.getData(node);\n\t\tif (!doc) {\n\t\t\treturn false; // Don't select if nothing matched\n\t\t}\n\t\tthis.processSelection(doc, this.rules[this.matched]);\n\t\treturn true;\n\t}\n\n\tprocessSelection(doc, rule) {\n\t\tconst replacement = getField(doc, rule.field);\n\t\tif (!isWholeField(rule)) {\n\t\t\tthis.replace(replacement, rule);\n\t\t\tthis.hideList();\n\t\t} else {\n\t\t\t// Empty string or doesn't exist?\n\t\t\t// Single-field replacement: replace whole field\n\t\t\tthis.setText(replacement);\n\n\t\t\t// Field retains focus, but list is hidden unless another key is pressed\n\t\t\t// Must be deferred or onKeyUp will trigger and match again\n\t\t\t// TODO this is a hack; see above\n\t\t\tthis.onBlur();\n\t\t}\n\t\tthis.onSelect && this.onSelect(doc);\n\t\tthis.$element.trigger('autocompleteselect', doc);\n\t}\n\n\t// Replace the appropriate region\n\treplace(replacement) {\n\t\tconst startpos = this.element.selectionStart;\n\t\tconst fullStuff = this.getText();\n\t\tlet val = fullStuff.substring(0, startpos);\n\t\tval = val.replace(this.expressions[this.matched], `$1${this.rules[this.matched].token}${replacement}`);\n\t\tconst posfix = fullStuff.substring(startpos, fullStuff.length);\n\t\tconst separator = posfix.match(/^\\s/) ? '' : ' ';\n\t\tconst finalFight = val + separator + posfix;\n\t\tthis.setText(finalFight);\n\t\tconst newPosition = val.length + 1;\n\t\tthis.element.setSelectionRange(newPosition, newPosition);\n\t}\n\n\thideList() {\n\t\tthis.setMatchedRule(-1);\n\t\tthis.setFilter(null);\n\t}\n\n\tgetText() {\n\t\treturn this.$element.val() || this.$element.text();\n\t}\n\n\tsetText(text) {\n\t\tif (this.$element.is('input,textarea')) {\n\t\t\treturn this.$element.val(text);\n\t\t}\n\t\tthis.$element.html(text);\n\t}\n\n\t/*\n\t\tRendering functions\n\t */\n\n\tpositionContainer() {\n\t\t// First render; Pick the first item and set css whenever list gets shown\n\t\tlet pos = {};\n\t\tconst element = this.selector.anchor ? this.tmplInst.$(this.selector.anchor) : this.$element;\n\n\t\tif (this.position === 'fixed') {\n\t\t\tconst width = element.outerWidth();\n\t\t\treturn this.tmplInst.$(this.selector.container).css({ width, position: 'fixed' });\n\t\t}\n\n\t\tconst position = element.position();\n\t\tif (!position) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst rule = this.matchedRule();\n\t\tconst offset = getCaretCoordinates(this.element, this.element.selectionStart);\n\n\t\t// In whole-field positioning, we don't move the container and make it the\n\t\t// full width of the field.\n\t\tif (rule && isWholeField(rule)) {\n\t\t\tpos.left = position.left;\n\t\t\tif (rule.doNotChangeWidth !== false) {\n\t\t\t\tpos.width = element.outerWidth(); // position.offsetWidth\n\t\t\t}\n\t\t} else {\n\t\t\t// Normal positioning, at token word\n\t\t\tpos = { left: position.left + offset.left };\n\t\t}\n\n\t\t// Position menu from top (above) or from bottom of caret (below, default)\n\t\tif (this.position === 'top') {\n\t\t\tpos.bottom = element.offsetParent().height() - position.top - offset.top;\n\t\t} else {\n\t\t\tpos.top = position.top + offset.top + parseInt(element.css('font-size'));\n\t\t}\n\n\t\tthis.tmplInst.$(this.selector.container).css({ ...pos, position: 'absolute' });\n\t}\n\n\tensureSelection() {\n\t\t// Re-render; make sure selected item is something in the list or none if list empty\n\t\tconst selectedItem = this.tmplInst.$(`${this.selector.item}.selected`);\n\t\tif (!selectedItem.length) {\n\t\t\t// Select anything\n\t\t\tthis.tmplInst.$(`${this.selector.item}:first-child`).addClass('selected');\n\t\t}\n\t}\n\n\t// Select next item in list\n\tnext() {\n\t\tconst currentItem = this.tmplInst.$(`${this.selector.item}.selected`);\n\t\tif (!currentItem.length) {\n\t\t\treturn this.tmplInst.$(`${this.selector.item}:first-child`).addClass('selected');\n\t\t}\n\t\tcurrentItem.removeClass('selected');\n\t\tconst next = currentItem.next();\n\t\tif (next.length) {\n\t\t\tnext.addClass('selected');\n\t\t} else {\n\t\t\t// End of list or lost selection; Go back to first item\n\t\t\tthis.tmplInst.$(`${this.selector.item}:first-child`).addClass('selected');\n\t\t}\n\t}\n\n\t// Select previous item in list\n\tprev() {\n\t\tconst currentItem = this.tmplInst.$(`${this.selector.item}.selected`);\n\t\tif (!currentItem.length) {\n\t\t\treturn; // Don't try to iterate an empty list\n\t\t}\n\t\tcurrentItem.removeClass('selected');\n\t\tconst prev = currentItem.prev();\n\t\tif (prev.length) {\n\t\t\tprev.addClass('selected');\n\t\t} else {\n\t\t\t// Beginning of list or lost selection; Go to end of list\n\t\t\tthis.tmplInst.$(`${this.selector.item}:last-child`).addClass('selected');\n\t\t}\n\t}\n\n\t// This doesn't need to be reactive because list already changes reactively\n\t// and will cause all of the items to re-render anyway\n\tcurrentTemplate() {\n\t\treturn this.rules[this.matched].template;\n\t}\n}\n","import { Mongo } from 'meteor/mongo';\n\nexport default new Mongo.Collection(null);\n","import './inputs.html';\nimport './templates';\nimport AutoComplete from './autocomplete-client';\nimport './autocomplete.css';\n\nexport { AutoComplete };\n","import { Blaze } from 'meteor/blaze';\nimport { Template } from 'meteor/templating';\nimport _ from 'underscore';\n\nimport AutoComplete from './autocomplete-client';\n\n//  Events on template instances, sent to the autocomplete class\nconst acEvents = {\n\tkeydown(e, t) {\n\t\tt.ac.onKeyDown(e);\n\t},\n\tkeyup(e, t) {\n\t\tt.ac.onKeyUp(e);\n\t},\n\tfocus(e, t) {\n\t\tt.ac.onFocus(e);\n\t},\n\tblur(e, t) {\n\t\tt.ac.onBlur(e);\n\t},\n};\n\nTemplate.inputAutocomplete.events(acEvents);\n\nTemplate.textareaAutocomplete.events(acEvents);\n\nconst attributes = function () {\n\treturn _.omit(this, 'settings'); // Render all but the settings parameter\n};\n\nconst autocompleteHelpers = {\n\tattributes,\n\tautocompleteContainer: new Template('AutocompleteContainer', function () {\n\t\tconst ac = new AutoComplete(Blaze.getData().settings);\n\t\t// Set the autocomplete object on the parent template instance\n\t\tthis.parentView.templateInstance().ac = ac;\n\n\t\t// Set nodes on render in the autocomplete class\n\t\tthis.onViewReady(function () {\n\t\t\tac.element = this.parentView.firstNode();\n\t\t\tac.$element = $(ac.element);\n\t\t});\n\t\treturn Blaze.With(ac, function() { //eslint-disable-line\n\t\t\treturn Template._autocompleteContainer;\n\t\t});\n\t}),\n};\n\nTemplate.inputAutocomplete.helpers(autocompleteHelpers);\n\nTemplate.textareaAutocomplete.helpers(autocompleteHelpers);\n\nTemplate._autocompleteContainer.rendered = function () {\n\tthis.data.tmplInst = this;\n};\n\nTemplate._autocompleteContainer.destroyed = function () {\n\t// Meteor._debug \"autocomplete destroyed\"\n\tthis.data.teardown();\n};\n\n/*\n  List rendering helpers\n */\n\nTemplate._autocompleteContainer.events({\n\t// t.data is the AutoComplete instance; `this` is the data item\n\t'click .-autocomplete-item, click [data-autocomplete]'(e, t) {\n\t\tt.data.onItemClick(this, e);\n\t},\n\t'mouseenter .-autocomplete-item'(e, t) {\n\t\tt.data.onItemHover(this, e);\n\t},\n});\n\nTemplate._autocompleteContainer.helpers({\n\tempty() {\n\t\treturn this.filteredList().count() === 0;\n\t},\n\tnoMatchTemplate() {\n\t\treturn this.matchedRule().noMatchTemplate || Template._noMatch;\n\t},\n});\nexport { acEvents, attributes, autocompleteHelpers };\n","import { Template } from 'meteor/templating';\n\nimport { createCollapseable } from '../../ui-utils';\n\ncreateCollapseable(Template.oembedBaseWidget, (instance) => instance.data.settings.collapseMediaByDefault || false);\n\nTemplate.oembedBaseWidget.helpers({\n\ttemplate() {\n\t\tconst { collapsedMedia } = Template.instance();\n\t\tthis.collapsedMediaVar = () => collapsedMedia;\n\t\tthis.collapsed = collapsedMedia.get();\n\n\t\tif (this.headers?.contentType?.match(/image\\/.*/)) {\n\t\t\treturn 'oembedImageWidget';\n\t\t}\n\t\tif (this.headers?.contentType?.match(/audio\\/.*/)) {\n\t\t\treturn 'oembedAudioWidget';\n\t\t}\n\t\tif (this.headers?.contentType?.match(/video\\/.*/) || this.meta?.twitterPlayerStreamContentType?.match(/video\\/.*/)) {\n\t\t\treturn 'oembedVideoWidget';\n\t\t}\n\t\tif (this.meta?.oembedHtml) {\n\t\t\treturn 'oembedFrameWidget';\n\t\t}\n\t\treturn 'oembedUrlWidget';\n\t},\n});\n","import './baseWidget.html';\nimport './baseWidget';\nimport './oembedImageWidget.html';\nimport './oembedImageWidget';\nimport './oembedAudioWidget.html';\nimport './oembedVideoWidget.html';\nimport './oembedVideoWidget';\nimport './oembedYoutubeWidget.html';\nimport './oembedUrlWidget.html';\nimport './oembedUrlWidget';\nimport './oembedFrameWidget.html';\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\n\nimport { getUserPreference } from '../../utils';\n\nTemplate.oembedImageWidget.helpers({\n\tloadImage() {\n\t\tif (getUserPreference(Meteor.userId(), 'autoImageLoad') === false && this.downloadImages == null) {\n\t\t\treturn false;\n\t\t}\n\t\tif (Meteor.Device.isPhone() && getUserPreference(Meteor.userId(), 'saveMobileBandwidth') && this.downloadImages == null) {\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t},\n});\n","import { Blaze } from 'meteor/blaze';\nimport { Template } from 'meteor/templating';\nimport _ from 'underscore';\nimport { unescapeHTML } from '@rocket.chat/string-helpers';\n\nconst getTitle = function (self) {\n\tif (self.meta == null) {\n\t\treturn;\n\t}\n\treturn self.meta.ogTitle || self.meta.twitterTitle || self.meta.title || self.meta.pageTitle;\n};\n\nconst getDescription = function (self) {\n\tif (self.meta == null) {\n\t\treturn;\n\t}\n\tconst description = self.meta.ogDescription || self.meta.twitterDescription || self.meta.description;\n\tif (description == null) {\n\t\treturn;\n\t}\n\treturn unescapeHTML(description.replace(/(^[“\\s]*)|([”\\s]*$)/g, ''));\n};\n\nTemplate.oembedUrlWidget.helpers({\n\tdescription() {\n\t\tconst description = getDescription(this);\n\t\tif (_.isString(description)) {\n\t\t\treturn description;\n\t\t}\n\t},\n\ttitle() {\n\t\tconst title = getTitle(this);\n\t\tif (_.isString(title)) {\n\t\t\treturn Blaze._escape(title);\n\t\t}\n\t},\n\ttarget() {\n\t\tif (\n\t\t\t!(this.parsedUrl && this.parsedUrl.host) ||\n\t\t\t!(document && document.location && document.location.host) ||\n\t\t\t(this.parsedUrl && this.parsedUrl.host !== document.location.host)\n\t\t) {\n\t\t\treturn '_blank';\n\t\t}\n\t},\n\timage() {\n\t\tif (this.meta == null) {\n\t\t\treturn;\n\t\t}\n\t\tlet decodedOgImage;\n\t\tif (this.meta.ogImage && this.meta.ogImage.replace) {\n\t\t\tdecodedOgImage = this.meta.ogImage.replace(/&amp;/g, '&');\n\t\t}\n\t\tlet url = decodedOgImage || this.meta.twitterImage || this.meta.msapplicationTileImage;\n\t\tif (url == null) {\n\t\t\treturn;\n\t\t}\n\t\turl = new URL(url, `${this.parsedUrl.protocol}//${this.parsedUrl.host}`).href;\n\t\treturn url;\n\t},\n\tshow() {\n\t\treturn getDescription(this) != null || getTitle(this) != null;\n\t},\n});\n","import { Template } from 'meteor/templating';\n\nconst getTitle = function (self) {\n\tif (self.meta == null) {\n\t\treturn;\n\t}\n\treturn self.meta.ogTitle || self.meta.twitterTitle || self.meta.title || self.meta.pageTitle;\n};\n\nTemplate.oembedVideoWidget.helpers({\n\turl() {\n\t\tif (this.meta && this.meta.twitterPlayerStream) {\n\t\t\treturn this.meta.twitterPlayerStream;\n\t\t}\n\t\tif (this.url) {\n\t\t\treturn this.url;\n\t\t}\n\t},\n\tcontentType() {\n\t\tif (this.meta && this.meta.twitterPlayerStreamContentType) {\n\t\t\treturn this.meta.twitterPlayerStreamContentType;\n\t\t}\n\t\tif (this.headers && this.headers.contentType) {\n\t\t\treturn this.headers.contentType;\n\t\t}\n\t},\n\ttitle() {\n\t\treturn getTitle(this);\n\t},\n});\n","import '../lib/common';\nimport './startup';\nimport './roomType';\nimport './tokenChannelsList.html';\nimport './tokenChannelsList';\nimport './tokenpassChannelSettings.html';\nimport './tokenpassChannelSettings';\nimport './login-button.css';\nimport './channelSettings.css';\nimport './styles.css';\n","import { Meteor } from 'meteor/meteor';\n\nimport { roomTypes, RoomTypeConfig } from '../../utils';\n\nclass TokenPassRoomType extends RoomTypeConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tidentifier: 'tokenpass',\n\t\t\torder: 1,\n\t\t});\n\n\t\tthis.customTemplate = 'tokenChannelsList';\n\t}\n\n\tcondition() {\n\t\tconst user = Meteor.users.findOne(Meteor.userId(), { fields: { 'services.tokenpass': 1 } });\n\t\tconst hasTokenpass = !!(user && user.services && user.services.tokenpass);\n\n\t\treturn hasTokenpass;\n\t}\n}\n\nroomTypes.add(new TokenPassRoomType());\n","import { Meteor } from 'meteor/meteor';\n\nimport { ChannelSettings } from '../../channel-settings';\nimport { Rooms } from '../../models';\n\nMeteor.startup(function () {\n\tChannelSettings.addOption({\n\t\tgroup: ['room'],\n\t\tid: 'tokenpass',\n\t\ttemplate: 'channelSettings__tokenpass',\n\t\tvalidation(data) {\n\t\t\tif (data && data.rid) {\n\t\t\t\tconst room = Rooms.findOne(data.rid, { fields: { tokenpass: 1 } });\n\n\t\t\t\treturn room && room.tokenpass;\n\t\t\t}\n\n\t\t\treturn false;\n\t\t},\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport { Template } from 'meteor/templating';\n\nimport { Subscriptions } from '../../models';\n\nTemplate.tokenChannelsList.helpers({\n\trooms() {\n\t\treturn Template.instance()\n\t\t\t.tokenpassRooms.get()\n\t\t\t.filter((room) => Subscriptions.find({ rid: room._id }).count() === 0);\n\t},\n});\n\nTemplate.tokenChannelsList.onRendered(function () {\n\tTracker.autorun((c) => {\n\t\tconst user = Meteor.user();\n\t\tif (user && user.services && user.services.tokenpass) {\n\t\t\tc.stop();\n\n\t\t\tMeteor.call('findTokenChannels', (error, result) => {\n\t\t\t\tif (!error) {\n\t\t\t\t\tthis.tokenpassRooms.set(result);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t});\n});\n\nTemplate.tokenChannelsList.onCreated(function () {\n\tthis.tokenpassRooms = new ReactiveVar([]);\n});\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { t } from '../../utils';\nimport { ChatRoom } from '../../models';\nimport { handleError } from '../../../client/lib/utils/handleError';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\n\nTemplate.channelSettings__tokenpass.helpers({\n\taddDisabled() {\n\t\tconst { balance, token } = Template.instance();\n\t\treturn balance.get() && token.get() ? '' : 'disabled';\n\t},\n\tlist() {\n\t\treturn Template.instance().list.get();\n\t},\n\tsave() {\n\t\tconst { list, initial } = Template.instance();\n\t\treturn JSON.stringify(list.get()) !== JSON.stringify(initial);\n\t},\n\tediting() {\n\t\treturn Template.instance().editing.get() ? 'tokenpass__editing' : '';\n\t},\n\trequiredChecked() {\n\t\treturn Template.instance().requireAll.get() ? 'checked' : '';\n\t},\n\trequiredLabel() {\n\t\treturn Template.instance().requireAll.get() ? t('Require_all_tokens') : t('Require_any_token');\n\t},\n\trequiredDisabled() {\n\t\treturn !Template.instance().editing.get() ? 'disabled' : '';\n\t},\n\teditDisabled() {\n\t\treturn Template.instance().editing.get() ? 'disabled' : '';\n\t},\n});\n\nTemplate.channelSettings__tokenpass.onCreated(function () {\n\tconst room = ChatRoom.findOne(this.data.rid, { fields: { tokenpass: 1 } });\n\n\tthis.editing = new ReactiveVar(false);\n\tthis.initial = room.tokenpass;\n\tthis.requireAll = new ReactiveVar(room.tokenpass.require === 'all');\n\tthis.list = new ReactiveVar(this.initial.tokens);\n\tthis.token = new ReactiveVar('');\n\tthis.balance = new ReactiveVar('');\n});\n\nTemplate.channelSettings__tokenpass.events({\n\t'click .js-edit'(e, i) {\n\t\ti.editing.set(true);\n\t},\n\t'input [name=token]'(e, i) {\n\t\ti.token.set(e.target.value);\n\t},\n\t'input [name=balance]'(e, i) {\n\t\ti.balance.set(e.target.value);\n\t},\n\t'click .js-add'(e, i) {\n\t\te.preventDefault();\n\t\tconst instance = Template.instance();\n\t\tconst { balance, token, list } = instance;\n\t\tlist.set([...list.get().filter((t) => t.token !== token), { token: token.get(), balance: balance.get() }]);\n\n\t\t[...i.findAll('input')].forEach((el) => {\n\t\t\tel.value = '';\n\t\t});\n\t\treturn balance.set('') && token.set('');\n\t},\n\t'click .js-remove'(e, instance) {\n\t\te.preventDefault();\n\t\tconst { list, editing } = instance;\n\n\t\tif (!editing.get()) {\n\t\t\treturn;\n\t\t}\n\t\tlist.set(list.get().filter((t) => t.token !== this.token));\n\t},\n\t'click .js-save'(e, i) {\n\t\te.preventDefault();\n\n\t\tconst tokenpass = {\n\t\t\trequire: i.find('[name=requireAllTokens]').checked ? 'all' : 'any',\n\t\t\ttokens: i.list.get(),\n\t\t};\n\n\t\tMeteor.call('saveRoomSettings', this.rid, 'tokenpass', tokenpass, function (err) {\n\t\t\tif (err) {\n\t\t\t\treturn handleError(err);\n\t\t\t}\n\t\t\ti.editing.set(false);\n\t\t\ti.token.set('');\n\t\t\ti.balance.set('');\n\t\t\ti.initial = tokenpass;\n\t\t\t[...i.findAll('input')].forEach((el) => {\n\t\t\t\tel.value = '';\n\t\t\t});\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: TAPi18n.__('Room_tokenpass_config_changed_successfully'),\n\t\t\t});\n\t\t});\n\t},\n\t'click .js-cancel'(e, i) {\n\t\te.preventDefault();\n\t\ti.editing.set(false);\n\t\ti.list.set(i.initial.tokens);\n\t\ti.token.set('');\n\t\ti.balance.set('');\n\t\t[...i.findAll('input')].forEach((el) => {\n\t\t\tel.value = '';\n\t\t});\n\t},\n\t'change [name=requireAllTokens]'(e, instance) {\n\t\tinstance.requireAll.set(e.currentTarget.checked);\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../settings';\nimport { CustomOAuth } from '../../custom-oauth';\n\nconst config = {\n\tserverURL: '',\n\tidentityPath: '/oauth/user',\n\tauthorizePath: '/oauth/authorize',\n\ttokenPath: '/oauth/access-token',\n\tscope: 'user,tca,private-balances',\n\ttokenSentVia: 'payload',\n\tusernameField: 'username',\n\tmergeUsers: true,\n\taddAutopublishFields: {\n\t\tforLoggedInUser: ['services.tokenpass'],\n\t\tforOtherUsers: ['services.tokenpass.name'],\n\t},\n\taccessTokenParam: 'access_token',\n};\n\nconst Tokenpass = new CustomOAuth('tokenpass', config);\n\nif (Meteor.isServer) {\n\tMeteor.startup(function () {\n\t\tsettings.get('API_Tokenpass_URL', function (key, value) {\n\t\t\tconfig.serverURL = value;\n\t\t\tTokenpass.configure(config);\n\t\t});\n\t});\n} else {\n\tMeteor.startup(function () {\n\t\tTracker.autorun(function () {\n\t\t\tif (settings.get('API_Tokenpass_URL')) {\n\t\t\t\tconfig.serverURL = settings.get('API_Tokenpass_URL');\n\t\t\t\tTokenpass.configure(config);\n\t\t\t}\n\t\t});\n\t});\n}\n","import './sideNav.html';\nimport './roomList.html';\nimport './sideNav';\nimport './roomList';\nimport './userPresence';\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\n\nimport { callbacks } from '../../../lib/callbacks';\nimport { ChatSubscription, Rooms, Users, Subscriptions } from '../../models';\nimport { UiTextContext, getUserPreference, roomTypes } from '../../utils';\nimport { settings } from '../../settings';\n\nTemplate.roomList.helpers({\n\trooms() {\n\t\t/*\n\t\t\tmodes:\n\t\t\t\tsortby activity/alphabetical\n\t\t\t\tmerge channels into one list\n\t\t\t\tshow favorites\n\t\t\t\tshow unread\n\t\t*/\n\t\tif (this.anonymous) {\n\t\t\treturn Rooms.find({ t: 'c' }, { sort: { name: 1 } });\n\t\t}\n\n\t\tconst user = Users.findOne(Meteor.userId(), {\n\t\t\tfields: {\n\t\t\t\t'settings.preferences.sidebarSortby': 1,\n\t\t\t\t'settings.preferences.sidebarShowFavorites': 1,\n\t\t\t\t'settings.preferences.sidebarShowUnread': 1,\n\t\t\t\t'services.tokenpass': 1,\n\t\t\t\t'messageViewMode': 1,\n\t\t\t},\n\t\t});\n\n\t\tconst sortBy = getUserPreference(user, 'sidebarSortby') || 'activity';\n\t\tconst query = {\n\t\t\topen: true,\n\t\t};\n\n\t\tconst sort = {};\n\n\t\tif (sortBy === 'activity') {\n\t\t\tsort.lm = -1;\n\t\t} else {\n\t\t\t// alphabetical\n\t\t\tsort[this.identifier === 'd' && settings.get('UI_Use_Real_Name') ? 'lowerCaseFName' : 'lowerCaseName'] = /descending/.test(sortBy)\n\t\t\t\t? -1\n\t\t\t\t: 1;\n\t\t}\n\n\t\tif (this.identifier === 'unread') {\n\t\t\tquery.alert = true;\n\t\t\tquery.$or = [{ hideUnreadStatus: { $ne: true } }, { unread: { $gt: 0 } }];\n\n\t\t\treturn ChatSubscription.find(query, { sort });\n\t\t}\n\n\t\tconst favoritesEnabled = !!(settings.get('Favorite_Rooms') && getUserPreference(user, 'sidebarShowFavorites'));\n\n\t\tif (this.identifier === 'f') {\n\t\t\tquery.f = favoritesEnabled;\n\t\t} else {\n\t\t\tlet types = [this.identifier];\n\n\t\t\tif (this.identifier === 'merged') {\n\t\t\t\ttypes = ['c', 'p', 'd'];\n\t\t\t}\n\n\t\t\tif (this.identifier === 'discussion') {\n\t\t\t\ttypes = ['c', 'p', 'd'];\n\t\t\t\tquery.prid = { $exists: true };\n\t\t\t}\n\n\t\t\tif (this.identifier === 'tokens') {\n\t\t\t\ttypes = ['c', 'p'];\n\t\t\t}\n\n\t\t\tif (['c', 'p'].includes(this.identifier)) {\n\t\t\t\tquery.tokens = { $exists: false };\n\t\t\t} else if (this.identifier === 'tokens' && user && user.services && user.services.tokenpass) {\n\t\t\t\tquery.tokens = { $exists: true };\n\t\t\t}\n\n\t\t\tif (getUserPreference(user, 'sidebarShowUnread')) {\n\t\t\t\tquery.$or = [\n\t\t\t\t\t{ alert: { $ne: true } },\n\t\t\t\t\t{\n\t\t\t\t\t\t$and: [{ hideUnreadStatus: true }, { unread: 0 }],\n\t\t\t\t\t},\n\t\t\t\t];\n\t\t\t}\n\t\t\tquery.t = { $in: types };\n\t\t\tif (favoritesEnabled) {\n\t\t\t\tquery.f = { $ne: favoritesEnabled };\n\t\t\t}\n\t\t}\n\t\treturn ChatSubscription.find(query, { sort });\n\t},\n\n\tisLivechat() {\n\t\treturn this.identifier === 'l';\n\t},\n\n\tshouldAppear(group, rooms) {\n\t\t/*\n\t\tif is a normal group ('channel' 'private' 'direct')\n\t\tor is favorite and has one room\n\t\tor is unread and has one room\n\t\t*/\n\n\t\treturn !['unread', 'f'].includes(group.identifier) || rooms.length || (rooms.count && rooms.count());\n\t},\n\n\troomType(room) {\n\t\tif (room.header || room.identifier) {\n\t\t\treturn `type-${room.header || room.identifier}`;\n\t\t}\n\t},\n\n\tnoSubscriptionText() {\n\t\tconst instance = Template.instance();\n\t\tif (instance.data.anonymous) {\n\t\t\treturn 'No_channels_yet';\n\t\t}\n\t\treturn roomTypes.getConfig(instance.data.identifier).getUiText(UiTextContext.NO_ROOMS_SUBSCRIBED) || 'No_channels_yet';\n\t},\n});\n\nconst getLowerCaseNames = (room, nameDefault = '', fnameDefault = '') => {\n\tconst name = room.name || nameDefault;\n\tconst fname = room.fname || fnameDefault || name;\n\treturn {\n\t\tlowerCaseName: String(name).toLowerCase(),\n\t\tlowerCaseFName: String(fname).toLowerCase(),\n\t};\n};\n\nconst mergeSubRoom = (subscription) => {\n\tconst options = {\n\t\tfields: {\n\t\t\tlm: 1,\n\t\t\tlastMessage: 1,\n\t\t\tuids: 1,\n\t\t\tstreamingOptions: 1,\n\t\t\tusernames: 1,\n\t\t\ttopic: 1,\n\t\t\tencrypted: 1,\n\t\t\tjitsiTimeout: 1,\n\t\t\t// autoTranslate: 1,\n\t\t\t// autoTranslateLanguage: 1,\n\t\t\tdescription: 1,\n\t\t\tannouncement: 1,\n\t\t\tbroadcast: 1,\n\t\t\tarchived: 1,\n\t\t\tavatarETag: 1,\n\t\t\tretention: 1,\n\t\t\tteamId: 1,\n\t\t\tteamMain: 1,\n\n\t\t\tonHold: 1,\n\t\t\tmetrics: 1,\n\t\t\tmuted: 1,\n\t\t\tservedBy: 1,\n\t\t\tts: 1,\n\t\t\twaitingResponse: 1,\n\t\t\tv: 1,\n\t\t\ttranscriptRequest: 1,\n\t\t\ttags: 1,\n\t\t\tclosedAt: 1,\n\t\t\tresponseBy: 1,\n\t\t\tpriorityId: 1,\n\t\t\tlivechatData: 1,\n\t\t\tdepartmentId: 1,\n\t\t\tsource: 1,\n\t\t\tqueuedAt: 1,\n\t\t},\n\t};\n\n\tconst room = Rooms.findOne({ _id: subscription.rid }, options) || {};\n\n\tconst lastRoomUpdate = room.lm || subscription.ts || subscription._updatedAt;\n\n\tconst {\n\t\tencrypted,\n\t\tdescription,\n\t\tcl,\n\t\ttopic,\n\t\tannouncement,\n\t\tbroadcast,\n\t\tarchived,\n\t\tavatarETag,\n\t\tretention,\n\t\tlastMessage,\n\t\tstreamingOptions,\n\t\tteamId,\n\t\tteamMain,\n\t\tuids,\n\t\tusernames,\n\t\tjitsiTimeout,\n\n\t\tv,\n\t\ttranscriptRequest,\n\t\tservedBy,\n\t\tonHold,\n\t\ttags,\n\t\tclosedAt,\n\t\tmetrics,\n\t\tmuted,\n\t\twaitingResponse,\n\t\tresponseBy,\n\t\tpriorityId,\n\t\tlivechatData,\n\t\tdepartmentId,\n\t\tts,\n\t\tsource,\n\t\tqueuedAt,\n\t} = room;\n\n\tsubscription.lm = subscription.lr ? new Date(Math.max(subscription.lr, lastRoomUpdate)) : lastRoomUpdate;\n\n\treturn Object.assign(subscription, getLowerCaseNames(subscription), {\n\t\tencrypted,\n\t\tdescription,\n\t\tcl,\n\t\ttopic,\n\t\tannouncement,\n\t\tbroadcast,\n\t\tarchived,\n\t\tavatarETag,\n\t\tretention,\n\t\tlastMessage,\n\t\tstreamingOptions,\n\t\tteamId,\n\t\tteamMain,\n\t\tuids,\n\t\tusernames,\n\t\tjitsiTimeout,\n\n\t\tv,\n\t\ttranscriptRequest,\n\t\tservedBy,\n\t\tonHold,\n\t\ttags,\n\t\tclosedAt,\n\t\tmetrics,\n\t\tmuted,\n\t\twaitingResponse,\n\t\tresponseBy,\n\t\tpriorityId,\n\t\tlivechatData,\n\t\tdepartmentId,\n\t\tts,\n\t\tsource,\n\t\tqueuedAt,\n\t});\n};\n\nconst mergeRoomSub = (room) => {\n\tconst sub = Subscriptions.findOne({ rid: room._id });\n\tif (!sub) {\n\t\treturn room;\n\t}\n\n\tconst {\n\t\tencrypted,\n\t\tdescription,\n\t\tcl,\n\t\ttopic,\n\t\tannouncement,\n\t\tbroadcast,\n\t\tarchived,\n\t\tavatarETag,\n\t\tretention,\n\t\tlastMessage,\n\t\tstreamingOptions,\n\t\tteamId,\n\t\tteamMain,\n\t\tuids,\n\t\tusernames,\n\t\tjitsiTimeout,\n\n\t\tv,\n\t\ttranscriptRequest,\n\t\tservedBy,\n\t\tonHold,\n\t\ttags,\n\t\tclosedAt,\n\t\tmetrics,\n\t\tmuted,\n\t\twaitingResponse,\n\t\tresponseBy,\n\t\tpriorityId,\n\t\tlivechatData,\n\t\tdepartmentId,\n\t\tts,\n\t\tsource,\n\t\tqueuedAt,\n\t} = room;\n\n\tSubscriptions.update(\n\t\t{\n\t\t\trid: room._id,\n\t\t},\n\t\t{\n\t\t\t$set: {\n\t\t\t\tencrypted,\n\t\t\t\tdescription,\n\t\t\t\tcl,\n\t\t\t\ttopic,\n\t\t\t\tannouncement,\n\t\t\t\tbroadcast,\n\t\t\t\tarchived,\n\t\t\t\tavatarETag,\n\t\t\t\tretention,\n\t\t\t\tuids,\n\t\t\t\tusernames,\n\t\t\t\tlastMessage,\n\t\t\t\tstreamingOptions,\n\t\t\t\tteamId,\n\t\t\t\tteamMain,\n\t\t\t\tv,\n\t\t\t\ttranscriptRequest,\n\t\t\t\tservedBy,\n\t\t\t\tonHold,\n\t\t\t\ttags,\n\t\t\t\tclosedAt,\n\t\t\t\tmetrics,\n\t\t\t\tmuted,\n\t\t\t\twaitingResponse,\n\t\t\t\tresponseBy,\n\t\t\t\tpriorityId,\n\t\t\t\tlivechatData,\n\t\t\t\tdepartmentId,\n\t\t\t\tjitsiTimeout,\n\t\t\t\tts,\n\t\t\t\tsource,\n\t\t\t\tqueuedAt,\n\t\t\t\t...getLowerCaseNames(room, sub.name, sub.fname),\n\t\t\t},\n\t\t},\n\t);\n\n\tSubscriptions.update(\n\t\t{\n\t\t\trid: room._id,\n\t\t\tlm: { $lt: room.lm },\n\t\t},\n\t\t{\n\t\t\t$set: {\n\t\t\t\tlm: room.lm,\n\t\t\t},\n\t\t},\n\t);\n\n\treturn room;\n};\n\ncallbacks.add('cachedCollection-received-rooms', mergeRoomSub);\ncallbacks.add('cachedCollection-sync-rooms', mergeRoomSub);\ncallbacks.add('cachedCollection-loadFromServer-rooms', mergeRoomSub);\n\ncallbacks.add('cachedCollection-received-subscriptions', mergeSubRoom);\ncallbacks.add('cachedCollection-sync-subscriptions', mergeSubRoom);\ncallbacks.add('cachedCollection-loadFromServer-subscriptions', mergeSubRoom);\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Template } from 'meteor/templating';\n\nimport { SideNav, menu } from '../../ui-utils';\nimport { settings } from '../../settings';\nimport { roomTypes, getUserPreference } from '../../utils';\nimport { Users } from '../../models';\n\nTemplate.sideNav.helpers({\n\tflexTemplate() {\n\t\treturn SideNav.getFlex().template;\n\t},\n\n\tflexData() {\n\t\treturn SideNav.getFlex().data;\n\t},\n\n\troomType() {\n\t\treturn roomTypes.getTypes().map((roomType) => ({\n\t\t\ttemplate: roomType.customTemplate || 'roomList',\n\t\t\tdata: {\n\t\t\t\theader: roomType.header,\n\t\t\t\tidentifier: roomType.identifier,\n\t\t\t\tisCombined: roomType.isCombined,\n\t\t\t\tlabel: roomType.label,\n\t\t\t},\n\t\t}));\n\t},\n\n\tloggedInUser() {\n\t\treturn !!Meteor.userId();\n\t},\n\n\tsidebarViewMode() {\n\t\tconst viewMode = getUserPreference(Meteor.userId(), 'sidebarViewMode');\n\t\treturn viewMode || 'condensed';\n\t},\n\n\tsidebarHideAvatar() {\n\t\treturn !getUserPreference(Meteor.userId(), 'sidebarDisplayAvatar');\n\t},\n});\n\nTemplate.sideNav.events({\n\t'click .close-flex'() {\n\t\treturn SideNav.closeFlex();\n\t},\n\n\t'click .arrow'() {\n\t\treturn SideNav.toggleCurrent();\n\t},\n\n\t'scroll .rooms-list'() {\n\t\treturn menu.updateUnreadBars();\n\t},\n\n\t'dropped .sidebar'(e) {\n\t\treturn e.preventDefault();\n\t},\n\t'mouseenter .sidebar-item__link'(e) {\n\t\tconst element = e.currentTarget;\n\t\tsetTimeout(() => {\n\t\t\tconst ellipsedElement = element.querySelector('.sidebar-item__ellipsis');\n\t\t\tconst isTextEllipsed = ellipsedElement.offsetWidth < ellipsedElement.scrollWidth;\n\n\t\t\tif (isTextEllipsed) {\n\t\t\t\telement.setAttribute('title', element.getAttribute('aria-label'));\n\t\t\t} else {\n\t\t\t\telement.removeAttribute('title');\n\t\t\t}\n\t\t}, 0);\n\t},\n});\n\nconst redirectToDefaultChannelIfNeeded = () => {\n\tconst needToBeRedirect = () => ['/', '/home'].includes(FlowRouter.current().path);\n\n\tTracker.autorun((c) => {\n\t\tconst firstChannelAfterLogin = settings.get('First_Channel_After_Login');\n\n\t\tif (!needToBeRedirect()) {\n\t\t\treturn c.stop();\n\t\t}\n\n\t\tif (!firstChannelAfterLogin) {\n\t\t\treturn c.stop();\n\t\t}\n\n\t\tconst room = roomTypes.findRoom('c', firstChannelAfterLogin, Meteor.userId());\n\n\t\tif (!room) {\n\t\t\treturn;\n\t\t}\n\n\t\tc.stop();\n\t\tFlowRouter.go(`/channel/${firstChannelAfterLogin}`);\n\t});\n};\n\nTemplate.sideNav.onRendered(function () {\n\tSideNav.init();\n\tmenu.init();\n\tredirectToDefaultChannelIfNeeded();\n\n\treturn Meteor.defer(() => menu.updateUnreadBars());\n});\n\nTemplate.sideNav.onCreated(function () {\n\tthis.groupedByType = new ReactiveVar(false);\n\n\tthis.autorun(() => {\n\t\tconst user = Users.findOne(Meteor.userId(), {\n\t\t\tfields: {\n\t\t\t\t'settings.preferences.sidebarGroupByType': 1,\n\t\t\t},\n\t\t});\n\t\tconst userPref = getUserPreference(user, 'sidebarGroupByType');\n\t\tthis.groupedByType.set(userPref || settings.get('UI_Group_Channels_By_Type'));\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\nimport { Template } from 'meteor/templating';\nimport { Tracker } from 'meteor/tracker';\n\nimport { Presence } from '../../../client/lib/presence';\n\nimport './userPresence.html';\n\nconst data = new Map();\nconst options = {\n\tthreshold: 0.1,\n};\n\nlet lastEntries = [];\nconst handleEntries = function (entries) {\n\tlastEntries = entries.filter(({ isIntersecting }) => isIntersecting);\n\tlastEntries.forEach(async (entry) => {\n\t\tconst { uid } = data.get(entry.target);\n\t\tPresence.get(uid);\n\t});\n};\n\nconst featureExists = !!window.IntersectionObserver;\n\nconst observer = featureExists && new IntersectionObserver(handleEntries, options);\n\nTracker.autorun(() => {\n\t// Only clear statuses on disconnect, prevent process it on reconnect again\n\tconst isConnected = Meteor.status().connected;\n\tif (!Meteor.userId() || !isConnected) {\n\t\tPresence.reset();\n\t\treturn Meteor.users.update({ status: { $exists: true } }, { $unset: { status: true } }, { multi: true });\n\t}\n\n\tPresence.restart();\n\n\tif (featureExists) {\n\t\tfor (const node of data.keys()) {\n\t\t\tobserver.unobserve(node);\n\t\t\tobserver.observe(node);\n\t\t}\n\t\treturn;\n\t}\n\n\tAccounts.onLogout(() => {\n\t\tPresence.reset();\n\t});\n});\n\nTemplate.userPresence.onRendered(function () {\n\tif (!this.data || !this.data.uid) {\n\t\treturn;\n\t}\n\tdata.set(this.firstNode, this.data);\n\tif (featureExists) {\n\t\treturn observer.observe(this.firstNode);\n\t}\n});\n","import { Blaze } from 'meteor/blaze';\nimport { Template } from 'meteor/templating';\n\nimport { VideoRecorder } from '../../ui';\n\nexport const VRecDialog = new (class {\n\topened = false;\n\n\tdialogView = null;\n\n\tinit() {\n\t\tthis.dialogView = Blaze.render(Template.vrecDialog, document.body);\n\t}\n\n\topen(source, { rid, tmid }) {\n\t\tif (!this.dialogView) {\n\t\t\tthis.init();\n\t\t}\n\n\t\tthis.dialogView.templateInstance().update({\n\t\t\trid,\n\t\t\ttmid,\n\t\t\tinput: source.querySelector('.js-input-message'),\n\t\t});\n\n\t\tthis.source = source;\n\t\tconst dialog = $('.vrec-dialog');\n\t\tthis.dialogView.templateInstance().setPosition(dialog, source);\n\t\tdialog.addClass('show');\n\t\tthis.opened = true;\n\n\t\treturn this.initializeCamera();\n\t}\n\n\tclose() {\n\t\t$('.vrec-dialog').removeClass('show');\n\t\tthis.opened = false;\n\t\tif (this.video != null) {\n\t\t\treturn VideoRecorder.stop();\n\t\t}\n\t}\n\n\tinitializeCamera() {\n\t\tthis.video = $('.vrec-dialog video').get('0');\n\t\tif (!this.video) {\n\t\t\treturn;\n\t\t}\n\t\treturn VideoRecorder.start(this.video);\n\t}\n})();\n","import './vrecord.html';\nimport './vrecord';\nimport { VRecDialog } from './VRecDialog';\nimport './vrecord.css';\n\nexport { VRecDialog };\n","import { Template } from 'meteor/templating';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport _ from 'underscore';\n\nimport { VRecDialog } from './VRecDialog';\nimport { VideoRecorder, fileUpload, UserAction, USER_ACTIVITIES } from '../../ui';\n\nTemplate.vrecDialog.helpers({\n\trecordIcon() {\n\t\tif (VideoRecorder.cameraStarted.get() && VideoRecorder.recording.get()) {\n\t\t\treturn 'icon-stop';\n\t\t}\n\t\treturn 'icon-circle';\n\t},\n\n\tokDisabled() {\n\t\tif (VideoRecorder.cameraStarted.get() && VideoRecorder.recordingAvailable.get()) {\n\t\t\treturn '';\n\t\t}\n\t\treturn 'disabled';\n\t},\n\n\trecordDisabled() {\n\t\treturn VideoRecorder.cameraStarted.get() ? '' : 'disabled';\n\t},\n\n\ttime() {\n\t\treturn Template.instance().time.get();\n\t},\n});\n\nconst recordingInterval = new ReactiveVar(null);\n\nconst stopVideoRecording = (rid, tmid) => {\n\tif (recordingInterval.get()) {\n\t\tclearInterval(recordingInterval.get());\n\t\trecordingInterval.set(null);\n\t}\n\tUserAction.stop(rid, USER_ACTIVITIES.USER_RECORDING, { tmid });\n};\n\nTemplate.vrecDialog.events({\n\t'click .vrec-dialog .cancel'(e, t) {\n\t\tconst rid = t.rid.get();\n\t\tconst tmid = t.tmid.get();\n\n\t\tVideoRecorder.stop();\n\t\tVRecDialog.close();\n\t\tt.time.set('');\n\t\tstopVideoRecording(rid, tmid);\n\t},\n\n\t'click .vrec-dialog .record'(e, t) {\n\t\tconst rid = t.rid.get();\n\t\tconst tmid = t.tmid.get();\n\t\tif (VideoRecorder.recording.get()) {\n\t\t\tVideoRecorder.stopRecording();\n\t\t\tstopVideoRecording(rid, tmid);\n\t\t} else {\n\t\t\tVideoRecorder.record();\n\t\t\tUserAction.performContinuously(rid, USER_ACTIVITIES.USER_RECORDING, { tmid });\n\t\t\tt.time.set('00:00');\n\t\t\tconst startTime = new Date();\n\t\t\trecordingInterval.set(\n\t\t\t\tsetInterval(() => {\n\t\t\t\t\tconst now = new Date();\n\t\t\t\t\tconst distance = (now.getTime() - startTime.getTime()) / 1000;\n\t\t\t\t\tconst minutes = Math.floor(distance / 60);\n\t\t\t\t\tconst seconds = Math.floor(distance % 60);\n\t\t\t\t\tt.time.set(`${String(minutes).padStart(2, '0')}:${String(seconds).padStart(2, '0')}`);\n\t\t\t\t}, 1000),\n\t\t\t);\n\t\t}\n\t},\n\n\t'click .vrec-dialog .ok'(e, instance) {\n\t\tconst [rid, tmid, input] = [instance.rid.get(), instance.tmid.get(), instance.input.get()];\n\t\tconst cb = (blob) => {\n\t\t\tfileUpload([{ file: blob, type: 'video', name: `${TAPi18n.__('Video record')}.webm` }], input, { rid, tmid });\n\t\t\tVRecDialog.close();\n\t\t};\n\t\tVideoRecorder.stop(cb);\n\t\tinstance.time.set('');\n\t\tstopVideoRecording(rid, tmid);\n\t},\n});\n\nTemplate.vrecDialog.onCreated(function () {\n\tthis.width = 400;\n\tthis.height = 290;\n\n\tthis.rid = new ReactiveVar();\n\tthis.tmid = new ReactiveVar();\n\tthis.input = new ReactiveVar();\n\tthis.time = new ReactiveVar('');\n\tthis.update = ({ rid, tmid, input }) => {\n\t\tthis.rid.set(rid);\n\t\tthis.tmid.set(tmid);\n\t\tthis.input.set(input);\n\t};\n\n\tthis.setPosition = function (dialog, source, anchor = 'left') {\n\t\tconst _set = () => {\n\t\t\tconst sourcePos = $(source).offset();\n\t\t\tlet top = sourcePos.top - this.height - 5;\n\n\t\t\tif (top < 0) {\n\t\t\t\ttop = 10;\n\t\t\t}\n\t\t\tif (anchor === 'left') {\n\t\t\t\tlet right = window.innerWidth - (sourcePos.left + source.offsetWidth - 25);\n\t\t\t\tif (right < 0) {\n\t\t\t\t\tright = 10;\n\t\t\t\t}\n\t\t\t\treturn dialog.css({ top: `${top}px`, right: `${right}px` });\n\t\t\t}\n\t\t\tlet left = sourcePos.left - this.width + 100;\n\t\t\tif (left < 0) {\n\t\t\t\tleft = 10;\n\t\t\t}\n\t\t\treturn dialog.css({ top: `${top}px`, left: `${left}px` });\n\t\t};\n\n\t\tconst set = _.debounce(_set, 2000);\n\t\t_set();\n\t\tthis.remove = set;\n\t\t$(window).on('resize', set);\n\t};\n});\n\nTemplate.vrecDialog.onDestroyed(function () {\n\tVRecDialog.close(this.rid.get());\n\t$(window).off('resize', this.remove);\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../settings';\n\nMeteor.startup(() => {\n\tTracker.autorun((c) => {\n\t\tif (!settings.get('Webdav_Integration_Enabled')) {\n\t\t\treturn;\n\t\t}\n\t\tc.stop();\n\t\timport('./startup/messageBoxActions');\n\t\timport('./startup/sync');\n\t\timport('./actionButton');\n\t\timport('./webdavFilePicker.html');\n\t\timport('./webdavFilePicker.css');\n\t\timport('./webdavFilePicker');\n\t\timport('./selectWebdavAccount.html');\n\t\timport('./selectWebdavAccount');\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { MessageTypes } from '../../../../ui-utils/client';\n\nMeteor.startup(function () {\n\tMessageTypes.registerType({\n\t\tid: 'discussion-created',\n\t\tsystem: false,\n\t\tmessage: 'discussion-created',\n\t\tdata(message) {\n\t\t\treturn {\n\t\t\t\tmessage: `<svg class=\"rc-icon\" aria-hidden=\"true\"><use xlink:href=\"#icon-discussion\"></use></svg> ${message.msg}`,\n\t\t\t};\n\t\t},\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../settings/client';\nimport { hasPermission } from '../../authorization/client';\nimport { MessageAction } from '../../ui-utils/client';\nimport { messageArgs } from '../../ui-utils/client/lib/messageArgs';\nimport { roomTypes } from '../../utils/client';\nimport { imperativeModal } from '../../../client/lib/imperativeModal';\nimport CreateDiscussion from '../../../client/components/CreateDiscussion/CreateDiscussion';\n\nMeteor.startup(function () {\n\tTracker.autorun(() => {\n\t\tif (!settings.get('Discussion_enabled')) {\n\t\t\treturn MessageAction.removeButton('start-discussion');\n\t\t}\n\n\t\tMessageAction.addButton({\n\t\t\tid: 'start-discussion',\n\t\t\ticon: 'discussion',\n\t\t\tlabel: 'Discussion_start',\n\t\t\tcontext: ['message', 'message-mobile'],\n\t\t\tasync action() {\n\t\t\t\tconst { msg: message, room } = messageArgs(this);\n\n\t\t\t\timperativeModal.open({\n\t\t\t\t\tcomponent: CreateDiscussion,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tdefaultParentRoom: room.prid || room._id,\n\t\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t\t\tparentMessageId: message._id,\n\t\t\t\t\t\tnameSuggestion: message?.msg?.substr(0, 140),\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t},\n\t\t\tcondition({\n\t\t\t\tmsg: {\n\t\t\t\t\tu: { _id: uid },\n\t\t\t\t\tdrid,\n\t\t\t\t\tdcount,\n\t\t\t\t},\n\t\t\t\troom,\n\t\t\t\tsubscription,\n\t\t\t\tu,\n\t\t\t}) {\n\t\t\t\tif (drid || !isNaN(dcount)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tif (!subscription) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t\tconst isLivechatRoom = roomTypes.isLivechatRoom(room.t);\n\t\t\t\tif (isLivechatRoom) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn uid !== u._id ? hasPermission('start-discussion-other-user') : hasPermission('start-discussion');\n\t\t\t},\n\t\t\torder: 1,\n\t\t\tgroup: 'menu',\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { messageBox } from '../../ui-utils/client';\nimport { settings } from '../../settings/client';\nimport { hasPermission } from '../../authorization/client';\nimport { imperativeModal } from '../../../client/lib/imperativeModal';\nimport CreateDiscussion from '../../../client/components/CreateDiscussion/CreateDiscussion';\n\nMeteor.startup(function () {\n\tTracker.autorun(() => {\n\t\tif (!settings.get('Discussion_enabled')) {\n\t\t\treturn messageBox.actions.remove('Create_new', /start-discussion/);\n\t\t}\n\t\tmessageBox.actions.add('Create_new', 'Discussion', {\n\t\t\tid: 'start-discussion',\n\t\t\ticon: 'discussion',\n\t\t\tcondition: () => hasPermission('start-discussion') || hasPermission('start-discussion-other-user'),\n\t\t\taction(data) {\n\t\t\t\timperativeModal.open({\n\t\t\t\t\tcomponent: CreateDiscussion,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tdefaultParentRoom: data.prid || data.rid,\n\t\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t});\n});\n","// Other UI extensions\nimport './lib/messageTypes/discussionMessage';\nimport './createDiscussionMessageAction';\nimport './discussionFromMessageBox';\nimport './tabBar';\n\nimport '../lib/discussionRoomType';\n","import { useMemo, lazy } from 'react';\n\nimport { addAction } from '../../../client/views/room/lib/Toolbox';\nimport { useSetting } from '../../../client/contexts/SettingsContext';\n\nconst template = lazy(() => import('../../../client/views/room/contextualBar/Discussions'));\n\naddAction('discussions', ({ room: { prid } }) => {\n\tconst discussionEnabled = useSetting('Discussion_enabled');\n\n\treturn useMemo(\n\t\t() =>\n\t\t\tdiscussionEnabled && !prid\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\t\t\t\tid: 'discussions',\n\t\t\t\t\t\ttitle: 'Discussions',\n\t\t\t\t\t\ticon: 'discussion',\n\t\t\t\t\t\ttemplate,\n\t\t\t\t\t\tfull: true,\n\t\t\t\t\t\torder: 3,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[discussionEnabled, prid],\n\t);\n});\n","import { RoomTypeConfig, roomTypes } from '../../utils';\n\nexport class DiscussionRoomType extends RoomTypeConfig {\n\tconstructor() {\n\t\tsuper({\n\t\t\tidentifier: 't',\n\t\t\torder: 25,\n\t\t\tlabel: 'Discussion',\n\t\t});\n\t}\n}\n\nroomTypes.add(new DiscussionRoomType());\n","/*\n * Filter markdown tags in message\n *\tUse case: notifications\n */\nexport const filtered = (\n\tmessage,\n\toptions = {\n\t\tsupportSchemesForLink: 'http,https',\n\t},\n) => {\n\tconst schemes = options.supportSchemesForLink.split(',').join('|');\n\n\t// Remove block code backticks\n\tmessage = message.replace(/```/g, '');\n\n\t// Remove inline code backticks\n\tmessage = message.replace(new RegExp(/`([^`\\r\\n]+)\\`/gm), (match) => match.substr(1, match.length - 2));\n\n\t// Filter [text](url), ![alt_text](image_url)\n\tmessage = message.replace(new RegExp(`!?\\\\[([^\\\\]]+)\\\\]\\\\((?:${schemes}):\\\\/\\\\/[^\\\\)]+\\\\)`, 'gm'), (match, title) => title);\n\n\t// Filter <http://link|Text>\n\tmessage = message.replace(\n\t\tnew RegExp(`(?:<|&lt;)(?:${schemes}):\\\\/\\\\/[^\\\\|]+\\\\|(.+?)(?=>|&gt;)(?:>|&gt;)`, 'gm'),\n\t\t(match, title) => title,\n\t);\n\n\t// Filter headings\n\tmessage = message.replace(\n\t\t/(^#{1,4}) (([\\S\\w\\d-_\\/\\*\\.,\\\\][ \\u00a0\\u1680\\u180e\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]?)+)/gm,\n\t\t'$2',\n\t);\n\n\t// Filter bold\n\tmessage = message.replace(/(^|>|[ >_~`])\\*{1,2}([^\\*\\r\\n]+)\\*{1,2}([<_~`]|\\B|\\b|$)/gm, '$1$2$3');\n\n\t// Filter italics\n\tmessage = message.replace(/(^|>|[ >*~`])\\_{1,2}([^\\_\\r\\n]+)\\_{1,2}([<*~`]|\\B|\\b|$)/gm, '$1$2$3');\n\n\t// Filter strike-through text\n\tmessage = message.replace(/(^|>|[ >_*`])\\~{1,2}([^~\\r\\n]+)\\~{1,2}([<_*`]|\\B|\\b|$)/gm, '$1$2$3');\n\n\t// Filter block quotes\n\tmessage = message.replace(/(?:>){3}\\n+([\\s\\S]*?)\\n+(?:<){3}/g, '$1');\n\n\t// Filter > quote\n\tmessage = message.replace(/^>(.*)$/gm, '$1');\n\n\treturn message;\n};\n","import { Random } from 'meteor/random';\nimport _ from 'underscore';\nimport _marked from 'marked';\nimport createDOMPurify from 'dompurify';\nimport { unescapeHTML, escapeHTML } from '@rocket.chat/string-helpers';\n\nimport hljs, { register } from '../../hljs';\nimport { getGlobalWindow } from '../../getGlobalWindow';\n\nconst renderer = new _marked.Renderer();\n\nlet msg = null;\n\nrenderer.code = function (code, lang, escaped) {\n\tif (this.options.highlight) {\n\t\tconst out = this.options.highlight(code, lang);\n\t\tif (out != null && out !== code) {\n\t\t\tescaped = true;\n\t\t\tcode = out;\n\t\t}\n\t}\n\n\tlet text = null;\n\n\tif (!lang) {\n\t\ttext = `<pre><code class=\"code-colors hljs\">${escaped ? code : escapeHTML(code)}</code></pre>`;\n\t} else {\n\t\ttext = `<pre><code class=\"code-colors hljs ${escape(lang, true)}\">${escaped ? code : escapeHTML(code)}</code></pre>`;\n\t}\n\n\tif (_.isString(msg)) {\n\t\treturn text;\n\t}\n\n\tconst token = `=!=${Random.id()}=!=`;\n\tmsg.tokens.push({\n\t\thighlight: true,\n\t\ttoken,\n\t\ttext,\n\t});\n\n\treturn token;\n};\n\nrenderer.codespan = function (text) {\n\ttext = `<code class=\"code-colors inline\">${text}</code>`;\n\tif (_.isString(msg)) {\n\t\treturn text;\n\t}\n\n\tconst token = `=!=${Random.id()}=!=`;\n\tmsg.tokens.push({\n\t\ttoken,\n\t\ttext,\n\t});\n\n\treturn token;\n};\n\nrenderer.blockquote = function (quote) {\n\treturn `<blockquote class=\"background-transparent-darker-before\">${quote}</blockquote>`;\n};\n\nconst linkRenderer = renderer.link;\nrenderer.link = function (href, title, text) {\n\tconst html = linkRenderer.call(renderer, href, title, text);\n\treturn html.replace(/^<a /, '<a target=\"_blank\" rel=\"nofollow noopener noreferrer\" ');\n};\n\nconst highlight = function (code, lang) {\n\tif (!lang) {\n\t\treturn code;\n\t}\n\ttry {\n\t\tregister(lang);\n\t\treturn hljs.highlight(lang, code).value;\n\t} catch (e) {\n\t\t// Unknown language\n\t\treturn code;\n\t}\n};\n\nexport const marked = (message, { marked: { gfm, tables, breaks, pedantic, smartLists, smartypants } = {} }) => {\n\tmsg = message;\n\n\tif (!message.tokens) {\n\t\tmessage.tokens = [];\n\t}\n\n\tmessage.html = _marked(unescapeHTML(message.html), {\n\t\tgfm,\n\t\ttables,\n\t\tbreaks,\n\t\tpedantic,\n\t\tsmartLists,\n\t\tsmartypants,\n\t\trenderer,\n\t\thighlight,\n\t});\n\n\tconst window = getGlobalWindow();\n\tconst DomPurify = createDOMPurify(window);\n\tmessage.html = DomPurify.sanitize(message.html, { ADD_ATTR: ['target'] });\n\n\treturn message;\n};\n","/*\n * code() is a named function that will parse `inline code` and ```codeblock``` syntaxes\n * @param {Object} message - The message object\n */\nimport { unescapeHTML } from '@rocket.chat/string-helpers';\n\nimport hljs, { register } from '../../hljs';\nimport { addAsToken } from './token';\n\nconst inlinecode = (message) => {\n\t// Support `text`\n\tmessage.html = message.html.replace(/\\`([^`\\r\\n]+)\\`([<_*~]|\\B|\\b|$)/gm, (match, p1, p2) =>\n\t\taddAsToken(\n\t\t\tmessage,\n\t\t\t`<span class=\\\"copyonly\\\">\\`</span><span><code class=\\\"code-colors inline\\\">${p1}</code></span><span class=\\\"copyonly\\\">\\`</span>${p2}`,\n\t\t\t'inlinecode',\n\t\t\t{ noHtml: match },\n\t\t),\n\t);\n};\n\nconst codeblocks = (message) => {\n\t// Count occurencies of ```\n\tconst count = (message.html.match(/```/gm) || []).length;\n\n\tif (count) {\n\t\t// Check if we need to add a final ```\n\t\tif (count % 2 > 0) {\n\t\t\tmessage.html = `${message.html}\\n\\`\\`\\``;\n\t\t\tmessage.msg = `${message.msg}\\n\\`\\`\\``;\n\t\t}\n\n\t\t// Separate text in code blocks and non code blocks\n\t\tconst msgParts = message.html.split(/(^.*)(```(?:[a-zA-Z]+)?(?:(?:.|\\r|\\n)*?)```)(.*\\n?)$/gm);\n\n\t\tfor (let index = 0; index < msgParts.length; index++) {\n\t\t\t// Verify if this part is code\n\t\t\tconst part = msgParts[index];\n\t\t\tconst codeMatch = part.match(/^```[\\r\\n]*(.*[\\r\\n\\ ]?)[\\r\\n]*([\\s\\S]*?)```+?$/);\n\n\t\t\tif (codeMatch) {\n\t\t\t\t// Process highlight if this part is code\n\t\t\t\tconst singleLine = codeMatch[0].indexOf('\\n') === -1;\n\t\t\t\tconst lang = !singleLine && Array.from(hljs.listLanguages()).includes(codeMatch[1].trim()) ? codeMatch[1].trim() : '';\n\t\t\t\tconst emptyLanguage = lang === '' ? unescapeHTML(codeMatch[1] + codeMatch[2]) : unescapeHTML(codeMatch[2]);\n\t\t\t\tconst code = singleLine ? unescapeHTML(codeMatch[1]) : emptyLanguage;\n\n\t\t\t\tconst result = (() => {\n\t\t\t\t\tif (lang) {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tregister(lang);\n\t\t\t\t\t\t\treturn hljs.highlight(lang, code);\n\t\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\t\tconsole.error(error);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn hljs.highlightAuto(lang + code);\n\t\t\t\t})();\n\t\t\t\tconst token = addAsToken(\n\t\t\t\t\tmessage,\n\t\t\t\t\t`<pre><code class='code-colors hljs ${result.language}'><span class='copyonly'>\\`\\`\\`<br></span>${result.value}<span class='copyonly'><br>\\`\\`\\`</span></code></pre>`,\n\t\t\t\t\t'code',\n\t\t\t\t\t{\n\t\t\t\t\t\tnoHtml: codeMatch[0],\n\t\t\t\t\t\thighlight: true,\n\t\t\t\t\t},\n\t\t\t\t);\n\n\t\t\t\tmsgParts[index] = token;\n\t\t\t} else {\n\t\t\t\tmsgParts[index] = part;\n\t\t\t}\n\t\t}\n\n\t\t// Re-mount message\n\t\tmessage.html = msgParts.join('');\n\t}\n};\n\nexport const code = (message) => {\n\tif (message.html?.trim()) {\n\t\tcodeblocks(message);\n\t\tinlinecode(message);\n\t}\n\n\treturn message;\n};\n","import { addAsToken, isToken, validateAllowedTokens } from './token';\n\nconst validateUrl = (url, message) => {\n\t// Don't render markdown inside links\n\tif (message?.tokens?.some((token) => url.includes(token.token))) {\n\t\treturn false;\n\t}\n\n\t// Valid urls don't contain whitespaces\n\tif (/\\s/.test(url.trim())) {\n\t\treturn false;\n\t}\n\n\ttry {\n\t\tnew URL(url);\n\t\treturn true;\n\t} catch (e) {\n\t\treturn false;\n\t}\n};\n\nconst endsWithWhitespace = (text) => text.substring(text.length - 1).match(/\\s/);\n\nconst getParseableMarkersCount = (start, end) => {\n\tconst usableMarkers = start.length > 1 ? 2 : 1;\n\treturn end.length - usableMarkers >= 0 ? usableMarkers : 1;\n};\n\nconst getTextWrapper = (marker, tagName) => (textPrepend, wrappedText, textAppend) =>\n\t`${textPrepend}<span class=\"copyonly\">${marker}</span><${tagName}>${wrappedText}</${tagName}><span class=\"copyonly\">${marker}</span>${textAppend}`;\n\nconst getRegexReplacer = (replaceFunction, getRegex) => (marker, tagName) => {\n\tconst wrapper = getTextWrapper(marker, tagName);\n\treturn (msg) => msg.replace(getRegex(marker), (...args) => replaceFunction(wrapper, ...args));\n};\n\nconst getParserWithCustomMarker = getRegexReplacer(\n\t(wrapper, match, p1, p2, p3) => {\n\t\tif (endsWithWhitespace(p2)) {\n\t\t\treturn match;\n\t\t}\n\t\tconst finalMarkerCount = getParseableMarkersCount(p1, p3);\n\t\treturn wrapper(p1.substring(finalMarkerCount), p2, p3.substring(finalMarkerCount));\n\t},\n\t(marker) => new RegExp(`(\\\\${marker}+(?!\\\\s))([^\\\\${marker}\\\\r\\\\n]+)(\\\\${marker}+)`, 'gm'),\n);\n\nconst parseBold = getParserWithCustomMarker('*', 'strong');\n\nconst parseStrike = getParserWithCustomMarker('~', 'strike');\n\nconst parseItalic = getRegexReplacer(\n\t(wrapper, match, p1, p2, p3, p4, p5) => {\n\t\tif (p1 || p5 || endsWithWhitespace(p3)) {\n\t\t\treturn match;\n\t\t}\n\n\t\tconst finalMarkerCount = getParseableMarkersCount(p2, p4);\n\t\treturn wrapper(p2.substring(finalMarkerCount), p3, p4.substring(finalMarkerCount));\n\t},\n\t() => new RegExp('([^\\\\r\\\\n\\\\s~*_]){0,1}(\\\\_+(?!\\\\s))([^\\\\_\\\\r\\\\n]+)(\\\\_+)([^\\\\r\\\\n\\\\s]){0,1}', 'gm'),\n)('_', 'em');\n\nconst parseNotEscaped = (message, { supportSchemesForLink, headers, rootUrl }) => {\n\tlet msg = message.html;\n\tif (!message.tokens) {\n\t\tmessage.tokens = [];\n\t}\n\n\tconst schemes = (supportSchemesForLink || '').split(',').join('|');\n\n\tif (headers) {\n\t\t// Support # Text for h1\n\t\tmsg = msg.replace(\n\t\t\t/^# (([\\S\\w\\d-_\\/\\*\\.,\\\\][ \\u00a0\\u1680\\u180e\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]?)+)/gm,\n\t\t\t'<h1>$1</h1>',\n\t\t);\n\n\t\t// Support # Text for h2\n\t\tmsg = msg.replace(\n\t\t\t/^## (([\\S\\w\\d-_\\/\\*\\.,\\\\][ \\u00a0\\u1680\\u180e\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]?)+)/gm,\n\t\t\t'<h2>$1</h2>',\n\t\t);\n\n\t\t// Support # Text for h3\n\t\tmsg = msg.replace(\n\t\t\t/^### (([\\S\\w\\d-_\\/\\*\\.,\\\\][ \\u00a0\\u1680\\u180e\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]?)+)/gm,\n\t\t\t'<h3>$1</h3>',\n\t\t);\n\n\t\t// Support # Text for h4\n\t\tmsg = msg.replace(\n\t\t\t/^#### (([\\S\\w\\d-_\\/\\*\\.,\\\\][ \\u00a0\\u1680\\u180e\\u2000-\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000\\ufeff]?)+)/gm,\n\t\t\t'<h4>$1</h4>',\n\t\t);\n\t}\n\n\t// Support *text* to make bold\n\tmsg = parseBold(msg);\n\n\t// Support _text_ to make italics\n\tmsg = parseItalic(msg);\n\n\t// // Support ~text~ to strike through text\n\tmsg = parseStrike(msg);\n\n\t// Support for block quote\n\t// >>>\n\t// Text\n\t// <<<\n\tmsg = msg.replace(\n\t\t/(?:&gt;){3}\\n+([\\s\\S]*?)\\n+(?:&lt;){3}/g,\n\t\t'<blockquote class=\"background-transparent-darker-before\"><span class=\"copyonly\">&gt;&gt;&gt;</span>$1<span class=\"copyonly\">&lt;&lt;&lt;</span></blockquote>',\n\t);\n\n\t// Support >Text for quote\n\tmsg = msg.replace(\n\t\t/^&gt;(.*)$/gm,\n\t\t'<blockquote class=\"background-transparent-darker-before\"><span class=\"copyonly\">&gt;</span>$1</blockquote>',\n\t);\n\n\t// Remove white-space around blockquote (prevent <br>). Because blockquote is block element.\n\tmsg = msg.replace(\n\t\t/\\s*<blockquote class=\"background-transparent-darker-before\">/gm,\n\t\t'<blockquote class=\"background-transparent-darker-before\">',\n\t);\n\tmsg = msg.replace(/<\\/blockquote>\\s*/gm, '</blockquote>');\n\n\t// Remove new-line between blockquotes.\n\tmsg = msg.replace(/<\\/blockquote>\\n<blockquote/gm, '</blockquote><blockquote');\n\n\t// Support ![alt text](http://image url)\n\tmsg = msg.replace(new RegExp(`!\\\\[([^\\\\]]+)\\\\]\\\\(((?:${schemes}):\\\\/\\\\/[^\\\\s]+)\\\\)`, 'gm'), (match, title, url) => {\n\t\tif (!validateUrl(url, message)) {\n\t\t\treturn match;\n\t\t}\n\t\tif (isToken(title) && !validateAllowedTokens(message, title, ['bold', 'italic', 'strike'])) {\n\t\t\treturn match;\n\t\t}\n\t\turl = encodeURI(url);\n\n\t\tconst target = url.indexOf(rootUrl) === 0 ? '' : '_blank';\n\t\treturn addAsToken(\n\t\t\tmessage,\n\t\t\t`<a data-title=\"${url}\" href=\"${url}\" title=\"${title}\" target=\"${target}\" rel=\"noopener noreferrer\"><div class=\"inline-image\" style=\"background-image: url(${url});\"></div></a>`,\n\t\t\t'link',\n\t\t);\n\t});\n\n\t// Support [Text](http://link)\n\tmsg = msg.replace(new RegExp(`\\\\[([^\\\\]]+)\\\\]\\\\(((?:${schemes}):\\\\/\\\\/[^\\\\s]+)\\\\)`, 'gm'), (match, title, url) => {\n\t\tif (!validateUrl(url, message)) {\n\t\t\treturn match;\n\t\t}\n\t\tif (isToken(title) && !validateAllowedTokens(message, title, ['bold', 'italic', 'strike'])) {\n\t\t\treturn match;\n\t\t}\n\t\tconst target = url.indexOf(rootUrl) === 0 ? '' : '_blank';\n\t\ttitle = title.replace(/&amp;/g, '&');\n\n\t\tconst escapedUrl = encodeURI(url);\n\n\t\treturn addAsToken(\n\t\t\tmessage,\n\t\t\t`<a data-title=\"${escapedUrl}\" href=\"${escapedUrl}\" target=\"${target}\" rel=\"noopener noreferrer\">${title}</a>`,\n\t\t\t'link',\n\t\t);\n\t});\n\n\t// Support <http://link|Text>\n\tmsg = msg.replace(new RegExp(`(?:<|&lt;)((?:${schemes}):\\\\\\/\\\\\\/[^\\\\|]+)\\\\|(.+?)(?=>|&gt;)(?:>|&gt;)`, 'gm'), (match, url, title) => {\n\t\tif (!validateUrl(url, message)) {\n\t\t\treturn match;\n\t\t}\n\t\tif (isToken(title) && !validateAllowedTokens(message, title, ['bold', 'italic', 'strike'])) {\n\t\t\treturn match;\n\t\t}\n\t\turl = encodeURI(url);\n\t\tconst target = url.indexOf(rootUrl) === 0 ? '' : '_blank';\n\t\treturn addAsToken(message, `<a data-title=\"${url}\" href=\"${url}\" target=\"${target}\" rel=\"noopener noreferrer\">${title}</a>`, 'link');\n\t});\n\treturn msg;\n};\n\nexport const markdown = (message, options) => {\n\tmessage.html = parseNotEscaped(message, options);\n\treturn message;\n};\n","/*\n * Markdown is a named function that will parse markdown syntax\n * @param {Object} message - The message object\n */\nimport { markdown } from './markdown.js';\nimport { code } from './code.js';\n\nexport const original = (\n\tmessage,\n\toptions = {\n\t\tsupportSchemesForLink: 'http,https',\n\t\theaders: true,\n\t},\n) => {\n\t// Parse markdown code\n\tmessage = code(message);\n\n\t// Parse markdown\n\tmessage = markdown(message, options);\n\n\t// Replace linebreak to br\n\tmessage.html = message.html.replace(/\\n/gm, '<br>');\n\n\treturn message;\n};\n","/*\n * Markdown is a named function that will parse markdown syntax\n * @param {String} msg - The message html\n */\nimport { Random } from 'meteor/random';\n\nimport { IMessage } from '../../../../../definition/IMessage';\n\ntype TokenType = 'code' | 'inlinecode' | 'bold' | 'italic' | 'strike' | 'link';\ntype Token = {\n\ttoken: string;\n\ttype: TokenType;\n\ttext: string;\n\tnoHtml?: string;\n} & TokenExtra;\n\ntype TokenExtra = {\n\thighlight?: boolean;\n\tnoHtml?: string;\n};\n\nexport const addAsToken = (message: IMessage & { tokens: Token[] }, html: string, type: TokenType, extra?: TokenExtra): string => {\n\tif (!message.tokens) {\n\t\tmessage.tokens = [];\n\t}\n\tconst token = `=!=${Random.id()}=!=`;\n\tmessage.tokens.push({\n\t\ttoken,\n\t\ttype,\n\t\ttext: html,\n\t\t...(extra && { ...extra }),\n\t});\n\n\treturn token;\n};\n\nexport const isToken = (msg: string): boolean => /=!=[.a-z0-9]{17}=!=/gim.test(msg.trim());\n\nexport const validateAllowedTokens = (message: IMessage & { tokens: Token[] }, id: string, desiredTokens: TokenType[]): boolean => {\n\tconst tokens = id.match(/=!=[.a-z0-9]{17}=!=/gim) || [];\n\tconst tokensFound = message.tokens.filter(({ token }) => tokens.includes(token));\n\treturn tokensFound.length === 0 || tokensFound.every((token) => desiredTokens.includes(token.type));\n};\n\nexport const validateForbiddenTokens = (message: IMessage & { tokens: Token[] }, id: string, desiredTokens: TokenType[]): boolean => {\n\tconst tokens = id.match(/=!=[.a-z0-9]{17}=!=/gim) || [];\n\tconst tokensFound = message.tokens.filter(({ token }) => tokens.includes(token));\n\treturn tokensFound.length === 0 || !tokensFound.some((token) => desiredTokens.includes(token.type));\n};\n","import { Meteor } from 'meteor/meteor';\n\nexport const { getGlobalWindow } = Meteor.isServer ? require('../server/getGlobalWindow') : require('../client/getGlobalWindow');\n","import hljs from 'highlight.js/lib/highlight';\nimport clean from 'highlight.js/lib/languages/clean';\nimport markdown from 'highlight.js/lib/languages/markdown';\nimport javascript from 'highlight.js/lib/languages/javascript';\n\nhljs.registerLanguage('markdown', markdown);\nhljs.registerLanguage('clean', clean);\nhljs.registerLanguage('javascript', javascript);\n// eslint-disable-next-line complexity\nexport const register = async (lang) => {\n\tswitch (lang) {\n\t\tcase 'onec':\n\t\t\treturn hljs.registerLanguage('onec', (await import('highlight.js/lib/languages/1c')).default);\n\t\tcase 'abnf':\n\t\t\treturn hljs.registerLanguage('abnf', (await import('highlight.js/lib/languages/abnf')).default);\n\t\tcase 'accesslog':\n\t\t\treturn hljs.registerLanguage('accesslog', (await import('highlight.js/lib/languages/accesslog')).default);\n\t\tcase 'actionscript':\n\t\t\treturn hljs.registerLanguage('actionscript', (await import('highlight.js/lib/languages/actionscript')).default);\n\t\tcase 'ada':\n\t\t\treturn hljs.registerLanguage('ada', (await import('highlight.js/lib/languages/ada')).default);\n\t\tcase 'apache':\n\t\t\treturn hljs.registerLanguage('apache', (await import('highlight.js/lib/languages/apache')).default);\n\t\tcase 'applescript':\n\t\t\treturn hljs.registerLanguage('applescript', (await import('highlight.js/lib/languages/applescript')).default);\n\t\tcase 'arduino':\n\t\t\treturn hljs.registerLanguage('arduino', (await import('highlight.js/lib/languages/arduino')).default);\n\t\tcase 'armasm':\n\t\t\treturn hljs.registerLanguage('armasm', (await import('highlight.js/lib/languages/armasm')).default);\n\t\tcase 'asciidoc':\n\t\t\treturn hljs.registerLanguage('asciidoc', (await import('highlight.js/lib/languages/asciidoc')).default);\n\t\tcase 'aspectj':\n\t\t\treturn hljs.registerLanguage('aspectj', (await import('highlight.js/lib/languages/aspectj')).default);\n\t\tcase 'autohotkey':\n\t\t\treturn hljs.registerLanguage('autohotkey', (await import('highlight.js/lib/languages/autohotkey')).default);\n\t\tcase 'autoit':\n\t\t\treturn hljs.registerLanguage('autoit', (await import('highlight.js/lib/languages/autoit')).default);\n\t\tcase 'avrasm':\n\t\t\treturn hljs.registerLanguage('avrasm', (await import('highlight.js/lib/languages/avrasm')).default);\n\t\tcase 'awk':\n\t\t\treturn hljs.registerLanguage('awk', (await import('highlight.js/lib/languages/awk')).default);\n\t\tcase 'axapta':\n\t\t\treturn hljs.registerLanguage('axapta', (await import('highlight.js/lib/languages/axapta')).default);\n\t\tcase 'bash':\n\t\t\treturn hljs.registerLanguage('bash', (await import('highlight.js/lib/languages/bash')).default);\n\t\tcase 'basic':\n\t\t\treturn hljs.registerLanguage('basic', (await import('highlight.js/lib/languages/basic')).default);\n\t\tcase 'bnf':\n\t\t\treturn hljs.registerLanguage('bnf', (await import('highlight.js/lib/languages/bnf')).default);\n\t\tcase 'brainfuck':\n\t\t\treturn hljs.registerLanguage('brainfuck', (await import('highlight.js/lib/languages/brainfuck')).default);\n\t\tcase 'cal':\n\t\t\treturn hljs.registerLanguage('cal', (await import('highlight.js/lib/languages/cal')).default);\n\t\tcase 'capnproto':\n\t\t\treturn hljs.registerLanguage('capnproto', (await import('highlight.js/lib/languages/capnproto')).default);\n\t\tcase 'ceylon':\n\t\t\treturn hljs.registerLanguage('ceylon', (await import('highlight.js/lib/languages/ceylon')).default);\n\t\tcase 'clean':\n\t\t\treturn hljs.registerLanguage('clean', (await import('highlight.js/lib/languages/clean')).default);\n\t\tcase 'clojure':\n\t\t\treturn hljs.registerLanguage('clojure', (await import('highlight.js/lib/languages/clojure')).default);\n\t\tcase 'clojure-repl':\n\t\t\treturn hljs.registerLanguage('clojure-repl', (await import('highlight.js/lib/languages/clojure-repl')).default);\n\t\tcase 'cmake':\n\t\t\treturn hljs.registerLanguage('cmake', (await import('highlight.js/lib/languages/cmake')).default);\n\t\tcase 'coffeescript':\n\t\t\treturn hljs.registerLanguage('coffeescript', (await import('highlight.js/lib/languages/coffeescript')).default);\n\t\tcase 'coq':\n\t\t\treturn hljs.registerLanguage('coq', (await import('highlight.js/lib/languages/coq')).default);\n\t\tcase 'cos':\n\t\t\treturn hljs.registerLanguage('cos', (await import('highlight.js/lib/languages/cos')).default);\n\t\tcase 'cpp':\n\t\t\treturn hljs.registerLanguage('cpp', (await import('highlight.js/lib/languages/cpp')).default);\n\t\tcase 'crmsh':\n\t\t\treturn hljs.registerLanguage('crmsh', (await import('highlight.js/lib/languages/crmsh')).default);\n\t\tcase 'crystal':\n\t\t\treturn hljs.registerLanguage('crystal', (await import('highlight.js/lib/languages/crystal')).default);\n\t\tcase 'cs':\n\t\t\treturn hljs.registerLanguage('cs', (await import('highlight.js/lib/languages/cs')).default);\n\t\tcase 'csp':\n\t\t\treturn hljs.registerLanguage('csp', (await import('highlight.js/lib/languages/csp')).default);\n\t\tcase 'css':\n\t\t\treturn hljs.registerLanguage('css', (await import('highlight.js/lib/languages/css')).default);\n\t\tcase 'd':\n\t\t\treturn hljs.registerLanguage('d', (await import('highlight.js/lib/languages/d')).default);\n\t\tcase 'dart':\n\t\t\treturn hljs.registerLanguage('dart', (await import('highlight.js/lib/languages/dart')).default);\n\t\tcase 'delphi':\n\t\t\treturn hljs.registerLanguage('delphi', (await import('highlight.js/lib/languages/delphi')).default);\n\t\tcase 'diff':\n\t\t\treturn hljs.registerLanguage('diff', (await import('highlight.js/lib/languages/diff')).default);\n\t\tcase 'django':\n\t\t\treturn hljs.registerLanguage('django', (await import('highlight.js/lib/languages/django')).default);\n\t\tcase 'dns':\n\t\t\treturn hljs.registerLanguage('dns', (await import('highlight.js/lib/languages/dns')).default);\n\t\tcase 'dockerfile':\n\t\t\treturn hljs.registerLanguage('dockerfile', (await import('highlight.js/lib/languages/dockerfile')).default);\n\t\tcase 'dos':\n\t\t\treturn hljs.registerLanguage('dos', (await import('highlight.js/lib/languages/dos')).default);\n\t\tcase 'dsconfig':\n\t\t\treturn hljs.registerLanguage('dsconfig', (await import('highlight.js/lib/languages/dsconfig')).default);\n\t\tcase 'dts':\n\t\t\treturn hljs.registerLanguage('dts', (await import('highlight.js/lib/languages/dts')).default);\n\t\tcase 'dust':\n\t\t\treturn hljs.registerLanguage('dust', (await import('highlight.js/lib/languages/dust')).default);\n\t\tcase 'ebnf':\n\t\t\treturn hljs.registerLanguage('ebnf', (await import('highlight.js/lib/languages/ebnf')).default);\n\t\tcase 'elixir':\n\t\t\treturn hljs.registerLanguage('elixir', (await import('highlight.js/lib/languages/elixir')).default);\n\t\tcase 'elm':\n\t\t\treturn hljs.registerLanguage('elm', (await import('highlight.js/lib/languages/elm')).default);\n\t\tcase 'erb':\n\t\t\treturn hljs.registerLanguage('erb', (await import('highlight.js/lib/languages/erb')).default);\n\t\tcase 'erlang':\n\t\t\treturn hljs.registerLanguage('erlang', (await import('highlight.js/lib/languages/erlang')).default);\n\t\tcase 'excel':\n\t\t\treturn hljs.registerLanguage('excel', (await import('highlight.js/lib/languages/excel')).default);\n\t\tcase 'fix':\n\t\t\treturn hljs.registerLanguage('fix', (await import('highlight.js/lib/languages/fix')).default);\n\t\tcase 'flix':\n\t\t\treturn hljs.registerLanguage('flix', (await import('highlight.js/lib/languages/flix')).default);\n\t\tcase 'fortran':\n\t\t\treturn hljs.registerLanguage('fortran', (await import('highlight.js/lib/languages/fortran')).default);\n\t\tcase 'fsharp':\n\t\t\treturn hljs.registerLanguage('fsharp', (await import('highlight.js/lib/languages/fsharp')).default);\n\t\tcase 'gams':\n\t\t\treturn hljs.registerLanguage('gams', (await import('highlight.js/lib/languages/gams')).default);\n\t\tcase 'gauss':\n\t\t\treturn hljs.registerLanguage('gauss', (await import('highlight.js/lib/languages/gauss')).default);\n\t\tcase 'gcode':\n\t\t\treturn hljs.registerLanguage('gcode', (await import('highlight.js/lib/languages/gcode')).default);\n\t\tcase 'gherkin':\n\t\t\treturn hljs.registerLanguage('gherkin', (await import('highlight.js/lib/languages/gherkin')).default);\n\t\tcase 'glsl':\n\t\t\treturn hljs.registerLanguage('glsl', (await import('highlight.js/lib/languages/glsl')).default);\n\t\tcase 'go':\n\t\t\treturn hljs.registerLanguage('go', (await import('highlight.js/lib/languages/go')).default);\n\t\tcase 'golo':\n\t\t\treturn hljs.registerLanguage('golo', (await import('highlight.js/lib/languages/golo')).default);\n\t\tcase 'gradle':\n\t\t\treturn hljs.registerLanguage('gradle', (await import('highlight.js/lib/languages/gradle')).default);\n\t\tcase 'groovy':\n\t\t\treturn hljs.registerLanguage('groovy', (await import('highlight.js/lib/languages/groovy')).default);\n\t\tcase 'haml':\n\t\t\treturn hljs.registerLanguage('haml', (await import('highlight.js/lib/languages/haml')).default);\n\t\tcase 'handlebars':\n\t\t\treturn hljs.registerLanguage('handlebars', (await import('highlight.js/lib/languages/handlebars')).default);\n\t\tcase 'haskell':\n\t\t\treturn hljs.registerLanguage('haskell', (await import('highlight.js/lib/languages/haskell')).default);\n\t\tcase 'haxe':\n\t\t\treturn hljs.registerLanguage('haxe', (await import('highlight.js/lib/languages/haxe')).default);\n\t\tcase 'hsp':\n\t\t\treturn hljs.registerLanguage('hsp', (await import('highlight.js/lib/languages/hsp')).default);\n\t\tcase 'htmlbars':\n\t\t\treturn hljs.registerLanguage('htmlbars', (await import('highlight.js/lib/languages/htmlbars')).default);\n\t\tcase 'http':\n\t\t\treturn hljs.registerLanguage('http', (await import('highlight.js/lib/languages/http')).default);\n\t\tcase 'hy':\n\t\t\treturn hljs.registerLanguage('hy', (await import('highlight.js/lib/languages/hy')).default);\n\t\tcase 'inform7':\n\t\t\treturn hljs.registerLanguage('inform7', (await import('highlight.js/lib/languages/inform7')).default);\n\t\tcase 'ini':\n\t\t\treturn hljs.registerLanguage('ini', (await import('highlight.js/lib/languages/ini')).default);\n\t\tcase 'irpf90':\n\t\t\treturn hljs.registerLanguage('irpf90', (await import('highlight.js/lib/languages/irpf90')).default);\n\t\tcase 'java':\n\t\t\treturn hljs.registerLanguage('java', (await import('highlight.js/lib/languages/java')).default);\n\t\tcase 'javascript':\n\t\t\treturn hljs.registerLanguage('javascript', (await import('highlight.js/lib/languages/javascript')).default);\n\t\tcase 'jboss-cli':\n\t\t\treturn hljs.registerLanguage('jboss-cli', (await import('highlight.js/lib/languages/jboss-cli')).default);\n\t\tcase 'json':\n\t\t\treturn hljs.registerLanguage('json', (await import('highlight.js/lib/languages/json')).default);\n\t\tcase 'julia':\n\t\t\treturn hljs.registerLanguage('julia', (await import('highlight.js/lib/languages/julia')).default);\n\t\tcase 'julia-repl':\n\t\t\treturn hljs.registerLanguage('julia-repl', (await import('highlight.js/lib/languages/julia-repl')).default);\n\t\tcase 'kotlin':\n\t\t\treturn hljs.registerLanguage('kotlin', (await import('highlight.js/lib/languages/kotlin')).default);\n\t\tcase 'lasso':\n\t\t\treturn hljs.registerLanguage('lasso', (await import('highlight.js/lib/languages/lasso')).default);\n\t\tcase 'ldif':\n\t\t\treturn hljs.registerLanguage('ldif', (await import('highlight.js/lib/languages/ldif')).default);\n\t\tcase 'leaf':\n\t\t\treturn hljs.registerLanguage('leaf', (await import('highlight.js/lib/languages/leaf')).default);\n\t\tcase 'less':\n\t\t\treturn hljs.registerLanguage('less', (await import('highlight.js/lib/languages/less')).default);\n\t\tcase 'lisp':\n\t\t\treturn hljs.registerLanguage('lisp', (await import('highlight.js/lib/languages/lisp')).default);\n\t\tcase 'livecodeserver':\n\t\t\treturn hljs.registerLanguage('livecodeserver', (await import('highlight.js/lib/languages/livecodeserver')).default);\n\t\tcase 'livescript':\n\t\t\treturn hljs.registerLanguage('livescript', (await import('highlight.js/lib/languages/livescript')).default);\n\t\tcase 'llvm':\n\t\t\treturn hljs.registerLanguage('llvm', (await import('highlight.js/lib/languages/llvm')).default);\n\t\tcase 'lsl':\n\t\t\treturn hljs.registerLanguage('lsl', (await import('highlight.js/lib/languages/lsl')).default);\n\t\tcase 'lua':\n\t\t\treturn hljs.registerLanguage('lua', (await import('highlight.js/lib/languages/lua')).default);\n\t\tcase 'makefile':\n\t\t\treturn hljs.registerLanguage('makefile', (await import('highlight.js/lib/languages/makefile')).default);\n\t\tcase 'markdown':\n\t\t\treturn hljs.registerLanguage('markdown', (await import('highlight.js/lib/languages/markdown')).default);\n\t\tcase 'mathematica':\n\t\t\treturn hljs.registerLanguage('mathematica', (await import('highlight.js/lib/languages/mathematica')).default);\n\t\tcase 'matlab':\n\t\t\treturn hljs.registerLanguage('matlab', (await import('highlight.js/lib/languages/matlab')).default);\n\t\tcase 'maxima':\n\t\t\treturn hljs.registerLanguage('maxima', (await import('highlight.js/lib/languages/maxima')).default);\n\t\tcase 'mel':\n\t\t\treturn hljs.registerLanguage('mel', (await import('highlight.js/lib/languages/mel')).default);\n\t\tcase 'mercury':\n\t\t\treturn hljs.registerLanguage('mercury', (await import('highlight.js/lib/languages/mercury')).default);\n\t\tcase 'mipsasm':\n\t\t\treturn hljs.registerLanguage('mipsasm', (await import('highlight.js/lib/languages/mipsasm')).default);\n\t\tcase 'mizar':\n\t\t\treturn hljs.registerLanguage('mizar', (await import('highlight.js/lib/languages/mizar')).default);\n\t\tcase 'perl':\n\t\t\treturn hljs.registerLanguage('perl', (await import('highlight.js/lib/languages/perl')).default);\n\t\tcase 'mojolicious':\n\t\t\treturn hljs.registerLanguage('mojolicious', (await import('highlight.js/lib/languages/mojolicious')).default);\n\t\tcase 'monkey':\n\t\t\treturn hljs.registerLanguage('monkey', (await import('highlight.js/lib/languages/monkey')).default);\n\t\tcase 'moonscript':\n\t\t\treturn hljs.registerLanguage('moonscript', (await import('highlight.js/lib/languages/moonscript')).default);\n\t\tcase 'n1ql':\n\t\t\treturn hljs.registerLanguage('n1ql', (await import('highlight.js/lib/languages/n1ql')).default);\n\t\tcase 'nginx':\n\t\t\treturn hljs.registerLanguage('nginx', (await import('highlight.js/lib/languages/nginx')).default);\n\t\tcase 'nimrod':\n\t\t\treturn hljs.registerLanguage('nimrod', (await import('highlight.js/lib/languages/nimrod')).default);\n\t\tcase 'nix':\n\t\t\treturn hljs.registerLanguage('nix', (await import('highlight.js/lib/languages/nix')).default);\n\t\tcase 'nsis':\n\t\t\treturn hljs.registerLanguage('nsis', (await import('highlight.js/lib/languages/nsis')).default);\n\t\tcase 'objectivec':\n\t\t\treturn hljs.registerLanguage('objectivec', (await import('highlight.js/lib/languages/objectivec')).default);\n\t\tcase 'ocaml':\n\t\t\treturn hljs.registerLanguage('ocaml', (await import('highlight.js/lib/languages/ocaml')).default);\n\t\tcase 'openscad':\n\t\t\treturn hljs.registerLanguage('openscad', (await import('highlight.js/lib/languages/openscad')).default);\n\t\tcase 'oxygene':\n\t\t\treturn hljs.registerLanguage('oxygene', (await import('highlight.js/lib/languages/oxygene')).default);\n\t\tcase 'parser3':\n\t\t\treturn hljs.registerLanguage('parser3', (await import('highlight.js/lib/languages/parser3')).default);\n\t\tcase 'pf':\n\t\t\treturn hljs.registerLanguage('pf', (await import('highlight.js/lib/languages/pf')).default);\n\t\tcase 'php':\n\t\t\treturn hljs.registerLanguage('php', (await import('highlight.js/lib/languages/php')).default);\n\t\tcase 'pony':\n\t\t\treturn hljs.registerLanguage('pony', (await import('highlight.js/lib/languages/pony')).default);\n\t\tcase 'powershell':\n\t\t\treturn hljs.registerLanguage('powershell', (await import('highlight.js/lib/languages/powershell')).default);\n\t\tcase 'processing':\n\t\t\treturn hljs.registerLanguage('processing', (await import('highlight.js/lib/languages/processing')).default);\n\t\tcase 'profile':\n\t\t\treturn hljs.registerLanguage('profile', (await import('highlight.js/lib/languages/profile')).default);\n\t\tcase 'prolog':\n\t\t\treturn hljs.registerLanguage('prolog', (await import('highlight.js/lib/languages/prolog')).default);\n\t\tcase 'protobuf':\n\t\t\treturn hljs.registerLanguage('protobuf', (await import('highlight.js/lib/languages/protobuf')).default);\n\t\tcase 'puppet':\n\t\t\treturn hljs.registerLanguage('puppet', (await import('highlight.js/lib/languages/puppet')).default);\n\t\tcase 'purebasic':\n\t\t\treturn hljs.registerLanguage('purebasic', (await import('highlight.js/lib/languages/purebasic')).default);\n\t\tcase 'python':\n\t\t\treturn hljs.registerLanguage('python', (await import('highlight.js/lib/languages/python')).default);\n\t\tcase 'q':\n\t\t\treturn hljs.registerLanguage('q', (await import('highlight.js/lib/languages/q')).default);\n\t\tcase 'qml':\n\t\t\treturn hljs.registerLanguage('qml', (await import('highlight.js/lib/languages/qml')).default);\n\t\tcase 'r':\n\t\t\treturn hljs.registerLanguage('r', (await import('highlight.js/lib/languages/r')).default);\n\t\tcase 'rib':\n\t\t\treturn hljs.registerLanguage('rib', (await import('highlight.js/lib/languages/rib')).default);\n\t\tcase 'roboconf':\n\t\t\treturn hljs.registerLanguage('roboconf', (await import('highlight.js/lib/languages/roboconf')).default);\n\t\tcase 'rsl':\n\t\t\treturn hljs.registerLanguage('rsl', (await import('highlight.js/lib/languages/rsl')).default);\n\t\tcase 'ruleslanguage':\n\t\t\treturn hljs.registerLanguage('ruleslanguage', (await import('highlight.js/lib/languages/ruleslanguage')).default);\n\t\tcase 'rust':\n\t\t\treturn hljs.registerLanguage('rust', (await import('highlight.js/lib/languages/rust')).default);\n\t\tcase 'scala':\n\t\t\treturn hljs.registerLanguage('scala', (await import('highlight.js/lib/languages/scala')).default);\n\t\tcase 'scheme':\n\t\t\treturn hljs.registerLanguage('scheme', (await import('highlight.js/lib/languages/scheme')).default);\n\t\tcase 'scilab':\n\t\t\treturn hljs.registerLanguage('scilab', (await import('highlight.js/lib/languages/scilab')).default);\n\t\tcase 'scss':\n\t\t\treturn hljs.registerLanguage('scss', (await import('highlight.js/lib/languages/scss')).default);\n\t\tcase 'shell':\n\t\t\treturn hljs.registerLanguage('shell', (await import('highlight.js/lib/languages/shell')).default);\n\t\tcase 'smali':\n\t\t\treturn hljs.registerLanguage('smali', (await import('highlight.js/lib/languages/smali')).default);\n\t\tcase 'smalltalk':\n\t\t\treturn hljs.registerLanguage('smalltalk', (await import('highlight.js/lib/languages/smalltalk')).default);\n\t\tcase 'sml':\n\t\t\treturn hljs.registerLanguage('sml', (await import('highlight.js/lib/languages/sml')).default);\n\t\tcase 'sqf':\n\t\t\treturn hljs.registerLanguage('sqf', (await import('highlight.js/lib/languages/sqf')).default);\n\t\tcase 'sql':\n\t\t\treturn hljs.registerLanguage('sql', (await import('highlight.js/lib/languages/sql')).default);\n\t\tcase 'stan':\n\t\t\treturn hljs.registerLanguage('stan', (await import('highlight.js/lib/languages/stan')).default);\n\t\tcase 'stata':\n\t\t\treturn hljs.registerLanguage('stata', (await import('highlight.js/lib/languages/stata')).default);\n\t\tcase 'step21':\n\t\t\treturn hljs.registerLanguage('step21', (await import('highlight.js/lib/languages/step21')).default);\n\t\tcase 'stylus':\n\t\t\treturn hljs.registerLanguage('stylus', (await import('highlight.js/lib/languages/stylus')).default);\n\t\tcase 'subunit':\n\t\t\treturn hljs.registerLanguage('subunit', (await import('highlight.js/lib/languages/subunit')).default);\n\t\tcase 'swift':\n\t\t\treturn hljs.registerLanguage('swift', (await import('highlight.js/lib/languages/swift')).default);\n\t\tcase 'taggerscript':\n\t\t\treturn hljs.registerLanguage('taggerscript', (await import('highlight.js/lib/languages/taggerscript')).default);\n\t\tcase 'yaml':\n\t\t\treturn hljs.registerLanguage('yaml', (await import('highlight.js/lib/languages/yaml')).default);\n\t\tcase 'tap':\n\t\t\treturn hljs.registerLanguage('tap', (await import('highlight.js/lib/languages/tap')).default);\n\t\tcase 'tcl':\n\t\t\treturn hljs.registerLanguage('tcl', (await import('highlight.js/lib/languages/tcl')).default);\n\t\tcase 'tex':\n\t\t\treturn hljs.registerLanguage('tex', (await import('highlight.js/lib/languages/tex')).default);\n\t\tcase 'thrift':\n\t\t\treturn hljs.registerLanguage('thrift', (await import('highlight.js/lib/languages/thrift')).default);\n\t\tcase 'tp':\n\t\t\treturn hljs.registerLanguage('tp', (await import('highlight.js/lib/languages/tp')).default);\n\t\tcase 'twig':\n\t\t\treturn hljs.registerLanguage('twig', (await import('highlight.js/lib/languages/twig')).default);\n\t\tcase 'typescript':\n\t\t\treturn hljs.registerLanguage('typescript', (await import('highlight.js/lib/languages/typescript')).default);\n\t\tcase 'vala':\n\t\t\treturn hljs.registerLanguage('vala', (await import('highlight.js/lib/languages/vala')).default);\n\t\tcase 'vbnet':\n\t\t\treturn hljs.registerLanguage('vbnet', (await import('highlight.js/lib/languages/vbnet')).default);\n\t\tcase 'vbscript':\n\t\t\treturn hljs.registerLanguage('vbscript', (await import('highlight.js/lib/languages/vbscript')).default);\n\t\tcase 'vbscript-html':\n\t\t\treturn hljs.registerLanguage('vbscript-html(', (await import('highlight.js/lib/languages/vbscript-html')).default);\n\t\tcase 'verilog':\n\t\t\treturn hljs.registerLanguage('verilog', (await import('highlight.js/lib/languages/verilog')).default);\n\t\tcase 'vhdl':\n\t\t\treturn hljs.registerLanguage('vhdl', (await import('highlight.js/lib/languages/vhdl')).default);\n\t\tcase 'vim':\n\t\t\treturn hljs.registerLanguage('vim', (await import('highlight.js/lib/languages/vim')).default);\n\t\tcase 'x86asm':\n\t\t\treturn hljs.registerLanguage('x86asm', (await import('highlight.js/lib/languages/x86asm')).default);\n\t\tcase 'xl':\n\t\t\treturn hljs.registerLanguage('xl', (await import('highlight.js/lib/languages/xl')).default);\n\t\tcase 'xquery':\n\t\t\treturn hljs.registerLanguage('xquery', (await import('highlight.js/lib/languages/xquery')).default);\n\t\tcase 'zephir':\n\t\t\treturn hljs.registerLanguage('zephir', (await import('highlight.js/lib/languages/zephir')).default);\n\t\tdefault:\n\t\t\treturn hljs.registerLanguage('plaintext', (await import('highlight.js/lib/languages/plaintext')).default);\n\t}\n};\n\nexport default hljs;\n","/*\n * Markdown is a named function that will parse markdown syntax\n * @param {Object} message - The message object\n */\nimport { Meteor } from 'meteor/meteor';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\n\nimport { marked } from './parser/marked/marked';\nimport { original } from './parser/original/original';\nimport { filtered } from './parser/filtered/filtered';\nimport { code } from './parser/original/code';\nimport { settings } from '../../settings';\n\nconst parsers = {\n\toriginal,\n\tmarked,\n\tfiltered,\n};\n\nclass MarkdownClass {\n\tparse(text) {\n\t\tconst message = {\n\t\t\thtml: escapeHTML(text),\n\t\t};\n\t\treturn this.mountTokensBack(this.parseMessageNotEscaped(message)).html;\n\t}\n\n\tparseNotEscaped(text) {\n\t\tconst message = {\n\t\t\thtml: text,\n\t\t};\n\t\treturn this.mountTokensBack(this.parseMessageNotEscaped(message)).html;\n\t}\n\n\tparseMessageNotEscaped(message) {\n\t\tconst parser = settings.get('Markdown_Parser');\n\n\t\tif (parser === 'disabled') {\n\t\t\treturn message;\n\t\t}\n\n\t\tconst options = {\n\t\t\tsupportSchemesForLink: settings.get('Markdown_SupportSchemesForLink'),\n\t\t\theaders: settings.get('Markdown_Headers'),\n\t\t\trootUrl: Meteor.absoluteUrl(),\n\t\t\tmarked: {\n\t\t\t\tgfm: settings.get('Markdown_Marked_GFM'),\n\t\t\t\ttables: settings.get('Markdown_Marked_Tables'),\n\t\t\t\tbreaks: settings.get('Markdown_Marked_Breaks'),\n\t\t\t\tpedantic: settings.get('Markdown_Marked_Pedantic'),\n\t\t\t\tsmartLists: settings.get('Markdown_Marked_SmartLists'),\n\t\t\t\tsmartypants: settings.get('Markdown_Marked_Smartypants'),\n\t\t\t},\n\t\t};\n\n\t\tconst parse = typeof parsers[parser] === 'function' ? parsers[parser] : parsers.original;\n\n\t\treturn parse(message, options);\n\t}\n\n\tmountTokensBackRecursively(message, tokenList, useHtml = true) {\n\t\tconst missingTokens = [];\n\n\t\tif (tokenList.length > 0) {\n\t\t\tfor (const { token, text, noHtml } of tokenList) {\n\t\t\t\tif (message.html.indexOf(token) >= 0) {\n\t\t\t\t\tmessage.html = message.html.replace(token, () => (useHtml ? text : noHtml)); // Uses lambda so doesn't need to escape $\n\t\t\t\t} else {\n\t\t\t\t\tmissingTokens.push({ token, text, noHtml });\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// If there are tokens that were missing from the string, but the last iteration replaced at least one token, then go again\n\t\t// this is done because one of the tokens may have been hidden by another one\n\t\tif (missingTokens.length > 0 && missingTokens.length < tokenList.length) {\n\t\t\tthis.mountTokensBackRecursively(message, missingTokens, useHtml);\n\t\t}\n\t}\n\n\tmountTokensBack(message, useHtml = true) {\n\t\tif (message.tokens) {\n\t\t\tthis.mountTokensBackRecursively(message, message.tokens, useHtml);\n\t\t}\n\n\t\treturn message;\n\t}\n\n\tcode(...args) {\n\t\treturn code(...args);\n\t}\n\n\tfilterMarkdownFromMessage(message) {\n\t\treturn parsers.filtered(message, {\n\t\t\tsupportSchemesForLink: settings.get('Markdown_SupportSchemesForLink'),\n\t\t});\n\t}\n}\n\nexport const Markdown = new MarkdownClass();\n\nexport const filterMarkdown = (message) => Markdown.filterMarkdownFromMessage(message);\n\nexport const createMarkdownMessageRenderer = ({ parser, ...options }) => {\n\tif (!parser || parser === 'disabled') {\n\t\treturn (message) => message;\n\t}\n\n\tconst parse = typeof parsers[parser] === 'function' ? parsers[parser] : parsers.original;\n\n\treturn (message) => {\n\t\tif (!message?.html?.trim()) {\n\t\t\treturn message;\n\t\t}\n\n\t\treturn parse(message, options);\n\t};\n};\n\nexport const createMarkdownNotificationRenderer = (options) => (message) => parsers.filtered(message, options);\n","export const getGlobalWindow = (): Omit<Window, 'self' | 'top' | 'window'> => window;\n","export { Markdown } from '../lib/markdown';\nexport { createMarkdownMessageRenderer, createMarkdownNotificationRenderer } from '../lib/markdown';\n","import { Meteor } from 'meteor/meteor';\n\nimport { handleError } from '../../../../client/lib/utils/handleError';\nimport { Messages, Subscriptions } from '../../../models/client';\n\n// Action Links namespace creation.\nexport const actionLinks = {\n\tactions: {},\n\tregister(name, funct) {\n\t\tactionLinks.actions[name] = funct;\n\t},\n\tgetMessage(name, messageId) {\n\t\tconst userId = Meteor.userId();\n\t\tif (!userId) {\n\t\t\tthrow new Meteor.Error('error-invalid-user', 'Invalid user', {\n\t\t\t\tfunction: 'actionLinks.getMessage',\n\t\t\t});\n\t\t}\n\n\t\tconst message = Messages.findOne({ _id: messageId });\n\t\tif (!message) {\n\t\t\tthrow new Meteor.Error('error-invalid-message', 'Invalid message', {\n\t\t\t\tfunction: 'actionLinks.getMessage',\n\t\t\t});\n\t\t}\n\n\t\tconst subscription = Subscriptions.findOne({\n\t\t\t'rid': message.rid,\n\t\t\t'u._id': userId,\n\t\t});\n\t\tif (!subscription) {\n\t\t\tthrow new Meteor.Error('error-not-allowed', 'Not allowed', {\n\t\t\t\tfunction: 'actionLinks.getMessage',\n\t\t\t});\n\t\t}\n\n\t\tif (!message.actionLinks || !message.actionLinks[name]) {\n\t\t\tthrow new Meteor.Error('error-invalid-actionlink', 'Invalid action link', {\n\t\t\t\tfunction: 'actionLinks.getMessage',\n\t\t\t});\n\t\t}\n\n\t\treturn message;\n\t},\n\trun(name, messageId, instance) {\n\t\tconst message = actionLinks.getMessage(name, messageId);\n\n\t\tconst actionLink = message.actionLinks[name];\n\n\t\tlet ranClient = false;\n\n\t\tif (actionLinks && actionLinks.actions && actionLinks.actions[actionLink.method_id]) {\n\t\t\t// run just on client side\n\t\t\tactionLinks.actions[actionLink.method_id](message, actionLink.params, instance);\n\n\t\t\tranClient = true;\n\t\t}\n\n\t\t// and run on server side\n\t\tMeteor.call('actionLinkHandler', name, messageId, (err) => {\n\t\t\tif (err && !ranClient) {\n\t\t\t\thandleError(err);\n\t\t\t}\n\t\t});\n\t},\n};\n","import { actionLinks } from './lib/actionLinks';\n\nexport { actionLinks };\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { AutoTranslate } from './autotranslate';\nimport { settings } from '../../../settings';\nimport { hasAtLeastOnePermission } from '../../../authorization';\nimport { MessageAction } from '../../../ui-utils';\nimport { messageArgs } from '../../../ui-utils/client/lib/messageArgs';\nimport { Messages } from '../../../models';\n\nMeteor.startup(() => {\n\tAutoTranslate.init();\n\n\tTracker.autorun(() => {\n\t\tif (settings.get('AutoTranslate_Enabled') && hasAtLeastOnePermission(['auto-translate'])) {\n\t\t\tMessageAction.addButton({\n\t\t\t\tid: 'translate',\n\t\t\t\ticon: 'language',\n\t\t\t\tlabel: 'Translate',\n\t\t\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\t\t\taction() {\n\t\t\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\t\t\tconst language = AutoTranslate.getLanguage(message.rid);\n\t\t\t\t\tif (!message.translations || !message.translations[language]) {\n\t\t\t\t\t\t// } && !_.find(message.attachments, attachment => { return attachment.translations && attachment.translations[language]; })) {\n\t\t\t\t\t\tAutoTranslate.messageIdsToWait[message._id] = true;\n\t\t\t\t\t\tMessages.update({ _id: message._id }, { $set: { autoTranslateFetching: true } });\n\t\t\t\t\t\tMeteor.call('autoTranslate.translateMessage', message, language);\n\t\t\t\t\t}\n\t\t\t\t\tconst action = message.autoTranslateShowInverse ? '$unset' : '$set';\n\t\t\t\t\tMessages.update({ _id: message._id }, { [action]: { autoTranslateShowInverse: true } });\n\t\t\t\t},\n\t\t\t\tcondition({ msg, u }) {\n\t\t\t\t\treturn msg && msg.u && msg.u._id !== u._id && msg.translations && !msg.translations.original;\n\t\t\t\t},\n\t\t\t\torder: 90,\n\t\t\t});\n\t\t\tMessageAction.addButton({\n\t\t\t\tid: 'view-original',\n\t\t\t\ticon: 'language',\n\t\t\t\tlabel: 'View_original',\n\t\t\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\t\t\taction() {\n\t\t\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\t\t\tconst language = AutoTranslate.getLanguage(message.rid);\n\t\t\t\t\tif (!message.translations || !message.translations[language]) {\n\t\t\t\t\t\t// } && !_.find(message.attachments, attachment => { return attachment.translations && attachment.translations[language]; })) {\n\t\t\t\t\t\tAutoTranslate.messageIdsToWait[message._id] = true;\n\t\t\t\t\t\tMessages.update({ _id: message._id }, { $set: { autoTranslateFetching: true } });\n\t\t\t\t\t\tMeteor.call('autoTranslate.translateMessage', message, language);\n\t\t\t\t\t}\n\t\t\t\t\tconst action = message.autoTranslateShowInverse ? '$unset' : '$set';\n\t\t\t\t\tMessages.update({ _id: message._id }, { [action]: { autoTranslateShowInverse: true } });\n\t\t\t\t},\n\t\t\t\tcondition({ msg, u }) {\n\t\t\t\t\treturn msg && msg.u && msg.u._id !== u._id && msg.translations && msg.translations.original;\n\t\t\t\t},\n\t\t\t\torder: 90,\n\t\t\t});\n\t\t} else {\n\t\t\tMessageAction.removeButton('toggle-language');\n\t\t}\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport _ from 'underscore';\nimport mem from 'mem';\n\nimport { Subscriptions, Messages } from '../../../models';\nimport { hasPermission } from '../../../authorization';\nimport { callWithErrorHandling } from '../../../../client/lib/utils/callWithErrorHandling';\n\nlet userLanguage = 'en';\nlet username = '';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst user = Meteor.user();\n\t\tif (!user) {\n\t\t\treturn;\n\t\t}\n\t\tuserLanguage = user.language || 'en';\n\t\tusername = user.username;\n\t});\n});\n\nexport const AutoTranslate = {\n\tinitialized: false,\n\tprovidersMetadata: {},\n\tmessageIdsToWait: {},\n\tsupportedLanguages: [],\n\n\tfindSubscriptionByRid: mem((rid) => Subscriptions.findOne({ rid })),\n\n\tgetLanguage(rid) {\n\t\tlet subscription = {};\n\t\tif (rid) {\n\t\t\tsubscription = this.findSubscriptionByRid(rid);\n\t\t}\n\t\tconst language = (subscription && subscription.autoTranslateLanguage) || userLanguage || window.defaultUserLanguage();\n\t\tif (language.indexOf('-') !== -1) {\n\t\t\tif (!_.findWhere(this.supportedLanguages, { language })) {\n\t\t\t\treturn language.substr(0, 2);\n\t\t\t}\n\t\t}\n\t\treturn language;\n\t},\n\n\ttranslateAttachments(attachments, language) {\n\t\tfor (const attachment of attachments) {\n\t\t\tif (attachment.author_name !== username) {\n\t\t\t\tif (attachment.text && attachment.translations && attachment.translations[language]) {\n\t\t\t\t\tattachment.text = attachment.translations[language];\n\t\t\t\t}\n\n\t\t\t\tif (attachment.description && attachment.translations && attachment.translations[language]) {\n\t\t\t\t\tattachment.description = attachment.translations[language];\n\t\t\t\t}\n\n\t\t\t\tif (attachment.attachments && attachment.attachments.length > 0) {\n\t\t\t\t\tattachment.attachments = this.translateAttachments(attachment.attachments, language);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn attachments;\n\t},\n\n\tinit() {\n\t\tif (this.initialized) {\n\t\t\treturn;\n\t\t}\n\n\t\tTracker.autorun(async (c) => {\n\t\t\tconst uid = Meteor.userId();\n\t\t\tif (!uid || !hasPermission('auto-translate')) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tc.stop();\n\n\t\t\t[this.providersMetadata, this.supportedLanguages] = await Promise.all([\n\t\t\t\tcallWithErrorHandling('autoTranslate.getProviderUiMetadata'),\n\t\t\t\tcallWithErrorHandling('autoTranslate.getSupportedLanguages', 'en'),\n\t\t\t]);\n\t\t});\n\n\t\tSubscriptions.find().observeChanges({\n\t\t\tchanged: (id, fields) => {\n\t\t\t\tif (fields.hasOwnProperty('autoTranslate') || fields.hasOwnProperty('autoTranslateLanguage')) {\n\t\t\t\t\tmem.clear(this.findSubscriptionByRid);\n\t\t\t\t}\n\t\t\t},\n\t\t});\n\n\t\tthis.initialized = true;\n\t},\n};\n\nexport const createAutoTranslateMessageRenderer = () => {\n\tAutoTranslate.init();\n\n\treturn (message) => {\n\t\tconst subscription = AutoTranslate.findSubscriptionByRid(message.rid);\n\t\tconst autoTranslateLanguage = AutoTranslate.getLanguage(message.rid);\n\t\tif (message.u && message.u._id !== Meteor.userId()) {\n\t\t\tif (!message.translations) {\n\t\t\t\tmessage.translations = {};\n\t\t\t}\n\t\t\tif (!!(subscription && subscription.autoTranslate) !== !!message.autoTranslateShowInverse) {\n\t\t\t\tmessage.translations.original = message.html;\n\t\t\t\tif (message.translations[autoTranslateLanguage]) {\n\t\t\t\t\tmessage.html = message.translations[autoTranslateLanguage];\n\t\t\t\t}\n\n\t\t\t\tif (message.attachments && message.attachments.length > 0) {\n\t\t\t\t\tmessage.attachments = AutoTranslate.translateAttachments(message.attachments, autoTranslateLanguage);\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (message.attachments && message.attachments.length > 0) {\n\t\t\tmessage.attachments = AutoTranslate.translateAttachments(message.attachments, autoTranslateLanguage);\n\t\t}\n\t\treturn message;\n\t};\n};\n\nexport const createAutoTranslateMessageStreamHandler = () => {\n\tAutoTranslate.init();\n\n\treturn (message) => {\n\t\tif (message.u && message.u._id !== Meteor.userId()) {\n\t\t\tconst subscription = AutoTranslate.findSubscriptionByRid(message.rid);\n\t\t\tconst language = AutoTranslate.getLanguage(message.rid);\n\t\t\tif (\n\t\t\t\tsubscription &&\n\t\t\t\tsubscription.autoTranslate === true &&\n\t\t\t\tmessage.msg &&\n\t\t\t\t(!message.translations || !message.translations[language])\n\t\t\t) {\n\t\t\t\t// || (message.attachments && !_.find(message.attachments, attachment => { return attachment.translations && attachment.translations[language]; }))\n\t\t\t\tMessages.update({ _id: message._id }, { $set: { autoTranslateFetching: true } });\n\t\t\t} else if (AutoTranslate.messageIdsToWait[message._id] !== undefined && subscription && subscription.autoTranslate !== true) {\n\t\t\t\tMessages.update({ _id: message._id }, { $set: { autoTranslateShowInverse: true }, $unset: { autoTranslateFetching: true } });\n\t\t\t\tdelete AutoTranslate.messageIdsToWait[message._id];\n\t\t\t} else if (message.autoTranslateFetching === true) {\n\t\t\t\tMessages.update({ _id: message._id }, { $unset: { autoTranslateFetching: true } });\n\t\t\t}\n\t\t}\n\t};\n};\n","import { lazy, useMemo } from 'react';\n\nimport { addAction } from '../../../../client/views/room/lib/Toolbox';\nimport { usePermission } from '../../../../client/contexts/AuthorizationContext';\nimport { useSetting } from '../../../../client/contexts/SettingsContext';\n\naddAction('autotranslate', () => {\n\tconst hasPermission = usePermission('auto-translate');\n\tconst autoTranslateEnabled = useSetting('AutoTranslate_Enabled');\n\treturn useMemo(\n\t\t() =>\n\t\t\thasPermission && autoTranslateEnabled\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\t\t\t\tid: 'autotranslate',\n\t\t\t\t\t\ttitle: 'Auto_Translate',\n\t\t\t\t\t\ticon: 'language',\n\t\t\t\t\t\ttemplate: lazy(() => import('../../../../client/views/room/contextualBar/AutoTranslate')),\n\t\t\t\t\t\torder: 20,\n\t\t\t\t\t\tfull: true,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[autoTranslateEnabled, hasPermission],\n\t);\n});\n","import './lib/actionButton';\nimport './lib/tabBar';\n\nexport { AutoTranslate, createAutoTranslateMessageRenderer, createAutoTranslateMessageStreamHandler } from './lib/autotranslate';\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport _ from 'underscore';\n\nexport const ChannelSettings = new (class {\n\tconstructor() {\n\t\tthis.options = new ReactiveVar({});\n\t}\n\n\t/*\n\t * Adds an option in Channel Settings\n\t * @config (object)\n\t *   id: option id (required)\n\t *   template (string): template name to render (required)\n\t *   validation (function): if option should be displayed\n\t */\n\taddOption(config) {\n\t\tif (config == null || config.id == null) {\n\t\t\treturn false;\n\t\t}\n\t\treturn Tracker.nonreactive(() => {\n\t\t\tconst opts = this.options.get();\n\t\t\topts[config.id] = config;\n\t\t\treturn this.options.set(opts);\n\t\t});\n\t}\n\n\tgetOptions(currentData = {}, group) {\n\t\tconst allOptions = _.toArray(this.options.get());\n\t\tconst allowedOptions = _.compact(\n\t\t\t_.map(allOptions, function (option) {\n\t\t\t\tconst ret = { ...option };\n\t\t\t\tif (option.validation == null || option.validation(currentData)) {\n\t\t\t\t\tret.data = Object.assign({}, typeof option.data === 'function' ? option.data() : option.data, currentData);\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t}),\n\t\t).filter(function (option) {\n\t\t\treturn !group || !option.group || option.group.includes(group);\n\t\t});\n\t\treturn _.sortBy(allowedOptions, 'order');\n\t}\n})();\n","import './tabBar';\n\nexport { ChannelSettings } from './lib/ChannelSettings';\n","import { FC, lazy, LazyExoticComponent } from 'react';\n\nimport { addAction } from '../../../client/views/room/lib/Toolbox';\n\naddAction('channel-settings', {\n\tgroups: ['channel', 'group'],\n\tid: 'channel-settings',\n\tanonymous: true,\n\tfull: true,\n\ttitle: 'Room_Info',\n\ticon: 'info-circled',\n\ttemplate: lazy(() => import('../../../client/views/room/contextualBar/Info')) as LazyExoticComponent<FC>,\n\torder: 1,\n});\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/index.js');\n}\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/index.js');\n}\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport _ from 'underscore';\n\nimport { CachedCollectionManager } from '../../../ui-cached-collection';\nimport { getURL } from '../../../utils/client';\n\nconst getCustomSoundId = (sound) => `custom-sound-${sound}`;\n\nclass CustomSoundsClass {\n\tconstructor() {\n\t\tthis.list = new ReactiveVar({});\n\t\tthis.add({ _id: 'chime', name: 'Chime', extension: 'mp3', src: getURL('sounds/chime.mp3') });\n\t\tthis.add({ _id: 'door', name: 'Door', extension: 'mp3', src: getURL('sounds/door.mp3') });\n\t\tthis.add({ _id: 'beep', name: 'Beep', extension: 'mp3', src: getURL('sounds/beep.mp3') });\n\t\tthis.add({ _id: 'chelle', name: 'Chelle', extension: 'mp3', src: getURL('sounds/chelle.mp3') });\n\t\tthis.add({ _id: 'ding', name: 'Ding', extension: 'mp3', src: getURL('sounds/ding.mp3') });\n\t\tthis.add({\n\t\t\t_id: 'droplet',\n\t\t\tname: 'Droplet',\n\t\t\textension: 'mp3',\n\t\t\tsrc: getURL('sounds/droplet.mp3'),\n\t\t});\n\t\tthis.add({\n\t\t\t_id: 'highbell',\n\t\t\tname: 'Highbell',\n\t\t\textension: 'mp3',\n\t\t\tsrc: getURL('sounds/highbell.mp3'),\n\t\t});\n\t\tthis.add({\n\t\t\t_id: 'seasons',\n\t\t\tname: 'Seasons',\n\t\t\textension: 'mp3',\n\t\t\tsrc: getURL('sounds/seasons.mp3'),\n\t\t});\n\t}\n\n\tadd(sound) {\n\t\tif (!sound.src) {\n\t\t\tsound.src = this.getURL(sound);\n\t\t}\n\t\tconst audio = $('<audio />', { id: getCustomSoundId(sound._id), preload: true }).append($('<source />', { src: sound.src }));\n\t\tconst list = this.list.get();\n\t\tlist[sound._id] = sound;\n\t\tthis.list.set(list);\n\t\t$('body').append(audio);\n\t}\n\n\tremove(sound) {\n\t\tconst list = this.list.get();\n\t\tdelete list[sound._id];\n\t\tthis.list.set(list);\n\t\t$(`#${sound._id}`).remove();\n\t}\n\n\tupdate(sound) {\n\t\tconst audio = $(`#${sound._id}`);\n\t\tif (audio && audio[0]) {\n\t\t\tconst list = this.list.get();\n\t\t\tif (!sound.src) {\n\t\t\t\tsound.src = this.getURL(sound);\n\t\t\t}\n\t\t\tlist[sound._id] = sound;\n\t\t\tthis.list.set(list);\n\t\t\t$('source', audio).attr('src', sound.src);\n\t\t\taudio[0].load();\n\t\t} else {\n\t\t\tthis.add(sound);\n\t\t}\n\t}\n\n\tgetURL(sound) {\n\t\treturn getURL(`/custom-sounds/${sound._id}.${sound.extension}?_dc=${sound.random || 0}`);\n\t}\n\n\tgetList() {\n\t\tconst list = Object.values(this.list.get());\n\t\treturn _.sortBy(list, 'name');\n\t}\n\n\tplay = (sound, { volume = 1, loop = false } = {}) => {\n\t\tconst audio = document.querySelector(`#${getCustomSoundId(sound)}`);\n\t\tif (!audio || !audio.play) {\n\t\t\treturn;\n\t\t}\n\n\t\taudio.volume = volume;\n\t\taudio.loop = loop;\n\t\taudio.play();\n\n\t\treturn audio;\n\t};\n\n\tpause = (sound) => {\n\t\tconst audio = document.querySelector(`#${getCustomSoundId(sound)}`);\n\t\tif (!audio || !audio.pause) {\n\t\t\treturn;\n\t\t}\n\n\t\taudio.pause();\n\t\tif (audio.currentTime !== 0) {\n\t\t\taudio.currentTime = 0;\n\t\t}\n\t};\n}\n\nexport const CustomSounds = new CustomSoundsClass();\n\nMeteor.startup(() =>\n\tCachedCollectionManager.onLogin(() => {\n\t\tMeteor.call('listCustomSounds', (error, result) => {\n\t\t\tfor (const sound of result) {\n\t\t\t\tCustomSounds.add(sound);\n\t\t\t}\n\t\t});\n\t}),\n);\n","import { Meteor } from 'meteor/meteor';\n\nimport { CachedCollectionManager } from '../../../ui-cached-collection';\nimport { Notifications } from '../../../notifications';\nimport { CustomSounds } from '../lib/CustomSounds';\n\nMeteor.startup(() =>\n\tCachedCollectionManager.onLogin(() => Notifications.onAll('deleteCustomSound', (data) => CustomSounds.remove(data.soundData))),\n);\n","import { Meteor } from 'meteor/meteor';\n\nimport { CachedCollectionManager } from '../../../ui-cached-collection';\nimport { Notifications } from '../../../notifications';\nimport { CustomSounds } from '../lib/CustomSounds';\n\nMeteor.startup(() =>\n\tCachedCollectionManager.onLogin(() => Notifications.onAll('updateCustomSound', (data) => CustomSounds.update(data.soundData))),\n);\n","import './notifications/deleteCustomSound';\nimport './notifications/updateCustomSound';\n\nexport { CustomSounds } from './lib/CustomSounds';\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\n\nimport { isSetNotNull } from './function-isSet';\nimport { RoomManager } from '../../../ui-utils/client';\nimport { emoji, EmojiPicker } from '../../../emoji/client';\nimport { CachedCollectionManager } from '../../../ui-cached-collection/client';\nimport { APIClient } from '../../../utils/client';\n\nexport const getEmojiUrlFromName = function (name, extension) {\n\tSession.get;\n\n\tconst key = `emoji_random_${name}`;\n\n\tlet random = 0;\n\tif (isSetNotNull(() => Session.keys[key])) {\n\t\trandom = Session.keys[key];\n\t}\n\n\tif (name == null) {\n\t\treturn;\n\t}\n\tconst path = __meteor_runtime_config__.ROOT_URL_PATH_PREFIX || '';\n\treturn `${path}/emoji-custom/${encodeURIComponent(name)}.${extension}?_dc=${random}`;\n};\n\nexport const deleteEmojiCustom = function (emojiData) {\n\tdelete emoji.list[`:${emojiData.name}:`];\n\tconst arrayIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(emojiData.name);\n\tif (arrayIndex !== -1) {\n\t\temoji.packages.emojiCustom.emojisByCategory.rocket.splice(arrayIndex, 1);\n\t}\n\tconst arrayIndexList = emoji.packages.emojiCustom.list.indexOf(`:${emojiData.name}:`);\n\tif (arrayIndexList !== -1) {\n\t\temoji.packages.emojiCustom.list.splice(arrayIndexList, 1);\n\t}\n\tif (isSetNotNull(() => emojiData.aliases)) {\n\t\tfor (const alias of emojiData.aliases) {\n\t\t\tdelete emoji.list[`:${alias}:`];\n\t\t\tconst aliasIndex = emoji.packages.emojiCustom.list.indexOf(`:${alias}:`);\n\t\t\tif (aliasIndex !== -1) {\n\t\t\t\temoji.packages.emojiCustom.list.splice(aliasIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n\tEmojiPicker.updateRecent('rocket');\n};\n\nexport const updateEmojiCustom = function (emojiData) {\n\tlet key = `emoji_random_${emojiData.name}`;\n\tSession.set(key, Math.round(Math.random() * 1000));\n\n\tconst previousExists = isSetNotNull(() => emojiData.previousName);\n\tconst currentAliases = isSetNotNull(() => emojiData.aliases);\n\n\tif (previousExists && isSetNotNull(() => emoji.list[`:${emojiData.previousName}:`].aliases)) {\n\t\tfor (const alias of emoji.list[`:${emojiData.previousName}:`].aliases) {\n\t\t\tdelete emoji.list[`:${alias}:`];\n\t\t\tconst aliasIndex = emoji.packages.emojiCustom.list.indexOf(`:${alias}:`);\n\t\t\tif (aliasIndex !== -1) {\n\t\t\t\temoji.packages.emojiCustom.list.splice(aliasIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\tconst arrayIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(emojiData.previousName);\n\t\tif (arrayIndex !== -1) {\n\t\t\temoji.packages.emojiCustom.emojisByCategory.rocket.splice(arrayIndex, 1);\n\t\t}\n\t\tconst arrayIndexList = emoji.packages.emojiCustom.list.indexOf(`:${emojiData.previousName}:`);\n\t\tif (arrayIndexList !== -1) {\n\t\t\temoji.packages.emojiCustom.list.splice(arrayIndexList, 1);\n\t\t}\n\t\tdelete emoji.list[`:${emojiData.previousName}:`];\n\t}\n\n\tconst categoryIndex = emoji.packages.emojiCustom.emojisByCategory.rocket.indexOf(`${emojiData.name}`);\n\tif (categoryIndex === -1) {\n\t\temoji.packages.emojiCustom.emojisByCategory.rocket.push(`${emojiData.name}`);\n\t\temoji.packages.emojiCustom.list.push(`:${emojiData.name}:`);\n\t}\n\temoji.list[`:${emojiData.name}:`] = Object.assign({ emojiPackage: 'emojiCustom' }, emoji.list[`:${emojiData.name}:`], emojiData);\n\tif (currentAliases) {\n\t\tfor (const alias of emojiData.aliases) {\n\t\t\temoji.packages.emojiCustom.list.push(`:${alias}:`);\n\t\t\temoji.list[`:${alias}:`] = {};\n\t\t\temoji.list[`:${alias}:`].emojiPackage = 'emojiCustom';\n\t\t\temoji.list[`:${alias}:`].aliasOf = emojiData.name;\n\t\t}\n\t}\n\n\tconst url = getEmojiUrlFromName(emojiData.name, emojiData.extension);\n\n\t// update in admin interface\n\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\t$(document)\n\t\t\t.find(`.emojiAdminPreview-image[data-emoji='${emojiData.previousName}']`)\n\t\t\t.css('background-image', `url('${url})'`)\n\t\t\t.attr('data-emoji', `${emojiData.name}`);\n\t} else {\n\t\t$(document).find(`.emojiAdminPreview-image[data-emoji='${emojiData.name}']`).css('background-image', `url('${url}')`);\n\t}\n\n\t// update in picker\n\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\t$(document)\n\t\t\t.find(`li[data-emoji='${emojiData.previousName}'] span`)\n\t\t\t.css('background-image', `url('${url}')`)\n\t\t\t.attr('data-emoji', `${emojiData.name}`);\n\t\t$(document)\n\t\t\t.find(`li[data-emoji='${emojiData.previousName}']`)\n\t\t\t.attr('data-emoji', `${emojiData.name}`)\n\t\t\t.attr('class', `emoji-${emojiData.name}`);\n\t} else {\n\t\t$(document).find(`li[data-emoji='${emojiData.name}'] span`).css('background-image', `url('${url}')`);\n\t}\n\n\t// update in picker and opened rooms\n\tfor (key in RoomManager.openedRooms) {\n\t\tif (RoomManager.openedRooms.hasOwnProperty(key)) {\n\t\t\tconst room = RoomManager.openedRooms[key];\n\t\t\tif (previousExists && emojiData.name !== emojiData.previousName) {\n\t\t\t\t$(room.dom)\n\t\t\t\t\t.find(`span[data-emoji='${emojiData.previousName}']`)\n\t\t\t\t\t.css('background-image', `url('${url}')`)\n\t\t\t\t\t.attr('data-emoji', `${emojiData.name}`);\n\t\t\t} else {\n\t\t\t\t$(room.dom).find(`span[data-emoji='${emojiData.name}']`).css('background-image', `url('${url}')`);\n\t\t\t}\n\t\t}\n\t}\n\n\tEmojiPicker.updateRecent('rocket');\n};\n\nconst customRender = (html) => {\n\tconst emojisMatchGroup = emoji.packages.emojiCustom.list.map(escapeRegExp).join('|');\n\tif (emojisMatchGroup !== emoji.packages.emojiCustom._regexpSignature) {\n\t\temoji.packages.emojiCustom._regexpSignature = emojisMatchGroup;\n\t\temoji.packages.emojiCustom._regexp = new RegExp(\n\t\t\t`<object[^>]*>.*?<\\/object>|<span[^>]*>.*?<\\/span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|(${emojisMatchGroup})`,\n\t\t\t'gi',\n\t\t);\n\t}\n\n\thtml = html.replace(emoji.packages.emojiCustom._regexp, (shortname) => {\n\t\tif (typeof shortname === 'undefined' || shortname === '' || emoji.packages.emojiCustom.list.indexOf(shortname) === -1) {\n\t\t\treturn shortname;\n\t\t}\n\n\t\tlet emojiAlias = shortname.replace(/:/g, '');\n\n\t\tlet dataCheck = emoji.list[shortname];\n\t\tif (dataCheck.hasOwnProperty('aliasOf')) {\n\t\t\temojiAlias = dataCheck.aliasOf;\n\t\t\tdataCheck = emoji.list[`:${emojiAlias}:`];\n\t\t}\n\n\t\treturn `<span class=\"emoji\" style=\"background-image:url(${getEmojiUrlFromName(\n\t\t\temojiAlias,\n\t\t\tdataCheck.extension,\n\t\t)});\" data-emoji=\"${emojiAlias}\" title=\"${shortname}\">${shortname}</span>`;\n\t});\n\n\treturn html;\n};\n\nemoji.packages.emojiCustom = {\n\temojiCategories: [{ key: 'rocket', i18n: 'Custom' }],\n\tcategoryIndex: 1,\n\ttoneList: {},\n\tlist: [],\n\t_regexpSignature: null,\n\t_regexp: null,\n\n\trender: customRender,\n\trenderPicker: customRender,\n};\n\nMeteor.startup(() =>\n\tCachedCollectionManager.onLogin(async () => {\n\t\ttry {\n\t\t\tconst {\n\t\t\t\temojis: { update: emojis },\n\t\t\t} = await APIClient.v1.get('emoji-custom.list');\n\n\t\t\temoji.packages.emojiCustom.emojisByCategory = { rocket: [] };\n\t\t\tfor (const currentEmoji of emojis) {\n\t\t\t\temoji.packages.emojiCustom.emojisByCategory.rocket.push(currentEmoji.name);\n\t\t\t\temoji.packages.emojiCustom.list.push(`:${currentEmoji.name}:`);\n\t\t\t\temoji.list[`:${currentEmoji.name}:`] = currentEmoji;\n\t\t\t\temoji.list[`:${currentEmoji.name}:`].emojiPackage = 'emojiCustom';\n\t\t\t\tfor (const alias of currentEmoji.aliases) {\n\t\t\t\t\temoji.packages.emojiCustom.list.push(`:${alias}:`);\n\t\t\t\t\temoji.list[`:${alias}:`] = {\n\t\t\t\t\t\temojiPackage: 'emojiCustom',\n\t\t\t\t\t\taliasOf: currentEmoji.name,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tEmojiPicker.updateRecent('rocket');\n\t\t} catch (e) {\n\t\t\tconsole.error('Error getting custom emoji', e);\n\t\t}\n\t}),\n);\n","// http://stackoverflow.com/a/26990347 function isSet() from Gajus\nexport const isSet = function (fn) {\n\tlet value;\n\ttry {\n\t\tvalue = fn();\n\t} catch (e) {\n\t\tvalue = undefined;\n\t}\n\treturn value !== undefined;\n};\n\nexport const isSetNotNull = function (fn) {\n\tlet value;\n\ttry {\n\t\tvalue = fn();\n\t} catch (e) {\n\t\tvalue = null;\n\t}\n\treturn value !== null && value !== undefined;\n};\n","import { registerAdminSidebarItem } from '../../../../client/views/admin';\nimport { hasPermission } from '../../../authorization';\n\nregisterAdminSidebarItem({\n\thref: 'emoji-custom',\n\ti18nLabel: 'Custom_Emoji',\n\ticon: 'emoji',\n\tpermissionGranted() {\n\t\treturn hasPermission('manage-emoji');\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { Notifications } from '../../../notifications';\nimport { deleteEmojiCustom } from '../lib/emojiCustom';\n\nMeteor.startup(() => Notifications.onLogged('deleteEmojiCustom', (data) => deleteEmojiCustom(data.emojiData)));\n","import { Meteor } from 'meteor/meteor';\n\nimport { Notifications } from '../../../notifications';\nimport { updateEmojiCustom } from '../lib/emojiCustom';\n\nMeteor.startup(() => Notifications.onLogged('updateEmojiCustom', (data) => updateEmojiCustom(data.emojiData)));\n","import './lib/emojiCustom';\nimport './notifications/deleteEmojiCustom';\nimport './notifications/updateEmojiCustom';\nimport './admin/startup';\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\nimport { Tracker } from 'meteor/tracker';\nimport { UploadFS } from 'meteor/jalik:ufs';\n\nimport { FileUploadBase } from '../../lib/FileUploadBase';\nimport { Uploads, Avatars } from '../../../models';\n\nnew UploadFS.Store({\n\tcollection: Uploads.model,\n\tname: 'Uploads',\n});\n\nnew UploadFS.Store({\n\tcollection: Avatars.model,\n\tname: 'Avatars',\n});\n\nexport const fileUploadHandler = (directive, meta, file) => {\n\tconst store = UploadFS.getStore(directive);\n\n\tif (store) {\n\t\treturn new FileUploadBase(store, meta, file);\n\t}\n\tconsole.error('Invalid file store', directive);\n};\n\nTracker.autorun(function () {\n\tif (Meteor.userId()) {\n\t\tconst secure = location.protocol === 'https:' ? '; secure' : '';\n\n\t\tdocument.cookie = `rc_uid=${escape(Meteor.userId())}; path=/${secure}`;\n\t\tdocument.cookie = `rc_token=${escape(Accounts._storedLoginToken())}; path=/${secure}`;\n\t}\n});\n","import { fileUploadHandler } from './lib/fileUploadHandler';\n\nexport { fileUploadHandler };\n","import path from 'path';\n\nimport { Meteor } from 'meteor/meteor';\nimport { Random } from 'meteor/random';\nimport { UploadFS } from 'meteor/jalik:ufs';\nimport _ from 'underscore';\n\nimport { canAccessRoom, hasPermission } from '../../authorization';\nimport { settings } from '../../settings';\n\n// set ufs temp dir to $TMPDIR/ufs instead of /tmp/ufs if the variable is set\nif ('TMPDIR' in process.env) {\n\tUploadFS.config.tmpDir = path.join(process.env.TMPDIR, 'ufs');\n}\n\nUploadFS.config.defaultStorePermissions = new UploadFS.StorePermissions({\n\tinsert(userId, doc) {\n\t\tif (userId) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// allow inserts from slackbridge (message_id = slack-timestamp-milli)\n\t\tif (doc && doc.message_id && doc.message_id.indexOf('slack-') === 0) {\n\t\t\treturn true;\n\t\t}\n\n\t\t// allow inserts to the UserDataFiles store\n\t\tif (doc && doc.store && doc.store.split(':').pop() === 'UserDataFiles') {\n\t\t\treturn true;\n\t\t}\n\n\t\tif (canAccessRoom(null, null, doc)) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t},\n\tupdate(userId, doc) {\n\t\treturn hasPermission(Meteor.userId(), 'delete-message', doc.rid) || (settings.get('Message_AllowDeleting') && userId === doc.userId);\n\t},\n\tremove(userId, doc) {\n\t\treturn hasPermission(Meteor.userId(), 'delete-message', doc.rid) || (settings.get('Message_AllowDeleting') && userId === doc.userId);\n\t},\n});\n\nexport class FileUploadBase {\n\tconstructor(store, meta, file) {\n\t\tthis.id = Random.id();\n\t\tthis.meta = meta;\n\t\tthis.file = file;\n\t\tthis.store = store;\n\t}\n\n\tgetProgress() {}\n\n\tgetFileName() {\n\t\treturn this.meta.name;\n\t}\n\n\tstart(callback) {\n\t\tthis.handler = new UploadFS.Uploader({\n\t\t\tstore: this.store,\n\t\t\tdata: this.file,\n\t\t\tfile: this.meta,\n\t\t\tonError: (err) => callback(err),\n\t\t\tonComplete: (fileData) => {\n\t\t\t\tconst file = _.pick(fileData, '_id', 'type', 'size', 'name', 'identify', 'description');\n\n\t\t\t\tfile.url = fileData.url.replace(Meteor.absoluteUrl(), '/');\n\t\t\t\treturn callback(null, file, this.store.options.name);\n\t\t\t},\n\t\t});\n\n\t\tthis.handler.onProgress = (file, progress) => {\n\t\t\tthis.onProgress(progress);\n\t\t};\n\n\t\treturn this.handler.start();\n\t}\n\n\tonProgress() {}\n\n\tstop() {\n\t\treturn this.handler.stop();\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/index.js');\n}\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/index.js');\n}\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport './Presence';\n\nclass Notifications {\n\tconstructor(...args) {\n\t\tthis.logged = Meteor.userId() !== null;\n\t\tthis.loginCb = [];\n\t\tTracker.autorun(() => {\n\t\t\tif (Meteor.userId() !== null && this.logged === false) {\n\t\t\t\tthis.loginCb.forEach((cb) => cb());\n\t\t\t}\n\t\t\tthis.logged = Meteor.userId() !== null;\n\t\t});\n\t\tthis.debug = false;\n\t\tthis.streamAll = new Meteor.Streamer('notify-all');\n\t\tthis.streamLogged = new Meteor.Streamer('notify-logged');\n\t\tthis.streamRoom = new Meteor.Streamer('notify-room');\n\t\tthis.streamRoomUsers = new Meteor.Streamer('notify-room-users');\n\t\tthis.streamUser = new Meteor.Streamer('notify-user');\n\n\t\tif (this.debug === true) {\n\t\t\tthis.onAll(function () {\n\t\t\t\treturn console.log('RocketChat.Notifications: onAll', args);\n\t\t\t});\n\t\t\tthis.onUser(function () {\n\t\t\t\treturn console.log('RocketChat.Notifications: onAll', args);\n\t\t\t});\n\t\t}\n\t}\n\n\tonLogin(cb) {\n\t\tthis.loginCb.push(cb);\n\t\tif (this.logged) {\n\t\t\treturn cb();\n\t\t}\n\t}\n\n\tnotifyRoom(room, eventName, ...args) {\n\t\tif (this.debug === true) {\n\t\t\tconsole.log('RocketChat.Notifications: notifyRoom', [room, eventName, ...args]);\n\t\t}\n\t\targs.unshift(`${room}/${eventName}`);\n\t\treturn this.streamRoom.emit.apply(this.streamRoom, args);\n\t}\n\n\tnotifyUser(userId, eventName, ...args) {\n\t\tif (this.debug === true) {\n\t\t\tconsole.log('RocketChat.Notifications: notifyUser', [userId, eventName, ...args]);\n\t\t}\n\t\targs.unshift(`${userId}/${eventName}`);\n\t\treturn this.streamUser.emit.apply(this.streamUser, args);\n\t}\n\n\tnotifyUsersOfRoom(room, eventName, ...args) {\n\t\tif (this.debug === true) {\n\t\t\tconsole.log('RocketChat.Notifications: notifyUsersOfRoom', [room, eventName, ...args]);\n\t\t}\n\t\targs.unshift(`${room}/${eventName}`);\n\t\treturn this.streamRoomUsers.emit.apply(this.streamRoomUsers, args);\n\t}\n\n\tonAll(eventName, callback) {\n\t\treturn this.streamAll.on(eventName, callback);\n\t}\n\n\tonLogged(eventName, callback) {\n\t\treturn this.onLogin(() => this.streamLogged.on(eventName, callback));\n\t}\n\n\tonRoom(room, eventName, callback) {\n\t\tif (this.debug === true) {\n\t\t\tthis.streamRoom.on(room, function () {\n\t\t\t\treturn console.log(`RocketChat.Notifications: onRoom ${room}`, [room, eventName, callback]);\n\t\t\t});\n\t\t}\n\t\treturn this.streamRoom.on(`${room}/${eventName}`, callback);\n\t}\n\n\tasync onUser(eventName, callback, visitorId = null) {\n\t\tawait this.streamUser.on(`${Meteor.userId() || visitorId}/${eventName}`, callback);\n\t\treturn () => this.unUser(eventName, callback, visitorId);\n\t}\n\n\tunAll(callback) {\n\t\treturn this.streamAll.removeListener('notify', callback);\n\t}\n\n\tunLogged(callback) {\n\t\treturn this.streamLogged.removeListener('notify', callback);\n\t}\n\n\tunRoom(room, eventName, callback) {\n\t\treturn this.streamRoom.removeListener(`${room}/${eventName}`, callback);\n\t}\n\n\tunUser(eventName, callback, visitorId = null) {\n\t\treturn this.streamUser.removeListener(`${Meteor.userId() || visitorId}/${eventName}`, callback);\n\t}\n}\n\nexport default new Notifications();\n","import { Meteor } from 'meteor/meteor';\n\nimport { Presence, STATUS_MAP } from '../../../../client/lib/presence';\n\n// TODO implement API on Streamer to be able to listen to all streamed data\n// this is a hacky way to listen to all streamed data from user-presense Streamer\n(Meteor as any).StreamerCentral.on('stream-user-presence', (uid: string, args: unknown) => {\n\tif (!Array.isArray(args)) {\n\t\tthrow new Error('Presence event must be an array');\n\t}\n\tconst [username, status, statusText] = args as [string, number, string | undefined];\n\tPresence.notify({ _id: uid, username, status: STATUS_MAP[status], statusText });\n});\n","import Notifications from './lib/Notifications';\n\nexport { Notifications };\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/index.js');\n}\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/index.js');\n}\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveDict } from 'meteor/reactive-dict';\n\nimport { PublicSettingsCachedCollection } from '../../../../client/lib/settings/PublicSettingsCachedCollection';\nimport { SettingsBase } from '../../lib/settings';\nimport { SettingValue } from '../../../../definition/ISetting';\n\nclass Settings extends SettingsBase {\n\tcachedCollection = PublicSettingsCachedCollection.get();\n\n\tcollection = PublicSettingsCachedCollection.get().collection;\n\n\tdict = new ReactiveDict('settings');\n\n\tget(_id: string | RegExp, ...args: []): any {\n\t\tif (_id instanceof RegExp) {\n\t\t\tthrow new Error('RegExp Settings.get(RegExp)');\n\t\t}\n\t\tif (args.length > 0) {\n\t\t\tthrow new Error('settings.get(String, callback) only works on backend');\n\t\t}\n\t\treturn this.dict.get(_id);\n\t}\n\n\tprivate _storeSettingValue(record: { _id: string; value: SettingValue }, initialLoad: boolean): void {\n\t\tMeteor.settings[record._id] = record.value;\n\t\tthis.dict.set(record._id, record.value);\n\t\tthis.load(record._id, record.value, initialLoad);\n\t}\n\n\tinit(): void {\n\t\tlet initialLoad = true;\n\t\tthis.collection.find().observe({\n\t\t\tadded: (record: { _id: string; value: SettingValue }) => this._storeSettingValue(record, initialLoad),\n\t\t\tchanged: (record: { _id: string; value: SettingValue }) => this._storeSettingValue(record, initialLoad),\n\t\t\tremoved: (record: { _id: string }) => {\n\t\t\t\tdelete Meteor.settings[record._id];\n\t\t\t\tthis.dict.set(record._id, null);\n\t\t\t\tthis.load(record._id, undefined, initialLoad);\n\t\t\t},\n\t\t});\n\t\tinitialLoad = false;\n\t}\n}\n\nexport const settings = new Settings();\n\nsettings.init();\n","import { settings } from './lib/settings';\n\nexport { settings };\n","import { Meteor } from 'meteor/meteor';\nimport _ from 'underscore';\n\nimport { SettingValue } from '../../../definition/ISetting';\n\nexport type SettingComposedValue<T extends SettingValue = SettingValue> = { key: string; value: T };\nexport type SettingCallback = (key: string, value: SettingValue, initialLoad?: boolean) => void;\n\ninterface ISettingRegexCallbacks {\n\tregex: RegExp;\n\tcallbacks: SettingCallback[];\n}\n\nexport class SettingsBase {\n\tprivate callbacks = new Map<string, SettingCallback[]>();\n\n\tprivate regexCallbacks = new Map<string, ISettingRegexCallbacks>();\n\n\t// private ts = new Date()\n\tpublic get<T extends SettingValue = SettingValue>(_id: RegExp, callback: SettingCallback): void;\n\n\tpublic get<T extends SettingValue = SettingValue>(_id: string, callback: SettingCallback): void;\n\n\tpublic get<T extends SettingValue = SettingValue>(_id: RegExp): SettingComposedValue<T>[];\n\n\tpublic get<T extends SettingValue = SettingValue>(_id: string): T | undefined;\n\n\tpublic get<T extends SettingValue = SettingValue>(\n\t\t_id: string | RegExp,\n\t\tcallback?: SettingCallback,\n\t): T | undefined | SettingComposedValue<T>[] | void {\n\t\tif (callback != null) {\n\t\t\tthis.onload(_id, callback);\n\t\t\tif (!Meteor.settings) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (_id === '*') {\n\t\t\t\treturn Object.keys(Meteor.settings).forEach((key) => {\n\t\t\t\t\tconst value = Meteor.settings[key];\n\t\t\t\t\tcallback(key, value);\n\t\t\t\t});\n\t\t\t}\n\t\t\tif (_.isRegExp(_id) && Meteor.settings) {\n\t\t\t\treturn Object.keys(Meteor.settings).forEach((key) => {\n\t\t\t\t\tif (!_id.test(key)) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tconst value = Meteor.settings[key];\n\t\t\t\t\tcallback(key, value);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif (typeof _id === 'string') {\n\t\t\t\tconst value = Meteor.settings[_id];\n\t\t\t\tif (value != null) {\n\t\t\t\t\tcallback(_id, Meteor.settings[_id]);\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (!Meteor.settings) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (_.isRegExp(_id)) {\n\t\t\treturn Object.keys(Meteor.settings).reduce((items: SettingComposedValue<T>[], key) => {\n\t\t\t\tconst value = Meteor.settings[key];\n\t\t\t\tif (_id.test(key)) {\n\t\t\t\t\titems.push({\n\t\t\t\t\t\tkey,\n\t\t\t\t\t\tvalue,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn items;\n\t\t\t}, []);\n\t\t}\n\n\t\treturn Meteor.settings && Meteor.settings[_id];\n\t}\n\n\tset(_id: string, value: SettingValue, callback: () => void): void {\n\t\tMeteor.call('saveSetting', _id, value, callback);\n\t}\n\n\tbatchSet(settings: Array<{ _id: string; value: SettingValue }>, callback: () => void): void {\n\t\tMeteor.call('saveSettings', settings, callback);\n\t}\n\n\tload(key: string, value: SettingValue, initialLoad: boolean): void {\n\t\t['*', key].forEach((item) => {\n\t\t\tconst callbacks = this.callbacks.get(item);\n\t\t\tif (callbacks) {\n\t\t\t\tcallbacks.forEach((callback) => callback(key, value, initialLoad));\n\t\t\t}\n\t\t});\n\t\tthis.regexCallbacks.forEach((cbValue) => {\n\t\t\tif (!cbValue?.regex.test(key)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcbValue.callbacks.forEach((callback) => callback(key, value, initialLoad));\n\t\t});\n\t}\n\n\tonload(key: string | string[] | RegExp | RegExp[], callback: SettingCallback): void {\n\t\t// if key is '*'\n\t\t// \tfor key, value in Meteor.settings\n\t\t// \t\tcallback key, value, false\n\t\t// else if Meteor.settings?[_id]?\n\t\t// \tcallback key, Meteor.settings[_id], false\n\t\tconst keys: Array<string | RegExp> = Array.isArray(key) ? key : [key];\n\t\tkeys.forEach((k) => {\n\t\t\tif (_.isRegExp(k)) {\n\t\t\t\tif (!this.regexCallbacks.has(k.source)) {\n\t\t\t\t\tthis.regexCallbacks.set(k.source, {\n\t\t\t\t\t\tregex: k,\n\t\t\t\t\t\tcallbacks: [],\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.regexCallbacks.get(k.source)?.callbacks.push(callback);\n\t\t\t} else {\n\t\t\t\tif (!this.callbacks.has(k)) {\n\t\t\t\t\tthis.callbacks.set(k, []);\n\t\t\t\t}\n\t\t\t\tthis.callbacks.get(k)?.push(callback);\n\t\t\t}\n\t\t});\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/index.ts');\n}\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/index.ts');\n}\n","import { useMemo, lazy } from 'react';\n\nimport { addAction } from '../../../../client/views/room/lib/Toolbox';\nimport { usePermission } from '../../../../client/contexts/AuthorizationContext';\n\nconst template = lazy(() => import('../../../../client/views/room/contextualBar/PruneMessages'));\n\naddAction('clean-history', ({ room }) => {\n\tconst hasPermission = usePermission('clean-channel-history', room._id);\n\treturn useMemo(\n\t\t() =>\n\t\t\thasPermission\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['channel', 'group', 'team', 'direct_multiple', 'direct'],\n\t\t\t\t\t\tid: 'clean-history',\n\t\t\t\t\t\tfull: true,\n\t\t\t\t\t\ttitle: 'Prune_Messages',\n\t\t\t\t\t\ticon: 'eraser',\n\t\t\t\t\t\ttemplate,\n\t\t\t\t\t\torder: 250,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[hasPermission],\n\t);\n});\n","import './lib/tabBar';\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { userStatus } from './userStatus';\n\nuserStatus.packages.customUserStatus = {\n\tlist: [],\n};\n\nexport const deleteCustomUserStatus = function (customUserStatusData) {\n\tdelete userStatus.list[customUserStatusData._id];\n\n\tconst arrayIndex = userStatus.packages.customUserStatus.list.indexOf(customUserStatusData._id);\n\tif (arrayIndex !== -1) {\n\t\tuserStatus.packages.customUserStatusData.list.splice(arrayIndex, 1);\n\t}\n};\n\nexport const updateCustomUserStatus = function (customUserStatusData) {\n\tconst newUserStatus = {\n\t\tname: customUserStatusData.name,\n\t\tid: customUserStatusData._id,\n\t\tstatusType: customUserStatusData.statusType,\n\t\tlocalizeName: false,\n\t};\n\n\tconst arrayIndex = userStatus.packages.customUserStatus.list.indexOf(newUserStatus.id);\n\tif (arrayIndex === -1) {\n\t\tuserStatus.packages.customUserStatus.list.push(newUserStatus);\n\t} else {\n\t\tuserStatus.packages.customUserStatus.list[arrayIndex] = newUserStatus;\n\t}\n\n\tuserStatus.list[newUserStatus.id] = newUserStatus;\n};\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn;\n\t\t}\n\n\t\tMeteor.call('listCustomUserStatus', (error, result) => {\n\t\t\tif (!result) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfor (const customStatus of result) {\n\t\t\t\tconst newUserStatus = {\n\t\t\t\t\tname: customStatus.name,\n\t\t\t\t\tid: customStatus._id,\n\t\t\t\t\tstatusType: customStatus.statusType,\n\t\t\t\t\tlocalizeName: false,\n\t\t\t\t};\n\n\t\t\t\tuserStatus.packages.customUserStatus.list.push(newUserStatus);\n\t\t\t\tuserStatus.list[newUserStatus.id] = newUserStatus;\n\t\t\t}\n\t\t});\n\t});\n});\n","import { UserStatus } from '../../../../definition/UserStatus';\n\ntype Status = {\n\tname: string;\n\tlocalizeName: boolean;\n\tid: string;\n\tstatusType: UserStatus;\n};\n\ntype UserStatusTypes = {\n\tpackages: any;\n\tlist: {\n\t\t[status: string]: Status;\n\t};\n};\n\nexport const userStatus: UserStatusTypes = {\n\tpackages: {\n\t\tbase: {\n\t\t\trender(html: string): string {\n\t\t\t\treturn html;\n\t\t\t},\n\t\t},\n\t},\n\n\tlist: {\n\t\tonline: {\n\t\t\tname: UserStatus.ONLINE,\n\t\t\tlocalizeName: true,\n\t\t\tid: UserStatus.ONLINE,\n\t\t\tstatusType: UserStatus.ONLINE,\n\t\t},\n\t\taway: {\n\t\t\tname: UserStatus.AWAY,\n\t\t\tlocalizeName: true,\n\t\t\tid: UserStatus.AWAY,\n\t\t\tstatusType: UserStatus.AWAY,\n\t\t},\n\t\tbusy: {\n\t\t\tname: UserStatus.BUSY,\n\t\t\tlocalizeName: true,\n\t\t\tid: UserStatus.BUSY,\n\t\t\tstatusType: UserStatus.BUSY,\n\t\t},\n\t\toffline: {\n\t\t\tname: UserStatus.OFFLINE,\n\t\t\tlocalizeName: true,\n\t\t\tid: UserStatus.OFFLINE,\n\t\t\tstatusType: UserStatus.OFFLINE,\n\t\t},\n\t},\n} as const;\n","import { hasAtLeastOnePermission } from '../../../authorization';\nimport { registerAdminSidebarItem } from '../../../../client/views/admin';\n\nregisterAdminSidebarItem({\n\thref: 'custom-user-status',\n\ti18nLabel: 'Custom_User_Status',\n\ticon: 'user',\n\tpermissionGranted() {\n\t\treturn hasAtLeastOnePermission(['manage-user-status']);\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { deleteCustomUserStatus } from '../lib/customUserStatus';\nimport { Notifications } from '../../../notifications';\n\nMeteor.startup(() => Notifications.onLogged('deleteCustomUserStatus', (data) => deleteCustomUserStatus(data.userStatusData)));\n","import { Meteor } from 'meteor/meteor';\n\nimport { updateCustomUserStatus } from '../lib/customUserStatus';\nimport { Notifications } from '../../../notifications';\n\nMeteor.startup(() => Notifications.onLogged('updateCustomUserStatus', (data) => updateCustomUserStatus(data.userStatusData)));\n","import './admin/startup';\n\nimport './notifications/deleteCustomUserStatus';\nimport './notifications/updateCustomUserStatus';\n\nexport { userStatus, UserStatusProps } from './lib/userStatus';\nexport { deleteCustomUserStatus, updateCustomUserStatus } from './lib/customUserStatus';\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\nimport jQuery from 'jquery';\n\nimport { process2faReturn } from '../../../../client/lib/2fa/process2faReturn';\nimport { baseURI } from '../../../../client/lib/baseURI';\n\nexport const APIClient = {\n\tdelete(endpoint, params) {\n\t\treturn APIClient._jqueryCall('DELETE', endpoint, params);\n\t},\n\n\tget(endpoint, params) {\n\t\treturn APIClient._jqueryCall('GET', endpoint, params);\n\t},\n\n\tpost(endpoint, params, body) {\n\t\tif (!body) {\n\t\t\tbody = params;\n\t\t\tparams = {};\n\t\t}\n\n\t\treturn APIClient._jqueryCall('POST', endpoint, params, body);\n\t},\n\n\tput(endpoint, params, body) {\n\t\tif (!body) {\n\t\t\tbody = params;\n\t\t\tparams = {};\n\t\t}\n\n\t\treturn APIClient._jqueryCall('PUT', endpoint, params, body);\n\t},\n\n\tupload(endpoint, params, formData, xhrOptions) {\n\t\tif (!formData) {\n\t\t\tformData = params;\n\t\t\tparams = {};\n\t\t}\n\n\t\treturn APIClient._jqueryFormDataCall(endpoint, params, formData, xhrOptions);\n\t},\n\n\tgetCredentials() {\n\t\treturn {\n\t\t\t'X-User-Id': Meteor._localStorage.getItem(Accounts.USER_ID_KEY),\n\t\t\t'X-Auth-Token': Meteor._localStorage.getItem(Accounts.LOGIN_TOKEN_KEY),\n\t\t};\n\t},\n\n\t_generateQueryFromParams(params) {\n\t\tlet query = '';\n\t\tif (params && typeof params === 'object') {\n\t\t\tObject.keys(params).forEach((key) => {\n\t\t\t\tquery += query === '' ? '?' : '&';\n\n\t\t\t\tif (Array.isArray(params[key])) {\n\t\t\t\t\tconst encodedParams = params[key].map((value) => encodeURIComponent(value));\n\t\t\t\t\tconst joinedArray = encodedParams.join(`&${key}[]=`);\n\t\t\t\t\tquery += `${key}[]=${joinedArray}`;\n\t\t\t\t} else {\n\t\t\t\t\tquery += `${key}=${encodeURIComponent(params[key])}`;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\treturn query;\n\t},\n\n\t_jqueryCall(method, endpoint, params, body, headers = {}, dataType) {\n\t\tconst query = APIClient._generateQueryFromParams(params);\n\n\t\treturn new Promise(function _rlRestApiGet(resolve, reject) {\n\t\t\tjQuery.ajax({\n\t\t\t\tmethod,\n\t\t\t\turl: `${baseURI}api/${endpoint}${query}`,\n\t\t\t\theaders: Object.assign(\n\t\t\t\t\t{\n\t\t\t\t\t\t'Content-Type': 'application/json',\n\t\t\t\t\t\t...APIClient.getCredentials(),\n\t\t\t\t\t},\n\t\t\t\t\theaders,\n\t\t\t\t),\n\t\t\t\tdata: JSON.stringify(body),\n\t\t\t\tdataType,\n\t\t\t\tsuccess: function _rlGetSuccess(result) {\n\t\t\t\t\tresolve(result);\n\t\t\t\t},\n\t\t\t\terror: function _rlGetFailure(xhr, status, errorThrown) {\n\t\t\t\t\tAPIClient.processTwoFactorError({\n\t\t\t\t\t\txhr,\n\t\t\t\t\t\tparams: [method, endpoint, params, body, headers],\n\t\t\t\t\t\tresolve,\n\t\t\t\t\t\treject,\n\t\t\t\t\t\toriginalCallback() {\n\t\t\t\t\t\t\tconst error = new Error(errorThrown);\n\t\t\t\t\t\t\terror.xhr = xhr;\n\t\t\t\t\t\t\treject(error);\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t},\n\n\t_jqueryFormDataCall(endpoint, params, formData, { progress = () => {}, error = () => {} } = {}) {\n\t\tconst ret = {};\n\n\t\tconst query = APIClient._generateQueryFromParams(params);\n\n\t\tif (!(formData instanceof FormData)) {\n\t\t\tthrow new Error('The formData parameter MUST be an instance of the FormData class.');\n\t\t}\n\n\t\tret.promise = new Promise(function _jqueryFormDataPromise(resolve, reject) {\n\t\t\tret.xhr = jQuery.ajax({\n\t\t\t\txhr() {\n\t\t\t\t\tconst xhr = new window.XMLHttpRequest();\n\n\t\t\t\t\txhr.upload.addEventListener(\n\t\t\t\t\t\t'progress',\n\t\t\t\t\t\tfunction (evt) {\n\t\t\t\t\t\t\tif (evt.lengthComputable) {\n\t\t\t\t\t\t\t\tconst percentComplete = evt.loaded / evt.total;\n\t\t\t\t\t\t\t\tprogress(percentComplete * 100);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tfalse,\n\t\t\t\t\t);\n\n\t\t\t\t\txhr.upload.addEventListener('error', error, false);\n\n\t\t\t\t\treturn xhr;\n\t\t\t\t},\n\t\t\t\turl: `${baseURI}api/${endpoint}${query}`,\n\t\t\t\theaders: APIClient.getCredentials(),\n\t\t\t\tdata: formData,\n\t\t\t\tprocessData: false,\n\t\t\t\tcontentType: false,\n\t\t\t\ttype: 'POST',\n\t\t\t\tsuccess: function _jqueryFormDataSuccess(result) {\n\t\t\t\t\tresolve(result);\n\t\t\t\t},\n\t\t\t\terror: function _jqueryFormDataError(xhr, status, errorThrown) {\n\t\t\t\t\tconst error = new Error(errorThrown);\n\t\t\t\t\terror.xhr = xhr;\n\t\t\t\t\treject(error);\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\n\t\treturn ret;\n\t},\n\n\tprocessTwoFactorError({ xhr, params, originalCallback, resolve, reject }) {\n\t\tif (!xhr.responseJSON || !xhr.responseJSON.errorType) {\n\t\t\treturn originalCallback();\n\t\t}\n\n\t\tprocess2faReturn({\n\t\t\terror: xhr.responseJSON,\n\t\t\toriginalCallback,\n\t\t\tonCode(code, method) {\n\t\t\t\tconst headers = params[params.length - 1];\n\t\t\t\theaders['x-2fa-code'] = code;\n\t\t\t\theaders['x-2fa-method'] = method;\n\t\t\t\tAPIClient._jqueryCall(...params)\n\t\t\t\t\t.then(resolve)\n\t\t\t\t\t.catch(reject);\n\t\t\t},\n\t\t});\n\t},\n\n\tv1: {\n\t\tdelete(endpoint, params) {\n\t\t\treturn APIClient.delete(`v1/${endpoint}`, params);\n\t\t},\n\n\t\tget(endpoint, params) {\n\t\t\treturn APIClient.get(`v1/${endpoint}`, params);\n\t\t},\n\n\t\tpost(endpoint, params, body) {\n\t\t\treturn APIClient.post(`v1/${endpoint}`, params, body);\n\t\t},\n\n\t\tupload(endpoint, params, formData) {\n\t\t\treturn APIClient.upload(`v1/${endpoint}`, params, formData);\n\t\t},\n\n\t\tput(endpoint, params, body) {\n\t\t\treturn APIClient.put(`v1/${endpoint}`, params, body);\n\t\t},\n\t},\n};\n","import { FlowRouter } from 'meteor/kadira:flow-router';\nimport _ from 'underscore';\n\nimport { RoomTypesCommon } from '../../lib/RoomTypesCommon';\nimport { hasAtLeastOnePermission } from '../../../authorization';\nimport { ChatRoom, ChatSubscription } from '../../../models';\n\nexport const roomTypes = new (class RocketChatRoomTypes extends RoomTypesCommon {\n\tcheckCondition(roomType) {\n\t\treturn roomType.condition == null || roomType.condition();\n\t}\n\n\tgetTypes() {\n\t\treturn _.sortBy(this.roomTypesOrder, 'order')\n\t\t\t.map((type) => this.roomTypes[type.identifier])\n\t\t\t.filter((type) => !type.condition || type.condition());\n\t}\n\n\tgetIcon(roomData) {\n\t\tif (!roomData || !roomData.t || !this.roomTypes[roomData.t]) {\n\t\t\treturn;\n\t\t}\n\t\treturn (this.roomTypes[roomData.t].getIcon && this.roomTypes[roomData.t].getIcon(roomData)) || this.roomTypes[roomData.t].icon;\n\t}\n\n\tgetRoomName(roomType, roomData) {\n\t\treturn this.roomTypes[roomType] && this.roomTypes[roomType].roomName && this.roomTypes[roomType].roomName(roomData);\n\t}\n\n\tgetSecondaryRoomName(roomType, roomData) {\n\t\treturn (\n\t\t\tthis.roomTypes[roomType] &&\n\t\t\ttypeof this.roomTypes[roomType].secondaryRoomName === 'function' &&\n\t\t\tthis.roomTypes[roomType].secondaryRoomName(roomData)\n\t\t);\n\t}\n\n\tgetIdentifiers(e) {\n\t\tconst except = [].concat(e);\n\t\tconst list = _.reject(this.roomTypesOrder, (t) => except.indexOf(t.identifier) !== -1);\n\t\treturn _.map(list, (t) => t.identifier);\n\t}\n\n\tgetUserStatus(roomType, rid) {\n\t\treturn (\n\t\t\tthis.roomTypes[roomType] &&\n\t\t\ttypeof this.roomTypes[roomType].getUserStatus === 'function' &&\n\t\t\tthis.roomTypes[roomType].getUserStatus(rid)\n\t\t);\n\t}\n\n\tgetRoomType(roomId) {\n\t\tconst fields = {\n\t\t\tt: 1,\n\t\t};\n\t\tconst room = ChatRoom.findOne(\n\t\t\t{\n\t\t\t\t_id: roomId,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfields,\n\t\t\t},\n\t\t);\n\t\treturn room && room.t;\n\t}\n\n\tisLivechatRoom(roomType) {\n\t\treturn (\n\t\t\tthis.roomTypes[roomType] && typeof this.roomTypes[roomType].isLivechatRoom === 'function' && this.roomTypes[roomType].isLivechatRoom()\n\t\t);\n\t}\n\n\tshowQuickActionButtons(roomType) {\n\t\treturn (\n\t\t\tthis.roomTypes[roomType] &&\n\t\t\ttypeof this.roomTypes[roomType].showQuickActionButtons === 'function' &&\n\t\t\tthis.roomTypes[roomType].showQuickActionButtons()\n\t\t);\n\t}\n\n\tgetUserStatusText(roomType, rid) {\n\t\treturn (\n\t\t\tthis.roomTypes[roomType] &&\n\t\t\ttypeof this.roomTypes[roomType].getUserStatusText === 'function' &&\n\t\t\tthis.roomTypes[roomType].getUserStatusText(rid)\n\t\t);\n\t}\n\n\tfindRoom(roomType, identifier, user) {\n\t\treturn this.roomTypes[roomType] && this.roomTypes[roomType].findRoom(identifier, user);\n\t}\n\n\tcanSendMessage(rid) {\n\t\treturn ChatSubscription.find({ rid }).count() > 0;\n\t}\n\n\treadOnly(rid, user) {\n\t\tconst fields = {\n\t\t\tro: 1,\n\t\t\tt: 1,\n\t\t};\n\t\tif (user) {\n\t\t\tfields.muted = 1;\n\t\t\tfields.unmuted = 1;\n\t\t}\n\t\tconst room = ChatRoom.findOne(\n\t\t\t{\n\t\t\t\t_id: rid,\n\t\t\t},\n\t\t\t{\n\t\t\t\tfields,\n\t\t\t},\n\t\t);\n\n\t\tconst roomType = room && room.t;\n\t\tif (roomType && this.roomTypes[roomType] && this.roomTypes[roomType].readOnly) {\n\t\t\treturn this.roomTypes[roomType].readOnly(rid, user);\n\t\t}\n\n\t\tif (!user) {\n\t\t\treturn room && room.ro;\n\t\t}\n\n\t\tif (room) {\n\t\t\tif (Array.isArray(room.muted) && room.muted.indexOf(user.username) !== -1) {\n\t\t\t\treturn true;\n\t\t\t}\n\n\t\t\tif (room.ro === true) {\n\t\t\t\tif (Array.isArray(room.unmuted) && room.unmuted.indexOf(user.username) !== -1) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\tif (hasAtLeastOnePermission('post-readonly', room._id)) {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tarchived(rid) {\n\t\tconst room = ChatRoom.findOne({ _id: rid }, { fields: { archived: 1 } });\n\t\treturn room && room.archived === true;\n\t}\n\n\tverifyCanSendMessage(rid) {\n\t\tconst room = ChatRoom.findOne({ _id: rid }, { fields: { t: 1 } });\n\n\t\tif (!room || !room.t) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst roomType = room.t;\n\t\tif (this.roomTypes[roomType] && this.roomTypes[roomType].canSendMessage) {\n\t\t\treturn this.roomTypes[roomType].canSendMessage(rid);\n\t\t}\n\t\treturn this.canSendMessage(rid);\n\t}\n\n\tverifyShowJoinLink(rid) {\n\t\tconst room = ChatRoom.findOne({ _id: rid, t: { $exists: true, $ne: null } }, { fields: { t: 1 } });\n\t\tif (!room || !room.t) {\n\t\t\treturn;\n\t\t}\n\t\tconst roomType = room.t;\n\t\tif (this.roomTypes[roomType] && !this.roomTypes[roomType].showJoinLink) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this.roomTypes[roomType].showJoinLink(rid);\n\t}\n\n\tgetNotSubscribedTpl(rid) {\n\t\tconst room = ChatRoom.findOne({ _id: rid, t: { $exists: true, $ne: null } }, { fields: { t: 1 } });\n\t\tif (!room || !room.t) {\n\t\t\treturn;\n\t\t}\n\t\tconst roomType = room.t;\n\t\tif (this.roomTypes[roomType] && !this.roomTypes[roomType].notSubscribedTpl) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this.roomTypes[roomType].notSubscribedTpl;\n\t}\n\n\tgetReadOnlyTpl(rid) {\n\t\tconst room = ChatRoom.findOne({ _id: rid, t: { $exists: true, $ne: null } }, { fields: { t: 1 } });\n\t\tif (!room || !room.t) {\n\t\t\treturn;\n\t\t}\n\t\tconst roomType = room.t;\n\t\treturn this.roomTypes[roomType] && this.roomTypes[roomType].readOnlyTpl;\n\t}\n\n\topenRouteLink(roomType, subData, queryParams) {\n\t\tif (!this.roomTypes[roomType]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet routeData = {};\n\t\tif (this.roomTypes[roomType] && this.roomTypes[roomType].route && this.roomTypes[roomType].route.link) {\n\t\t\trouteData = this.roomTypes[roomType].route.link(subData);\n\t\t} else if (subData && subData.name) {\n\t\t\trouteData = {\n\t\t\t\tname: subData.name,\n\t\t\t};\n\t\t}\n\n\t\treturn FlowRouter.go(this.roomTypes[roomType].route.name, routeData, queryParams);\n\t}\n})();\n","export { t, isRtl } from '../lib/tapi18n';\nexport { getDefaultSubscriptionPref } from '../lib/getDefaultSubscriptionPref';\nexport { Info } from '../rocketchat.info';\nexport { getUserPreference } from '../lib/getUserPreference';\nexport { fileUploadMediaWhiteList, fileUploadIsValidContentType } from '../lib/fileUploadRestrictions';\nexport { roomTypes } from './lib/roomTypes';\nexport { RoomTypeRouteConfig, RoomTypeConfig, RoomSettingsEnum, RoomMemberActions, UiTextContext } from '../lib/RoomTypeConfig';\nexport { RoomTypesCommon } from '../lib/RoomTypesCommon';\nexport { getUserAvatarURL } from '../lib/getUserAvatarURL';\nexport { slashCommands } from '../lib/slashCommand';\nexport { getUserNotificationPreference } from '../lib/getUserNotificationPreference';\nexport { getAvatarColor } from '../lib/getAvatarColor';\nexport { getURL } from '../lib/getURL';\nexport { placeholders } from '../lib/placeholders';\nexport { templateVarHandler } from '../lib/templateVarHandler';\nexport { APIClient } from './lib/RestApiClient';\nexport { secondsToHHMMSS } from '../lib/timeConverter';\n","import { Meteor } from 'meteor/meteor';\nimport { Random } from 'meteor/random';\n\nlet Users;\nlet settings;\nif (Meteor.isServer) {\n\t({ settings } = require('../../settings/server'));\n\tUsers = require('../../models/server/models/Users').default;\n} else {\n\t({ settings } = require('../../settings/client'));\n}\n\nexport const RoomSettingsEnum = {\n\tTYPE: 'type',\n\tNAME: 'roomName',\n\tTOPIC: 'roomTopic',\n\tANNOUNCEMENT: 'roomAnnouncement',\n\tDESCRIPTION: 'roomDescription',\n\tREAD_ONLY: 'readOnly',\n\tREACT_WHEN_READ_ONLY: 'reactWhenReadOnly',\n\tARCHIVE_OR_UNARCHIVE: 'archiveOrUnarchive',\n\tJOIN_CODE: 'joinCode',\n\tBROADCAST: 'broadcast',\n\tSYSTEM_MESSAGES: 'systemMessages',\n\tE2E: 'encrypted',\n};\n\nexport const RoomMemberActions = {\n\tARCHIVE: 'archive',\n\tIGNORE: 'ignore',\n\tBLOCK: 'block',\n\tMUTE: 'mute',\n\tSET_AS_OWNER: 'setAsOwner',\n\tSET_AS_LEADER: 'setAsLeader',\n\tSET_AS_MODERATOR: 'setAsModerator',\n\tLEAVE: 'leave',\n\tREMOVE_USER: 'removeUser',\n\tJOIN: 'join',\n\tINVITE: 'invite',\n};\n\nexport const UiTextContext = {\n\tCLOSE_WARNING: 'closeWarning',\n\tHIDE_WARNING: 'hideWarning',\n\tLEAVE_WARNING: 'leaveWarning',\n\tNO_ROOMS_SUBSCRIBED: 'noRoomsSubscribed',\n};\n\nexport class RoomTypeRouteConfig {\n\tconstructor({ name, path }) {\n\t\tif (typeof name !== 'undefined' && (typeof name !== 'string' || name.length === 0)) {\n\t\t\tthrow new Error('The name must be a string.');\n\t\t}\n\n\t\tif (typeof path !== 'undefined' && (typeof path !== 'string' || path.length === 0)) {\n\t\t\tthrow new Error('The path must be a string.');\n\t\t}\n\n\t\tthis._name = name;\n\t\tthis._path = path;\n\t}\n\n\tget name() {\n\t\treturn this._name;\n\t}\n\n\tget path() {\n\t\treturn this._path;\n\t}\n}\n\nexport class RoomTypeConfig {\n\tconstructor({ identifier = Random.id(), order, icon, header, label, route }) {\n\t\tif (typeof identifier !== 'string' || identifier.length === 0) {\n\t\t\tthrow new Error('The identifier must be a string.');\n\t\t}\n\n\t\tif (typeof order !== 'number') {\n\t\t\tthrow new Error('The order must be a number.');\n\t\t}\n\n\t\tif (typeof icon !== 'undefined' && (typeof icon !== 'string' || icon.length === 0)) {\n\t\t\tthrow new Error('The icon must be a string.');\n\t\t}\n\n\t\tif (typeof header !== 'undefined' && (typeof header !== 'string' || header.length === 0)) {\n\t\t\tthrow new Error('The header must be a string.');\n\t\t}\n\n\t\tif (typeof label !== 'undefined' && (typeof label !== 'string' || label.length === 0)) {\n\t\t\tthrow new Error('The label must be a string.');\n\t\t}\n\n\t\tif (typeof route !== 'undefined' && !(route instanceof RoomTypeRouteConfig)) {\n\t\t\tthrow new Error('Room\\'s route is not a valid route configuration. Must be an instance of \"RoomTypeRouteConfig\".');\n\t\t}\n\n\t\tthis._identifier = identifier;\n\t\tthis._order = order;\n\t\tthis._icon = icon;\n\t\tthis._header = header;\n\t\tthis._label = label;\n\t\tthis._route = route;\n\t}\n\n\t/**\n\t * The room type's internal identifier.\n\t */\n\tget identifier() {\n\t\treturn this._identifier;\n\t}\n\n\t/**\n\t * The order of this room type for the display.\n\t */\n\tget order() {\n\t\treturn this._order;\n\t}\n\n\t/**\n\t * Sets the order of this room type for the display.\n\t *\n\t * @param {number} order the number value for the order\n\t */\n\tset order(order) {\n\t\tif (typeof order !== 'number') {\n\t\t\tthrow new Error('The order must be a number.');\n\t\t}\n\n\t\tthis._order = order;\n\t}\n\n\t/**\n\t * The icon class, css, to use as the visual aid.\n\t */\n\tget icon() {\n\t\treturn this._icon;\n\t}\n\n\t/**\n\t * The header name of this type.\n\t */\n\tget header() {\n\t\treturn this._header;\n\t}\n\n\t/**\n\t * The i18n label for this room type.\n\t */\n\tget label() {\n\t\treturn this._label;\n\t}\n\n\t/**\n\t * The route config for this room type.\n\t */\n\tget route() {\n\t\treturn this._route;\n\t}\n\n\tallowRoomSettingChange(/* room, setting */) {\n\t\treturn true;\n\t}\n\n\tallowMemberAction(/* room, action */) {\n\t\treturn false;\n\t}\n\n\t/**\n\t * Return a room's name\n\t *\n\t * @abstract\n\t * @return {string} Room's name according to it's type\n\t */\n\troomName(/* room */) {\n\t\treturn '';\n\t}\n\n\tcanBeCreated(hasPermission) {\n\t\tif (!hasPermission && typeof hasPermission !== 'function') {\n\t\t\tthrow new Error('You MUST provide the \"hasPermission\" to canBeCreated function');\n\t\t}\n\t\treturn Meteor.isServer ? hasPermission(Meteor.userId(), `create-${this._identifier}`) : hasPermission([`create-${this._identifier}`]);\n\t}\n\n\tcanBeDeleted(hasPermission, room) {\n\t\tif (!hasPermission && typeof hasPermission !== 'function') {\n\t\t\tthrow new Error('You MUST provide the \"hasPermission\" to canBeDeleted function');\n\t\t}\n\t\treturn Meteor.isServer ? hasPermission(Meteor.userId(), `delete-${room.t}`, room._id) : hasPermission(`delete-${room.t}`, room._id);\n\t}\n\n\tsupportMembersList(/* room */) {\n\t\treturn true;\n\t}\n\n\tisGroupChat() {\n\t\treturn false;\n\t}\n\n\tcanAddUser(/* userId, room */) {\n\t\treturn false;\n\t}\n\n\tuserDetailShowAll(/* room */) {\n\t\treturn true;\n\t}\n\n\tuserDetailShowAdmin(/* room */) {\n\t\treturn true;\n\t}\n\n\tpreventRenaming(/* room */) {\n\t\treturn false;\n\t}\n\n\tincludeInRoomSearch() {\n\t\treturn false;\n\t}\n\n\tenableMembersListProfile() {\n\t\treturn false;\n\t}\n\n\t/**\n\t * Returns a text which can be used in generic UIs.\n\t * @param context The role of the text in the UI-Element\n\t * @return {string} A text or a translation key - the consumers of this method will pass the\n\t * returned value to an internationalization library\n\t */\n\tgetUiText(/* context */) {\n\t\treturn '';\n\t}\n\n\t/**\n\t * Returns the full object of message sender\n\t * @param {string} senderId Sender's _id\n\t * @return {object} Sender's object from db\n\t */\n\tgetMsgSender(senderId) {\n\t\tif (Meteor.isServer && Users) {\n\t\t\treturn Users.findOneById(senderId);\n\t\t}\n\t\treturn {};\n\t}\n\n\t/**\n\t * Returns details to use on notifications\n\t *\n\t * @param {object} room\n\t * @param {object} user\n\t * @param {string} notificationMessage\n\t * @return {object} Notification details\n\t */\n\tgetNotificationDetails(room, user, notificationMessage) {\n\t\tif (!Meteor.isServer) {\n\t\t\treturn {};\n\t\t}\n\n\t\tconst title = `#${this.roomName(room)}`;\n\n\t\tconst text = `${settings.get('UI_Use_Real_Name') ? user.name : user.username}: ${notificationMessage}`;\n\n\t\treturn { title, text };\n\t}\n\n\t/**\n\t * Check if there is an user with the same id and loginToken\n\t * @param {object} allowData\n\t * @return {object} User's object from db\n\t */\n\tcanAccessUploadedFile(/* accessData */) {\n\t\treturn false;\n\t}\n\n\tgetReadReceiptsExtraData(/* message */) {\n\t\treturn {};\n\t}\n\n\tgetAvatarPath(/* roomData */) {\n\t\treturn '';\n\t}\n\n\topenCustomProfileTab() {\n\t\treturn false;\n\t}\n\n\tgetDiscussionType() {\n\t\treturn 'p';\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\n// import { Session } from 'meteor/session';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { RoomTypeConfig } from './RoomTypeConfig';\nimport { roomExit } from './roomExit';\n\nexport class RoomTypesCommon {\n\tconstructor() {\n\t\tthis.roomTypes = {};\n\t\tthis.roomTypesOrder = [];\n\t\tthis.mainOrder = 1;\n\t}\n\n\tgetTypesToShowOnDashboard() {\n\t\treturn Object.keys(this.roomTypes).filter((key) => this.roomTypes[key].includeInDashboard && this.roomTypes[key].includeInDashboard());\n\t}\n\n\t/**\n\t * Adds a room type to the application.\n\t *\n\t * @param {RoomTypeConfig} roomConfig\n\t * @returns {void}\n\t */\n\tadd(roomConfig) {\n\t\tif (!(roomConfig instanceof RoomTypeConfig)) {\n\t\t\tthrow new Error('Invalid Room Configuration object, it must extend \"RoomTypeConfig\"');\n\t\t}\n\n\t\tif (this.roomTypes[roomConfig.identifier]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!roomConfig.order) {\n\t\t\troomConfig.order = this.mainOrder + 10;\n\t\t\tthis.mainOrder += 10;\n\t\t}\n\n\t\tthis.roomTypesOrder.push({\n\t\t\tidentifier: roomConfig.identifier,\n\t\t\torder: roomConfig.order,\n\t\t});\n\n\t\tthis.roomTypes[roomConfig.identifier] = roomConfig;\n\n\t\tif (roomConfig.route && roomConfig.route.path && roomConfig.route.name && roomConfig.route.action) {\n\t\t\tconst routeConfig = {\n\t\t\t\tname: roomConfig.route.name,\n\t\t\t\taction: roomConfig.route.action,\n\t\t\t\t// triggersExit: [() => Session.set('openedRoom', '')],\n\t\t\t};\n\n\t\t\tif (Meteor.isClient) {\n\t\t\t\trouteConfig.triggersExit = [roomExit];\n\t\t\t}\n\n\t\t\treturn FlowRouter.route(roomConfig.route.path, routeConfig);\n\t\t}\n\t}\n\n\thasCustomLink(roomType) {\n\t\treturn this.roomTypes[roomType] && this.roomTypes[roomType].route && this.roomTypes[roomType].route.link != null;\n\t}\n\n\t/**\n\t * @param {string} roomType room type (e.g.: c (for channels), d (for direct channels))\n\t * @param {object} subData the user's subscription data\n\t */\n\tgetRouteLink(roomType, subData) {\n\t\tconst routeData = this.getRouteData(roomType, subData);\n\t\tif (!routeData) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn FlowRouter.path(this.roomTypes[roomType].route.name, routeData);\n\t}\n\n\t/**\n\t * @param {string} roomType room type (e.g.: c (for channels), d (for direct channels))\n\t * @param {RoomTypeConfig} roomConfig room's type configuration\n\t */\n\tgetConfig(roomType) {\n\t\treturn this.roomTypes[roomType];\n\t}\n\n\t/**\n\t * @param {string} roomType room type (e.g.: c (for channels), d (for direct channels))\n\t * @param {object} subData the user's subscription data\n\t */\n\tgetURL(roomType, subData) {\n\t\tconst routeData = this.getRouteData(roomType, subData);\n\t\tif (!routeData) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn FlowRouter.url(this.roomTypes[roomType].route.name, routeData);\n\t}\n\n\tgetRelativePath(roomType, subData) {\n\t\treturn this.getRouteLink(roomType, subData).replace(Meteor.absoluteUrl(), '');\n\t}\n\n\tgetRouteData(roomType, subData) {\n\t\tif (!this.roomTypes[roomType]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet routeData = {};\n\t\tif (this.roomTypes[roomType] && this.roomTypes[roomType].route && this.roomTypes[roomType].route.link) {\n\t\t\trouteData = this.roomTypes[roomType].route.link(subData);\n\t\t} else if (subData && subData.name) {\n\t\t\trouteData = {\n\t\t\t\trid: subData.rid || subData._id,\n\t\t\t\tname: subData.name,\n\t\t\t};\n\t\t}\n\n\t\treturn routeData;\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\nimport _ from 'underscore';\n\nlet settings;\nif (Meteor.isClient) {\n\tsettings = require('../../settings/client').settings;\n} else {\n\tsettings = require('../../settings/server').settings;\n}\n\nconst fileUploadMediaWhiteList = function (customWhiteList) {\n\tconst mediaTypeWhiteList = customWhiteList || settings.get('FileUpload_MediaTypeWhiteList');\n\n\tif (!mediaTypeWhiteList || mediaTypeWhiteList === '*') {\n\t\treturn;\n\t}\n\treturn _.map(mediaTypeWhiteList.split(','), function (item) {\n\t\treturn item.trim();\n\t});\n};\n\nconst fileUploadMediaBlackList = function () {\n\tconst blacklist = settings.get('FileUpload_MediaTypeBlackList');\n\tif (!blacklist) {\n\t\treturn;\n\t}\n\n\treturn _.map(blacklist.split(','), (item) => item.trim());\n};\n\nconst isTypeOnList = function (type, list) {\n\tif (_.contains(list, type)) {\n\t\treturn true;\n\t}\n\tconst wildCardGlob = '/*';\n\tconst wildcards = _.filter(list, function (item) {\n\t\treturn item.indexOf(wildCardGlob) > 0;\n\t});\n\tif (_.contains(wildcards, type.replace(/(\\/.*)$/, wildCardGlob))) {\n\t\treturn true;\n\t}\n};\n\nexport const fileUploadIsValidContentType = function (type, customWhiteList) {\n\tconst blackList = fileUploadMediaBlackList();\n\tconst whiteList = fileUploadMediaWhiteList(customWhiteList);\n\n\tif (!type && blackList) {\n\t\treturn false;\n\t}\n\n\tif (blackList && isTypeOnList(type, blackList)) {\n\t\treturn false;\n\t}\n\n\tif (!whiteList) {\n\t\treturn true;\n\t}\n\n\treturn isTypeOnList(type, whiteList);\n};\n","const colors = [\n\t'#F44336',\n\t'#E91E63',\n\t'#9C27B0',\n\t'#673AB7',\n\t'#3F51B5',\n\t'#2196F3',\n\t'#03A9F4',\n\t'#00BCD4',\n\t'#009688',\n\t'#4CAF50',\n\t'#8BC34A',\n\t'#CDDC39',\n\t'#FFC107',\n\t'#FF9800',\n\t'#FF5722',\n\t'#795548',\n\t'#9E9E9E',\n\t'#607D8B',\n];\n\nexport const getAvatarColor = (name) => colors[name.length % colors.length];\n","import { getURL } from './getURL';\n\nexport const getAvatarURL = ({ username, roomId, cache }) => {\n\tif (username) {\n\t\treturn getURL(`/avatar/${encodeURIComponent(username)}${cache ? `?etag=${cache}` : ''}`);\n\t}\n\tif (roomId) {\n\t\treturn getURL(`/avatar/room/${encodeURIComponent(roomId)}${cache ? `?etag=${cache}` : ''}`);\n\t}\n};\n","export const getDefaultSubscriptionPref = (userPref) => {\n\tconst subscription = {};\n\n\tconst { desktopNotifications, pushNotifications, emailNotificationMode, highlights } =\n\t\t(userPref.settings && userPref.settings.preferences) || {};\n\n\tif (Array.isArray(highlights) && highlights.length) {\n\t\tsubscription.userHighlights = highlights;\n\t}\n\n\tif (desktopNotifications && desktopNotifications !== 'default') {\n\t\tsubscription.desktopNotifications = desktopNotifications;\n\t\tsubscription.desktopPrefOrigin = 'user';\n\t}\n\n\tif (pushNotifications && pushNotifications !== 'default') {\n\t\tsubscription.mobilePushNotifications = pushNotifications;\n\t\tsubscription.mobilePrefOrigin = 'user';\n\t}\n\n\tif (emailNotificationMode && emailNotificationMode !== 'default') {\n\t\tsubscription.emailNotifications = emailNotificationMode;\n\t\tsubscription.emailPrefOrigin = 'user';\n\t}\n\n\treturn subscription;\n};\n","import { getAvatarURL } from './getAvatarURL';\nimport { settings } from '../../settings';\n\nexport const getRoomAvatarURL = function (roomId, etag) {\n\tconst externalSource = (settings.get('Accounts_RoomAvatarExternalProviderUrl') || '').trim().replace(/\\/$/, '');\n\tif (externalSource !== '') {\n\t\treturn externalSource.replace('{roomId}', roomId);\n\t}\n\tif (!roomId) {\n\t\treturn;\n\t}\n\treturn getAvatarURL({ roomId, cache: etag });\n};\n","import s from 'underscore.string';\nimport { escapeRegExp } from '@rocket.chat/string-helpers';\n\nimport { isURL } from './isURL';\nimport { settings } from '../../settings';\n\nfunction getCloudUrl(path, _site_url, cloudRoute, cloudParams = {}) {\n\tconst cloudBaseUrl = (settings.get('DeepLink_Url') || '').replace(/\\/+$/, '');\n\n\tconst siteUrl = s.rtrim(_site_url, '/');\n\n\t// Remove the protocol\n\tconst host = siteUrl.replace(/https?\\:\\/\\//i, '');\n\tpath = s.ltrim(path, '/');\n\n\tObject.assign(cloudParams, {\n\t\thost,\n\t\tpath,\n\t});\n\n\tif (siteUrl.includes('http://')) {\n\t\tcloudParams.secure = 'no';\n\t}\n\n\tconst params = Object.entries(cloudParams)\n\t\t.map(([key, value]) => `${key}=${encodeURIComponent(value)}`)\n\t\t.join('&');\n\n\treturn `${cloudBaseUrl}/${cloudRoute}?${params}`;\n}\n\nexport const _getURL = (path, { cdn, full, cloud, cloud_route, cloud_params, _cdn_prefix, _root_url_path_prefix, _site_url }) => {\n\tif (isURL(path)) {\n\t\treturn path;\n\t}\n\n\tconst [_path, _query] = path.split('?');\n\tpath = _path;\n\tconst query = _query ? `?${_query}` : '';\n\n\tconst siteUrl = s.rtrim(s.trim(_site_url || ''), '/');\n\tconst cloudRoute = s.trim(cloud_route || '');\n\tconst cdnPrefix = s.rtrim(s.trim(_cdn_prefix || ''), '/');\n\tconst pathPrefix = s.rtrim(s.trim(_root_url_path_prefix || ''), '/');\n\n\tconst finalPath = s.ltrim(s.trim(path), '/');\n\n\tconst url = s.rtrim(`${pathPrefix}/${finalPath}`, '/') + query;\n\n\tif (cloud) {\n\t\tconst cloudParams = cloud_params || {};\n\t\treturn getCloudUrl(url, siteUrl, cloudRoute, cloudParams);\n\t}\n\n\tif (cdn && cdnPrefix !== '') {\n\t\treturn cdnPrefix + url;\n\t}\n\n\tif (full) {\n\t\treturn siteUrl.replace(new RegExp(`${escapeRegExp(pathPrefix)}$`), '') + url;\n\t}\n\n\treturn url;\n};\n\nexport const getURL = (path, { cdn = true, full = false, cloud = false, cloud_route = '', cloud_params = {} } = {}) =>\n\t_getURL(path, {\n\t\tcdn,\n\t\tfull,\n\t\tcloud,\n\t\tcloud_route,\n\t\tcloud_params,\n\t\t_cdn_prefix: settings.get('CDN_PREFIX'),\n\t\t_root_url_path_prefix: __meteor_runtime_config__.ROOT_URL_PATH_PREFIX,\n\t\t_site_url: settings.get('Site_Url'),\n\t});\n","import { getAvatarURL } from './getAvatarURL';\nimport { settings } from '../../settings';\n\nexport const getUserAvatarURL = function (username, cache = '') {\n\tconst externalSource = (settings.get('Accounts_AvatarExternalProviderUrl') || '').trim().replace(/\\/$/, '');\n\tif (externalSource !== '') {\n\t\treturn externalSource.replace('{username}', username);\n\t}\n\tif (username == null) {\n\t\treturn;\n\t}\n\n\treturn getAvatarURL({ username, cache });\n};\n","import { settings } from '../../settings';\nimport { Users } from '../../models';\n\nexport const getUserNotificationPreference = (user, pref) => {\n\tif (typeof user === 'string') {\n\t\tuser = Users.findOneById(user);\n\t}\n\n\tlet preferenceKey;\n\tswitch (pref) {\n\t\tcase 'desktop':\n\t\t\tpreferenceKey = 'desktopNotifications';\n\t\t\tbreak;\n\t\tcase 'mobile':\n\t\t\tpreferenceKey = 'pushNotifications';\n\t\t\tbreak;\n\t\tcase 'email':\n\t\t\tpreferenceKey = 'emailNotificationMode';\n\t\t\tbreak;\n\t}\n\n\tif (\n\t\tuser?.settings?.preferences &&\n\t\ttypeof user.settings.preferences[preferenceKey] !== 'undefined' &&\n\t\tuser.settings.preferences[preferenceKey] !== 'default'\n\t) {\n\t\treturn {\n\t\t\tvalue: user.settings.preferences[preferenceKey],\n\t\t\torigin: 'user',\n\t\t};\n\t}\n\tconst serverValue = settings.get(`Accounts_Default_User_Preferences_${preferenceKey}`);\n\tif (serverValue) {\n\t\treturn {\n\t\t\tvalue: serverValue,\n\t\t\torigin: 'server',\n\t\t};\n\t}\n\n\treturn null;\n};\n","import { Users } from '../../models';\nimport { settings } from '../../settings';\n\nexport const getUserPreference = (user, key, defaultValue = undefined) => {\n\tlet preference;\n\tif (typeof user === typeof '') {\n\t\tuser = Users.findOne(user, { fields: { [`settings.preferences.${key}`]: 1 } });\n\t}\n\tif (user && user.settings && user.settings.preferences && user.settings.preferences.hasOwnProperty(key)) {\n\t\tpreference = user.settings.preferences[key];\n\t} else if (defaultValue === undefined) {\n\t\tpreference = settings.get(`Accounts_Default_User_Preferences_${key}`);\n\t}\n\n\treturn preference !== undefined ? preference : defaultValue;\n};\n","export const isURL = (str) => /^(https?:\\/\\/|data:)/.test(str);\nexport const isRelativeURL = (str) => /^[^\\/]+\\/[^\\/].*$|^\\/[^\\/].*$/gim.test(str);\n","import s from 'underscore.string';\n\nimport { settings } from '../../settings';\n\nexport const placeholders = {\n\treplace: (str, data) => {\n\t\tif (!str) {\n\t\t\treturn '';\n\t\t}\n\n\t\tstr = str.replace(/\\[Site_Name\\]/g, settings.get('Site_Name') || '');\n\t\tstr = str.replace(/\\[Site_URL\\]/g, settings.get('Site_Url') || '');\n\n\t\tif (data) {\n\t\t\tstr = str.replace(/\\[name\\]/g, data.name || '');\n\t\t\tstr = str.replace(/\\[fname\\]/g, s.strLeft(data.name, ' ') || '');\n\t\t\tstr = str.replace(/\\[lname\\]/g, s.strRightBack(data.name, ' ') || '');\n\t\t\tstr = str.replace(/\\[email\\]/g, data.email || '');\n\t\t\tstr = str.replace(/\\[password\\]/g, data.password || '');\n\t\t\tstr = str.replace(/\\[reason\\]/g, data.reason || '');\n\t\t\tstr = str.replace(/\\[User\\]/g, data.user || '');\n\t\t\tstr = str.replace(/\\[Room\\]/g, data.room || '');\n\n\t\t\tif (data.unsubscribe) {\n\t\t\t\tstr = str.replace(/\\[unsubscribe\\]/g, data.unsubscribe);\n\t\t\t}\n\t\t}\n\n\t\tstr = str.replace(/([^>\\r\\n]?)(\\r\\n|\\n\\r|\\r|\\n)/g, '$1<br>$2');\n\n\t\treturn str;\n\t},\n};\n","import { Blaze } from 'meteor/blaze';\n// import { Session } from 'meteor/session';\nimport { Tracker } from 'meteor/tracker';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { callbacks } from '../../../lib/callbacks';\n\nconst testIfPathAreEquals = (oldPath = '', newPath = '') => oldPath.replace(/\"/g, '') === newPath;\nexport const roomExit = function () {\n\tconst oldRoute = FlowRouter.current();\n\tTracker.afterFlush(() => {\n\t\tconst context = FlowRouter.current();\n\n\t\tif (\n\t\t\toldRoute &&\n\t\t\ttestIfPathAreEquals(\n\t\t\t\toldRoute.params.name || oldRoute.params.rid || oldRoute.params.id,\n\t\t\t\tcontext.params.name || context.params.rid || context.params.id,\n\t\t\t)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\t\t// 7370 - Close flex-tab when opening a room on mobile UI\n\t\tif (window.matchMedia('(max-width: 500px)').matches) {\n\t\t\tconst flex = document.querySelector('.flex-tab');\n\t\t\tif (flex) {\n\t\t\t\tconst templateData = Blaze.getData(flex);\n\t\t\t\ttemplateData && templateData.tabBar && templateData.tabBar.close();\n\t\t\t}\n\t\t}\n\t\tcallbacks.run('roomExit');\n\n\t\t// Session.set('lastOpenedRoom', Session.get('openedRoom'));\n\t\t// Session.set('openedRoom', null);\n\t\t// RoomManager.openedRoom = null;\n\t});\n\tif (typeof window.currentTracker !== 'undefined') {\n\t\twindow.currentTracker.stop();\n\t}\n};\n","import { Meteor } from 'meteor/meteor';\n\nexport const slashCommands = {\n\tcommands: {},\n\tadd: function _addingSlashCommand(command, callback, options = {}, result, providesPreview = false, previewer, previewCallback) {\n\t\tslashCommands.commands[command] = {\n\t\t\tcommand,\n\t\t\tcallback,\n\t\t\tparams: options.params,\n\t\t\tdescription: options.description,\n\t\t\tpermission: options.permission,\n\t\t\tclientOnly: options.clientOnly || false,\n\t\t\tresult,\n\t\t\tprovidesPreview,\n\t\t\tpreviewer,\n\t\t\tpreviewCallback,\n\t\t};\n\t},\n\trun: function _runningSlashCommand(command, params, message, triggerId) {\n\t\tif (slashCommands.commands[command] && typeof slashCommands.commands[command].callback === 'function') {\n\t\t\tif (!message || !message.rid) {\n\t\t\t\tthrow new Meteor.Error('invalid-command-usage', 'Executing a command requires at least a message with a room id.');\n\t\t\t}\n\t\t\treturn slashCommands.commands[command].callback(command, params, message, triggerId);\n\t\t}\n\t},\n\tgetPreviews: function _executeSlashCommandPreview(command, params, message, preview, triggerId) {\n\t\tif (slashCommands.commands[command] && typeof slashCommands.commands[command].previewCallback === 'function') {\n\t\t\tif (!message || !message.rid) {\n\t\t\t\tthrow new Meteor.Error('invalid-command-usage', 'Executing a command requires at least a message with a room id.');\n\t\t\t}\n\n\t\t\t// { id, type, value }\n\t\t\tif (!preview.id || !preview.type || !preview.value) {\n\t\t\t\tthrow new Meteor.Error('error-invalid-preview', 'Preview Item must have an id, type, and value.');\n\t\t\t}\n\n\t\t\treturn slashCommands.commands[command].previewCallback(command, params, message, preview, triggerId);\n\t\t}\n\t},\n\texecutePreview: function _executeSlashCommandPreview(command, params, message, preview, triggerId) {\n\t\tif (slashCommands.commands[command] && typeof slashCommands.commands[command].previewCallback === 'function') {\n\t\t\tif (!message || !message.rid) {\n\t\t\t\tthrow new Meteor.Error('invalid-command-usage', 'Executing a command requires at least a message with a room id.');\n\t\t\t}\n\n\t\t\t// { id, type, value }\n\t\t\tif (!preview.id || !preview.type || !preview.value) {\n\t\t\t\tthrow new Meteor.Error('error-invalid-preview', 'Preview Item must have an id, type, and value.');\n\t\t\t}\n\n\t\t\treturn slashCommands.commands[command].previewCallback(command, params, message, preview, triggerId);\n\t\t}\n\t},\n};\n\nMeteor.methods({\n\tslashCommand(command) {\n\t\tif (!Meteor.userId()) {\n\t\t\tthrow new Meteor.Error('error-invalid-user', 'Invalid user', {\n\t\t\t\tmethod: 'slashCommand',\n\t\t\t});\n\t\t}\n\n\t\tif (!command || !command.cmd || !slashCommands.commands[command.cmd]) {\n\t\t\tthrow new Meteor.Error('error-invalid-command', 'Invalid Command Provided', {\n\t\t\t\tmethod: 'executeSlashCommandPreview',\n\t\t\t});\n\t\t}\n\t\treturn slashCommands.run(command.cmd, command.params, command.msg, command.triggerId);\n\t},\n});\n","import _ from 'underscore';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { Meteor } from 'meteor/meteor';\n\nexport const t = function (key, ...replaces) {\n\tif (_.isObject(replaces[0])) {\n\t\treturn TAPi18n.__(key, ...replaces);\n\t}\n\treturn TAPi18n.__(key, {\n\t\tpostProcess: 'sprintf',\n\t\tsprintf: replaces,\n\t});\n};\n\nexport const isRtl = (lang) => {\n\tconst language = lang || Meteor._localStorage.getItem('userLanguage') || 'en-US';\n\treturn ['ar', 'dv', 'fa', 'he', 'ku', 'ps', 'sd', 'ug', 'ur', 'yi'].includes(language.split('-').shift().toLowerCase());\n};\n","import { Meteor } from 'meteor/meteor';\n\nlet logger;\n\nif (Meteor.isServer) {\n\tconst { Logger } = require('../../../server/lib/logger/Logger');\n\tlogger = new Logger('TemplateVarHandler');\n}\n\nexport const templateVarHandler = function (variable, object) {\n\tconst templateRegex = /#{([\\w\\-]+)}/gi;\n\tlet match = templateRegex.exec(variable);\n\tlet tmpVariable = variable;\n\n\tif (match == null) {\n\t\tif (!object.hasOwnProperty(variable)) {\n\t\t\tlogger && logger.debug(`user does not have attribute: ${variable}`);\n\t\t\treturn;\n\t\t}\n\t\treturn object[variable];\n\t}\n\tlogger && logger.debug('template found. replacing values');\n\twhile (match != null) {\n\t\tconst tmplVar = match[0];\n\t\tconst tmplAttrName = match[1];\n\n\t\tif (!object.hasOwnProperty(tmplAttrName)) {\n\t\t\tlogger && logger.debug(`user does not have attribute: ${tmplAttrName}`);\n\t\t\treturn;\n\t\t}\n\n\t\tconst attrVal = object[tmplAttrName];\n\t\tlogger && logger.debug(`replacing template var: ${tmplVar} with value: ${attrVal}`);\n\t\ttmpVariable = tmpVariable.replace(tmplVar, attrVal);\n\t\tmatch = templateRegex.exec(variable);\n\t}\n\treturn tmpVariable;\n};\n","/**\n * return readable time format from seconds\n * @param  {Double} sec seconds\n * @return {String}     Readable string format\n */\nexport const secondsToHHMMSS = (sec) => {\n\tsec = parseFloat(sec);\n\n\tlet hours = Math.floor(sec / 3600);\n\tlet minutes = Math.floor((sec - hours * 3600) / 60);\n\tlet seconds = Math.round(sec - hours * 3600 - minutes * 60);\n\n\tif (hours < 10) {\n\t\thours = `0${hours}`;\n\t}\n\tif (minutes < 10) {\n\t\tminutes = `0${minutes}`;\n\t}\n\tif (seconds < 10) {\n\t\tseconds = `0${seconds}`;\n\t}\n\n\tif (hours > 0) {\n\t\treturn `${hours}:${minutes}:${seconds}`;\n\t}\n\tif (minutes > 0) {\n\t\treturn `00:${minutes}:${seconds}`;\n\t}\n\treturn `00:00:${seconds}`;\n};\n","export const ROOM_DATA_STREAM = 'room-data';\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/index.js');\n}\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/index.js');\n}\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { ServiceConfiguration } from 'meteor/service-configuration';\n\nimport { settings } from '../../settings';\nimport { CustomOAuth } from '../../custom-oauth';\nimport { callbacks } from '../../../lib/callbacks';\n\nconst config = {\n\tserverURL: '',\n\tauthorizePath: '/m/oauth2/auth/',\n\ttokenPath: '/m/oauth2/token/',\n\tidentityPath: '/m/oauth2/api/me/',\n\tscope: 'basic',\n\taddAutopublishFields: {\n\t\tforLoggedInUser: ['services.dolphin'],\n\t\tforOtherUsers: ['services.dolphin.name'],\n\t},\n\taccessTokenParam: 'access_token',\n};\n\nconst Dolphin = new CustomOAuth('dolphin', config);\n\nfunction DolphinOnCreateUser(options, user) {\n\tif (user && user.services && user.services.dolphin && user.services.dolphin.NickName) {\n\t\tuser.username = user.services.dolphin.NickName;\n\t}\n\treturn options;\n}\n\nif (Meteor.isServer) {\n\tMeteor.startup(() =>\n\t\tsettings.get('Accounts_OAuth_Dolphin_URL', (key, value) => {\n\t\t\tconfig.serverURL = value;\n\t\t\treturn Dolphin.configure(config);\n\t\t}),\n\t);\n\n\tif (settings.get('Accounts_OAuth_Dolphin_URL')) {\n\t\tconst data = {\n\t\t\tbuttonLabelText: settings.get('Accounts_OAuth_Dolphin_button_label_text'),\n\t\t\tbuttonColor: settings.get('Accounts_OAuth_Dolphin_button_color'),\n\t\t\tbuttonLabelColor: settings.get('Accounts_OAuth_Dolphin_button_label_color'),\n\t\t\tclientId: settings.get('Accounts_OAuth_Dolphin_id'),\n\t\t\tsecret: settings.get('Accounts_OAuth_Dolphin_secret'),\n\t\t\tserverURL: settings.get('Accounts_OAuth_Dolphin_URL'),\n\t\t\tloginStyle: settings.get('Accounts_OAuth_Dolphin_login_style'),\n\t\t};\n\n\t\tServiceConfiguration.configurations.upsert({ service: 'dolphin' }, { $set: data });\n\t}\n\n\tcallbacks.add('beforeCreateUser', DolphinOnCreateUser, callbacks.priority.HIGH, 'dolphin');\n} else {\n\tMeteor.startup(() =>\n\t\tTracker.autorun(function () {\n\t\t\tif (settings.get('Accounts_OAuth_Dolphin_URL')) {\n\t\t\t\tconfig.serverURL = settings.get('Accounts_OAuth_Dolphin_URL');\n\t\t\t\treturn Dolphin.configure(config);\n\t\t\t}\n\t\t}),\n\t);\n}\n","import '../lib/common';\nimport './login-button.css';\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../settings';\nimport { CustomOAuth } from '../../custom-oauth';\n\n// Drupal Server CallBack URL needs to be http(s)://{rocketchat.server}[:port]/_oauth/drupal\n// In RocketChat -> Administration the URL needs to be http(s)://{drupal.server}/\n\nconst config = {\n\tserverURL: '',\n\tidentityPath: '/oauth2/UserInfo',\n\tauthorizePath: '/oauth2/authorize',\n\ttokenPath: '/oauth2/token',\n\tscope: 'openid email profile offline_access',\n\ttokenSentVia: 'payload',\n\tusernameField: 'preferred_username',\n\tmergeUsers: true,\n\taddAutopublishFields: {\n\t\tforLoggedInUser: ['services.drupal'],\n\t\tforOtherUsers: ['services.drupal.name'],\n\t},\n\taccessTokenParam: 'access_token',\n};\n\nconst Drupal = new CustomOAuth('drupal', config);\n\nif (Meteor.isServer) {\n\tMeteor.startup(function () {\n\t\tsettings.get('API_Drupal_URL', function (key, value) {\n\t\t\tconfig.serverURL = value;\n\t\t\tDrupal.configure(config);\n\t\t});\n\t});\n} else {\n\tMeteor.startup(function () {\n\t\tTracker.autorun(function () {\n\t\t\tif (settings.get('API_Drupal_URL')) {\n\t\t\t\tconfig.serverURL = settings.get('API_Drupal_URL');\n\t\t\t\tDrupal.configure(config);\n\t\t\t}\n\t\t});\n\t});\n}\n","import '../lib/common';\nimport './login-button.css';\n","/*\n * This file is automatically generated from generateEmojiIndex.mjs\n * Last generated Tue Apr 09 2019 15:27:21 GMT-0300 (-03)\n *\n * Mapping category hashes into human readable and translated names\n */\n\nexport const emojiCategories = [\n\t{ key: 'people', i18n: 'Smileys_and_People' },\n\t{ key: 'nature', i18n: 'Animals_and_Nature' },\n\t{ key: 'food', i18n: 'Food_and_Drink' },\n\t{ key: 'activity', i18n: 'Activity' },\n\t{ key: 'travel', i18n: 'Travel_and_Places' },\n\t{ key: 'objects', i18n: 'Objects' },\n\t{ key: 'symbols', i18n: 'Symbols' },\n\t{ key: 'flags', i18n: 'Flags' },\n];\n\nexport const toneList = {\n\t'snowboarder': 1,\n\t'person_lifting_weights': 1,\n\t'woman_lifting_weights': 1,\n\t'man_lifting_weights': 1,\n\t'person_doing_cartwheel': 1,\n\t'woman_cartwheeling': 1,\n\t'man_cartwheeling': 1,\n\t'person_bouncing_ball': 1,\n\t'woman_bouncing_ball': 1,\n\t'man_bouncing_ball': 1,\n\t'person_playing_handball': 1,\n\t'woman_playing_handball': 1,\n\t'man_playing_handball': 1,\n\t'person_golfing': 1,\n\t'woman_golfing': 1,\n\t'man_golfing': 1,\n\t'horse_racing': 1,\n\t'person_in_lotus_position': 1,\n\t'woman_in_lotus_position': 1,\n\t'man_in_lotus_position': 1,\n\t'person_surfing': 1,\n\t'woman_surfing': 1,\n\t'man_surfing': 1,\n\t'person_swimming': 1,\n\t'woman_swimming': 1,\n\t'man_swimming': 1,\n\t'person_playing_water_polo': 1,\n\t'woman_playing_water_polo': 1,\n\t'man_playing_water_polo': 1,\n\t'person_rowing_boat': 1,\n\t'woman_rowing_boat': 1,\n\t'man_rowing_boat': 1,\n\t'person_climbing': 1,\n\t'woman_climbing': 1,\n\t'man_climbing': 1,\n\t'person_mountain_biking': 1,\n\t'woman_mountain_biking': 1,\n\t'man_mountain_biking': 1,\n\t'person_biking': 1,\n\t'woman_biking': 1,\n\t'man_biking': 1,\n\t'person_juggling': 1,\n\t'woman_juggling': 1,\n\t'man_juggling': 1,\n\t'bath': 1,\n\t'person_in_bed': 1,\n\t'palms_up_together': 1,\n\t'open_hands': 1,\n\t'raised_hands': 1,\n\t'clap': 1,\n\t'thumbsup': 1,\n\t'thumbsdown': 1,\n\t'punch': 1,\n\t'fist': 1,\n\t'left_facing_fist': 1,\n\t'right_facing_fist': 1,\n\t'fingers_crossed': 1,\n\t'v': 1,\n\t'love_you_gesture': 1,\n\t'metal': 1,\n\t'ok_hand': 1,\n\t'point_left': 1,\n\t'point_right': 1,\n\t'point_up_2': 1,\n\t'point_down': 1,\n\t'point_up': 1,\n\t'raised_hand': 1,\n\t'raised_back_of_hand': 1,\n\t'hand_splayed': 1,\n\t'vulcan': 1,\n\t'wave': 1,\n\t'call_me': 1,\n\t'muscle': 1,\n\t'leg': 1,\n\t'foot': 1,\n\t'middle_finger': 1,\n\t'writing_hand': 1,\n\t'pray': 1,\n\t'ear': 1,\n\t'nose': 1,\n\t'baby': 1,\n\t'girl': 1,\n\t'child': 1,\n\t'boy': 1,\n\t'woman': 1,\n\t'adult': 1,\n\t'man': 1,\n\t'blond_haired_person': 1,\n\t'blond-haired_woman': 1,\n\t'blond-haired_man': 1,\n\t'woman_red_haired': 1,\n\t'man_red_haired': 1,\n\t'woman_curly_haired': 1,\n\t'man_curly_haired': 1,\n\t'woman_white_haired': 1,\n\t'man_white_haired': 1,\n\t'woman_bald': 1,\n\t'man_bald': 1,\n\t'bearded_person': 1,\n\t'older_woman': 1,\n\t'older_adult': 1,\n\t'older_man': 1,\n\t'man_with_chinese_cap': 1,\n\t'person_wearing_turban': 1,\n\t'woman_wearing_turban': 1,\n\t'man_wearing_turban': 1,\n\t'woman_with_headscarf': 1,\n\t'police_officer': 1,\n\t'woman_police_officer': 1,\n\t'man_police_officer': 1,\n\t'construction_worker': 1,\n\t'woman_construction_worker': 1,\n\t'man_construction_worker': 1,\n\t'guard': 1,\n\t'woman_guard': 1,\n\t'man_guard': 1,\n\t'detective': 1,\n\t'woman_detective': 1,\n\t'man_detective': 1,\n\t'woman_health_worker': 1,\n\t'man_health_worker': 1,\n\t'woman_farmer': 1,\n\t'man_farmer': 1,\n\t'woman_cook': 1,\n\t'man_cook': 1,\n\t'woman_student': 1,\n\t'man_student': 1,\n\t'woman_singer': 1,\n\t'man_singer': 1,\n\t'woman_teacher': 1,\n\t'man_teacher': 1,\n\t'woman_factory_worker': 1,\n\t'man_factory_worker': 1,\n\t'woman_technologist': 1,\n\t'man_technologist': 1,\n\t'woman_office_worker': 1,\n\t'man_office_worker': 1,\n\t'woman_mechanic': 1,\n\t'man_mechanic': 1,\n\t'woman_scientist': 1,\n\t'man_scientist': 1,\n\t'woman_artist': 1,\n\t'man_artist': 1,\n\t'woman_firefighter': 1,\n\t'man_firefighter': 1,\n\t'woman_pilot': 1,\n\t'man_pilot': 1,\n\t'woman_astronaut': 1,\n\t'man_astronaut': 1,\n\t'woman_judge': 1,\n\t'man_judge': 1,\n\t'bride_with_veil': 1,\n\t'man_in_tuxedo': 1,\n\t'princess': 1,\n\t'prince': 1,\n\t'mrs_claus': 1,\n\t'santa': 1,\n\t'superhero': 1,\n\t'woman_superhero': 1,\n\t'man_superhero': 1,\n\t'supervillain': 1,\n\t'woman_supervillain': 1,\n\t'man_supervillain': 1,\n\t'mage': 1,\n\t'woman_mage': 1,\n\t'man_mage': 1,\n\t'elf': 1,\n\t'woman_elf': 1,\n\t'man_elf': 1,\n\t'vampire': 1,\n\t'woman_vampire': 1,\n\t'man_vampire': 1,\n\t'merperson': 1,\n\t'mermaid': 1,\n\t'merman': 1,\n\t'fairy': 1,\n\t'woman_fairy': 1,\n\t'man_fairy': 1,\n\t'angel': 1,\n\t'pregnant_woman': 1,\n\t'breast_feeding': 1,\n\t'person_bowing': 1,\n\t'woman_bowing': 1,\n\t'man_bowing': 1,\n\t'person_tipping_hand': 1,\n\t'woman_tipping_hand': 1,\n\t'man_tipping_hand': 1,\n\t'person_gesturing_no': 1,\n\t'woman_gesturing_no': 1,\n\t'man_gesturing_no': 1,\n\t'person_gesturing_ok': 1,\n\t'woman_gesturing_ok': 1,\n\t'man_gesturing_ok': 1,\n\t'person_raising_hand': 1,\n\t'woman_raising_hand': 1,\n\t'man_raising_hand': 1,\n\t'person_facepalming': 1,\n\t'woman_facepalming': 1,\n\t'man_facepalming': 1,\n\t'person_shrugging': 1,\n\t'woman_shrugging': 1,\n\t'man_shrugging': 1,\n\t'person_pouting': 1,\n\t'woman_pouting': 1,\n\t'man_pouting': 1,\n\t'person_frowning': 1,\n\t'woman_frowning': 1,\n\t'man_frowning': 1,\n\t'person_getting_haircut': 1,\n\t'woman_getting_haircut': 1,\n\t'man_getting_haircut': 1,\n\t'person_getting_massage': 1,\n\t'woman_getting_face_massage': 1,\n\t'man_getting_face_massage': 1,\n\t'person_in_steamy_room': 1,\n\t'woman_in_steamy_room': 1,\n\t'man_in_steamy_room': 1,\n\t'nail_care': 1,\n\t'selfie': 1,\n\t'dancer': 1,\n\t'man_dancing': 1,\n\t'levitate': 1,\n\t'person_walking': 1,\n\t'woman_walking': 1,\n\t'man_walking': 1,\n\t'person_running': 1,\n\t'woman_running': 1,\n\t'man_running': 1,\n};\nexport const emojisByCategory = {\n\tsymbols: [\n\t\t'heart',\n\t\t'orange_heart',\n\t\t'yellow_heart',\n\t\t'green_heart',\n\t\t'blue_heart',\n\t\t'purple_heart',\n\t\t'black_heart',\n\t\t'broken_heart',\n\t\t'heart_exclamation',\n\t\t'two_hearts',\n\t\t'revolving_hearts',\n\t\t'heartbeat',\n\t\t'heartpulse',\n\t\t'sparkling_heart',\n\t\t'cupid',\n\t\t'gift_heart',\n\t\t'heart_decoration',\n\t\t'peace',\n\t\t'cross',\n\t\t'star_and_crescent',\n\t\t'om_symbol',\n\t\t'wheel_of_dharma',\n\t\t'star_of_david',\n\t\t'six_pointed_star',\n\t\t'menorah',\n\t\t'yin_yang',\n\t\t'orthodox_cross',\n\t\t'place_of_worship',\n\t\t'ophiuchus',\n\t\t'aries',\n\t\t'taurus',\n\t\t'gemini',\n\t\t'cancer',\n\t\t'leo',\n\t\t'virgo',\n\t\t'libra',\n\t\t'scorpius',\n\t\t'sagittarius',\n\t\t'capricorn',\n\t\t'aquarius',\n\t\t'pisces',\n\t\t'id',\n\t\t'atom',\n\t\t'infinity',\n\t\t'accept',\n\t\t'radioactive',\n\t\t'biohazard',\n\t\t'mobile_phone_off',\n\t\t'vibration_mode',\n\t\t'u6709',\n\t\t'u7121',\n\t\t'u7533',\n\t\t'u55b6',\n\t\t'u6708',\n\t\t'eight_pointed_black_star',\n\t\t'vs',\n\t\t'white_flower',\n\t\t'ideograph_advantage',\n\t\t'secret',\n\t\t'congratulations',\n\t\t'u5408',\n\t\t'u6e80',\n\t\t'u5272',\n\t\t'u7981',\n\t\t'a',\n\t\t'b',\n\t\t'ab',\n\t\t'cl',\n\t\t'o2',\n\t\t'sos',\n\t\t'x',\n\t\t'o',\n\t\t'octagonal_sign',\n\t\t'no_entry',\n\t\t'name_badge',\n\t\t'no_entry_sign',\n\t\t'100',\n\t\t'anger',\n\t\t'hotsprings',\n\t\t'no_pedestrians',\n\t\t'do_not_litter',\n\t\t'no_bicycles',\n\t\t'non-potable_water',\n\t\t'underage',\n\t\t'no_mobile_phones',\n\t\t'no_smoking',\n\t\t'exclamation',\n\t\t'grey_exclamation',\n\t\t'question',\n\t\t'grey_question',\n\t\t'bangbang',\n\t\t'interrobang',\n\t\t'low_brightness',\n\t\t'high_brightness',\n\t\t'part_alternation_mark',\n\t\t'warning',\n\t\t'children_crossing',\n\t\t'trident',\n\t\t'fleur-de-lis',\n\t\t'beginner',\n\t\t'recycle',\n\t\t'white_check_mark',\n\t\t'u6307',\n\t\t'chart',\n\t\t'sparkle',\n\t\t'eight_spoked_asterisk',\n\t\t'negative_squared_cross_mark',\n\t\t'globe_with_meridians',\n\t\t'diamond_shape_with_a_dot_inside',\n\t\t'm',\n\t\t'cyclone',\n\t\t'zzz',\n\t\t'atm',\n\t\t'wc',\n\t\t'wheelchair',\n\t\t'parking',\n\t\t'u7a7a',\n\t\t'sa',\n\t\t'passport_control',\n\t\t'customs',\n\t\t'baggage_claim',\n\t\t'left_luggage',\n\t\t'mens',\n\t\t'womens',\n\t\t'baby_symbol',\n\t\t'restroom',\n\t\t'put_litter_in_its_place',\n\t\t'cinema',\n\t\t'signal_strength',\n\t\t'koko',\n\t\t'symbols',\n\t\t'information_source',\n\t\t'abc',\n\t\t'abcd',\n\t\t'capital_abcd',\n\t\t'ng',\n\t\t'ok',\n\t\t'up',\n\t\t'cool',\n\t\t'new',\n\t\t'free',\n\t\t'zero',\n\t\t'one',\n\t\t'two',\n\t\t'three',\n\t\t'four',\n\t\t'five',\n\t\t'six',\n\t\t'seven',\n\t\t'eight',\n\t\t'nine',\n\t\t'keycap_ten',\n\t\t'1234',\n\t\t'hash',\n\t\t'asterisk',\n\t\t'eject',\n\t\t'arrow_forward',\n\t\t'pause_button',\n\t\t'play_pause',\n\t\t'stop_button',\n\t\t'record_button',\n\t\t'track_next',\n\t\t'track_previous',\n\t\t'fast_forward',\n\t\t'rewind',\n\t\t'arrow_double_up',\n\t\t'arrow_double_down',\n\t\t'arrow_backward',\n\t\t'arrow_up_small',\n\t\t'arrow_down_small',\n\t\t'arrow_right',\n\t\t'arrow_left',\n\t\t'arrow_up',\n\t\t'arrow_down',\n\t\t'arrow_upper_right',\n\t\t'arrow_lower_right',\n\t\t'arrow_lower_left',\n\t\t'arrow_upper_left',\n\t\t'arrow_up_down',\n\t\t'left_right_arrow',\n\t\t'arrow_right_hook',\n\t\t'leftwards_arrow_with_hook',\n\t\t'arrow_heading_up',\n\t\t'arrow_heading_down',\n\t\t'twisted_rightwards_arrows',\n\t\t'repeat',\n\t\t'repeat_one',\n\t\t'arrows_counterclockwise',\n\t\t'arrows_clockwise',\n\t\t'musical_note',\n\t\t'notes',\n\t\t'heavy_plus_sign',\n\t\t'heavy_minus_sign',\n\t\t'heavy_division_sign',\n\t\t'heavy_multiplication_x',\n\t\t'heavy_dollar_sign',\n\t\t'currency_exchange',\n\t\t'tm',\n\t\t'copyright',\n\t\t'registered',\n\t\t'wavy_dash',\n\t\t'curly_loop',\n\t\t'loop',\n\t\t'end',\n\t\t'back',\n\t\t'on',\n\t\t'top',\n\t\t'soon',\n\t\t'heavy_check_mark',\n\t\t'ballot_box_with_check',\n\t\t'radio_button',\n\t\t'white_circle',\n\t\t'black_circle',\n\t\t'red_circle',\n\t\t'blue_circle',\n\t\t'small_red_triangle',\n\t\t'small_red_triangle_down',\n\t\t'small_orange_diamond',\n\t\t'small_blue_diamond',\n\t\t'large_orange_diamond',\n\t\t'large_blue_diamond',\n\t\t'white_square_button',\n\t\t'black_square_button',\n\t\t'black_small_square',\n\t\t'white_small_square',\n\t\t'black_medium_small_square',\n\t\t'white_medium_small_square',\n\t\t'black_medium_square',\n\t\t'white_medium_square',\n\t\t'black_large_square',\n\t\t'white_large_square',\n\t\t'speaker',\n\t\t'mute',\n\t\t'sound',\n\t\t'loud_sound',\n\t\t'bell',\n\t\t'no_bell',\n\t\t'mega',\n\t\t'loudspeaker',\n\t\t'speech_left',\n\t\t'eye_in_speech_bubble',\n\t\t'speech_balloon',\n\t\t'thought_balloon',\n\t\t'anger_right',\n\t\t'spades',\n\t\t'clubs',\n\t\t'hearts',\n\t\t'diamonds',\n\t\t'black_joker',\n\t\t'flower_playing_cards',\n\t\t'mahjong',\n\t\t'clock1',\n\t\t'clock2',\n\t\t'clock3',\n\t\t'clock4',\n\t\t'clock5',\n\t\t'clock6',\n\t\t'clock7',\n\t\t'clock8',\n\t\t'clock9',\n\t\t'clock10',\n\t\t'clock11',\n\t\t'clock12',\n\t\t'clock130',\n\t\t'clock230',\n\t\t'clock330',\n\t\t'clock430',\n\t\t'clock530',\n\t\t'clock630',\n\t\t'clock730',\n\t\t'clock830',\n\t\t'clock930',\n\t\t'clock1030',\n\t\t'clock1130',\n\t\t'clock1230',\n\t\t'digit_zero',\n\t\t'digit_one',\n\t\t'digit_two',\n\t\t'digit_three',\n\t\t'digit_four',\n\t\t'digit_five',\n\t\t'digit_six',\n\t\t'digit_seven',\n\t\t'digit_eight',\n\t\t'digit_nine',\n\t\t'pound_symbol',\n\t\t'asterisk_symbol',\n\t\t'female_sign',\n\t\t'male_sign',\n\t\t'medical_symbol',\n\t],\n\tactivity: [\n\t\t'soccer',\n\t\t'basketball',\n\t\t'football',\n\t\t'baseball',\n\t\t'softball',\n\t\t'tennis',\n\t\t'volleyball',\n\t\t'rugby_football',\n\t\t'8ball',\n\t\t'ping_pong',\n\t\t'badminton',\n\t\t'goal',\n\t\t'hockey',\n\t\t'field_hockey',\n\t\t'cricket_game',\n\t\t'lacrosse',\n\t\t'golf',\n\t\t'flying_disc',\n\t\t'bow_and_arrow',\n\t\t'fishing_pole_and_fish',\n\t\t'boxing_glove',\n\t\t'martial_arts_uniform',\n\t\t'running_shirt_with_sash',\n\t\t'skateboard',\n\t\t'ice_skate',\n\t\t'curling_stone',\n\t\t'sled',\n\t\t'ski',\n\t\t'skier',\n\t\t'snowboarder',\n\t\t'person_lifting_weights',\n\t\t'woman_lifting_weights',\n\t\t'man_lifting_weights',\n\t\t'people_wrestling',\n\t\t'women_wrestling',\n\t\t'men_wrestling',\n\t\t'person_doing_cartwheel',\n\t\t'woman_cartwheeling',\n\t\t'man_cartwheeling',\n\t\t'person_bouncing_ball',\n\t\t'woman_bouncing_ball',\n\t\t'man_bouncing_ball',\n\t\t'person_fencing',\n\t\t'person_playing_handball',\n\t\t'woman_playing_handball',\n\t\t'man_playing_handball',\n\t\t'person_golfing',\n\t\t'woman_golfing',\n\t\t'man_golfing',\n\t\t'horse_racing',\n\t\t'person_in_lotus_position',\n\t\t'woman_in_lotus_position',\n\t\t'man_in_lotus_position',\n\t\t'person_surfing',\n\t\t'woman_surfing',\n\t\t'man_surfing',\n\t\t'person_swimming',\n\t\t'woman_swimming',\n\t\t'man_swimming',\n\t\t'person_playing_water_polo',\n\t\t'woman_playing_water_polo',\n\t\t'man_playing_water_polo',\n\t\t'person_rowing_boat',\n\t\t'woman_rowing_boat',\n\t\t'man_rowing_boat',\n\t\t'person_climbing',\n\t\t'woman_climbing',\n\t\t'man_climbing',\n\t\t'person_mountain_biking',\n\t\t'woman_mountain_biking',\n\t\t'man_mountain_biking',\n\t\t'person_biking',\n\t\t'woman_biking',\n\t\t'man_biking',\n\t\t'trophy',\n\t\t'first_place',\n\t\t'second_place',\n\t\t'third_place',\n\t\t'medal',\n\t\t'military_medal',\n\t\t'rosette',\n\t\t'reminder_ribbon',\n\t\t'ticket',\n\t\t'tickets',\n\t\t'circus_tent',\n\t\t'person_juggling',\n\t\t'woman_juggling',\n\t\t'man_juggling',\n\t\t'performing_arts',\n\t\t'art',\n\t\t'clapper',\n\t\t'microphone',\n\t\t'headphones',\n\t\t'musical_score',\n\t\t'musical_keyboard',\n\t\t'drum',\n\t\t'saxophone',\n\t\t'trumpet',\n\t\t'guitar',\n\t\t'violin',\n\t\t'game_die',\n\t\t'dart',\n\t\t'bowling',\n\t\t'video_game',\n\t\t'slot_machine',\n\t],\n\tobjects: [\n\t\t'watch',\n\t\t'iphone',\n\t\t'calling',\n\t\t'computer',\n\t\t'keyboard',\n\t\t'desktop',\n\t\t'printer',\n\t\t'mouse_three_button',\n\t\t'trackball',\n\t\t'joystick',\n\t\t'chess_pawn',\n\t\t'jigsaw',\n\t\t'compression',\n\t\t'minidisc',\n\t\t'floppy_disk',\n\t\t'cd',\n\t\t'dvd',\n\t\t'vhs',\n\t\t'camera',\n\t\t'camera_with_flash',\n\t\t'video_camera',\n\t\t'movie_camera',\n\t\t'projector',\n\t\t'film_frames',\n\t\t'telephone_receiver',\n\t\t'telephone',\n\t\t'pager',\n\t\t'fax',\n\t\t'tv',\n\t\t'radio',\n\t\t'microphone2',\n\t\t'level_slider',\n\t\t'control_knobs',\n\t\t'stopwatch',\n\t\t'timer',\n\t\t'alarm_clock',\n\t\t'clock',\n\t\t'hourglass',\n\t\t'hourglass_flowing_sand',\n\t\t'satellite',\n\t\t'compass',\n\t\t'battery',\n\t\t'electric_plug',\n\t\t'magnet',\n\t\t'bulb',\n\t\t'flashlight',\n\t\t'candle',\n\t\t'fire_extinguisher',\n\t\t'wastebasket',\n\t\t'oil',\n\t\t'money_with_wings',\n\t\t'dollar',\n\t\t'yen',\n\t\t'euro',\n\t\t'pound',\n\t\t'moneybag',\n\t\t'credit_card',\n\t\t'gem',\n\t\t'nazar_amulet',\n\t\t'bricks',\n\t\t'scales',\n\t\t'toolbox',\n\t\t'wrench',\n\t\t'hammer',\n\t\t'hammer_pick',\n\t\t'tools',\n\t\t'pick',\n\t\t'nut_and_bolt',\n\t\t'gear',\n\t\t'chains',\n\t\t'gun',\n\t\t'bomb',\n\t\t'knife',\n\t\t'dagger',\n\t\t'crossed_swords',\n\t\t'shield',\n\t\t'smoking',\n\t\t'coffin',\n\t\t'urn',\n\t\t'amphora',\n\t\t'crystal_ball',\n\t\t'prayer_beads',\n\t\t'barber',\n\t\t'alembic',\n\t\t'test_tube',\n\t\t'petri_dish',\n\t\t'dna',\n\t\t'abacus',\n\t\t'telescope',\n\t\t'microscope',\n\t\t'hole',\n\t\t'pill',\n\t\t'syringe',\n\t\t'thermometer',\n\t\t'toilet',\n\t\t'potable_water',\n\t\t'shower',\n\t\t'bathtub',\n\t\t'bath',\n\t\t'broom',\n\t\t'basket',\n\t\t'roll_of_paper',\n\t\t'soap',\n\t\t'sponge',\n\t\t'squeeze_bottle',\n\t\t'thread',\n\t\t'yarn',\n\t\t'bellhop',\n\t\t'key',\n\t\t'key2',\n\t\t'door',\n\t\t'couch',\n\t\t'bed',\n\t\t'sleeping_accommodation',\n\t\t'teddy_bear',\n\t\t'frame_photo',\n\t\t'shopping_bags',\n\t\t'shopping_cart',\n\t\t'gift',\n\t\t'balloon',\n\t\t'flags',\n\t\t'ribbon',\n\t\t'confetti_ball',\n\t\t'tada',\n\t\t'dolls',\n\t\t'izakaya_lantern',\n\t\t'wind_chime',\n\t\t'red_envelope',\n\t\t'envelope',\n\t\t'envelope_with_arrow',\n\t\t'incoming_envelope',\n\t\t'e-mail',\n\t\t'love_letter',\n\t\t'inbox_tray',\n\t\t'outbox_tray',\n\t\t'package',\n\t\t'label',\n\t\t'mailbox_closed',\n\t\t'mailbox',\n\t\t'mailbox_with_mail',\n\t\t'mailbox_with_no_mail',\n\t\t'postbox',\n\t\t'postal_horn',\n\t\t'scroll',\n\t\t'page_with_curl',\n\t\t'page_facing_up',\n\t\t'receipt',\n\t\t'bookmark_tabs',\n\t\t'bar_chart',\n\t\t'chart_with_upwards_trend',\n\t\t'chart_with_downwards_trend',\n\t\t'notepad_spiral',\n\t\t'calendar_spiral',\n\t\t'calendar',\n\t\t'date',\n\t\t'card_index',\n\t\t'card_box',\n\t\t'ballot_box',\n\t\t'file_cabinet',\n\t\t'clipboard',\n\t\t'file_folder',\n\t\t'open_file_folder',\n\t\t'dividers',\n\t\t'newspaper2',\n\t\t'newspaper',\n\t\t'notebook',\n\t\t'notebook_with_decorative_cover',\n\t\t'ledger',\n\t\t'closed_book',\n\t\t'green_book',\n\t\t'blue_book',\n\t\t'orange_book',\n\t\t'books',\n\t\t'book',\n\t\t'bookmark',\n\t\t'link',\n\t\t'paperclip',\n\t\t'paperclips',\n\t\t'triangular_ruler',\n\t\t'straight_ruler',\n\t\t'safety_pin',\n\t\t'pushpin',\n\t\t'round_pushpin',\n\t\t'scissors',\n\t\t'pen_ballpoint',\n\t\t'pen_fountain',\n\t\t'black_nib',\n\t\t'paintbrush',\n\t\t'crayon',\n\t\t'pencil',\n\t\t'pencil2',\n\t\t'mag',\n\t\t'mag_right',\n\t\t'lock_with_ink_pen',\n\t\t'closed_lock_with_key',\n\t\t'lock',\n\t\t'unlock',\n\t],\n\tnature: [\n\t\t'dog',\n\t\t'cat',\n\t\t'mouse',\n\t\t'hamster',\n\t\t'rabbit',\n\t\t'fox',\n\t\t'raccoon',\n\t\t'bear',\n\t\t'panda_face',\n\t\t'kangaroo',\n\t\t'badger',\n\t\t'koala',\n\t\t'tiger',\n\t\t'lion_face',\n\t\t'cow',\n\t\t'pig',\n\t\t'pig_nose',\n\t\t'frog',\n\t\t'monkey_face',\n\t\t'see_no_evil',\n\t\t'hear_no_evil',\n\t\t'speak_no_evil',\n\t\t'monkey',\n\t\t'chicken',\n\t\t'penguin',\n\t\t'bird',\n\t\t'baby_chick',\n\t\t'hatching_chick',\n\t\t'hatched_chick',\n\t\t'duck',\n\t\t'swan',\n\t\t'eagle',\n\t\t'owl',\n\t\t'parrot',\n\t\t'peacock',\n\t\t'bat',\n\t\t'wolf',\n\t\t'boar',\n\t\t'horse',\n\t\t'unicorn',\n\t\t'bee',\n\t\t'bug',\n\t\t'butterfly',\n\t\t'snail',\n\t\t'shell',\n\t\t'beetle',\n\t\t'ant',\n\t\t'cricket',\n\t\t'spider',\n\t\t'spider_web',\n\t\t'scorpion',\n\t\t'mosquito',\n\t\t'microbe',\n\t\t'turtle',\n\t\t'snake',\n\t\t'lizard',\n\t\t't_rex',\n\t\t'sauropod',\n\t\t'octopus',\n\t\t'squid',\n\t\t'shrimp',\n\t\t'crab',\n\t\t'lobster',\n\t\t'blowfish',\n\t\t'tropical_fish',\n\t\t'fish',\n\t\t'dolphin',\n\t\t'whale',\n\t\t'whale2',\n\t\t'shark',\n\t\t'crocodile',\n\t\t'tiger2',\n\t\t'leopard',\n\t\t'zebra',\n\t\t'gorilla',\n\t\t'elephant',\n\t\t'rhino',\n\t\t'hippopotamus',\n\t\t'dromedary_camel',\n\t\t'camel',\n\t\t'giraffe',\n\t\t'llama',\n\t\t'water_buffalo',\n\t\t'ox',\n\t\t'cow2',\n\t\t'racehorse',\n\t\t'pig2',\n\t\t'ram',\n\t\t'sheep',\n\t\t'goat',\n\t\t'deer',\n\t\t'dog2',\n\t\t'poodle',\n\t\t'cat2',\n\t\t'rooster',\n\t\t'turkey',\n\t\t'dove',\n\t\t'rabbit2',\n\t\t'mouse2',\n\t\t'rat',\n\t\t'chipmunk',\n\t\t'hedgehog',\n\t\t'feet',\n\t\t'dragon',\n\t\t'dragon_face',\n\t\t'cactus',\n\t\t'christmas_tree',\n\t\t'evergreen_tree',\n\t\t'deciduous_tree',\n\t\t'palm_tree',\n\t\t'seedling',\n\t\t'herb',\n\t\t'shamrock',\n\t\t'four_leaf_clover',\n\t\t'bamboo',\n\t\t'tanabata_tree',\n\t\t'leaves',\n\t\t'fallen_leaf',\n\t\t'maple_leaf',\n\t\t'mushroom',\n\t\t'ear_of_rice',\n\t\t'bouquet',\n\t\t'tulip',\n\t\t'rose',\n\t\t'wilted_rose',\n\t\t'hibiscus',\n\t\t'cherry_blossom',\n\t\t'blossom',\n\t\t'sunflower',\n\t\t'sun_with_face',\n\t\t'full_moon_with_face',\n\t\t'first_quarter_moon_with_face',\n\t\t'last_quarter_moon_with_face',\n\t\t'new_moon_with_face',\n\t\t'full_moon',\n\t\t'waning_gibbous_moon',\n\t\t'last_quarter_moon',\n\t\t'waning_crescent_moon',\n\t\t'new_moon',\n\t\t'waxing_crescent_moon',\n\t\t'first_quarter_moon',\n\t\t'waxing_gibbous_moon',\n\t\t'crescent_moon',\n\t\t'earth_americas',\n\t\t'earth_africa',\n\t\t'earth_asia',\n\t\t'dizzy',\n\t\t'star',\n\t\t'star2',\n\t\t'sparkles',\n\t\t'zap',\n\t\t'comet',\n\t\t'boom',\n\t\t'fire',\n\t\t'cloud_tornado',\n\t\t'rainbow',\n\t\t'sunny',\n\t\t'white_sun_small_cloud',\n\t\t'partly_sunny',\n\t\t'white_sun_cloud',\n\t\t'cloud',\n\t\t'white_sun_rain_cloud',\n\t\t'cloud_rain',\n\t\t'thunder_cloud_rain',\n\t\t'cloud_lightning',\n\t\t'cloud_snow',\n\t\t'snowflake',\n\t\t'snowman2',\n\t\t'snowman',\n\t\t'wind_blowing_face',\n\t\t'dash',\n\t\t'droplet',\n\t\t'sweat_drops',\n\t\t'umbrella',\n\t\t'umbrella2',\n\t\t'ocean',\n\t\t'fog',\n\t],\n\tfood: [\n\t\t'green_apple',\n\t\t'apple',\n\t\t'pear',\n\t\t'tangerine',\n\t\t'lemon',\n\t\t'banana',\n\t\t'watermelon',\n\t\t'grapes',\n\t\t'strawberry',\n\t\t'melon',\n\t\t'cherries',\n\t\t'peach',\n\t\t'mango',\n\t\t'pineapple',\n\t\t'coconut',\n\t\t'kiwi',\n\t\t'tomato',\n\t\t'eggplant',\n\t\t'avocado',\n\t\t'broccoli',\n\t\t'leafy_green',\n\t\t'cucumber',\n\t\t'hot_pepper',\n\t\t'corn',\n\t\t'carrot',\n\t\t'potato',\n\t\t'sweet_potato',\n\t\t'croissant',\n\t\t'bread',\n\t\t'french_bread',\n\t\t'pretzel',\n\t\t'bagel',\n\t\t'cheese',\n\t\t'egg',\n\t\t'cooking',\n\t\t'pancakes',\n\t\t'bacon',\n\t\t'cut_of_meat',\n\t\t'poultry_leg',\n\t\t'meat_on_bone',\n\t\t'hotdog',\n\t\t'hamburger',\n\t\t'fries',\n\t\t'pizza',\n\t\t'sandwich',\n\t\t'stuffed_flatbread',\n\t\t'taco',\n\t\t'burrito',\n\t\t'salad',\n\t\t'shallow_pan_of_food',\n\t\t'canned_food',\n\t\t'spaghetti',\n\t\t'ramen',\n\t\t'stew',\n\t\t'curry',\n\t\t'sushi',\n\t\t'bento',\n\t\t'fried_shrimp',\n\t\t'rice_ball',\n\t\t'rice',\n\t\t'rice_cracker',\n\t\t'fish_cake',\n\t\t'fortune_cookie',\n\t\t'oden',\n\t\t'dango',\n\t\t'shaved_ice',\n\t\t'ice_cream',\n\t\t'icecream',\n\t\t'pie',\n\t\t'cake',\n\t\t'birthday',\n\t\t'moon_cake',\n\t\t'cupcake',\n\t\t'custard',\n\t\t'lollipop',\n\t\t'candy',\n\t\t'chocolate_bar',\n\t\t'popcorn',\n\t\t'salt',\n\t\t'doughnut',\n\t\t'dumpling',\n\t\t'cookie',\n\t\t'chestnut',\n\t\t'peanuts',\n\t\t'honey_pot',\n\t\t'milk',\n\t\t'baby_bottle',\n\t\t'coffee',\n\t\t'tea',\n\t\t'cup_with_straw',\n\t\t'sake',\n\t\t'beer',\n\t\t'beers',\n\t\t'champagne_glass',\n\t\t'wine_glass',\n\t\t'tumbler_glass',\n\t\t'cocktail',\n\t\t'tropical_drink',\n\t\t'champagne',\n\t\t'spoon',\n\t\t'fork_and_knife',\n\t\t'fork_knife_plate',\n\t\t'bowl_with_spoon',\n\t\t'takeout_box',\n\t\t'chopsticks',\n\t],\n\tpeople: [\n\t\t'grinning',\n\t\t'smiley',\n\t\t'smile',\n\t\t'grin',\n\t\t'laughing',\n\t\t'sweat_smile',\n\t\t'joy',\n\t\t'rofl',\n\t\t'relaxed',\n\t\t'blush',\n\t\t'innocent',\n\t\t'slight_smile',\n\t\t'upside_down',\n\t\t'wink',\n\t\t'relieved',\n\t\t'heart_eyes',\n\t\t'kissing_heart',\n\t\t'smiling_face_with_3_hearts',\n\t\t'kissing',\n\t\t'kissing_smiling_eyes',\n\t\t'kissing_closed_eyes',\n\t\t'yum',\n\t\t'stuck_out_tongue',\n\t\t'stuck_out_tongue_closed_eyes',\n\t\t'stuck_out_tongue_winking_eye',\n\t\t'zany_face',\n\t\t'face_with_raised_eyebrow',\n\t\t'face_with_monocle',\n\t\t'nerd',\n\t\t'sunglasses',\n\t\t'star_struck',\n\t\t'partying_face',\n\t\t'smirk',\n\t\t'unamused',\n\t\t'disappointed',\n\t\t'pensive',\n\t\t'worried',\n\t\t'confused',\n\t\t'slight_frown',\n\t\t'frowning2',\n\t\t'persevere',\n\t\t'confounded',\n\t\t'tired_face',\n\t\t'weary',\n\t\t'cry',\n\t\t'sob',\n\t\t'triumph',\n\t\t'angry',\n\t\t'rage',\n\t\t'face_with_symbols_over_mouth',\n\t\t'exploding_head',\n\t\t'flushed',\n\t\t'scream',\n\t\t'fearful',\n\t\t'cold_sweat',\n\t\t'hot_face',\n\t\t'cold_face',\n\t\t'pleading_face',\n\t\t'disappointed_relieved',\n\t\t'sweat',\n\t\t'hugging',\n\t\t'thinking',\n\t\t'face_with_hand_over_mouth',\n\t\t'shushing_face',\n\t\t'lying_face',\n\t\t'no_mouth',\n\t\t'neutral_face',\n\t\t'expressionless',\n\t\t'grimacing',\n\t\t'rolling_eyes',\n\t\t'hushed',\n\t\t'frowning',\n\t\t'anguished',\n\t\t'open_mouth',\n\t\t'astonished',\n\t\t'sleeping',\n\t\t'drooling_face',\n\t\t'sleepy',\n\t\t'dizzy_face',\n\t\t'zipper_mouth',\n\t\t'woozy_face',\n\t\t'nauseated_face',\n\t\t'face_vomiting',\n\t\t'sneezing_face',\n\t\t'mask',\n\t\t'thermometer_face',\n\t\t'head_bandage',\n\t\t'money_mouth',\n\t\t'cowboy',\n\t\t'smiling_imp',\n\t\t'imp',\n\t\t'japanese_ogre',\n\t\t'japanese_goblin',\n\t\t'clown',\n\t\t'poop',\n\t\t'ghost',\n\t\t'skull',\n\t\t'skull_crossbones',\n\t\t'alien',\n\t\t'space_invader',\n\t\t'robot',\n\t\t'jack_o_lantern',\n\t\t'smiley_cat',\n\t\t'smile_cat',\n\t\t'joy_cat',\n\t\t'heart_eyes_cat',\n\t\t'smirk_cat',\n\t\t'kissing_cat',\n\t\t'scream_cat',\n\t\t'crying_cat_face',\n\t\t'pouting_cat',\n\t\t'palms_up_together',\n\t\t'open_hands',\n\t\t'raised_hands',\n\t\t'clap',\n\t\t'handshake',\n\t\t'thumbsup',\n\t\t'thumbsdown',\n\t\t'punch',\n\t\t'fist',\n\t\t'left_facing_fist',\n\t\t'right_facing_fist',\n\t\t'fingers_crossed',\n\t\t'v',\n\t\t'love_you_gesture',\n\t\t'metal',\n\t\t'ok_hand',\n\t\t'point_left',\n\t\t'point_right',\n\t\t'point_up_2',\n\t\t'point_down',\n\t\t'point_up',\n\t\t'raised_hand',\n\t\t'raised_back_of_hand',\n\t\t'hand_splayed',\n\t\t'vulcan',\n\t\t'wave',\n\t\t'call_me',\n\t\t'muscle',\n\t\t'leg',\n\t\t'foot',\n\t\t'middle_finger',\n\t\t'writing_hand',\n\t\t'pray',\n\t\t'ring',\n\t\t'lipstick',\n\t\t'kiss',\n\t\t'lips',\n\t\t'tongue',\n\t\t'ear',\n\t\t'nose',\n\t\t'footprints',\n\t\t'eye',\n\t\t'eyes',\n\t\t'brain',\n\t\t'bone',\n\t\t'tooth',\n\t\t'speaking_head',\n\t\t'bust_in_silhouette',\n\t\t'busts_in_silhouette',\n\t\t'baby',\n\t\t'girl',\n\t\t'child',\n\t\t'boy',\n\t\t'woman',\n\t\t'adult',\n\t\t'man',\n\t\t'blond_haired_person',\n\t\t'blond-haired_woman',\n\t\t'blond-haired_man',\n\t\t'woman_red_haired',\n\t\t'man_red_haired',\n\t\t'woman_curly_haired',\n\t\t'man_curly_haired',\n\t\t'woman_white_haired',\n\t\t'man_white_haired',\n\t\t'woman_bald',\n\t\t'man_bald',\n\t\t'bearded_person',\n\t\t'older_woman',\n\t\t'older_adult',\n\t\t'older_man',\n\t\t'man_with_chinese_cap',\n\t\t'person_wearing_turban',\n\t\t'woman_wearing_turban',\n\t\t'man_wearing_turban',\n\t\t'woman_with_headscarf',\n\t\t'police_officer',\n\t\t'woman_police_officer',\n\t\t'man_police_officer',\n\t\t'construction_worker',\n\t\t'woman_construction_worker',\n\t\t'man_construction_worker',\n\t\t'guard',\n\t\t'woman_guard',\n\t\t'man_guard',\n\t\t'detective',\n\t\t'woman_detective',\n\t\t'man_detective',\n\t\t'woman_health_worker',\n\t\t'man_health_worker',\n\t\t'woman_farmer',\n\t\t'man_farmer',\n\t\t'woman_cook',\n\t\t'man_cook',\n\t\t'woman_student',\n\t\t'man_student',\n\t\t'woman_singer',\n\t\t'man_singer',\n\t\t'woman_teacher',\n\t\t'man_teacher',\n\t\t'woman_factory_worker',\n\t\t'man_factory_worker',\n\t\t'woman_technologist',\n\t\t'man_technologist',\n\t\t'woman_office_worker',\n\t\t'man_office_worker',\n\t\t'woman_mechanic',\n\t\t'man_mechanic',\n\t\t'woman_scientist',\n\t\t'man_scientist',\n\t\t'woman_artist',\n\t\t'man_artist',\n\t\t'woman_firefighter',\n\t\t'man_firefighter',\n\t\t'woman_pilot',\n\t\t'man_pilot',\n\t\t'woman_astronaut',\n\t\t'man_astronaut',\n\t\t'woman_judge',\n\t\t'man_judge',\n\t\t'bride_with_veil',\n\t\t'man_in_tuxedo',\n\t\t'princess',\n\t\t'prince',\n\t\t'mrs_claus',\n\t\t'santa',\n\t\t'superhero',\n\t\t'woman_superhero',\n\t\t'man_superhero',\n\t\t'supervillain',\n\t\t'woman_supervillain',\n\t\t'man_supervillain',\n\t\t'mage',\n\t\t'woman_mage',\n\t\t'man_mage',\n\t\t'elf',\n\t\t'woman_elf',\n\t\t'man_elf',\n\t\t'vampire',\n\t\t'woman_vampire',\n\t\t'man_vampire',\n\t\t'zombie',\n\t\t'woman_zombie',\n\t\t'man_zombie',\n\t\t'genie',\n\t\t'woman_genie',\n\t\t'man_genie',\n\t\t'merperson',\n\t\t'mermaid',\n\t\t'merman',\n\t\t'fairy',\n\t\t'woman_fairy',\n\t\t'man_fairy',\n\t\t'angel',\n\t\t'pregnant_woman',\n\t\t'breast_feeding',\n\t\t'person_bowing',\n\t\t'woman_bowing',\n\t\t'man_bowing',\n\t\t'person_tipping_hand',\n\t\t'woman_tipping_hand',\n\t\t'man_tipping_hand',\n\t\t'person_gesturing_no',\n\t\t'woman_gesturing_no',\n\t\t'man_gesturing_no',\n\t\t'person_gesturing_ok',\n\t\t'woman_gesturing_ok',\n\t\t'man_gesturing_ok',\n\t\t'person_raising_hand',\n\t\t'woman_raising_hand',\n\t\t'man_raising_hand',\n\t\t'person_facepalming',\n\t\t'woman_facepalming',\n\t\t'man_facepalming',\n\t\t'person_shrugging',\n\t\t'woman_shrugging',\n\t\t'man_shrugging',\n\t\t'person_pouting',\n\t\t'woman_pouting',\n\t\t'man_pouting',\n\t\t'person_frowning',\n\t\t'woman_frowning',\n\t\t'man_frowning',\n\t\t'person_getting_haircut',\n\t\t'woman_getting_haircut',\n\t\t'man_getting_haircut',\n\t\t'person_getting_massage',\n\t\t'woman_getting_face_massage',\n\t\t'man_getting_face_massage',\n\t\t'person_in_steamy_room',\n\t\t'woman_in_steamy_room',\n\t\t'man_in_steamy_room',\n\t\t'nail_care',\n\t\t'selfie',\n\t\t'dancer',\n\t\t'man_dancing',\n\t\t'people_with_bunny_ears_partying',\n\t\t'women_with_bunny_ears_partying',\n\t\t'men_with_bunny_ears_partying',\n\t\t'levitate',\n\t\t'person_walking',\n\t\t'woman_walking',\n\t\t'man_walking',\n\t\t'person_running',\n\t\t'woman_running',\n\t\t'man_running',\n\t\t'couple',\n\t\t'two_women_holding_hands',\n\t\t'two_men_holding_hands',\n\t\t'couple_with_heart',\n\t\t'couple_with_heart_woman_man',\n\t\t'couple_ww',\n\t\t'couple_mm',\n\t\t'couplekiss',\n\t\t'kiss_woman_man',\n\t\t'kiss_ww',\n\t\t'kiss_mm',\n\t\t'family',\n\t\t'family_man_woman_boy',\n\t\t'family_mwg',\n\t\t'family_mwgb',\n\t\t'family_mwbb',\n\t\t'family_mwgg',\n\t\t'family_wwb',\n\t\t'family_wwg',\n\t\t'family_wwgb',\n\t\t'family_wwbb',\n\t\t'family_wwgg',\n\t\t'family_mmb',\n\t\t'family_mmg',\n\t\t'family_mmgb',\n\t\t'family_mmbb',\n\t\t'family_mmgg',\n\t\t'family_woman_boy',\n\t\t'family_woman_girl',\n\t\t'family_woman_girl_boy',\n\t\t'family_woman_boy_boy',\n\t\t'family_woman_girl_girl',\n\t\t'family_man_boy',\n\t\t'family_man_girl',\n\t\t'family_man_girl_boy',\n\t\t'family_man_boy_boy',\n\t\t'family_man_girl_girl',\n\t\t'coat',\n\t\t'womans_clothes',\n\t\t'shirt',\n\t\t'jeans',\n\t\t'necktie',\n\t\t'dress',\n\t\t'bikini',\n\t\t'kimono',\n\t\t'lab_coat',\n\t\t'high_heel',\n\t\t'sandal',\n\t\t'boot',\n\t\t'mans_shoe',\n\t\t'athletic_shoe',\n\t\t'hiking_boot',\n\t\t'womans_flat_shoe',\n\t\t'socks',\n\t\t'gloves',\n\t\t'scarf',\n\t\t'tophat',\n\t\t'billed_cap',\n\t\t'womans_hat',\n\t\t'mortar_board',\n\t\t'helmet_with_cross',\n\t\t'crown',\n\t\t'pouch',\n\t\t'purse',\n\t\t'handbag',\n\t\t'briefcase',\n\t\t'school_satchel',\n\t\t'eyeglasses',\n\t\t'dark_sunglasses',\n\t\t'goggles',\n\t\t'closed_umbrella',\n\t\t'red_haired',\n\t\t'curly_haired',\n\t\t'white_haired',\n\t\t'bald',\n\t],\n\tregional: [\n\t\t'regional_indicator_z',\n\t\t'regional_indicator_y',\n\t\t'regional_indicator_x',\n\t\t'regional_indicator_w',\n\t\t'regional_indicator_v',\n\t\t'regional_indicator_u',\n\t\t'regional_indicator_t',\n\t\t'regional_indicator_s',\n\t\t'regional_indicator_r',\n\t\t'regional_indicator_q',\n\t\t'regional_indicator_p',\n\t\t'regional_indicator_o',\n\t\t'regional_indicator_n',\n\t\t'regional_indicator_m',\n\t\t'regional_indicator_l',\n\t\t'regional_indicator_k',\n\t\t'regional_indicator_j',\n\t\t'regional_indicator_i',\n\t\t'regional_indicator_h',\n\t\t'regional_indicator_g',\n\t\t'regional_indicator_f',\n\t\t'regional_indicator_e',\n\t\t'regional_indicator_d',\n\t\t'regional_indicator_c',\n\t\t'regional_indicator_b',\n\t\t'regional_indicator_a',\n\t],\n\ttravel: [\n\t\t'red_car',\n\t\t'taxi',\n\t\t'blue_car',\n\t\t'bus',\n\t\t'trolleybus',\n\t\t'race_car',\n\t\t'police_car',\n\t\t'ambulance',\n\t\t'fire_engine',\n\t\t'minibus',\n\t\t'truck',\n\t\t'articulated_lorry',\n\t\t'tractor',\n\t\t'scooter',\n\t\t'bike',\n\t\t'motor_scooter',\n\t\t'motorcycle',\n\t\t'rotating_light',\n\t\t'oncoming_police_car',\n\t\t'oncoming_bus',\n\t\t'oncoming_automobile',\n\t\t'oncoming_taxi',\n\t\t'aerial_tramway',\n\t\t'mountain_cableway',\n\t\t'suspension_railway',\n\t\t'railway_car',\n\t\t'train',\n\t\t'mountain_railway',\n\t\t'monorail',\n\t\t'bullettrain_side',\n\t\t'bullettrain_front',\n\t\t'light_rail',\n\t\t'steam_locomotive',\n\t\t'train2',\n\t\t'metro',\n\t\t'tram',\n\t\t'station',\n\t\t'airplane',\n\t\t'airplane_departure',\n\t\t'airplane_arriving',\n\t\t'airplane_small',\n\t\t'seat',\n\t\t'luggage',\n\t\t'satellite_orbital',\n\t\t'rocket',\n\t\t'flying_saucer',\n\t\t'helicopter',\n\t\t'canoe',\n\t\t'sailboat',\n\t\t'speedboat',\n\t\t'motorboat',\n\t\t'cruise_ship',\n\t\t'ferry',\n\t\t'ship',\n\t\t'anchor',\n\t\t'fuelpump',\n\t\t'construction',\n\t\t'vertical_traffic_light',\n\t\t'traffic_light',\n\t\t'busstop',\n\t\t'map',\n\t\t'moyai',\n\t\t'statue_of_liberty',\n\t\t'tokyo_tower',\n\t\t'european_castle',\n\t\t'japanese_castle',\n\t\t'stadium',\n\t\t'ferris_wheel',\n\t\t'roller_coaster',\n\t\t'carousel_horse',\n\t\t'fountain',\n\t\t'beach_umbrella',\n\t\t'beach',\n\t\t'island',\n\t\t'desert',\n\t\t'volcano',\n\t\t'mountain',\n\t\t'mountain_snow',\n\t\t'mount_fuji',\n\t\t'camping',\n\t\t'tent',\n\t\t'house',\n\t\t'house_with_garden',\n\t\t'homes',\n\t\t'house_abandoned',\n\t\t'construction_site',\n\t\t'factory',\n\t\t'office',\n\t\t'department_store',\n\t\t'post_office',\n\t\t'european_post_office',\n\t\t'hospital',\n\t\t'bank',\n\t\t'hotel',\n\t\t'convenience_store',\n\t\t'school',\n\t\t'love_hotel',\n\t\t'wedding',\n\t\t'classical_building',\n\t\t'church',\n\t\t'mosque',\n\t\t'synagogue',\n\t\t'kaaba',\n\t\t'shinto_shrine',\n\t\t'railway_track',\n\t\t'motorway',\n\t\t'japan',\n\t\t'rice_scene',\n\t\t'park',\n\t\t'sunrise',\n\t\t'sunrise_over_mountains',\n\t\t'stars',\n\t\t'sparkler',\n\t\t'fireworks',\n\t\t'firecracker',\n\t\t'city_sunset',\n\t\t'city_dusk',\n\t\t'cityscape',\n\t\t'night_with_stars',\n\t\t'milky_way',\n\t\t'bridge_at_night',\n\t\t'foggy',\n\t],\n\tflags: [\n\t\t'flag_white',\n\t\t'flag_black',\n\t\t'checkered_flag',\n\t\t'triangular_flag_on_post',\n\t\t'rainbow_flag',\n\t\t'pirate_flag',\n\t\t'flag_af',\n\t\t'flag_ax',\n\t\t'flag_al',\n\t\t'flag_dz',\n\t\t'flag_as',\n\t\t'flag_ad',\n\t\t'flag_ao',\n\t\t'flag_ai',\n\t\t'flag_aq',\n\t\t'flag_ag',\n\t\t'flag_ar',\n\t\t'flag_am',\n\t\t'flag_aw',\n\t\t'flag_au',\n\t\t'flag_at',\n\t\t'flag_az',\n\t\t'flag_bs',\n\t\t'flag_bh',\n\t\t'flag_bd',\n\t\t'flag_bb',\n\t\t'flag_by',\n\t\t'flag_be',\n\t\t'flag_bz',\n\t\t'flag_bj',\n\t\t'flag_bm',\n\t\t'flag_bt',\n\t\t'flag_bo',\n\t\t'flag_ba',\n\t\t'flag_bw',\n\t\t'flag_br',\n\t\t'flag_io',\n\t\t'flag_vg',\n\t\t'flag_bn',\n\t\t'flag_bg',\n\t\t'flag_bf',\n\t\t'flag_bi',\n\t\t'flag_kh',\n\t\t'flag_cm',\n\t\t'flag_ca',\n\t\t'flag_ic',\n\t\t'flag_cv',\n\t\t'flag_bq',\n\t\t'flag_ky',\n\t\t'flag_cf',\n\t\t'flag_td',\n\t\t'flag_cl',\n\t\t'flag_cn',\n\t\t'flag_cx',\n\t\t'flag_cc',\n\t\t'flag_co',\n\t\t'flag_km',\n\t\t'flag_cg',\n\t\t'flag_cd',\n\t\t'flag_ck',\n\t\t'flag_cr',\n\t\t'flag_ci',\n\t\t'flag_hr',\n\t\t'flag_cu',\n\t\t'flag_cw',\n\t\t'flag_cy',\n\t\t'flag_cz',\n\t\t'flag_dk',\n\t\t'flag_dj',\n\t\t'flag_dm',\n\t\t'flag_do',\n\t\t'flag_ec',\n\t\t'flag_eg',\n\t\t'flag_sv',\n\t\t'flag_gq',\n\t\t'flag_er',\n\t\t'flag_ee',\n\t\t'flag_et',\n\t\t'flag_eu',\n\t\t'flag_fk',\n\t\t'flag_fo',\n\t\t'flag_fj',\n\t\t'flag_fi',\n\t\t'flag_fr',\n\t\t'flag_gf',\n\t\t'flag_pf',\n\t\t'flag_tf',\n\t\t'flag_ga',\n\t\t'flag_gm',\n\t\t'flag_ge',\n\t\t'flag_de',\n\t\t'flag_gh',\n\t\t'flag_gi',\n\t\t'flag_gr',\n\t\t'flag_gl',\n\t\t'flag_gd',\n\t\t'flag_gp',\n\t\t'flag_gu',\n\t\t'flag_gt',\n\t\t'flag_gg',\n\t\t'flag_gn',\n\t\t'flag_gw',\n\t\t'flag_gy',\n\t\t'flag_ht',\n\t\t'flag_hn',\n\t\t'flag_hk',\n\t\t'flag_hu',\n\t\t'flag_is',\n\t\t'flag_in',\n\t\t'flag_id',\n\t\t'flag_ir',\n\t\t'flag_iq',\n\t\t'flag_ie',\n\t\t'flag_im',\n\t\t'flag_il',\n\t\t'flag_it',\n\t\t'flag_jm',\n\t\t'flag_jp',\n\t\t'crossed_flags',\n\t\t'flag_je',\n\t\t'flag_jo',\n\t\t'flag_kz',\n\t\t'flag_ke',\n\t\t'flag_ki',\n\t\t'flag_xk',\n\t\t'flag_kw',\n\t\t'flag_kg',\n\t\t'flag_la',\n\t\t'flag_lv',\n\t\t'flag_lb',\n\t\t'flag_ls',\n\t\t'flag_lr',\n\t\t'flag_ly',\n\t\t'flag_li',\n\t\t'flag_lt',\n\t\t'flag_lu',\n\t\t'flag_mo',\n\t\t'flag_mk',\n\t\t'flag_mg',\n\t\t'flag_mw',\n\t\t'flag_my',\n\t\t'flag_mv',\n\t\t'flag_ml',\n\t\t'flag_mt',\n\t\t'flag_mh',\n\t\t'flag_mq',\n\t\t'flag_mr',\n\t\t'flag_mu',\n\t\t'flag_yt',\n\t\t'flag_mx',\n\t\t'flag_fm',\n\t\t'flag_md',\n\t\t'flag_mc',\n\t\t'flag_mn',\n\t\t'flag_me',\n\t\t'flag_ms',\n\t\t'flag_ma',\n\t\t'flag_mz',\n\t\t'flag_mm',\n\t\t'flag_na',\n\t\t'flag_nr',\n\t\t'flag_np',\n\t\t'flag_nl',\n\t\t'flag_nc',\n\t\t'flag_nz',\n\t\t'flag_ni',\n\t\t'flag_ne',\n\t\t'flag_ng',\n\t\t'flag_nu',\n\t\t'flag_nf',\n\t\t'flag_kp',\n\t\t'flag_mp',\n\t\t'flag_no',\n\t\t'flag_om',\n\t\t'flag_pk',\n\t\t'flag_pw',\n\t\t'flag_ps',\n\t\t'flag_pa',\n\t\t'flag_pg',\n\t\t'flag_py',\n\t\t'flag_pe',\n\t\t'flag_ph',\n\t\t'flag_pn',\n\t\t'flag_pl',\n\t\t'flag_pt',\n\t\t'flag_pr',\n\t\t'flag_qa',\n\t\t'flag_re',\n\t\t'flag_ro',\n\t\t'flag_ru',\n\t\t'flag_rw',\n\t\t'flag_ws',\n\t\t'flag_sm',\n\t\t'flag_st',\n\t\t'flag_sa',\n\t\t'flag_sn',\n\t\t'flag_rs',\n\t\t'flag_sc',\n\t\t'flag_sl',\n\t\t'flag_sg',\n\t\t'flag_sx',\n\t\t'flag_sk',\n\t\t'flag_si',\n\t\t'flag_gs',\n\t\t'flag_sb',\n\t\t'flag_so',\n\t\t'flag_za',\n\t\t'flag_kr',\n\t\t'flag_ss',\n\t\t'flag_es',\n\t\t'flag_lk',\n\t\t'flag_bl',\n\t\t'flag_sh',\n\t\t'flag_kn',\n\t\t'flag_lc',\n\t\t'flag_pm',\n\t\t'flag_vc',\n\t\t'flag_sd',\n\t\t'flag_sr',\n\t\t'flag_sz',\n\t\t'flag_se',\n\t\t'flag_ch',\n\t\t'flag_sy',\n\t\t'flag_tw',\n\t\t'flag_tj',\n\t\t'flag_tz',\n\t\t'flag_th',\n\t\t'flag_tl',\n\t\t'flag_tg',\n\t\t'flag_tk',\n\t\t'flag_to',\n\t\t'flag_tt',\n\t\t'flag_tn',\n\t\t'flag_tr',\n\t\t'flag_tm',\n\t\t'flag_tc',\n\t\t'flag_vi',\n\t\t'flag_tv',\n\t\t'flag_ug',\n\t\t'flag_ua',\n\t\t'flag_ae',\n\t\t'flag_gb',\n\t\t'england',\n\t\t'scotland',\n\t\t'wales',\n\t\t'flag_us',\n\t\t'flag_uy',\n\t\t'flag_uz',\n\t\t'flag_vu',\n\t\t'flag_va',\n\t\t'flag_ve',\n\t\t'flag_vn',\n\t\t'flag_wf',\n\t\t'flag_eh',\n\t\t'flag_ye',\n\t\t'flag_zm',\n\t\t'flag_zw',\n\t\t'flag_ac',\n\t\t'flag_bv',\n\t\t'flag_cp',\n\t\t'flag_ea',\n\t\t'flag_dg',\n\t\t'flag_hm',\n\t\t'flag_mf',\n\t\t'flag_sj',\n\t\t'flag_ta',\n\t\t'flag_um',\n\t\t'united_nations',\n\t],\n\tmodifier: ['tone1', 'tone2', 'tone3', 'tone4', 'tone5'],\n};\n","import emojione from 'emojione';\n\nexport function emojioneRender(message) {\n\treturn emojione.toImage(message);\n}\n\nexport function emojioneRenderFromShort(message) {\n\treturn emojione.shortnameToImage(message);\n}\n","import emojione from 'emojione';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport mem from 'mem';\n\nimport { emojioneRender, emojioneRenderFromShort } from './emojioneRender';\nimport { emojisByCategory, emojiCategories, toneList } from './emojiPicker';\nimport { emoji } from '../../emoji';\nimport { getUserPreference } from '../../utils';\n\n// TODO remove fix below when issue is solved: https://github.com/joypixels/emojione/issues/617\n\n// add missing emojis not provided by JS object, but included on emoji.json\nemojione.shortnames +=\n\t'|:tm:|:copyright:|:registered:|:digit_zero:|:digit_one:|:digit_two:|:digit_three:|:digit_four:|:digit_five:|:digit_six:|:digit_seven:|:digit_eight:|:digit_nine:|:pound_symbol:|:asterisk_symbol:';\nemojione.regShortNames = new RegExp(\n\t`<object[^>]*>.*?<\\/object>|<span[^>]*>.*?<\\/span>|<(?:object|embed|svg|img|div|span|p|a)[^>]*>|(${emojione.shortnames})`,\n\t'gi',\n);\n\nemojione.emojioneList[':tm:'] = {\n\tuc_base: '2122',\n\tuc_output: '2122-fe0f',\n\tuc_match: '2122-fe0f',\n\tuc_greedy: '2122-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':copyright:'] = {\n\tuc_base: '00a9',\n\tuc_output: '00a9-f0ef',\n\tuc_match: '00a9-fe0f',\n\tuc_greedy: '00a9-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':registered:'] = {\n\tuc_base: '00ae',\n\tuc_output: '00ae-fe0f',\n\tuc_match: '00ae-fe0f',\n\tuc_greedy: '00ae-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_zero:'] = {\n\tuc_base: '0030',\n\tuc_output: '0030-fe0f',\n\tuc_match: '0030-fe0f',\n\tuc_greedy: '0030-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_one:'] = {\n\tuc_base: '0031',\n\tuc_output: '0031-fe0f',\n\tuc_match: '0031-fe0f',\n\tuc_greedy: '0031-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_two:'] = {\n\tuc_base: '0032',\n\tuc_output: '0032-fe0f',\n\tuc_match: '0032-fe0f',\n\tuc_greedy: '0032-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_three:'] = {\n\tuc_base: '0033',\n\tuc_output: '0033-fe0f',\n\tuc_match: '0033-fe0f',\n\tuc_greedy: '0033-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_four:'] = {\n\tuc_base: '0034',\n\tuc_output: '0034-fe0f',\n\tuc_match: '0034-fe0f',\n\tuc_greedy: '0034-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_five:'] = {\n\tuc_base: '0035',\n\tuc_output: '0035-fe0f',\n\tuc_match: '0035-fe0f',\n\tuc_greedy: '0035-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_six:'] = {\n\tuc_base: '0036',\n\tuc_output: '0036-fe0f',\n\tuc_match: '0036-fe0f',\n\tuc_greedy: '0036-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_seven:'] = {\n\tuc_base: '0037',\n\tuc_output: '0037-fe0f',\n\tuc_match: '0037-fe0f',\n\tuc_greedy: '0037-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_eight:'] = {\n\tuc_base: '0038',\n\tuc_output: '0038-fe0f',\n\tuc_match: '0038-fe0f',\n\tuc_greedy: '0038-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':digit_nine:'] = {\n\tuc_base: '0039',\n\tuc_output: '0039-fe0f',\n\tuc_match: '0039-fe0f',\n\tuc_greedy: '0039-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':pound_symbol:'] = {\n\tuc_base: '0023',\n\tuc_output: '0023-fe0f',\n\tuc_match: '0023-fe0f',\n\tuc_greedy: '0023-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n\nemojione.emojioneList[':asterisk_symbol:'] = {\n\tuc_base: '002a',\n\tuc_output: '002a-fe0f',\n\tuc_match: '002a-fe0f',\n\tuc_greedy: '002a-fe0f',\n\tshortnames: [],\n\tcategory: 'symbols',\n\temojiPackage: 'emojione',\n};\n// end fix\n\n// fix for :+1: - had to replace all function that does its conversion: https://github.com/joypixels/emojione/blob/4.5.0/lib/js/emojione.js#L249\n(function (ns) {\n\tns.shortnameConversionMap = mem(ns.shortnameConversionMap, { maxAge: 1000 });\n\n\tns.unicodeCharRegex = mem(ns.unicodeCharRegex, { maxAge: 1000 });\n\n\tconst convertShortName = mem(\n\t\tfunction (shortname) {\n\t\t\t// the fix is basically adding this .replace(/[+]/g, '\\\\$&')\n\t\t\tif (typeof shortname === 'undefined' || shortname === '' || ns.shortnames.indexOf(shortname.replace(/[+]/g, '\\\\$&')) === -1) {\n\t\t\t\t// if the shortname doesnt exist just return the entire match\n\t\t\t\treturn shortname;\n\t\t\t}\n\n\t\t\t// map shortname to parent\n\t\t\tif (!ns.emojioneList[shortname]) {\n\t\t\t\tfor (const emoji in ns.emojioneList) {\n\t\t\t\t\tif (!ns.emojioneList.hasOwnProperty(emoji) || emoji === '') {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (ns.emojioneList[emoji].shortnames.indexOf(shortname) === -1) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tshortname = emoji;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst unicode = ns.emojioneList[shortname].uc_output;\n\t\t\tconst fname = ns.emojioneList[shortname].uc_base;\n\t\t\tconst category = fname.indexOf('-1f3f') >= 0 ? 'diversity' : ns.emojioneList[shortname].category;\n\t\t\tconst title = ns.imageTitleTag ? `title=\"${shortname}\"` : '';\n\t\t\t// const size = ns.spriteSize === '32' || ns.spriteSize === '64' ? ns.spriteSize : '32';\n\t\t\t// if the emoji path has been set, we'll use the provided path, otherwise we'll use the default path\n\t\t\tconst ePath = ns.defaultPathPNG !== ns.imagePathPNG ? ns.imagePathPNG : `${ns.defaultPathPNG + ns.emojiSize}/`;\n\n\t\t\t// depending on the settings, we'll either add the native unicode as the alt tag, otherwise the shortname\n\t\t\tconst alt = ns.unicodeAlt ? ns.convert(unicode.toUpperCase()) : shortname;\n\n\t\t\tif (ns.sprites) {\n\t\t\t\treturn `<span class=\"emojione emojione-${category} _${fname}\" ${title}>${alt}</span>`;\n\t\t\t}\n\t\t\treturn `<img class=\"emojione\" alt=\"${alt}\" ${title} src=\"${ePath}${fname}${ns.fileExtension}\"/>`;\n\t\t},\n\t\t{ maxAge: 1000 },\n\t);\n\n\tconst convertUnicode = mem(\n\t\tfunction (entire, m1, m2, m3) {\n\t\t\tconst mappedUnicode = ns.mapUnicodeToShort();\n\n\t\t\tif (typeof m3 === 'undefined' || m3 === '' || !(ns.unescapeHTML(m3) in ns.asciiList)) {\n\t\t\t\t// if the ascii doesnt exist just return the entire match\n\t\t\t\treturn entire;\n\t\t\t}\n\n\t\t\tm3 = ns.unescapeHTML(m3);\n\t\t\tconst unicode = ns.asciiList[m3];\n\t\t\tconst shortname = mappedUnicode[unicode];\n\t\t\tconst category = unicode.indexOf('-1f3f') >= 0 ? 'diversity' : ns.emojioneList[shortname].category;\n\t\t\tconst title = ns.imageTitleTag ? `title=\"${ns.escapeHTML(m3)}\"` : '';\n\t\t\t// const size = ns.spriteSize === '32' || ns.spriteSize === '64' ? ns.spriteSize : '32';\n\t\t\t// if the emoji path has been set, we'll use the provided path, otherwise we'll use the default path\n\t\t\tconst ePath = ns.defaultPathPNG !== ns.imagePathPNG ? ns.imagePathPNG : `${ns.defaultPathPNG + ns.emojiSize}/`;\n\n\t\t\t// depending on the settings, we'll either add the native unicode as the alt tag, otherwise the shortname\n\t\t\tconst alt = ns.unicodeAlt ? ns.convert(unicode.toUpperCase()) : ns.escapeHTML(m3);\n\n\t\t\tif (ns.sprites) {\n\t\t\t\treturn `${m2}<span class=\"emojione emojione-${category} _${unicode}\"  ${title}>${alt}</span>`;\n\t\t\t}\n\t\t\treturn `${m2}<img class=\"emojione\" alt=\"${alt}\" ${title} src=\"${ePath}${unicode}${ns.fileExtension}\"/>`;\n\t\t},\n\t\t{ maxAge: 1000, cacheKey: JSON.stringify },\n\t);\n\n\tns.shortnameToImage = function (str) {\n\t\t// replace regular shortnames first\n\t\tstr = str.replace(ns.regShortNames, convertShortName);\n\n\t\t// if ascii smileys are turned on, then we'll replace them!\n\t\tif (ns.ascii) {\n\t\t\tconst asciiRX = ns.riskyMatchAscii ? ns.regAsciiRisky : ns.regAscii;\n\n\t\t\treturn str.replace(asciiRX, convertUnicode);\n\t\t}\n\n\t\treturn str;\n\t};\n})(emojione);\n\nemoji.packages.emojione = emojione;\nemoji.packages.emojione.sprites = true;\nemoji.packages.emojione.emojisByCategory = emojisByCategory;\nemoji.packages.emojione.emojiCategories = emojiCategories;\nemoji.packages.emojione.toneList = toneList;\n\nemoji.packages.emojione.render = emojioneRender;\nemoji.packages.emojione.renderPicker = emojioneRenderFromShort;\n\n// http://stackoverflow.com/a/26990347 function isSet() from Gajus\nfunction isSetNotNull(fn) {\n\tlet value;\n\ttry {\n\t\tvalue = fn();\n\t} catch (e) {\n\t\tvalue = null;\n\t}\n\treturn value !== null && value !== undefined;\n}\n\n// RocketChat.emoji.list is the collection of emojis from all emoji packages\nfor (const key in emojione.emojioneList) {\n\tif (emojione.emojioneList.hasOwnProperty(key)) {\n\t\tconst currentEmoji = emojione.emojioneList[key];\n\t\tcurrentEmoji.emojiPackage = 'emojione';\n\t\temoji.list[key] = currentEmoji;\n\n\t\tif (currentEmoji.shortnames) {\n\t\t\tcurrentEmoji.shortnames.forEach((shortname) => {\n\t\t\t\temoji.list[shortname] = currentEmoji;\n\t\t\t});\n\t\t}\n\t}\n}\n\n// Additional settings -- ascii emojis\nMeteor.startup(function () {\n\tTracker.autorun(function () {\n\t\tif (isSetNotNull(() => emoji.packages.emojione)) {\n\t\t\tif (isSetNotNull(() => getUserPreference(Meteor.userId(), 'convertAsciiEmoji'))) {\n\t\t\t\temoji.packages.emojione.ascii = getUserPreference(Meteor.userId(), 'convertAsciiEmoji');\n\t\t\t} else {\n\t\t\t\temoji.packages.emojione.ascii = true;\n\t\t\t}\n\t\t}\n\t});\n});\n","import '../lib/rocketchat';\nimport './emojione-sprites.css';\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { CustomOAuth } from '../../custom-oauth';\nimport { settings } from '../../settings';\n\n// GitHub Enterprise Server CallBack URL needs to be http(s)://{rocketchat.server}[:port]/_oauth/github_enterprise\n// In RocketChat -> Administration the URL needs to be http(s)://{github.enterprise.server}/\n\nconst config = {\n\tserverURL: '',\n\tidentityPath: '/api/v3/user',\n\tauthorizePath: '/login/oauth/authorize',\n\ttokenPath: '/login/oauth/access_token',\n\taddAutopublishFields: {\n\t\tforLoggedInUser: ['services.github-enterprise'],\n\t\tforOtherUsers: ['services.github-enterprise.username'],\n\t},\n};\n\nconst GitHubEnterprise = new CustomOAuth('github_enterprise', config);\n\nif (Meteor.isServer) {\n\tMeteor.startup(function () {\n\t\tsettings.get('API_GitHub_Enterprise_URL', function (key, value) {\n\t\t\tconfig.serverURL = value;\n\t\t\tGitHubEnterprise.configure(config);\n\t\t});\n\t});\n} else {\n\tMeteor.startup(function () {\n\t\tTracker.autorun(function () {\n\t\t\tif (settings.get('API_GitHub_Enterprise_URL')) {\n\t\t\t\tconfig.serverURL = settings.get('API_GitHub_Enterprise_URL');\n\t\t\t\tGitHubEnterprise.configure(config);\n\t\t\t}\n\t\t});\n\t});\n}\n","import '../lib/common';\nimport './github-enterprise-login-button.css';\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport _ from 'underscore';\n\nimport { settings } from '../../settings';\nimport { CustomOAuth } from '../../custom-oauth';\n\nconst config = {\n\tserverURL: 'https://gitlab.com',\n\tidentityPath: '/api/v4/user',\n\tscope: 'read_user',\n\tmergeUsers: false,\n\taddAutopublishFields: {\n\t\tforLoggedInUser: ['services.gitlab'],\n\t\tforOtherUsers: ['services.gitlab.username'],\n\t},\n\taccessTokenParam: 'access_token',\n};\n\nconst Gitlab = new CustomOAuth('gitlab', config);\n\nif (Meteor.isServer) {\n\tMeteor.startup(function () {\n\t\tconst updateConfig = _.debounce(() => {\n\t\t\tconfig.serverURL = settings.get('API_Gitlab_URL').trim().replace(/\\/*$/, '') || config.serverURL;\n\t\t\tconfig.identityPath = settings.get('Accounts_OAuth_Gitlab_identity_path') || config.identityPath;\n\t\t\tconfig.mergeUsers = Boolean(settings.get('Accounts_OAuth_Gitlab_merge_users'));\n\t\t\tGitlab.configure(config);\n\t\t}, 300);\n\n\t\tsettings.get('API_Gitlab_URL', updateConfig);\n\t\tsettings.get('Accounts_OAuth_Gitlab_identity_path', updateConfig);\n\t\tsettings.get('Accounts_OAuth_Gitlab_merge_users', updateConfig);\n\t});\n} else {\n\tMeteor.startup(function () {\n\t\tTracker.autorun(function () {\n\t\t\tlet anyChange = false;\n\t\t\tif (settings.get('API_Gitlab_URL')) {\n\t\t\t\tconfig.serverURL = settings.get('API_Gitlab_URL').trim().replace(/\\/*$/, '');\n\t\t\t\tanyChange = true;\n\t\t\t}\n\n\t\t\tif (settings.get('Accounts_OAuth_Gitlab_identity_path')) {\n\t\t\t\tconfig.identityPath = settings.get('Accounts_OAuth_Gitlab_identity_path').trim() || config.identityPath;\n\t\t\t\tanyChange = true;\n\t\t\t}\n\n\t\t\tif (settings.get('Accounts_OAuth_Gitlab_merge_users')) {\n\t\t\t\tconfig.mergeUsers = true;\n\t\t\t\tanyChange = true;\n\t\t\t}\n\n\t\t\tif (anyChange) {\n\t\t\t\tGitlab.configure(config);\n\t\t\t}\n\t\t});\n\t});\n}\n","import '../lib/common';\nimport './gitlab-login-button.css';\n","export class ImporterInfo {\n\t/**\n\t * Creates a new class which contains information about the importer.\n\t *\n\t * @param {string} key The unique key of this importer.\n\t * @param {string} name The i18n name.\n\t * @param {string} mimeType The type of file it expects.\n\t * @param {{ href: string, text: string }[]} warnings An array of warning objects. `{ href, text }`\n\t */\n\tconstructor(key, name = '', mimeType = '', warnings = []) {\n\t\tthis.key = key;\n\t\tthis.name = name;\n\t\tthis.mimeType = mimeType;\n\t\tthis.warnings = warnings;\n\n\t\tthis.importer = undefined;\n\t\tthis.instance = undefined;\n\t}\n}\n","/** The progress step that an importer is at. */\nexport const ProgressStep = Object.freeze({\n\tNEW: 'importer_new',\n\tUPLOADING: 'importer_uploading',\n\tDOWNLOADING_FILE: 'importer_downloading_file',\n\tFILE_LOADED: 'importer_file_loaded',\n\n\tPREPARING_STARTED: 'importer_preparing_started',\n\tPREPARING_USERS: 'importer_preparing_users',\n\tPREPARING_CHANNELS: 'importer_preparing_channels',\n\tPREPARING_MESSAGES: 'importer_preparing_messages',\n\n\tUSER_SELECTION: 'importer_user_selection',\n\n\tIMPORTING_STARTED: 'importer_importing_started',\n\tIMPORTING_USERS: 'importer_importing_users',\n\tIMPORTING_CHANNELS: 'importer_importing_channels',\n\tIMPORTING_MESSAGES: 'importer_importing_messages',\n\tIMPORTING_FILES: 'importer_importing_files',\n\tFINISHING: 'importer_finishing',\n\n\tDONE: 'importer_done',\n\tERROR: 'importer_import_failed',\n\tCANCELLED: 'importer_import_cancelled',\n});\n\nexport const ImportWaitingStates = [ProgressStep.NEW, ProgressStep.UPLOADING, ProgressStep.DOWNLOADING_FILE];\n\nexport const ImportFileReadyStates = [ProgressStep.FILE_LOADED];\n\nexport const ImportPreparingStartedStates = [\n\tProgressStep.PREPARING_STARTED,\n\tProgressStep.PREPARING_USERS,\n\tProgressStep.PREPARING_CHANNELS,\n\tProgressStep.PREPARING_MESSAGES,\n];\n\nexport const ImportingStartedStates = [\n\tProgressStep.IMPORTING_STARTED,\n\tProgressStep.IMPORTING_USERS,\n\tProgressStep.IMPORTING_CHANNELS,\n\tProgressStep.IMPORTING_MESSAGES,\n\tProgressStep.IMPORTING_FILES,\n\tProgressStep.FINISHING,\n];\n\nexport const ImportingDoneStates = [ProgressStep.DONE, ProgressStep.ERROR, ProgressStep.CANCELLED];\n\nexport const ImportingErrorStates = [ProgressStep.ERROR, ProgressStep.CANCELLED];\n","import { ImporterInfo } from './ImporterInfo';\n\n/** Container class which holds all of the importer details. */\nclass ImportersContainer {\n\tconstructor() {\n\t\tthis.importers = new Map();\n\t}\n\n\t/**\n\t * Adds an importer to the import collection. Adding it more than once will\n\t * overwrite the previous one.\n\t *\n\t * @param {ImporterInfo} info The information related to the importer.\n\t * @param {*} importer The class for the importer, will be undefined on the client.\n\t */\n\tadd(info, importer) {\n\t\tif (!(info instanceof ImporterInfo)) {\n\t\t\tthrow new Error('The importer must be a valid ImporterInfo instance.');\n\t\t}\n\n\t\tinfo.importer = importer;\n\n\t\tthis.importers.set(info.key, info);\n\n\t\treturn this.importers.get(info.key);\n\t}\n\n\t/**\n\t * Gets the importer information that is stored.\n\t *\n\t * @param {string} key The key of the importer.\n\t */\n\tget(key) {\n\t\treturn this.importers.get(key);\n\t}\n\n\t/**\n\t * Gets all of the importers in array format.\n\t *\n\t * @returns {ImporterInfo[]} The array of importer information.\n\t */\n\tgetAll() {\n\t\treturn Array.from(this.importers.values());\n\t}\n}\n\nexport const Importers = new ImportersContainer();\n","export { Importers } from '../lib/Importers';\nexport { ImporterInfo } from '../lib/ImporterInfo';\nexport { ProgressStep } from '../lib/ImporterProgressStep';\n","import { ImporterInfo } from '../../importer/lib/ImporterInfo';\n\nexport class CsvImporterInfo extends ImporterInfo {\n\tconstructor() {\n\t\tsuper('csv', 'CSV', 'application/zip', [\n\t\t\t{\n\t\t\t\ttext: 'Importer_CSV_Information',\n\t\t\t\thref: 'https://rocket.chat/docs/administrator-guides/import/csv/',\n\t\t\t},\n\t\t]);\n\t}\n}\n","import { Importers } from '../../importer/client';\nimport { CsvImporterInfo } from '../lib/info';\n\nImporters.add(new CsvImporterInfo());\n","import './adder';\n","import { ImporterInfo } from '../../importer/lib/ImporterInfo';\n\nexport class HipChatEnterpriseImporterInfo extends ImporterInfo {\n\tconstructor() {\n\t\tsuper('hipchatenterprise', 'HipChat (tar.gz)', 'application/gzip', [\n\t\t\t{\n\t\t\t\ttext: 'Importer_HipChatEnterprise_Information',\n\t\t\t\thref: 'https://rocket.chat/docs/administrator-guides/import/hipchat/enterprise/',\n\t\t\t},\n\t\t]);\n\t}\n}\n","import { Importers } from '../../importer/client';\nimport { HipChatEnterpriseImporterInfo } from '../lib/info';\n\nImporters.add(new HipChatEnterpriseImporterInfo());\n","import './adder';\n","import { ImporterInfo } from '../../importer/lib/ImporterInfo';\n\nexport class SlackImporterInfo extends ImporterInfo {\n\tconstructor() {\n\t\tsuper('slack', 'Slack', 'application/zip');\n\t}\n}\n","import { Importers } from '../../importer/client';\nimport { SlackImporterInfo } from '../lib/info';\n\nImporters.add(new SlackImporterInfo());\n","import './adder';\n","import { ImporterInfo } from '../../importer/lib/ImporterInfo';\n\nexport class SlackUsersImporterInfo extends ImporterInfo {\n\tconstructor() {\n\t\tsuper('slack-users', 'Slack_Users', 'text/csv', [\n\t\t\t{\n\t\t\t\ttext: 'Importer_Slack_Users_CSV_Information',\n\t\t\t\thref: 'https://rocket.chat/docs/administrator-guides/import/slack/users',\n\t\t\t},\n\t\t]);\n\t}\n}\n","import { Importers } from '../../importer/client';\nimport { SlackUsersImporterInfo } from '../lib/info';\n\nImporters.add(new SlackUsersImporterInfo());\n","import './adder';\n","import { hasAtLeastOnePermission } from '../../authorization';\nimport { registerAdminSidebarItem } from '../../../client/views/admin';\n\nregisterAdminSidebarItem({\n\thref: 'admin-integrations',\n\ti18nLabel: 'Integrations',\n\ticon: 'code',\n\tpermissionGranted: () =>\n\t\thasAtLeastOnePermission([\n\t\t\t'manage-outgoing-integrations',\n\t\t\t'manage-own-outgoing-integrations',\n\t\t\t'manage-incoming-integrations',\n\t\t\t'manage-own-incoming-integrations',\n\t\t]),\n});\n","import { escapeHTML } from '@rocket.chat/string-helpers';\n\nconst userTemplateDefault = ({ prefix, className, mention, title, label, type = 'username' }) =>\n\t`${prefix}<a class=\"${className}\" data-${type}=\"${mention}\"${title ? ` title=\"${title}\"` : ''}>${label}</a>`;\nconst roomTemplateDefault = ({ prefix, reference, mention }) =>\n\t`${prefix}<a class=\"mention-link mention-link--room\" data-channel=\"${reference}\">${`#${mention}`}</a>`;\nexport class MentionsParser {\n\tconstructor({ pattern, useRealName, me, roomTemplate = roomTemplateDefault, userTemplate = userTemplateDefault }) {\n\t\tthis.pattern = pattern;\n\t\tthis.useRealName = useRealName;\n\t\tthis.me = me;\n\t\tthis.userTemplate = userTemplate;\n\t\tthis.roomTemplate = roomTemplate;\n\t}\n\n\tset me(m) {\n\t\tthis._me = m;\n\t}\n\n\tget me() {\n\t\treturn typeof this._me === 'function' ? this._me() : this._me;\n\t}\n\n\tset pattern(p) {\n\t\tthis._pattern = p;\n\t}\n\n\tget pattern() {\n\t\treturn typeof this._pattern === 'function' ? this._pattern() : this._pattern;\n\t}\n\n\tset useRealName(s) {\n\t\tthis._useRealName = s;\n\t}\n\n\tget useRealName() {\n\t\treturn typeof this._useRealName === 'function' ? this._useRealName() : this._useRealName;\n\t}\n\n\tget userMentionRegex() {\n\t\treturn new RegExp(`(^|\\\\s|> ?)@(${this.pattern}(@(${this.pattern}))?)`, 'gm');\n\t}\n\n\tget channelMentionRegex() {\n\t\treturn new RegExp(`(^|\\\\s|>)#(${this.pattern}(@(${this.pattern}))?)`, 'gm');\n\t}\n\n\treplaceUsers = (msg, { mentions, temp }, me) =>\n\t\tmsg.replace(this.userMentionRegex, (match, prefix, mention) => {\n\t\t\tconst classNames = ['mention-link'];\n\n\t\t\tif (mention === 'all') {\n\t\t\t\tclassNames.push('mention-link--all');\n\t\t\t\tclassNames.push('mention-link--group');\n\t\t\t} else if (mention === 'here') {\n\t\t\t\tclassNames.push('mention-link--here');\n\t\t\t\tclassNames.push('mention-link--group');\n\t\t\t} else if (mention === me) {\n\t\t\t\tclassNames.push('mention-link--me');\n\t\t\t\tclassNames.push('mention-link--user');\n\t\t\t} else {\n\t\t\t\tclassNames.push('mention-link--user');\n\t\t\t}\n\n\t\t\tconst className = classNames.join(' ');\n\n\t\t\tif (mention === 'all' || mention === 'here') {\n\t\t\t\treturn this.userTemplate({ prefix, className, mention, label: mention, type: 'group' });\n\t\t\t}\n\n\t\t\tconst filterUser = ({ username, type }) => (!type || type === 'user') && username === mention;\n\t\t\tconst filterTeam = ({ name, type }) => type === 'team' && name === mention;\n\n\t\t\tconst [mentionObj] = (mentions || []).filter((m) => filterUser(m) || filterTeam(m));\n\n\t\t\tconst label = temp\n\t\t\t\t? mention && escapeHTML(mention)\n\t\t\t\t: mentionObj && escapeHTML(mentionObj.type === 'team' || this.useRealName ? mentionObj.name : mentionObj.username);\n\n\t\t\tif (!label) {\n\t\t\t\treturn match;\n\t\t\t}\n\n\t\t\treturn this.userTemplate({\n\t\t\t\tprefix,\n\t\t\t\tclassName,\n\t\t\t\tmention,\n\t\t\t\tlabel,\n\t\t\t\ttype: mentionObj?.type === 'team' ? 'team' : 'username',\n\t\t\t\ttitle: this.useRealName ? mention : label,\n\t\t\t});\n\t\t});\n\n\treplaceChannels = (msg, { temp, channels }) =>\n\t\tmsg.replace(/&#39;/g, \"'\").replace(this.channelMentionRegex, (match, prefix, mention) => {\n\t\t\tif (\n\t\t\t\t!temp &&\n\t\t\t\t!(\n\t\t\t\t\tchannels &&\n\t\t\t\t\tchannels.find(function (c) {\n\t\t\t\t\t\treturn c.dname ? c.dname === mention : c.name === mention;\n\t\t\t\t\t})\n\t\t\t\t)\n\t\t\t) {\n\t\t\t\treturn match;\n\t\t\t}\n\n\t\t\tconst channel =\n\t\t\t\tchannels &&\n\t\t\t\tchannels.find(function ({ name, dname }) {\n\t\t\t\t\treturn dname ? dname === mention : name === mention;\n\t\t\t\t});\n\t\t\tconst reference = channel ? channel._id : mention;\n\t\t\treturn this.roomTemplate({ prefix, reference, channel, mention });\n\t\t});\n\n\tgetUserMentions(str) {\n\t\treturn (str.match(this.userMentionRegex) || []).map((match) => match.trim());\n\t}\n\n\tgetChannelMentions(str) {\n\t\treturn (str.match(this.channelMentionRegex) || []).map((match) => match.trim());\n\t}\n\n\tparse(message) {\n\t\tlet msg = (message && message.html) || '';\n\t\tif (!msg.trim()) {\n\t\t\treturn message;\n\t\t}\n\t\tmsg = this.replaceUsers(msg, message, this.me);\n\t\tmsg = this.replaceChannels(msg, message, this.me);\n\t\tmessage.html = msg;\n\t\treturn message;\n\t}\n}\n","import { MentionsParser } from '../lib/MentionsParser';\nimport './mentionLink.css';\n\nexport let instance = new MentionsParser({\n\tme: () => undefined,\n\tpattern: () => undefined,\n\tuseRealName: () => undefined,\n});\n\nexport let renderMentions = (message) => message;\n\nexport const createMentionsMessageRenderer = ({ me, pattern, useRealName }) => {\n\tinstance = new MentionsParser({\n\t\tme: () => me,\n\t\tpattern: () => pattern,\n\t\tuseRealName: () => useRealName,\n\t});\n\n\trenderMentions = (message) => instance.parse(message);\n\n\treturn (message) => instance.parse(message);\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport _ from 'underscore';\n\nimport { settings } from '../../settings';\nimport { CustomOAuth } from '../../custom-oauth';\n\nconst config = {\n\tserverURL: '',\n\ttokenPath: '/index.php/apps/oauth2/api/v1/token',\n\ttokenSentVia: 'header',\n\tauthorizePath: '/index.php/apps/oauth2/authorize',\n\tidentityPath: '/ocs/v2.php/cloud/user?format=json',\n\tscope: 'openid',\n\taddAutopublishFields: {\n\t\tforLoggedInUser: ['services.nextcloud'],\n\t\tforOtherUsers: ['services.nextcloud.name'],\n\t},\n};\n\nconst Nextcloud = new CustomOAuth('nextcloud', config);\n\nconst fillServerURL = _.debounce(\n\tMeteor.bindEnvironment(() => {\n\t\tconst nextcloudURL = settings.get('Accounts_OAuth_Nextcloud_URL');\n\t\tif (!nextcloudURL) {\n\t\t\tif (nextcloudURL === undefined) {\n\t\t\t\treturn fillServerURL();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\t\tconfig.serverURL = nextcloudURL.trim().replace(/\\/*$/, '');\n\t\treturn Nextcloud.configure(config);\n\t}),\n\tMeteor.isServer ? 1000 : 100,\n);\n\nMeteor.startup(function () {\n\tif (Meteor.isServer) {\n\t\tsettings.get('Accounts_OAuth_Nextcloud_URL', () => fillServerURL());\n\t} else {\n\t\tTracker.autorun(function () {\n\t\t\treturn fillServerURL();\n\t\t});\n\t}\n});\n","import '../lib/common';\n","import { Meteor } from 'meteor/meteor';\n\nimport { slashCommands } from '../../utils';\n/*\n * Gimme is a named function that will replace /gimme commands\n * @param {Object} message - The message object\n */\n\nfunction Gimme(command, params, item) {\n\tif (command === 'gimme') {\n\t\tconst msg = item;\n\t\tmsg.msg = `༼ つ ◕_◕ ༽つ ${params}`;\n\t\tMeteor.call('sendMessage', msg);\n\t}\n}\n\nslashCommands.add('gimme', Gimme, {\n\tdescription: 'Slash_Gimme_Description',\n\tparams: 'your_message_optional',\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { slashCommands } from '../../utils';\n/*\n * Lenny is a named function that will replace /lenny commands\n * @param {Object} message - The message object\n */\n\nfunction LennyFace(command, params, item) {\n\tif (command === 'lennyface') {\n\t\tconst msg = item;\n\t\tmsg.msg = `${params} ( ͡° ͜ʖ ͡°)`;\n\t\tMeteor.call('sendMessage', msg);\n\t}\n}\n\nslashCommands.add('lennyface', LennyFace, {\n\tdescription: 'Slash_LennyFace_Description',\n\tparams: 'your_message_optional',\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { slashCommands } from '../../utils';\n/*\n * Shrug is a named function that will replace /shrug commands\n * @param {Object} message - The message object\n */\n\nfunction Shrug(command, params, item) {\n\tif (command === 'shrug') {\n\t\tconst msg = item;\n\t\tmsg.msg = `${params} ¯\\\\_(ツ)_/¯`;\n\t\tMeteor.call('sendMessage', msg);\n\t}\n}\n\nslashCommands.add('shrug', Shrug, {\n\tdescription: 'Slash_Shrug_Description',\n\tparams: 'your_message_optional',\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { slashCommands } from '../../utils';\n/*\n * Tableflip is a named function that will replace /Tableflip commands\n * @param {Object} message - The message object\n */\n\nfunction Tableflip(command, params, item) {\n\tif (command === 'tableflip') {\n\t\tconst msg = item;\n\t\tmsg.msg = `${params} (╯°□°）╯︵ ┻━┻`;\n\t\tMeteor.call('sendMessage', msg);\n\t}\n}\n\nslashCommands.add('tableflip', Tableflip, {\n\tdescription: 'Slash_Tableflip_Description',\n\tparams: 'your_message_optional',\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { slashCommands } from '../../utils';\n/*\n * Unflip is a named function that will replace /unflip commands\n * @param {Object} message - The message object\n */\n\nfunction Unflip(command, params, item) {\n\tif (command === 'unflip') {\n\t\tconst msg = item;\n\t\tmsg.msg = `${params} ┬─┬ ノ( ゜-゜ノ)`;\n\t\tMeteor.call('sendMessage', msg);\n\t}\n}\n\nslashCommands.add('unflip', Unflip, {\n\tdescription: 'Slash_TableUnflip_Description',\n\tparams: 'your_message_optional',\n});\n","import '../lib/gimme';\nimport '../lib/lenny';\nimport '../lib/shrug';\nimport '../lib/tableflip';\nimport '../lib/unflip';\n","import { Meteor } from 'meteor/meteor';\n\nimport { slashCommands } from '../../utils';\nimport { ChatRoom } from '../../models';\nimport { callbacks } from '../../../lib/callbacks';\nimport { hasPermission } from '../../authorization';\n\nfunction Topic(command, params, item) {\n\tif (command === 'topic') {\n\t\tif (\n\t\t\t(Meteor.isClient && hasPermission('edit-room', item.rid)) ||\n\t\t\t(Meteor.isServer && hasPermission(Meteor.userId(), 'edit-room', item.rid))\n\t\t) {\n\t\t\tMeteor.call('saveRoomSettings', item.rid, 'roomTopic', params, (err) => {\n\t\t\t\tif (err) {\n\t\t\t\t\tif (Meteor.isClient) {\n\t\t\t\t\t\tconst { handleError } = require('../../../client/lib/utils/handleError');\n\t\t\t\t\t\treturn handleError(err);\n\t\t\t\t\t}\n\t\t\t\t\tthrow err;\n\t\t\t\t}\n\n\t\t\t\tif (Meteor.isClient) {\n\t\t\t\t\tcallbacks.run('roomTopicChanged', ChatRoom.findOne(item.rid));\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\nslashCommands.add('topic', Topic, {\n\tdescription: 'Slash_Topic_Description',\n\tparams: 'Slash_Topic_Params',\n\tpermission: 'edit-room',\n});\n","import '../lib/topic';\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { ServiceConfiguration } from 'meteor/service-configuration';\nimport _ from 'underscore';\n\nimport { settings } from '../../settings';\nimport { CustomOAuth } from '../../custom-oauth';\n\nconst config = {\n\tserverURL: '',\n\tidentityPath: '/oauth/me',\n\n\taddAutopublishFields: {\n\t\tforLoggedInUser: ['services.wordpress'],\n\t\tforOtherUsers: ['services.wordpress.user_login'],\n\t},\n\taccessTokenParam: 'access_token',\n};\n\nconst WordPress = new CustomOAuth('wordpress', config);\n\nconst fillSettings = _.debounce(\n\tMeteor.bindEnvironment(() => {\n\t\tconfig.serverURL = settings.get('API_Wordpress_URL');\n\t\tif (!config.serverURL) {\n\t\t\tif (config.serverURL === undefined) {\n\t\t\t\treturn fillSettings();\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tdelete config.identityPath;\n\t\tdelete config.identityTokenSentVia;\n\t\tdelete config.authorizePath;\n\t\tdelete config.tokenPath;\n\t\tdelete config.scope;\n\n\t\tconst serverType = settings.get('Accounts_OAuth_Wordpress_server_type');\n\t\tswitch (serverType) {\n\t\t\tcase 'custom':\n\t\t\t\tif (settings.get('Accounts_OAuth_Wordpress_identity_path')) {\n\t\t\t\t\tconfig.identityPath = settings.get('Accounts_OAuth_Wordpress_identity_path');\n\t\t\t\t}\n\n\t\t\t\tif (settings.get('Accounts_OAuth_Wordpress_identity_token_sent_via')) {\n\t\t\t\t\tconfig.identityTokenSentVia = settings.get('Accounts_OAuth_Wordpress_identity_token_sent_via');\n\t\t\t\t}\n\n\t\t\t\tif (settings.get('Accounts_OAuth_Wordpress_token_path')) {\n\t\t\t\t\tconfig.tokenPath = settings.get('Accounts_OAuth_Wordpress_token_path');\n\t\t\t\t}\n\n\t\t\t\tif (settings.get('Accounts_OAuth_Wordpress_authorize_path')) {\n\t\t\t\t\tconfig.authorizePath = settings.get('Accounts_OAuth_Wordpress_authorize_path');\n\t\t\t\t}\n\n\t\t\t\tif (settings.get('Accounts_OAuth_Wordpress_scope')) {\n\t\t\t\t\tconfig.scope = settings.get('Accounts_OAuth_Wordpress_scope');\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tcase 'wordpress-com':\n\t\t\t\tconfig.identityPath = 'https://public-api.wordpress.com/rest/v1/me';\n\t\t\t\tconfig.identityTokenSentVia = 'header';\n\t\t\t\tconfig.authorizePath = 'https://public-api.wordpress.com/oauth2/authorize';\n\t\t\t\tconfig.tokenPath = 'https://public-api.wordpress.com/oauth2/token';\n\t\t\t\tconfig.scope = 'auth';\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconfig.identityPath = '/oauth/me';\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst result = WordPress.configure(config);\n\t\tif (Meteor.isServer) {\n\t\t\tconst enabled = settings.get('Accounts_OAuth_Wordpress');\n\t\t\tif (enabled) {\n\t\t\t\tServiceConfiguration.configurations.upsert(\n\t\t\t\t\t{\n\t\t\t\t\t\tservice: 'wordpress',\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\t$set: config,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tServiceConfiguration.configurations.remove({\n\t\t\t\t\tservice: 'wordpress',\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t}),\n\tMeteor.isServer ? 1000 : 100,\n);\n\nif (Meteor.isServer) {\n\tMeteor.startup(function () {\n\t\treturn settings.watchByRegex(/(API\\_Wordpress\\_URL)?(Accounts\\_OAuth\\_Wordpress\\_)?/, () => fillSettings());\n\t});\n} else {\n\tMeteor.startup(function () {\n\t\treturn Tracker.autorun(function () {\n\t\t\treturn fillSettings();\n\t\t});\n\t});\n}\n","import '../lib/common';\nimport './wordpress-login-button.css';\n","import 'toastr/build/toastr.min.css';\nimport './main.css';\nimport './vendor/photoswipe.css';\nimport './vendor/fontello/css/fontello.css';\nimport './rocketchat.font.css';\n","export enum E2ERoomState {\n\tNO_PASSWORD_SET = 'NO_PASSWORD_SET',\n\tNOT_STARTED = 'NOT_STARTED',\n\tDISABLED = 'DISABLED',\n\tHANDSHAKE = 'HANDSHAKE',\n\tESTABLISHING = 'ESTABLISHING',\n\tCREATING_KEYS = 'CREATING_KEYS',\n\tWAITING_KEYS = 'WAITING_KEYS',\n\tKEYS_RECEIVED = 'KEYS_RECEIVED',\n\tREADY = 'READY',\n\tERROR = 'ERROR',\n}\n","import { Accounts } from 'meteor/accounts-base';\n\nimport { e2e } from './rocketchat.e2e';\n\nAccounts.onLogout(() => {\n\te2e.stopClient();\n});\n","/* eslint-disable new-cap, no-proto */\n\nimport ByteBuffer from 'bytebuffer';\n\nconst StaticArrayBufferProto = new ArrayBuffer().__proto__;\n\nexport function toString(thing) {\n\tif (typeof thing === 'string') {\n\t\treturn thing;\n\t}\n\treturn new ByteBuffer.wrap(thing).toString('binary');\n}\n\nexport function toArrayBuffer(thing) {\n\tif (thing === undefined) {\n\t\treturn undefined;\n\t}\n\tif (thing === Object(thing)) {\n\t\tif (thing.__proto__ === StaticArrayBufferProto) {\n\t\t\treturn thing;\n\t\t}\n\t}\n\n\tif (typeof thing !== 'string') {\n\t\tthrow new Error(`Tried to convert a non-string of type ${typeof thing} to an array buffer`);\n\t}\n\treturn new ByteBuffer.wrap(thing, 'binary').toArrayBuffer();\n}\n\nexport function joinVectorAndEcryptedData(vector, encryptedData) {\n\tconst cipherText = new Uint8Array(encryptedData);\n\tconst output = new Uint8Array(vector.length + cipherText.length);\n\toutput.set(vector, 0);\n\toutput.set(cipherText, vector.length);\n\treturn output;\n}\n\nexport function splitVectorAndEcryptedData(cipherText) {\n\tconst vector = cipherText.slice(0, 16);\n\tconst encryptedData = cipherText.slice(16);\n\n\treturn [vector, encryptedData];\n}\n\nexport async function encryptRSA(key, data) {\n\treturn crypto.subtle.encrypt({ name: 'RSA-OAEP' }, key, data);\n}\n\nexport async function encryptAES(vector, key, data) {\n\treturn crypto.subtle.encrypt({ name: 'AES-CBC', iv: vector }, key, data);\n}\n\nexport async function decryptRSA(key, data) {\n\treturn crypto.subtle.decrypt({ name: 'RSA-OAEP' }, key, data);\n}\n\nexport async function decryptAES(vector, key, data) {\n\treturn crypto.subtle.decrypt({ name: 'AES-CBC', iv: vector }, key, data);\n}\n\nexport async function generateAESKey() {\n\treturn crypto.subtle.generateKey({ name: 'AES-CBC', length: 128 }, true, ['encrypt', 'decrypt']);\n}\n\nexport async function generateRSAKey() {\n\treturn crypto.subtle.generateKey(\n\t\t{\n\t\t\tname: 'RSA-OAEP',\n\t\t\tmodulusLength: 2048,\n\t\t\tpublicExponent: new Uint8Array([0x01, 0x00, 0x01]),\n\t\t\thash: { name: 'SHA-256' },\n\t\t},\n\t\ttrue,\n\t\t['encrypt', 'decrypt'],\n\t);\n}\n\nexport async function exportJWKKey(key) {\n\treturn crypto.subtle.exportKey('jwk', key);\n}\n\nexport async function importRSAKey(keyData, keyUsages = ['encrypt', 'decrypt']) {\n\treturn crypto.subtle.importKey(\n\t\t'jwk',\n\t\tkeyData,\n\t\t{\n\t\t\tname: 'RSA-OAEP',\n\t\t\tmodulusLength: 2048,\n\t\t\tpublicExponent: new Uint8Array([0x01, 0x00, 0x01]),\n\t\t\thash: { name: 'SHA-256' },\n\t\t},\n\t\ttrue,\n\t\tkeyUsages,\n\t);\n}\n\nexport async function importAESKey(keyData, keyUsages = ['encrypt', 'decrypt']) {\n\treturn crypto.subtle.importKey('jwk', keyData, { name: 'AES-CBC' }, true, keyUsages);\n}\n\nexport async function importRawKey(keyData, keyUsages = ['deriveKey']) {\n\treturn crypto.subtle.importKey('raw', keyData, { name: 'PBKDF2' }, false, keyUsages);\n}\n\nexport async function deriveKey(salt, baseKey, keyUsages = ['encrypt', 'decrypt']) {\n\tconst iterations = 1000;\n\tconst hash = 'SHA-256';\n\n\treturn crypto.subtle.deriveKey({ name: 'PBKDF2', salt, iterations, hash }, baseKey, { name: 'AES-CBC', length: 256 }, true, keyUsages);\n}\n\nexport async function readFileAsArrayBuffer(file) {\n\treturn new Promise((resolve, reject) => {\n\t\tconst reader = new FileReader();\n\t\treader.onload = function (evt) {\n\t\t\tresolve(evt.target.result);\n\t\t};\n\t\treader.onerror = function (evt) {\n\t\t\treject(evt);\n\t\t};\n\t\treader.readAsArrayBuffer(file);\n\t});\n}\n\nexport class Deferred {\n\tconstructor() {\n\t\tconst p = new Promise((resolve, reject) => {\n\t\t\tthis.resolve = resolve;\n\t\t\tthis.reject = reject;\n\t\t});\n\n\t\tp.resolve = this.resolve;\n\t\tp.reject = this.reject;\n\n\t\treturn p;\n\t}\n}\n","import './stylesheets/e2e.css';\n\nexport * from './rocketchat.e2e';\n","import { getConfig } from '../../../client/lib/utils/getConfig';\n\nlet debug: boolean | undefined = undefined;\n\nconst isDebugEnabled = (): boolean => {\n\tif (debug === undefined) {\n\t\tdebug = getConfig('debug') === 'true' || getConfig('debug-e2e') === 'true';\n\t}\n\n\treturn debug;\n};\n\nexport const log = (context: string, ...msg: unknown[]): void => {\n\tisDebugEnabled() && console.log(`[${context}]`, ...msg);\n};\n\nexport const logError = (context: string, ...msg: unknown[]): void => {\n\tisDebugEnabled() && console.error(`[${context}]`, ...msg);\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Random } from 'meteor/random';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { EJSON } from 'meteor/ejson';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { Emitter } from '@rocket.chat/emitter';\n\nimport { E2ERoom } from './rocketchat.e2e.room';\nimport {\n\ttoString,\n\ttoArrayBuffer,\n\tjoinVectorAndEcryptedData,\n\tsplitVectorAndEcryptedData,\n\tencryptAES,\n\tdecryptAES,\n\tgenerateRSAKey,\n\texportJWKKey,\n\timportRSAKey,\n\timportRawKey,\n\tderiveKey,\n} from './helper';\nimport * as banners from '../../../client/lib/banners';\nimport { Rooms, Subscriptions, Messages } from '../../models/client';\nimport './events.js';\nimport './tabbar';\nimport { log, logError } from './logger';\nimport { waitUntilFind } from '../../../client/lib/utils/waitUntilFind';\nimport { imperativeModal } from '../../../client/lib/imperativeModal';\nimport SaveE2EPasswordModal from '../../../client/views/e2e/SaveE2EPasswordModal';\nimport EnterE2EPasswordModal from '../../../client/views/e2e/EnterE2EPasswordModal';\nimport { call } from '../../../client/lib/utils/call';\n\nlet failedToDecodeKey = false;\n\nclass E2E extends Emitter {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.started = false;\n\t\tthis.enabled = new ReactiveVar(false);\n\t\tthis._ready = new ReactiveVar(false);\n\t\tthis.instancesByRoomId = {};\n\n\t\tthis.on('ready', () => {\n\t\t\tthis._ready.set(true);\n\t\t\tthis.log('startClient -> Done');\n\t\t\tthis.log('decryptSubscriptions');\n\n\t\t\tthis.decryptSubscriptions();\n\t\t\tthis.log('decryptSubscriptions -> Done');\n\t\t});\n\t}\n\n\tlog(...msg) {\n\t\tlog('E2E', ...msg);\n\t}\n\n\terror(...msg) {\n\t\tlogError('E2E', ...msg);\n\t}\n\n\tisEnabled() {\n\t\treturn this.enabled.get();\n\t}\n\n\tisReady() {\n\t\treturn this.enabled.get() && this._ready.get();\n\t}\n\n\tasync getInstanceByRoomId(rid) {\n\t\tconst room = await waitUntilFind(() => Rooms.findOne({ _id: rid }));\n\n\t\tif (room.t !== 'd' && room.t !== 'p') {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (room.encrypted !== true && !room.e2eKeyId) {\n\t\t\treturn null;\n\t\t}\n\n\t\tif (!this.instancesByRoomId[rid]) {\n\t\t\tthis.instancesByRoomId[rid] = new E2ERoom(Meteor.userId(), rid, room.t);\n\t\t}\n\n\t\treturn this.instancesByRoomId[rid];\n\t}\n\n\tremoveInstanceByRoomId(rid) {\n\t\tdelete this.instancesByRoomId[rid];\n\t}\n\n\tasync startClient() {\n\t\tif (this.started) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.log('startClient -> STARTED');\n\n\t\tthis.started = true;\n\t\tlet public_key = Meteor._localStorage.getItem('public_key');\n\t\tlet private_key = Meteor._localStorage.getItem('private_key');\n\n\t\tawait this.loadKeysFromDB();\n\n\t\tif (!public_key && this.db_public_key) {\n\t\t\tpublic_key = this.db_public_key;\n\t\t}\n\n\t\tif (!private_key && this.db_private_key) {\n\t\t\ttry {\n\t\t\t\tprivate_key = await this.decodePrivateKey(this.db_private_key);\n\t\t\t} catch (error) {\n\t\t\t\tthis.started = false;\n\t\t\t\tfailedToDecodeKey = true;\n\t\t\t\tthis.openAlert({\n\t\t\t\t\ttitle: TAPi18n.__(\"Wasn't possible to decode your encryption key to be imported.\"),\n\t\t\t\t\thtml: '<div>Your encryption password seems wrong. Click here to try again.</div>',\n\t\t\t\t\tmodifiers: ['large', 'danger'],\n\t\t\t\t\tclosable: true,\n\t\t\t\t\ticon: 'key',\n\t\t\t\t\taction: () => {\n\t\t\t\t\t\tthis.startClient();\n\t\t\t\t\t\tthis.closeAlert();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\tif (public_key && private_key) {\n\t\t\tawait this.loadKeys({ public_key, private_key });\n\t\t} else {\n\t\t\tawait this.createAndLoadKeys();\n\t\t}\n\n\t\t// TODO: Split in 2 methods to persist keys\n\t\tif (!this.db_public_key || !this.db_private_key) {\n\t\t\tawait call('e2e.setUserPublicAndPrivateKeys', {\n\t\t\t\tpublic_key: Meteor._localStorage.getItem('public_key'),\n\t\t\t\tprivate_key: await this.encodePrivateKey(Meteor._localStorage.getItem('private_key'), this.createRandomPassword()),\n\t\t\t});\n\t\t}\n\n\t\tconst randomPassword = Meteor._localStorage.getItem('e2e.randomPassword');\n\t\tif (randomPassword) {\n\t\t\tconst passwordRevealText = TAPi18n.__('E2E_password_reveal_text', {\n\t\t\t\tpostProcess: 'sprintf',\n\t\t\t\tsprintf: [randomPassword],\n\t\t\t});\n\n\t\t\tthis.openAlert({\n\t\t\t\ttitle: TAPi18n.__('Save_Your_Encryption_Password'),\n\t\t\t\thtml: TAPi18n.__('Click_here_to_view_and_copy_your_password'),\n\t\t\t\tmodifiers: ['large'],\n\t\t\t\tclosable: false,\n\t\t\t\ticon: 'key',\n\t\t\t\taction: () => {\n\t\t\t\t\timperativeModal.open({\n\t\t\t\t\t\tcomponent: SaveE2EPasswordModal,\n\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\tpasswordRevealText,\n\t\t\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t\t\t\tonCancel: () => {\n\t\t\t\t\t\t\t\tthis.closeAlert();\n\t\t\t\t\t\t\t\timperativeModal.close();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonConfirm: () => {\n\t\t\t\t\t\t\t\tMeteor._localStorage.removeItem('e2e.randomPassword');\n\t\t\t\t\t\t\t\tthis.closeAlert();\n\t\t\t\t\t\t\t\timperativeModal.close();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t\tthis.emit('ready');\n\t}\n\n\tasync stopClient() {\n\t\tthis.log('-> Stop Client');\n\t\tthis.closeAlert();\n\n\t\tMeteor._localStorage.removeItem('public_key');\n\t\tMeteor._localStorage.removeItem('private_key');\n\t\tthis.instancesByRoomId = {};\n\t\tthis.privateKey = null;\n\t\tthis.enabled.set(false);\n\t\tthis._ready.set(false);\n\t\tthis.started = false;\n\t}\n\n\tasync changePassword(newPassword) {\n\t\tawait call('e2e.setUserPublicAndPrivateKeys', {\n\t\t\tpublic_key: Meteor._localStorage.getItem('public_key'),\n\t\t\tprivate_key: await this.encodePrivateKey(Meteor._localStorage.getItem('private_key'), newPassword),\n\t\t});\n\n\t\tif (Meteor._localStorage.getItem('e2e.randomPassword')) {\n\t\t\tMeteor._localStorage.setItem('e2e.randomPassword', newPassword);\n\t\t}\n\t}\n\n\tasync loadKeysFromDB() {\n\t\ttry {\n\t\t\tconst { public_key, private_key } = await call('e2e.fetchMyKeys');\n\n\t\t\tthis.db_public_key = public_key;\n\t\t\tthis.db_private_key = private_key;\n\t\t} catch (error) {\n\t\t\treturn this.error('Error fetching RSA keys: ', error);\n\t\t}\n\t}\n\n\tasync loadKeys({ public_key, private_key }) {\n\t\tMeteor._localStorage.setItem('public_key', public_key);\n\n\t\ttry {\n\t\t\tthis.privateKey = await importRSAKey(EJSON.parse(private_key), ['decrypt']);\n\n\t\t\tMeteor._localStorage.setItem('private_key', private_key);\n\t\t} catch (error) {\n\t\t\treturn this.error('Error importing private key: ', error);\n\t\t}\n\t}\n\n\tasync createAndLoadKeys() {\n\t\t// Could not obtain public-private keypair from server.\n\t\tlet key;\n\t\ttry {\n\t\t\tkey = await generateRSAKey();\n\t\t\tthis.privateKey = key.privateKey;\n\t\t} catch (error) {\n\t\t\treturn this.error('Error generating key: ', error);\n\t\t}\n\n\t\ttry {\n\t\t\tconst publicKey = await exportJWKKey(key.publicKey);\n\n\t\t\tMeteor._localStorage.setItem('public_key', JSON.stringify(publicKey));\n\t\t} catch (error) {\n\t\t\treturn this.error('Error exporting public key: ', error);\n\t\t}\n\n\t\ttry {\n\t\t\tconst privateKey = await exportJWKKey(key.privateKey);\n\n\t\t\tMeteor._localStorage.setItem('private_key', JSON.stringify(privateKey));\n\t\t} catch (error) {\n\t\t\treturn this.error('Error exporting private key: ', error);\n\t\t}\n\n\t\tthis.requestSubscriptionKeys();\n\t}\n\n\tasync requestSubscriptionKeys() {\n\t\tcall('e2e.requestSubscriptionKeys');\n\t}\n\n\tcreateRandomPassword() {\n\t\tconst randomPassword = `${Random.id(3)}-${Random.id(3)}-${Random.id(3)}`.toLowerCase();\n\t\tMeteor._localStorage.setItem('e2e.randomPassword', randomPassword);\n\t\treturn randomPassword;\n\t}\n\n\tasync encodePrivateKey(private_key, password) {\n\t\tconst masterKey = await this.getMasterKey(password);\n\n\t\tconst vector = crypto.getRandomValues(new Uint8Array(16));\n\t\ttry {\n\t\t\tconst encodedPrivateKey = await encryptAES(vector, masterKey, toArrayBuffer(private_key));\n\n\t\t\treturn EJSON.stringify(joinVectorAndEcryptedData(vector, encodedPrivateKey));\n\t\t} catch (error) {\n\t\t\treturn this.error('Error encrypting encodedPrivateKey: ', error);\n\t\t}\n\t}\n\n\tasync getMasterKey(password) {\n\t\tif (password == null) {\n\t\t\talert('You should provide a password');\n\t\t}\n\n\t\t// First, create a PBKDF2 \"key\" containing the password\n\t\tlet baseKey;\n\t\ttry {\n\t\t\tbaseKey = await importRawKey(toArrayBuffer(password));\n\t\t} catch (error) {\n\t\t\treturn this.error('Error creating a key based on user password: ', error);\n\t\t}\n\n\t\t// Derive a key from the password\n\t\ttry {\n\t\t\treturn await deriveKey(toArrayBuffer(Meteor.userId()), baseKey);\n\t\t} catch (error) {\n\t\t\treturn this.error('Error deriving baseKey: ', error);\n\t\t}\n\t}\n\n\tasync requestPassword() {\n\t\treturn new Promise((resolve) => {\n\t\t\tconst showModal = () => {\n\t\t\t\timperativeModal.open({\n\t\t\t\t\tcomponent: EnterE2EPasswordModal,\n\t\t\t\t\tprops: {\n\t\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t\t\tonCancel: () => {\n\t\t\t\t\t\t\tfailedToDecodeKey = false;\n\t\t\t\t\t\t\tthis.closeAlert();\n\t\t\t\t\t\t\timperativeModal.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonConfirm: (password) => {\n\t\t\t\t\t\t\tresolve(password);\n\t\t\t\t\t\t\tthis.closeAlert();\n\t\t\t\t\t\t\timperativeModal.close();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tconst showAlert = () => {\n\t\t\t\tthis.openAlert({\n\t\t\t\t\ttitle: TAPi18n.__('Enter_your_E2E_password'),\n\t\t\t\t\thtml: TAPi18n.__('Click_here_to_enter_your_encryption_password'),\n\t\t\t\t\tmodifiers: ['large'],\n\t\t\t\t\tclosable: false,\n\t\t\t\t\ticon: 'key',\n\t\t\t\t\taction() {\n\t\t\t\t\t\tshowModal();\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tif (failedToDecodeKey) {\n\t\t\t\tshowModal();\n\t\t\t} else {\n\t\t\t\tshowAlert();\n\t\t\t}\n\t\t});\n\t}\n\n\tasync decodePrivateKey(private_key) {\n\t\tconst password = await this.requestPassword();\n\n\t\tconst masterKey = await this.getMasterKey(password);\n\n\t\tconst [vector, cipherText] = splitVectorAndEcryptedData(EJSON.parse(private_key));\n\n\t\ttry {\n\t\t\tconst privKey = await decryptAES(vector, masterKey, cipherText);\n\t\t\treturn toString(privKey);\n\t\t} catch (error) {\n\t\t\tthrow new Error('E2E -> Error decrypting private key');\n\t\t}\n\t}\n\n\tasync decryptMessage(message) {\n\t\tif (message.t !== 'e2e' || message.e2e === 'done') {\n\t\t\treturn message;\n\t\t}\n\n\t\tconst e2eRoom = await this.getInstanceByRoomId(message.rid);\n\n\t\tif (!e2eRoom) {\n\t\t\treturn message;\n\t\t}\n\n\t\tconst data = await e2eRoom.decrypt(message.msg);\n\n\t\tif (!data) {\n\t\t\treturn message;\n\t\t}\n\n\t\treturn {\n\t\t\t...message,\n\t\t\tmsg: data.text,\n\t\t\te2e: 'done',\n\t\t};\n\t}\n\n\tasync decryptPendingMessages() {\n\t\treturn Messages.find({ t: 'e2e', e2e: 'pending' }).forEach(async ({ _id, ...msg }) => {\n\t\t\tMessages.direct.update({ _id }, await this.decryptMessage(msg));\n\t\t});\n\t}\n\n\tasync decryptSubscription(rid) {\n\t\tconst e2eRoom = await this.getInstanceByRoomId(rid);\n\t\tthis.log('decryptSubscription ->', rid);\n\t\te2eRoom?.decryptSubscription();\n\t}\n\n\tasync decryptSubscriptions() {\n\t\tSubscriptions.find({\n\t\t\tencrypted: true,\n\t\t}).forEach((room) => this.decryptSubscription(room._id));\n\t}\n\n\topenAlert(config) {\n\t\tbanners.open({ id: 'e2e', ...config });\n\t}\n\n\tcloseAlert() {\n\t\tbanners.closeById('e2e');\n\t}\n}\n\nexport const e2e = new E2E();\n","import _ from 'underscore';\nimport { Base64 } from 'meteor/base64';\nimport { EJSON } from 'meteor/ejson';\nimport { Random } from 'meteor/random';\nimport { Session } from 'meteor/session';\nimport { TimeSync } from 'meteor/mizzao:timesync';\nimport { Emitter } from '@rocket.chat/emitter';\n\nimport { e2e } from './rocketchat.e2e';\nimport {\n\ttoString,\n\ttoArrayBuffer,\n\tjoinVectorAndEcryptedData,\n\tsplitVectorAndEcryptedData,\n\tencryptRSA,\n\tencryptAES,\n\tdecryptRSA,\n\tdecryptAES,\n\tgenerateAESKey,\n\texportJWKKey,\n\timportAESKey,\n\timportRSAKey,\n\treadFileAsArrayBuffer,\n} from './helper';\nimport { Notifications } from '../../notifications/client';\nimport { Rooms, Subscriptions, Messages } from '../../models/client';\nimport { roomTypes, RoomSettingsEnum } from '../../utils/client';\nimport { log, logError } from './logger';\nimport { E2ERoomState } from './E2ERoomState';\nimport { call } from '../../../client/lib/utils/call';\n\nconst KEY_ID = Symbol('keyID');\nconst PAUSED = Symbol('PAUSED');\n\nconst permitedMutations = {\n\t[E2ERoomState.NOT_STARTED]: [E2ERoomState.ESTABLISHING, E2ERoomState.DISABLED, E2ERoomState.KEYS_RECEIVED],\n\t[E2ERoomState.READY]: [E2ERoomState.DISABLED],\n\t[E2ERoomState.ERROR]: [E2ERoomState.KEYS_RECEIVED, E2ERoomState.NOT_STARTED],\n\t[E2ERoomState.WAITING_KEYS]: [E2ERoomState.KEYS_RECEIVED, E2ERoomState.ERROR, E2ERoomState.DISABLED],\n\t[E2ERoomState.ESTABLISHING]: [\n\t\tE2ERoomState.READY,\n\t\tE2ERoomState.KEYS_RECEIVED,\n\t\tE2ERoomState.ERROR,\n\t\tE2ERoomState.DISABLED,\n\t\tE2ERoomState.WAITING_KEYS,\n\t],\n};\n\nconst filterMutation = (currentState, nextState) => {\n\tif (currentState === nextState) {\n\t\treturn nextState === E2ERoomState.ERROR;\n\t}\n\n\tif (!(currentState in permitedMutations)) {\n\t\treturn nextState;\n\t}\n\n\tif (permitedMutations[currentState].includes(nextState)) {\n\t\treturn nextState;\n\t}\n\n\treturn false;\n};\n\nexport class E2ERoom extends Emitter {\n\tstate = undefined;\n\n\t[PAUSED] = undefined;\n\n\tconstructor(userId, roomId, t) {\n\t\tsuper();\n\n\t\tthis.userId = userId;\n\t\tthis.roomId = roomId;\n\t\tthis.typeOfRoom = t;\n\n\t\tthis.once(E2ERoomState.READY, () => this.decryptPendingMessages());\n\t\tthis.once(E2ERoomState.READY, () => this.decryptSubscription());\n\t\tthis.on('STATE_CHANGED', (prev) => {\n\t\t\tif (this.roomId === Session.get('openedRoom')) {\n\t\t\t\tthis.log(`[PREV: ${prev}]`, 'State CHANGED');\n\t\t\t}\n\t\t});\n\t\tthis.on('STATE_CHANGED', () => this.handshake());\n\n\t\tthis.setState(E2ERoomState.NOT_STARTED);\n\t}\n\n\tlog(...msg) {\n\t\tlog(`E2E ROOM { state: ${this.state}, rid: ${this.roomId} }`, ...msg);\n\t}\n\n\terror(...msg) {\n\t\tlogError(`E2E ROOM { state: ${this.state}, rid: ${this.roomId} }`, ...msg);\n\t}\n\n\tsetState(requestedState) {\n\t\tconst currentState = this.state;\n\t\tconst nextState = filterMutation(currentState, requestedState);\n\n\t\tif (!nextState) {\n\t\t\tthis.error(`invalid state ${currentState} -> ${requestedState}`);\n\t\t\treturn;\n\t\t}\n\n\t\tthis.state = nextState;\n\t\tthis.log(currentState, '->', nextState);\n\t\tthis.emit('STATE_CHANGED', currentState, nextState, this);\n\t\tthis.emit(nextState, this);\n\t}\n\n\tisReady() {\n\t\treturn this.state === E2ERoomState.READY;\n\t}\n\n\tisDisabled() {\n\t\treturn this.state === E2ERoomState.DISABLED;\n\t}\n\n\tenable() {\n\t\tif (this.state === E2ERoomState.READY) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState(E2ERoomState.READY);\n\t}\n\n\tdisable() {\n\t\tthis.setState(E2ERoomState.DISABLED);\n\t}\n\n\tpause() {\n\t\tthis.log('PAUSED', this[PAUSED], '->', true);\n\t\tthis[PAUSED] = true;\n\t\tthis.emit('PAUSED', true);\n\t}\n\n\tresume() {\n\t\tthis.log('PAUSED', this[PAUSED], '->', false);\n\t\tthis[PAUSED] = false;\n\t\tthis.emit('PAUSED', false);\n\t}\n\n\tkeyReceived() {\n\t\tthis.setState(E2ERoomState.KEYS_RECEIVED);\n\t}\n\n\tasync shouldConvertSentMessages() {\n\t\tif (!this.isReady() || this[PAUSED]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this[PAUSED] === undefined) {\n\t\t\treturn new Promise((resolve) => {\n\t\t\t\tthis.once('PAUSED', resolve);\n\t\t\t});\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tshouldConvertReceivedMessages() {\n\t\treturn this.isReady();\n\t}\n\n\tisWaitingKeys() {\n\t\treturn this.state === E2ERoomState.WAITING_KEYS;\n\t}\n\n\tget keyID() {\n\t\treturn this[KEY_ID];\n\t}\n\n\tset keyID(keyID) {\n\t\tthis[KEY_ID] = keyID;\n\t}\n\n\tasync decryptSubscription() {\n\t\tconst subscription = Subscriptions.findOne({ rid: this.roomId });\n\n\t\tconst data = await (subscription.lastMessage?.msg && this.decrypt(subscription.lastMessage.msg));\n\t\tif (!data?.text) {\n\t\t\tthis.log('decryptSubscriptions nothing to do');\n\t\t\treturn;\n\t\t}\n\n\t\tSubscriptions.direct.update(\n\t\t\t{\n\t\t\t\t_id: subscription._id,\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\t'lastMessage.msg': data.text,\n\t\t\t\t\t'lastMessage.e2e': 'done',\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t\tthis.log('decryptSubscriptions Done');\n\t}\n\n\tasync decryptPendingMessages() {\n\t\treturn Messages.find({ rid: this.roomId, t: 'e2e', e2e: 'pending' }).forEach(async ({ _id, ...msg }) => {\n\t\t\tMessages.direct.update({ _id }, await this.decryptMessage(msg));\n\t\t});\n\t}\n\n\t// Initiates E2E Encryption\n\tasync handshake() {\n\t\tif (this.state !== E2ERoomState.KEYS_RECEIVED && this.state !== E2ERoomState.NOT_STARTED) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.setState(E2ERoomState.ESTABLISHING);\n\n\t\ttry {\n\t\t\tconst groupKey = Subscriptions.findOne({ rid: this.roomId }).E2EKey;\n\t\t\tif (groupKey) {\n\t\t\t\tawait this.importGroupKey(groupKey);\n\t\t\t\tthis.setState(E2ERoomState.READY);\n\t\t\t\treturn;\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tthis.setState(E2ERoomState.ERROR);\n\t\t\tthis.error('Error fetching group key: ', error);\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst room = Rooms.findOne({ _id: this.roomId });\n\t\t\tif (!room.e2eKeyId) {\n\t\t\t\t// TODO CHECK_PERMISSION\n\t\t\t\tthis.setState(E2ERoomState.CREATING_KEYS);\n\t\t\t\tawait this.createGroupKey();\n\t\t\t\tthis.setState(E2ERoomState.READY);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.setState(E2ERoomState.WAITING_KEYS);\n\t\t\tthis.log('Requesting room key');\n\t\t\tNotifications.notifyUsersOfRoom(this.roomId, 'e2ekeyRequest', this.roomId, room.e2eKeyId);\n\t\t} catch (error) {\n\t\t\t// this.error = error;\n\t\t\tthis.setState(E2ERoomState.ERROR);\n\t\t}\n\t}\n\n\tisSupportedRoomType(type) {\n\t\treturn roomTypes.getConfig(type).allowRoomSettingChange({}, RoomSettingsEnum.E2E);\n\t}\n\n\tasync importGroupKey(groupKey) {\n\t\tthis.log('Importing room key ->', this.roomId);\n\t\t// Get existing group key\n\t\t// const keyID = groupKey.slice(0, 12);\n\t\tgroupKey = groupKey.slice(12);\n\t\tgroupKey = Base64.decode(groupKey);\n\n\t\t// Decrypt obtained encrypted session key\n\t\ttry {\n\t\t\tconst decryptedKey = await decryptRSA(e2e.privateKey, groupKey);\n\t\t\tthis.sessionKeyExportedString = toString(decryptedKey);\n\t\t} catch (error) {\n\t\t\treturn this.error('Error decrypting group key: ', error);\n\t\t}\n\n\t\tthis.keyID = Base64.encode(this.sessionKeyExportedString).slice(0, 12);\n\n\t\t// Import session key for use.\n\t\ttry {\n\t\t\tconst key = await importAESKey(JSON.parse(this.sessionKeyExportedString));\n\t\t\t// Key has been obtained. E2E is now in session.\n\t\t\tthis.groupSessionKey = key;\n\t\t} catch (error) {\n\t\t\treturn this.error('Error importing group key: ', error);\n\t\t}\n\t}\n\n\tasync createGroupKey() {\n\t\tthis.log('Creating room key');\n\t\t// Create group key\n\t\ttry {\n\t\t\tthis.groupSessionKey = await generateAESKey();\n\t\t} catch (error) {\n\t\t\tconsole.error('Error generating group key: ', error);\n\t\t\tthrow error;\n\t\t}\n\n\t\ttry {\n\t\t\tconst sessionKeyExported = await exportJWKKey(this.groupSessionKey);\n\t\t\tthis.sessionKeyExportedString = JSON.stringify(sessionKeyExported);\n\t\t\tthis.keyID = Base64.encode(this.sessionKeyExportedString).slice(0, 12);\n\n\t\t\tawait call('e2e.setRoomKeyID', this.roomId, this.keyID);\n\t\t\tawait this.encryptKeyForOtherParticipants();\n\t\t} catch (error) {\n\t\t\tthis.error('Error exporting group key: ', error);\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\tasync encryptKeyForOtherParticipants() {\n\t\t// Encrypt generated session key for every user in room and publish to subscription model.\n\t\ttry {\n\t\t\tconst { users } = await call('e2e.getUsersOfRoomWithoutKey', this.roomId);\n\t\t\tusers.forEach((user) => this.encryptForParticipant(user));\n\t\t} catch (error) {\n\t\t\treturn this.error('Error getting room users: ', error);\n\t\t}\n\t}\n\n\tasync encryptForParticipant(user) {\n\t\tlet userKey;\n\t\ttry {\n\t\t\tuserKey = await importRSAKey(JSON.parse(user.e2e.public_key), ['encrypt']);\n\t\t} catch (error) {\n\t\t\treturn this.error('Error importing user key: ', error);\n\t\t}\n\t\t// const vector = crypto.getRandomValues(new Uint8Array(16));\n\n\t\t// Encrypt session key for this user with his/her public key\n\t\ttry {\n\t\t\tconst encryptedUserKey = await encryptRSA(userKey, toArrayBuffer(this.sessionKeyExportedString));\n\t\t\t// Key has been encrypted. Publish to that user's subscription model for this room.\n\t\t\tawait call('e2e.updateGroupKey', this.roomId, user._id, this.keyID + Base64.encode(new Uint8Array(encryptedUserKey)));\n\t\t} catch (error) {\n\t\t\treturn this.error('Error encrypting user key: ', error);\n\t\t}\n\t}\n\n\t// Encrypts files before upload. I/O is in arraybuffers.\n\tasync encryptFile(file) {\n\t\tif (!this.isSupportedRoomType(this.typeOfRoom)) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst fileArrayBuffer = await readFileAsArrayBuffer(file);\n\n\t\tconst vector = crypto.getRandomValues(new Uint8Array(16));\n\t\tlet result;\n\t\ttry {\n\t\t\tresult = await encryptAES(vector, this.groupSessionKey, fileArrayBuffer);\n\t\t} catch (error) {\n\t\t\treturn this.error('Error encrypting group key: ', error);\n\t\t}\n\n\t\tconst output = joinVectorAndEcryptedData(vector, result);\n\n\t\tconst encryptedFile = new File([toArrayBuffer(EJSON.stringify(output))], file.name);\n\n\t\treturn encryptedFile;\n\t}\n\n\t// Decrypt uploaded encrypted files. I/O is in arraybuffers.\n\tasync decryptFile(message) {\n\t\tif (message[0] !== '{') {\n\t\t\treturn;\n\t\t}\n\n\t\tconst [vector, cipherText] = splitVectorAndEcryptedData(EJSON.parse(message));\n\n\t\ttry {\n\t\t\treturn await decryptAES(vector, this.groupSessionKey, cipherText);\n\t\t} catch (error) {\n\t\t\tthis.error('Error decrypting file: ', error);\n\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t// Encrypts messages\n\tasync encryptText(data) {\n\t\tif (!_.isObject(data)) {\n\t\t\tdata = new TextEncoder('UTF-8').encode(EJSON.stringify({ text: data, ack: Random.id((Random.fraction() + 1) * 20) }));\n\t\t}\n\n\t\tif (!this.isSupportedRoomType(this.typeOfRoom)) {\n\t\t\treturn data;\n\t\t}\n\n\t\tconst vector = crypto.getRandomValues(new Uint8Array(16));\n\t\tlet result;\n\t\ttry {\n\t\t\tresult = await encryptAES(vector, this.groupSessionKey, data);\n\t\t} catch (error) {\n\t\t\treturn this.error('Error encrypting message: ', error);\n\t\t}\n\n\t\treturn this.keyID + Base64.encode(joinVectorAndEcryptedData(vector, result));\n\t}\n\n\t// Helper function for encryption of messages\n\tencrypt(message) {\n\t\tlet ts;\n\t\tif (isNaN(TimeSync.serverOffset())) {\n\t\t\tts = new Date();\n\t\t} else {\n\t\t\tts = new Date(Date.now() + TimeSync.serverOffset());\n\t\t}\n\n\t\tconst data = new TextEncoder('UTF-8').encode(\n\t\t\tEJSON.stringify({\n\t\t\t\t_id: message._id,\n\t\t\t\ttext: message.msg,\n\t\t\t\tuserId: this.userId,\n\t\t\t\tts,\n\t\t\t}),\n\t\t);\n\n\t\treturn this.encryptText(data);\n\t}\n\n\t// Decrypt messages\n\n\tasync decryptMessage(message) {\n\t\tif (message.t !== 'e2e' || message.e2e === 'done') {\n\t\t\treturn message;\n\t\t}\n\n\t\tconst data = await this.decrypt(message.msg);\n\n\t\tif (!data?.text) {\n\t\t\treturn message;\n\t\t}\n\n\t\treturn {\n\t\t\t...message,\n\t\t\tmsg: data.text,\n\t\t\te2e: 'done',\n\t\t};\n\t}\n\n\tasync decrypt(message) {\n\t\tif (!this.isSupportedRoomType(this.typeOfRoom)) {\n\t\t\treturn message;\n\t\t}\n\n\t\tconst keyID = message.slice(0, 12);\n\n\t\tif (keyID !== this.keyID) {\n\t\t\treturn message;\n\t\t}\n\n\t\tmessage = message.slice(12);\n\n\t\tconst [vector, cipherText] = splitVectorAndEcryptedData(Base64.decode(message));\n\n\t\ttry {\n\t\t\tconst result = await decryptAES(vector, this.groupSessionKey, cipherText);\n\t\t\treturn EJSON.parse(new TextDecoder('UTF-8').decode(new Uint8Array(result)));\n\t\t} catch (error) {\n\t\t\treturn this.error('Error decrypting message: ', error, message);\n\t\t}\n\t}\n\n\tprovideKeyToUser(keyId) {\n\t\tif (this.keyID !== keyId) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.encryptKeyForOtherParticipants();\n\t}\n}\n","import { useMemo, useCallback } from 'react';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\n\nimport { addAction } from '../../../client/views/room/lib/Toolbox';\nimport { useSetting } from '../../../client/contexts/SettingsContext';\nimport { usePermission } from '../../../client/contexts/AuthorizationContext';\nimport { useMethod } from '../../../client/contexts/ServerContext';\nimport { useReactiveValue } from '../../../client/hooks/useReactiveValue';\nimport { e2e } from './rocketchat.e2e';\n\naddAction('e2e', ({ room }) => {\n\tconst e2eEnabled = useSetting('E2E_Enable');\n\tconst e2eReady = useReactiveValue(useCallback(() => e2e.isReady(), [])) || room.encrypted;\n\tconst canToggleE2e = usePermission('toggle-room-e2e-encryption', room._id);\n\tconst canEditRoom = usePermission('edit-room', room._id);\n\tconst hasPermission = (room.t === 'd' || (canEditRoom && canToggleE2e)) && e2eReady;\n\n\tconst toggleE2E = useMethod('saveRoomSettings');\n\n\tconst action = useMutableCallback(() => {\n\t\ttoggleE2E(room._id, 'encrypted', !room.encrypted);\n\t});\n\n\tconst enabledOnRoom = !!room.encrypted;\n\n\treturn useMemo(\n\t\t() =>\n\t\t\te2eEnabled && hasPermission\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['direct', 'direct_multiple', 'group', 'team'],\n\t\t\t\t\t\tid: 'e2e',\n\t\t\t\t\t\ttitle: enabledOnRoom ? 'E2E_disable' : 'E2E_enable',\n\t\t\t\t\t\ticon: 'key',\n\t\t\t\t\t\torder: 13,\n\t\t\t\t\t\taction,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[action, e2eEnabled, enabledOnRoom, hasPermission],\n\t);\n});\n","import { Base } from './_Base';\n\nexport class Avatars extends Base {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._initModel('avatars');\n\t}\n}\n\nexport default new Avatars();\n","import { Mongo } from 'meteor/mongo';\n\nexport const CachedChannelList = new Mongo.Collection(null);\n","import { CachedCollection } from '../../../ui-cached-collection';\n\nexport const CachedChatRoom = new CachedCollection({ name: 'rooms' });\n","import { CachedCollection } from '../../../ui-cached-collection';\n\nexport const CachedChatSubscription = new CachedCollection({ name: 'subscriptions' });\n","import { Mongo } from 'meteor/mongo';\n\nexport const CachedUserList = new Mongo.Collection(null);\n","import { Mongo } from 'meteor/mongo';\n\nexport const ChatMessage = new Mongo.Collection(null);\n\nChatMessage.setReactions = function (messageId, reactions) {\n\treturn this.update({ _id: messageId }, { $set: { reactions } });\n};\n\nChatMessage.unsetReactions = function (messageId) {\n\treturn this.update({ _id: messageId }, { $unset: { reactions: 1 } });\n};\n\nChatMessage.findOneByRoomIdAndMessageId = function (rid, messageId, options) {\n\tconst query = {\n\t\trid,\n\t\t_id: messageId,\n\t};\n\n\treturn this.findOne(query, options);\n};\n","import { CachedCollection } from '../../../ui-cached-collection';\n\nexport const AuthzCachedCollection = new CachedCollection({\n\tname: 'permissions',\n\teventType: 'onLogged',\n});\n\nexport const ChatPermissions = AuthzCachedCollection.collection;\n","import { CachedChatRoom } from './CachedChatRoom';\n\nexport const ChatRoom = CachedChatRoom.collection;\n\nChatRoom.setReactionsInLastMessage = function (roomId, lastMessage) {\n\treturn this.update({ _id: roomId }, { $set: { lastMessage } });\n};\n\nChatRoom.unsetReactionsInLastMessage = function (roomId) {\n\treturn this.update({ _id: roomId }, { $unset: { lastMessage: { reactions: 1 } } });\n};\n","import { CachedChatSubscription } from './CachedChatSubscription';\n\nexport const ChatSubscription = CachedChatSubscription.collection;\n","import { Base } from './_Base';\n\nexport class CustomSounds extends Base {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._initModel('custom_sounds');\n\t}\n}\n\nexport default new CustomSounds();\n","import { Base } from './_Base';\n\nexport class EmojiCustom extends Base {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._initModel('custom_emoji');\n\t}\n\n\t// find\n\tfindByNameOrAlias(name, options) {\n\t\tconst query = {\n\t\t\t$or: [{ name }, { aliases: name }],\n\t\t};\n\n\t\treturn this.find(query, options);\n\t}\n}\n\nexport default new EmojiCustom();\n","import { Mongo } from 'meteor/mongo';\nimport { ReactiveVar } from 'meteor/reactive-var';\n\nimport * as Models from '..';\n\nconst Roles = Object.assign(new Mongo.Collection(null), {\n\tfindUsersInRole(name, scope, options) {\n\t\tconst role = this.findOne(name);\n\t\tconst roleScope = (role && role.scope) || 'Users';\n\t\tconst model = Models[roleScope];\n\t\treturn model && model.findUsersInRoles && model.findUsersInRoles(name, scope, options);\n\t},\n\n\tisUserInRoles(userId, roles, scope) {\n\t\troles = [].concat(roles);\n\t\treturn roles.some((roleName) => {\n\t\t\tconst role = this.findOne(roleName);\n\t\t\tconst roleScope = (role && role.scope) || 'Users';\n\t\t\tconst model = Models[roleScope];\n\t\t\treturn model && model.isUserInRole && model.isUserInRole(userId, roleName, scope);\n\t\t});\n\t},\n\n\tready: new ReactiveVar(false),\n});\n\nexport { Roles };\n","import { Mongo } from 'meteor/mongo';\n\nexport const RoomRoles = new Mongo.Collection(null);\n","import _ from 'underscore';\nimport mem from 'mem';\n\nimport { Users } from '..';\n\nconst Subscriptions = {};\n\nObject.assign(Subscriptions, {\n\tisUserInRole: mem(\n\t\tfunction (userId, roleName, roomId) {\n\t\t\tif (roomId == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tconst query = {\n\t\t\t\trid: roomId,\n\t\t\t};\n\n\t\t\tconst subscription = this.findOne(query, { fields: { roles: 1 } });\n\n\t\t\treturn subscription && Array.isArray(subscription.roles) && subscription.roles.includes(roleName);\n\t\t},\n\t\t{ maxAge: 1000, cacheKey: JSON.stringify },\n\t),\n\n\tfindUsersInRoles: mem(\n\t\tfunction (roles, scope, options) {\n\t\t\troles = [].concat(roles);\n\n\t\t\tconst query = {\n\t\t\t\troles: { $in: roles },\n\t\t\t};\n\n\t\t\tif (scope) {\n\t\t\t\tquery.rid = scope;\n\t\t\t}\n\n\t\t\tconst subscriptions = this.find(query).fetch();\n\n\t\t\tconst users = _.compact(\n\t\t\t\t_.map(subscriptions, function (subscription) {\n\t\t\t\t\tif (typeof subscription.u !== 'undefined' && typeof subscription.u._id !== 'undefined') {\n\t\t\t\t\t\treturn subscription.u._id;\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\treturn Users.find({ _id: { $in: users } }, options);\n\t\t},\n\t\t{ maxAge: 1000, cacheKey: JSON.stringify },\n\t),\n});\n\nexport { Subscriptions };\n","import { Base } from './_Base';\n\nexport class Uploads extends Base {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._initModel('uploads');\n\t}\n}\n\nexport default new Uploads();\n","import { Mongo } from 'meteor/mongo';\n\nexport const UserAndRoom = new Mongo.Collection(null);\n","import { Base } from './_Base';\n\nexport class UserDataFiles extends Base {\n\tconstructor() {\n\t\tsuper();\n\t\tthis._initModel('userDataFiles');\n\t}\n}\n\nexport default new UserDataFiles();\n","import { Mongo } from 'meteor/mongo';\n\nexport const UserRoles = new Mongo.Collection(null);\n","import { Meteor } from 'meteor/meteor';\nimport { Mongo } from 'meteor/mongo';\n\nexport const Users = {\n\tfindOneById(userId, options = {}) {\n\t\tconst query = {\n\t\t\t_id: userId,\n\t\t};\n\n\t\treturn this.findOne(query, options);\n\t},\n\n\tisUserInRole(userId, roleName) {\n\t\tconst user = this.findOneById(userId, { fields: { roles: 1 } });\n\t\treturn user && Array.isArray(user.roles) && user.roles.includes(roleName);\n\t},\n\n\tfindUsersInRoles(roles, scope, options) {\n\t\troles = [].concat(roles);\n\n\t\tconst query = {\n\t\t\troles: { $in: roles },\n\t\t};\n\n\t\treturn this.find(query, options);\n\t},\n};\n\n// overwrite Meteor.users collection so records on it don't get erased whenever the client reconnects to websocket\nMeteor.users = new Mongo.Collection(null);\nMeteor.user = () => Meteor.users.findOne({ _id: Meteor.userId() });\n","import { Mongo } from 'meteor/mongo';\n\nexport const WebdavAccounts = new Mongo.Collection(null);\n","import { check } from 'meteor/check';\nimport { Mongo } from 'meteor/mongo';\n\nexport class Base {\n\t_baseName() {\n\t\treturn 'rocketchat_';\n\t}\n\n\t_initModel(name) {\n\t\tcheck(name, String);\n\t\tthis.model = new Mongo.Collection(this._baseName() + name);\n\t\treturn this.model;\n\t}\n\n\tfind(...args) {\n\t\treturn this.model.find.apply(this.model, args);\n\t}\n\n\tfindOne(...args) {\n\t\treturn this.model.findOne.apply(this.model, args);\n\t}\n\n\tinsert(...args) {\n\t\treturn this.model.insert.apply(this.model, args);\n\t}\n\n\tupdate(...args) {\n\t\treturn this.model.update.apply(this.model, args);\n\t}\n\n\tupsert(...args) {\n\t\treturn this.model.upsert.apply(this.model, args);\n\t}\n\n\tremove(...args) {\n\t\treturn this.model.remove.apply(this.model, args);\n\t}\n\n\tallow(...args) {\n\t\treturn this.model.allow.apply(this.model, args);\n\t}\n\n\tdeny(...args) {\n\t\treturn this.model.deny.apply(this.model, args);\n\t}\n\n\tensureIndex() {}\n\n\tdropIndex() {}\n\n\ttryEnsureIndex() {}\n\n\ttryDropIndex() {}\n}\n","import { Meteor } from 'meteor/meteor';\nimport _ from 'underscore';\n\nimport { Base } from './models/_Base';\nimport Avatars from './models/Avatars';\nimport Uploads from './models/Uploads';\nimport UserDataFiles from './models/UserDataFiles';\nimport { Roles } from './models/Roles';\nimport { Subscriptions as subscriptions } from './models/Subscriptions';\nimport { Users as users } from './models/Users';\nimport { CachedChannelList } from './models/CachedChannelList';\nimport { CachedChatRoom } from './models/CachedChatRoom';\nimport { CachedChatSubscription } from './models/CachedChatSubscription';\nimport { CachedUserList } from './models/CachedUserList';\nimport { ChatRoom } from './models/ChatRoom';\nimport { ChatSubscription } from './models/ChatSubscription';\nimport { ChatMessage } from './models/ChatMessage';\nimport { RoomRoles } from './models/RoomRoles';\nimport { UserAndRoom } from './models/UserAndRoom';\nimport { UserRoles } from './models/UserRoles';\nimport { AuthzCachedCollection, ChatPermissions } from './models/ChatPermissions';\nimport { WebdavAccounts } from './models/WebdavAccounts';\nimport CustomSounds from './models/CustomSounds';\nimport EmojiCustom from './models/EmojiCustom';\n\nconst Users = _.extend({}, users, Meteor.users);\nconst Subscriptions = _.extend({}, subscriptions, ChatSubscription);\nconst Messages = _.extend({}, ChatMessage);\nconst Rooms = _.extend({}, ChatRoom);\n\nexport {\n\tBase,\n\tAvatars,\n\tUploads,\n\tUserDataFiles,\n\tRoles,\n\tSubscriptions,\n\tUsers,\n\tMessages,\n\tCachedChannelList,\n\tCachedChatRoom,\n\tCachedChatSubscription,\n\tCachedUserList,\n\tChatRoom,\n\tRoomRoles,\n\tUserAndRoom,\n\tUserRoles,\n\tAuthzCachedCollection,\n\tChatPermissions,\n\tChatMessage,\n\tChatSubscription,\n\tRooms,\n\tCustomSounds,\n\tEmojiCustom,\n\tWebdavAccounts,\n};\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/index.js');\n}\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/index.js');\n}\n","import './stylesheets/otr.css';\nimport './rocketchat.otr.room';\nimport './rocketchat.otr';\nimport './tabBar';\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\n\nimport { Subscriptions } from '../../models';\nimport { Notifications } from '../../notifications';\nimport { t } from '../../utils';\nimport { onClientMessageReceived } from '../../../client/lib/onClientMessageReceived';\nimport { onClientBeforeSendMessage } from '../../../client/lib/onClientBeforeSendMessage';\n\nclass OTRClass {\n\tconstructor() {\n\t\tthis.enabled = new ReactiveVar(false);\n\t\tthis.instancesByRoomId = {};\n\t\tthis.crypto = null;\n\t}\n\n\tisEnabled() {\n\t\treturn this.enabled.get();\n\t}\n\n\tgetInstanceByRoomId(roomId) {\n\t\tif (!this.enabled.get()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (this.instancesByRoomId[roomId]) {\n\t\t\treturn this.instancesByRoomId[roomId];\n\t\t}\n\n\t\tconst subscription = Subscriptions.findOne({\n\t\t\trid: roomId,\n\t\t});\n\n\t\tif (!subscription || subscription.t !== 'd') {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.instancesByRoomId[roomId] = new OTR.Room(Meteor.userId(), roomId); // eslint-disable-line no-use-before-define\n\t\treturn this.instancesByRoomId[roomId];\n\t}\n}\n\nexport const OTR = new OTRClass();\n\nMeteor.startup(function () {\n\tTracker.autorun(function () {\n\t\tif (Meteor.userId()) {\n\t\t\tNotifications.onUser('otr', (type, data) => {\n\t\t\t\tif (!data.roomId || !data.userId || data.userId === Meteor.userId()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tOTR.getInstanceByRoomId(data.roomId).onUserStream(type, data);\n\t\t\t});\n\t\t}\n\t});\n\n\tonClientBeforeSendMessage.use(function (message) {\n\t\tif (message.rid && OTR.getInstanceByRoomId(message.rid) && OTR.getInstanceByRoomId(message.rid).established.get()) {\n\t\t\treturn OTR.getInstanceByRoomId(message.rid)\n\t\t\t\t.encrypt(message)\n\t\t\t\t.then((msg) => {\n\t\t\t\t\tmessage.msg = msg;\n\t\t\t\t\tmessage.t = 'otr';\n\t\t\t\t\treturn message;\n\t\t\t\t});\n\t\t}\n\t\treturn Promise.resolve(message);\n\t});\n\n\tonClientMessageReceived.use(function (message) {\n\t\tif (message.rid && OTR.getInstanceByRoomId(message.rid) && OTR.getInstanceByRoomId(message.rid).established.get()) {\n\t\t\tif (message.notification) {\n\t\t\t\tmessage.msg = t('Encrypted_message');\n\t\t\t\treturn Promise.resolve(message);\n\t\t\t}\n\t\t\tconst otrRoom = OTR.getInstanceByRoomId(message.rid);\n\t\t\treturn otrRoom.decrypt(message.msg).then((data) => {\n\t\t\t\tconst { _id, text, ack } = data;\n\t\t\t\tmessage._id = _id;\n\t\t\t\tmessage.msg = text;\n\n\t\t\t\tif (data.ts) {\n\t\t\t\t\tmessage.ts = data.ts;\n\t\t\t\t}\n\n\t\t\t\tif (message.otrAck) {\n\t\t\t\t\treturn otrRoom.decrypt(message.otrAck).then((data) => {\n\t\t\t\t\t\tif (ack === data.text) {\n\t\t\t\t\t\t\tmessage.t = 'otr-ack';\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn message;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (data.userId !== Meteor.userId()) {\n\t\t\t\t\treturn otrRoom.encryptText(ack).then((ack) => {\n\t\t\t\t\t\tMeteor.call('updateOTRAck', message._id, ack);\n\t\t\t\t\t\treturn message;\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\treturn message;\n\t\t\t});\n\t\t}\n\t\tif (message.t === 'otr') {\n\t\t\tmessage.msg = '';\n\t\t}\n\t\treturn Promise.resolve(message);\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Random } from 'meteor/random';\nimport { EJSON } from 'meteor/ejson';\nimport { Tracker } from 'meteor/tracker';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { TimeSync } from 'meteor/mizzao:timesync';\nimport _ from 'underscore';\n\nimport { OTR } from './rocketchat.otr';\nimport { Notifications } from '../../notifications';\nimport { getUidDirectMessage } from '../../../client/lib/utils/getUidDirectMessage';\nimport { Presence } from '../../../client/lib/presence';\nimport { goToRoomById } from '../../../client/lib/utils/goToRoomById';\nimport { imperativeModal } from '../../../client/lib/imperativeModal';\nimport GenericModal from '../../../client/components/GenericModal';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\n\nOTR.Room = class {\n\tconstructor(userId, roomId) {\n\t\tthis.userId = userId;\n\t\tthis.roomId = roomId;\n\t\tthis.peerId = getUidDirectMessage(roomId);\n\t\tthis.established = new ReactiveVar(false);\n\t\tthis.establishing = new ReactiveVar(false);\n\n\t\tthis.userOnlineComputation = null;\n\n\t\tthis.keyPair = null;\n\t\tthis.exportedPublicKey = null;\n\t\tthis.sessionKey = null;\n\t}\n\n\thandshake(refresh) {\n\t\tthis.establishing.set(true);\n\t\tthis.firstPeer = true;\n\t\tthis.generateKeyPair().then(() => {\n\t\t\tNotifications.notifyUser(this.peerId, 'otr', 'handshake', {\n\t\t\t\troomId: this.roomId,\n\t\t\t\tuserId: this.userId,\n\t\t\t\tpublicKey: EJSON.stringify(this.exportedPublicKey),\n\t\t\t\trefresh,\n\t\t\t});\n\t\t});\n\t}\n\n\tacknowledge() {\n\t\tNotifications.notifyUser(this.peerId, 'otr', 'acknowledge', {\n\t\t\troomId: this.roomId,\n\t\t\tuserId: this.userId,\n\t\t\tpublicKey: EJSON.stringify(this.exportedPublicKey),\n\t\t});\n\t}\n\n\tdeny() {\n\t\tthis.reset();\n\t\tNotifications.notifyUser(this.peerId, 'otr', 'deny', {\n\t\t\troomId: this.roomId,\n\t\t\tuserId: this.userId,\n\t\t});\n\t}\n\n\tend() {\n\t\tthis.reset();\n\t\tNotifications.notifyUser(this.peerId, 'otr', 'end', {\n\t\t\troomId: this.roomId,\n\t\t\tuserId: this.userId,\n\t\t});\n\t}\n\n\treset() {\n\t\tthis.establishing.set(false);\n\t\tthis.established.set(false);\n\t\tthis.keyPair = null;\n\t\tthis.exportedPublicKey = null;\n\t\tthis.sessionKey = null;\n\t\tMeteor.call('deleteOldOTRMessages', this.roomId);\n\t}\n\n\tgenerateKeyPair() {\n\t\tif (this.userOnlineComputation) {\n\t\t\tthis.userOnlineComputation.stop();\n\t\t}\n\n\t\tthis.userOnlineComputation = Tracker.autorun(() => {\n\t\t\tconst $room = $(`#chat-window-${this.roomId}`);\n\t\t\tconst $title = $('.rc-header__title', $room);\n\t\t\tif (this.established.get()) {\n\t\t\t\tif ($room.length && $title.length && !$('.otr-icon', $title).length) {\n\t\t\t\t\t$title.prepend(\"<i class='otr-icon icon-key'></i>\");\n\t\t\t\t}\n\t\t\t} else if ($title.length) {\n\t\t\t\t$('.otr-icon', $title).remove();\n\t\t\t}\n\t\t});\n\n\t\t// Generate an ephemeral key pair.\n\t\treturn OTR.crypto\n\t\t\t.generateKey(\n\t\t\t\t{\n\t\t\t\t\tname: 'ECDH',\n\t\t\t\t\tnamedCurve: 'P-256',\n\t\t\t\t},\n\t\t\t\tfalse,\n\t\t\t\t['deriveKey', 'deriveBits'],\n\t\t\t)\n\t\t\t.then((keyPair) => {\n\t\t\t\tthis.keyPair = keyPair;\n\t\t\t\treturn OTR.crypto.exportKey('jwk', keyPair.publicKey);\n\t\t\t})\n\t\t\t.then((exportedPublicKey) => {\n\t\t\t\tthis.exportedPublicKey = exportedPublicKey;\n\n\t\t\t\t// Once we have generated new keys, it's safe to delete old messages\n\t\t\t\tMeteor.call('deleteOldOTRMessages', this.roomId);\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: e });\n\t\t\t});\n\t}\n\n\timportPublicKey(publicKey) {\n\t\treturn OTR.crypto\n\t\t\t.importKey(\n\t\t\t\t'jwk',\n\t\t\t\tEJSON.parse(publicKey),\n\t\t\t\t{\n\t\t\t\t\tname: 'ECDH',\n\t\t\t\t\tnamedCurve: 'P-256',\n\t\t\t\t},\n\t\t\t\tfalse,\n\t\t\t\t[],\n\t\t\t)\n\t\t\t.then((peerPublicKey) =>\n\t\t\t\tOTR.crypto.deriveBits(\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'ECDH',\n\t\t\t\t\t\tnamedCurve: 'P-256',\n\t\t\t\t\t\tpublic: peerPublicKey,\n\t\t\t\t\t},\n\t\t\t\t\tthis.keyPair.privateKey,\n\t\t\t\t\t256,\n\t\t\t\t),\n\t\t\t)\n\t\t\t.then((bits) =>\n\t\t\t\tOTR.crypto.digest(\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'SHA-256',\n\t\t\t\t\t},\n\t\t\t\t\tbits,\n\t\t\t\t),\n\t\t\t)\n\t\t\t.then((hashedBits) => {\n\t\t\t\t// We truncate the hash to 128 bits.\n\t\t\t\tconst sessionKeyData = new Uint8Array(hashedBits).slice(0, 16);\n\t\t\t\treturn OTR.crypto.importKey(\n\t\t\t\t\t'raw',\n\t\t\t\t\tsessionKeyData,\n\t\t\t\t\t{\n\t\t\t\t\t\tname: 'AES-GCM',\n\t\t\t\t\t},\n\t\t\t\t\tfalse,\n\t\t\t\t\t['encrypt', 'decrypt'],\n\t\t\t\t);\n\t\t\t})\n\t\t\t.then((sessionKey) => {\n\t\t\t\t// Session key available.\n\t\t\t\tthis.sessionKey = sessionKey;\n\t\t\t});\n\t}\n\n\tencryptText(data) {\n\t\tif (!_.isObject(data)) {\n\t\t\tdata = new TextEncoder('UTF-8').encode(EJSON.stringify({ text: data, ack: Random.id((Random.fraction() + 1) * 20) }));\n\t\t}\n\t\tconst iv = crypto.getRandomValues(new Uint8Array(12));\n\n\t\treturn OTR.crypto\n\t\t\t.encrypt(\n\t\t\t\t{\n\t\t\t\t\tname: 'AES-GCM',\n\t\t\t\t\tiv,\n\t\t\t\t},\n\t\t\t\tthis.sessionKey,\n\t\t\t\tdata,\n\t\t\t)\n\t\t\t.then((cipherText) => {\n\t\t\t\tcipherText = new Uint8Array(cipherText);\n\t\t\t\tconst output = new Uint8Array(iv.length + cipherText.length);\n\t\t\t\toutput.set(iv, 0);\n\t\t\t\toutput.set(cipherText, iv.length);\n\t\t\t\treturn EJSON.stringify(output);\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tthrow new Meteor.Error('encryption-error', 'Encryption error.');\n\t\t\t});\n\t}\n\n\tencrypt(message) {\n\t\tlet ts;\n\t\tif (isNaN(TimeSync.serverOffset())) {\n\t\t\tts = new Date();\n\t\t} else {\n\t\t\tts = new Date(Date.now() + TimeSync.serverOffset());\n\t\t}\n\n\t\tconst data = new TextEncoder('UTF-8').encode(\n\t\t\tEJSON.stringify({\n\t\t\t\t_id: message._id,\n\t\t\t\ttext: message.msg,\n\t\t\t\tuserId: this.userId,\n\t\t\t\tack: Random.id((Random.fraction() + 1) * 20),\n\t\t\t\tts,\n\t\t\t}),\n\t\t);\n\t\tconst enc = this.encryptText(data);\n\t\treturn enc;\n\t}\n\n\tdecrypt(message) {\n\t\tlet cipherText = EJSON.parse(message);\n\t\tconst iv = cipherText.slice(0, 12);\n\t\tcipherText = cipherText.slice(12);\n\n\t\treturn OTR.crypto\n\t\t\t.decrypt(\n\t\t\t\t{\n\t\t\t\t\tname: 'AES-GCM',\n\t\t\t\t\tiv,\n\t\t\t\t},\n\t\t\t\tthis.sessionKey,\n\t\t\t\tcipherText,\n\t\t\t)\n\t\t\t.then((data) => {\n\t\t\t\tdata = EJSON.parse(new TextDecoder('UTF-8').decode(new Uint8Array(data)));\n\t\t\t\treturn data;\n\t\t\t})\n\t\t\t.catch((e) => {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: e });\n\t\t\t\treturn message;\n\t\t\t});\n\t}\n\n\tonUserStream(type, data) {\n\t\tswitch (type) {\n\t\t\tcase 'handshake':\n\t\t\t\tlet timeout = null;\n\n\t\t\t\tconst establishConnection = () => {\n\t\t\t\t\tthis.establishing.set(true);\n\t\t\t\t\tMeteor.clearTimeout(timeout);\n\t\t\t\t\tthis.generateKeyPair().then(() => {\n\t\t\t\t\t\tthis.importPublicKey(data.publicKey).then(() => {\n\t\t\t\t\t\t\tthis.firstPeer = false;\n\t\t\t\t\t\t\tgoToRoomById(data.roomId);\n\t\t\t\t\t\t\tMeteor.defer(() => {\n\t\t\t\t\t\t\t\tthis.established.set(true);\n\t\t\t\t\t\t\t\tthis.acknowledge();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\t\t\t\t};\n\n\t\t\t\t(async () => {\n\t\t\t\t\tconst { username } = await Presence.get(data.userId);\n\t\t\t\t\tif (data.refresh && this.established.get()) {\n\t\t\t\t\t\tthis.reset();\n\t\t\t\t\t\testablishConnection();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (this.established.get()) {\n\t\t\t\t\t\t\tthis.reset();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\timperativeModal.open({\n\t\t\t\t\t\t\tcomponent: GenericModal,\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tvariant: 'warning',\n\t\t\t\t\t\t\t\ttitle: TAPi18n.__('OTR'),\n\t\t\t\t\t\t\t\tchildren: TAPi18n.__('Username_wants_to_start_otr_Do_you_want_to_accept', {\n\t\t\t\t\t\t\t\t\tusername,\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tconfirmText: TAPi18n.__('Yes'),\n\t\t\t\t\t\t\t\tcancelText: TAPi18n.__('No'),\n\t\t\t\t\t\t\t\tonClose: () => imperativeModal.close,\n\t\t\t\t\t\t\t\tonCancel: () => {\n\t\t\t\t\t\t\t\t\tMeteor.clearTimeout(timeout);\n\t\t\t\t\t\t\t\t\tthis.deny();\n\t\t\t\t\t\t\t\t\timperativeModal.close();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tonConfirm: () => {\n\t\t\t\t\t\t\t\t\testablishConnection();\n\t\t\t\t\t\t\t\t\timperativeModal.close();\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\ttimeout = Meteor.setTimeout(() => {\n\t\t\t\t\t\tthis.establishing.set(false);\n\t\t\t\t\t\timperativeModal.close();\n\t\t\t\t\t}, 10000);\n\t\t\t\t})();\n\t\t\t\tbreak;\n\n\t\t\tcase 'acknowledge':\n\t\t\t\tthis.importPublicKey(data.publicKey).then(() => {\n\t\t\t\t\tthis.established.set(true);\n\t\t\t\t});\n\t\t\t\tbreak;\n\n\t\t\tcase 'deny':\n\t\t\t\t(async () => {\n\t\t\t\t\tconst { username } = await Presence.get(this.peerId);\n\t\t\t\t\tif (this.establishing.get()) {\n\t\t\t\t\t\tthis.reset();\n\t\t\t\t\t\timperativeModal.open({\n\t\t\t\t\t\t\tcomponent: GenericModal,\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tvariant: 'warning',\n\t\t\t\t\t\t\t\ttitle: TAPi18n.__('OTR'),\n\t\t\t\t\t\t\t\tchildren: TAPi18n.__('Username_denied_the_OTR_session', { username }),\n\t\t\t\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t\t\t\t\tonConfirm: imperativeModal.close,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})();\n\t\t\t\tbreak;\n\n\t\t\tcase 'end':\n\t\t\t\t(async () => {\n\t\t\t\t\tconst { username } = await Presence.get(this.peerId);\n\n\t\t\t\t\tif (this.established.get()) {\n\t\t\t\t\t\tthis.reset();\n\t\t\t\t\t\timperativeModal.open({\n\t\t\t\t\t\t\tcomponent: GenericModal,\n\t\t\t\t\t\t\tprops: {\n\t\t\t\t\t\t\t\tvariant: 'warning',\n\t\t\t\t\t\t\t\ttitle: TAPi18n.__('OTR'),\n\t\t\t\t\t\t\t\tchildren: TAPi18n.__('Username_ended_the_OTR_session', { username }),\n\t\t\t\t\t\t\t\tconfirmText: TAPi18n.__('Ok'),\n\t\t\t\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t\t\t\t\tonConfirm: imperativeModal.close,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t})();\n\t\t\t\tbreak;\n\t\t}\n\t}\n};\n","import { useMemo, lazy, useEffect } from 'react';\n\nimport { OTR } from './rocketchat.otr';\nimport { useSetting } from '../../../client/contexts/SettingsContext';\nimport { addAction } from '../../../client/views/room/lib/Toolbox';\n\nconst template = lazy(() => import('../../../client/views/room/contextualBar/OTR'));\n\naddAction('otr', () => {\n\tconst enabled = useSetting('OTR_Enable');\n\n\tconst shouldAddAction = enabled && window.crypto;\n\n\tuseEffect(() => {\n\t\tif (shouldAddAction) {\n\t\t\tOTR.crypto = window.crypto.subtle;\n\t\t\tOTR.enabled.set(true);\n\t\t} else {\n\t\t\tOTR.enabled.set(false);\n\t\t}\n\t}, [shouldAddAction]);\n\n\treturn useMemo(\n\t\t() =>\n\t\t\tshouldAddAction\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['direct'],\n\t\t\t\t\t\tid: 'otr',\n\t\t\t\t\t\ttitle: 'OTR',\n\t\t\t\t\t\ticon: 'shredder',\n\t\t\t\t\t\ttemplate,\n\t\t\t\t\t\torder: 13,\n\t\t\t\t\t\tfull: true,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[shouldAddAction],\n\t);\n});\n","import { Meteor } from 'meteor/meteor';\nimport _ from 'underscore';\n\nimport { Messages, Rooms, Subscriptions } from '../../../models';\nimport { callbacks } from '../../../../lib/callbacks';\nimport { emoji } from '../../../emoji';\nimport { roomTypes } from '../../../utils/client';\n\nMeteor.methods({\n\tsetReaction(reaction, messageId) {\n\t\tif (!Meteor.userId()) {\n\t\t\tthrow new Meteor.Error(203, 'User_logged_out');\n\t\t}\n\n\t\tconst user = Meteor.user();\n\n\t\tconst message = Messages.findOne({ _id: messageId });\n\t\tconst room = Rooms.findOne({ _id: message.rid });\n\n\t\tif (message.private) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!emoji.list[reaction]) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (roomTypes.readOnly(room._id, user._id)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!Subscriptions.findOne({ rid: message.rid })) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (message.reactions && message.reactions[reaction] && message.reactions[reaction].usernames.indexOf(user.username) !== -1) {\n\t\t\tmessage.reactions[reaction].usernames.splice(message.reactions[reaction].usernames.indexOf(user.username), 1);\n\n\t\t\tif (message.reactions[reaction].usernames.length === 0) {\n\t\t\t\tdelete message.reactions[reaction];\n\t\t\t}\n\n\t\t\tif (_.isEmpty(message.reactions)) {\n\t\t\t\tdelete message.reactions;\n\t\t\t\tMessages.unsetReactions(messageId);\n\t\t\t\tcallbacks.run('unsetReaction', messageId, reaction);\n\t\t\t} else {\n\t\t\t\tMessages.setReactions(messageId, message.reactions);\n\t\t\t\tcallbacks.run('setReaction', messageId, reaction);\n\t\t\t}\n\t\t} else {\n\t\t\tif (!message.reactions) {\n\t\t\t\tmessage.reactions = {};\n\t\t\t}\n\t\t\tif (!message.reactions[reaction]) {\n\t\t\t\tmessage.reactions[reaction] = {\n\t\t\t\t\tusernames: [],\n\t\t\t\t};\n\t\t\t}\n\t\t\tmessage.reactions[reaction].usernames.push(user.username);\n\n\t\t\tMessages.setReactions(messageId, message.reactions);\n\t\t\tcallbacks.run('setReaction', messageId, reaction);\n\t\t}\n\t},\n});\n","import './init';\nimport './methods/setReaction';\nimport './stylesheets/reaction.css';\n","import { Meteor } from 'meteor/meteor';\nimport { Blaze } from 'meteor/blaze';\n\nimport { roomTypes } from '../../utils/client';\nimport { Rooms, Subscriptions } from '../../models';\nimport { MessageAction } from '../../ui-utils';\nimport { messageArgs } from '../../ui-utils/client/lib/messageArgs';\nimport { EmojiPicker } from '../../emoji';\nimport { tooltip } from '../../ui/client/components/tooltip';\n\nexport const EmojiEvents = {\n\t'click .add-reaction'(event) {\n\t\tevent.preventDefault();\n\t\tevent.stopPropagation();\n\t\tconst data = Blaze.getData(event.currentTarget);\n\t\tconst {\n\t\t\tmsg: { rid, _id: mid, private: isPrivate },\n\t\t} = messageArgs(data);\n\t\tconst user = Meteor.user();\n\t\tconst room = Rooms.findOne({ _id: rid });\n\n\t\tif (!room) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!Subscriptions.findOne({ rid })) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (isPrivate) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (roomTypes.readOnly(room._id, user._id) && !room.reactWhenReadOnly) {\n\t\t\treturn false;\n\t\t}\n\n\t\tEmojiPicker.open(event.currentTarget, (emoji) => {\n\t\t\tMeteor.call('setReaction', `:${emoji}:`, mid);\n\t\t});\n\t},\n\n\t'click .reactions > li:not(.add-reaction)'(event) {\n\t\tevent.preventDefault();\n\n\t\tconst data = Blaze.getData(event.currentTarget);\n\t\tconst {\n\t\t\tmsg: { _id: mid },\n\t\t} = messageArgs(data);\n\t\tMeteor.call('setReaction', $(event.currentTarget).attr('data-emoji'), mid, () => {\n\t\t\ttooltip.hide();\n\t\t});\n\t},\n\n\t'mouseenter .reactions > li:not(.add-reaction)'(event) {\n\t\tevent.stopPropagation();\n\t\ttooltip.showElement($(event.currentTarget).find('.people').get(0), event.currentTarget);\n\t},\n\n\t'mouseleave .reactions > li:not(.add-reaction)'(event) {\n\t\tevent.stopPropagation();\n\t\ttooltip.hide();\n\t},\n};\n\nMeteor.startup(function () {\n\tMessageAction.addButton({\n\t\tid: 'reaction-message',\n\t\ticon: 'add-reaction',\n\t\tlabel: 'Add_Reaction',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\taction(event) {\n\t\t\tevent.stopPropagation();\n\t\t\tconst { msg } = messageArgs(this);\n\t\t\tEmojiPicker.open(event.currentTarget, (emoji) => Meteor.call('setReaction', `:${emoji}:`, msg._id));\n\t\t},\n\t\tcondition({ msg: message, u: user, room, subscription }) {\n\t\t\tif (!room) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (!subscription) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (message.private) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\tif (roomTypes.readOnly(room._id, user._id) && !room.reactWhenReadOnly) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tconst isLivechatRoom = roomTypes.isLivechatRoom(room.t);\n\t\t\tif (isLivechatRoom) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn true;\n\t\t},\n\t\torder: -2,\n\t\tgroup: ['message', 'menu'],\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { check } from 'meteor/check';\nimport { Mongo } from 'meteor/mongo';\nimport { Accounts } from 'meteor/accounts-base';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport localforage from 'localforage';\nimport _ from 'underscore';\nimport { Emitter } from '@rocket.chat/emitter';\n\nimport { callbacks } from '../../../../lib/callbacks';\nimport Notifications from '../../../notifications/client/lib/Notifications';\nimport { getConfig } from '../../../../client/lib/utils/getConfig';\nimport { call } from '../../../../client/lib/utils/call';\n\nconst wrap =\n\t(fn) =>\n\t(...args) =>\n\t\tnew Promise((resolve, reject) => {\n\t\t\tfn(...args, (err, result) => {\n\t\t\t\tif (err) {\n\t\t\t\t\treturn reject(err);\n\t\t\t\t}\n\t\t\t\treturn resolve(result);\n\t\t\t});\n\t\t});\n\nconst localforageGetItem = wrap(localforage.getItem);\n\nclass CachedCollectionManagerClass extends Emitter {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.items = [];\n\t\tthis._syncEnabled = false;\n\t\tthis.logged = false;\n\n\t\tconst { _unstoreLoginToken } = Accounts;\n\t\tAccounts._unstoreLoginToken = (...args) => {\n\t\t\t_unstoreLoginToken.apply(Accounts, args);\n\t\t\tthis.clearAllCacheOnLogout();\n\t\t};\n\n\t\t// Wait 1s to start or the code will run before the connection and\n\t\t// on first connection the `reconnect` callbacks will run\n\n\t\tTracker.autorun(() => {\n\t\t\tconst [WAITING_FIRST_CONNECTION, WAITING_FIRST_DISCONNECTION, LISTENING_RECONNECTIONS] = [0, 1, 2];\n\t\t\tthis.step = this.step || WAITING_FIRST_CONNECTION;\n\t\t\tconst { connected } = Meteor.status();\n\t\t\tswitch (this.step) {\n\t\t\t\tcase WAITING_FIRST_CONNECTION:\n\t\t\t\t\treturn !connected || this.step++;\n\t\t\t\tcase WAITING_FIRST_DISCONNECTION:\n\t\t\t\t\treturn connected || this.step++;\n\t\t\t\tcase LISTENING_RECONNECTIONS:\n\t\t\t\t\treturn connected && this.emit('reconnect');\n\t\t\t}\n\t\t});\n\n\t\tTracker.autorun(() => {\n\t\t\tconst uid = Meteor.userId();\n\t\t\tthis.logged = uid !== null;\n\t\t\tif (this.logged) {\n\t\t\t\tthis.emit('login', uid);\n\t\t\t}\n\t\t});\n\t}\n\n\tregister(cachedCollection) {\n\t\tthis.items.push(cachedCollection);\n\t}\n\n\tclearAllCache() {\n\t\tfor (const item of this.items) {\n\t\t\titem.clearCache();\n\t\t}\n\t}\n\n\tclearAllCacheOnLogout() {\n\t\tfor (const item of this.items) {\n\t\t\titem.clearCacheOnLogout();\n\t\t}\n\t}\n\n\tcountQueries() {\n\t\tfor (const item of this.items) {\n\t\t\titem.countQueries();\n\t\t}\n\t}\n\n\tset syncEnabled(value) {\n\t\tcheck(value, Boolean);\n\t\tthis._syncEnabled = value;\n\t}\n\n\tget syncEnabled() {\n\t\treturn this._syncEnabled;\n\t}\n\n\tonReconnect(cb) {\n\t\tthis.on('reconnect', cb);\n\t}\n\n\tonLogin(cb) {\n\t\tthis.on('login', cb);\n\t\tif (this.logged) {\n\t\t\tcb();\n\t\t}\n\t}\n}\n\nexport const CachedCollectionManager = new CachedCollectionManagerClass();\n\nconst debug = (name) =>\n\t[getConfig(`debugCachedCollection-${name}`), getConfig('debugCachedCollection'), getConfig('debug')].includes('true');\n\nconst nullLog = function () {};\n\nconst log = (...args) => console.log(`CachedCollection ${this.name} =>`, ...args);\n\nexport class CachedCollection extends Emitter {\n\tconstructor({\n\t\tcollection = new Mongo.Collection(null),\n\t\tname,\n\t\tmethodName = `${name}/get`,\n\t\tsyncMethodName = `${name}/get`,\n\t\teventName = `${name}-changed`,\n\t\teventType = 'onUser',\n\t\tuserRelated = true,\n\t\tlistenChangesForLoggedUsersOnly = false,\n\t\tuseSync = true,\n\t\tversion = 16,\n\t\tmaxCacheTime = 60 * 60 * 24 * 30,\n\t\tonSyncData = (/* action, record */) => {},\n\t}) {\n\t\tsuper();\n\t\tthis.collection = collection;\n\n\t\tthis.ready = new ReactiveVar(false);\n\t\tthis.name = name;\n\t\tthis.methodName = methodName;\n\t\tthis.syncMethodName = syncMethodName;\n\t\tthis.eventName = eventName;\n\t\tthis.eventType = eventType;\n\t\tthis.useSync = useSync;\n\t\tthis.listenChangesForLoggedUsersOnly = listenChangesForLoggedUsersOnly;\n\t\tthis.version = version;\n\t\tthis.userRelated = userRelated;\n\t\tthis.updatedAt = new Date(0);\n\t\tthis.maxCacheTime = maxCacheTime;\n\t\tthis.onSyncData = onSyncData;\n\t\tthis.log = debug(name) ? log : nullLog;\n\n\t\tCachedCollectionManager.register(this);\n\t\tif (!userRelated) {\n\t\t\tthis.init();\n\t\t\treturn;\n\t\t}\n\t\tCachedCollectionManager.onLogin(() => {\n\t\t\tthis.init();\n\t\t});\n\t}\n\n\tcountQueries() {\n\t\tthis.log(`${Object.keys(this.collection._collection.queries).length} queries`);\n\t}\n\n\tgetToken() {\n\t\tif (this.userRelated === false) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn Accounts._storedLoginToken();\n\t}\n\n\tasync loadFromCache() {\n\t\tconst data = await localforageGetItem(this.name);\n\t\tif (!data) {\n\t\t\treturn false;\n\t\t}\n\t\tif (data.version < this.version || data.token !== this.getToken()) {\n\t\t\treturn false;\n\t\t}\n\t\tif (data.records.length <= 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (new Date() - data.updatedAt >= 1000 * this.maxCacheTime) {\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.log(`${data.records.length} records loaded from cache`);\n\n\t\tdata.records.forEach((record) => {\n\t\t\tcallbacks.run(`cachedCollection-loadFromCache-${this.name}`, record);\n\t\t\t// this.collection.direct.insert(record);\n\n\t\t\tif (!record._updatedAt) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst _updatedAt = new Date(record._updatedAt);\n\t\t\trecord._updatedAt = _updatedAt;\n\n\t\t\tif (record.lastMessage && typeof record.lastMessage._updatedAt === 'string') {\n\t\t\t\trecord.lastMessage._updatedAt = new Date(record.lastMessage._updatedAt);\n\t\t\t}\n\n\t\t\tif (_updatedAt > this.updatedAt) {\n\t\t\t\tthis.updatedAt = _updatedAt;\n\t\t\t}\n\t\t});\n\n\t\tthis.collection._collection._docs._map = new Map(data.records.map((record) => [record._id, record]));\n\n\t\tthis.updatedAt = data.updatedAt || this.updatedAt;\n\n\t\tObject.values(this.collection._collection.queries).forEach((query) => this.collection._collection._recomputeResults(query));\n\n\t\treturn true;\n\t}\n\n\tasync loadFromServer() {\n\t\tconst startTime = new Date();\n\t\tconst lastTime = this.updatedAt;\n\t\tconst data = await call(this.methodName);\n\t\tthis.log(`${data.length} records loaded from server`);\n\t\tdata.forEach((record) => {\n\t\t\tcallbacks.run(`cachedCollection-loadFromServer-${this.name}`, record, 'changed');\n\n\t\t\tthis.collection.direct.upsert({ _id: record._id }, _.omit(record, '_id'));\n\n\t\t\tthis.onSyncData('changed', record);\n\n\t\t\tif (record._updatedAt && record._updatedAt > this.updatedAt) {\n\t\t\t\tthis.updatedAt = record._updatedAt;\n\t\t\t}\n\t\t});\n\t\tthis.updatedAt = this.updatedAt === lastTime ? startTime : this.updatedAt;\n\t}\n\n\tasync loadFromServerAndPopulate() {\n\t\tawait this.loadFromServer();\n\t\tthis.save();\n\t}\n\n\tsave = _.debounce(() => {\n\t\tthis.log('saving cache');\n\t\tconst data = this.collection.find().fetch();\n\t\tlocalforage.setItem(this.name, {\n\t\t\tupdatedAt: this.updatedAt,\n\t\t\tversion: this.version,\n\t\t\ttoken: this.getToken(),\n\t\t\trecords: data,\n\t\t});\n\t\tthis.log('saving cache (done)');\n\t}, 1000);\n\n\tclearCacheOnLogout() {\n\t\tif (this.userRelated === true) {\n\t\t\tthis.clearCache();\n\t\t}\n\t}\n\n\tclearCache() {\n\t\tthis.log('clearing cache');\n\t\tlocalforage.removeItem(this.name);\n\t\tthis.collection.remove({});\n\t}\n\n\tremoveRoomFromCacheWhenUserLeaves(roomId, ChatRoom, CachedChatRoom) {\n\t\tChatRoom.remove(roomId);\n\t\tCachedChatRoom.save();\n\t}\n\n\tasync setupListener(eventType, eventName) {\n\t\tconst { RoomManager } = await import('../../../ui-utils');\n\t\tconst { ChatRoom, CachedChatRoom } = await import('../../../models');\n\t\tNotifications[eventType || this.eventType](eventName || this.eventName, (t, record) => {\n\t\t\tthis.log('record received', t, record);\n\t\t\tcallbacks.run(`cachedCollection-received-${this.name}`, record, t);\n\t\t\tif (t === 'removed') {\n\t\t\t\tlet room;\n\t\t\t\tif (this.eventName === 'subscriptions-changed') {\n\t\t\t\t\troom = ChatRoom.findOne(record.rid);\n\t\t\t\t\tif (room) {\n\t\t\t\t\t\tthis.removeRoomFromCacheWhenUserLeaves(room._id, ChatRoom, CachedChatRoom);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\troom = this.collection.findOne({\n\t\t\t\t\t\t_id: record._id,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tif (room) {\n\t\t\t\t\troom.name && RoomManager.close(room.t + room.name);\n\t\t\t\t\t!room.name && RoomManager.close(room.t + room._id);\n\t\t\t\t}\n\t\t\t\tthis.collection.remove(record._id);\n\t\t\t} else {\n\t\t\t\tconst { _id, ...recordData } = record;\n\t\t\t\tthis.collection.direct.upsert({ _id }, recordData);\n\t\t\t}\n\t\t\tthis.save();\n\t\t});\n\t}\n\n\ttrySync(delay = 10) {\n\t\tclearTimeout(this.tm);\n\t\t// Wait for an empty queue to load data again and sync\n\t\tthis.tm = setTimeout(async () => {\n\t\t\tif (!(await this.sync())) {\n\t\t\t\treturn this.trySync(delay);\n\t\t\t}\n\t\t\tthis.save();\n\t\t}, delay);\n\t}\n\n\tasync sync() {\n\t\tif (!this.updatedAt || this.updatedAt.valueOf() === 0 || Meteor.connection._outstandingMethodBlocks.length !== 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst startTime = new Date();\n\t\tconst lastTime = this.updatedAt;\n\n\t\tthis.log(`syncing from ${this.updatedAt}`);\n\n\t\tconst data = await call(this.syncMethodName, this.updatedAt);\n\t\tlet changes = [];\n\n\t\tif (data.update && data.update.length > 0) {\n\t\t\tthis.log(`${data.update.length} records updated in sync`);\n\t\t\tchanges.push(...data.update);\n\t\t}\n\n\t\tif (data.remove && data.remove.length > 0) {\n\t\t\tthis.log(`${data.remove.length} records removed in sync`);\n\t\t\tchanges.push(...data.remove);\n\t\t}\n\n\t\tchanges = changes.sort((a, b) => {\n\t\t\tconst valueA = a._updatedAt || a._deletedAt;\n\t\t\tconst valueB = b._updatedAt || b._deletedAt;\n\n\t\t\tif (valueA < valueB) {\n\t\t\t\treturn -1;\n\t\t\t}\n\n\t\t\tif (valueA > valueB) {\n\t\t\t\treturn 1;\n\t\t\t}\n\n\t\t\treturn 0;\n\t\t});\n\n\t\tfor (const record of changes) {\n\t\t\tconst action = record._deletedAt ? 'removed' : 'changed';\n\t\t\tcallbacks.run(`cachedCollection-sync-${this.name}`, record, action);\n\t\t\tconst actionTime = record._deletedAt || record._updatedAt;\n\t\t\tconst { _id, ...recordData } = record;\n\t\t\tif (record._deletedAt) {\n\t\t\t\tthis.collection.direct.remove({ _id });\n\t\t\t} else {\n\t\t\t\tthis.collection.direct.upsert({ _id }, recordData);\n\t\t\t}\n\t\t\tif (actionTime > this.updatedAt) {\n\t\t\t\tthis.updatedAt = actionTime;\n\t\t\t}\n\t\t\tthis.onSyncData(action, record);\n\t\t}\n\t\tthis.updatedAt = this.updatedAt === lastTime ? startTime : this.updatedAt;\n\n\t\treturn true;\n\t}\n\n\tasync init() {\n\t\tthis.ready.set(false);\n\n\t\tif (await this.loadFromCache()) {\n\t\t\tthis.trySync();\n\t\t} else {\n\t\t\tawait this.loadFromServerAndPopulate();\n\t\t}\n\n\t\tthis.ready.set(true);\n\n\t\tCachedCollectionManager.onReconnect(() => {\n\t\t\tthis.trySync();\n\t\t});\n\n\t\tif (!this.userRelated) {\n\t\t\treturn this.setupListener();\n\t\t}\n\n\t\tCachedCollectionManager.onLogin(async () => {\n\t\t\tthis.setupListener();\n\t\t});\n\t}\n}\n","export { CachedCollection, CachedCollectionManager } from './models/CachedCollection';\n","export * from './client/index';\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\n\nimport '../../crowd/client/index';\nimport { reportError } from '../../../client/lib/2fa/utils';\nimport { overrideLoginMethod } from '../../../client/lib/2fa/overrideLoginMethod';\n\nMeteor.loginWithCrowdAndTOTP = function (username, password, code, callback) {\n\tconst loginRequest = {\n\t\tcrowd: true,\n\t\tusername,\n\t\tcrowdPassword: password,\n\t};\n\n\tAccounts.callLoginMethod({\n\t\tmethodArguments: [\n\t\t\t{\n\t\t\t\ttotp: {\n\t\t\t\t\tlogin: loginRequest,\n\t\t\t\t\tcode,\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tuserCallback(error) {\n\t\t\tif (error) {\n\t\t\t\treportError(error, callback);\n\t\t\t} else {\n\t\t\t\tcallback && callback();\n\t\t\t}\n\t\t},\n\t});\n};\n\nconst { loginWithCrowd } = Meteor;\n\nMeteor.loginWithCrowd = function (username, password, callback) {\n\toverrideLoginMethod(loginWithCrowd, [username, password], callback, Meteor.loginWithCrowdAndTOTP);\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\nimport { Google } from 'meteor/google-oauth';\nimport _ from 'underscore';\n\nimport { overrideLoginMethod } from '../../../client/lib/2fa/overrideLoginMethod';\n\nconst loginWithGoogleAndTOTP = function (options, code, callback) {\n\t// support a callback without options\n\tif (!callback && typeof options === 'function') {\n\t\tcallback = options;\n\t\toptions = null;\n\t}\n\n\tif (Meteor.isCordova && Google.signIn) {\n\t\t// After 20 April 2017, Google OAuth login will no longer work from\n\t\t// a WebView, so Cordova apps must use Google Sign-In instead.\n\t\t// https://github.com/meteor/meteor/issues/8253\n\t\tGoogle.signIn(options, callback);\n\t\treturn;\n\t} // Use Google's domain-specific login page if we want to restrict creation to\n\t// a particular email domain. (Don't use it if restrictCreationByEmailDomain\n\t// is a function.) Note that all this does is change Google's UI ---\n\t// accounts-base/accounts_server.js still checks server-side that the server\n\t// has the proper email address after the OAuth conversation.\n\n\tif (typeof Accounts._options.restrictCreationByEmailDomain === 'string') {\n\t\toptions = _.extend({}, options || {});\n\t\toptions.loginUrlParameters = _.extend({}, options.loginUrlParameters || {});\n\t\toptions.loginUrlParameters.hd = Accounts._options.restrictCreationByEmailDomain;\n\t}\n\n\tconst credentialRequestCompleteCallback = Accounts.oauth.credentialRequestCompleteHandler(callback, code);\n\tGoogle.requestCredential(options, credentialRequestCompleteCallback);\n};\n\nconst { loginWithGoogle } = Meteor;\nMeteor.loginWithGoogle = function (options, cb) {\n\toverrideLoginMethod(loginWithGoogle, [options], cb, loginWithGoogleAndTOTP);\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\n\nimport '../../../client/startup/ldap';\nimport { reportError } from '../../../client/lib/2fa/utils';\nimport { overrideLoginMethod } from '../../../client/lib/2fa/overrideLoginMethod';\n\nMeteor.loginWithLDAPAndTOTP = function (...args) {\n\t// Pull username and password\n\tconst username = args.shift();\n\tconst ldapPass = args.shift();\n\n\t// Check if last argument is a function. if it is, pop it off and set callback to it\n\tconst callback = typeof args[args.length - 1] === 'function' ? args.pop() : null;\n\t// The last argument before the callback is the totp code\n\tconst code = args.pop();\n\n\t// if args still holds options item, grab it\n\tconst ldapOptions = args.length > 0 ? args.shift() : {};\n\n\t// Set up loginRequest object\n\tconst loginRequest = {\n\t\tldap: true,\n\t\tusername,\n\t\tldapPass,\n\t\tldapOptions,\n\t};\n\n\tAccounts.callLoginMethod({\n\t\tmethodArguments: [\n\t\t\t{\n\t\t\t\ttotp: {\n\t\t\t\t\tlogin: loginRequest,\n\t\t\t\t\tcode,\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tuserCallback(error) {\n\t\t\tif (error) {\n\t\t\t\treportError(error, callback);\n\t\t\t} else {\n\t\t\t\tcallback && callback();\n\t\t\t}\n\t\t},\n\t});\n};\n\nconst { loginWithLDAP } = Meteor;\n\nMeteor.loginWithLDAP = function (...args) {\n\tconst callback = typeof args[args.length - 1] === 'function' ? args.pop() : null;\n\n\toverrideLoginMethod(loginWithLDAP, args, callback, Meteor.loginWithLDAPAndTOTP, args[0]);\n};\n","import { capitalize } from '@rocket.chat/string-helpers';\nimport { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\nimport { Facebook } from 'meteor/facebook-oauth';\nimport { Github } from 'meteor/github-oauth';\nimport { Twitter } from 'meteor/twitter-oauth';\nimport { MeteorDeveloperAccounts } from 'meteor/meteor-developer-oauth';\nimport { Linkedin } from 'meteor/pauli:linkedin-oauth';\nimport { OAuth } from 'meteor/oauth';\n\nimport { process2faReturn } from '../../../client/lib/2fa/process2faReturn';\nimport { CustomOAuth } from '../../custom-oauth';\nimport { convertError } from '../../../client/lib/2fa/utils';\nimport { overrideLoginMethod } from '../../../client/lib/2fa/overrideLoginMethod';\n\nlet lastCredentialToken = null;\nlet lastCredentialSecret = null;\n\nAccounts.oauth.tryLoginAfterPopupClosed = function (credentialToken, callback, totpCode, credentialSecret = null) {\n\tcredentialSecret = credentialSecret || OAuth._retrieveCredentialSecret(credentialToken) || null;\n\tconst methodArgument = {\n\t\toauth: {\n\t\t\tcredentialToken,\n\t\t\tcredentialSecret,\n\t\t},\n\t};\n\n\tlastCredentialToken = credentialToken;\n\tlastCredentialSecret = credentialSecret;\n\n\tif (totpCode && typeof totpCode === 'string') {\n\t\tmethodArgument.totp = {\n\t\t\tcode: totpCode,\n\t\t};\n\t}\n\n\tAccounts.callLoginMethod({\n\t\tmethodArguments: [methodArgument],\n\t\tuserCallback:\n\t\t\tcallback &&\n\t\t\tfunction (err) {\n\t\t\t\tcallback(convertError(err));\n\t\t\t},\n\t});\n};\n\nAccounts.oauth.credentialRequestCompleteHandler = function (callback, totpCode) {\n\treturn function (credentialTokenOrError) {\n\t\tif (credentialTokenOrError && credentialTokenOrError instanceof Error) {\n\t\t\tcallback && callback(credentialTokenOrError);\n\t\t} else {\n\t\t\tAccounts.oauth.tryLoginAfterPopupClosed(credentialTokenOrError, callback, totpCode);\n\t\t}\n\t};\n};\n\nconst createOAuthTotpLoginMethod = (credentialProvider) => (options, code, callback) => {\n\t// support a callback without options\n\tif (!callback && typeof options === 'function') {\n\t\tcallback = options;\n\t\toptions = null;\n\t}\n\n\tif (lastCredentialToken && lastCredentialSecret) {\n\t\tAccounts.oauth.tryLoginAfterPopupClosed(lastCredentialToken, callback, code, lastCredentialSecret);\n\t} else {\n\t\tconst provider = (credentialProvider && credentialProvider()) || this;\n\t\tconst credentialRequestCompleteCallback = Accounts.oauth.credentialRequestCompleteHandler(callback, code);\n\t\tprovider.requestCredential(options, credentialRequestCompleteCallback);\n\t}\n\n\tlastCredentialToken = null;\n\tlastCredentialSecret = null;\n};\n\nconst loginWithOAuthTokenAndTOTP = createOAuthTotpLoginMethod();\n\nconst loginWithFacebookAndTOTP = createOAuthTotpLoginMethod(() => Facebook);\nconst { loginWithFacebook } = Meteor;\nMeteor.loginWithFacebook = function (options, cb) {\n\toverrideLoginMethod(loginWithFacebook, [options], cb, loginWithFacebookAndTOTP);\n};\n\nconst loginWithGithubAndTOTP = createOAuthTotpLoginMethod(() => Github);\nconst { loginWithGithub } = Meteor;\nMeteor.loginWithGithub = function (options, cb) {\n\toverrideLoginMethod(loginWithGithub, [options], cb, loginWithGithubAndTOTP);\n};\n\nconst loginWithMeteorDeveloperAccountAndTOTP = createOAuthTotpLoginMethod(() => MeteorDeveloperAccounts);\nconst { loginWithMeteorDeveloperAccount } = Meteor;\nMeteor.loginWithMeteorDeveloperAccount = function (options, cb) {\n\toverrideLoginMethod(loginWithMeteorDeveloperAccount, [options], cb, loginWithMeteorDeveloperAccountAndTOTP);\n};\n\nconst loginWithTwitterAndTOTP = createOAuthTotpLoginMethod(() => Twitter);\nconst { loginWithTwitter } = Meteor;\nMeteor.loginWithTwitter = function (options, cb) {\n\toverrideLoginMethod(loginWithTwitter, [options], cb, loginWithTwitterAndTOTP);\n};\n\nconst loginWithLinkedinAndTOTP = createOAuthTotpLoginMethod(() => Linkedin);\nconst { loginWithLinkedin } = Meteor;\nMeteor.loginWithLinkedin = function (options, cb) {\n\toverrideLoginMethod(loginWithLinkedin, [options], cb, loginWithLinkedinAndTOTP);\n};\n\nAccounts.onPageLoadLogin((loginAttempt) => {\n\tif (loginAttempt?.error?.error !== 'totp-required') {\n\t\treturn;\n\t}\n\n\tconst { methodArguments } = loginAttempt;\n\tif (!methodArguments?.length) {\n\t\treturn;\n\t}\n\n\tconst oAuthArgs = methodArguments.find((arg) => arg.oauth);\n\tconst { credentialToken, credentialSecret } = oAuthArgs.oauth;\n\tconst cb = loginAttempt.userCallback;\n\n\tprocess2faReturn({\n\t\terror: loginAttempt.error,\n\t\toriginalCallback: cb,\n\t\tonCode: (code) => {\n\t\t\tAccounts.oauth.tryLoginAfterPopupClosed(credentialToken, cb, code, credentialSecret);\n\t\t},\n\t});\n});\n\nconst oldConfigureLogin = CustomOAuth.prototype.configureLogin;\nCustomOAuth.prototype.configureLogin = function (...args) {\n\tconst loginWithService = `loginWith${capitalize(String(this.name || ''))}`;\n\n\toldConfigureLogin.apply(this, args);\n\n\tconst oldMethod = Meteor[loginWithService];\n\n\tMeteor[loginWithService] = function (options, cb) {\n\t\toverrideLoginMethod(oldMethod, [options], cb, loginWithOAuthTokenAndTOTP);\n\t};\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\n\nimport { t } from '../../utils';\nimport { process2faReturn } from '../../../client/lib/2fa/process2faReturn';\nimport { isTotpInvalidError, reportError } from '../../../client/lib/2fa/utils';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\n\nMeteor.loginWithPasswordAndTOTP = function (selector, password, code, callback) {\n\tif (typeof selector === 'string') {\n\t\tif (selector.indexOf('@') === -1) {\n\t\t\tselector = { username: selector };\n\t\t} else {\n\t\t\tselector = { email: selector };\n\t\t}\n\t}\n\n\tAccounts.callLoginMethod({\n\t\tmethodArguments: [\n\t\t\t{\n\t\t\t\ttotp: {\n\t\t\t\t\tlogin: {\n\t\t\t\t\t\tuser: selector,\n\t\t\t\t\t\tpassword: Accounts._hashPassword(password),\n\t\t\t\t\t},\n\t\t\t\t\tcode,\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tuserCallback(error) {\n\t\t\tif (error) {\n\t\t\t\treportError(error, callback);\n\t\t\t} else {\n\t\t\t\tcallback && callback();\n\t\t\t}\n\t\t},\n\t});\n};\n\nconst { loginWithPassword } = Meteor;\n\nMeteor.loginWithPassword = function (email, password, cb) {\n\tloginWithPassword(email, password, (error) => {\n\t\tprocess2faReturn({\n\t\t\terror,\n\t\t\toriginalCallback: cb,\n\t\t\temailOrUsername: email,\n\t\t\tonCode: (code) => {\n\t\t\t\tMeteor.loginWithPasswordAndTOTP(email, password, code, (error) => {\n\t\t\t\t\tif (isTotpInvalidError(error)) {\n\t\t\t\t\t\tdispatchToastMessage({\n\t\t\t\t\t\t\ttype: 'error',\n\t\t\t\t\t\t\tmessage: t('Invalid_two_factor_code'),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcb();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tcb(error);\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t});\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\n\nimport '../../meteor-accounts-saml/client/saml_client';\nimport { reportError } from '../../../client/lib/2fa/utils';\nimport { overrideLoginMethod } from '../../../client/lib/2fa/overrideLoginMethod';\n\nMeteor.loginWithSamlTokenAndTOTP = function (credentialToken, code, callback) {\n\tAccounts.callLoginMethod({\n\t\tmethodArguments: [\n\t\t\t{\n\t\t\t\ttotp: {\n\t\t\t\t\tlogin: {\n\t\t\t\t\t\tsaml: true,\n\t\t\t\t\t\tcredentialToken,\n\t\t\t\t\t},\n\t\t\t\t\tcode,\n\t\t\t\t},\n\t\t\t},\n\t\t],\n\t\tuserCallback(error) {\n\t\t\tif (error) {\n\t\t\t\treportError(error, callback);\n\t\t\t} else {\n\t\t\t\tcallback && callback();\n\t\t\t}\n\t\t},\n\t});\n};\n\nconst { loginWithSamlToken } = Meteor;\n\nMeteor.loginWithSamlToken = function (options, callback) {\n\toverrideLoginMethod(loginWithSamlToken, [options], callback, Meteor.loginWithSamlTokenAndTOTP);\n};\n","import './TOTPPassword';\nimport './TOTPOAuth';\nimport './TOTPGoogle';\nimport './TOTPSaml';\nimport './TOTPLDAP';\nimport './TOTPCrowd';\nimport './overrideMeteorCall';\n","import { Meteor } from 'meteor/meteor';\n\nimport { t } from '../../utils/client';\nimport { process2faReturn } from '../../../client/lib/2fa/process2faReturn';\nimport { isTotpInvalidError } from '../../../client/lib/2fa/utils';\nimport { dispatchToastMessage } from '../../../client/lib/toast';\n\nconst { call } = Meteor;\n\ntype Callback = {\n\t(error: unknown): void;\n\t(error: unknown, result: unknown): void;\n};\n\nconst callWithTotp =\n\t(methodName: string, args: unknown[], callback: Callback) =>\n\t(twoFactorCode: string, twoFactorMethod: string): unknown =>\n\t\tcall(methodName, ...args, { twoFactorCode, twoFactorMethod }, (error: unknown, result: unknown): void => {\n\t\t\tif (isTotpInvalidError(error)) {\n\t\t\t\t(error as { toastrShowed?: true }).toastrShowed = true;\n\t\t\t\tdispatchToastMessage({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tmessage: t('Invalid_two_factor_code'),\n\t\t\t\t});\n\t\t\t\tcallback(error);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tcallback(error, result);\n\t\t});\n\nconst callWithoutTotp = (methodName: string, args: unknown[], callback: Callback) => (): unknown =>\n\tcall(methodName, ...args, (error: unknown, result: unknown): void => {\n\t\tprocess2faReturn({\n\t\t\terror,\n\t\t\tresult,\n\t\t\tonCode: callWithTotp(methodName, args, callback),\n\t\t\toriginalCallback: callback,\n\t\t\temailOrUsername: undefined,\n\t\t});\n\t});\n\nMeteor.call = function (methodName: string, ...args: unknown[]): unknown {\n\tconst callback = args.length > 0 && typeof args[args.length - 1] === 'function' ? (args.pop() as Callback) : (): void => undefined;\n\n\treturn callWithoutTotp(methodName, args, callback)();\n};\n","import './loadScript';\nimport './trackEvents';\n","import { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\n\nimport { settings } from '../../settings';\n\nTemplate.body.onRendered(function () {\n\tthis.autorun((c) => {\n\t\tconst piwikUrl = settings.get('PiwikAnalytics_enabled') && settings.get('PiwikAnalytics_url');\n\t\tconst piwikSiteId = piwikUrl && settings.get('PiwikAnalytics_siteId');\n\t\tconst piwikPrependDomain = piwikUrl && settings.get('PiwikAnalytics_prependDomain');\n\t\tconst piwikCookieDomain = piwikUrl && settings.get('PiwikAnalytics_cookieDomain');\n\t\tconst piwikDomains = piwikUrl && settings.get('PiwikAnalytics_domains');\n\t\tconst piwikAdditionalTracker = piwikUrl && settings.get('PiwikAdditionalTrackers');\n\t\tconst googleId = settings.get('GoogleAnalytics_enabled') && settings.get('GoogleAnalytics_ID');\n\t\tif (piwikSiteId || googleId) {\n\t\t\tc.stop();\n\n\t\t\tif (piwikSiteId) {\n\t\t\t\twindow._paq = window._paq || [];\n\t\t\t\tif (Meteor.userId()) {\n\t\t\t\t\twindow._paq.push(['setUserId', Meteor.userId()]);\n\t\t\t\t}\n\n\t\t\t\twindow._paq.push(['trackPageView']);\n\t\t\t\twindow._paq.push(['enableLinkTracking']);\n\t\t\t\tif (piwikPrependDomain) {\n\t\t\t\t\twindow._paq.push(['setDocumentTitle', `${window.location.hostname}/${document.title}`]);\n\t\t\t\t}\n\t\t\t\tconst upperLevelDomain = `*.${window.location.hostname.split('.').slice(1).join('.')}`;\n\t\t\t\tif (piwikCookieDomain) {\n\t\t\t\t\twindow._paq.push(['setCookieDomain', upperLevelDomain]);\n\t\t\t\t}\n\t\t\t\tif (piwikDomains) {\n\t\t\t\t\t// array\n\t\t\t\t\tconst domainsArray = piwikDomains.split(/\\n/);\n\t\t\t\t\tconst domains = [];\n\t\t\t\t\tfor (let i = 0; i < domainsArray.length; i++) {\n\t\t\t\t\t\t// only push domain if it contains a non whitespace character.\n\t\t\t\t\t\tif (/\\S/.test(domainsArray[i])) {\n\t\t\t\t\t\t\tdomains.push(`*.${domainsArray[i].trim()}`);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\twindow._paq.push(['setDomains', domains]);\n\t\t\t\t}\n\t\t\t\t(() => {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (/\\S/.test(piwikAdditionalTracker)) {\n\t\t\t\t\t\t\t// piwikAdditionalTracker is not empty or whitespace only\n\t\t\t\t\t\t\tconst addTrackers = JSON.parse(piwikAdditionalTracker);\n\t\t\t\t\t\t\tfor (let i = 0; i < addTrackers.length; i++) {\n\t\t\t\t\t\t\t\tconst tracker = addTrackers[i];\n\t\t\t\t\t\t\t\twindow._paq.push(['addTracker', `${tracker.trackerURL}js/`, tracker.siteId]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t// parsing JSON faild\n\t\t\t\t\t\tconsole.log('Error while parsing JSON value of \"piwikAdditionalTracker\": ', e);\n\t\t\t\t\t}\n\t\t\t\t\twindow._paq.push(['setTrackerUrl', `${piwikUrl}js/`]);\n\t\t\t\t\twindow._paq.push(['setSiteId', Number.parseInt(piwikSiteId)]);\n\t\t\t\t\tconst d = document;\n\t\t\t\t\tconst g = d.createElement('script');\n\t\t\t\t\tconst s = d.getElementsByTagName('script')[0];\n\t\t\t\t\tg.type = 'text/javascript';\n\t\t\t\t\tg.async = true;\n\t\t\t\t\tg.defer = true;\n\t\t\t\t\tg.src = `${piwikUrl}js/`;\n\t\t\t\t\ts.parentNode.insertBefore(g, s);\n\t\t\t\t})();\n\t\t\t}\n\n\t\t\tif (googleId) {\n\t\t\t\t/*eslint-disable */\n\t\t\t  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){\n\t\t\t  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),\n\t\t\t  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)\n\t\t\t  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');\n\n\t\t\t  ga('create', googleId, 'auto');\n\t\t\t  ga('send', 'pageview');\n\t\t\t\t/* eslint-enable */\n\t\t\t}\n\t\t}\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../settings';\nimport { callbacks } from '../../../lib/callbacks';\nimport { ChatRoom } from '../../models';\n\nfunction trackEvent(category, action, label) {\n\tif (window._paq) {\n\t\twindow._paq.push(['trackEvent', category, action, label]);\n\t}\n\tif (window.ga) {\n\t\twindow.ga('send', 'event', category, action, label);\n\t}\n}\n\nif (!window._paq || window.ga) {\n\t// Trigger the trackPageView manually as the page views are only loaded when the loadScript.js code is executed\n\tFlowRouter.triggers.enter([\n\t\t(route) => {\n\t\t\tif (window._paq) {\n\t\t\t\tconst http = location.protocol;\n\t\t\t\tconst slashes = http.concat('//');\n\t\t\t\tconst host = slashes.concat(window.location.hostname);\n\t\t\t\twindow._paq.push(['setCustomUrl', host + route.path]);\n\t\t\t\twindow._paq.push(['trackPageView']);\n\t\t\t}\n\t\t\tif (window.ga) {\n\t\t\t\twindow.ga('send', 'pageview', route.path);\n\t\t\t}\n\t\t},\n\t]);\n\n\t// Login page has manual switches\n\tcallbacks.add(\n\t\t'loginPageStateChange',\n\t\t(state) => {\n\t\t\ttrackEvent('Navigation', 'Login Page State Change', state);\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-login-state-change',\n\t);\n\n\t// Messsages\n\tcallbacks.add(\n\t\t'afterSaveMessage',\n\t\t(message) => {\n\t\t\tif ((window._paq || window.ga) && settings.get('Analytics_features_messages')) {\n\t\t\t\tconst room = ChatRoom.findOne({ _id: message.rid });\n\t\t\t\ttrackEvent('Message', 'Send', `${room.name} (${room._id})`);\n\t\t\t}\n\t\t},\n\t\t2000,\n\t\t'trackEvents',\n\t);\n\n\t// Rooms\n\tcallbacks.add(\n\t\t'afterCreateChannel',\n\t\t(owner, room) => {\n\t\t\tif (settings.get('Analytics_features_rooms')) {\n\t\t\t\ttrackEvent('Room', 'Create', `${room.name} (${room._id})`);\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-after-create-channel',\n\t);\n\n\tcallbacks.add(\n\t\t'roomNameChanged',\n\t\t(room) => {\n\t\t\tif (settings.get('Analytics_features_rooms')) {\n\t\t\t\ttrackEvent('Room', 'Changed Name', `${room.name} (${room._id})`);\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-room-name-changed',\n\t);\n\n\tcallbacks.add(\n\t\t'roomTopicChanged',\n\t\t(room) => {\n\t\t\tif (settings.get('Analytics_features_rooms')) {\n\t\t\t\ttrackEvent('Room', 'Changed Topic', `${room.name} (${room._id})`);\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-room-topic-changed',\n\t);\n\n\tcallbacks.add(\n\t\t'roomAnnouncementChanged',\n\t\t(room) => {\n\t\t\tif (settings.get('Analytics_features_rooms')) {\n\t\t\t\ttrackEvent('Room', 'Changed Announcement', `${room.name} (${room._id})`);\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-room-announcement-changed',\n\t);\n\n\tcallbacks.add(\n\t\t'roomTypeChanged',\n\t\t(room) => {\n\t\t\tif (settings.get('Analytics_features_rooms')) {\n\t\t\t\ttrackEvent('Room', 'Changed Room Type', `${room.name} (${room._id})`);\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-room-type-changed',\n\t);\n\n\tcallbacks.add(\n\t\t'archiveRoom',\n\t\t(room) => {\n\t\t\tif (settings.get('Analytics_features_rooms')) {\n\t\t\t\ttrackEvent('Room', 'Archived', `${room.name} (${room._id})`);\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-archive-room',\n\t);\n\n\tcallbacks.add(\n\t\t'unarchiveRoom',\n\t\t(room) => {\n\t\t\tif (settings.get('Analytics_features_rooms')) {\n\t\t\t\ttrackEvent('Room', 'Unarchived', `${room.name} (${room._id})`);\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-unarchive-room',\n\t);\n\n\t// Users\n\t// Track logins and associate user ids with piwik\n\t(() => {\n\t\tlet oldUserId = null;\n\n\t\tTracker.autorun(() => {\n\t\t\tconst newUserId = Meteor.userId();\n\t\t\tif (oldUserId === null && newUserId) {\n\t\t\t\tif (window._paq && settings.get('Analytics_features_users')) {\n\t\t\t\t\ttrackEvent('User', 'Login', newUserId);\n\t\t\t\t\twindow._paq.push(['setUserId', newUserId]);\n\t\t\t\t}\n\t\t\t} else if (newUserId === null && oldUserId) {\n\t\t\t\tif (window._paq && settings.get('Analytics_features_users')) {\n\t\t\t\t\ttrackEvent('User', 'Logout', oldUserId);\n\t\t\t\t}\n\t\t\t}\n\t\t\toldUserId = Meteor.userId();\n\t\t});\n\t})();\n\n\tcallbacks.add(\n\t\t'userRegistered',\n\t\t() => {\n\t\t\tif (settings.get('Analytics_features_users')) {\n\t\t\t\ttrackEvent('User', 'Registered');\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'piwik-user-resitered',\n\t);\n\n\tcallbacks.add(\n\t\t'usernameSet',\n\t\t() => {\n\t\t\tif (settings.get('Analytics_features_users')) {\n\t\t\t\ttrackEvent('User', 'Username Set');\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'piweik-username-set',\n\t);\n\n\tcallbacks.add(\n\t\t'userPasswordReset',\n\t\t() => {\n\t\t\tif (settings.get('Analytics_features_users')) {\n\t\t\t\ttrackEvent('User', 'Reset Password');\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'piwik-user-password-reset',\n\t);\n\n\tcallbacks.add(\n\t\t'userConfirmationEmailRequested',\n\t\t() => {\n\t\t\tif (settings.get('Analytics_features_users')) {\n\t\t\t\ttrackEvent('User', 'Confirmation Email Requested');\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'piwik-user-confirmation-email-requested',\n\t);\n\n\tcallbacks.add(\n\t\t'userForgotPasswordEmailRequested',\n\t\t() => {\n\t\t\tif (settings.get('Analytics_features_users')) {\n\t\t\t\ttrackEvent('User', 'Forgot Password Email Requested');\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'piwik-user-forgot-password-email-requested',\n\t);\n\n\tcallbacks.add(\n\t\t'userStatusManuallySet',\n\t\t(status) => {\n\t\t\tif (settings.get('Analytics_features_users')) {\n\t\t\t\ttrackEvent('User', 'Status Manually Changed', status);\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-user-status-manually-set',\n\t);\n\n\tcallbacks.add(\n\t\t'userAvatarSet',\n\t\t(service) => {\n\t\t\tif (settings.get('Analytics_features_users')) {\n\t\t\t\ttrackEvent('User', 'Avatar Changed', service);\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-user-avatar-set',\n\t);\n\n\tcallbacks.add(\n\t\t'roomAvatarChanged',\n\t\t(room) => {\n\t\t\tif (settings.get('Analytics_features_rooms')) {\n\t\t\t\ttrackEvent('Room', 'Changed Avatar', `${room.name} (${room._id})`);\n\t\t\t}\n\t\t},\n\t\tcallbacks.priority.MEDIUM,\n\t\t'analytics-room-avatar-changed',\n\t);\n}\n","import { Meteor } from 'meteor/meteor';\nimport { ServiceConfiguration } from 'meteor/service-configuration';\nimport { check, Match } from 'meteor/check';\nimport { Session } from 'meteor/session';\nimport './routes';\n\nconst handleError = (error) => error && Session.set('errorMessage', error.reason || 'Unknown error');\n\n// TODO: allow serviceConfig.loginStyle == popup\nMeteor.loginWithBlockstack = (options, callback = handleError) => {\n\tif (!options || !options.redirectURI) {\n\t\toptions = ServiceConfiguration.configurations.findOne({\n\t\t\tservice: 'blockstack',\n\t\t});\n\n\t\toptions.blockstackIDHost = Meteor.Device.isDesktop() ? 'http://localhost:8888/auth' : 'https://blockstack.org/auth';\n\n\t\toptions.scopes = ['store_write'];\n\t}\n\n\ttry {\n\t\tcheck(\n\t\t\toptions,\n\t\t\tMatch.ObjectIncluding({\n\t\t\t\tblockstackIDHost: String,\n\t\t\t\tredirectURI: String,\n\t\t\t\tmanifestURI: String,\n\t\t\t}),\n\t\t);\n\n\t\timport('blockstack/dist/blockstack').then(({ redirectToSignIn }) =>\n\t\t\tredirectToSignIn(options.redirectURI, options.manifestURI, options.scopes),\n\t\t);\n\t} catch (err) {\n\t\tcallback.call(Meteor, err);\n\t}\n};\n\nconst meteorLogout = Meteor.logout;\nMeteor.logout = (...args) => {\n\tconst serviceConfig = ServiceConfiguration.configurations.findOne({\n\t\tservice: 'blockstack',\n\t});\n\n\tconst blockstackAuth = Session.get('blockstack_auth');\n\n\tif (serviceConfig && blockstackAuth) {\n\t\tSession.delete('blockstack_auth');\n\t\timport('blockstack/dist/blockstack').then(({ signUserOut }) => signUserOut(window.location.href));\n\t}\n\n\treturn meteorLogout(...args);\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nconst blockstackLogin = (authResponse, userData = {}) => {\n\tAccounts.callLoginMethod({\n\t\tmethodArguments: [\n\t\t\t{\n\t\t\t\tblockstack: true,\n\t\t\t\tauthResponse,\n\t\t\t\tuserData,\n\t\t\t},\n\t\t],\n\t\tuserCallback() {\n\t\t\tFlowRouter.go('home');\n\t\t},\n\t});\n};\n\nFlowRouter.route('/_blockstack/validate', {\n\tname: 'blockstackValidate',\n\tasync action(params, queryParams) {\n\t\tconst blockstack = await import('blockstack/dist/blockstack');\n\n\t\tif (Meteor.userId()) {\n\t\t\tconsole.log('Blockstack Auth requested when already logged in. Reloading.');\n\t\t\treturn FlowRouter.go('home');\n\t\t}\n\n\t\tif (queryParams.authResponse == null) {\n\t\t\tthrow new Meteor.Error('Blockstack: Auth request without response param.');\n\t\t}\n\n\t\tlet userData;\n\n\t\tif (blockstack.isUserSignedIn()) {\n\t\t\tuserData = blockstack.loadUserData();\n\t\t}\n\n\t\tif (blockstack.isSignInPending()) {\n\t\t\tuserData = await blockstack.handlePendingSignIn();\n\t\t}\n\n\t\tblockstackLogin(queryParams.authResponse, userData);\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\nimport { Random } from 'meteor/random';\n\nimport { settings } from '../../settings';\n\nconst openCenteredPopup = function (url, width, height) {\n\tconst screenX = typeof window.screenX !== 'undefined' ? window.screenX : window.screenLeft;\n\tconst screenY = typeof window.screenY !== 'undefined' ? window.screenY : window.screenTop;\n\tconst outerWidth = typeof window.outerWidth !== 'undefined' ? window.outerWidth : document.body.clientWidth;\n\tconst outerHeight = typeof window.outerHeight !== 'undefined' ? window.outerHeight : document.body.clientHeight - 22;\n\t// XXX what is the 22?\n\n\t// Use `outerWidth - width` and `outerHeight - height` for help in\n\t// positioning the popup centered relative to the current window\n\tconst left = screenX + (outerWidth - width) / 2;\n\tconst top = screenY + (outerHeight - height) / 2;\n\tconst features = `width=${width},height=${height},left=${left},top=${top},scrollbars=yes`;\n\n\tconst newwindow = window.open(url, 'Login', features);\n\tif (newwindow.focus) {\n\t\tnewwindow.focus();\n\t}\n\n\treturn newwindow;\n};\n\nMeteor.loginWithCas = function (options, callback) {\n\toptions = options || {};\n\n\tconst credentialToken = Random.id();\n\tconst login_url = settings.get('CAS_login_url');\n\tconst popup_width = settings.get('CAS_popup_width');\n\tconst popup_height = settings.get('CAS_popup_height');\n\n\tif (!login_url) {\n\t\treturn;\n\t}\n\n\tconst appUrl = Meteor.absoluteUrl().replace(/\\/$/, '') + __meteor_runtime_config__.ROOT_URL_PATH_PREFIX;\n\t// check if the provided CAS URL already has some parameters\n\tconst delim = login_url.split('?').length > 1 ? '&' : '?';\n\tconst loginUrl = `${login_url}${delim}service=${appUrl}/_cas/${credentialToken}`;\n\n\tconst popup = openCenteredPopup(loginUrl, popup_width || 800, popup_height || 600);\n\n\tconst checkPopupOpen = setInterval(function () {\n\t\tlet popupClosed;\n\t\ttry {\n\t\t\t// Fix for #328 - added a second test criteria (popup.closed === undefined)\n\t\t\t// to humour this Android quirk:\n\t\t\t// http://code.google.com/p/android/issues/detail?id=21061\n\t\t\tpopupClosed = popup.closed || popup.closed === undefined;\n\t\t} catch (e) {\n\t\t\t// For some unknown reason, IE9 (and others?) sometimes (when\n\t\t\t// the popup closes too quickly?) throws \"SCRIPT16386: No such\n\t\t\t// interface supported\" when trying to read 'popup.closed'. Try\n\t\t\t// again in 100ms.\n\t\t\treturn;\n\t\t}\n\n\t\tif (popupClosed) {\n\t\t\tclearInterval(checkPopupOpen);\n\n\t\t\t// check auth on server.\n\t\t\tAccounts.callLoginMethod({\n\t\t\t\tmethodArguments: [{ cas: { credentialToken } }],\n\t\t\t\tuserCallback: callback,\n\t\t\t});\n\t\t}\n\t}, 100);\n};\n","import './cas_client';\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../settings/client';\n\nMeteor.startup(function () {\n\tTracker.autorun(function () {\n\t\tMeteor.absoluteUrl.defaultOptions.secure = Boolean(settings.get('Force_SSL'));\n\t});\n});\n","import './loginHelper';\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\n\nMeteor.loginWithCrowd = function (...args) {\n\t// Pull username and password\n\tconst username = args.shift();\n\tconst password = args.shift();\n\tconst callback = args.shift();\n\n\tconst loginRequest = {\n\t\tcrowd: true,\n\t\tusername,\n\t\tcrowdPassword: password,\n\t};\n\tAccounts.callLoginMethod({\n\t\tmethodArguments: [loginRequest],\n\t\tuserCallback(error) {\n\t\t\tif (callback) {\n\t\t\t\tif (error) {\n\t\t\t\t\treturn callback(error);\n\t\t\t\t}\n\t\t\t\treturn callback();\n\t\t\t}\n\t\t},\n\t});\n};\n","import { capitalize } from '@rocket.chat/string-helpers';\nimport { Meteor } from 'meteor/meteor';\nimport { Match } from 'meteor/check';\nimport { Accounts } from 'meteor/accounts-base';\nimport { Random } from 'meteor/random';\nimport { ServiceConfiguration } from 'meteor/service-configuration';\nimport { OAuth } from 'meteor/oauth';\n\nimport './swapSessionStorage';\nimport { isURL } from '../../utils/lib/isURL';\n\n// Request custom OAuth credentials for the user\n// @param options {optional}\n// @param credentialRequestCompleteCallback {Function} Callback function to call on\n//   completion. Takes one argument, credentialToken on success, or Error on\n//   error.\n\nexport class CustomOAuth {\n\tconstructor(name, options) {\n\t\tthis.name = name;\n\t\tif (!Match.test(this.name, String)) {\n\t\t\tthrow new Meteor.Error('CustomOAuth: Name is required and must be String');\n\t\t}\n\n\t\tthis.configure(options);\n\n\t\tAccounts.oauth.registerService(this.name);\n\n\t\tthis.configureLogin();\n\t}\n\n\tconfigure(options) {\n\t\tif (!Match.test(options, Object)) {\n\t\t\tthrow new Meteor.Error('CustomOAuth: Options is required and must be Object');\n\t\t}\n\n\t\tif (!Match.test(options.serverURL, String)) {\n\t\t\tthrow new Meteor.Error('CustomOAuth: Options.serverURL is required and must be String');\n\t\t}\n\n\t\tif (!Match.test(options.authorizePath, String)) {\n\t\t\toptions.authorizePath = '/oauth/authorize';\n\t\t}\n\n\t\tif (!Match.test(options.scope, String)) {\n\t\t\toptions.scope = 'openid';\n\t\t}\n\n\t\tthis.serverURL = options.serverURL;\n\t\tthis.authorizePath = options.authorizePath;\n\t\tthis.scope = options.scope;\n\n\t\tif (!isURL(this.authorizePath)) {\n\t\t\tthis.authorizePath = this.serverURL + this.authorizePath;\n\t\t}\n\t}\n\n\tconfigureLogin() {\n\t\tconst loginWithService = `loginWith${capitalize(String(this.name || ''))}`;\n\n\t\tMeteor[loginWithService] = (options, callback) => {\n\t\t\t// support a callback without options\n\t\t\tif (!callback && typeof options === 'function') {\n\t\t\t\tcallback = options;\n\t\t\t\toptions = null;\n\t\t\t}\n\n\t\t\tconst credentialRequestCompleteCallback = Accounts.oauth.credentialRequestCompleteHandler(callback);\n\t\t\tthis.requestCredential(options, credentialRequestCompleteCallback);\n\t\t};\n\t}\n\n\trequestCredential(options, credentialRequestCompleteCallback) {\n\t\t// support both (options, callback) and (callback).\n\t\tif (!credentialRequestCompleteCallback && typeof options === 'function') {\n\t\t\tcredentialRequestCompleteCallback = options;\n\t\t\toptions = {};\n\t\t}\n\n\t\tconst config = ServiceConfiguration.configurations.findOne({ service: this.name });\n\t\tif (!config) {\n\t\t\tif (credentialRequestCompleteCallback) {\n\t\t\t\tcredentialRequestCompleteCallback(new ServiceConfiguration.ConfigError());\n\t\t\t}\n\t\t\treturn;\n\t\t}\n\n\t\tconst credentialToken = Random.secret();\n\t\tconst loginStyle = OAuth._loginStyle(this.name, config, options);\n\n\t\tconst separator = this.authorizePath.indexOf('?') !== -1 ? '&' : '?';\n\n\t\tconst loginUrl =\n\t\t\t`${this.authorizePath}${separator}client_id=${config.clientId}&redirect_uri=${encodeURIComponent(\n\t\t\t\tOAuth._redirectUri(this.name, config),\n\t\t\t)}&response_type=code` +\n\t\t\t`&state=${encodeURIComponent(OAuth._stateParam(loginStyle, credentialToken, options.redirectUrl))}&scope=${encodeURIComponent(\n\t\t\t\tthis.scope,\n\t\t\t)}`;\n\n\t\tOAuth.launchLogin({\n\t\t\tloginService: this.name,\n\t\t\tloginStyle,\n\t\t\tloginUrl,\n\t\t\tcredentialRequestCompleteCallback,\n\t\t\tcredentialToken,\n\t\t\tpopupOptions: {\n\t\t\t\twidth: 900,\n\t\t\t\theight: 450,\n\t\t\t},\n\t\t});\n\t}\n}\n","import { Meteor } from 'meteor/meteor';\nimport { OAuth } from 'meteor/oauth';\nimport { Reload } from 'meteor/reload';\n\n// TODO: This is a nasty workaround and should be removed as soon as possible\n// Firefox is losing the sessionStorage data (v >= 79.0) after the redirect\n\nif (navigator.userAgent.indexOf('Firefox') !== -1) {\n\tconst KEY_NAME = 'Swapped_Storage_Workaround';\n\n\tOAuth.saveDataForRedirect = (loginService, credentialToken) => {\n\t\tMeteor._localStorage.setItem(KEY_NAME, JSON.stringify({ loginService, credentialToken }));\n\t\tReload._migrate(null, { immediateMigration: true });\n\t};\n\n\tOAuth.getDataAfterRedirect = () => {\n\t\tlet migrationData = Meteor._localStorage.getItem(KEY_NAME);\n\t\tMeteor._localStorage.removeItem(KEY_NAME);\n\t\ttry {\n\t\t\tmigrationData = JSON.parse(migrationData);\n\t\t} catch (error) {\n\t\t\tmigrationData = null;\n\t\t}\n\n\t\tif (!(migrationData && migrationData.credentialToken)) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst { credentialToken } = migrationData;\n\t\tconst key = OAuth._storageTokenPrefix + credentialToken;\n\t\tlet credentialSecret;\n\t\ttry {\n\t\t\tcredentialSecret = sessionStorage.getItem(key);\n\t\t\tsessionStorage.removeItem(key);\n\t\t} catch (e) {\n\t\t\tMeteor._debug('error retrieving credentialSecret', e);\n\t\t}\n\t\treturn {\n\t\t\tloginService: migrationData.loginService,\n\t\t\tcredentialToken,\n\t\t\tcredentialSecret,\n\t\t};\n\t};\n}\n","import { Meteor } from 'meteor/meteor';\n\nif (Meteor.isClient) {\n\tmodule.exports = require('./client/custom_oauth_client.js');\n}\nif (Meteor.isServer) {\n\tmodule.exports = require('./server/custom_oauth_server.js');\n}\n","/**\n * @license MIT\n * @fileOverview Favico animations\n * @author Miroslav Magda, http://blog.ejci.net\n * @version 0.3.10\n */\n\n/**\n * Create new favico instance\n * @param {Object} Options\n * @return {Object} Favico object\n * @example\n * var favico = new Favico({\n *    bgColor : '#d00',\n *    textColor : '#fff',\n *    fontFamily : 'sans-serif',\n *    fontStyle : 'bold',\n *    position : 'down',\n *    type : 'circle',\n *    animation : 'slide',\n *    dataUrl: function(url){},\n *    win: top\n * });\n */\n/* eslint-disable */\n\n\texport const Favico = (function(opt) {\n\t\t'use strict';\n\t\topt = (opt) ? opt : {};\n\t\tvar _def = {\n\t\t\tbgColor: '#d00',\n\t\t\ttextColor: '#fff',\n\t\t\tfontFamily: 'sans-serif', //Arial,Verdana,Times New Roman,serif,sans-serif,...\n\t\t\tfontStyle: 'bold', //normal,italic,oblique,bold,bolder,lighter,100,200,300,400,500,600,700,800,900\n\t\t\ttype: 'circle',\n\t\t\tposition: 'down', // down, up, left, leftup (upleft)\n\t\t\tanimation: 'slide',\n\t\t\telementId: false,\n\t\t\tdataUrl: false,\n\t\t\twin: window\n\t\t};\n\t\tvar _opt, _orig, _h, _w, _canvas, _context, _img, _ready, _lastBadge, _running, _readyCb, _stop, _browser, _animTimeout, _drawTimeout, _doc;\n\n\t\t_browser = {};\n\t\t_browser.ff = typeof InstallTrigger !== 'undefined';\n\t\t_browser.chrome = !!window.chrome;\n\t\t_browser.opera = !!window.opera || navigator.userAgent.indexOf('Opera') >= 0;\n\t\t_browser.ie = /*@cc_on!@*/ false;\n\t\t_browser.safari = Object.prototype.toString.call(window.HTMLElement).indexOf('Constructor') > 0;\n\t\t_browser.supported = (_browser.chrome || _browser.ff || _browser.opera);\n\n\t\tvar _queue = [];\n\t\t_readyCb = function() {};\n\t\t_ready = _stop = false;\n\t\t/**\n\t\t * Initialize favico\n\t\t */\n\t\tvar init = function() {\n\t\t\t//merge initial options\n\t\t\t_opt = merge(_def, opt);\n\t\t\t_opt.bgColor = hexToRgb(_opt.bgColor);\n\t\t\t_opt.textColor = hexToRgb(_opt.textColor);\n\t\t\t_opt.position = _opt.position.toLowerCase();\n\t\t\t_opt.animation = (animation.types['' + _opt.animation]) ? _opt.animation : _def.animation;\n\n\t\t\t_doc = _opt.win.document;\n\n\t\t\tvar isUp = _opt.position.indexOf('up') > -1;\n\t\t\tvar isLeft = _opt.position.indexOf('left') > -1;\n\n\t\t\t//transform the animations\n\t\t\tif (isUp || isLeft) {\n\t\t\t\tfor (var a in animation.types) {\n\t\t\t\t\tfor (var i = 0; i < animation.types[a].length; i++) {\n\t\t\t\t\t\tvar step = animation.types[a][i];\n\n\t\t\t\t\t\tif (isUp) {\n\t\t\t\t\t\t\tif (step.y < 0.6) {\n\t\t\t\t\t\t\t\tstep.y = step.y - 0.4;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tstep.y = step.y - 2 * step.y + (1 - step.w);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (isLeft) {\n\t\t\t\t\t\t\tif (step.x < 0.6) {\n\t\t\t\t\t\t\t\tstep.x = step.x - 0.4;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tstep.x = step.x - 2 * step.x + (1 - step.h);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tanimation.types[a][i] = step;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t_opt.type = (type['' + _opt.type]) ? _opt.type : _def.type;\n\n\t\t\t_orig = link.getIcons();\n\t\t\t//create temp canvas\n\t\t\t_canvas = document.createElement('canvas');\n\t\t\t//create temp image\n\t\t\t_img = document.createElement('img');\n\t\t\tvar lastIcon = _orig[_orig.length - 1];\n\t\t\tif (lastIcon.hasAttribute('href')) {\n\t\t\t\t_img.setAttribute('crossOrigin', 'anonymous');\n\t\t\t\t//get width/height\n\t\t\t\t_img.onload = function() {\n\t\t\t\t\t_h = (_img.height > 0) ? _img.height : 32;\n\t\t\t\t\t_w = (_img.width > 0) ? _img.width : 32;\n\t\t\t\t\t_canvas.height = _h;\n\t\t\t\t\t_canvas.width = _w;\n\t\t\t\t\t_context = _canvas.getContext('2d');\n\t\t\t\t\ticon.ready();\n\t\t\t\t};\n\t\t\t\t_img.setAttribute('src', lastIcon.getAttribute('href'));\n\t\t\t} else {\n\t\t\t\t_img.onload = function() {\n\t\t\t\t\t_h = 32;\n\t\t\t\t\t_w = 32;\n\t\t\t\t\t_img.height = _h;\n\t\t\t\t\t_img.width = _w;\n\t\t\t\t\t_canvas.height = _h;\n\t\t\t\t\t_canvas.width = _w;\n\t\t\t\t\t_context = _canvas.getContext('2d');\n\t\t\t\t\ticon.ready();\n\t\t\t\t};\n\t\t\t\t_img.setAttribute('src', '');\n\t\t\t}\n\n\t\t};\n\t\t/**\n\t\t * Icon namespace\n\t\t */\n\t\tvar icon = {};\n\t\t/**\n\t\t * Icon is ready (reset icon) and start animation (if ther is any)\n\t\t */\n\t\ticon.ready = function() {\n\t\t\t_ready = true;\n\t\t\ticon.reset();\n\t\t\t_readyCb();\n\t\t};\n\t\t/**\n\t\t * Reset icon to default state\n\t\t */\n\t\ticon.reset = function() {\n\t\t\t//reset\n\t\t\tif (!_ready) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t_queue = [];\n\t\t\t_lastBadge = false;\n\t\t\t_running = false;\n\t\t\t_context.clearRect(0, 0, _w, _h);\n\t\t\t_context.drawImage(_img, 0, 0, _w, _h);\n\t\t\t//_stop=true;\n\t\t\tlink.setIcon(_canvas);\n\t\t\t//webcam('stop');\n\t\t\t//video('stop');\n\t\t\twindow.clearTimeout(_animTimeout);\n\t\t\twindow.clearTimeout(_drawTimeout);\n\t\t};\n\t\t/**\n\t\t * Start animation\n\t\t */\n\t\ticon.start = function() {\n\t\t\tif (!_ready || _running) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tvar finished = function() {\n\t\t\t\t_lastBadge = _queue[0];\n\t\t\t\t_running = false;\n\t\t\t\tif (_queue.length > 0) {\n\t\t\t\t\t_queue.shift();\n\t\t\t\t\ticon.start();\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (_queue.length > 0) {\n\t\t\t\t_running = true;\n\t\t\t\tvar run = function() {\n\t\t\t\t\t// apply options for this animation\n\t\t\t\t\t['type', 'animation', 'bgColor', 'textColor', 'fontFamily', 'fontStyle'].forEach(function(a) {\n\t\t\t\t\t\tif (a in _queue[0].options) {\n\t\t\t\t\t\t\t_opt[a] = _queue[0].options[a];\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\tanimation.run(_queue[0].options, function() {\n\t\t\t\t\t\tfinished();\n\t\t\t\t\t}, false);\n\t\t\t\t};\n\t\t\t\tif (_lastBadge) {\n\t\t\t\t\tanimation.run(_lastBadge.options, function() {\n\t\t\t\t\t\trun();\n\t\t\t\t\t}, true);\n\t\t\t\t} else {\n\t\t\t\t\trun();\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Badge types\n\t\t */\n\t\tvar type = {};\n\t\tvar options = function(opt) {\n\t\t\topt.n = ((typeof opt.n) === 'number') ? Math.abs(opt.n | 0) : opt.n;\n\t\t\topt.x = _w * opt.x;\n\t\t\topt.y = _h * opt.y;\n\t\t\topt.w = _w * opt.w;\n\t\t\topt.h = _h * opt.h;\n\t\t\topt.len = ('' + opt.n).length;\n\t\t\treturn opt;\n\t\t};\n\t\t/**\n\t\t * Generate circle\n\t\t * @param {Object} opt Badge options\n\t\t */\n\t\ttype.circle = function(opt) {\n\t\t\topt = options(opt);\n\t\t\tvar more = false;\n\t\t\tif (opt.len === 2) {\n\t\t\t\topt.x = opt.x - opt.w * 0.4;\n\t\t\t\topt.w = opt.w * 1.4;\n\t\t\t\tmore = true;\n\t\t\t} else if (opt.len >= 3) {\n\t\t\t\topt.x = opt.x - opt.w * 0.65;\n\t\t\t\topt.w = opt.w * 1.65;\n\t\t\t\tmore = true;\n\t\t\t}\n\t\t\t_context.clearRect(0, 0, _w, _h);\n\t\t\t_context.drawImage(_img, 0, 0, _w, _h);\n\t\t\t_context.beginPath();\n\t\t\t_context.font = _opt.fontStyle + ' ' + Math.floor(opt.h * (opt.n > 99 ? 0.85 : 1)) + 'px ' + _opt.fontFamily;\n\t\t\t_context.textAlign = 'center';\n\t\t\tif (more) {\n\t\t\t\t_context.moveTo(opt.x + opt.w / 2, opt.y);\n\t\t\t\t_context.lineTo(opt.x + opt.w - opt.h / 2, opt.y);\n\t\t\t\t_context.quadraticCurveTo(opt.x + opt.w, opt.y, opt.x + opt.w, opt.y + opt.h / 2);\n\t\t\t\t_context.lineTo(opt.x + opt.w, opt.y + opt.h - opt.h / 2);\n\t\t\t\t_context.quadraticCurveTo(opt.x + opt.w, opt.y + opt.h, opt.x + opt.w - opt.h / 2, opt.y + opt.h);\n\t\t\t\t_context.lineTo(opt.x + opt.h / 2, opt.y + opt.h);\n\t\t\t\t_context.quadraticCurveTo(opt.x, opt.y + opt.h, opt.x, opt.y + opt.h - opt.h / 2);\n\t\t\t\t_context.lineTo(opt.x, opt.y + opt.h / 2);\n\t\t\t\t_context.quadraticCurveTo(opt.x, opt.y, opt.x + opt.h / 2, opt.y);\n\t\t\t} else {\n\t\t\t\t_context.arc(opt.x + opt.w / 2, opt.y + opt.h / 2, opt.h / 2, 0, 2 * Math.PI);\n\t\t\t}\n\t\t\t_context.fillStyle = 'rgba(' + _opt.bgColor.r + ',' + _opt.bgColor.g + ',' + _opt.bgColor.b + ',' + opt.o + ')';\n\t\t\t_context.fill();\n\t\t\t_context.closePath();\n\t\t\t_context.beginPath();\n\t\t\t_context.stroke();\n\t\t\t_context.fillStyle = 'rgba(' + _opt.textColor.r + ',' + _opt.textColor.g + ',' + _opt.textColor.b + ',' + opt.o + ')';\n\t\t\t//_context.fillText((more) ? '9+' : opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n\t\t\tif ((typeof opt.n) === 'number' && opt.n > 999) {\n\t\t\t\t_context.fillText(((opt.n > 9999) ? 9 : Math.floor(opt.n / 1000)) + 'k+', Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.2));\n\t\t\t} else {\n\t\t\t\t_context.fillText(opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n\t\t\t}\n\t\t\t_context.closePath();\n\t\t};\n\t\t/**\n\t\t * Generate rectangle\n\t\t * @param {Object} opt Badge options\n\t\t */\n\t\ttype.rectangle = function(opt) {\n\t\t\topt = options(opt);\n\t\t\tvar more = false;\n\t\t\tif (opt.len === 2) {\n\t\t\t\topt.x = opt.x - opt.w * 0.4;\n\t\t\t\topt.w = opt.w * 1.4;\n\t\t\t\tmore = true;\n\t\t\t} else if (opt.len >= 3) {\n\t\t\t\topt.x = opt.x - opt.w * 0.65;\n\t\t\t\topt.w = opt.w * 1.65;\n\t\t\t\tmore = true;\n\t\t\t}\n\t\t\t_context.clearRect(0, 0, _w, _h);\n\t\t\t_context.drawImage(_img, 0, 0, _w, _h);\n\t\t\t_context.beginPath();\n\t\t\t_context.font = _opt.fontStyle + ' ' + Math.floor(opt.h * (opt.n > 99 ? 0.9 : 1)) + 'px ' + _opt.fontFamily;\n\t\t\t_context.textAlign = 'center';\n\t\t\t_context.fillStyle = 'rgba(' + _opt.bgColor.r + ',' + _opt.bgColor.g + ',' + _opt.bgColor.b + ',' + opt.o + ')';\n\t\t\t_context.fillRect(opt.x, opt.y, opt.w, opt.h);\n\t\t\t_context.fillStyle = 'rgba(' + _opt.textColor.r + ',' + _opt.textColor.g + ',' + _opt.textColor.b + ',' + opt.o + ')';\n\t\t\t//_context.fillText((more) ? '9+' : opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n\t\t\tif ((typeof opt.n) === 'number' && opt.n > 999) {\n\t\t\t\t_context.fillText(((opt.n > 9999) ? 9 : Math.floor(opt.n / 1000)) + 'k+', Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.2));\n\t\t\t} else {\n\t\t\t\t_context.fillText(opt.n, Math.floor(opt.x + opt.w / 2), Math.floor(opt.y + opt.h - opt.h * 0.15));\n\t\t\t}\n\t\t\t_context.closePath();\n\t\t};\n\n\t\t/**\n\t\t * Set badge\n\t\t */\n\t\tvar badge = function(number, opts) {\n\t\t\topts = ((typeof opts) === 'string' ? {\n\t\t\t\tanimation: opts\n\t\t\t} : opts) || {};\n\t\t\t_readyCb = function() {\n\t\t\t\ttry {\n\t\t\t\t\tif (typeof(number) === 'number' ? (number > 0) : (number !== '')) {\n\t\t\t\t\t\tvar q = {\n\t\t\t\t\t\t\ttype: 'badge',\n\t\t\t\t\t\t\toptions: {\n\t\t\t\t\t\t\t\tn: number\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\t\t\t\t\t\tif ('animation' in opts && animation.types['' + opts.animation]) {\n\t\t\t\t\t\t\tq.options.animation = '' + opts.animation;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ('type' in opts && type['' + opts.type]) {\n\t\t\t\t\t\t\tq.options.type = '' + opts.type;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t['bgColor', 'textColor'].forEach(function(o) {\n\t\t\t\t\t\t\tif (o in opts) {\n\t\t\t\t\t\t\t\tq.options[o] = hexToRgb(opts[o]);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\t['fontStyle', 'fontFamily'].forEach(function(o) {\n\t\t\t\t\t\t\tif (o in opts) {\n\t\t\t\t\t\t\t\tq.options[o] = opts[o];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\t_queue.push(q);\n\t\t\t\t\t\tif (_queue.length > 100) {\n\t\t\t\t\t\t\tthrow new Error('Too many badges requests in queue.');\n\t\t\t\t\t\t}\n\t\t\t\t\t\ticon.start();\n\t\t\t\t\t} else {\n\t\t\t\t\t\ticon.reset();\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthrow new Error('Error setting badge. Message: ' + e.message);\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (_ready) {\n\t\t\t\t_readyCb();\n\t\t\t}\n\t\t};\n\n\t\t/**\n\t\t * Set image as icon\n\t\t */\n\t\tvar image = function(imageElement) {\n\t\t\t_readyCb = function() {\n\t\t\t\ttry {\n\t\t\t\t\tvar w = imageElement.width;\n\t\t\t\t\tvar h = imageElement.height;\n\t\t\t\t\tvar newImg = document.createElement('img');\n\t\t\t\t\tvar ratio = (w / _w < h / _h) ? (w / _w) : (h / _h);\n\t\t\t\t\tnewImg.setAttribute('crossOrigin', 'anonymous');\n\t\t\t\t\tnewImg.onload = function() {\n\t\t\t\t\t\t_context.clearRect(0, 0, _w, _h);\n\t\t\t\t\t\t_context.drawImage(newImg, 0, 0, _w, _h);\n\t\t\t\t\t\tlink.setIcon(_canvas);\n\t\t\t\t\t};\n\t\t\t\t\tnewImg.setAttribute('src', imageElement.getAttribute('src'));\n\t\t\t\t\tnewImg.height = (h / ratio);\n\t\t\t\t\tnewImg.width = (w / ratio);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthrow new Error('Error setting image. Message: ' + e.message);\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (_ready) {\n\t\t\t\t_readyCb();\n\t\t\t}\n\t\t};\n\t\t/**\n\t\t * Set video as icon\n\t\t */\n\t\tvar video = function(videoElement) {\n\t\t\t_readyCb = function() {\n\t\t\t\ttry {\n\t\t\t\t\tif (videoElement === 'stop') {\n\t\t\t\t\t\t_stop = true;\n\t\t\t\t\t\ticon.reset();\n\t\t\t\t\t\t_stop = false;\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\t//var w = videoElement.width;\n\t\t\t\t\t//var h = videoElement.height;\n\t\t\t\t\t//var ratio = (w / _w < h / _h) ? (w / _w) : (h / _h);\n\t\t\t\t\tvideoElement.addEventListener('play', function() {\n\t\t\t\t\t\tdrawVideo(this);\n\t\t\t\t\t}, false);\n\n\t\t\t\t} catch (e) {\n\t\t\t\t\tthrow new Error('Error setting video. Message: ' + e.message);\n\t\t\t\t}\n\t\t\t};\n\t\t\tif (_ready) {\n\t\t\t\t_readyCb();\n\t\t\t}\n\t\t};\n\t\t/**\n\t\t * Set video as icon\n\t\t */\n\t\tvar webcam = function(action) {\n\t\t\t//UR\n\t\t\tif (!window.URL || !window.URL.createObjectURL) {\n\t\t\t\twindow.URL = window.URL || {};\n\t\t\t\twindow.URL.createObjectURL = function(obj) {\n\t\t\t\t\treturn obj;\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (_browser.supported) {\n\t\t\t\tvar newVideo = false;\n\t\t\t\tnavigator.getUserMedia = navigator.getUserMedia || navigator.oGetUserMedia || navigator.msGetUserMedia || navigator.mozGetUserMedia || navigator.webkitGetUserMedia;\n\t\t\t\t_readyCb = function() {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (action === 'stop') {\n\t\t\t\t\t\t\t_stop = true;\n\t\t\t\t\t\t\ticon.reset();\n\t\t\t\t\t\t\t_stop = false;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tnewVideo = document.createElement('video');\n\t\t\t\t\t\tnewVideo.width = _w;\n\t\t\t\t\t\tnewVideo.height = _h;\n\t\t\t\t\t\tnavigator.getUserMedia({\n\t\t\t\t\t\t\tvideo: true,\n\t\t\t\t\t\t\taudio: false\n\t\t\t\t\t\t}, function(stream) {\n\t\t\t\t\t\t\tnewVideo.src = URL.createObjectURL(stream);\n\t\t\t\t\t\t\tnewVideo.play();\n\t\t\t\t\t\t\tdrawVideo(newVideo);\n\t\t\t\t\t\t}, function() {});\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tthrow new Error('Error setting webcam. Message: ' + e.message);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tif (_ready) {\n\t\t\t\t\t_readyCb();\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t\t/**\n\t\t * Draw video to context and repeat :)\n\t\t */\n\t\tfunction drawVideo(video) {\n\t\t\tif (video.paused || video.ended || _stop) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\t//nasty hack for FF webcam (Thanks to Julian Ćwirko, kontakt@redsunmedia.pl)\n\t\t\ttry {\n\t\t\t\t_context.clearRect(0, 0, _w, _h);\n\t\t\t\t_context.drawImage(video, 0, 0, _w, _h);\n\t\t\t} catch (e) {\n\n\t\t\t}\n\t\t\t_drawTimeout = setTimeout(function() {\n\t\t\t\tdrawVideo(video);\n\t\t\t}, animation.duration);\n\t\t\tlink.setIcon(_canvas);\n\t\t}\n\n\t\tvar link = {};\n\t\t/**\n\t\t * Get icons from HEAD tag or create a new <link> element\n\t\t */\n\t\tlink.getIcons = function() {\n\t\t\tvar elms = [];\n\t\t\t//get link element\n\t\t\tvar getLinks = function() {\n\t\t\t\tvar icons = [];\n\t\t\t\tvar links = _doc.getElementsByTagName('head')[0].getElementsByTagName('link');\n\t\t\t\tfor (var i = 0; i < links.length; i++) {\n\t\t\t\t\tif ((/(^|\\s)icon(\\s|$)/i).test(links[i].getAttribute('rel'))) {\n\t\t\t\t\t\ticons.push(links[i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn icons;\n\t\t\t};\n\t\t\tif (_opt.element) {\n\t\t\t\telms = [_opt.element];\n\t\t\t} else if (_opt.elementId) {\n\t\t\t\t//if img element identified by elementId\n\t\t\t\telms = [_doc.getElementById(_opt.elementId)];\n\t\t\t\telms[0].setAttribute('href', elms[0].getAttribute('src'));\n\t\t\t} else {\n\t\t\t\t//if link element\n\t\t\t\telms = getLinks();\n\t\t\t\tif (elms.length === 0) {\n\t\t\t\t\telms = [_doc.createElement('link')];\n\t\t\t\t\telms[0].setAttribute('rel', 'icon');\n\t\t\t\t\t_doc.getElementsByTagName('head')[0].appendChild(elms[0]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telms.forEach(function(item) {\n\t\t\t\titem.setAttribute('type', 'image/png');\n\t\t\t});\n\t\t\treturn elms;\n\t\t};\n\t\tlink.setIcon = function(canvas) {\n\t\t\tvar url = canvas.toDataURL('image/png');\n\t\t\tif (_opt.dataUrl) {\n\t\t\t\t//if using custom exporter\n\t\t\t\t_opt.dataUrl(url);\n\t\t\t}\n\t\t\tif (_opt.element) {\n\t\t\t\t_opt.element.setAttribute('href', url);\n\t\t\t\t_opt.element.setAttribute('src', url);\n\t\t\t} else if (_opt.elementId) {\n\t\t\t\t//if is attached to element (image)\n\t\t\t\tvar elm = _doc.getElementById(_opt.elementId);\n\t\t\t\telm.setAttribute('href', url);\n\t\t\t\telm.setAttribute('src', url);\n\t\t\t} else {\n\t\t\t\t//if is attached to fav icon\n\t\t\t\tif (_browser.ff || _browser.opera) {\n\t\t\t\t\t//for FF we need to \"recreate\" element, atach to dom and remove old <link>\n\t\t\t\t\t//var originalType = _orig.getAttribute('rel');\n\t\t\t\t\tvar old = _orig[_orig.length - 1];\n\t\t\t\t\tvar newIcon = _doc.createElement('link');\n\t\t\t\t\t_orig = [newIcon];\n\t\t\t\t\t//_orig.setAttribute('rel', originalType);\n\t\t\t\t\tif (_browser.opera) {\n\t\t\t\t\t\tnewIcon.setAttribute('rel', 'icon');\n\t\t\t\t\t}\n\t\t\t\t\tnewIcon.setAttribute('rel', 'icon');\n\t\t\t\t\tnewIcon.setAttribute('type', 'image/png');\n\t\t\t\t\t_doc.getElementsByTagName('head')[0].appendChild(newIcon);\n\t\t\t\t\tnewIcon.setAttribute('href', url);\n\t\t\t\t\tif (old.parentNode) {\n\t\t\t\t\t\told.parentNode.removeChild(old);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t_orig.forEach(function(icon) {\n\t\t\t\t\t\ticon.setAttribute('href', url);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t//http://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb#answer-5624139\n\t\t//HEX to RGB convertor\n\t\tfunction hexToRgb(hex) {\n\t\t\tvar shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n\t\t\thex = hex.replace(shorthandRegex, function(m, r, g, b) {\n\t\t\t\treturn r + r + g + g + b + b;\n\t\t\t});\n\t\t\tvar result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\t\t\treturn result ? {\n\t\t\t\tr: parseInt(result[1], 16),\n\t\t\t\tg: parseInt(result[2], 16),\n\t\t\t\tb: parseInt(result[3], 16)\n\t\t\t} : false;\n\t\t}\n\n\t\t/**\n\t\t * Merge options\n\t\t */\n\t\tfunction merge(def, opt) {\n\t\t\tvar mergedOpt = {};\n\t\t\tvar attrname;\n\t\t\tfor (attrname in def) {\n\t\t\t\tmergedOpt[attrname] = def[attrname];\n\t\t\t}\n\t\t\tfor (attrname in opt) {\n\t\t\t\tmergedOpt[attrname] = opt[attrname];\n\t\t\t}\n\t\t\treturn mergedOpt;\n\t\t}\n\n\t\t/**\n\t\t * Cross-browser page visibility shim\n\t\t * http://stackoverflow.com/questions/12536562/detect-whether-a-window-is-visible\n\t\t */\n\t\tfunction isPageHidden() {\n\t\t\treturn _doc.hidden || _doc.msHidden || _doc.webkitHidden || _doc.mozHidden;\n\t\t}\n\n\t\t/**\n\t\t * @namespace animation\n\t\t */\n\t\tvar animation = {};\n\t\t/**\n\t\t * Animation \"frame\" duration\n\t\t */\n\t\tanimation.duration = 40;\n\t\t/**\n\t\t * Animation types (none,fade,pop,slide)\n\t\t */\n\t\tanimation.types = {};\n\t\tanimation.types.fade = [{\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 0.0\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 0.1\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 0.2\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 0.3\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 0.4\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 0.5\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 0.6\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 0.7\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 0.8\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 0.9\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1.0\n\t\t}];\n\t\tanimation.types.none = [{\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}];\n\t\tanimation.types.pop = [{\n\t\t\tx: 1,\n\t\t\ty: 1,\n\t\t\tw: 0,\n\t\t\th: 0,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.9,\n\t\t\ty: 0.9,\n\t\t\tw: 0.1,\n\t\t\th: 0.1,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.8,\n\t\t\ty: 0.8,\n\t\t\tw: 0.2,\n\t\t\th: 0.2,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.7,\n\t\t\ty: 0.7,\n\t\t\tw: 0.3,\n\t\t\th: 0.3,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.6,\n\t\t\ty: 0.6,\n\t\t\tw: 0.4,\n\t\t\th: 0.4,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.5,\n\t\t\ty: 0.5,\n\t\t\tw: 0.5,\n\t\t\th: 0.5,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}];\n\t\tanimation.types.popFade = [{\n\t\t\tx: 0.75,\n\t\t\ty: 0.75,\n\t\t\tw: 0,\n\t\t\th: 0,\n\t\t\to: 0\n\t\t}, {\n\t\t\tx: 0.65,\n\t\t\ty: 0.65,\n\t\t\tw: 0.1,\n\t\t\th: 0.1,\n\t\t\to: 0.2\n\t\t}, {\n\t\t\tx: 0.6,\n\t\t\ty: 0.6,\n\t\t\tw: 0.2,\n\t\t\th: 0.2,\n\t\t\to: 0.4\n\t\t}, {\n\t\t\tx: 0.55,\n\t\t\ty: 0.55,\n\t\t\tw: 0.3,\n\t\t\th: 0.3,\n\t\t\to: 0.6\n\t\t}, {\n\t\t\tx: 0.50,\n\t\t\ty: 0.50,\n\t\t\tw: 0.4,\n\t\t\th: 0.4,\n\t\t\to: 0.8\n\t\t}, {\n\t\t\tx: 0.45,\n\t\t\ty: 0.45,\n\t\t\tw: 0.5,\n\t\t\th: 0.5,\n\t\t\to: 0.9\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}];\n\t\tanimation.types.slide = [{\n\t\t\tx: 0.4,\n\t\t\ty: 1,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.9,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.9,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.8,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.7,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.6,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.5,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}, {\n\t\t\tx: 0.4,\n\t\t\ty: 0.4,\n\t\t\tw: 0.6,\n\t\t\th: 0.6,\n\t\t\to: 1\n\t\t}];\n\t\t/**\n\t\t * Run animation\n\t\t * @param {Object} opt Animation options\n\t\t * @param {Object} cb Callabak after all steps are done\n\t\t * @param {Object} revert Reverse order? true|false\n\t\t * @param {Object} step Optional step number (frame bumber)\n\t\t */\n\t\tanimation.run = function(opt, cb, revert, step) {\n\t\t\tvar animationType = animation.types[isPageHidden() ? 'none' : _opt.animation];\n\t\t\tif (revert === true) {\n\t\t\t\tstep = (typeof step !== 'undefined') ? step : animationType.length - 1;\n\t\t\t} else {\n\t\t\t\tstep = (typeof step !== 'undefined') ? step : 0;\n\t\t\t}\n\t\t\tcb = (cb) ? cb : function() {};\n\t\t\tif ((step < animationType.length) && (step >= 0)) {\n\t\t\t\ttype[_opt.type](merge(opt, animationType[step]));\n\t\t\t\t_animTimeout = setTimeout(function() {\n\t\t\t\t\tif (revert) {\n\t\t\t\t\t\tstep = step - 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstep = step + 1;\n\t\t\t\t\t}\n\t\t\t\t\tanimation.run(opt, cb, revert, step);\n\t\t\t\t}, animation.duration);\n\n\t\t\t\tlink.setIcon(_canvas);\n\t\t\t} else {\n\t\t\t\tcb();\n\t\t\t\treturn;\n\t\t\t}\n\t\t};\n\t\t//auto init\n\t\tinit();\n\t\treturn {\n\t\t\tbadge: badge,\n\t\t\tvideo: video,\n\t\t\timage: image,\n\t\t\twebcam: webcam,\n\t\t\treset: icon.reset,\n\t\t\tbrowser: {\n\t\t\t\tsupported: _browser.supported\n\t\t\t}\n\t\t};\n\t});\n","import { Favico } from './favico';\n\nexport { Favico };\n","export * from './client/index';\n","import { Accounts } from 'meteor/accounts-base';\nimport _ from 'underscore';\n\nimport { IframeLogin } from '../../ui-utils';\n\nconst iframeLogin = new IframeLogin();\n\nconst { _unstoreLoginToken } = Accounts;\nAccounts._unstoreLoginToken = function (...args) {\n\tiframeLogin.tryLogin();\n\t_unstoreLoginToken.apply(Accounts, args);\n};\n\nwindow.addEventListener('message', (e) => {\n\tif (!_.isObject(e.data)) {\n\t\treturn;\n\t}\n\n\tswitch (e.data.event) {\n\t\tcase 'try-iframe-login':\n\t\t\tiframeLogin.tryLogin((error) => {\n\t\t\t\tif (error) {\n\t\t\t\t\te.source.postMessage(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tevent: 'login-error',\n\t\t\t\t\t\t\tresponse: error.message,\n\t\t\t\t\t\t},\n\t\t\t\t\t\te.origin,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t\tbreak;\n\n\t\tcase 'login-with-token':\n\t\t\tiframeLogin.loginWithToken(e.data, (error) => {\n\t\t\t\tif (error) {\n\t\t\t\t\te.source.postMessage(\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tevent: 'login-error',\n\t\t\t\t\t\t\tresponse: error.message,\n\t\t\t\t\t\t},\n\t\t\t\t\t\te.origin,\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t});\n\t\t\tbreak;\n\t}\n});\n","import './iframe_client';\n","import './logger';\n","import { Template } from 'meteor/templating';\nimport _ from 'underscore';\n\nimport { getConfig } from '../../../client/lib/utils/getConfig';\n\nTemplate.log = !!(getConfig('debug') || getConfig('debug-template'));\n\nif (Template.log) {\n\tTemplate.logMatch = /.*/;\n\n\tTemplate.enableLogs = function (log) {\n\t\tTemplate.logMatch = /.*/;\n\t\tif (log === false) {\n\t\t\tTemplate.log = false;\n\t\t\treturn false;\n\t\t}\n\t\tTemplate.log = true;\n\t\tif (log instanceof RegExp) {\n\t\t\tTemplate.logMatch = log;\n\t\t\treturn log;\n\t\t}\n\t};\n\n\tconst wrapHelpersAndEvents = function (original, prefix, color) {\n\t\treturn function (dict) {\n\t\t\tconst template = this;\n\t\t\tconst fn1 = function (name, fn) {\n\t\t\t\tif (fn instanceof Function) {\n\t\t\t\t\tdict[name] = function (...args) {\n\t\t\t\t\t\tconst result = fn.apply(this, args);\n\t\t\t\t\t\tif (Template.log === true) {\n\t\t\t\t\t\t\tconst completeName = `${prefix}:${template.viewName.replace('Template.', '')}.${name}`;\n\t\t\t\t\t\t\tif (Template.logMatch.test(completeName)) {\n\t\t\t\t\t\t\t\tconsole.log(`%c${completeName}`, `color: ${color}`, {\n\t\t\t\t\t\t\t\t\targs,\n\t\t\t\t\t\t\t\t\tscope: this,\n\t\t\t\t\t\t\t\t\tresult,\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn result;\n\t\t\t\t\t};\n\t\t\t\t\treturn dict[name];\n\t\t\t\t}\n\t\t\t};\n\t\t\t_.each(name, (fn, name) => {\n\t\t\t\tfn1(name, fn);\n\t\t\t});\n\t\t\treturn original.call(template, dict);\n\t\t};\n\t};\n\n\tTemplate.prototype.helpers = wrapHelpersAndEvents(Template.prototype.helpers, 'helper', 'blue');\n\n\tTemplate.prototype.events = wrapHelpersAndEvents(Template.prototype.events, 'event', 'green');\n\n\tconst wrapLifeCycle = function (original, prefix, color) {\n\t\treturn function (fn) {\n\t\t\tconst template = this;\n\t\t\tif (fn instanceof Function) {\n\t\t\t\tconst wrap = function (...args) {\n\t\t\t\t\tconst result = fn.apply(this, args);\n\t\t\t\t\tif (Template.log === true) {\n\t\t\t\t\t\tconst completeName = `${prefix}:${template.viewName.replace('Template.', '')}.${name}`;\n\t\t\t\t\t\tif (Template.logMatch.test(completeName)) {\n\t\t\t\t\t\t\tconsole.log(`%c${completeName}`, `color: ${color}; font-weight: bold`, {\n\t\t\t\t\t\t\t\targs,\n\t\t\t\t\t\t\t\tscope: this,\n\t\t\t\t\t\t\t\tresult,\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn result;\n\t\t\t\t};\n\t\t\t\treturn original.call(template, wrap);\n\t\t\t}\n\t\t\treturn original.call(template, fn);\n\t\t};\n\t};\n\n\tTemplate.prototype.onCreated = wrapLifeCycle(Template.prototype.onCreated, 'onCreated', 'blue');\n\n\tTemplate.prototype.onRendered = wrapLifeCycle(Template.prototype.onRendered, 'onRendered', 'green');\n\n\tTemplate.prototype.onDestroyed = wrapLifeCycle(Template.prototype.onDestroyed, 'onDestroyed', 'red');\n}\n","import './startup';\n","import { hasAllPermission } from '../../authorization';\nimport { registerAdminSidebarItem } from '../../../client/views/admin';\n\nregisterAdminSidebarItem({\n\thref: 'admin-mailer',\n\ti18nLabel: 'Mailer',\n\ticon: 'mail',\n\tpermissionGranted: () => hasAllPermission('access-mailer'),\n});\n","export { registerFieldTemplate } from './renderField';\n","/**\n * The field templates will be rendered non-reactive for all messages by the messages-list (@see rocketchat-nrr)\n * Thus, we cannot provide helpers or events to the template, but we need to register this interactivity at the parent\n * template which is the room. The event will be bubbled by the Blaze-framework\n * @param fieldType\n * @param templateName\n * @param helpers\n * @param events\n */\nexport function registerFieldTemplate() {\n\tconsole.warn('registerFieldTemplate DEPRECATED');\n}\n","import { Meteor } from 'meteor/meteor';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { RoomManager, MessageAction } from '../../ui-utils';\nimport { messageArgs } from '../../ui-utils/client/lib/messageArgs';\nimport { ChatSubscription } from '../../models';\nimport { roomTypes } from '../../utils/client';\nimport { handleError } from '../../../client/lib/utils/handleError';\n\nMeteor.startup(() => {\n\tMessageAction.addButton({\n\t\tid: 'mark-message-as-unread',\n\t\ticon: 'flag',\n\t\tlabel: 'Mark_unread',\n\t\tcontext: ['message', 'message-mobile', 'threads'],\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\treturn Meteor.call('unreadMessages', message, function (error) {\n\t\t\t\tif (error) {\n\t\t\t\t\treturn handleError(error);\n\t\t\t\t}\n\t\t\t\tconst subscription = ChatSubscription.findOne({\n\t\t\t\t\trid: message.rid,\n\t\t\t\t});\n\t\t\t\tif (subscription == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tRoomManager.close(subscription.t + subscription.name);\n\t\t\t\treturn FlowRouter.go('home');\n\t\t\t});\n\t\t},\n\t\tcondition({ msg, u, room }) {\n\t\t\tconst isLivechatRoom = roomTypes.isLivechatRoom(room.t);\n\t\t\tif (isLivechatRoom) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn msg.u._id !== u._id;\n\t\t},\n\t\torder: 10,\n\t\tgroup: 'menu',\n\t});\n});\n","import './actionButton';\n","import './saml_client';\n","import { Meteor } from 'meteor/meteor';\nimport { Accounts } from 'meteor/accounts-base';\nimport { Random } from 'meteor/random';\nimport { ServiceConfiguration } from 'meteor/service-configuration';\n\nif (!Accounts.saml) {\n\tAccounts.saml = {};\n}\n\n// Override the standard logout behaviour.\n//\n// If we find a samlProvider, and we are using single\n// logout we will initiate logout from rocketchat via saml.\n// If not using single logout, we just do the standard logout.\n// This can be overridden by a configured logout behaviour.\n//\n// TODO: This may need some work as it is not clear if we are really\n// logging out of the idp when doing the standard logout.\n\nconst MeteorLogout = Meteor.logout;\nconst logoutBehaviour = {\n\tTERMINATE_SAML: 'SAML',\n\tONLY_RC: 'Local',\n};\n\nMeteor.logout = function (...args) {\n\tconst samlService = ServiceConfiguration.configurations.findOne({ service: 'saml' });\n\tif (samlService) {\n\t\tconst provider = samlService.clientConfig && samlService.clientConfig.provider;\n\t\tif (provider) {\n\t\t\tif (samlService.logoutBehaviour == null || samlService.logoutBehaviour === logoutBehaviour.TERMINATE_SAML) {\n\t\t\t\tif (samlService.idpSLORedirectURL) {\n\t\t\t\t\tconsole.info('SAML session terminated via SLO');\n\t\t\t\t\treturn Meteor.logoutWithSaml({ provider });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (samlService.logoutBehaviour === logoutBehaviour.ONLY_RC) {\n\t\t\t\tconsole.info('SAML session not terminated, only the Rocket.Chat session is going to be killed');\n\t\t\t}\n\t\t}\n\t}\n\treturn MeteorLogout.apply(Meteor, args);\n};\n\nMeteor.loginWithSaml = function (options /* , callback*/) {\n\toptions = options || {};\n\tconst credentialToken = `id-${Random.id()}`;\n\toptions.credentialToken = credentialToken;\n\n\twindow.location.href = `_saml/authorize/${options.provider}/${options.credentialToken}`;\n};\n\nMeteor.logoutWithSaml = function (options /* , callback*/) {\n\t// Accounts.saml.idpInitiatedSLO(options, callback);\n\tMeteor.call('samlLogout', options.provider, function (err, result) {\n\t\tif (err || !result) {\n\t\t\tMeteorLogout.apply(Meteor);\n\t\t\treturn;\n\t\t}\n\n\t\t// Remove the userId from the client to prevent calls to the server while the logout is processed.\n\t\t// If the logout fails, the userId will be reloaded on the resume call\n\t\tMeteor._localStorage.removeItem(Accounts.USER_ID_KEY);\n\n\t\t// A nasty bounce: 'result' has the SAML LogoutRequest but we need a proper 302 to redirected from the server.\n\t\twindow.location.replace(Meteor.absoluteUrl(`_saml/sloRedirect/${options.provider}/?redirect=${encodeURIComponent(result)}`));\n\t});\n};\n\nMeteor.loginWithSamlToken = function (token, userCallback) {\n\tAccounts.callLoginMethod({\n\t\tmethodArguments: [\n\t\t\t{\n\t\t\t\tsaml: true,\n\t\t\t\tcredentialToken: token,\n\t\t\t},\n\t\t],\n\t\tuserCallback,\n\t});\n};\n","import './nrr';\n","/* eslint new-cap:0 */\n\nimport { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\nimport { Blaze } from 'meteor/blaze';\nimport { HTML } from 'meteor/htmljs';\nimport { Spacebars } from 'meteor/spacebars';\nimport { Tracker } from 'meteor/tracker';\n\nconst makeCursorReactive = function (obj) {\n\tif (obj instanceof Meteor.Collection.Cursor) {\n\t\treturn obj._depend({\n\t\t\tadded: true,\n\t\t\tremoved: true,\n\t\t\tchanged: true,\n\t\t});\n\t}\n};\n\nconst toHTMLWithDataNonReactive = function (content, data) {\n\tmakeCursorReactive(data);\n\n\tif (data instanceof Spacebars.kw && Object.keys(data.hash).length > 0) {\n\t\tObject.entries(data.hash).forEach(([, value]) => makeCursorReactive(value));\n\t\treturn Tracker.nonreactive(() => Blaze.toHTMLWithData(content, data.hash));\n\t}\n\treturn Tracker.nonreactive(() => Blaze.toHTMLWithData(content, data));\n};\n\nconst renderNonReactive = function (templateName, data) {\n\tconst { _arguments } = this.parentView.dataVar.get();\n\n\t[templateName, data] = _arguments;\n\n\treturn Tracker.nonreactive(() => {\n\t\tconsole.warn('Nrr template is deprecated');\n\t\tconst view = new Blaze.View('nrr', () => HTML.Raw(toHTMLWithDataNonReactive(Template[templateName], data)));\n\n\t\tview.onViewReady(() => {\n\t\t\tconst { onViewReady } = Template[templateName];\n\t\t\treturn onViewReady && onViewReady.call(view, data);\n\t\t});\n\n\t\tview._onViewRendered(() => {\n\t\t\tconst { onViewRendered } = Template[templateName];\n\t\t\treturn onViewRendered && onViewRendered.call(view, data);\n\t\t});\n\n\t\treturn view;\n\t});\n};\n\nTemplate.nrr = new Blaze.Template('nrr', renderNonReactive);\n","import './tabBar';\n","import { lazy, useMemo } from 'react';\n\nimport { useUserSubscription } from '../../../client/contexts/UserContext';\nimport { addAction } from '../../../client/views/room/lib/Toolbox';\n\naddAction('push-notifications', ({ room }) => {\n\tconst subscription = useUserSubscription(room?._id);\n\n\treturn useMemo(\n\t\t() =>\n\t\t\tsubscription\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\t\t\t\tid: 'push-notifications',\n\t\t\t\t\t\ttitle: 'Notifications_Preferences',\n\t\t\t\t\t\ticon: 'bell',\n\t\t\t\t\t\ttemplate: lazy(() => import('../../../client/views/room/contextualBar/NotificationPreferences')),\n\t\t\t\t\t\torder: 8,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[subscription],\n\t);\n});\n","import './slackbridge_import.client';\n","import { settings } from '../../settings';\nimport { slashCommands } from '../../utils';\n\nsettings.onload('SlackBridge_Enabled', (key, value) => {\n\tif (value) {\n\t\tslashCommands.add('slackbridge-import', null, {\n\t\t\tdescription: 'Import_old_messages_from_slackbridge',\n\t\t});\n\t} else {\n\t\tdelete slashCommands.commands['slackbridge-import'];\n\t}\n});\n","import { slashCommands } from '../../utils';\n\nslashCommands.add('archive', null, {\n\tdescription: 'Archive',\n\tparams: '#channel',\n\tpermission: 'archive-room',\n});\n","import './client';\n","import { slashCommands } from '../../utils';\n\nslashCommands.add('create', null, {\n\tdescription: 'Create_A_New_Channel',\n\tparams: '#channel',\n\tpermission: ['create-c', 'create-p'],\n});\n","import './client';\n","import { slashCommands } from '../../utils';\n\nslashCommands.add('hide', undefined, {\n\tdescription: 'Hide_room',\n\tparams: '#room',\n});\n","import './hide';\n","import { slashCommands } from '../../utils';\n\nslashCommands.add('invite', undefined, {\n\tdescription: 'Invite_user_to_join_channel',\n\tparams: '@username',\n\tpermission: 'add-user-to-joined-room',\n});\n","import './client';\n","import { slashCommands } from '../../utils';\n\nslashCommands.add('invite-all-to', undefined, {\n\tdescription: 'Invite_user_to_join_channel_all_to',\n\tparams: '#room',\n\tpermission: ['add-user-to-joined-room', 'add-user-to-any-c-room', 'add-user-to-any-p-room'],\n});\nslashCommands.add('invite-all-from', undefined, {\n\tdescription: 'Invite_user_to_join_channel_all_from',\n\tparams: '#room',\n\tpermission: 'add-user-to-joined-room',\n});\n","import './client';\n","import { Meteor } from 'meteor/meteor';\n\nimport { slashCommands } from '../../utils/lib/slashCommand';\n\nslashCommands.add(\n\t'join',\n\tundefined,\n\t{\n\t\tdescription: 'Join_the_given_channel',\n\t\tparams: '#channel',\n\t\tpermission: 'view-c-room',\n\t},\n\tundefined,\n\tfalse,\n\tundefined,\n\tfunction (err: Meteor.Error, _result: unknown, params: Record<string, any>) {\n\t\tif (err.error === 'error-user-already-in-room') {\n\t\t\tparams.cmd = 'open';\n\t\t\tparams.msg.msg = params.msg.msg.replace('join', 'open');\n\t\t\treturn slashCommands.run('open', params.params, params.msg, undefined);\n\t\t}\n\t},\n);\n","import './client';\n","import { slashCommands } from '../../utils';\n\nslashCommands.add(\n\t'kick',\n\tfunction (command, params) {\n\t\tconst username = params.trim();\n\t\tif (username === '') {\n\t\t\treturn;\n\t\t}\n\t\treturn username.replace('@', '');\n\t},\n\t{\n\t\tdescription: 'Remove_someone_from_room',\n\t\tparams: '@username',\n\t\tpermission: 'remove-user',\n\t},\n);\n","import './client';\n","import { Meteor } from 'meteor/meteor';\nimport { Match } from 'meteor/check';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { slashCommands, roomTypes } from '../../utils';\nimport { ChatSubscription, Subscriptions } from '../../models';\n\nfunction Open(command, params /* , item*/) {\n\tconst dict = {\n\t\t'#': ['c', 'p'],\n\t\t'@': ['d'],\n\t};\n\n\tif (command !== 'open' || !Match.test(params, String)) {\n\t\treturn;\n\t}\n\n\tlet room = params.trim();\n\tconst type = dict[room[0]];\n\troom = room.replace(/#|@/, '');\n\n\tconst query = {\n\t\tname: room,\n\t};\n\n\tif (type) {\n\t\tquery.t = {\n\t\t\t$in: type,\n\t\t};\n\t}\n\n\tconst subscription = ChatSubscription.findOne(query);\n\n\tif (subscription) {\n\t\troomTypes.openRouteLink(subscription.t, subscription, FlowRouter.current().queryParams);\n\t}\n\n\tif (type && type.indexOf('d') === -1) {\n\t\treturn;\n\t}\n\treturn Meteor.call('createDirectMessage', room, function (err) {\n\t\tif (err) {\n\t\t\treturn;\n\t\t}\n\t\tconst subscription = Subscriptions.findOne(query);\n\t\troomTypes.openRouteLink(subscription.t, subscription, FlowRouter.current().queryParams);\n\t});\n}\n\nslashCommands.add('open', Open, {\n\tdescription: 'Opens_a_channel_group_or_direct_message',\n\tparams: 'room_name',\n\tclientOnly: true,\n\tpermission: ['view-c-room', 'view-c-room', 'view-d-room', 'view-joined-room', 'create-d'],\n});\n","import './client';\n","import { slashCommands } from '../../utils';\n\nslashCommands.add('unarchive', null, {\n\tdescription: 'Unarchive',\n\tparams: '#channel',\n\tpermission: 'unarchive-room',\n});\n","import './client';\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport * as banners from '../../../client/lib/banners';\n\nMeteor.startup(function () {\n\tTracker.autorun(() => {\n\t\tconst user = Meteor.user();\n\n\t\tif (user && Object.keys(user.banners || {}).length > 0) {\n\t\t\tconst firstBanner = Object.values(user.banners)\n\t\t\t\t.filter((b) => b.read !== true)\n\t\t\t\t.sort((a, b) => b.priority - a.priority)[0];\n\n\t\t\tif (!firstBanner) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tfirstBanner.textArguments = firstBanner.textArguments || [];\n\n\t\t\tbanners.open({\n\t\t\t\tid: firstBanner.id,\n\t\t\t\ttitle: TAPi18n.__(firstBanner.title),\n\t\t\t\ttext: TAPi18n.__(firstBanner.text, ...firstBanner.textArguments),\n\t\t\t\tmodifiers: firstBanner.modifiers,\n\t\t\t\taction() {\n\t\t\t\t\tif (firstBanner.link) {\n\t\t\t\t\t\twindow.open(firstBanner.link, '_system');\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonClose() {\n\t\t\t\t\tMeteor.call('banner/dismiss', {\n\t\t\t\t\t\tid: firstBanner.id,\n\t\t\t\t\t});\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\t});\n});\n","import { Emitter } from '@rocket.chat/emitter';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { ChromeScreenShare } from './screenShare';\nimport { t } from '../../utils';\nimport { Notifications } from '../../notifications';\nimport { settings } from '../../settings';\nimport { modal } from '../../ui-utils';\nimport { ChatSubscription } from '../../models';\nimport { WEB_RTC_EVENTS } from '..';\nimport { goToRoomById } from '../../../client/lib/utils/goToRoomById';\n\nclass WebRTCTransportClass extends Emitter {\n\tconstructor(webrtcInstance) {\n\t\tsuper();\n\t\tthis.debug = false;\n\t\tthis.webrtcInstance = webrtcInstance;\n\t\tNotifications.onRoom(this.webrtcInstance.room, WEB_RTC_EVENTS.WEB_RTC, (type, data) => {\n\t\t\tthis.log('WebRTCTransportClass - onRoom', type, data);\n\t\t\tthis.emit(type, data);\n\t\t});\n\t}\n\n\tlog(...args) {\n\t\tif (this.debug === true) {\n\t\t\tconsole.log(...args);\n\t\t}\n\t}\n\n\tonUserStream(type, data) {\n\t\tif (data.room !== this.webrtcInstance.room) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.log('WebRTCTransportClass - onUser', type, data);\n\t\tthis.emit(type, data);\n\t}\n\n\tstartCall(data) {\n\t\tthis.log('WebRTCTransportClass - startCall', this.webrtcInstance.room, this.webrtcInstance.selfId);\n\t\tNotifications.notifyUsersOfRoom(this.webrtcInstance.room, WEB_RTC_EVENTS.WEB_RTC, WEB_RTC_EVENTS.CALL, {\n\t\t\tfrom: this.webrtcInstance.selfId,\n\t\t\troom: this.webrtcInstance.room,\n\t\t\tmedia: data.media,\n\t\t\tmonitor: data.monitor,\n\t\t});\n\t}\n\n\tjoinCall(data) {\n\t\tthis.log('WebRTCTransportClass - joinCall', this.webrtcInstance.room, this.webrtcInstance.selfId);\n\t\tif (data.monitor === true) {\n\t\t\tNotifications.notifyUser(data.to, WEB_RTC_EVENTS.WEB_RTC, WEB_RTC_EVENTS.JOIN, {\n\t\t\t\tfrom: this.webrtcInstance.selfId,\n\t\t\t\troom: this.webrtcInstance.room,\n\t\t\t\tmedia: data.media,\n\t\t\t\tmonitor: data.monitor,\n\t\t\t});\n\t\t} else {\n\t\t\tNotifications.notifyUsersOfRoom(this.webrtcInstance.room, WEB_RTC_EVENTS.WEB_RTC, WEB_RTC_EVENTS.JOIN, {\n\t\t\t\tfrom: this.webrtcInstance.selfId,\n\t\t\t\troom: this.webrtcInstance.room,\n\t\t\t\tmedia: data.media,\n\t\t\t\tmonitor: data.monitor,\n\t\t\t});\n\t\t}\n\t}\n\n\tsendCandidate(data) {\n\t\tdata.from = this.webrtcInstance.selfId;\n\t\tdata.room = this.webrtcInstance.room;\n\t\tthis.log('WebRTCTransportClass - sendCandidate', data);\n\t\tNotifications.notifyUser(data.to, WEB_RTC_EVENTS.WEB_RTC, WEB_RTC_EVENTS.CANDIDATE, data);\n\t}\n\n\tsendDescription(data) {\n\t\tdata.from = this.webrtcInstance.selfId;\n\t\tdata.room = this.webrtcInstance.room;\n\t\tthis.log('WebRTCTransportClass - sendDescription', data);\n\t\tNotifications.notifyUser(data.to, WEB_RTC_EVENTS.WEB_RTC, WEB_RTC_EVENTS.DESCRIPTION, data);\n\t}\n\n\tsendStatus(data) {\n\t\tthis.log('WebRTCTransportClass - sendStatus', data, this.webrtcInstance.room);\n\t\tdata.from = this.webrtcInstance.selfId;\n\t\tNotifications.notifyRoom(this.webrtcInstance.room, WEB_RTC_EVENTS.WEB_RTC, WEB_RTC_EVENTS.STATUS, data);\n\t}\n\n\tonRemoteCall(fn) {\n\t\treturn this.on(WEB_RTC_EVENTS.CALL, fn);\n\t}\n\n\tonRemoteJoin(fn) {\n\t\treturn this.on(WEB_RTC_EVENTS.JOIN, fn);\n\t}\n\n\tonRemoteCandidate(fn) {\n\t\treturn this.on(WEB_RTC_EVENTS.CANDIDATE, fn);\n\t}\n\n\tonRemoteDescription(fn) {\n\t\treturn this.on(WEB_RTC_EVENTS.DESCRIPTION, fn);\n\t}\n\n\tonRemoteStatus(fn) {\n\t\treturn this.on(WEB_RTC_EVENTS.STATUS, fn);\n\t}\n}\n\nclass WebRTCClass {\n\t/*\n  \t\t@param seldId {String}\n  \t\t@param room {String}\n   */\n\n\tconstructor(selfId, room, autoAccept = false) {\n\t\tthis.config = {\n\t\t\ticeServers: [],\n\t\t};\n\t\tthis.debug = false;\n\t\tthis.TransportClass = WebRTCTransportClass;\n\t\tthis.selfId = selfId;\n\t\tthis.room = room;\n\t\tlet servers = settings.get('WebRTC_Servers');\n\t\tif (servers && servers.trim() !== '') {\n\t\t\tservers = servers.replace(/\\s/g, '');\n\t\t\tservers = servers.split(',');\n\n\t\t\tservers.forEach((server) => {\n\t\t\t\tserver = server.split('@');\n\t\t\t\tconst serverConfig = {\n\t\t\t\t\turls: server.pop(),\n\t\t\t\t};\n\t\t\t\tif (server.length === 1) {\n\t\t\t\t\tserver = server[0].split(':');\n\t\t\t\t\tserverConfig.username = decodeURIComponent(server[0]);\n\t\t\t\t\tserverConfig.credential = decodeURIComponent(server[1]);\n\t\t\t\t}\n\t\t\t\tthis.config.iceServers.push(serverConfig);\n\t\t\t});\n\t\t}\n\t\tthis.peerConnections = {};\n\t\tthis.remoteItems = new ReactiveVar([]);\n\t\tthis.remoteItemsById = new ReactiveVar({});\n\t\tthis.callInProgress = new ReactiveVar(false);\n\t\tthis.audioEnabled = new ReactiveVar(false);\n\t\tthis.videoEnabled = new ReactiveVar(false);\n\t\tthis.overlayEnabled = new ReactiveVar(false);\n\t\tthis.screenShareEnabled = new ReactiveVar(false);\n\t\tthis.localUrl = new ReactiveVar();\n\t\tthis.active = false;\n\t\tthis.remoteMonitoring = false;\n\t\tthis.monitor = false;\n\t\tthis.autoAccept = autoAccept;\n\t\tthis.navigator = undefined;\n\t\tconst userAgent = navigator.userAgent.toLocaleLowerCase();\n\n\t\tif (userAgent.indexOf('electron') !== -1) {\n\t\t\tthis.navigator = 'electron';\n\t\t} else if (userAgent.indexOf('chrome') !== -1) {\n\t\t\tthis.navigator = 'chrome';\n\t\t} else if (userAgent.indexOf('firefox') !== -1) {\n\t\t\tthis.navigator = 'firefox';\n\t\t} else if (userAgent.indexOf('safari') !== -1) {\n\t\t\tthis.navigator = 'safari';\n\t\t}\n\n\t\tthis.screenShareAvailable = ['chrome', 'firefox', 'electron'].includes(this.navigator);\n\t\tthis.media = {\n\t\t\tvideo: true,\n\t\t\taudio: true,\n\t\t};\n\t\tthis.transport = new this.TransportClass(this);\n\t\tthis.transport.onRemoteCall(this.onRemoteCall.bind(this));\n\t\tthis.transport.onRemoteJoin(this.onRemoteJoin.bind(this));\n\t\tthis.transport.onRemoteCandidate(this.onRemoteCandidate.bind(this));\n\t\tthis.transport.onRemoteDescription(this.onRemoteDescription.bind(this));\n\t\tthis.transport.onRemoteStatus(this.onRemoteStatus.bind(this));\n\n\t\tMeteor.setInterval(this.checkPeerConnections.bind(this), 1000);\n\n\t\t// Meteor.setInterval(this.broadcastStatus.bind(@), 1000);\n\t}\n\n\tonUserStream(...args) {\n\t\treturn this.transport.onUserStream(...args);\n\t}\n\n\tlog(...args) {\n\t\tif (this.debug === true) {\n\t\t\tconsole.log.apply(console, args);\n\t\t}\n\t}\n\n\tonError(...args) {\n\t\tconsole.error.apply(console, args);\n\t}\n\n\tcheckPeerConnections() {\n\t\tconst { peerConnections } = this;\n\t\tconst date = Date.now();\n\t\tObject.entries(peerConnections).some(([id, peerConnection]) => {\n\t\t\tif (!['connected', 'completed'].includes(peerConnection.iceConnectionState) && peerConnection.createdAt + 5000 < date) {\n\t\t\t\tthis.stopPeerConnection(id);\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t});\n\t}\n\n\tupdateRemoteItems() {\n\t\tconst items = [];\n\t\tconst itemsById = {};\n\t\tconst { peerConnections } = this;\n\n\t\tObject.entries(peerConnections).forEach(([id, peerConnection]) => {\n\t\t\tpeerConnection.getRemoteStreams().forEach((remoteStream) => {\n\t\t\t\tconst item = {\n\t\t\t\t\tid,\n\t\t\t\t\turl: remoteStream,\n\t\t\t\t\tstate: peerConnection.iceConnectionState,\n\t\t\t\t};\n\t\t\t\tswitch (peerConnection.iceConnectionState) {\n\t\t\t\t\tcase 'checking':\n\t\t\t\t\t\titem.stateText = 'Connecting...';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'connected':\n\t\t\t\t\tcase 'completed':\n\t\t\t\t\t\titem.stateText = 'Connected';\n\t\t\t\t\t\titem.connected = true;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'disconnected':\n\t\t\t\t\t\titem.stateText = 'Disconnected';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'failed':\n\t\t\t\t\t\titem.stateText = 'Failed';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'closed':\n\t\t\t\t\t\titem.stateText = 'Closed';\n\t\t\t\t}\n\t\t\t\titems.push(item);\n\t\t\t\titemsById[id] = item;\n\t\t\t});\n\t\t});\n\t\tthis.remoteItems.set(items);\n\t\tthis.remoteItemsById.set(itemsById);\n\t}\n\n\tresetCallInProgress = () => {\n\t\tthis.callInProgress.set(false);\n\t};\n\n\tbroadcastStatus() {\n\t\tif (this.active !== true || this.monitor === true || this.remoteMonitoring === true) {\n\t\t\treturn;\n\t\t}\n\t\tconst remoteConnections = [];\n\t\tconst { peerConnections } = this;\n\t\tObject.keys(peerConnections).entries(([id, { remoteMedia: media }]) => {\n\t\t\tremoteConnections.push({\n\t\t\t\tid,\n\t\t\t\tmedia,\n\t\t\t});\n\t\t});\n\n\t\tthis.transport.sendStatus({\n\t\t\tmedia: this.media,\n\t\t\tremoteConnections,\n\t\t});\n\t}\n\n\t/*\n  \t\t@param data {Object}\n  \t\t\tfrom {String}\n  \t\t\tmedia {Object}\n  \t\t\tremoteConnections {Array[Object]}\n  \t\t\t\tid {String}\n  \t\t\t\tmedia {Object}\n   */\n\n\tonRemoteStatus(data) {\n\t\t// this.log(onRemoteStatus, arguments);\n\t\tthis.callInProgress.set(true);\n\t\tMeteor.clearTimeout(this.callInProgressTimeout);\n\t\tthis.callInProgressTimeout = Meteor.setTimeout(this.resetCallInProgress, 2000);\n\t\tif (this.active !== true) {\n\t\t\treturn;\n\t\t}\n\t\tconst remoteConnections = [\n\t\t\t{\n\t\t\t\tid: data.from,\n\t\t\t\tmedia: data.media,\n\t\t\t},\n\t\t\t...data.remoteConnections,\n\t\t];\n\n\t\tremoteConnections.forEach((remoteConnection) => {\n\t\t\tif (remoteConnection.id !== this.selfId && this.peerConnections[remoteConnection.id] == null) {\n\t\t\t\tthis.log('reconnecting with', remoteConnection.id);\n\t\t\t\tthis.onRemoteJoin({\n\t\t\t\t\tfrom: remoteConnection.id,\n\t\t\t\t\tmedia: remoteConnection.media,\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\t/*\n  \t\t@param id {String}\n   */\n\n\tgetPeerConnection(id) {\n\t\tif (this.peerConnections[id] != null) {\n\t\t\treturn this.peerConnections[id];\n\t\t}\n\t\tconst peerConnection = new RTCPeerConnection(this.config);\n\n\t\tpeerConnection.createdAt = Date.now();\n\t\tpeerConnection.remoteMedia = {};\n\t\tthis.peerConnections[id] = peerConnection;\n\t\tconst eventNames = [\n\t\t\t'icecandidate',\n\t\t\t'addstream',\n\t\t\t'removestream',\n\t\t\t'iceconnectionstatechange',\n\t\t\t'datachannel',\n\t\t\t'identityresult',\n\t\t\t'idpassertionerror',\n\t\t\t'idpvalidationerror',\n\t\t\t'negotiationneeded',\n\t\t\t'peeridentity',\n\t\t\t'signalingstatechange',\n\t\t];\n\n\t\teventNames.forEach((eventName) => {\n\t\t\tpeerConnection.addEventListener(eventName, (e) => {\n\t\t\t\tthis.log(id, e.type, e);\n\t\t\t});\n\t\t});\n\n\t\tpeerConnection.addEventListener('icecandidate', (e) => {\n\t\t\tif (e.candidate == null) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tthis.transport.sendCandidate({\n\t\t\t\tto: id,\n\t\t\t\tcandidate: {\n\t\t\t\t\tcandidate: e.candidate.candidate,\n\t\t\t\t\tsdpMLineIndex: e.candidate.sdpMLineIndex,\n\t\t\t\t\tsdpMid: e.candidate.sdpMid,\n\t\t\t\t},\n\t\t\t});\n\t\t});\n\t\tpeerConnection.addEventListener('addstream', () => {\n\t\t\tthis.updateRemoteItems();\n\t\t});\n\t\tpeerConnection.addEventListener('removestream', () => {\n\t\t\tthis.updateRemoteItems();\n\t\t});\n\t\tpeerConnection.addEventListener('iceconnectionstatechange', () => {\n\t\t\tif (\n\t\t\t\t(peerConnection.iceConnectionState === 'disconnected' || peerConnection.iceConnectionState === 'closed') &&\n\t\t\t\tpeerConnection === this.peerConnections[id]\n\t\t\t) {\n\t\t\t\tthis.stopPeerConnection(id);\n\t\t\t\tMeteor.setTimeout(() => {\n\t\t\t\t\tif (Object.keys(this.peerConnections).length === 0) {\n\t\t\t\t\t\tthis.stop();\n\t\t\t\t\t}\n\t\t\t\t}, 3000);\n\t\t\t}\n\t\t\tthis.updateRemoteItems();\n\t\t});\n\t\treturn peerConnection;\n\t}\n\n\t_getUserMedia(media, onSuccess, onError) {\n\t\tconst onSuccessLocal = (stream) => {\n\t\t\tif (AudioContext && stream.getAudioTracks().length > 0) {\n\t\t\t\tconst audioContext = new AudioContext();\n\t\t\t\tconst source = audioContext.createMediaStreamSource(stream);\n\t\t\t\tconst volume = audioContext.createGain();\n\t\t\t\tsource.connect(volume);\n\t\t\t\tconst peer = audioContext.createMediaStreamDestination();\n\t\t\t\tvolume.connect(peer);\n\t\t\t\tvolume.gain.value = 0.6;\n\t\t\t\tstream.removeTrack(stream.getAudioTracks()[0]);\n\t\t\t\tstream.addTrack(peer.stream.getAudioTracks()[0]);\n\t\t\t\tstream.volume = volume;\n\t\t\t\tthis.audioContext = audioContext;\n\t\t\t}\n\t\t\tonSuccess(stream);\n\t\t};\n\t\tif (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {\n\t\t\treturn navigator.mediaDevices.getUserMedia(media).then(onSuccessLocal).catch(onError);\n\t\t}\n\n\t\tnavigator.getUserMedia(media, onSuccessLocal, onError);\n\t}\n\n\tgetUserMedia(media, onSuccess, onError = this.onError) {\n\t\tif (media.desktop !== true) {\n\t\t\tthis._getUserMedia(media, onSuccess, onError);\n\t\t\treturn;\n\t\t}\n\t\tif (this.screenShareAvailable !== true) {\n\t\t\tconsole.log('Screen share is not avaliable');\n\t\t\treturn;\n\t\t}\n\t\tconst getScreen = (audioStream) => {\n\t\t\tconst refresh = function () {\n\t\t\t\tmodal.open({\n\t\t\t\t\ttype: 'warning',\n\t\t\t\t\ttitle: TAPi18n.__('Refresh_your_page_after_install_to_enable_screen_sharing'),\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tconst isChromeExtensionInstalled = this.navigator === 'chrome' && ChromeScreenShare.installed;\n\t\t\tconst isFirefoxExtensionInstalled = this.navigator === 'firefox' && window.rocketchatscreenshare != null;\n\n\t\t\tif (!isChromeExtensionInstalled && !isFirefoxExtensionInstalled) {\n\t\t\t\tmodal.open(\n\t\t\t\t\t{\n\t\t\t\t\t\ttype: 'warning',\n\t\t\t\t\t\ttitle: TAPi18n.__('Screen_Share'),\n\t\t\t\t\t\ttext: TAPi18n.__('You_need_install_an_extension_to_allow_screen_sharing'),\n\t\t\t\t\t\thtml: true,\n\t\t\t\t\t\tshowCancelButton: true,\n\t\t\t\t\t\tconfirmButtonText: TAPi18n.__('Install_Extension'),\n\t\t\t\t\t\tcancelButtonText: TAPi18n.__('Cancel'),\n\t\t\t\t\t},\n\t\t\t\t\t(isConfirm) => {\n\t\t\t\t\t\tif (isConfirm) {\n\t\t\t\t\t\t\tif (this.navigator === 'chrome') {\n\t\t\t\t\t\t\t\tconst url = 'https://chrome.google.com/webstore/detail/rocketchat-screen-share/nocfbnnmjnndkbipkabodnheejiegccf';\n\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\tchrome.webstore.install(url, refresh, function () {\n\t\t\t\t\t\t\t\t\t\twindow.open(url);\n\t\t\t\t\t\t\t\t\t\trefresh();\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t} catch (_error) {\n\t\t\t\t\t\t\t\t\tconsole.log(_error);\n\t\t\t\t\t\t\t\t\twindow.open(url);\n\t\t\t\t\t\t\t\t\trefresh();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (this.navigator === 'firefox') {\n\t\t\t\t\t\t\t\twindow.open('https://addons.mozilla.org/en-GB/firefox/addon/rocketchat-screen-share/');\n\t\t\t\t\t\t\t\trefresh();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t\treturn onError(false);\n\t\t\t}\n\n\t\t\tconst getScreenSuccess = (stream) => {\n\t\t\t\tif (audioStream != null) {\n\t\t\t\t\tstream.addTrack(audioStream.getAudioTracks()[0]);\n\t\t\t\t}\n\t\t\t\tonSuccess(stream);\n\t\t\t};\n\t\t\tif (this.navigator === 'firefox') {\n\t\t\t\tmedia = {\n\t\t\t\t\taudio: media.audio,\n\t\t\t\t\tvideo: {\n\t\t\t\t\t\tmozMediaSource: 'window',\n\t\t\t\t\t\tmediaSource: 'window',\n\t\t\t\t\t},\n\t\t\t\t};\n\t\t\t\tthis._getUserMedia(media, getScreenSuccess, onError);\n\t\t\t} else {\n\t\t\t\tChromeScreenShare.getSourceId(this.navigator, (id) => {\n\t\t\t\t\tmedia = {\n\t\t\t\t\t\taudio: false,\n\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\tmandatory: {\n\t\t\t\t\t\t\t\tchromeMediaSource: 'desktop',\n\t\t\t\t\t\t\t\tchromeMediaSourceId: id,\n\t\t\t\t\t\t\t\tmaxWidth: 1280,\n\t\t\t\t\t\t\t\tmaxHeight: 720,\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t\tthis._getUserMedia(media, getScreenSuccess, onError);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t\tif (this.navigator === 'firefox' || media.audio == null || media.audio === false) {\n\t\t\tgetScreen();\n\t\t} else {\n\t\t\tconst getAudioSuccess = (audioStream) => {\n\t\t\t\tgetScreen(audioStream);\n\t\t\t};\n\t\t\tconst getAudioError = () => {\n\t\t\t\tgetScreen();\n\t\t\t};\n\n\t\t\tthis._getUserMedia(\n\t\t\t\t{\n\t\t\t\t\taudio: media.audio,\n\t\t\t\t},\n\t\t\t\tgetAudioSuccess,\n\t\t\t\tgetAudioError,\n\t\t\t);\n\t\t}\n\t}\n\n\t/*\n  \t\t@param callback {Function}\n   */\n\n\tgetLocalUserMedia(callback, ...args) {\n\t\tthis.log('getLocalUserMedia', [callback, ...args]);\n\t\tif (this.localStream != null) {\n\t\t\treturn callback(null, this.localStream);\n\t\t}\n\t\tconst onSuccess = (stream) => {\n\t\t\tthis.localStream = stream;\n\t\t\t!this.audioEnabled.get() && this.disableAudio();\n\t\t\t!this.videoEnabled.get() && this.disableVideo();\n\t\t\tthis.localUrl.set(stream);\n\t\t\tconst { peerConnections } = this;\n\t\t\tObject.entries(peerConnections).forEach(([, peerConnection]) => peerConnection.addStream(stream));\n\t\t\tdocument.querySelector('video#localVideo').srcObject = stream;\n\t\t\tcallback(null, this.localStream);\n\t\t};\n\t\tconst onError = (error) => {\n\t\t\tcallback(false);\n\t\t\tthis.onError(error);\n\t\t};\n\t\tthis.getUserMedia(this.media, onSuccess, onError);\n\t}\n\n\t/*\n  \t\t@param id {String}\n   */\n\n\tstopPeerConnection = (id) => {\n\t\tconst peerConnection = this.peerConnections[id];\n\t\tif (peerConnection == null) {\n\t\t\treturn;\n\t\t}\n\t\tdelete this.peerConnections[id];\n\t\tpeerConnection.close();\n\t\tthis.updateRemoteItems();\n\t};\n\n\tstopAllPeerConnections() {\n\t\tconst { peerConnections } = this;\n\n\t\tObject.keys(peerConnections).forEach(this.stopPeerConnection);\n\n\t\twindow.audioContext && window.audioContext.close();\n\t}\n\n\tsetAudioEnabled(enabled = true) {\n\t\tif (this.localStream != null) {\n\t\t\tthis.localStream.getAudioTracks().forEach(function (audio) {\n\t\t\t\taudio.enabled = enabled;\n\t\t\t});\n\t\t\tthis.audioEnabled.set(enabled);\n\t\t}\n\t}\n\n\tdisableAudio() {\n\t\tthis.setAudioEnabled(false);\n\t}\n\n\tenableAudio() {\n\t\tthis.setAudioEnabled(true);\n\t}\n\n\ttoggleAudio() {\n\t\tif (this.audioEnabled.get()) {\n\t\t\treturn this.disableAudio();\n\t\t}\n\t\treturn this.enableAudio();\n\t}\n\n\tsetVideoEnabled(enabled = true) {\n\t\tif (this.localStream != null) {\n\t\t\tthis.localStream.getVideoTracks().forEach(function (video) {\n\t\t\t\tvideo.enabled = enabled;\n\t\t\t});\n\t\t\tthis.videoEnabled.set(enabled);\n\t\t}\n\t}\n\n\tdisableScreenShare() {\n\t\tthis.setScreenShareEnabled(false);\n\t}\n\n\tenableScreenShare() {\n\t\tthis.setScreenShareEnabled(true);\n\t}\n\n\tsetScreenShareEnabled(enabled = true) {\n\t\tif (this.localStream != null) {\n\t\t\tthis.media.desktop = enabled;\n\t\t\tdelete this.localStream;\n\t\t\tthis.getLocalUserMedia((err) => {\n\t\t\t\tif (err != null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tthis.screenShareEnabled.set(enabled);\n\t\t\t\tthis.stopAllPeerConnections();\n\t\t\t\tthis.joinCall();\n\t\t\t});\n\t\t}\n\t}\n\n\tdisableVideo() {\n\t\tthis.setVideoEnabled(false);\n\t}\n\n\tenableVideo() {\n\t\tthis.setVideoEnabled(true);\n\t}\n\n\ttoggleVideo() {\n\t\tif (this.videoEnabled.get()) {\n\t\t\treturn this.disableVideo();\n\t\t}\n\t\treturn this.enableVideo();\n\t}\n\n\tstop() {\n\t\tthis.active = false;\n\t\tthis.monitor = false;\n\t\tthis.remoteMonitoring = false;\n\t\tif (this.localStream != null && typeof this.localStream !== 'undefined') {\n\t\t\tthis.localStream.getTracks().forEach((track) => track.stop());\n\t\t}\n\t\tthis.localUrl.set(undefined);\n\t\tdelete this.localStream;\n\t\tthis.stopAllPeerConnections();\n\t}\n\n\t/*\n  \t\t@param media {Object}\n  \t\t\taudio {Boolean}\n  \t\t\tvideo {Boolean}\n   */\n\n\tstartCall(media = {}, ...args) {\n\t\tthis.log('startCall', [media, ...args]);\n\t\tthis.media = media;\n\t\tthis.getLocalUserMedia(() => {\n\t\t\tthis.active = true;\n\t\t\tthis.transport.startCall({\n\t\t\t\tmedia: this.media,\n\t\t\t});\n\t\t});\n\t}\n\n\tstartCallAsMonitor(media = {}, ...args) {\n\t\tthis.log('startCallAsMonitor', [media, ...args]);\n\t\tthis.media = media;\n\t\tthis.active = true;\n\t\tthis.monitor = true;\n\t\tthis.transport.startCall({\n\t\t\tmedia: this.media,\n\t\t\tmonitor: true,\n\t\t});\n\t}\n\n\t/*\n  \t\t@param data {Object}\n  \t\t\tfrom {String}\n  \t\t\tmonitor {Boolean}\n  \t\t\tmedia {Object}\n  \t\t\t\taudio {Boolean}\n  \t\t\t\tvideo {Boolean}\n   */\n\n\tonRemoteCall(data) {\n\t\tif (this.autoAccept === true) {\n\t\t\tMeteor.defer(() => {\n\t\t\t\tthis.joinCall({\n\t\t\t\t\tto: data.from,\n\t\t\t\t\tmonitor: data.monitor,\n\t\t\t\t\tmedia: data.media,\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn;\n\t\t}\n\n\t\tconst user = Meteor.users.findOne(data.from);\n\t\tlet fromUsername = undefined;\n\t\tif (user && user.username) {\n\t\t\tfromUsername = user.username;\n\t\t}\n\t\tconst subscription = ChatSubscription.findOne({\n\t\t\trid: data.room,\n\t\t});\n\n\t\tlet icon;\n\t\tlet title;\n\t\tif (data.monitor === true) {\n\t\t\ticon = 'eye';\n\t\t\ttitle = t('WebRTC_monitor_call_from_%s', fromUsername);\n\t\t} else if (subscription && subscription.t === 'd') {\n\t\t\tif (data.media && data.media.video) {\n\t\t\t\ticon = 'videocam';\n\t\t\t\ttitle = t('WebRTC_direct_video_call_from_%s', fromUsername);\n\t\t\t} else {\n\t\t\t\ticon = 'phone';\n\t\t\t\ttitle = t('WebRTC_direct_audio_call_from_%s', fromUsername);\n\t\t\t}\n\t\t} else if (data.media && data.media.video) {\n\t\t\ticon = 'videocam';\n\t\t\ttitle = t('WebRTC_group_video_call_from_%s', subscription.name);\n\t\t} else {\n\t\t\ticon = 'phone';\n\t\t\ttitle = t('WebRTC_group_audio_call_from_%s', subscription.name);\n\t\t}\n\t\tmodal.open(\n\t\t\t{\n\t\t\t\ttitle: `<i class='icon-${icon} alert-icon success-color'></i>${title}`,\n\t\t\t\ttext: t('Do_you_want_to_accept'),\n\t\t\t\thtml: true,\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tconfirmButtonText: t('Yes'),\n\t\t\t\tcancelButtonText: t('No'),\n\t\t\t},\n\t\t\t(isConfirm) => {\n\t\t\t\tif (isConfirm) {\n\t\t\t\t\tgoToRoomById(data.room);\n\t\t\t\t\treturn this.joinCall({\n\t\t\t\t\t\tto: data.from,\n\t\t\t\t\t\tmonitor: data.monitor,\n\t\t\t\t\t\tmedia: data.media,\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tthis.stop();\n\t\t\t},\n\t\t);\n\t}\n\n\t/*\n  \t\t@param data {Object}\n  \t\t\tto {String}\n  \t\t\tmonitor {Boolean}\n  \t\t\tmedia {Object}\n  \t\t\t\taudio {Boolean}\n  \t\t\t\tvideo {Boolean}\n  \t\t\t\tdesktop {Boolean}\n   */\n\n\tjoinCall(data = {}, ...args) {\n\t\tdata.media = this.media;\n\t\tthis.log('joinCall', [data, ...args]);\n\t\tthis.getLocalUserMedia(() => {\n\t\t\tthis.remoteMonitoring = data.monitor;\n\t\t\tthis.active = true;\n\t\t\tthis.transport.joinCall(data);\n\t\t});\n\t}\n\n\tonRemoteJoin(data, ...args) {\n\t\tif (this.active !== true) {\n\t\t\treturn;\n\t\t}\n\t\tthis.log('onRemoteJoin', [data, ...args]);\n\t\tlet peerConnection = this.getPeerConnection(data.from);\n\n\t\t// needsRefresh = false\n\t\t// if peerConnection.iceConnectionState isnt 'new'\n\t\t// needsAudio = data.media.audio is true and peerConnection.remoteMedia.audio isnt true\n\t\t// needsVideo = data.media.video is true and peerConnection.remoteMedia.video isnt true\n\t\t// needsRefresh = needsAudio or needsVideo or data.media.desktop isnt peerConnection.remoteMedia.desktop\n\n\t\t// # if peerConnection.signalingState is \"have-local-offer\" or needsRefresh\n\n\t\tif (peerConnection.signalingState !== 'checking') {\n\t\t\tthis.stopPeerConnection(data.from);\n\t\t\tpeerConnection = this.getPeerConnection(data.from);\n\t\t}\n\t\tif (peerConnection.iceConnectionState !== 'new') {\n\t\t\treturn;\n\t\t}\n\t\tpeerConnection.remoteMedia = data.media;\n\t\tif (this.localStream) {\n\t\t\tpeerConnection.addStream(this.localStream);\n\t\t}\n\t\tconst onOffer = (offer) => {\n\t\t\tconst onLocalDescription = () => {\n\t\t\t\tthis.transport.sendDescription({\n\t\t\t\t\tto: data.from,\n\t\t\t\t\ttype: 'offer',\n\t\t\t\t\tts: peerConnection.createdAt,\n\t\t\t\t\tmedia: this.media,\n\t\t\t\t\tdescription: {\n\t\t\t\t\t\tsdp: offer.sdp,\n\t\t\t\t\t\ttype: offer.type,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tpeerConnection.setLocalDescription(new RTCSessionDescription(offer), onLocalDescription, this.onError);\n\t\t};\n\n\t\tif (data.monitor === true) {\n\t\t\tpeerConnection.createOffer(onOffer, this.onError, {\n\t\t\t\tmandatory: {\n\t\t\t\t\tOfferToReceiveAudio: data.media.audio,\n\t\t\t\t\tOfferToReceiveVideo: data.media.video,\n\t\t\t\t},\n\t\t\t});\n\t\t} else {\n\t\t\tpeerConnection.createOffer(onOffer, this.onError);\n\t\t}\n\t}\n\n\tonRemoteOffer(data, ...args) {\n\t\tif (this.active !== true) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.log('onRemoteOffer', [data, ...args]);\n\t\tlet peerConnection = this.getPeerConnection(data.from);\n\n\t\tif (['have-local-offer', 'stable'].includes(peerConnection.signalingState) && peerConnection.createdAt < data.ts) {\n\t\t\tthis.stopPeerConnection(data.from);\n\t\t\tpeerConnection = this.getPeerConnection(data.from);\n\t\t}\n\n\t\tif (peerConnection.iceConnectionState !== 'new') {\n\t\t\treturn;\n\t\t}\n\n\t\tpeerConnection.setRemoteDescription(new RTCSessionDescription(data.description));\n\n\t\ttry {\n\t\t\tif (this.localStream) {\n\t\t\t\tpeerConnection.addStream(this.localStream);\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\n\t\tconst onAnswer = (answer) => {\n\t\t\tconst onLocalDescription = () => {\n\t\t\t\tthis.transport.sendDescription({\n\t\t\t\t\tto: data.from,\n\t\t\t\t\ttype: 'answer',\n\t\t\t\t\tts: peerConnection.createdAt,\n\t\t\t\t\tdescription: {\n\t\t\t\t\t\tsdp: answer.sdp,\n\t\t\t\t\t\ttype: answer.type,\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t};\n\n\t\t\tpeerConnection.setLocalDescription(new RTCSessionDescription(answer), onLocalDescription, this.onError);\n\t\t};\n\n\t\tpeerConnection.createAnswer(onAnswer, this.onError);\n\t}\n\n\t/*\n  \t\t@param data {Object}\n  \t\t\tto {String}\n  \t\t\tfrom {String}\n  \t\t\tcandidate {RTCIceCandidate JSON encoded}\n   */\n\n\tonRemoteCandidate(data, ...args) {\n\t\tif (this.active !== true) {\n\t\t\treturn;\n\t\t}\n\t\tif (data.to !== this.selfId) {\n\t\t\treturn;\n\t\t}\n\t\tthis.log('onRemoteCandidate', [data, ...args]);\n\t\tconst peerConnection = this.getPeerConnection(data.from);\n\t\tif (\n\t\t\tpeerConnection.iceConnectionState !== 'closed' &&\n\t\t\tpeerConnection.iceConnectionState !== 'failed' &&\n\t\t\tpeerConnection.iceConnectionState !== 'disconnected' &&\n\t\t\tpeerConnection.iceConnectionState !== 'completed'\n\t\t) {\n\t\t\tpeerConnection.addIceCandidate(new RTCIceCandidate(data.candidate));\n\t\t}\n\t\tdocument.querySelector('video#remoteVideo').srcObject = this.remoteItems.get()[0]?.url;\n\t}\n\n\t/*\n  \t\t@param data {Object}\n  \t\t\tto {String}\n  \t\t\tfrom {String}\n  \t\t\ttype {String} [offer, answer]\n  \t\t\tdescription {RTCSessionDescription JSON encoded}\n  \t\t\tts {Integer}\n  \t\t\tmedia {Object}\n  \t\t\t\taudio {Boolean}\n  \t\t\t\tvideo {Boolean}\n  \t\t\t\tdesktop {Boolean}\n   */\n\n\tonRemoteDescription(data, ...args) {\n\t\tif (this.active !== true) {\n\t\t\treturn;\n\t\t}\n\t\tif (data.to !== this.selfId) {\n\t\t\treturn;\n\t\t}\n\t\tthis.log('onRemoteDescription', [data, ...args]);\n\t\tconst peerConnection = this.getPeerConnection(data.from);\n\t\tif (data.type === 'offer') {\n\t\t\tpeerConnection.remoteMedia = data.media;\n\t\t\tthis.onRemoteOffer({\n\t\t\t\tfrom: data.from,\n\t\t\t\tts: data.ts,\n\t\t\t\tdescription: data.description,\n\t\t\t});\n\t\t} else {\n\t\t\tpeerConnection.setRemoteDescription(new RTCSessionDescription(data.description));\n\t\t}\n\t}\n}\n\nconst WebRTC = new (class {\n\tconstructor() {\n\t\tthis.instancesByRoomId = {};\n\t}\n\n\tgetInstanceByRoomId(rid, visitorId = null) {\n\t\tlet enabled = false;\n\t\tif (!visitorId) {\n\t\t\tconst subscription = ChatSubscription.findOne({ rid });\n\t\t\tif (!subscription) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tswitch (subscription.t) {\n\t\t\t\tcase 'd':\n\t\t\t\t\tenabled = settings.get('WebRTC_Enable_Direct');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'p':\n\t\t\t\t\tenabled = settings.get('WebRTC_Enable_Private');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'c':\n\t\t\t\t\tenabled = settings.get('WebRTC_Enable_Channel');\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'l':\n\t\t\t\t\tenabled = settings.get('Omnichannel_call_provider') === 'WebRTC';\n\t\t\t}\n\t\t} else {\n\t\t\tenabled = settings.get('Omnichannel_call_provider') === 'WebRTC';\n\t\t}\n\t\tenabled = enabled && settings.get('WebRTC_Enabled');\n\t\tif (enabled === false) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.instancesByRoomId[rid] == null) {\n\t\t\tlet uid = Meteor.userId();\n\t\t\tlet autoAccept = false;\n\t\t\tif (visitorId) {\n\t\t\t\tuid = visitorId;\n\t\t\t\tautoAccept = true;\n\t\t\t}\n\t\t\tthis.instancesByRoomId[rid] = new WebRTCClass(uid, rid, autoAccept);\n\t\t}\n\t\treturn this.instancesByRoomId[rid];\n\t}\n})();\n\nMeteor.startup(function () {\n\tTracker.autorun(function () {\n\t\tif (Meteor.userId()) {\n\t\t\tNotifications.onUser(WEB_RTC_EVENTS.WEB_RTC, (type, data) => {\n\t\t\t\tif (data.room == null) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst webrtc = WebRTC.getInstanceByRoomId(data.room);\n\t\t\t\twebrtc.onUserStream(type, data);\n\t\t\t});\n\t\t}\n\t});\n});\n\nexport { WebRTC };\n","import { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport toastr from 'toastr';\n\nimport { actionLinks } from '../../action-links/client';\nimport { APIClient } from '../../utils/client';\nimport { Rooms } from '../../models/client';\nimport { IMessage } from '../../../definition/IMessage';\nimport { Notifications } from '../../notifications/client';\n\nactionLinks.register('joinLivechatWebRTCCall', (message: IMessage) => {\n\tconst { callStatus, _id } = Rooms.findOne({ _id: message.rid });\n\tif (callStatus === 'declined' || callStatus === 'ended') {\n\t\ttoastr.info(TAPi18n.__('Call_Already_Ended'));\n\t\treturn;\n\t}\n\twindow.open(`/meet/${_id}`, _id);\n});\n\nactionLinks.register('endLivechatWebRTCCall', async (message: IMessage) => {\n\tconst { callStatus, _id } = Rooms.findOne({ _id: message.rid });\n\tif (callStatus === 'declined' || callStatus === 'ended') {\n\t\ttoastr.info(TAPi18n.__('Call_Already_Ended'));\n\t\treturn;\n\t}\n\tawait APIClient.v1.put(`livechat/webrtc.call/${message._id}`, {}, { rid: _id, status: 'ended' });\n\tNotifications.notifyRoom(_id, 'webrtc', 'callStatus', { callStatus: 'ended' });\n});\n","window.RTCPeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection;\nwindow.RTCSessionDescription = window.RTCSessionDescription || window.mozRTCSessionDescription || window.webkitRTCSessionDescription;\nwindow.RTCIceCandidate = window.RTCIceCandidate || window.mozRTCIceCandidate || window.webkitRTCIceCandidate;\nwindow.RTCSessionDescription = window.RTCSessionDescription || window.mozRTCSessionDescription || window.webkitRTCSessionDescription;\nwindow.AudioContext = window.AudioContext || window.mozAudioContext || window.webkitAudioContext;\nnavigator.getUserMedia = navigator.getUserMedia || navigator.mozGetUserMedia || navigator.webkitGetUserMedia;\n","import './adapter';\nimport './tabBar';\nimport './actionLink';\n\nexport * from './WebRTCClass';\n","import { fireGlobalEvent } from '../../../client/lib/utils/fireGlobalEvent';\n\nexport const ChromeScreenShare = {\n\tcallbacks: {},\n\tinstalled: false,\n\tinit() {\n\t\tthis.callbacks['get-RocketChatScreenSharingExtensionVersion'] = (version) => {\n\t\t\tif (version) {\n\t\t\t\tthis.installed = true;\n\t\t\t}\n\t\t};\n\t\twindow.postMessage('get-RocketChatScreenSharingExtensionVersion', '*');\n\t},\n\tgetSourceId(navigator, callback) {\n\t\tif (callback == null) {\n\t\t\tthrow new Error('\"callback\" parameter is mandatory.');\n\t\t}\n\t\tthis.callbacks.getSourceId = callback;\n\t\tif (navigator === 'electron') {\n\t\t\treturn fireGlobalEvent('get-sourceId', '*');\n\t\t}\n\t\treturn window.postMessage('get-sourceId', '*');\n\t},\n};\n\nChromeScreenShare.init();\n\nwindow.addEventListener('message', function (e) {\n\tif (e.origin !== window.location.origin) {\n\t\treturn;\n\t}\n\tif (e.data === 'PermissionDeniedError') {\n\t\tif (ChromeScreenShare.callbacks.getSourceId != null) {\n\t\t\treturn ChromeScreenShare.callbacks.getSourceId('PermissionDeniedError');\n\t\t}\n\t\tthrow new Error('PermissionDeniedError');\n\t}\n\tif (e.data.version != null) {\n\t\tChromeScreenShare.callbacks['get-RocketChatScreenSharingExtensionVersion'] &&\n\t\t\tChromeScreenShare.callbacks['get-RocketChatScreenSharingExtensionVersion'](e.data.version);\n\t} else if (e.data.sourceId != null) {\n\t\treturn typeof ChromeScreenShare.callbacks.getSourceId === 'function' && ChromeScreenShare.callbacks.getSourceId(e.data.sourceId);\n\t}\n});\n","import { useMemo, useCallback } from 'react';\n\nimport { useSetting } from '../../../client/contexts/SettingsContext';\nimport { addAction } from '../../../client/views/room/lib/Toolbox';\nimport { APIClient } from '../../utils/client';\n\naddAction('webRTCVideo', ({ room }) => {\n\tconst enabled = useSetting('WebRTC_Enabled') && useSetting('Omnichannel_call_provider') === 'WebRTC' && room.servedBy;\n\n\tconst handleClick = useCallback(async (): Promise<void> => {\n\t\tif (!room.callStatus || room.callStatus === 'declined' || room.callStatus === 'ended') {\n\t\t\tawait APIClient.v1.get('livechat/webrtc.call', { rid: room._id });\n\t\t}\n\t\twindow.open(`/meet/${room._id}`, room._id);\n\t}, [room._id, room.callStatus]);\n\n\treturn useMemo(\n\t\t() =>\n\t\t\tenabled\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['live'],\n\t\t\t\t\t\tid: 'webRTCVideo',\n\t\t\t\t\t\ttitle: 'WebRTC_Call',\n\t\t\t\t\t\ticon: 'phone',\n\t\t\t\t\t\taction: handleClick,\n\t\t\t\t\t\tfull: true,\n\t\t\t\t\t\torder: 4,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[enabled, handleClick],\n\t);\n});\n","export const WEB_RTC_EVENTS = {\n\tWEB_RTC: 'webrtc',\n\tSTATUS: 'status',\n\tCALL: 'call',\n\tJOIN: 'join',\n\tCANDIDATE: 'candidate',\n\tDESCRIPTION: 'description',\n};\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nimport { APIClient } from '../../../../../../../app/utils/client';\nimport './visitorEditCustomFieldsForm.html';\n\nTemplate.visitorEditCustomFieldsForm.helpers({\n\tavailablePriorities() {\n\t\treturn Template.instance().priorities.get();\n\t},\n\tpriorityId() {\n\t\treturn Template.instance().roomPriority.get();\n\t},\n\tshowPriorities() {\n\t\treturn Template.instance().priorities.get().length > 0;\n\t},\n});\n\nTemplate.visitorEditCustomFieldsForm.onCreated(async function () {\n\tthis.priorities = new ReactiveVar([]);\n\tthis.roomPriority = new ReactiveVar(null);\n\n\tconst { priorityId } = this.data;\n\tif (priorityId) {\n\t\tthis.roomPriority.set(priorityId);\n\t}\n\tconst { priorities } = await APIClient.v1.get('livechat/priorities.list');\n\tthis.priorities.set(priorities);\n});\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\n\nimport { APIClient } from '../../../../../../../app/utils/client';\nimport './visitorInfoCustomForm.html';\n\nTemplate.visitorInfoCustomForm.helpers({\n\tpriority() {\n\t\treturn Template.instance().priority.get();\n\t},\n});\n\nTemplate.visitorInfoCustomForm.onCreated(function () {\n\tthis.priority = new ReactiveVar(null);\n\n\tthis.autorun(async () => {\n\t\t// To make this template reactive we expect a ReactiveVar through the data property,\n\t\t// because the parent form may not be rerender, only the dynamic template data\n\t\tconst { priorityId = null } = this.data.get();\n\t\tlet priority;\n\n\t\tif (priorityId) {\n\t\t\tpriority = await APIClient.v1.get(`livechat/priorities.getOne?priorityId=${priorityId}`);\n\t\t}\n\n\t\tthis.priority.set(priority);\n\t});\n});\n","import { addCustomFormTemplate } from '../../../../../../app/livechat/client/views/app/customTemplates/register';\nimport './customTemplates/visitorEditCustomFieldsForm';\nimport './customTemplates/visitorInfoCustomForm';\n\naddCustomFormTemplate('livechatDepartmentForm', 'livechatDepartmentCustomFieldsForm');\naddCustomFormTemplate('livechatVisitorEditForm', 'visitorEditCustomFieldsForm');\naddCustomFormTemplate('livechatVisitorInfo', 'visitorInfoCustomForm');\n","import { IBusinessHourBehavior } from '../../../../../../app/livechat/client/views/app/business-hours/IBusinessHourBehavior';\nimport { ILivechatBusinessHour, LivechatBusinessHourTypes } from '../../../../../../definition/ILivechatBusinessHour';\n\nexport class MultipleBusinessHoursBehavior implements IBusinessHourBehavior {\n\tgetView(): string {\n\t\treturn 'livechatBusinessHours';\n\t}\n\n\tshowCustomTemplate(businessHourData: ILivechatBusinessHour): boolean {\n\t\treturn !businessHourData._id || businessHourData.type !== LivechatBusinessHourTypes.DEFAULT;\n\t}\n\n\tshowTimezoneTemplate(): boolean {\n\t\treturn true;\n\t}\n\n\tshowBackButton(): boolean {\n\t\treturn true;\n\t}\n}\n","import { registerOmnichannelSidebarItem } from '../../../../../client/views/omnichannel/sidebarItems';\nimport { hasPermission } from '../../../../../app/authorization/client';\n\nregisterOmnichannelSidebarItem({\n\thref: 'omnichannel-monitors',\n\ti18nLabel: 'Livechat_Monitors',\n\tpermissionGranted: () => hasPermission('manage-livechat-monitors'),\n});\n\nregisterOmnichannelSidebarItem({\n\thref: 'omnichannel/units',\n\ti18nLabel: 'Units',\n\tpermissionGranted: () => hasPermission('manage-livechat-units'),\n});\n\nregisterOmnichannelSidebarItem({\n\thref: 'omnichannel-canned-responses',\n\ti18nLabel: 'Canned_Responses',\n\tpermissionGranted: () => hasPermission('manage-livechat-canned-responses'),\n});\n\nregisterOmnichannelSidebarItem({\n\thref: 'omnichannel/tags',\n\ti18nLabel: 'Tags',\n\tpermissionGranted: () => hasPermission('manage-livechat-tags'),\n});\n\nregisterOmnichannelSidebarItem({\n\thref: 'omnichannel/priorities',\n\ti18nLabel: 'Priorities',\n\tpermissionGranted: () => hasPermission('manage-livechat-priorities'),\n});\n","import { SingleBusinessHourBehavior } from '../../../../app/livechat/client/views/app/business-hours/Single';\n\nexport class EESingleBusinessHourBehaviour extends SingleBusinessHourBehavior {\n\tshowTimezoneTemplate(): boolean {\n\t\treturn true;\n\t}\n}\n","import { hasLicense } from '../../license/client';\nimport '../lib/messageTypes';\nimport './route';\nimport './startup';\n\nhasLicense('livechat-enterprise').then((enabled) => {\n\tif (!enabled) {\n\t\treturn;\n\t}\n\n\trequire('./views/app/registerCustomTemplates');\n\trequire('./views/livechatSideNavItems');\n\trequire('./views/business-hours/Multiple');\n\trequire('../lib/QuickActions/defaultActions');\n\trequire('./messageTypes');\n});\n","import { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { MessageTypes } from '../../../../app/ui-utils/client';\n\nMessageTypes.registerType({\n\tid: 'livechat_transfer_history_fallback',\n\tsystem: true,\n\tmessage: 'New_chat_transfer_fallback',\n\tdata(message: any) {\n\t\tif (!message.transferData) {\n\t\t\treturn;\n\t\t}\n\t\tconst from = message.transferData.prevDepartment;\n\t\tconst to = message.transferData.department.name;\n\n\t\treturn {\n\t\t\tfallback: TAPi18n.__('Livechat_transfer_failed_fallback', { from, to }),\n\t\t};\n\t},\n});\n","import { AccountBox } from '../../../../app/ui-utils';\nimport { livechatManagerRoutes, load } from '../../../../app/livechat/client/route';\n\nAccountBox.addRoute(\n\t{\n\t\tname: 'livechat-tag-edit',\n\t\tpath: '/tags/:_id/edit',\n\t\tsideNav: 'omnichannelFlex',\n\t\ti18nPageTitle: 'Edit_Tag',\n\t\tpageTemplate: 'livechatTagForm',\n\t},\n\tlivechatManagerRoutes,\n);\n\nAccountBox.addRoute(\n\t{\n\t\tname: 'livechat-tag-new',\n\t\tpath: '/tags/new',\n\t\tsideNav: 'omnichannelFlex',\n\t\ti18nPageTitle: 'New_Tag',\n\t\tpageTemplate: 'livechatTagForm',\n\t},\n\tlivechatManagerRoutes,\n);\n\nAccountBox.addRoute(\n\t{\n\t\tname: 'livechat-priority-edit',\n\t\tpath: '/priorities/:_id/edit',\n\t\tsideNav: 'omnichannelFlex',\n\t\ti18nPageTitle: 'Edit_Priority',\n\t\tpageTemplate: 'livechatPriorityForm',\n\t},\n\tlivechatManagerRoutes,\n);\n\nAccountBox.addRoute(\n\t{\n\t\tname: 'livechat-priority-new',\n\t\tpath: '/priorities/new',\n\t\tsideNav: 'omnichannelFlex',\n\t\ti18nPageTitle: 'New_Priority',\n\t\tpageTemplate: 'livechatPriorityForm',\n\t},\n\tlivechatManagerRoutes,\n);\n\nAccountBox.addRoute(\n\t{\n\t\tname: 'livechat-business-hour-edit',\n\t\tpath: '/business-hours/:_id/:type/edit',\n\t\tsideNav: 'omnichannelFlex',\n\t\ti18nPageTitle: 'Edit_Business_Hour',\n\t\tpageTemplate: 'livechatBusinessHoursForm',\n\t},\n\tlivechatManagerRoutes,\n\tload,\n);\n\nAccountBox.addRoute(\n\t{\n\t\tname: 'livechat-business-hour-new',\n\t\tpath: '/business-hours/new',\n\t\tsideNav: 'omnichannelFlex',\n\t\ti18nPageTitle: 'New_Business_Hour',\n\t\tpageTemplate: 'livechatBusinessHoursForm',\n\t},\n\tlivechatManagerRoutes,\n\tload,\n);\n","import { Meteor } from 'meteor/meteor';\n\nimport { MultipleBusinessHoursBehavior } from './views/business-hours/Multiple';\nimport { settings } from '../../../../app/settings/client';\nimport { businessHourManager } from '../../../../app/livechat/client/views/app/business-hours/BusinessHours';\nimport { IBusinessHourBehavior } from '../../../../app/livechat/client/views/app/business-hours/IBusinessHourBehavior';\nimport { EESingleBusinessHourBehaviour } from './SingleBusinessHour';\nimport { hasLicense } from '../../license/client';\n\nconst businessHours: Record<string, IBusinessHourBehavior> = {\n\tMultiple: new MultipleBusinessHoursBehavior(),\n\tSingle: new EESingleBusinessHourBehaviour(),\n};\n\nMeteor.startup(function () {\n\tsettings.onload('Livechat_business_hour_type', async (_, value) => {\n\t\tif (await hasLicense('livechat-enterprise')) {\n\t\t\tbusinessHourManager.registerBusinessHourBehavior(businessHours[value as string]);\n\t\t}\n\t});\n});\n","import { addAction, QuickActionsEnum } from '../../../../../client/views/room/lib/QuickActions';\n\naddAction(QuickActionsEnum.OnHoldChat, {\n\tgroups: ['live'],\n\tid: QuickActionsEnum.OnHoldChat,\n\ttitle: 'Omnichannel_onHold_Chat',\n\ticon: 'pause-unfilled',\n\torder: 4,\n});\n","import { TAPi18n } from 'meteor/rocketchat:tap-i18n';\n\nimport { MessageTypes } from '../../../../app/ui-utils';\n\nMessageTypes.registerType({\n\tid: 'livechat_priority_history',\n\tsystem: true,\n\tmessage: 'New_chat_priority',\n\tdata(message) {\n\t\tif (!message.priorityData) {\n\t\t\treturn;\n\t\t}\n\t\tconst {\n\t\t\tdefinedBy: { username },\n\t\t\tpriority: { name = null } = {},\n\t\t} = message.priorityData;\n\t\treturn {\n\t\t\tuser: username,\n\t\t\tpriority: name || TAPi18n.__('Without_priority'),\n\t\t};\n\t},\n});\n","import { Template } from 'meteor/templating';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { hasAllPermission } from '../../../../../../app/authorization/client';\nimport { messageContext } from '../../../../../../app/ui-utils/client/lib/messageContext';\nimport { call } from '../../utils.js';\n\nimport './audit.html';\n\nconst loadMessages = async function ({ rid, users, startDate, endDate = new Date(), msg, type, visitor, agent }) {\n\tthis.messages = this.messages || new ReactiveVar([]);\n\tthis.loading = this.loading || new ReactiveVar(true);\n\ttry {\n\t\tthis.loading.set(true);\n\t\tconst messages =\n\t\t\ttype === 'l'\n\t\t\t\t? await call('auditGetOmnichannelMessages', {\n\t\t\t\t\t\trid,\n\t\t\t\t\t\tusers,\n\t\t\t\t\t\tstartDate,\n\t\t\t\t\t\tendDate,\n\t\t\t\t\t\tmsg,\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\tvisitor,\n\t\t\t\t\t\tagent,\n\t\t\t\t  })\n\t\t\t\t: await call('auditGetMessages', {\n\t\t\t\t\t\trid,\n\t\t\t\t\t\tusers,\n\t\t\t\t\t\tstartDate,\n\t\t\t\t\t\tendDate,\n\t\t\t\t\t\tmsg,\n\t\t\t\t\t\ttype,\n\t\t\t\t\t\tvisitor,\n\t\t\t\t\t\tagent,\n\t\t\t\t  });\n\t\tthis.messagesContext.set({\n\t\t\t...messageContext({ rid }),\n\t\t\tmessages,\n\t\t});\n\t} catch (e) {\n\t\tthis.messagesContext.set({});\n\t} finally {\n\t\tthis.loading.set(false);\n\t}\n};\n\nTemplate.audit.helpers({\n\tisLoading() {\n\t\treturn Template.instance().loading.get();\n\t},\n\tmessageContext() {\n\t\treturn Template.instance().messagesContext.get();\n\t},\n\thasResults() {\n\t\treturn Template.instance().hasResults.get();\n\t},\n});\n\nTemplate.audit.onCreated(async function () {\n\tthis.messagesContext = new ReactiveVar({});\n\tthis.loading = new ReactiveVar(false);\n\tthis.hasResults = new ReactiveVar(false);\n\n\tif (!hasAllPermission('can-audit')) {\n\t\treturn FlowRouter.go('/home');\n\t}\n\n\tthis.autorun(() => {\n\t\tconst messagesContext = this.messagesContext.get();\n\n\t\tthis.hasResults.set(messagesContext && messagesContext.messages && messagesContext.messages.length > 0);\n\t});\n\n\tthis.loadMessages = loadMessages.bind(this);\n\n\tconst { visitor, agent, users, rid } = this.data;\n\tif (rid || users.length || agent || visitor) {\n\t\tawait this.loadMessages(this.data);\n\t}\n});\n","import './audit/audit.js';\n","import { hasLicense } from '../../license/client';\nimport { AccountBox } from '../../../../app/ui-utils/client';\nimport { hasAllPermission } from '../../../../app/authorization/client';\n\nhasLicense('auditing')\n\t.then((enabled) => {\n\t\tif (!enabled) {\n\t\t\treturn;\n\t\t}\n\t\trequire('./templates');\n\t\trequire('./index.css');\n\n\t\tAccountBox.addItem({\n\t\t\thref: 'audit-home',\n\t\t\tname: 'Message_auditing',\n\t\t\ticon: 'document-eye',\n\t\t\tcondition: () => hasAllPermission('can-audit'),\n\t\t});\n\n\t\tAccountBox.addItem({\n\t\t\thref: 'audit-log',\n\t\t\tname: 'Message_auditing_log',\n\t\t\ticon: 'document-eye',\n\t\t\tcondition: () => hasAllPermission('can-audit-log'),\n\t\t});\n\t})\n\t.catch((error) => {\n\t\tconsole.error('Error checking license.', error);\n\t});\n","export { callWithErrorHandling as call } from '../../../../client/lib/utils/callWithErrorHandling';\n\nexport const convertDate = (date) => {\n\tconst [y, m, d] = date.split('-');\n\treturn new Date(y, m - 1, d);\n};\n\nexport const scrollTo = function scrollTo(element, to, duration) {\n\tif (duration <= 0) {\n\t\treturn;\n\t}\n\tconst difference = to - element.scrollTop;\n\tconst perTick = (difference / duration) * 10;\n\n\tsetTimeout(function () {\n\t\telement.scrollTop += perTick;\n\t\tif (element.scrollTop === to) {\n\t\t\treturn;\n\t\t}\n\t\tscrollTo(element, to, duration - 10);\n\t}, 10);\n};\n","import _ from 'underscore';\nimport { Tracker } from 'meteor/tracker';\n\nimport { CannedResponse } from '../../collections/CannedResponse';\nimport { addMessagePopup, removeMessagePopup } from '../../../../../../app/ui-message/client/popup/customMessagePopups';\nimport { t } from '../../../../../../app/utils';\nimport { settings } from '../../../../../../app/settings/client';\n\nTracker.autorun(() => {\n\tconst templateFunc = (template) => ({\n\t\ttitle: t('Canned_Responses'),\n\t\tcollection: CannedResponse,\n\t\ttrigger: '!',\n\t\tprefix: '',\n\t\tsuffix: ' ',\n\t\ttriggerAnywhere: true,\n\t\ttemplate: 'messagePopupCannedResponse',\n\t\trid: template.data.rid,\n\t\tgetInput: template.data.getInput,\n\t\ttextFilterDelay: 500,\n\t\tgetFilter: (collection, filter) => {\n\t\t\tconst exp = new RegExp(filter, 'i');\n\t\t\tconst records = collection\n\t\t\t\t.find(\n\t\t\t\t\t{\n\t\t\t\t\t\tshortcut: exp,\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\treactive: 1,\n\t\t\t\t\t\tlimit: 12,\n\t\t\t\t\t\tsort: {\n\t\t\t\t\t\t\tshortcut: -1,\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t)\n\t\t\t\t.fetch();\n\n\t\t\treturn records;\n\t\t},\n\t\tgetValue: (_id, collection, records) => {\n\t\t\tconst record = _.findWhere(records, {\n\t\t\t\t_id,\n\t\t\t});\n\t\t\treturn record && record.text;\n\t\t},\n\t});\n\n\tconst settingValue = settings.get('Canned_Responses_Enable');\n\tif (settingValue) {\n\t\taddMessagePopup(templateFunc, 'cannedResponses');\n\t} else {\n\t\tremoveMessagePopup('cannedResponses');\n\t}\n});\n","import { ReactiveVar } from 'meteor/reactive-var';\nimport { Meteor } from 'meteor/meteor';\nimport { Template } from 'meteor/templating';\n\nimport { CannedResponse } from '../../collections/CannedResponse';\nimport { t } from '../../../../../../app/utils';\nimport { chatMessages } from '../../../../../../app/ui/client';\nimport { handleError } from '../../../../../../client/lib/utils/handleError';\nimport { dispatchToastMessage } from '../../../../../../client/lib/toast';\n\nimport './cannedResponses.html';\n\nTemplate.cannedResponses.helpers({\n\tcannedResponses() {\n\t\tconst searchText = Template.instance().searchText.get().toLocaleLowerCase();\n\n\t\tlet query = {};\n\n\t\tif (Template.instance().context.get() === 'department') {\n\t\t\tquery = {\n\t\t\t\tscope: 'department',\n\t\t\t\tdepartmentId: Template.instance().departmentId,\n\t\t\t};\n\t\t}\n\n\t\tif (searchText) {\n\t\t\tconst regex = new RegExp(searchText, 'i');\n\t\t\tquery.$or = [\n\t\t\t\t{\n\t\t\t\t\tshortcut: {\n\t\t\t\t\t\t$regex: regex,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\ttext: {\n\t\t\t\t\t\t$regex: regex,\n\t\t\t\t\t},\n\t\t\t\t},\n\t\t\t];\n\t\t}\n\t\treturn CannedResponse.find(query);\n\t},\n\n\thasNoCannedResponses() {\n\t\treturn CannedResponse.find().count() === 0;\n\t},\n\n\tisDetailScreen() {\n\t\treturn ['edit', 'new', 'view'].includes(Template.instance().action.get());\n\t},\n\n\tisNewResponse() {\n\t\treturn Template.instance().action.get() === 'new';\n\t},\n\n\tisExistingResponse() {\n\t\treturn ['edit', 'view'].includes(Template.instance().action.get());\n\t},\n\n\tisUserContext() {\n\t\treturn Template.instance().context.get() === 'user';\n\t},\n\n\tsearchText() {\n\t\treturn Template.instance().searchText.get();\n\t},\n\n\tisDepartmentContext() {\n\t\treturn Template.instance().context.get() === 'department';\n\t},\n\n\tcannedResponse() {\n\t\treturn Template.instance().cannedResponse.get();\n\t},\n\n\tcanDeleteResponse() {\n\t\tconst action = Template.instance().action.get();\n\n\t\tif (action !== 'edit') {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst response = Template.instance().cannedResponse.get();\n\t\tconst context = Template.instance().context.get();\n\n\t\treturn response.scope === context;\n\t},\n\n\tcanModifyResponse() {\n\t\tconst action = Template.instance().action.get();\n\n\t\tif (action === 'new') {\n\t\t\treturn true;\n\t\t}\n\n\t\tconst response = Template.instance().cannedResponse.get();\n\t\tconst context = Template.instance().context.get();\n\n\t\treturn response.scope === context;\n\t},\n\n\tcreatedByString() {\n\t\tconst username = this.createdBy;\n\n\t\tconst me = Meteor.users.findOne(Meteor.userId());\n\n\t\tif (me.username === username) {\n\t\t\treturn t('Me');\n\t\t}\n\n\t\treturn username;\n\t},\n\n\tisPreviewMode() {\n\t\treturn Template.instance().action.get() === 'view';\n\t},\n});\n\nTemplate.cannedResponses.events({\n\t'click .new-canned-response-btn'(e, instance) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tinstance.cannedResponse.set({\n\t\t\tshortcut: '',\n\t\t\ttext: '',\n\t\t});\n\t\tinstance.action.set('new');\n\t},\n\n\t'click .canned-response'(e, instance) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tconst { _id } = this;\n\n\t\tconst cannedResponse = CannedResponse.findOne({ _id });\n\t\tif (!cannedResponse) {\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Invalid Canned Response') });\n\t\t}\n\n\t\tinstance.cannedResponse.set(cannedResponse);\n\t\tconst canEdit = instance.context.get() === cannedResponse.scope;\n\n\t\tinstance.action.set(canEdit ? 'edit' : 'view');\n\t},\n\n\t'click .delete-canned-response'(e, instance) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tconst _id = instance.$('input[name=id]').val();\n\n\t\tMeteor.call('removeCannedResponse', _id, (error) => {\n\t\t\tif (error) {\n\t\t\t\treturn handleError(error);\n\t\t\t}\n\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Canned_Response_Removed') });\n\t\t\tinstance.action.set(null);\n\t\t});\n\t},\n\n\t'click .cancel-canned-response-btn'(e, instance) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tinstance.action.set(null);\n\t},\n\n\t'click .use-canned-response-btn'(e, instance) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tconst { rid } = Template.currentData();\n\t\tif (!rid) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst object = instance.cannedResponse.get();\n\t\tconst { input } = chatMessages[rid];\n\t\tconst { text } = object;\n\n\t\tif (document.selection) {\n\t\t\tinput.focus();\n\t\t\tconst sel = document.selection.createRange();\n\t\t\tsel.text = text;\n\t\t\treturn;\n\t\t}\n\n\t\tif (input.selectionStart || input.selectionStart === 0) {\n\t\t\tconst startPos = input.selectionStart;\n\t\t\tconst endPos = input.selectionEnd;\n\n\t\t\tconst prefix = input.value.substring(0, startPos);\n\t\t\tconst suffix = input.value.substring(endPos, input.value.length);\n\n\t\t\tinput.value = `${prefix}${text}${suffix}`;\n\t\t\tinput.selectionStart = startPos + text.length;\n\t\t\tinput.selectionEnd = startPos + text.length;\n\n\t\t\tinput.focus();\n\t\t\tinstance.action.set(null);\n\t\t\treturn;\n\t\t}\n\n\t\tinput.value += text;\n\t},\n\n\t'click .save-canned-response-btn'(e, instance) {\n\t\te.preventDefault();\n\t\te.stopPropagation();\n\n\t\tconst _id = instance.$('input[name=id]').val();\n\t\tconst shortcut = instance.$('input[name=shortcut]').val();\n\t\tconst text = instance.$('textarea[name=text]').val();\n\n\t\tconst responseData = {\n\t\t\tshortcut,\n\t\t\ttext,\n\t\t};\n\n\t\tconst context = instance.context.get();\n\t\tif (context === 'department') {\n\t\t\tif (!instance.departmentId) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: t('Invalid_Department') });\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresponseData.scope = 'department';\n\t\t\tresponseData.departmentId = instance.departmentId;\n\t\t} else {\n\t\t\tresponseData.scope = 'user';\n\t\t}\n\n\t\tMeteor.call('saveCannedResponse', _id, responseData, function (error /* , result*/) {\n\t\t\tif (error) {\n\t\t\t\treturn handleError(error);\n\t\t\t}\n\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Saved') });\n\t\t\tinstance.action.set(null);\n\t\t});\n\t},\n\n\t'keyup .js-search'(event, instance) {\n\t\tinstance.searchText.set(event.currentTarget.value || '');\n\t},\n});\n\nTemplate.cannedResponses.onCreated(function () {\n\tthis.action = new ReactiveVar();\n\tthis.context = new ReactiveVar();\n\tthis.cannedResponse = new ReactiveVar();\n\tthis.searchText = new ReactiveVar('');\n\tthis.departmentId = null;\n\n\tif (this.data && this.data.context) {\n\t\tthis.context.set(this.data.context);\n\n\t\tif (this.data.context === 'department') {\n\t\t\tthis.departmentId = this.data.departmentId;\n\t\t}\n\t} else {\n\t\tthis.context.set('user');\n\t}\n});\n","import { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Template } from 'meteor/templating';\n\nimport './departmentCannedResponses.html';\n\nTemplate.departmentCannedResponses.helpers({\n\tdepartmentId() {\n\t\treturn FlowRouter.getParam('_id');\n\t},\n});\n\nTemplate.departmentCannedResponses.events({});\n\nTemplate.departmentCannedResponses.onCreated(function () {});\n","import { Mongo } from 'meteor/mongo';\n\nexport const CannedResponse = new Mongo.Collection(null);\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { hasPermission } from '../../../../../app/authorization/client';\nimport { settings } from '../../../../../app/settings/client';\nimport { APIClient } from '../../../../../app/utils/client';\nimport { CannedResponse } from '../collections/CannedResponse';\nimport { cannedResponsesStreamer } from '../streamer';\n\nconst events = {\n\tchanged: (response) => {\n\t\tdelete response.type;\n\t\tCannedResponse.upsert({ _id: response._id }, response);\n\t},\n\tremoved: (response) => CannedResponse.remove({ _id: response._id }),\n};\n\nMeteor.startup(() => {\n\tTracker.autorun(async (c) => {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn;\n\t\t}\n\t\tif (!settings.get('Canned_Responses_Enable')) {\n\t\t\treturn;\n\t\t}\n\t\tif (!hasPermission('view-canned-responses')) {\n\t\t\treturn;\n\t\t}\n\t\ttry {\n\t\t\tcannedResponsesStreamer.on('canned-responses', (response, options) => {\n\t\t\t\tconst { agentsId } = options || {};\n\t\t\t\tif (Array.isArray(agentsId) && !agentsId.includes(Meteor.userId())) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tevents[response.type](response);\n\t\t\t});\n\t\t\tconst { responses } = await APIClient.v1.get('canned-responses.get');\n\t\t\tresponses.forEach((response) => CannedResponse.insert(response));\n\t\t\tc.stop();\n\t\t} catch (error) {\n\t\t\tconsole.log(error);\n\t\t}\n\t});\n});\n","import './tabBar';\nimport './startup/responses';\nimport './stylesheets/cannedResponses.css';\nimport './views/icons.html';\nimport './views/tabbar/cannedResponses';\nimport './views/tabbar/departmentCannedResponses';\nimport './views/popup/addMessagePopupCannedResponse';\nimport './views/popup/messagePopupCannedResponse.html';\n","import { Meteor } from 'meteor/meteor';\n\nexport const cannedResponsesStreamer = new Meteor.Streamer('canned-responses');\n","import { lazy, useMemo } from 'react';\n\nimport { useHasLicense } from '../../../client/hooks/useHasLicense';\nimport { useSetting } from '../../../../client/contexts/SettingsContext';\nimport { addAction } from '../../../../client/views/room/lib/Toolbox';\n\naddAction('canned-responses', () => {\n\tconst hasLicense = useHasLicense('canned-responses');\n\tconst enabled = useSetting('Canned_Responses_Enable');\n\n\treturn useMemo(\n\t\t() =>\n\t\t\thasLicense && enabled\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['live'],\n\t\t\t\t\t\tid: 'canned-responses',\n\t\t\t\t\t\ttitle: 'Canned_Responses',\n\t\t\t\t\t\ticon: 'canned-response',\n\t\t\t\t\t\ttemplate: lazy(() => import('../../../client/omnichannel/components/contextualBar/CannedResponse')),\n\t\t\t\t\t\torder: 0,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[hasLicense, enabled],\n\t);\n});\n","import { AuthorizationUtils } from '../../../../app/authorization/lib/AuthorizationUtils';\nimport { guestPermissions } from './guestPermissions';\n\nexport const addRoleRestrictions = function () {\n\tAuthorizationUtils.addRolePermissionWhiteList('guest', guestPermissions);\n};\n","export const guestPermissions = ['view-d-room', 'view-joined-room', 'view-p-room', 'start-discussion'];\n","import { Meteor } from 'meteor/meteor';\n\nimport { addRoleRestrictions } from '../lib/addRoleRestrictions';\n\nMeteor.startup(() => {\n\tMeteor.call('license:isEnterprise', (err: any, result: any) => {\n\t\tif (err) {\n\t\t\tthrow err;\n\t\t}\n\n\t\tif (result) {\n\t\t\taddRoleRestrictions();\n\t\t}\n\t});\n});\n","import { fetchFeatures } from '../../../client/lib/fetchFeatures';\nimport { queryClient } from '../../../../client/lib/queryClient';\n\nconst allModules = queryClient\n\t.fetchQuery({\n\t\tqueryKey: ['ee.features'],\n\t\tqueryFn: fetchFeatures,\n\t})\n\t.then((features) => new Set<string>(features))\n\t.catch((e) => {\n\t\tconsole.error('Error getting modules', e);\n\t\treturn Promise.reject(e);\n\t});\n\nexport async function hasLicense(feature: string): Promise<boolean> {\n\ttry {\n\t\tconst features = await allModules;\n\t\treturn features.has(feature);\n\t} catch (e) {\n\t\treturn false;\n\t}\n}\n","import { CachedCollectionManager } from '../../../app/ui-cached-collection/client';\nimport { call } from '../../../client/lib/utils/call';\n\nexport const fetchFeatures = (): Promise<string[]> =>\n\tnew Promise((resolve, reject) => {\n\t\tCachedCollectionManager.onLogin(() => {\n\t\t\tcall('license:getModules').then(resolve, reject);\n\t\t});\n\t});\n","import { QueryObserver } from 'react-query';\n\nimport { queryClient } from '../../../client/lib/queryClient';\nimport type { BundleFeature } from '../../app/license/server/bundles';\nimport { fetchFeatures } from './fetchFeatures';\n\nexport const onToggledFeature = (\n\tfeature: BundleFeature,\n\t{\n\t\tup,\n\t\tdown,\n\t}: {\n\t\tup?: () => void;\n\t\tdown?: () => void;\n\t},\n): (() => void) => {\n\tconst observer = new QueryObserver(queryClient, {\n\t\tqueryKey: ['ee.features'],\n\t\tqueryFn: fetchFeatures,\n\t});\n\n\tlet enabled = false;\n\n\treturn observer.subscribe((result) => {\n\t\tif (!result.isSuccess) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst features = result.data;\n\t\tconst hasFeature = features.includes(feature);\n\n\t\tif (!enabled && hasFeature) {\n\t\t\tup?.();\n\t\t\tenabled = true;\n\t\t}\n\n\t\tif (enabled && !hasFeature) {\n\t\t\tdown?.();\n\t\t\tenabled = false;\n\t\t}\n\t});\n};\n","import { useMemo, lazy } from 'react';\n\nimport { registerForm } from '../../../../client/views/omnichannel/additionalForms';\nimport { hasLicense } from '../../../app/license/client';\n\nhasLicense('livechat-enterprise').then((enabled) => {\n\tif (!enabled) {\n\t\treturn;\n\t}\n\n\tregisterForm({\n\t\tuseCustomFieldsAdditionalForm: () => useMemo(() => lazy(() => import('./CustomFieldsAdditionalFormContainer')), []),\n\t});\n\tregisterForm({\n\t\tuseMaxChatsPerAgent: () => useMemo(() => lazy(() => import('./MaxChatsPerAgentContainer')), []),\n\t});\n\tregisterForm({\n\t\tuseMaxChatsPerAgentDisplay: () => useMemo(() => lazy(() => import('./MaxChatsPerAgentDisplay')), []),\n\t});\n\tregisterForm({\n\t\tuseEeNumberInput: () => useMemo(() => lazy(() => import('./EeNumberInput')), []),\n\t});\n\tregisterForm({\n\t\tuseEeTextAreaInput: () => useMemo(() => lazy(() => import('./EeTextAreaInput')), []),\n\t});\n\tregisterForm({ useEeTextInput: () => useMemo(() => lazy(() => import('./EeTextInput')), []) });\n\tregisterForm({\n\t\tuseBusinessHoursMultiple: () => useMemo(() => lazy(() => import('./BusinessHoursMultipleContainer')), []),\n\t});\n\tregisterForm({\n\t\tuseBusinessHoursTimeZone: () => useMemo(() => lazy(() => import('./BusinessHoursTimeZone')), []),\n\t});\n\tregisterForm({\n\t\tuseContactManager: () => useMemo(() => lazy(() => import('./ContactManager')), []),\n\t});\n\tregisterForm({\n\t\tuseCurrentChatTags: () => useMemo(() => lazy(() => import('../tags/CurrentChatTags')), []),\n\t});\n\tregisterForm({\n\t\tuseDepartmentBusinessHours: () => useMemo(() => lazy(() => import('./DepartmentBusinessHours')), []),\n\t});\n\tregisterForm({\n\t\tuseDepartmentForwarding: () => useMemo(() => lazy(() => import('./DepartmentForwarding')), []),\n\t});\n\tregisterForm({\n\t\tusePrioritiesSelect: () => useMemo(() => lazy(() => import('./PrioritiesSelect')), []),\n\t});\n\tregisterForm({\n\t\tuseSelectForwardDepartment: () => useMemo(() => lazy(() => import('../../../../client/components/AutoCompleteDepartment')), []),\n\t});\n});\n","import './additionalForms/register';\nimport './routes';\n","import { registerOmnichannelRoute } from '../../../client/views/omnichannel/routes';\n\nregisterOmnichannelRoute('/monitors', {\n\tname: 'omnichannel-monitors',\n\tlazyRouteComponent: () => import('./monitors/MonitorsPageContainer'),\n});\n\nregisterOmnichannelRoute('/priorities/:context?/:id?', {\n\tname: 'omnichannel-priorities',\n\tlazyRouteComponent: () => import('./priorities/PrioritiesRoute'),\n});\n\nregisterOmnichannelRoute('/canned-responses/:context?/:id?', {\n\tname: 'omnichannel-canned-responses',\n\tlazyRouteComponent: () => import('./cannedResponses/CannedResponsesRoute'),\n});\n","import { useState, useEffect } from 'react';\n\nimport { hasLicense } from '../../app/license/client';\n\nexport const useHasLicense = (licenseName) => {\n\tconst [license, setLicense] = useState('loading');\n\n\tuseEffect(() => {\n\t\thasLicense(licenseName).then((enabled) => {\n\t\t\tif (enabled) {\n\t\t\t\treturn setLicense(true);\n\t\t\t}\n\t\t\tsetLicense(false);\n\t\t});\n\t}, [licenseName]);\n\n\treturn license;\n};\n","import { Meteor } from 'meteor/meteor';\n\nimport { hasAllPermission } from '../../../app/authorization/client';\nimport { registerAdminRoute, registerAdminSidebarItem, unregisterAdminSidebarItem } from '../../../client/views/admin';\nimport { onToggledFeature } from '../lib/onToggledFeature';\n\nconst [registerRoute, unregisterRoute] = registerAdminRoute('/engagement-dashboard/:tab?', {\n\tname: 'engagement-dashboard',\n\tlazyRouteComponent: () => import('../views/admin/engagementDashboard/EngagementDashboardRoute'),\n\tready: false,\n});\n\nonToggledFeature('engagement-dashboard', {\n\tup: () =>\n\t\tMeteor.startup(() => {\n\t\t\tregisterAdminSidebarItem({\n\t\t\t\thref: '/admin/engagement-dashboard',\n\t\t\t\ti18nLabel: 'Engagement Dashboard',\n\t\t\t\ticon: 'file-keynote',\n\t\t\t\tpermissionGranted: () => hasAllPermission('view-engagement-dashboard'),\n\t\t\t});\n\t\t\tregisterRoute();\n\t\t}),\n\tdown: () =>\n\t\tMeteor.startup(() => {\n\t\t\tunregisterAdminSidebarItem('Engagement Dashboard');\n\t\t\tunregisterRoute();\n\t\t}),\n});\n","import './engagementDashboard';\nimport './routes';\n","import { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { appLayout } from '../../../client/lib/appLayout';\n\nFlowRouter.route('/audit', {\n\tname: 'audit-home',\n\taction() {\n\t\tappLayout.renderMainLayout({ center: 'auditPage' });\n\t},\n});\n\nFlowRouter.route('/audit-log', {\n\tname: 'audit-log',\n\taction() {\n\t\tappLayout.renderMainLayout({ center: 'auditLogPage' });\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { APIClient } from '../../app/utils/client';\nimport type { ClientSession } from '../app/ecdh/client/ClientSession';\n\nlet resolveSession: (value: ClientSession | void) => void;\nconst sessionPromise = new Promise<ClientSession | void>((resolve) => {\n\tresolveSession = resolve;\n});\n\nfunction init(session: ClientSession): void {\n\tMeteor.connection._stream.allowConnection();\n\n\tconst _didMessage = Meteor.connection._stream.socket._didMessage.bind(Meteor.connection._stream.socket);\n\tconst send = Meteor.connection._stream.socket.send.bind(Meteor.connection._stream.socket);\n\n\tMeteor.connection._stream.socket._didMessage = async (data): Promise<void> => {\n\t\tconst decryptedData = await session.decrypt(data);\n\t\tdecryptedData.split('\\n').forEach((d) => _didMessage(d));\n\t};\n\n\tMeteor.connection._stream.socket.send = async (data): Promise<void> => {\n\t\tsend(await session.encrypt(data));\n\t};\n}\n\nasync function initEncryptedSession(): Promise<void> {\n\tif (!window.ECDH_Enabled) {\n\t\tMeteor.connection._stream.allowConnection();\n\t\treturn resolveSession();\n\t}\n\tconst { ClientSession } = await import('../app/ecdh/client/ClientSession');\n\tconst session = new ClientSession();\n\tconst clientPublicKey = await session.init();\n\n\ttry {\n\t\tconst response = await fetch('/api/ecdh_proxy/initEncryptedSession', {\n\t\t\tmethod: 'POST',\n\t\t\theaders: {\n\t\t\t\t'Content-Type': 'application/json',\n\t\t\t},\n\t\t\tbody: JSON.stringify({ clientPublicKey }),\n\t\t});\n\n\t\tif (response.status !== 200) {\n\t\t\tresolveSession();\n\t\t\treturn Meteor.connection._stream.allowConnection();\n\t\t}\n\n\t\tconst data = await response.json();\n\n\t\tif (data.success === false) {\n\t\t\tresolveSession();\n\t\t\treturn Meteor.connection._stream.allowConnection();\n\t\t}\n\n\t\tawait session.setServerKey(data.publicKeyString);\n\t\tresolveSession(session);\n\t\tinit(session);\n\t} catch (e) {\n\t\tconsole.log(e);\n\t\tresolveSession();\n\t\tMeteor.connection._stream.allowConnection();\n\t}\n}\n\ninitEncryptedSession();\n\nconst _jqueryCall = APIClient._jqueryCall.bind(APIClient);\n\nAPIClient._jqueryCall = async (method, endpoint, params, body, headers = {}): Promise<any> => {\n\tconst session = await sessionPromise;\n\n\tif (!session) {\n\t\treturn _jqueryCall(method, endpoint, params, body, headers);\n\t}\n\n\tconst result = await _jqueryCall(method, endpoint, params, body, headers, 'text');\n\tconst decrypted = await session.decrypt(result);\n\tconst parsed = JSON.parse(decrypted);\n\treturn parsed;\n};\n","import '../app/auditing/client';\nimport '../app/authorization/client';\nimport '../app/canned-responses/client';\nimport '../app/license/client';\nimport '../app/livechat-enterprise/client';\nimport './omnichannel';\nimport './startup';\n","import { Box, Option } from '@rocket.chat/fuselage';\nimport { ComponentProps, ReactNode } from 'react';\n\nimport { IRoom } from '../../../../../definition/IRoom';\nimport { ToolboxActionConfig } from '../Toolbox';\nimport { generator, Events as GeneratorEvents } from '../Toolbox/generator';\n\ntype QuickActionsHook = ({ room }: { room: IRoom }) => QuickActionsActionConfig | null;\n\ntype ActionRendererProps = Omit<QuickActionsActionConfig, 'renderAction' | 'groups'> & {\n\tclassName: ComponentProps<typeof Box>['className'];\n\ttabId: QuickActionsActionConfig['id'] | undefined;\n\tindex: number;\n};\n\nexport type ActionRenderer = (props: ActionRendererProps) => ReactNode;\n\ntype OptionRendererProps = ComponentProps<typeof Option>;\n\nexport type OptionRenderer = (props: OptionRendererProps) => ReactNode;\n\nexport type QuickActionsActionConfig = ToolboxActionConfig & {\n\tgroups: Array<'live'>;\n\tcolor?: string;\n};\n\nexport type QuickActionsAction = QuickActionsHook | QuickActionsActionConfig;\n\nconst { listen, add: addAction, remove: deleteAction, store: actions } = generator<QuickActionsAction>();\n\nexport type Events = GeneratorEvents<QuickActionsAction>;\n\nexport { listen, addAction, deleteAction, actions };\n\nexport enum QuickActionsEnum {\n\tMoveQueue = 'rocket-move-to-queue',\n\tChatForward = 'rocket-chat-forward',\n\tTranscript = 'rocket-transcript',\n\tCloseChat = 'rocket-close-chat',\n\tOnHoldChat = 'rocket-on-hold-chat',\n}\n","import { generator } from './generator';\n\nexport type IFrameAction = {\n\tid: string;\n\ticon: string;\n\tlabel: string;\n};\n\nconst { listen, add, remove, store } = generator<IFrameAction>();\nexport { listen, add, remove, store };\n","import { Emitter, EventHandlerOf } from '@rocket.chat/emitter';\n\nexport type Store<T> = Map<string, T>;\n\nexport type Events<T> = {\n\tchange: Store<T>;\n};\n\nexport const generator = function generator<T>(name?: string): {\n\tstore: Store<T>;\n\tadd: (id: string, action: T) => Store<T>;\n\tremove: (id: string) => boolean;\n\tlisten: (handler: EventHandlerOf<Events<T>, 'change'>) => Function;\n\tname: string | undefined;\n} {\n\tconst store: Store<T> = new Map();\n\tconst emitter = new Emitter<Events<T>>();\n\n\tconst add = (id: string, action: T): Store<T> => {\n\t\tstore.set(id, action);\n\t\temitter.emit('change', store);\n\t\treturn store;\n\t};\n\n\tconst remove = (id: string): boolean => {\n\t\tconst result = store.delete(id);\n\t\temitter.emit('change', store);\n\t\treturn result;\n\t};\n\n\tconst listen = (handler: EventHandlerOf<Events<T>, 'change'>): Function => emitter.on('change', handler);\n\n\treturn Object.freeze({\n\t\tstore,\n\t\tadd,\n\t\tremove,\n\t\tlisten,\n\t\tname,\n\t});\n};\n","import { Box, Option } from '@rocket.chat/fuselage';\nimport { FC, LazyExoticComponent, ReactNode, MouseEvent, ComponentProps } from 'react';\n\nimport { IRoom } from '../../../../../definition/IRoom';\nimport { TranslationKey } from '../../../../contexts/TranslationContext';\nimport { generator, Events as GeneratorEvents } from './generator';\n\ntype ToolboxHook = ({ room }: { room: IRoom }) => ToolboxActionConfig | null;\n\ntype ActionRendererProps = Omit<ToolboxActionConfig, 'renderAction' | 'groups' | 'title'> & {\n\tclassName: ComponentProps<typeof Box>['className'];\n\tindex: number;\n\ttitle: string;\n};\n\nexport type ActionRenderer = (props: ActionRendererProps) => ReactNode;\n\ntype OptionRendererProps = ComponentProps<typeof Option>;\n\nexport type OptionRenderer = (props: OptionRendererProps) => ReactNode;\n\nexport type ToolboxActionConfig = {\n\tid: string;\n\ticon: string;\n\ttitle: TranslationKey;\n\tanonymous?: boolean;\n\trenderAction?: ActionRenderer;\n\tfull?: true;\n\trenderOption?: OptionRenderer;\n\torder?: number;\n\tgroups: Array<'group' | 'channel' | 'live' | 'direct' | 'direct_multiple' | 'team'>;\n\thotkey?: string;\n\taction?: (e: MouseEvent<HTMLElement>) => void;\n\ttemplate?: string | FC | LazyExoticComponent<FC<{ rid: string; tabBar: any }>>;\n};\n\nexport type ToolboxAction = ToolboxHook | ToolboxActionConfig;\n\nconst { listen, add: addAction, remove: deleteAction, store: actions } = generator<ToolboxAction>();\n\nexport type Events = GeneratorEvents<ToolboxAction>;\n\nexport { listen, addAction, deleteAction, actions };\n","import React, { ReactElement } from 'react';\n\nimport { isIE11 } from '../../../../lib/utils/isIE11';\nimport GenericPreview from './GenericPreview';\nimport MediaPreview from './MediaPreview';\n\nexport enum FilePreviewType {\n\tIMAGE = 'image',\n\tAUDIO = 'audio',\n\tVIDEO = 'video',\n}\n\nconst getFileType = (fileType: File['type']): FilePreviewType | undefined => {\n\tif (!fileType) {\n\t\treturn;\n\t}\n\tfor (const type of Object.values(FilePreviewType)) {\n\t\tif (fileType.indexOf(type) > -1) {\n\t\t\treturn type;\n\t\t}\n\t}\n};\n\nconst shouldShowMediaPreview = (file: File, fileType: FilePreviewType | undefined): boolean => {\n\tif (!fileType) {\n\t\treturn false;\n\t}\n\tif (isIE11) {\n\t\treturn false;\n\t}\n\t// Avoid preview if file size bigger than 10mb\n\tif (file.size > 10000000) {\n\t\treturn false;\n\t}\n\tif (!Object.values(FilePreviewType).includes(fileType)) {\n\t\treturn false;\n\t}\n\treturn true;\n};\n\ntype FilePreviewProps = {\n\tfile: File;\n};\n\nconst FilePreview = ({ file }: FilePreviewProps): ReactElement => {\n\tconst fileType = getFileType(file.type);\n\n\tif (shouldShowMediaPreview(file, fileType)) {\n\t\treturn <MediaPreview file={file} fileType={fileType as FilePreviewType} />;\n\t}\n\n\treturn <GenericPreview file={file} />;\n};\n\nexport default FilePreview;\n","import { Modal, Box, Field, FieldGroup, TextInput, ButtonGroup, Button } from '@rocket.chat/fuselage';\nimport { useAutoFocus } from '@rocket.chat/fuselage-hooks';\nimport React, { ReactElement, memo, useState, ChangeEvent, FormEventHandler, useEffect } from 'react';\n\nimport { useToastMessageDispatch } from '../../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../../contexts/TranslationContext';\nimport FilePreview from './FilePreview';\n\ntype FileUploadModalProps = {\n\tonClose: () => void;\n\tonSubmit: (name: string, description?: string) => void;\n\tfile: File;\n\tfileName: string;\n\tinvalidContentType: boolean;\n};\n\nconst FileUploadModal = ({ onClose, file, fileName, onSubmit, invalidContentType }: FileUploadModalProps): ReactElement => {\n\tconst [name, setName] = useState<string>(fileName);\n\tconst [description, setDescription] = useState<string>('');\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst ref = useAutoFocus();\n\n\tconst handleName = (e: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetName(e.currentTarget.value);\n\t};\n\n\tconst handleDescription = (e: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetDescription(e.currentTarget.value);\n\t};\n\n\tconst handleSubmit: FormEventHandler<HTMLFormElement> = (e): void => {\n\t\te.preventDefault();\n\t\tif (!name) {\n\t\t\treturn dispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('error-the-field-is-required', { field: t('Name') }),\n\t\t\t});\n\t\t}\n\t\tonSubmit(name, description);\n\t};\n\n\tuseEffect(() => {\n\t\tif (invalidContentType) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('FileUpload_MediaType_NotAccepted__type__', { type: file.type }),\n\t\t\t});\n\t\t\tonClose();\n\t\t\treturn;\n\t\t}\n\n\t\tif (file.size === 0) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('FileUpload_File_Empty'),\n\t\t\t});\n\t\t\tonClose();\n\t\t}\n\t}, [file, dispatchToastMessage, invalidContentType, t, onClose]);\n\n\treturn (\n\t\t<Modal>\n\t\t\t<Box is='form' display='flex' flexDirection='column' height='100%' onSubmit={handleSubmit}>\n\t\t\t\t<Modal.Header>\n\t\t\t\t\t<Modal.Title>{t('FileUpload')}</Modal.Title>\n\t\t\t\t\t<Modal.Close onClick={onClose} />\n\t\t\t\t</Modal.Header>\n\t\t\t\t<Modal.Content overflow='hidden'>\n\t\t\t\t\t<Box display='flex' maxHeight='x360' w='full' justifyContent='center' alignContent='center' mbe='x16'>\n\t\t\t\t\t\t<FilePreview file={file} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Field.Label>{t('Upload_file_name')}</Field.Label>\n\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t<TextInput value={name} onChange={handleName} />\n\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t{!name && <Field.Error>{t('error-the-field-is-required', { field: t('Name') })}</Field.Error>}\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t<Field.Label>{t('Upload_file_description')}</Field.Label>\n\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t<TextInput value={description} onChange={handleDescription} placeholder={t('Description')} ref={ref} />\n\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t</Field>\n\t\t\t\t\t</FieldGroup>\n\t\t\t\t</Modal.Content>\n\t\t\t\t<Modal.Footer>\n\t\t\t\t\t<ButtonGroup align='end'>\n\t\t\t\t\t\t<Button ghost onClick={onClose}>\n\t\t\t\t\t\t\t{t('Cancel')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button primary type='submit' disabled={!name}>\n\t\t\t\t\t\t\t{t('Send')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Modal.Footer>\n\t\t\t</Box>\n\t\t</Modal>\n\t);\n};\n\nexport default memo(FileUploadModal);\n","import { Box, Icon } from '@rocket.chat/fuselage';\nimport React, { ReactElement } from 'react';\n\nimport { formatBytes } from '../../../../lib/utils/formatBytes';\n\nconst GenericPreview = ({ file }: { file: File }): ReactElement => (\n\t<Box display='flex' alignItems='center' w='full' fontScale='h4'>\n\t\t<Icon name='file' size='x24' mis={-2} mie={4} />\n\t\t{`${file.name} - ${formatBytes(file.size, 2)}`}\n\t</Box>\n);\n\nexport default GenericPreview;\n","import { Box } from '@rocket.chat/fuselage';\nimport React, { useState, ReactElement } from 'react';\n\nimport GenericPreview from './GenericPreview';\nimport PreviewSkeleton from './PreviewSkeleton';\n\ntype ImagePreviewProps = {\n\turl: string;\n\tfile: File;\n};\n\nconst ImagePreview = ({ url, file }: ImagePreviewProps): ReactElement => {\n\tconst [error, setError] = useState(false);\n\tconst [loading, setLoading] = useState(true);\n\n\tconst handleLoad = (): void => setLoading(false);\n\tconst handleError = (): void => {\n\t\tsetLoading(false);\n\t\tsetError(true);\n\t};\n\n\tif (error) {\n\t\treturn <GenericPreview file={file} />;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{loading && <PreviewSkeleton />}\n\t\t\t<Box\n\t\t\t\tis='img'\n\t\t\t\tsrc={url}\n\t\t\t\tmaxWidth='full'\n\t\t\t\tstyle={{ objectFit: 'contain' }}\n\t\t\t\tonLoad={handleLoad}\n\t\t\t\tonError={handleError}\n\t\t\t\tdisplay={loading ? 'none' : 'initial'}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport default ImagePreview;\n","import { Box, Icon } from '@rocket.chat/fuselage';\nimport React, { ReactElement, useEffect, useState, memo } from 'react';\n\nimport { useTranslation } from '../../../../contexts/TranslationContext';\nimport { FilePreviewType } from './FilePreview';\nimport ImagePreview from './ImagePreview';\nimport PreviewSkeleton from './PreviewSkeleton';\n\ntype ReaderOnloadCallback = (url: FileReader['result']) => void;\n\nconst readFileAsDataURL = (file: File, callback: ReaderOnloadCallback): void => {\n\tconst reader = new FileReader();\n\treader.onload = (e): void => callback(e?.target?.result || null);\n\n\treturn reader.readAsDataURL(file);\n};\n\nconst useFileAsDataURL = (file: File): [loaded: boolean, url: null | FileReader['result']] => {\n\tconst [loaded, setLoaded] = useState(false);\n\tconst [url, setUrl] = useState<FileReader['result']>(null);\n\n\tuseEffect(() => {\n\t\tsetLoaded(false);\n\t\treadFileAsDataURL(file, (url) => {\n\t\t\tsetUrl(url);\n\t\t\tsetLoaded(true);\n\t\t});\n\t}, [file]);\n\treturn [loaded, url];\n};\n\ntype MediaPreviewProps = {\n\tfile: File;\n\tfileType: FilePreviewType;\n};\n\nconst MediaPreview = ({ file, fileType }: MediaPreviewProps): ReactElement => {\n\tconst [loaded, url] = useFileAsDataURL(file);\n\tconst t = useTranslation();\n\n\tif (!loaded) {\n\t\treturn <PreviewSkeleton />;\n\t}\n\n\tif (typeof url !== 'string') {\n\t\treturn (\n\t\t\t<Box display='flex' alignItems='center' w='full'>\n\t\t\t\t<Icon name='image' size='x24' mie='x4' />\n\t\t\t\t{t('FileUpload_Cannot_preview_file')}\n\t\t\t</Box>\n\t\t);\n\t}\n\n\tif (fileType === FilePreviewType.IMAGE) {\n\t\treturn <ImagePreview url={url} file={file} />;\n\t}\n\n\tif (fileType === FilePreviewType.VIDEO) {\n\t\treturn (\n\t\t\t<Box is='video' w='full' controls>\n\t\t\t\t<source src={url} type={file.type} />\n\t\t\t\t{t('Browser_does_not_support_video_element')}\n\t\t\t</Box>\n\t\t);\n\t}\n\n\tif (fileType === FilePreviewType.AUDIO) {\n\t\treturn (\n\t\t\t<Box is='audio' w='full' controls>\n\t\t\t\t<source src={url} type={file.type} />\n\t\t\t\t{t('Browser_does_not_support_audio_element')}\n\t\t\t</Box>\n\t\t);\n\t}\n\n\tthrow new Error('Wrong props provided for MediaPreview');\n};\n\nexport default memo(MediaPreview);\n","import { Skeleton } from '@rocket.chat/fuselage';\nimport React, { ReactElement } from 'react';\n\nconst PreviewSkeleton = (): ReactElement => <Skeleton variant='rect' w='full' h='x200' />;\n\nexport default PreviewSkeleton;\n","export { default } from './FileUploadModal';\n","import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { ReactElement } from 'react';\n\nimport { openUserCard } from '../../../../../app/ui/client/lib/UserCard';\nimport { IUser } from '../../../../../definition/IUser';\nimport GenericModal from '../../../../components/GenericModal';\nimport { useTranslation } from '../../../../contexts/TranslationContext';\nimport Reactions from './Reactions';\n\ntype ReactionListProps = {\n\trid: string;\n\treactions: ReactElement;\n\ttabBar: {\n\t\topenUserInfo: (username: IUser['username']) => void;\n\t};\n\tonClose: () => void;\n};\n\nconst ReactionList = ({ rid, reactions, tabBar, onClose }: ReactionListProps): ReactElement => {\n\tconst t = useTranslation();\n\n\tconst onClick = useMutableCallback((e) => {\n\t\tconst { username } = e.currentTarget.dataset;\n\n\t\tif (!username) {\n\t\t\treturn;\n\t\t}\n\n\t\topenUserCard({\n\t\t\tusername,\n\t\t\trid,\n\t\t\ttarget: e.currentTarget,\n\t\t\topen: (e: React.MouseEvent<HTMLElement>) => {\n\t\t\t\te.preventDefault();\n\t\t\t\tonClose();\n\t\t\t\ttabBar.openUserInfo(username);\n\t\t\t},\n\t\t});\n\t});\n\n\treturn (\n\t\t<GenericModal variant='info' title={t('Users_reacted')} onClose={onClose} onConfirm={onClose}>\n\t\t\t<Reactions reactions={reactions} onClick={onClick} />\n\t\t</GenericModal>\n\t);\n};\n\nexport default ReactionList;\n","import { Box, Tag } from '@rocket.chat/fuselage';\nimport React, { ReactElement } from 'react';\n\nimport { IUser } from '../../../../../definition/IUser';\n\ntype ReactionUserTag = {\n\tusername: IUser['username'];\n\tonClick: (e: React.MouseEvent<HTMLElement>) => void;\n\tdisplayName: string;\n};\n\nconst ReactionUserTag = ({ username, onClick, displayName }: ReactionUserTag): ReactElement => (\n\t<Box mie='x4' mbe='x4' data-username={username} onClick={onClick} key={displayName}>\n\t\t<Tag variant='secondary'>{displayName}</Tag>\n\t</Box>\n);\n\nexport default ReactionUserTag;\n","import { Box } from '@rocket.chat/fuselage';\nimport React, { ReactElement } from 'react';\n\nimport { IUser } from '../../../../../definition/IUser';\nimport Emoji from '../../../../components/Emoji';\nimport { useSetting } from '../../../../contexts/SettingsContext';\nimport ReactionUserTag from './ReactionUserTag';\n\ntype ReactionsProps = {\n\treactions: ReactElement;\n\tonClick: (e: React.MouseEvent<HTMLElement>) => void;\n};\n\nconst Reactions = ({ reactions, onClick }: ReactionsProps): ReactElement => {\n\tconst useRealName = useSetting('UI_Use_Real_Name');\n\treturn (\n\t\t<Box display='flex' flexDirection='column'>\n\t\t\t{Object.entries(reactions).map(([reaction, { names = [], usernames }]) => (\n\t\t\t\t<Box key={reaction} display='flex' alignItems='center' flexDirection='row' overflowX='hidden' mb='x8'>\n\t\t\t\t\t<Emoji emojiHandle={reaction} />\n\t\t\t\t\t<Box display='flex' flexWrap='wrap' paddingBlock='x4' mis='x4'>\n\t\t\t\t\t\t{usernames.map((username: IUser['username'], i: number) => (\n\t\t\t\t\t\t\t<ReactionUserTag\n\t\t\t\t\t\t\t\tkey={username}\n\t\t\t\t\t\t\t\tdisplayName={useRealName ? names[i] || username : username}\n\t\t\t\t\t\t\t\tusername={username}\n\t\t\t\t\t\t\t\tonClick={onClick}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t))}\n\t\t</Box>\n\t);\n};\n\nexport default Reactions;\n","export { default } from './ReactionListModal';\n","import { css } from '@rocket.chat/css-in-js';\nimport { Box } from '@rocket.chat/fuselage';\nimport colors from '@rocket.chat/fuselage-tokens/colors';\nimport React, { ReactElement } from 'react';\n\nimport type { ReadReceipt } from '../../../../../definition/ReadReceipt';\nimport UserAvatar from '../../../../components/avatar/UserAvatar';\nimport { useFormatDateAndTime } from '../../../../hooks/useFormatDateAndTime';\nimport { useUserDisplayName } from '../../../../hooks/useUserDisplayName';\n\nconst hoverStyle = css`\n\t&:hover {\n\t\tbackground-color: ${colors.n400};\n\t}\n`;\n\nconst ReadReceiptRow = ({ user, ts }: ReadReceipt): ReactElement => {\n\tconst displayName = useUserDisplayName(user);\n\tconst formatDateAndTime = useFormatDateAndTime();\n\n\treturn (\n\t\t<Box\n\t\t\tdisplay='flex'\n\t\t\tflexDirection='row'\n\t\t\tjustifyContent='space-between'\n\t\t\talignItems='center'\n\t\t\tp='x4'\n\t\t\tpi='x32'\n\t\t\tmi='neg-x32'\n\t\t\tclassName={hoverStyle}\n\t\t>\n\t\t\t<Box>\n\t\t\t\t<UserAvatar username={user.username || ''} size='x24' />\n\t\t\t\t<Box is='span' mis='x8'>\n\t\t\t\t\t{displayName}\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t\t<Box is='span' fontScale='c1' color='info'>\n\t\t\t\t{formatDateAndTime(ts)}\n\t\t\t</Box>\n\t\t</Box>\n\t);\n};\n\nexport default ReadReceiptRow;\n","import { Skeleton } from '@rocket.chat/fuselage';\nimport React, { ReactElement, useMemo, useEffect } from 'react';\n\nimport type { IMessage } from '../../../../../definition/IMessage/IMessage';\nimport type { ReadReceipt } from '../../../../../definition/ReadReceipt';\nimport GenericModal from '../../../../components/GenericModal';\nimport { useToastMessageDispatch } from '../../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../../contexts/TranslationContext';\nimport { useMethodData } from '../../../../hooks/useMethodData';\nimport { AsyncStatePhase } from '../../../../lib/asyncState';\nimport ReadReceiptRow from './ReadReceiptRow';\n\ntype ReadReceiptsModalProps = {\n\tmessageId: IMessage['_id'];\n\tonClose: () => void;\n};\n\nconst ReadReceiptsModal = ({ messageId, onClose }: ReadReceiptsModalProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst { phase, value, error } = useMethodData<Array<ReadReceipt>>(\n\t\t'getReadReceipts',\n\t\tuseMemo(() => [{ messageId }], [messageId]),\n\t);\n\n\tuseEffect(() => {\n\t\tif (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\tonClose();\n\t\t}\n\t}, [error, dispatchToastMessage, t, onClose]);\n\n\tif (phase === AsyncStatePhase.LOADING || !value || error) {\n\t\treturn (\n\t\t\t<GenericModal title={t('Read_by')} onConfirm={onClose} onClose={onClose}>\n\t\t\t\t<Skeleton type='rect' w='full' h='x120' />\n\t\t\t</GenericModal>\n\t\t);\n\t}\n\n\treturn (\n\t\t<GenericModal title={t('Read_by')} onConfirm={onClose} onClose={onClose}>\n\t\t\t{value.length < 1 && t('No_results_found')}\n\t\t\t{value.map((receipt) => (\n\t\t\t\t<ReadReceiptRow {...receipt} key={receipt._id} />\n\t\t\t))}\n\t\t</GenericModal>\n\t);\n};\n\nexport default ReadReceiptsModal;\n","export { default } from './ReadReceiptsModal';\n","export { registerAdminRoute } from './routes';\nexport { registerAdminSidebarItem, unregisterSidebarItem as unregisterAdminSidebarItem } from './sidebarItems';\n","import { Meteor } from 'meteor/meteor';\n\nimport { appLayout } from '../../lib/appLayout';\nimport { createRouteGroup } from '../../lib/createRouteGroup';\n\nexport const registerAdminRoute = createRouteGroup('admin', '/admin', () => import('./AdministrationRouter'));\n\nregisterAdminRoute('/custom-sounds/:context?/:id?', {\n\tname: 'custom-sounds',\n\tlazyRouteComponent: () => import('./customSounds/AdminSoundsRoute'),\n});\n\nregisterAdminRoute('/apps/what-is-it', {\n\tname: 'admin-apps-disabled',\n\tlazyRouteComponent: () => import('./apps/AppsWhatIsIt'),\n});\n\nregisterAdminRoute('/marketplace/:context?/:id?/:version?', {\n\tname: 'admin-marketplace',\n\tlazyRouteComponent: () => import('./apps/AppsRoute'),\n});\n\nregisterAdminRoute('/apps/:context?/:id?/:version?', {\n\tname: 'admin-apps',\n\tlazyRouteComponent: () => import('./apps/AppsRoute'),\n});\n\nregisterAdminRoute('/apps/:context?/:id?/:version?', {\n\tname: 'admin-apps',\n\tlazyRouteComponent: () => import('./apps/AppsRoute'),\n});\n\nregisterAdminRoute('/info', {\n\tname: 'admin-info',\n\tlazyRouteComponent: () => import('./info/InformationRoute'),\n});\n\nregisterAdminRoute('/import', {\n\tname: 'admin-import',\n\tlazyRouteComponent: () => import('./import/ImportRoute'),\n\tprops: { page: 'history' },\n});\n\nregisterAdminRoute('/import/new/:importerKey?', {\n\tname: 'admin-import-new',\n\tlazyRouteComponent: () => import('./import/ImportRoute'),\n\tprops: { page: 'new' },\n});\n\nregisterAdminRoute('/import/prepare', {\n\tname: 'admin-import-prepare',\n\tlazyRouteComponent: () => import('./import/ImportRoute'),\n\tprops: { page: 'prepare' },\n});\n\nregisterAdminRoute('/import/progress', {\n\tname: 'admin-import-progress',\n\tlazyRouteComponent: () => import('./import/ImportRoute'),\n\tprops: { page: 'progress' },\n});\n\nregisterAdminRoute('/mailer', {\n\tname: 'admin-mailer',\n\tlazyRouteComponent: () => import('./mailer/MailerRoute'),\n});\n\nregisterAdminRoute('/oauth-apps/:context?/:id?', {\n\tname: 'admin-oauth-apps',\n\tlazyRouteComponent: () => import('./oauthApps/OAuthAppsRoute'),\n});\n\nregisterAdminRoute('/integrations/:context?/:type?/:id?', {\n\tname: 'admin-integrations',\n\tlazyRouteComponent: () => import('./integrations/IntegrationsRoute'),\n});\n\nregisterAdminRoute('/custom-user-status/:context?/:id?', {\n\tname: 'custom-user-status',\n\tlazyRouteComponent: () => import('./customUserStatus/CustomUserStatusRoute'),\n});\n\nregisterAdminRoute('/emoji-custom/:context?/:id?', {\n\tname: 'emoji-custom',\n\tlazyRouteComponent: () => import('./customEmoji/CustomEmojiRoute'),\n});\n\nregisterAdminRoute('/users/:context?/:id?', {\n\tname: 'admin-users',\n\tlazyRouteComponent: () => import('./users/UsersRoute'),\n});\n\nregisterAdminRoute('/rooms/:context?/:id?', {\n\tname: 'admin-rooms',\n\tlazyRouteComponent: () => import('./rooms/RoomsRoute'),\n});\n\nregisterAdminRoute('/invites', {\n\tname: 'invites',\n\tlazyRouteComponent: () => import('./invites/InvitesRoute'),\n});\n\nregisterAdminRoute('/cloud/:page?', {\n\tname: 'cloud',\n\tlazyRouteComponent: () => import('./cloud/CloudRoute'),\n});\n\nregisterAdminRoute('/view-logs', {\n\tname: 'admin-view-logs',\n\tlazyRouteComponent: () => import('./viewLogs/ViewLogsRoute'),\n});\n\nregisterAdminRoute('/federation-dashboard', {\n\tname: 'federation-dashboard',\n\tlazyRouteComponent: () => import('./federationDashboard/FederationDashboardRoute'),\n});\n\nregisterAdminRoute('/permissions/:context?/:_id?', {\n\tname: 'admin-permissions',\n\tlazyRouteComponent: () => import('./permissions/PermissionsRouter'),\n});\n\nregisterAdminRoute('/email-inboxes/:context?/:_id?', {\n\tname: 'admin-email-inboxes',\n\tlazyRouteComponent: () => import('./emailInbox/EmailInboxRoute'),\n});\n\nMeteor.startup(() => {\n\tregisterAdminRoute('/:group+', {\n\t\tname: 'admin',\n\t\tlazyRouteComponent: () => import('./settings/SettingsRoute'),\n\t});\n});\n\nregisterAdminRoute('/chatpal', {\n\tname: 'chatpal-admin',\n\taction() {\n\t\tappLayout.renderMainLayout({ center: 'ChatpalAdmin' });\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { hasPermission, hasRole } from '../../../app/authorization/client';\nimport { createSidebarItems } from '../../lib/createSidebarItems';\n\nexport const {\n\tregisterSidebarItem: registerAdminSidebarItem,\n\tunregisterSidebarItem,\n\titemsSubscription,\n} = createSidebarItems([\n\t{\n\t\thref: 'admin-info',\n\t\ti18nLabel: 'Info',\n\t\ticon: 'info-circled',\n\t\tpermissionGranted: () => hasPermission('view-statistics'),\n\t},\n\t{\n\t\thref: 'admin-import',\n\t\ti18nLabel: 'Import',\n\t\ticon: 'import',\n\t\tpermissionGranted: () => hasPermission('run-import'),\n\t},\n\t{\n\t\thref: 'admin-users',\n\t\ti18nLabel: 'Users',\n\t\ticon: 'team',\n\t\tpermissionGranted: () => hasPermission('view-user-administration'),\n\t},\n\t{\n\t\thref: 'admin-rooms',\n\t\ti18nLabel: 'Rooms',\n\t\ticon: 'hashtag',\n\t\tpermissionGranted: () => hasPermission('view-room-administration'),\n\t},\n\t{\n\t\thref: 'invites',\n\t\ti18nLabel: 'Invites',\n\t\ticon: 'user-plus',\n\t\tpermissionGranted: () => hasPermission('create-invite-links'),\n\t},\n\t{\n\t\ticon: 'cloud-plus',\n\t\thref: 'cloud',\n\t\ti18nLabel: 'Connectivity_Services',\n\t\tpermissionGranted: () => hasPermission('manage-cloud'),\n\t},\n\t{\n\t\thref: 'admin-view-logs',\n\t\ti18nLabel: 'View_Logs',\n\t\ticon: 'post',\n\t\tpermissionGranted: () => hasPermission('view-logs'),\n\t},\n\t{\n\t\thref: 'custom-sounds',\n\t\ti18nLabel: 'Custom_Sounds',\n\t\ticon: 'volume',\n\t\tpermissionGranted: () => hasPermission(['manage-sounds']),\n\t},\n\t{\n\t\ticon: 'discover',\n\t\thref: 'federation-dashboard',\n\t\ti18nLabel: 'Federation Dashboard',\n\t\tpermissionGranted: () => hasRole(Meteor.userId(), 'admin'),\n\t},\n\t{\n\t\ticon: 'cube',\n\t\thref: 'admin-marketplace',\n\t\ti18nLabel: 'Apps',\n\t\tpermissionGranted: () => hasPermission(['manage-apps']),\n\t},\n\t{\n\t\ticon: 'mail',\n\t\thref: 'admin-email-inboxes',\n\t\ti18nLabel: 'Email_Inboxes',\n\t\ttag: 'Alpha',\n\t\tpermissionGranted: () => hasPermission(['manage-email-inbox']),\n\t},\n]);\n","const createFormSubscription = () => {\n\tlet forms = {};\n\tlet updateCb = () => {};\n\n\tconst formsSubscription = {\n\t\tsubscribe: (cb) => {\n\t\t\tupdateCb = cb;\n\t\t\treturn () => {\n\t\t\t\tupdateCb = () => {};\n\t\t\t};\n\t\t},\n\t\tgetCurrentValue: () => forms,\n\t};\n\tconst registerForm = (newForm) => {\n\t\tforms = { ...forms, ...newForm };\n\t\tupdateCb();\n\t};\n\tconst unregisterForm = (form) => {\n\t\tdelete forms[form];\n\t\tupdateCb();\n\t};\n\n\treturn { registerForm, unregisterForm, formsSubscription };\n};\n\nexport const { registerForm, unregisterForm, formsSubscription } = createFormSubscription();\n","import { createRouteGroup } from '../../lib/createRouteGroup';\n\nexport const registerOmnichannelRoute = createRouteGroup('omnichannel', '/omnichannel', () => import('./OmnichannelRouter'));\n\nregisterOmnichannelRoute('/installation', {\n\tname: 'omnichannel-installation',\n\tlazyRouteComponent: () => import('./installation/Installation'),\n});\n\nregisterOmnichannelRoute('/managers', {\n\tname: 'omnichannel-managers',\n\tlazyRouteComponent: () => import('./managers/ManagersRoute'),\n});\n\nregisterOmnichannelRoute('/agents/:context?/:id?', {\n\tname: 'omnichannel-agents',\n\tlazyRouteComponent: () => import('./agents/AgentsRoute'),\n});\n\nregisterOmnichannelRoute('/webhooks', {\n\tname: 'omnichannel-webhooks',\n\tlazyRouteComponent: () => import('./webhooks/WebhooksPageContainer'),\n});\n\nregisterOmnichannelRoute('/customfields/:context?/:id?', {\n\tname: 'omnichannel-customfields',\n\tlazyRouteComponent: () => import('./customFields/CustomFieldsRoute'),\n});\n\nregisterOmnichannelRoute('/appearance', {\n\tname: 'omnichannel-appearance',\n\tlazyRouteComponent: () => import('./appearance/AppearancePageContainer'),\n});\n\nregisterOmnichannelRoute('/businessHours/:context?/:type?/:id?', {\n\tname: 'omnichannel-businessHours',\n\tlazyRouteComponent: () => import('./businessHours/BusinessHoursRouter'),\n});\n\nregisterOmnichannelRoute('/units/:context?/:id?', {\n\tname: 'omnichannel-units',\n\tlazyRouteComponent: () => import('../../../ee/client/omnichannel/units/UnitsRoute'),\n});\n\nregisterOmnichannelRoute('/tags/:context?/:id?', {\n\tname: 'omnichannel-tags',\n\tlazyRouteComponent: () => import('../../../ee/client/omnichannel/tags/TagsRoute'),\n});\n\nregisterOmnichannelRoute('/priorities/:context?/:id?', {\n\tname: 'omnichannel-priorities',\n\tlazyRouteComponent: () => import('../../../ee/client/omnichannel/priorities/PrioritiesRoute'),\n});\n\nregisterOmnichannelRoute('/triggers/:context?/:id?', {\n\tname: 'omnichannel-triggers',\n\tlazyRouteComponent: () => import('./triggers/TriggersPage'),\n});\n\nregisterOmnichannelRoute('/facebook', {\n\tname: 'omnichannel-facebook',\n\tlazyRouteComponent: () => import('./facebook/FacebookPageContainer'),\n});\n\nregisterOmnichannelRoute('/current', {\n\tname: 'omnichannel-current-chats',\n\tlazyRouteComponent: () => import('./currentChats/CurrentChatsRoute'),\n});\n\nregisterOmnichannelRoute('/departments/:context?/:id?/:tab?', {\n\tname: 'omnichannel-departments',\n\tlazyRouteComponent: () => import('./departments/DepartmentsRoute'),\n});\n\nregisterOmnichannelRoute('/realtime-monitoring', {\n\tname: 'omnichannel-realTime',\n\tlazyRouteComponent: () => import('./realTimeMonitoring/RealTimeMonitoringPage'),\n});\n\nregisterOmnichannelRoute('/analytics', {\n\tname: 'omnichannel-analytics',\n\tlazyRouteComponent: () => import('./analytics/AnalyticsPage'),\n});\n","import { hasPermission } from '../../../app/authorization/client';\nimport { createSidebarItems } from '../../lib/createSidebarItems';\n\nexport const {\n\tregisterSidebarItem: registerOmnichannelSidebarItem,\n\tunregisterSidebarItem,\n\titemsSubscription,\n} = createSidebarItems([\n\t{\n\t\thref: 'omnichannel/current',\n\t\ti18nLabel: 'Current_Chats',\n\t\tpermissionGranted: () => hasPermission('view-livechat-current-chats'),\n\t},\n\t{\n\t\thref: 'omnichannel-analytics',\n\t\ti18nLabel: 'Analytics',\n\t\tpermissionGranted: () => hasPermission('view-livechat-analytics'),\n\t},\n\t{\n\t\thref: 'omnichannel-realTime',\n\t\ti18nLabel: 'Real_Time_Monitoring',\n\t\tpermissionGranted: () => hasPermission('view-livechat-real-time-monitoring'),\n\t},\n\t{\n\t\thref: 'omnichannel/managers',\n\t\ti18nLabel: 'Managers',\n\t\tpermissionGranted: () => hasPermission('manage-livechat-managers'),\n\t},\n\t{\n\t\thref: 'omnichannel/agents',\n\t\ti18nLabel: 'Agents',\n\t\tpermissionGranted: () => hasPermission('manage-livechat-agents'),\n\t},\n\t{\n\t\thref: 'omnichannel/departments',\n\t\ti18nLabel: 'Departments',\n\t\tpermissionGranted: () => hasPermission('view-livechat-departments'),\n\t},\n\t{\n\t\thref: 'omnichannel-customfields',\n\t\ti18nLabel: 'Custom_Fields',\n\t\tpermissionGranted: () => hasPermission('view-livechat-customfields'),\n\t},\n\t{\n\t\thref: 'omnichannel-triggers',\n\t\ti18nLabel: 'Livechat_Triggers',\n\t\tpermissionGranted: () => hasPermission('view-livechat-triggers'),\n\t},\n\t{\n\t\thref: 'omnichannel-installation',\n\t\ti18nLabel: 'Livechat_Installation',\n\t\tpermissionGranted: () => hasPermission('view-livechat-installation'),\n\t},\n\t{\n\t\thref: 'omnichannel-appearance',\n\t\ti18nLabel: 'Livechat_Appearance',\n\t\tpermissionGranted: () => hasPermission('view-livechat-appearance'),\n\t},\n\t{\n\t\thref: 'omnichannel-webhooks',\n\t\ti18nLabel: 'Webhooks',\n\t\tpermissionGranted: () => hasPermission('view-livechat-webhooks'),\n\t},\n\t{\n\t\thref: 'omnichannel-facebook',\n\t\ti18nLabel: 'Facebook Messenger',\n\t\tpermissionGranted: () => hasPermission('view-livechat-facebook'),\n\t},\n\t{\n\t\thref: 'omnichannel-businessHours',\n\t\ti18nLabel: 'Business_Hours',\n\t\tpermissionGranted: () => hasPermission('view-livechat-business-hours'),\n\t},\n]);\n","import { FC, lazy, LazyExoticComponent } from 'react';\n\nimport { addAction } from '../../../room/lib/Toolbox';\n\naddAction('team-channels', {\n\tgroups: ['team'],\n\tid: 'team-channels',\n\tanonymous: true,\n\tfull: true,\n\ttitle: 'Team_Channels',\n\ticon: 'hash',\n\ttemplate: lazy(() => import('./index')) as LazyExoticComponent<FC>,\n\torder: 2,\n});\n","import { FC, lazy, LazyExoticComponent } from 'react';\n\nimport { addAction } from '../../../room/lib/Toolbox';\n\naddAction('team-info', {\n\tgroups: ['team'],\n\tid: 'team-info',\n\tanonymous: true,\n\tfull: true,\n\ttitle: 'Teams_Info',\n\ticon: 'info-circled',\n\ttemplate: lazy(() => import('./index.js')) as LazyExoticComponent<FC>,\n\torder: 1,\n});\n","import './contextualBar/channels/tabBar';\nimport './contextualBar/info/tabBar';\n","import React, { FC, lazy, Suspense } from 'react';\nimport { QueryClientProvider } from 'react-query';\n\nimport { OmnichannelRoomIconProvider } from '../../components/RoomIcon/OmnichannelRoomIcon/provider/OmnichannelRoomIconProvider';\nimport { queryClient } from '../../lib/queryClient';\nimport PageLoading from './PageLoading';\n\nconst ConnectionStatusBar = lazy(() => import('../../components/connectionStatus/ConnectionStatusBar'));\nconst MeteorProvider = lazy(() => import('../../providers/MeteorProvider'));\nconst BannerRegion = lazy(() => import('../banners/BannerRegion'));\nconst AppLayout = lazy(() => import('./AppLayout'));\nconst PortalsWrapper = lazy(() => import('./PortalsWrapper'));\n\nconst AppRoot: FC = () => (\n\t<Suspense fallback={<PageLoading />}>\n\t\t<MeteorProvider>\n\t\t\t<QueryClientProvider client={queryClient}>\n\t\t\t\t<OmnichannelRoomIconProvider>\n\t\t\t\t\t<ConnectionStatusBar />\n\t\t\t\t\t<BannerRegion />\n\t\t\t\t\t<AppLayout />\n\t\t\t\t\t<PortalsWrapper />\n\t\t\t\t</OmnichannelRoomIconProvider>\n\t\t\t</QueryClientProvider>\n\t\t</MeteorProvider>\n\t</Suspense>\n);\n\nexport default AppRoot;\n","import React, { FC } from 'react';\n\nconst PageLoading: FC = () => (\n\t<div className='page-loading'>\n\t\t<div className='loading-animation'>\n\t\t\t<div className='bounce bounce1'></div>\n\t\t\t<div className='bounce bounce2'></div>\n\t\t\t<div className='bounce bounce3'></div>\n\t\t</div>\n\t</div>\n);\n\nexport default PageLoading;\n","import { Box, PasswordInput, Field, FieldGroup } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { ReactElement, useState, useCallback } from 'react';\n\nimport GenericModal from '../../components/GenericModal';\nimport { useTranslation } from '../../contexts/TranslationContext';\n\nconst EnterE2EPasswordModal = ({\n\tonConfirm,\n\tonClose,\n\tonCancel,\n}: {\n\tonConfirm: (password: string) => void;\n\tonClose: () => void;\n\tonCancel: () => void;\n}): ReactElement => {\n\tconst t = useTranslation();\n\tconst [password, setPassword] = useState('');\n\tconst [passwordError, setPasswordError] = useState<string | undefined>();\n\n\tconst handleChange = useCallback(\n\t\t(e: React.ChangeEvent<HTMLInputElement>) => {\n\t\t\te.target.value !== '' && setPasswordError(undefined);\n\t\t\tsetPassword(e.currentTarget.value);\n\t\t},\n\t\t[setPassword],\n\t);\n\n\tconst handleConfirm = useMutableCallback((): void => {\n\t\tif (password === '') {\n\t\t\tsetPasswordError(t('Invalid_pass'));\n\t\t\treturn;\n\t\t}\n\n\t\treturn onConfirm(password);\n\t});\n\n\treturn (\n\t\t<GenericModal\n\t\t\tvariant='warning'\n\t\t\ttitle={t('Enter_E2E_password')}\n\t\t\tcancelText={t('Do_It_Later')}\n\t\t\tconfirmText={t('Decode_Key')}\n\t\t\tonConfirm={handleConfirm}\n\t\t\tonClose={onClose}\n\t\t\tonCancel={onCancel}\n\t\t>\n\t\t\t<Box dangerouslySetInnerHTML={{ __html: t('E2E_password_request_text') }} />\n\t\t\t<FieldGroup mbs='x24' w='full'>\n\t\t\t\t<Field>\n\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t<PasswordInput error={passwordError} value={password} onChange={handleChange} placeholder={t('New_Password_Placeholder')} />\n\t\t\t\t\t</Field.Row>\n\t\t\t\t\t<Field.Error>{passwordError}</Field.Error>\n\t\t\t\t</Field>\n\t\t\t</FieldGroup>\n\t\t</GenericModal>\n\t);\n};\n\nexport default EnterE2EPasswordModal;\n","import { Box } from '@rocket.chat/fuselage';\nimport React, { ReactElement } from 'react';\n\nimport GenericModal from '../../components/GenericModal';\nimport { useTranslation } from '../../contexts/TranslationContext';\n\nconst SaveE2EPasswordModal = ({\n\tpasswordRevealText,\n\tonClose,\n\tonCancel,\n\tonConfirm,\n}: {\n\tpasswordRevealText: string;\n\tonClose: () => void;\n\tonCancel: () => void;\n\tonConfirm: () => void;\n}): ReactElement => {\n\tconst t = useTranslation();\n\n\treturn (\n\t\t<GenericModal\n\t\t\tonClose={onClose}\n\t\t\tonCancel={onCancel}\n\t\t\tonConfirm={onConfirm}\n\t\t\tcancelText={t('Do_It_Later')}\n\t\t\tconfirmText={t('I_Saved_My_Password')}\n\t\t\tvariant='warning'\n\t\t\ttitle={t('Save_Your_Encryption_Password')}\n\t\t>\n\t\t\t<Box dangerouslySetInnerHTML={{ __html: passwordRevealText }} />\n\t\t</GenericModal>\n\t);\n};\n\nexport default SaveE2EPasswordModal;\n","import { Emitter } from '@rocket.chat/emitter';\nimport DOMPurify from 'dompurify';\n\nimport { APIClient } from '../../../../../app/utils/client';\n\nconst OmnichannelRoomIcon = new (class extends Emitter {\n\ticons = new Map<string, string>();\n\n\tconstructor() {\n\t\tsuper();\n\t}\n\n\tpublic get(appId: string, icon: string): string | undefined {\n\t\tif (!appId || !icon) {\n\t\t\treturn;\n\t\t}\n\t\tif (this.icons.has(`${appId}-${icon}`)) {\n\t\t\treturn `${appId}-${icon}`;\n\t\t}\n\t\tAPIClient.get(`apps/public/${appId}/get-sidebar-icon`, { icon }).then((response) => {\n\t\t\tthis.icons.set(\n\t\t\t\t`${appId}-${icon}`,\n\t\t\t\tDOMPurify.sanitize(response, {\n\t\t\t\t\tFORBID_ATTR: ['id'],\n\t\t\t\t\tNAMESPACE: 'http://www.w3.org/2000/svg',\n\t\t\t\t\tUSE_PROFILES: { svg: true, svgFilters: true },\n\t\t\t\t})\n\t\t\t\t\t.replace(`<svg`, `<symbol id=\"${appId}-${icon}\"`)\n\t\t\t\t\t.replace(`</svg>`, '</symbol>'),\n\t\t\t);\n\t\t\tthis.emit('change');\n\t\t\tthis.emit(`${appId}-${icon}`);\n\t\t});\n\t}\n})();\n\nexport default OmnichannelRoomIcon;\n","import { createContext, useMemo, useContext } from 'react';\nimport { useSubscription, Unsubscribe } from 'use-subscription';\n\nimport { AsyncState } from '../../../../lib/asyncState/AsyncState';\nimport { AsyncStatePhase } from '../../../../lib/asyncState/AsyncStatePhase';\n\ntype IOmnichannelRoomIconContext = {\n\tqueryIcon(\n\t\tapp: string,\n\t\ticon: string,\n\t): {\n\t\tgetCurrentValue: () => AsyncState<string>;\n\t\tsubscribe: (callback: () => void) => Unsubscribe;\n\t};\n};\n\nexport const OmnichannelRoomIconContext = createContext<IOmnichannelRoomIconContext>({\n\tqueryIcon: () => ({\n\t\tgetCurrentValue: (): AsyncState<string> => ({\n\t\t\tphase: AsyncStatePhase.LOADING,\n\t\t\tvalue: undefined,\n\t\t\terror: undefined,\n\t\t}),\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n});\n\nexport const useOmnichannelRoomIcon = (app: string, icon: string): AsyncState<string> => {\n\tconst { queryIcon } = useContext(OmnichannelRoomIconContext);\n\treturn useSubscription(useMemo(() => queryIcon(app, icon), [app, queryIcon, icon]));\n};\n","import React, { FC, useMemo } from 'react';\nimport { createPortal } from 'react-dom';\nimport { useSubscription, Subscription } from 'use-subscription';\n\nimport { AsyncState } from '../../../../lib/asyncState/AsyncState';\nimport { AsyncStatePhase } from '../../../../lib/asyncState/AsyncStatePhase';\nimport { OmnichannelRoomIconContext } from '../context/OmnichannelRoomIconContext';\nimport OmnichannelRoomIcon from '../lib/OmnichannelRoomIcon';\n\nexport const OmnichannelRoomIconProvider: FC = ({ children }) => {\n\tconst svgIcons = useSubscription(\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\tgetCurrentValue: (): string[] => Array.from(OmnichannelRoomIcon.icons.values()),\n\t\t\t\tsubscribe: (callback): (() => void) => OmnichannelRoomIcon.on('change', callback),\n\t\t\t}),\n\t\t\t[],\n\t\t),\n\t);\n\treturn (\n\t\t<OmnichannelRoomIconContext.Provider\n\t\t\tvalue={useMemo(\n\t\t\t\t() => ({\n\t\t\t\t\tqueryIcon: (app: string, iconName: string): Subscription<AsyncState<string>> => ({\n\t\t\t\t\t\tgetCurrentValue: (): AsyncState<string> => {\n\t\t\t\t\t\t\tconst icon = OmnichannelRoomIcon.get(app, iconName);\n\n\t\t\t\t\t\t\tif (!icon) {\n\t\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\t\tphase: AsyncStatePhase.LOADING,\n\t\t\t\t\t\t\t\t\tvalue: undefined,\n\t\t\t\t\t\t\t\t\terror: undefined,\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tphase: AsyncStatePhase.RESOLVED,\n\t\t\t\t\t\t\t\tvalue: icon,\n\t\t\t\t\t\t\t\terror: undefined,\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsubscribe: (callback): (() => void) => OmnichannelRoomIcon.on(`${app}-${iconName}`, callback),\n\t\t\t\t\t}),\n\t\t\t\t}),\n\t\t\t\t[],\n\t\t\t)}\n\t\t>\n\t\t\t{createPortal(\n\t\t\t\t<svg\n\t\t\t\t\txmlns='http://www.w3.org/2000/svg'\n\t\t\t\t\txmlnsXlink='http://www.w3.org/1999/xlink'\n\t\t\t\t\tstyle={{ display: 'none' }}\n\t\t\t\t\tdangerouslySetInnerHTML={{ __html: svgIcons.join('') }}\n\t\t\t\t/>,\n\t\t\t\tdocument.body,\n\t\t\t\t'custom-icons',\n\t\t\t)}\n\t\t\t{children}\n\t\t</OmnichannelRoomIconContext.Provider>\n\t);\n};\n","import { Options } from '@rocket.chat/fuselage';\nimport React from 'react';\n\nimport RoomAvatar from '../avatar/RoomAvatar';\n\nconst Avatar = ({ value, type, avatarETag, ...props }) => (\n\t<RoomAvatar size={Options.AvatarSize} room={{ type, _id: value, avatarETag }} {...props} />\n);\n\nexport default Avatar;\n","import { AutoComplete, Option, Box } from '@rocket.chat/fuselage';\nimport React, { memo, useMemo, useState } from 'react';\n\nimport { useEndpointData } from '../../hooks/useEndpointData';\nimport RoomAvatar from '../avatar/RoomAvatar';\nimport Avatar from './Avatar';\n\nconst query = (term = '') => ({ selector: JSON.stringify({ name: term }) });\n\nconst RoomAutoComplete = (props) => {\n\tconst [filter, setFilter] = useState('');\n\tconst { value: data } = useEndpointData(\n\t\t'rooms.autocomplete.channelAndPrivate',\n\t\tuseMemo(() => query(filter), [filter]),\n\t);\n\tconst options = useMemo(\n\t\t() =>\n\t\t\t(data &&\n\t\t\t\tdata.items.map(({ name, _id, avatarETag, t }) => ({\n\t\t\t\t\tvalue: _id,\n\t\t\t\t\tlabel: { name, avatarETag, type: t },\n\t\t\t\t}))) ||\n\t\t\t[],\n\t\t[data],\n\t);\n\n\treturn (\n\t\t<AutoComplete\n\t\t\t{...props}\n\t\t\tfilter={filter}\n\t\t\tsetFilter={setFilter}\n\t\t\trenderSelected={({ value, label }) => (\n\t\t\t\t<>\n\t\t\t\t\t<Box margin='none' mi='x2'>\n\t\t\t\t\t\t<RoomAvatar size='x20' room={{ type: label?.type || 'c', _id: value, ...label }} />{' '}\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box margin='none' mi='x2'>\n\t\t\t\t\t\t{label?.name}\n\t\t\t\t\t</Box>\n\t\t\t\t</>\n\t\t\t)}\n\t\t\trenderItem={({ value, label, ...props }) => (\n\t\t\t\t<Option key={value} {...props} label={label.name} avatar={<Avatar value={value} {...label} />} />\n\t\t\t)}\n\t\t\toptions={options}\n\t\t/>\n\t);\n};\n\nexport default memo(RoomAutoComplete);\n","export { default } from './RoomAutoComplete';\n","import { Avatar, AvatarProps, Skeleton } from '@rocket.chat/fuselage';\nimport React, { FC, useState } from 'react';\n\nexport type BaseAvatarProps = AvatarProps;\n\nconst BaseAvatar: FC<BaseAvatarProps> = ({ size, ...props }) => {\n\tconst [error, setError] = useState<unknown>(false);\n\n\tif (error) {\n\t\treturn <Skeleton variant='rect' {...props} />;\n\t}\n\n\treturn <Avatar onError={setError} size={size} {...props} />;\n};\n\nexport default BaseAvatar;\n","import React, { memo } from 'react';\n\nimport { useRoomAvatarPath } from '../../contexts/AvatarUrlContext';\nimport BaseAvatar from './BaseAvatar';\n\nfunction RoomAvatar({ room, ...rest }) {\n\tconst getRoomPathAvatar = useRoomAvatarPath();\n\tconst { url = getRoomPathAvatar(room), ...props } = rest;\n\treturn <BaseAvatar url={url} {...props} />;\n}\n\nexport default memo(RoomAvatar);\n","import React, { FC, memo } from 'react';\n\nimport { useUserAvatarPath } from '../../contexts/AvatarUrlContext';\nimport BaseAvatar, { BaseAvatarProps } from './BaseAvatar';\n\ntype UserAvatarProps = Omit<BaseAvatarProps, 'url' | 'title'> & {\n\tusername: string;\n\tetag?: string;\n\turl?: string;\n};\n\nconst UserAvatar: FC<UserAvatarProps> = ({ username, etag, ...rest }) => {\n\tconst getUserAvatarPath = useUserAvatarPath();\n\tconst { url = getUserAvatarPath(username, etag), ...props } = rest;\n\n\treturn <BaseAvatar url={url} title={username} {...props} />;\n};\n\nexport default memo(UserAvatar);\n","import { Modal, Field, FieldGroup, ToggleSwitch, TextInput, TextAreaInput, ButtonGroup, Button, Icon, Box } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { ReactElement } from 'react';\n\nimport { IMessage } from '../../../definition/IMessage';\nimport { IRoom } from '../../../definition/IRoom';\nimport { IUser } from '../../../definition/IUser';\nimport { useTranslation } from '../../contexts/TranslationContext';\nimport { useEndpointActionExperimental } from '../../hooks/useEndpointActionExperimental';\nimport { useForm } from '../../hooks/useForm';\nimport { goToRoomById } from '../../lib/utils/goToRoomById';\nimport RoomAutoComplete from '../RoomAutoComplete';\nimport UserAutoCompleteMultiple from '../UserAutoCompleteMultiple';\nimport DefaultParentRoomField from './DefaultParentRoomField';\n\ntype CreateDiscussionFormValues = {\n\tname: string;\n\tparentRoom: IRoom['_id'];\n\tencrypted: boolean;\n\tusernames: Array<IUser['username']>;\n\tfirstMessage: string;\n};\n\ntype CreateDiscussionProps = {\n\tparentMessageId: IMessage['_id'];\n\tonClose: () => void;\n\tdefaultParentRoom?: IRoom['_id'];\n\tnameSuggestion?: string;\n};\n\nconst CreateDiscussion = ({ onClose, defaultParentRoom, parentMessageId, nameSuggestion }: CreateDiscussionProps): ReactElement => {\n\tconst t = useTranslation();\n\n\tconst { values, handlers } = useForm({\n\t\tname: nameSuggestion || '',\n\t\tparentRoom: '',\n\t\tencrypted: false,\n\t\tusernames: [],\n\t\tfirstMessage: '',\n\t});\n\n\tconst { name, parentRoom, encrypted, usernames, firstMessage } = values as CreateDiscussionFormValues;\n\n\tconst { handleName, handleParentRoom, handleEncrypted, handleUsernames, handleFirstMessage } = handlers;\n\n\tconst canCreate = (parentRoom || defaultParentRoom) && name;\n\n\tconst createDiscussion = useEndpointActionExperimental('POST', 'rooms.createDiscussion');\n\n\tconst create = useMutableCallback(async (): Promise<void> => {\n\t\ttry {\n\t\t\tconst result = await createDiscussion({\n\t\t\t\tprid: defaultParentRoom || parentRoom,\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\tt_name: name,\n\t\t\t\tusers: usernames,\n\t\t\t\treply: encrypted ? undefined : firstMessage,\n\t\t\t\t...(parentMessageId && { pmid: parentMessageId }),\n\t\t\t});\n\n\t\t\tgoToRoomById(result.discussion._id);\n\t\t\tonClose();\n\t\t} catch (error) {\n\t\t\tconsole.warn(error);\n\t\t}\n\t});\n\n\tconst onChangeUsers = useMutableCallback((value, action) => {\n\t\tif (!action) {\n\t\t\tif (usernames.includes(value)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn handleUsernames([...usernames, value]);\n\t\t}\n\t\thandleUsernames(usernames.filter((current) => current !== value));\n\t});\n\n\treturn (\n\t\t<Modal>\n\t\t\t<Modal.Header>\n\t\t\t\t<Modal.Title>{t('Discussion_title')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={onClose} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content>\n\t\t\t\t<FieldGroup>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Description>{t('Discussion_description')}</Field.Description>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('Discussion_target_channel')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t{defaultParentRoom && <DefaultParentRoomField defaultParentRoom={defaultParentRoom} />}\n\n\t\t\t\t\t\t\t{!defaultParentRoom && (\n\t\t\t\t\t\t\t\t<RoomAutoComplete\n\t\t\t\t\t\t\t\t\tvalue={parentRoom}\n\t\t\t\t\t\t\t\t\tonChange={handleParentRoom}\n\t\t\t\t\t\t\t\t\tplaceholder={t('Discussion_target_channel_description')}\n\t\t\t\t\t\t\t\t\tdisabled={defaultParentRoom}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field display='flex' alignItems='center' flexDirection='row' justifyContent='spaceBetween' flexGrow={1}>\n\t\t\t\t\t\t<Box display='flex' flexDirection='column' width='full'>\n\t\t\t\t\t\t\t<Field.Label>{t('Encrypted')}</Field.Label>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<ToggleSwitch checked={encrypted} onChange={handleEncrypted} />\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('Discussion_name')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tvalue={name}\n\t\t\t\t\t\t\t\tonChange={handleName}\n\t\t\t\t\t\t\t\taddon={<Icon name='baloons' size='x20' />}\n\t\t\t\t\t\t\t\tplaceholder={t('New_discussion_name')}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('Invite_Users')}</Field.Label>\n\t\t\t\t\t\t<Field.Row w='full' display='flex' flexDirection='column' alignItems='stretch'>\n\t\t\t\t\t\t\t<UserAutoCompleteMultiple value={usernames} onChange={onChangeUsers} placeholder={t('Username_Placeholder')} />\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('Discussion_first_message_title')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextAreaInput\n\t\t\t\t\t\t\t\tvalue={firstMessage}\n\t\t\t\t\t\t\t\tonChange={handleFirstMessage}\n\t\t\t\t\t\t\t\tplaceholder={t('New_discussion_first_message')}\n\t\t\t\t\t\t\t\trows={5}\n\t\t\t\t\t\t\t\tdisabled={encrypted}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t{encrypted && <Field.Description>{t('Discussion_first_message_disabled_due_to_e2e')}</Field.Description>}\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<ButtonGroup align='end'>\n\t\t\t\t\t<Button onClick={onClose}>{t('Cancel')}</Button>\n\t\t\t\t\t<Button primary disabled={!canCreate} onClick={create}>\n\t\t\t\t\t\t{t('Create')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport default CreateDiscussion;\n","import { Skeleton, TextInput, Callout } from '@rocket.chat/fuselage';\nimport React, { useMemo, ReactElement } from 'react';\n\nimport { roomTypes } from '../../../app/utils/client/lib/roomTypes';\nimport { useTranslation } from '../../contexts/TranslationContext';\nimport { AsyncStatePhase } from '../../hooks/useAsyncState';\nimport { useEndpointData } from '../../hooks/useEndpointData';\n\nconst DefaultParentRoomField = ({ defaultParentRoom }: { defaultParentRoom: string }): ReactElement => {\n\tconst t = useTranslation();\n\tconst { value, phase } = useEndpointData(\n\t\t'rooms.info',\n\t\tuseMemo(\n\t\t\t() => ({\n\t\t\t\troomId: defaultParentRoom,\n\t\t\t}),\n\t\t\t[defaultParentRoom],\n\t\t),\n\t);\n\n\tif (phase === AsyncStatePhase.LOADING) {\n\t\treturn <Skeleton width='full' />;\n\t}\n\n\tif (!value || !value.room) {\n\t\treturn <Callout type={'danger'}>{t('Error')}</Callout>;\n\t}\n\n\treturn <TextInput value={roomTypes.getRoomName(value.room.t, value.room)} disabled onChange={(): string => ''} />;\n};\n\nexport default DefaultParentRoomField;\n","import React, { FC } from 'react';\n\nimport Button from './Button';\n\nconst Avatar: FC<any> = (props) => <Button width='x36' {...props} />;\n\nexport default Avatar;\n","import { Box } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nconst Button: FC<any> = (props) => <Box mi='x4' display='flex' alignItems='center' {...props} />;\n\nexport default Button;\n","import { Box } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nconst Content: FC<any> = (props) => (\n\t<Box flexGrow={1} width={1} flexShrink={1} mi='x4' display='flex' justifyContent='center' flexDirection='column' {...props} />\n);\n\nexport default Content;\n","import { Box } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nimport { useLayout } from '../../contexts/LayoutContext';\nimport HeaderDivider from './HeaderDivider';\n\nconst Header: FC<any> = (props) => {\n\tconst { isMobile } = useLayout();\n\n\treturn (\n\t\t<Box\n\t\t\trcx-room-header\n\t\t\tis='header'\n\t\t\theight='x64'\n\t\t\tdisplay='flex'\n\t\t\tjustifyContent='center'\n\t\t\tflexDirection='column'\n\t\t\toverflow='hidden'\n\t\t\tflexShrink={0}\n\t\t>\n\t\t\t<Box\n\t\t\t\theight='x64'\n\t\t\t\tmi='neg-x4'\n\t\t\t\tpi={isMobile ? 'x12' : 'x24'}\n\t\t\t\tdisplay='flex'\n\t\t\t\tflexGrow={1}\n\t\t\t\tjustifyContent='center'\n\t\t\t\talignItems='center'\n\t\t\t\toverflow='hidden'\n\t\t\t\tflexDirection='row'\n\t\t\t\t{...props}\n\t\t\t/>\n\t\t\t<HeaderDivider />\n\t\t</Box>\n\t);\n};\n\nexport default Header;\n","import { Divider } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nconst HeaderDivider: FC = () => <Divider mbs={-2} mbe={0} />;\n\nexport default HeaderDivider;\n","import { Box, Icon } from '@rocket.chat/fuselage';\nimport React, { FC, isValidElement, ReactElement } from 'react';\n\ntype HeaderIconProps = { icon: ReactElement | { name: string; color?: string } | null };\n\nconst HeaderIcon: FC<HeaderIconProps> = ({ icon }) =>\n\ticon && (\n\t\t<Box display='flex' flexShrink={0} alignItems='center' size={18} overflow='hidden' justifyContent='center'>\n\t\t\t{isValidElement(icon) ? icon : <Icon color='info' size='x18' {...{ name: (icon as any).name }} />}\n\t\t</Box>\n\t);\n\nexport default HeaderIcon;\n","import { css } from '@rocket.chat/css-in-js';\nimport { Box } from '@rocket.chat/fuselage';\nimport colors from '@rocket.chat/fuselage-tokens/colors';\nimport React, { ComponentProps, FC } from 'react';\n\nconst HeaderLink: FC<ComponentProps<typeof Box>> = (props) => (\n\t<Box\n\t\tis='a'\n\t\t{...props}\n\t\twithTruncatedText\n\t\tclassName={[\n\t\t\tcss`\n\t\t\t\tcolor: ${colors.n700} !important;\n\t\t\t\t&:hover,\n\t\t\t\t&:focus {\n\t\t\t\t\tcolor: ${colors.n800} !important;\n\t\t\t\t}\n\t\t\t\t&:visited {\n\t\t\t\t\tcolor: ${colors.n800};\n\t\t\t\t}\n\t\t\t`,\n\t\t].filter(Boolean)}\n\t/>\n);\n\nexport default HeaderLink;\n","import { Box, Tag } from '@rocket.chat/fuselage';\nimport React, { ComponentProps, FC } from 'react';\n\nconst HeaderTag: FC<ComponentProps<typeof Tag>> = ({ children, ...props }) => (\n\t<Box display='flex' minWidth='65px' mi='x4'>\n\t\t<Tag {...props}>\n\t\t\t<Box alignItems='center' fontScale='c2' display='flex' minWidth={0}>\n\t\t\t\t{children}\n\t\t\t</Box>\n\t\t</Tag>\n\t</Box>\n);\n\nexport default HeaderTag;\n","import { Box, Icon } from '@rocket.chat/fuselage';\nimport colors from '@rocket.chat/fuselage-tokens/colors';\nimport React, { ComponentProps, FC, isValidElement, ReactElement } from 'react';\n\ntype HeaderIconProps = {\n\ticon: ReactElement | Pick<ComponentProps<typeof Icon>, 'name' | 'color'> | null;\n};\n\nconst HeaderTagIcon: FC<HeaderIconProps> = ({ icon }) =>\n\ticon ? (\n\t\t<Box w='x16' mie='x2' display='inline-flex' justifyContent='center'>\n\t\t\t{isValidElement(icon) ? icon : <Icon size='x16' color={colors.n700} {...icon} />}\n\t\t</Box>\n\t) : null;\n\nexport default HeaderTagIcon;\n","import { Skeleton } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nconst HeaderTagSkeleton: FC = () => <Skeleton width='x48' />;\nexport default HeaderTagSkeleton;\n","import { Box } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nconst Row: FC<any> = (props) => <Box alignItems='center' flexShrink={1} flexGrow={1} display='flex' {...props} />;\n\nexport default Row;\n","import { Icon, ActionButton } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nconst State: FC<any> = (props) =>\n\tprops.onClick ? <ActionButton ghost mini {...props} /> : <Icon size={16} name={props.icon} {...props} />;\n\nexport default State;\n","import { Box } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nconst Subtitle: FC<any> = (props) => <Box color='hint' fontScale='p2' withTruncatedText {...props} />;\n\nexport default Subtitle;\n","import { Box } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nconst Title: FC<any> = (props) => <Box color='default' mi='x4' fontScale='h4' withTruncatedText {...props} />;\n\nexport default Title;\n","import { ButtonGroup } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nconst ToolBox: FC<any> = (props) => <ButtonGroup mi='x4' medium {...props} />;\n\nexport default ToolBox;\n","import { ActionButton } from '@rocket.chat/fuselage';\nimport React, { FC } from 'react';\n\nconst ToolBoxAction: FC<any> = ({ id, icon, color, title, action, className, index, ...props }) => (\n\t<ActionButton\n\t\tclassName={className}\n\t\tonClick={action}\n\t\ttitle={title}\n\t\tdata-toolbox={index}\n\t\tkey={id}\n\t\ticon={icon}\n\t\tposition='relative'\n\t\tghost\n\t\ttiny\n\t\toverflow='visible'\n\t\tcolor={!!color && color}\n\t\t{...props}\n\t/>\n);\n\nexport default ToolBoxAction;\n","import { css } from '@rocket.chat/css-in-js';\nimport { Box, Badge } from '@rocket.chat/fuselage';\nimport React, { ComponentProps, FC } from 'react';\n\nconst ToolBoxActionBadge: FC<ComponentProps<typeof Badge>> = (props) => (\n\t<Box\n\t\tposition='absolute'\n\t\tclassName={css`\n\t\t\ttop: 0;\n\t\t\tright: 0;\n\t\t\ttransform: translate(30%, -30%);\n\t\t`}\n\t>\n\t\t<Badge {...props} />\n\t</Box>\n);\n\nexport default ToolBoxActionBadge;\n","import Avatar from './Avatar';\nimport Button from './Button';\nimport Content from './Content';\nimport Header from './Header';\nimport HeaderDivider from './HeaderDivider';\nimport HeaderIcon from './HeaderIcon';\nimport HeaderLink from './HeaderLink';\nimport HeaderTag from './HeaderTag';\nimport HeaderTagIcon from './HeaderTagIcon';\nimport HeaderTagSkeleton from './HeaderTagSkeleton';\nimport Row from './Row';\nimport State from './State';\nimport Subtitle from './Subtitle';\nimport Title from './Title';\nimport ToolBox from './ToolBox';\nimport ToolBoxAction from './ToolBoxAction';\nimport ToolBoxActionBadge from './ToolBoxActionBadge';\n\nexport default Object.assign(Header, {\n\tButton,\n\tState,\n\tAvatar,\n\tContent: Object.assign(Content, {\n\t\tRow,\n\t}),\n\tTitle,\n\tSubtitle,\n\tToolBox,\n\tToolBoxAction: Object.assign(ToolBoxAction, {\n\t\tBadge: ToolBoxActionBadge,\n\t}),\n\tDivider: HeaderDivider,\n\tIcon: HeaderIcon,\n\tLink: HeaderLink,\n\tTag: Object.assign(HeaderTag, {\n\t\tIcon: HeaderTagIcon,\n\t\tSkeleton: HeaderTagSkeleton,\n\t}),\n\tBadge: ToolBoxActionBadge,\n});\n","import { Box, TextInput, Icon } from '@rocket.chat/fuselage';\nimport { useAutoFocus } from '@rocket.chat/fuselage-hooks';\nimport React, { ReactElement, useState, ChangeEvent } from 'react';\n\nimport { useEndpoint } from '../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../contexts/TranslationContext';\nimport GenericModal from '../GenericModal';\nimport { Method, OnConfirm } from './TwoFactorModal';\n\ntype TwoFactorEmailModalProps = {\n\tonConfirm: OnConfirm;\n\tonClose: () => void;\n\temailOrUsername: string;\n};\n\nconst TwoFactorEmailModal = ({ onConfirm, onClose, emailOrUsername }: TwoFactorEmailModalProps): ReactElement => {\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst t = useTranslation();\n\tconst [code, setCode] = useState<string>('');\n\tconst ref = useAutoFocus();\n\n\tconst sendEmailCode = useEndpoint('POST', 'users.2fa.sendEmailCode');\n\n\tconst onClickResendCode = async (): Promise<void> => {\n\t\ttry {\n\t\t\tawait sendEmailCode({ emailOrUsername });\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Email_sent') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('error-email-send-failed', { message: error }),\n\t\t\t});\n\t\t}\n\t};\n\n\tconst onConfirmEmailCode = (): void => {\n\t\tonConfirm(code, Method.EMAIL);\n\t};\n\n\tconst onChange = ({ currentTarget }: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetCode(currentTarget.value);\n\t};\n\n\treturn (\n\t\t<GenericModal\n\t\t\tonConfirm={onConfirmEmailCode}\n\t\t\tonCancel={onClose}\n\t\t\tconfirmText={t('Verify')}\n\t\t\ttitle={t('Two-factor_authentication_email')}\n\t\t\tonClose={onClose}\n\t\t\tvariant='warning'\n\t\t\ticon={<Icon size='x20' name='info' color='default' />}\n\t\t\tconfirmDisabled={!code}\n\t\t>\n\t\t\t<Box mbe='x16'>{t('Verify_your_email_for_the_code_we_sent')}</Box>\n\t\t\t<Box mbe='x4' display='flex' justifyContent='stretch'>\n\t\t\t\t<TextInput ref={ref} value={code} onChange={onChange} placeholder={t('Enter_authentication_code')} />\n\t\t\t</Box>\n\t\t\t<Box display='flex' justifyContent='end' is='a' onClick={onClickResendCode}>\n\t\t\t\t{t('Cloud_resend_email')}\n\t\t\t</Box>\n\t\t</GenericModal>\n\t);\n};\n\nexport default TwoFactorEmailModal;\n","import React, { ReactElement } from 'react';\n\nimport TwoFactorEmail from './TwoFactorEmailModal';\nimport TwoFactorPassword from './TwoFactorPasswordModal';\nimport TwoFactorTotp from './TwoFactorTotpModal';\n\nexport enum Method {\n\tTOTP = 'totp',\n\tEMAIL = 'email',\n\tPASSWORD = 'password',\n}\n\nexport type OnConfirm = (code: string, method: Method) => void;\n\ntype TwoFactorModalProps = {\n\tonConfirm: OnConfirm;\n\tonClose: () => void;\n} & (\n\t| {\n\t\t\tmethod: 'totp' | 'password';\n\t  }\n\t| {\n\t\t\tmethod: 'email';\n\t\t\temailOrUsername: string;\n\t  }\n);\n\nconst TwoFactorModal = ({ onConfirm, onClose, ...props }: TwoFactorModalProps): ReactElement => {\n\tif (props.method === Method.TOTP) {\n\t\treturn <TwoFactorTotp onConfirm={onConfirm} onClose={onClose} />;\n\t}\n\n\tif (props.method === Method.EMAIL) {\n\t\tconst { emailOrUsername } = props;\n\n\t\treturn <TwoFactorEmail onConfirm={onConfirm} onClose={onClose} emailOrUsername={emailOrUsername} />;\n\t}\n\n\tif (props.method === Method.PASSWORD) {\n\t\treturn <TwoFactorPassword onConfirm={onConfirm} onClose={onClose} />;\n\t}\n\n\tthrow new Error('Invalid Two Factor method');\n};\n\nexport default TwoFactorModal;\n","import { Box, PasswordInput, Icon } from '@rocket.chat/fuselage';\nimport { useAutoFocus } from '@rocket.chat/fuselage-hooks';\nimport React, { ReactElement, useState, ChangeEvent, Ref } from 'react';\n\nimport { useTranslation } from '../../contexts/TranslationContext';\nimport GenericModal from '../GenericModal';\nimport { Method, OnConfirm } from './TwoFactorModal';\n\ntype TwoFactorPasswordModalProps = {\n\tonConfirm: OnConfirm;\n\tonClose: () => void;\n};\n\nconst TwoFactorPasswordModal = ({ onConfirm, onClose }: TwoFactorPasswordModalProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst [code, setCode] = useState<string>('');\n\tconst ref = useAutoFocus();\n\n\tconst onConfirmTotpCode = (): void => {\n\t\tonConfirm(code, Method.PASSWORD);\n\t};\n\n\tconst onChange = ({ currentTarget }: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetCode(currentTarget.value);\n\t};\n\n\treturn (\n\t\t<GenericModal\n\t\t\tonConfirm={onConfirmTotpCode}\n\t\t\tonCancel={onClose}\n\t\t\tconfirmText={t('Verify')}\n\t\t\ttitle={t('Please_enter_your_password')}\n\t\t\tonClose={onClose}\n\t\t\tvariant='warning'\n\t\t\ticon={<Icon size='x20' name='info' color='default' />}\n\t\t\tconfirmDisabled={!code}\n\t\t>\n\t\t\t<Box mbe='x16'>{t('For_your_security_you_must_enter_your_current_password_to_continue')}</Box>\n\t\t\t<Box mbe='x16' display='flex' justifyContent='stretch'>\n\t\t\t\t<PasswordInput ref={ref as Ref<HTMLInputElement>} value={code} onChange={onChange} placeholder={t('Password')}></PasswordInput>\n\t\t\t</Box>\n\t\t</GenericModal>\n\t);\n};\n\nexport default TwoFactorPasswordModal;\n","import { Box, TextInput, Icon } from '@rocket.chat/fuselage';\nimport { useAutoFocus } from '@rocket.chat/fuselage-hooks';\nimport React, { ReactElement, useState, ChangeEvent } from 'react';\n\nimport { useTranslation } from '../../contexts/TranslationContext';\nimport GenericModal from '../GenericModal';\nimport { Method, OnConfirm } from './TwoFactorModal';\n\ntype TwoFactorTotpModalProps = {\n\tonConfirm: OnConfirm;\n\tonClose: () => void;\n};\n\nconst TwoFactorTotpModal = ({ onConfirm, onClose }: TwoFactorTotpModalProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst [code, setCode] = useState<string>('');\n\tconst ref = useAutoFocus();\n\n\tconst onConfirmTotpCode = (): void => {\n\t\tonConfirm(code, Method.TOTP);\n\t};\n\n\tconst onChange = ({ currentTarget }: ChangeEvent<HTMLInputElement>): void => {\n\t\tsetCode(currentTarget.value);\n\t};\n\n\treturn (\n\t\t<GenericModal\n\t\t\tonConfirm={onConfirmTotpCode}\n\t\t\tonCancel={onClose}\n\t\t\tconfirmText={t('Verify')}\n\t\t\ttitle={t('Two Factor Authentication')}\n\t\t\tonClose={onClose}\n\t\t\tvariant='warning'\n\t\t\ticon={<Icon size='x20' name='info' color='default' />}\n\t\t\tconfirmDisabled={!code}\n\t\t>\n\t\t\t<Box mbe='x16'>{t('Open_your_authentication_app_and_enter_the_code')}</Box>\n\t\t\t<Box mbe='x16' display='flex' justifyContent='stretch'>\n\t\t\t\t<TextInput ref={ref} value={code} onChange={onChange} placeholder={t('Enter_authentication_code')}></TextInput>\n\t\t\t</Box>\n\t\t</GenericModal>\n\t);\n};\n\nexport default TwoFactorTotpModal;\n","export { default } from './TwoFactorModal';\n","import { AutoComplete, Box, Option, Chip } from '@rocket.chat/fuselage';\nimport { useMutableCallback, useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport React, { memo, useMemo, useState } from 'react';\n\nimport { useEndpointData } from '../../hooks/useEndpointData';\nimport UserAvatar from '../avatar/UserAvatar';\n\nconst query = (term = '') => ({ selector: JSON.stringify({ term }) });\n\nconst UserAutoCompleteMultiple = (props) => {\n\tconst [filter, setFilter] = useState('');\n\tconst debouncedFilter = useDebouncedValue(filter, 1000);\n\tconst { value: data } = useEndpointData(\n\t\t'users.autocomplete',\n\t\tuseMemo(() => query(debouncedFilter), [debouncedFilter]),\n\t);\n\tconst options = useMemo(() => (data && data.items.map((user) => ({ value: user.username, label: user.name }))) || [], [data]);\n\tconst onClickRemove = useMutableCallback((e) => {\n\t\te.stopPropagation();\n\t\te.preventDefault();\n\t\tprops.onChange(e.currentTarget.value, 'remove');\n\t});\n\n\treturn (\n\t\t<AutoComplete\n\t\t\t{...props}\n\t\t\tfilter={filter}\n\t\t\tsetFilter={setFilter}\n\t\t\trenderSelected={({ value: selected }) =>\n\t\t\t\tselected?.map((value) => (\n\t\t\t\t\t<Chip key={value} {...props} height='x20' value={value} onClick={onClickRemove} mie='x4'>\n\t\t\t\t\t\t<UserAvatar size='x20' username={value} />\n\t\t\t\t\t\t<Box is='span' margin='none' mis='x4'>\n\t\t\t\t\t\t\t{value}\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Chip>\n\t\t\t\t))\n\t\t\t}\n\t\t\trenderItem={({ value, label, ...props }) => (\n\t\t\t\t<Option key={value} {...props}>\n\t\t\t\t\t<Option.Avatar>\n\t\t\t\t\t\t<UserAvatar username={value} size='x20' />\n\t\t\t\t\t</Option.Avatar>\n\t\t\t\t\t<Option.Content>\n\t\t\t\t\t\t{label} <Option.Description>({value})</Option.Description>\n\t\t\t\t\t</Option.Content>\n\t\t\t\t</Option>\n\t\t\t)}\n\t\t\toptions={options}\n\t\t/>\n\t);\n};\n\nexport default memo(UserAutoCompleteMultiple);\n","export { default } from './UserAutoCompleteMultiple';\n","import React from 'react';\n\nimport { renderEmoji } from '../lib/utils/renderEmoji';\n\nfunction Emoji({ emojiHandle, className = undefined }) {\n\tconst markup = { __html: `${renderEmoji(emojiHandle)}` };\n\treturn <span className={className} dangerouslySetInnerHTML={markup} />;\n}\n\nexport default Emoji;\n","import { Box, Button, ButtonGroup, Icon, Modal } from '@rocket.chat/fuselage';\nimport React, { FC, ComponentProps, ReactElement, ReactNode } from 'react';\n\nimport { useTranslation } from '../contexts/TranslationContext';\nimport { withDoNotAskAgain, RequiredModalProps } from './withDoNotAskAgain';\n\ntype VariantType = 'danger' | 'warning' | 'info' | 'success';\n\ntype GenericModalProps = RequiredModalProps & {\n\tvariant?: VariantType;\n\tchildren?: ReactNode;\n\tcancelText?: string;\n\tconfirmText?: string;\n\ttitle?: string | ReactElement;\n\ticon?: ComponentProps<typeof Icon>['name'] | ReactElement | null;\n\tconfirmDisabled?: boolean;\n\tonCancel?: () => void;\n\tonClose: () => void;\n\tonConfirm: () => void;\n};\n\nconst iconMap: Record<string, ComponentProps<typeof Icon>['name']> = {\n\tdanger: 'modal-warning',\n\twarning: 'modal-warning',\n\tinfo: 'info',\n\tsuccess: 'check',\n};\n\nconst getButtonProps = (variant: VariantType): ComponentProps<typeof Button> => {\n\tswitch (variant) {\n\t\tcase 'danger':\n\t\t\treturn { primary: true, danger: true };\n\t\tcase 'warning':\n\t\t\treturn { primary: true };\n\t\tdefault:\n\t\t\treturn {};\n\t}\n};\n\nconst renderIcon = (icon: GenericModalProps['icon'], variant: VariantType): ReactNode => {\n\tif (icon === null) {\n\t\treturn null;\n\t}\n\n\tif (icon === undefined) {\n\t\treturn <Icon color={variant} name={iconMap[variant]} size={24} />;\n\t}\n\n\tif (typeof icon === 'string') {\n\t\treturn <Icon color={variant} name={icon} size={24} />;\n\t}\n\n\treturn icon;\n};\n\nconst GenericModal: FC<GenericModalProps> = ({\n\tvariant = 'info',\n\tchildren,\n\tcancelText,\n\tconfirmText,\n\ttitle,\n\ticon,\n\tonCancel,\n\tonClose = onCancel,\n\tonConfirm,\n\tdontAskAgain,\n\tconfirmDisabled,\n\t...props\n}) => {\n\tconst t = useTranslation();\n\n\treturn (\n\t\t<Modal {...props}>\n\t\t\t<Modal.Header>\n\t\t\t\t{renderIcon(icon, variant)}\n\t\t\t\t<Modal.Title>{title ?? t('Are_you_sure')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={onClose} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content fontScale='p2'>{children}</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<Box display='flex' flexDirection='row' justifyContent='space-between' alignItems='center'>\n\t\t\t\t\t{dontAskAgain}\n\t\t\t\t\t<ButtonGroup align='end' flexGrow={1} maxWidth='full'>\n\t\t\t\t\t\t{onCancel && (\n\t\t\t\t\t\t\t<Button ghost onClick={onCancel}>\n\t\t\t\t\t\t\t\t{cancelText ?? t('Cancel')}\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t)}\n\t\t\t\t\t\t<Button {...getButtonProps(variant)} onClick={onConfirm} disabled={confirmDisabled}>\n\t\t\t\t\t\t\t{confirmText ?? t('Ok')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Box>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport const GenericModalDoNotAskAgain = withDoNotAskAgain<GenericModalProps>(GenericModal);\n\nexport default GenericModal;\n","import { Box } from '@rocket.chat/fuselage';\nimport React, { ReactElement } from 'react';\n\nimport { useTranslation } from '../contexts/TranslationContext';\nimport GenericModal from './GenericModal';\n\ntype UrlChangeModalProps = {\n\tonConfirm: () => void;\n\tsiteUrl: string;\n\tcurrentUrl: string;\n\tonClose: () => void;\n};\n\nconst UrlChangeModal = ({ onConfirm, siteUrl, currentUrl, onClose }: UrlChangeModalProps): ReactElement => {\n\tconst t = useTranslation();\n\treturn (\n\t\t<GenericModal variant='warning' title={t('Warning')} onConfirm={onConfirm} onClose={onClose} onCancel={onClose} confirmText={t('Yes')}>\n\t\t\t<Box\n\t\t\t\tis='p'\n\t\t\t\tmbe='x16'\n\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t__html: t('The_setting_s_is_configured_to_s_and_you_are_accessing_from_s', t('Site_Url'), siteUrl, currentUrl),\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<p dangerouslySetInnerHTML={{ __html: t('Do_you_want_to_change_to_s_question', currentUrl) }} />\n\t\t</GenericModal>\n\t);\n};\n\nexport default UrlChangeModal;\n","import { Box, CheckBox } from '@rocket.chat/fuselage';\nimport React, { useState, FC, ReactElement, ComponentType } from 'react';\n\nimport { useMethod } from '../contexts/ServerContext';\nimport { useTranslation } from '../contexts/TranslationContext';\nimport { useUserPreference } from '../contexts/UserContext';\nimport { DontAskAgainList } from '../hooks/useDontAskAgain';\n\ntype DoNotAskAgainProps = {\n\tonConfirm: (...args: any) => any;\n\tdontAskAgain: {\n\t\taction: string;\n\t\tlabel: string;\n\t};\n};\n\nexport type RequiredModalProps = {\n\tonConfirm: (...args: any) => any;\n\tdontAskAgain?: ReactElement;\n};\n\nfunction withDoNotAskAgain<T extends RequiredModalProps>(\n\tComponent: ComponentType<any>,\n): FC<DoNotAskAgainProps & Omit<T, keyof RequiredModalProps>> {\n\tconst WrappedComponent: FC<DoNotAskAgainProps & Omit<T, keyof RequiredModalProps>> = function ({ onConfirm, dontAskAgain, ...props }) {\n\t\tconst t = useTranslation();\n\t\tconst dontAskAgainList = useUserPreference<DontAskAgainList>('dontAskAgainList');\n\t\tconst { action, label } = dontAskAgain;\n\n\t\tconst saveFn = useMethod('saveUserPreferences');\n\t\tconst [state, setState] = useState<boolean>(false);\n\n\t\tconst handleConfirm = async (): Promise<void> => {\n\t\t\ttry {\n\t\t\t\tif (state) {\n\t\t\t\t\tawait saveFn({ dontAskAgainList: [...(dontAskAgainList || []), { action, label }] });\n\t\t\t\t}\n\t\t\t\tawait onConfirm();\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(e);\n\t\t\t}\n\t\t};\n\n\t\tconst onChange = (): void => {\n\t\t\tsetState(!state);\n\t\t};\n\n\t\treturn (\n\t\t\t<Component\n\t\t\t\t{...props}\n\t\t\t\tdontAskAgain={\n\t\t\t\t\t<Box display='flex' flexDirection='row'>\n\t\t\t\t\t\t<CheckBox checked={state} onChange={onChange} mie='x4' name='dont_ask_again' />\n\t\t\t\t\t\t<label htmlFor='dont_ask_again'>{t('Dont_ask_me_again')}</label>\n\t\t\t\t\t</Box>\n\t\t\t\t}\n\t\t\t\tonConfirm={handleConfirm}\n\t\t\t/>\n\t\t);\n\t};\n\n\tWrappedComponent.displayName = `withDoNotAskAgain(${Component.displayName ?? Component.name ?? 'Component'})`;\n\n\treturn WrappedComponent;\n}\n\nexport { withDoNotAskAgain };\n","import { t } from '../../../app/utils/client';\nimport { dispatchToastMessage } from '../toast';\nimport { process2faReturn } from './process2faReturn';\nimport { isTotpInvalidError, isTotpRequiredError } from './utils';\n\ntype LoginCallback = {\n\t(error: unknown): void;\n\t(error: unknown, result: unknown): void;\n};\n\ntype LoginMethod<A extends unknown[]> = (...args: [...args: A, cb: LoginCallback]) => void;\n\ntype LoginMethodWithTotp<A extends unknown[]> = (...args: [...args: A, code: string, cb: LoginCallback]) => void;\n\nexport const overrideLoginMethod = <A extends unknown[]>(\n\tloginMethod: LoginMethod<A>,\n\tloginArgs: A,\n\tcallback: LoginCallback,\n\tloginMethodTOTP: LoginMethodWithTotp<A>,\n\temailOrUsername: string,\n): void => {\n\tloginMethod.call(null, ...loginArgs, (error: unknown, result?: unknown) => {\n\t\tif (!isTotpRequiredError(error)) {\n\t\t\tcallback(error);\n\t\t\treturn;\n\t\t}\n\n\t\tprocess2faReturn({\n\t\t\terror,\n\t\t\tresult,\n\t\t\temailOrUsername,\n\t\t\toriginalCallback: callback,\n\t\t\tonCode: (code: string) => {\n\t\t\t\tloginMethodTOTP?.call(null, ...loginArgs, code, (error: unknown) => {\n\t\t\t\t\tif (isTotpInvalidError(error)) {\n\t\t\t\t\t\tdispatchToastMessage({ type: 'error', message: t('Invalid_two_factor_code') });\n\t\t\t\t\t\tcallback(null);\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tcallback(error);\n\t\t\t\t});\n\t\t\t},\n\t\t});\n\t});\n};\n","import { Meteor } from 'meteor/meteor';\nimport { SHA256 } from 'meteor/sha';\n\nimport TwoFactorModal from '../../components/TwoFactorModal';\nimport { imperativeModal } from '../imperativeModal';\nimport { isTotpRequiredError } from './utils';\n\nconst twoFactorMethods = ['totp', 'email', 'password'] as const;\n\ntype TwoFactorMethod = typeof twoFactorMethods[number];\n\nconst isTwoFactorMethod = (method: string): method is TwoFactorMethod => twoFactorMethods.includes(method as TwoFactorMethod);\n\nconst hasRequiredTwoFactorMethod = (error: Meteor.Error): error is Meteor.Error & { details: { method: TwoFactorMethod } } => {\n\tconst details = error.details as unknown;\n\n\treturn (\n\t\ttypeof details === 'object' &&\n\t\tdetails !== null &&\n\t\ttypeof (details as { method: unknown }).method === 'string' &&\n\t\tisTwoFactorMethod((details as { method: string }).method)\n\t);\n};\n\nfunction assertModalProps(props: {\n\tmethod: TwoFactorMethod;\n\temailOrUsername?: string;\n}): asserts props is { method: 'totp' } | { method: 'password' } | { method: 'email'; emailOrUsername: string } {\n\tif (props.method === 'email' && typeof props.emailOrUsername !== 'string') {\n\t\tthrow new Error('Invalid Two Factor method');\n\t}\n}\n\nexport function process2faReturn({\n\terror,\n\tresult,\n\toriginalCallback,\n\tonCode,\n\temailOrUsername,\n}: {\n\terror: unknown;\n\tresult: unknown;\n\toriginalCallback: {\n\t\t(error: unknown): void;\n\t\t(error: unknown, result: unknown): void;\n\t};\n\tonCode: (code: string, method: string) => void;\n\temailOrUsername: string | null | undefined;\n}): void {\n\tif (!isTotpRequiredError(error) || !hasRequiredTwoFactorMethod(error)) {\n\t\toriginalCallback(error, result);\n\t\treturn;\n\t}\n\n\tconst props = {\n\t\tmethod: error.details.method,\n\t\temailOrUsername: emailOrUsername ?? Meteor.user()?.username,\n\t};\n\n\tassertModalProps(props);\n\n\timperativeModal.open({\n\t\tcomponent: TwoFactorModal,\n\t\tprops: {\n\t\t\t...props,\n\t\t\tonConfirm: (code: string, method: string): void => {\n\t\t\t\timperativeModal.close();\n\t\t\t\tonCode(method === 'password' ? SHA256(code) : code, method);\n\t\t\t},\n\t\t\tonClose: (): void => {\n\t\t\t\timperativeModal.close();\n\t\t\t\toriginalCallback(new Meteor.Error('totp-canceled'));\n\t\t\t},\n\t\t},\n\t});\n}\n","import { Accounts } from 'meteor/accounts-base';\nimport { Meteor } from 'meteor/meteor';\n\nexport const isTotpRequiredError = (\n\terror: unknown,\n): error is Meteor.Error & ({ error: 'totp-required' } | { errorType: 'totp-required' }) =>\n\ttypeof error === 'object' &&\n\t((error as { error?: unknown } | undefined)?.error === 'totp-required' ||\n\t\t(error as { errorType?: unknown } | undefined)?.errorType === 'totp-required');\n\nexport const isTotpInvalidError = (error: unknown): error is Meteor.Error & ({ error: 'totp-invalid' } | { errorType: 'totp-invalid' }) =>\n\t(error as { error?: unknown } | undefined)?.error === 'totp-invalid' ||\n\t(error as { errorType?: unknown } | undefined)?.errorType === 'totp-invalid';\n\nexport const isLoginCancelledError = (error: unknown): error is Meteor.Error =>\n\terror instanceof Meteor.Error && error.error === Accounts.LoginCancelledError.numericError;\n\nexport const reportError = <T>(error: T, callback?: (error?: T) => void): void => {\n\tif (callback) {\n\t\tcallback(error);\n\t\treturn;\n\t}\n\n\tthrow error;\n};\n\nexport const convertError = <T>(error: T): Accounts.LoginCancelledError | T => {\n\tif (isLoginCancelledError(error)) {\n\t\treturn new Accounts.LoginCancelledError(error.reason);\n\t}\n\n\treturn error;\n};\n","export enum AsyncStatePhase {\n\tLOADING = 'loading',\n\tRESOLVED = 'resolved',\n\tREJECTED = 'rejected',\n\tUPDATING = 'updating',\n}\n","import { AsyncState } from './AsyncState';\nimport { AsyncStatePhase } from './AsyncStatePhase';\n\nexport const loading = <T>(): AsyncState<T> => ({\n\tphase: AsyncStatePhase.LOADING,\n\tvalue: undefined,\n\terror: undefined,\n});\n\nexport const updating = <T>(value: T): AsyncState<T> => ({\n\tphase: AsyncStatePhase.UPDATING,\n\tvalue,\n\terror: undefined,\n});\n\nexport const resolved = <T>(value: T): AsyncState<T> => ({\n\tphase: AsyncStatePhase.RESOLVED,\n\tvalue,\n\terror: undefined,\n});\n\nexport const rejected = <T>(error: Error): AsyncState<T> => ({\n\tphase: AsyncStatePhase.REJECTED,\n\tvalue: undefined,\n\terror,\n});\n\nexport const reload = <T>(prevState: AsyncState<T>): AsyncState<T> => {\n\tswitch (prevState.phase) {\n\t\tcase AsyncStatePhase.LOADING:\n\t\t\treturn prevState;\n\n\t\tcase AsyncStatePhase.UPDATING:\n\t\tcase AsyncStatePhase.RESOLVED:\n\t\t\treturn {\n\t\t\t\tphase: AsyncStatePhase.LOADING,\n\t\t\t\tvalue: prevState.value,\n\t\t\t\terror: undefined,\n\t\t\t};\n\n\t\tcase AsyncStatePhase.REJECTED:\n\t\t\treturn {\n\t\t\t\tphase: AsyncStatePhase.LOADING,\n\t\t\t\tvalue: undefined,\n\t\t\t\terror: prevState.error,\n\t\t\t};\n\t}\n};\n\nexport const update = <T>(prevState: AsyncState<T>): AsyncState<T> => {\n\tswitch (prevState.phase) {\n\t\tcase AsyncStatePhase.LOADING:\n\t\tcase AsyncStatePhase.UPDATING:\n\t\t\treturn prevState;\n\n\t\tcase AsyncStatePhase.RESOLVED:\n\t\t\treturn {\n\t\t\t\tphase: AsyncStatePhase.UPDATING,\n\t\t\t\tvalue: prevState.value,\n\t\t\t\terror: undefined,\n\t\t\t};\n\n\t\tcase AsyncStatePhase.REJECTED:\n\t\t\treturn {\n\t\t\t\tphase: AsyncStatePhase.LOADING,\n\t\t\t\tvalue: undefined,\n\t\t\t\terror: prevState.error,\n\t\t\t};\n\t}\n};\n\nexport const resolve = <T>(prevState: AsyncState<T>, value: T): AsyncState<T> => {\n\tswitch (prevState.phase) {\n\t\tcase AsyncStatePhase.LOADING:\n\t\tcase AsyncStatePhase.UPDATING:\n\t\t\treturn {\n\t\t\t\tphase: AsyncStatePhase.RESOLVED,\n\t\t\t\tvalue,\n\t\t\t\terror: undefined,\n\t\t\t};\n\n\t\tcase AsyncStatePhase.RESOLVED:\n\t\tcase AsyncStatePhase.REJECTED:\n\t\t\treturn prevState;\n\t}\n};\n\nexport const reject = <T>(prevState: AsyncState<T>, error: Error): AsyncState<T> => {\n\tswitch (prevState.phase) {\n\t\tcase AsyncStatePhase.LOADING:\n\t\tcase AsyncStatePhase.UPDATING:\n\t\t\treturn {\n\t\t\t\tphase: AsyncStatePhase.REJECTED,\n\t\t\t\tvalue: undefined,\n\t\t\t\terror,\n\t\t\t};\n\n\t\tcase AsyncStatePhase.RESOLVED:\n\t\tcase AsyncStatePhase.REJECTED:\n\t\t\treturn prevState;\n\t}\n};\n\nexport const value = <T>(state: AsyncState<T>): T | undefined => state.value;\n\nexport const error = <T>(state: AsyncState<T>): Error | undefined => state.error;\n","export { AsyncState } from './AsyncState';\nexport { AsyncStatePhase } from './AsyncStatePhase';\nexport * as asyncState from './functions';\n","import { Emitter } from '@rocket.chat/emitter';\nimport { Random } from 'meteor/random';\nimport type { ReactNode } from 'react';\nimport type { Subscription, Unsubscribe } from 'use-subscription';\n\ntype BlazePortalEntry = {\n\tkey: string;\n\tnode: ReactNode;\n};\n\nclass BlazePortalsSubscriptions extends Emitter<{ update: void }> implements Subscription<BlazePortalEntry[]> {\n\tprivate map = new Map<Blaze.TemplateInstance, BlazePortalEntry>();\n\n\tgetCurrentValue = (): BlazePortalEntry[] => Array.from(this.map.values());\n\n\tsubscribe = (callback: () => void): Unsubscribe => this.on('update', callback);\n\n\tregister = (template: Blaze.TemplateInstance, node: ReactNode): void => {\n\t\tconst entry = this.map.get(template);\n\n\t\tif (!entry) {\n\t\t\tthis.map.set(template, { key: Random.id(), node });\n\t\t\tthis.emit('update');\n\t\t\treturn;\n\t\t}\n\n\t\tif (entry.node === node) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.map.set(template, { ...entry, node });\n\t\tthis.emit('update');\n\t};\n\n\tunregister = (template: Blaze.TemplateInstance): void => {\n\t\tif (this.map.delete(template)) {\n\t\t\tthis.emit('update');\n\t\t}\n\t};\n}\n\nexport const blazePortals = new BlazePortalsSubscriptions();\n","import type { ComponentType, PropsWithoutRef } from 'react';\n\nimport { createLazyPortal } from './createLazyPortal';\nimport { registerPortal } from './portalsSubscription';\n\nexport const createEphemeralPortal = <Props extends {} = {}>(\n\tfactory: () => Promise<{ default: ComponentType<Props> }>,\n\tpropsFn: () => PropsWithoutRef<Props>,\n\tcontainer: Element,\n): (() => void) => {\n\tconst portal = createLazyPortal(factory, propsFn, container);\n\treturn registerPortal(container, portal);\n};\n","import { Tracker } from 'meteor/tracker';\nimport { ComponentType, ReactElement, PropsWithoutRef, createElement, lazy, useEffect, useState, Suspense, FC } from 'react';\n\nexport const createLazyElement = <Props extends {} = {}>(\n\tfactory: () => Promise<{ default: ComponentType<Props> }>,\n\tgetProps?: () => PropsWithoutRef<Props> | undefined,\n): ReactElement => {\n\tconst LazyComponent = lazy(factory);\n\n\tif (!getProps) {\n\t\treturn createElement(LazyComponent);\n\t}\n\n\tconst WrappedComponent: FC = () => {\n\t\tconst [props, setProps] = useState(() => Tracker.nonreactive(getProps));\n\n\t\tuseEffect(() => {\n\t\t\tconst computation = Tracker.autorun(() => {\n\t\t\t\tsetProps(getProps());\n\t\t\t});\n\n\t\t\treturn (): void => {\n\t\t\t\tcomputation.stop();\n\t\t\t};\n\t\t}, []);\n\n\t\treturn createElement(Suspense, { fallback: null }, createElement(LazyComponent, props));\n\t};\n\n\treturn createElement(WrappedComponent);\n};\n","import { ComponentType, PropsWithoutRef, ReactPortal } from 'react';\nimport { createPortal } from 'react-dom';\n\nimport { createLazyElement } from './createLazyElement';\n\nexport const createLazyPortal = <Props extends {} = {}>(\n\tfactory: () => Promise<{ default: ComponentType<Props> }>,\n\tgetProps: () => PropsWithoutRef<Props> | undefined,\n\tcontainer: Element,\n): ReactPortal => createPortal(createLazyElement(factory, getProps), container);\n","import { Blaze } from 'meteor/blaze';\nimport { HTML } from 'meteor/htmljs';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Template } from 'meteor/templating';\nimport type { ComponentType, PropsWithoutRef } from 'react';\n\nimport { blazePortals } from './blazePortals';\nimport { createLazyPortal } from './createLazyPortal';\n\nexport const createTemplateForComponent = <Props extends {} = {}>(\n\tname: string,\n\tfactory: () => Promise<{ default: ComponentType<Props> }>,\n\toptions:\n\t\t| {\n\t\t\t\trenderContainerView?: () => unknown;\n\t\t  }\n\t\t| {\n\t\t\t\tattachment: 'at-parent';\n\t\t\t\tprops?: () => PropsWithoutRef<Props>;\n\t\t  } = {\n\t\trenderContainerView: (): unknown => HTML.DIV(),\n\t},\n): string => {\n\tif (Template[name]) {\n\t\treturn name;\n\t}\n\n\tconst renderFunction =\n\t\t('renderContainerView' in options && options.renderContainerView) ||\n\t\t('attachment' in options && options.attachment === 'at-parent' && ((): unknown => HTML.Comment('anchor'))) ||\n\t\t((): unknown => HTML.DIV());\n\n\tconst template = new Blaze.Template(name, renderFunction);\n\ttemplate.onRendered(function (this: Blaze.TemplateInstance) {\n\t\tconst props = new ReactiveVar(this.data as PropsWithoutRef<Props>);\n\t\tthis.autorun(() => {\n\t\t\tprops.set({\n\t\t\t\t...('props' in options && typeof options.props === 'function' && options.props()),\n\t\t\t\t...Template.currentData(),\n\t\t\t});\n\t\t});\n\n\t\tconst container =\n\t\t\t('renderContainerView' in options && (this.firstNode as Element)) ||\n\t\t\t('attachment' in options && options.attachment === 'at-parent' && (this.firstNode as Node).parentElement) ||\n\t\t\tnull;\n\n\t\tif (!container) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst portal = createLazyPortal(factory, () => props.get(), container);\n\n\t\tblazePortals.register(this, portal);\n\t});\n\n\ttemplate.onDestroyed(function (this: Blaze.TemplateInstance) {\n\t\tblazePortals.unregister(this);\n\t});\n\n\tTemplate[name] = template;\n\n\treturn name;\n};\n","import { Emitter } from '@rocket.chat/emitter';\nimport { Random } from 'meteor/random';\nimport type { ReactElement } from 'react';\nimport type { Subscription, Unsubscribe } from 'use-subscription';\n\ntype SubscribedPortal = {\n\tportal: ReactElement;\n\tkey: string;\n};\n\ntype PortalsSubscription = Subscription<SubscribedPortal[]> & {\n\thas: (key: unknown) => boolean;\n\tset: (key: unknown, portal: ReactElement) => void;\n\tdelete: (key: unknown) => void;\n};\n\nconst createPortalsSubscription = (): PortalsSubscription => {\n\tconst portalsMap = new Map<unknown, SubscribedPortal>();\n\tconst emitter = new Emitter<{ update: void }>();\n\n\treturn {\n\t\tgetCurrentValue: (): SubscribedPortal[] => Array.from(portalsMap.values()),\n\t\tsubscribe: (callback): Unsubscribe => emitter.on('update', callback),\n\t\tdelete: (key): void => {\n\t\t\tportalsMap.delete(key);\n\t\t\temitter.emit('update');\n\t\t},\n\t\tset: (key, portal): void => {\n\t\t\tportalsMap.set(key, { portal, key: Random.id() });\n\t\t\temitter.emit('update');\n\t\t},\n\t\thas: (key): boolean => portalsMap.has(key),\n\t};\n};\n\nexport const portalsSubscription = createPortalsSubscription();\n\nexport const unregisterPortal = (key: unknown): void => {\n\tportalsSubscription.delete(key);\n};\n\nexport const registerPortal = (key: unknown, portal: ReactElement): (() => void) => {\n\tportalsSubscription.set(key, portal);\n\treturn (): void => {\n\t\tunregisterPortal(key);\n\t};\n};\n","import { CachedCollection } from '../../../app/ui-cached-collection/client';\n\nexport class PublicSettingsCachedCollection extends CachedCollection {\n\tconstructor() {\n\t\tsuper({\n\t\t\tname: 'public-settings',\n\t\t\teventType: 'onAll',\n\t\t\tuserRelated: false,\n\t\t\tlistenChangesForLoggedUsersOnly: true,\n\t\t});\n\t}\n\n\tstatic instance: PublicSettingsCachedCollection;\n\n\tstatic get(): PublicSettingsCachedCollection {\n\t\tif (!PublicSettingsCachedCollection.instance) {\n\t\t\tPublicSettingsCachedCollection.instance = new PublicSettingsCachedCollection();\n\t\t}\n\n\t\treturn PublicSettingsCachedCollection.instance;\n\t}\n}\n","import { TAPi18n, TAPi18next } from 'meteor/rocketchat:tap-i18n';\n\nimport { settings } from '../../../app/settings/client';\n\nexport const applyCustomTranslations = (): void => {\n\tconst customTranslations: string | undefined = settings.get('Custom_Translations');\n\n\tif (!customTranslations) {\n\t\treturn;\n\t}\n\n\ttry {\n\t\tconst parsedCustomTranslations: Record<string, unknown> = JSON.parse(customTranslations);\n\n\t\tfor (const [lang, translations] of Object.entries(parsedCustomTranslations)) {\n\t\t\tTAPi18next.addResourceBundle(lang, 'project', translations);\n\t\t}\n\t\tTAPi18n._language_changed_tracker.changed();\n\t} catch (e) {\n\t\tconsole.error('Invalid setting Custom_Translations', e);\n\t}\n};\n","import { Meteor } from 'meteor/meteor';\n\nimport { ServerMethodName, ServerMethodParameters, ServerMethodReturn } from '../../contexts/ServerContext';\n\nexport const call = <M extends ServerMethodName>(method: M, ...params: ServerMethodParameters<M>): Promise<ServerMethodReturn<M>> =>\n\tnew Promise((resolve, reject) => {\n\t\tMeteor.call(method, ...params, (error: Error, result: ServerMethodReturn<M>) => {\n\t\t\tif (error) {\n\t\t\t\treject(error);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tresolve(result);\n\t\t});\n\t});\n","import { ServerMethodName, ServerMethodParameters, ServerMethodReturn } from '../../contexts/ServerContext';\nimport { call } from './call';\nimport { handleError } from './handleError';\n\nexport const callWithErrorHandling = async <M extends ServerMethodName>(\n\tmethod: M,\n\t...params: ServerMethodParameters<M>\n): Promise<ServerMethodReturn<M>> => {\n\ttry {\n\t\treturn await call(method, ...params);\n\t} catch (error) {\n\t\thandleError(error);\n\t\tthrow error;\n\t}\n};\n","import { Meteor } from 'meteor/meteor';\nimport moment, { MomentInput } from 'moment';\n\nimport { hasPermission } from '../../../app/authorization/client';\nimport { settings } from '../../../app/settings/client';\nimport { IRoom } from '../../../definition/IRoom';\nimport { IUser } from '../../../definition/IUser';\n\nexport const canDeleteMessage = ({ rid, ts, uid }: { rid: IRoom['_id']; ts: MomentInput; uid: IUser['_id'] }): boolean => {\n\tconst userId = Meteor.userId();\n\n\tconst forceDelete = hasPermission('force-delete-message', rid);\n\tif (forceDelete) {\n\t\treturn true;\n\t}\n\n\tconst isDeleteAllowed: boolean | undefined = settings.get('Message_AllowDeleting');\n\tif (!isDeleteAllowed) {\n\t\treturn false;\n\t}\n\n\tconst allowed = hasPermission('delete-message', rid);\n\n\tconst deleteOwn = allowed || (uid === userId && hasPermission('delete-own-message'));\n\tif (!allowed && !deleteOwn) {\n\t\treturn false;\n\t}\n\n\tconst blockDeleteInMinutes: number | undefined = settings.get('Message_AllowDeleting_BlockDeleteInMinutes');\n\tif (blockDeleteInMinutes && blockDeleteInMinutes !== 0) {\n\t\tif (!ts) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst msgTs = moment(ts);\n\t\tconst now = moment();\n\n\t\treturn now.diff(msgTs, 'minutes') < blockDeleteInMinutes;\n\t}\n\n\treturn true;\n};\n","export const createAnchor = (id: string, target = document.body): HTMLDivElement => {\n\tconst div = document.createElement('div');\n\tdiv.id = id;\n\ttarget.appendChild(div);\n\treturn div;\n};\n","export const delegate = ({\n\tparent = document,\n\teventName,\n\telementSelector,\n\tlistener,\n}: {\n\tparent?: Document | Element;\n\teventName: string;\n\telementSelector: string;\n\tlistener: (this: Element, e: Event, currentTarget: Element) => void;\n}): (() => void) => {\n\tconst effectiveListener = function (this: Document | Element, e: Event): void {\n\t\t// loop parent nodes from the target to the delegation node\n\t\tfor (let { target } = e; target && target instanceof Element && target !== this; target = target.parentNode) {\n\t\t\tif (target.matches(elementSelector)) {\n\t\t\t\tlistener.call(target, e, target);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t};\n\n\tparent.addEventListener(eventName, effectiveListener, false);\n\n\treturn (): void => {\n\t\tparent.removeEventListener(eventName, effectiveListener, false);\n\t};\n};\n\nexport const triggerClick = (target: EventTarget | null): void => {\n\tconst clickEvent = document.createEvent('HTMLEvents');\n\tclickEvent.initEvent('click', true, false);\n\ttarget?.dispatchEvent(clickEvent);\n};\n","export const filterLanguage = (language: string): string => {\n\t// Fix browsers having all-lowercase language settings eg. pt-br, en-us\n\tconst regex = /([a-z]{2,3})-([a-z]{2,4})/;\n\tconst matches = regex.exec(language);\n\tif (matches) {\n\t\treturn `${matches[1]}-${matches[2].toUpperCase()}`;\n\t}\n\n\treturn language;\n};\n","import { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../../app/settings/client';\n\nexport const fireGlobalEvent = (eventName: string, detail?: unknown): void => {\n\twindow.dispatchEvent(new CustomEvent(eventName, { detail }));\n\n\tTracker.autorun((computation) => {\n\t\tconst enabled = settings.get('Iframe_Integration_send_enable');\n\t\tif (enabled === undefined) {\n\t\t\treturn;\n\t\t}\n\n\t\tcomputation.stop();\n\n\t\tif (enabled) {\n\t\t\tparent.postMessage(\n\t\t\t\t{\n\t\t\t\t\teventName,\n\t\t\t\t\tdata: detail,\n\t\t\t\t},\n\t\t\t\tsettings.get('Iframe_Integration_send_target_origin'),\n\t\t\t);\n\t\t}\n\t});\n};\n","export const formatBytes = (bytes: number, decimals?: number): string => {\n\tif (bytes === 0) {\n\t\treturn '0 Bytes';\n\t}\n\n\tconst k = 1024;\n\tconst dm = decimals || 0;\n\n\tconst sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB'];\n\n\tconst i = Math.floor(Math.log(bytes) / Math.log(k));\n\n\treturn `${parseFloat((bytes / Math.pow(k, i)).toFixed(dm))} ${sizes[i]}`;\n};\n","import mem from 'mem';\nimport { Tracker } from 'meteor/tracker';\nimport moment, { MomentInput } from 'moment';\n\nimport { settings } from '../../../app/settings/client';\n\nexport const formatDate = mem(\n\t(time: MomentInput) => {\n\t\tconst messageDateFormat = Tracker.nonreactive(() => settings.get('Message_DateFormat'));\n\t\treturn moment(time).format(messageDateFormat);\n\t},\n\t{ maxAge: 5000 },\n);\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport moment, { MomentInput } from 'moment';\n\nimport { settings } from '../../../app/settings/client';\nimport { getUserPreference } from '../../../app/utils/lib/getUserPreference';\n\nexport const formatDateAndTime = (time: MomentInput): string => {\n\tconst clockMode = Tracker.nonreactive(() => getUserPreference(Meteor.userId(), 'clockMode', false));\n\tconst messageTimeAndDateFormat = Tracker.nonreactive(() => settings.get('Message_TimeAndDateFormat'));\n\n\tswitch (clockMode) {\n\t\tcase 1:\n\t\t\treturn moment(time).format('MMMM D, Y h:mm A');\n\t\tcase 2:\n\t\t\treturn moment(time).format('MMMM D, Y H:mm');\n\t\tdefault:\n\t\t\treturn moment(time).format(messageTimeAndDateFormat);\n\t}\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport moment, { MomentInput } from 'moment';\n\nimport { settings } from '../../../app/settings/client';\nimport { getUserPreference } from '../../../app/utils/lib/getUserPreference';\n\nconst dayFormat = ['h:mm A', 'H:mm'];\n\nexport const formatTime = (time: MomentInput): string => {\n\tconst clockMode = Tracker.nonreactive(() => getUserPreference(Meteor.userId(), 'clockMode', false));\n\tconst messageTimeFormat = Tracker.nonreactive(() => settings.get('Message_TimeFormat'));\n\tconst sameDay = dayFormat[clockMode - 1] || messageTimeFormat;\n\n\tswitch (clockMode) {\n\t\tcase 1:\n\t\tcase 2:\n\t\t\treturn moment(time).format(sameDay);\n\t\tdefault:\n\t\t\treturn moment(time).format(messageTimeFormat);\n\t}\n};\n","import { getUserAvatarURL } from '../../../app/utils/lib/getUserAvatarURL';\nimport { IUser } from '../../../definition/IUser';\n\nexport const getAvatarAsPng = (username: IUser['username'], cb: (dataURL: string) => void): (() => void) => {\n\tconst image = new Image();\n\n\tconst onLoad = (): void => {\n\t\tconst canvas = document.createElement('canvas');\n\t\tcanvas.width = image.width;\n\t\tcanvas.height = image.height;\n\t\tconst context = canvas.getContext('2d');\n\n\t\tif (!context) {\n\t\t\tthrow new Error('failed to get canvas context');\n\t\t}\n\n\t\tcontext.drawImage(image, 0, 0);\n\t\ttry {\n\t\t\treturn cb(canvas.toDataURL('image/png'));\n\t\t} catch (e) {\n\t\t\treturn cb('');\n\t\t}\n\t};\n\n\tconst onError = (): void => cb('');\n\n\timage.onload = onLoad;\n\timage.onerror = onError;\n\timage.src = getUserAvatarURL(username);\n\n\treturn onError;\n};\n","import { Meteor } from 'meteor/meteor';\n\nexport const getConfig = (key: string): string | null => {\n\tconst searchParams = new URLSearchParams(window.location.search);\n\treturn searchParams.get(key) || Meteor._localStorage.getItem(`rc-config-${key}`);\n};\n","import { Meteor } from 'meteor/meteor';\n\nimport { Rooms } from '../../../app/models/client';\nimport { IRoom } from '../../../definition/IRoom';\nimport { IUser } from '../../../definition/IUser';\n\nexport const getUidDirectMessage = (rid: IRoom['_id'], userId: IUser['_id'] | null = Meteor.userId()): string | undefined => {\n\tconst room: IRoom | null = Rooms.findOne({ _id: rid }, { fields: { uids: 1 } });\n\n\tif (!room || !room.uids || room.uids.length > 2) {\n\t\treturn undefined;\n\t}\n\n\treturn room.uids.filter((uid) => uid !== userId)[0];\n};\n","import { memoize } from '@rocket.chat/memo';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\n\nimport { ChatSubscription } from '../../../app/models/client';\nimport { roomTypes } from '../../../app/utils/client';\nimport { IRoom } from '../../../definition/IRoom';\nimport { callWithErrorHandling } from './callWithErrorHandling';\n\nconst getRoomById = memoize((rid: IRoom['_id']) => callWithErrorHandling('getRoomById', rid));\n\nexport const goToRoomById = async (rid: IRoom['_id']): Promise<void> => {\n\tif (!rid) {\n\t\treturn;\n\t}\n\n\tconst subscription = ChatSubscription.findOne({ rid });\n\n\tif (subscription) {\n\t\troomTypes.openRouteLink(subscription.t, subscription, FlowRouter.current().queryParams);\n\t\treturn;\n\t}\n\n\tconst room = await getRoomById(rid);\n\troomTypes.openRouteLink(room.t, { rid: room._id, ...room }, FlowRouter.current().queryParams);\n};\n","import { escapeHTML } from '@rocket.chat/string-helpers';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport toastr from 'toastr';\n\nconst hasXHR = (error: {}): error is { xhr: JQuery.jqXHR } => 'xhr' in error;\n\nconst hasDetails = (error: {}): error is { details: Record<string, string> } =>\n\t'details' in error && typeof (error as { details: unknown }).details === 'object';\n\nconst hasToastrShowed = (error: {}): error is { toastrShowed: true } =>\n\t'toastrShowed' in error && (error as { toastrShowed: unknown }).toastrShowed === true;\n\nconst hasError = (error: {}): error is { error: string } => 'error' in error && typeof (error as { error: unknown }).error === 'string';\n\nconst hasMessage = (error: {}): error is { message: string } =>\n\t'error' in error && typeof (error as { message: unknown }).message === 'string';\n\nconst hasErrorTitle = (details: Record<string, string>): details is Record<string, string> & { errorTitle: string } =>\n\t'errorTitle' in details && typeof (details as Record<string, string> & { errorTitle: unknown }) === 'string';\n\nexport const handleError = (error: {}, useToastr = true): JQuery<HTMLElement> | string | undefined => {\n\tif (hasXHR(error) && error.xhr.responseJSON) {\n\t\treturn handleError(error.xhr.responseJSON, useToastr);\n\t}\n\n\tconst message = (hasError(error) && error.error) || (hasMessage(error) && error.message) || undefined;\n\tconst details = hasDetails(error) ? error.details : {};\n\n\tif (useToastr) {\n\t\tif (hasToastrShowed(error)) {\n\t\t\treturn;\n\t\t}\n\n\t\treturn toastr.error(\n\t\t\tTAPi18n.__(message, Object.fromEntries(Object.entries(details).map(([key, value]) => [key, escapeHTML(TAPi18n.__(value))]))),\n\t\t\thasErrorTitle(details) ? TAPi18n.__(details.errorTitle) : undefined,\n\t\t);\n\t}\n\n\treturn escapeHTML(TAPi18n.__(message, Object.fromEntries(Object.entries(details).map(([key, value]) => [key, TAPi18n.__(value)]))));\n};\n","export const isIE11: boolean = ((): boolean => {\n\tconst { userAgent } = window.navigator;\n\tconst msieIdx = userAgent.indexOf('MSIE');\n\n\tif (msieIdx > 0) {\n\t\treturn parseInt(userAgent.substring(msieIdx + 5, userAgent.indexOf('.', msieIdx))) === 11;\n\t}\n\n\t// If MSIE detection fails, check the Trident engine version\n\tif (navigator.userAgent.match(/Trident\\/7\\./)) {\n\t\treturn true;\n\t}\n\n\treturn false;\n})();\n","export const isIOsDevice = !!navigator.platform.match(/iPhone|iPod|iPad/);\n","import { FlowRouter } from 'meteor/kadira:flow-router';\n\nexport const isLayoutEmbedded = (): boolean => FlowRouter.getQueryParam('layout') === 'embedded';\n","// http://stackoverflow.com/a/14824756\n\nconst ltrChars = 'A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u2C00-\\uFB1C\\uFDFE-\\uFE6F\\uFEFD-\\uFFFF';\nconst rtlChars = '\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC';\nconst rtlRegExp = new RegExp(`^[^${ltrChars}]*[${rtlChars}]`);\n\nexport const isRTL = (text: string): boolean => rtlRegExp.test(text);\n","export const keyCodes = {\n\tTAB: 9,\n\tCARRIAGE_RETURN: 10,\n\tNEW_LINE: 13,\n\tSHIFT: 16,\n\tCONTROL: 17,\n\tALT: 18,\n\tPAUSE_BREAK: 19,\n\tCAPS_LOCK: 20,\n\tESCAPE: 27,\n\tPAGE_DOWN: 33,\n\tPAGE_UP: 34,\n\tEND: 35,\n\tHOME: 36,\n\tARROW_LEFT: 37,\n\tARROW_UP: 38,\n\tARROW_RIGHT: 39,\n\tARROW_DOWN: 40,\n\tINSERT: 45,\n\tSUPER: 91,\n\tMENU: 93,\n\tF1: 112,\n\tF2: 113,\n\tF3: 114,\n\tF4: 115,\n\tF5: 116,\n\tF6: 117,\n\tF7: 118,\n\tF8: 119,\n\tF9: 120,\n\tF10: 121,\n\tF11: 122,\n\tF12: 123,\n\tNUM_LOCK: 144,\n\tSCROLL_LOCK: 145,\n} as const;\n","import { Meteor } from 'meteor/meteor';\n\nimport { Rooms, Users } from '../../../app/models/client';\nimport { MessageAction } from '../../../app/ui-utils/client/lib/MessageAction';\nimport { IMessage } from '../../../definition/IMessage';\nimport { IRoom } from '../../../definition/IRoom';\n\nexport const prependReplies = async (msg: string, replies: IMessage[] = [], mention = false): Promise<string> => {\n\tconst { username } = Users.findOne({ _id: Meteor.userId() }, { fields: { username: 1 } });\n\n\tconst chunks = await Promise.all(\n\t\treplies.map(async ({ _id, rid, u }) => {\n\t\t\tconst permalink = await MessageAction.getPermaLink(_id);\n\t\t\tconst room: IRoom | null = Rooms.findOne(rid, { fields: { t: 1 } });\n\n\t\t\tlet chunk = `[ ](${permalink})`;\n\t\t\tif (room?.t === 'd' && u.username !== username && mention) {\n\t\t\t\tchunk += ` @${u.username}`;\n\t\t\t}\n\n\t\t\treturn chunk;\n\t\t}),\n\t);\n\n\tchunks.push(msg);\n\treturn chunks.join(' ');\n};\n","import { emoji } from '../../../app/emoji/lib/rocketchat';\n\nconst emojiList = emoji.list as Record<string, { emojiPackage: string }>;\nconst emojiPackages = emoji.packages as Record<string, { render(emojiName: string): string }>;\n\nexport const renderEmoji = (emojiName: string): string | undefined => {\n\tconst emojiPackageName = emojiList[emojiName]?.emojiPackage;\n\tif (emojiPackageName) {\n\t\tconst emojiPackage = emojiPackages[emojiPackageName];\n\t\treturn emojiPackage.render(emojiName);\n\t}\n\n\treturn undefined;\n};\n","import { escapeHTML } from '@rocket.chat/string-helpers';\n\nimport { IMessage } from '../../../definition/IMessage';\nimport { callbacks } from '../../../lib/callbacks';\n\nexport const renderMessageBody = <T extends Partial<IMessage> & { tokens?: { token: string; text: string }[]; html?: string }>(\n\tmessage: T,\n): string => {\n\tmessage.html = message.msg?.trim() ? escapeHTML(message.msg.trim()) : '';\n\n\tconst { tokens, html } = callbacks.run('renderMessage', message);\n\n\treturn (Array.isArray(tokens) ? tokens.reverse() : []).reduce((html, { token, text }) => html.replace(token, () => text), html ?? '');\n};\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport moment, { Moment, MomentInput } from 'moment';\n\nimport { settings } from '../../../app/settings/client';\nimport { t } from '../../../app/utils/client';\nimport { getUserPreference } from '../../../app/utils/lib/getUserPreference';\n\nconst dayFormat = ['h:mm A', 'H:mm'];\n\nexport const timeAgo = (date: MomentInput): string => {\n\tconst clockMode = Tracker.nonreactive(() => getUserPreference(Meteor.userId(), 'clockMode', false));\n\tconst messageTimeFormat = Tracker.nonreactive(() => settings.get('Message_TimeFormat'));\n\tconst sameDay = dayFormat[clockMode - 1] || messageTimeFormat;\n\n\treturn moment(date).calendar(null, {\n\t\tlastDay: `[${t('yesterday')}]`,\n\t\tsameDay,\n\t\tlastWeek: 'dddd',\n\t\tsameElse(this: Moment, now) {\n\t\t\tconst diff = Math.ceil(this.diff(now, 'years', true));\n\t\t\treturn diff < 0 ? 'MMM D YYYY' : 'MMM D';\n\t\t},\n\t});\n};\n","import { Tracker } from 'meteor/tracker';\n\nexport const waitUntilFind = <T>(fn: () => T | undefined): Promise<T> =>\n\tnew Promise((resolve) => {\n\t\tTracker.autorun((c) => {\n\t\t\tconst result = fn();\n\n\t\t\tif (result === undefined) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tc.stop();\n\t\t\tresolve(result);\n\t\t});\n\t});\n","import { Emitter } from '@rocket.chat/emitter';\nimport { useEffect, useMemo } from 'react';\nimport { useSubscription, Subscription, Unsubscribe } from 'use-subscription';\n\nimport { IRoom } from '../../definition/IRoom';\nimport { useUserId, useUserRoom, useUserSubscription } from '../contexts/UserContext';\nimport { useAsyncState } from '../hooks/useAsyncState';\nimport { AsyncState } from './asyncState';\nimport { getConfig } from './utils/getConfig';\n\nconst debug = !!(getConfig('debug') || getConfig('debug-RoomStore'));\n\nexport class RoomStore extends Emitter<{\n\tchanged: undefined;\n}> {\n\tlastTime?: Date;\n\n\tscroll?: number;\n\n\tlm?: Date;\n\n\tatBottom = true;\n\n\tconstructor(readonly rid: string) {\n\t\tsuper();\n\n\t\tdebug && this.on('changed', () => console.log(`RoomStore ${this.rid} changed`, this));\n\t}\n\n\tupdate({ scroll, lastTime, atBottom }: { scroll?: number; lastTime?: Date; atBottom?: boolean }): void {\n\t\tif (scroll !== undefined) {\n\t\t\tthis.scroll = scroll;\n\t\t}\n\t\tif (lastTime !== undefined) {\n\t\t\tthis.lastTime = lastTime;\n\t\t}\n\n\t\tif (atBottom !== undefined) {\n\t\t\tthis.atBottom = atBottom;\n\t\t}\n\t\tif (scroll || lastTime) {\n\t\t\tthis.emit('changed');\n\t\t}\n\t}\n}\n\nconst debugRoomManager = !!(getConfig('debug') || getConfig('debug-RoomManager'));\nexport const RoomManager = new (class RoomManager extends Emitter<{\n\tchanged: IRoom['_id'] | undefined;\n\topened: IRoom['_id'];\n\tclosed: IRoom['_id'];\n\tback: IRoom['_id'];\n\tremoved: IRoom['_id'];\n}> {\n\tprivate rid: IRoom['_id'] | undefined;\n\n\tprivate lastRid: IRoom['_id'] | undefined;\n\n\tprivate rooms: Map<IRoom['_id'], RoomStore> = new Map();\n\n\tconstructor() {\n\t\tsuper();\n\t\tdebugRoomManager &&\n\t\t\tthis.on('opened', (rid) => {\n\t\t\t\tconsole.log('room opened ->', rid);\n\t\t\t});\n\n\t\tdebugRoomManager &&\n\t\t\tthis.on('back', (rid) => {\n\t\t\t\tconsole.log('room moved to back ->', rid);\n\t\t\t});\n\n\t\tdebugRoomManager &&\n\t\t\tthis.on('closed', (rid) => {\n\t\t\t\tconsole.log('room close ->', rid);\n\t\t\t});\n\t}\n\n\tget lastOpened(): IRoom['_id'] | undefined {\n\t\treturn this.lastRid;\n\t}\n\n\tget opened(): IRoom['_id'] | undefined {\n\t\treturn this.rid;\n\t}\n\n\tvisitedRooms(): IRoom['_id'][] {\n\t\treturn [...this.rooms.keys()];\n\t}\n\n\tback(rid: IRoom['_id']): void {\n\t\tif (rid === this.rid) {\n\t\t\tthis.lastRid = rid;\n\t\t\tthis.rid = undefined;\n\t\t\tthis.emit('back', rid);\n\t\t\tthis.emit('changed', this.rid);\n\t\t}\n\t}\n\n\tclose(rid: IRoom['_id']): void {\n\t\tif (!this.rooms.has(rid)) {\n\t\t\tthis.rooms.delete(rid);\n\t\t\tthis.emit('closed', rid);\n\t\t}\n\t\tthis.emit('changed', this.rid);\n\t}\n\n\topen(rid: IRoom['_id']): void {\n\t\tif (rid === this.rid) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis.back(rid);\n\t\tif (!this.rooms.has(rid)) {\n\t\t\tthis.rooms.set(rid, new RoomStore(rid));\n\t\t}\n\t\tthis.rid = rid;\n\t\tthis.emit('opened', this.rid);\n\t\tthis.emit('changed', this.rid);\n\t}\n\n\tgetStore(rid: IRoom['_id']): RoomStore | undefined {\n\t\treturn this.rooms.get(rid);\n\t}\n})();\n\nconst subscribeVisitedRooms: Subscription<IRoom['_id'][]> = {\n\tgetCurrentValue: () => RoomManager.visitedRooms(),\n\tsubscribe(callback) {\n\t\treturn RoomManager.on('changed', callback);\n\t},\n};\n\nconst subscribeOpenedRoom: Subscription<IRoom['_id'] | undefined> = {\n\tgetCurrentValue: () => RoomManager.opened,\n\tsubscribe(callback) {\n\t\treturn RoomManager.on('opened', callback);\n\t},\n};\n\nconst fields = {};\n\nexport const useHandleRoom = <T extends IRoom>(rid: IRoom['_id']): AsyncState<T> => {\n\tconst { resolve, update, ...state } = useAsyncState<T>();\n\tconst uid = useUserId();\n\tconst subscription = useUserSubscription(rid, fields) as unknown as T;\n\tconst _room = useUserRoom(rid, fields) as unknown as T;\n\n\tconst room = uid ? subscription || _room : _room;\n\n\tuseEffect(() => {\n\t\tif (room) {\n\t\t\tupdate();\n\t\t\tresolve(room);\n\t\t}\n\t}, [resolve, update, room]);\n\n\treturn state;\n};\n\nexport const useVisitedRooms = (): IRoom['_id'][] => useSubscription(subscribeVisitedRooms);\n\nexport const useOpenedRoom = (): IRoom['_id'] | undefined => useSubscription(subscribeOpenedRoom);\n\nexport const useRoomStore = (rid: IRoom['_id']): RoomStore => {\n\tconst subscribeStore: Subscription<RoomStore | undefined> = useMemo(\n\t\t() => ({\n\t\t\tgetCurrentValue: (): RoomStore | undefined => RoomManager.getStore(rid),\n\t\t\tsubscribe(callback): Unsubscribe {\n\t\t\t\treturn RoomManager.on('changed', callback);\n\t\t\t},\n\t\t}),\n\t\t[rid],\n\t);\n\n\tconst store = useSubscription(subscribeStore);\n\n\tif (!store) {\n\t\tthrow new Error('Something wrong');\n\t}\n\treturn store;\n};\n","import { Emitter } from '@rocket.chat/emitter';\nimport { ComponentProps, createElement, lazy, ReactElement } from 'react';\nimport { Subscription, Unsubscribe } from 'use-subscription';\n\nconst MainLayout = lazy(() => import('../views/root/MainLayout'));\n\ntype AppLayoutDescriptor = ReactElement | null;\n\nclass AppLayoutSubscription extends Emitter<{ update: void }> implements Subscription<AppLayoutDescriptor> {\n\tprivate descriptor: AppLayoutDescriptor = null;\n\n\tgetCurrentValue = (): AppLayoutDescriptor => this.descriptor;\n\n\tsubscribe = (callback: () => void): Unsubscribe => this.on('update', callback);\n\n\tsetCurrentValue(descriptor: AppLayoutDescriptor): void {\n\t\tthis.descriptor = descriptor;\n\t\tthis.emit('update');\n\t}\n\n\trenderMainLayout(props: ComponentProps<typeof MainLayout> = {}): void {\n\t\tthis.setCurrentValue(createElement(MainLayout, props));\n\t}\n\n\trender(element: ReactElement): void {\n\t\tthis.setCurrentValue(element);\n\t}\n}\n\nexport const appLayout = new AppLayoutSubscription();\n","import { Emitter } from '@rocket.chat/emitter';\nimport { Icon } from '@rocket.chat/fuselage';\nimport { ComponentProps } from 'react';\nimport { Subscription } from 'use-subscription';\n\nimport { UiKitBannerPayload } from '../../definition/UIKit';\n\nexport type LegacyBannerPayload = {\n\tid: string;\n\tclosable?: boolean;\n\ttitle?: string;\n\ttext?: string;\n\thtml?: string;\n\ticon?: ComponentProps<typeof Icon>['name'];\n\tmodifiers?: ('large' | 'danger')[];\n\ttimer?: number;\n\taction?: () => void;\n\tonClose?: () => void;\n};\n\ntype BannerPayload = LegacyBannerPayload | UiKitBannerPayload;\n\nexport const isLegacyPayload = (payload: BannerPayload): payload is LegacyBannerPayload => !('blocks' in payload);\n\nconst queue: BannerPayload[] = [];\nconst emitter = new Emitter<{\n\t'update': undefined;\n\t'update-first': undefined;\n}>();\n\nexport const firstSubscription: Subscription<BannerPayload | null> = {\n\tgetCurrentValue: () => queue[0] ?? null,\n\tsubscribe: (callback) => emitter.on('update-first', callback),\n};\n\nexport const open = (payload: BannerPayload): void => {\n\tlet index = queue.findIndex((_payload) => {\n\t\tif (isLegacyPayload(_payload)) {\n\t\t\treturn _payload.id === (payload as LegacyBannerPayload).id;\n\t\t}\n\t\treturn (_payload as UiKitBannerPayload).viewId === (payload as UiKitBannerPayload).viewId;\n\t});\n\n\tif (index === -1) {\n\t\tindex = queue.length;\n\t}\n\n\tqueue[index] = payload;\n\n\temitter.emit('update');\n\n\tif (index === 0) {\n\t\temitter.emit('update-first');\n\t}\n};\n\nexport const closeById = (id: string): void => {\n\tconst index = queue.findIndex((banner) => {\n\t\tif (!isLegacyPayload(banner)) {\n\t\t\treturn banner.viewId === id;\n\t\t}\n\t\treturn banner.id === id;\n\t});\n\n\tif (index < 0) {\n\t\treturn;\n\t}\n\n\tqueue.splice(index, 1);\n\temitter.emit('update');\n\tindex === 0 && emitter.emit('update-first');\n};\n\nexport const close = (): void => {\n\tqueue.shift();\n\temitter.emit('update');\n\temitter.emit('update-first');\n};\n\nexport const clear = (): void => {\n\tqueue.splice(0, queue.length);\n\temitter.emit('update');\n\temitter.emit('update-first');\n};\n","export const baseURI: string = ((): string => {\n\tif (document.baseURI) {\n\t\treturn document.baseURI;\n\t}\n\n\t// Should be exactly one tag:\n\t//   https://developer.mozilla.org/en-US/docs/Web/HTML/Element/base\n\tconst base = document.getElementsByTagName('base');\n\n\t// Return location from BASE tag.\n\tif (base.length > 0) {\n\t\treturn base[0].href;\n\t}\n\n\t// Else use implementation of documentURI:\n\t//   http://www.w3.org/TR/DOM-Level-3-Core/core.html#Node3-baseURI\n\treturn document.URL;\n})();\n","import { FlowRouter, Group, RouteOptions } from 'meteor/kadira:flow-router';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { Tracker } from 'meteor/tracker';\nimport { ComponentType, createElement, lazy, ReactNode } from 'react';\n\nimport { appLayout } from './appLayout';\nimport { createTemplateForComponent } from './portals/createTemplateForComponent';\n\ntype RouteRegister = {\n\t(\n\t\tpath: string,\n\t\toptions: RouteOptions & {\n\t\t\tlazyRouteComponent: () => Promise<{ default: ComponentType }>;\n\t\t\tprops?: Record<string, unknown>;\n\t\t\tready?: boolean;\n\t\t},\n\t): [register: () => void, unregister: () => void];\n\t(path: string, options: RouteOptions): void;\n};\n\nconst registerLazyComponentRoute = (\n\trouteGroup: Group,\n\timportRouter: () => Promise<{\n\t\tdefault: ComponentType<{\n\t\t\trenderRoute?: () => ReactNode;\n\t\t}>;\n\t}>,\n\tpath: string,\n\t{\n\t\tlazyRouteComponent,\n\t\tprops,\n\t\tready = true,\n\t\t...rest\n\t}: RouteOptions & {\n\t\tlazyRouteComponent: () => Promise<{ default: ComponentType }>;\n\t\tprops?: Record<string, unknown>;\n\t\tready?: boolean;\n\t},\n): [register: () => void, unregister: () => void] => {\n\tconst enabled = new ReactiveVar(ready ? true : undefined);\n\tlet computation: Tracker.Computation | undefined;\n\n\tconst handleEnter = (_context: unknown, _redirect: (pathDef: string) => void, stop: () => void): void => {\n\t\tconst _enabled = Tracker.nonreactive(() => enabled.get());\n\t\tif (_enabled === false) {\n\t\t\tstop();\n\t\t\treturn;\n\t\t}\n\n\t\tcomputation = Tracker.autorun(() => {\n\t\t\tconst _enabled = enabled.get();\n\n\t\t\tif (_enabled === false) {\n\t\t\t\tFlowRouter.go('/');\n\t\t\t}\n\t\t});\n\t};\n\n\tconst handleExit = (): void => {\n\t\tcomputation?.stop();\n\t};\n\n\tconst RouteComponent = lazy(lazyRouteComponent);\n\tconst renderRoute = (): ReactNode => createElement(RouteComponent, props);\n\n\trouteGroup.route(path, {\n\t\t...rest,\n\t\ttriggersEnter: [handleEnter, ...(rest.triggersEnter ?? [])],\n\t\ttriggersExit: [handleExit, ...(rest.triggersExit ?? [])],\n\t\taction() {\n\t\t\tconst center = createTemplateForComponent(\n\t\t\t\tTracker.nonreactive(() => FlowRouter.getRouteName()),\n\t\t\t\timportRouter,\n\t\t\t\t{\n\t\t\t\t\tattachment: 'at-parent',\n\t\t\t\t\tprops: () => ({ renderRoute }),\n\t\t\t\t},\n\t\t\t);\n\t\t\tappLayout.renderMainLayout({ center });\n\t\t},\n\t});\n\n\treturn [(): void => enabled.set(true), (): void => enabled.set(false)];\n};\n\nexport const createRouteGroup = (\n\tname: string,\n\tprefix: string,\n\timportRouter: () => Promise<{\n\t\tdefault: ComponentType<{\n\t\t\trenderRoute?: () => ReactNode;\n\t\t}>;\n\t}>,\n): RouteRegister => {\n\tconst routeGroup = FlowRouter.group({\n\t\tname,\n\t\tprefix,\n\t});\n\n\tfunction registerRoute(\n\t\tpath: string,\n\t\toptions: RouteOptions & {\n\t\t\tlazyRouteComponent: () => Promise<{ default: ComponentType }>;\n\t\t\tprops?: Record<string, unknown>;\n\t\t\tready?: boolean;\n\t\t},\n\t): [register: () => void, unregister: () => void];\n\tfunction registerRoute(path: string, options: RouteOptions): void;\n\tfunction registerRoute(\n\t\tpath: string,\n\t\toptions:\n\t\t\t| RouteOptions\n\t\t\t| (RouteOptions & {\n\t\t\t\t\tlazyRouteComponent: () => Promise<{ default: ComponentType }>;\n\t\t\t\t\tprops?: Record<string, unknown>;\n\t\t\t\t\tready?: boolean;\n\t\t\t  }),\n\t): [register: () => void, unregister: () => void] | void {\n\t\tif ('lazyRouteComponent' in options) {\n\t\t\treturn registerLazyComponentRoute(routeGroup, importRouter, path, options);\n\t\t}\n\n\t\trouteGroup.route(path, options);\n\t}\n\n\tregisterRoute('/', {\n\t\tname: `${name}-index`,\n\t\taction() {\n\t\t\tconst center = createTemplateForComponent(`${name}-index`, importRouter, {\n\t\t\t\tattachment: 'at-parent',\n\t\t\t});\n\t\t\tappLayout.renderMainLayout({ center });\n\t\t},\n\t});\n\n\treturn registerRoute;\n};\n","import type { Subscription } from 'use-subscription';\n\ntype SidebarItem = {\n\ti18nLabel: string;\n\thref?: string;\n\ticon?: string;\n\tpermissionGranted?: boolean | (() => boolean);\n};\n\nexport const createSidebarItems = (\n\tinitialItems: SidebarItem[] = [],\n): {\n\tregisterSidebarItem: (item: SidebarItem) => void;\n\tunregisterSidebarItem: (i18nLabel: SidebarItem['i18nLabel']) => void;\n\titemsSubscription: Subscription<SidebarItem[]>;\n} => {\n\tconst items = initialItems;\n\tlet updateCb: () => void = () => undefined;\n\n\tconst itemsSubscription: Subscription<SidebarItem[]> = {\n\t\tsubscribe: (cb) => {\n\t\t\tupdateCb = cb;\n\t\t\treturn (): void => {\n\t\t\t\tupdateCb = (): void => undefined;\n\t\t\t};\n\t\t},\n\t\tgetCurrentValue: () => items,\n\t};\n\n\tconst registerSidebarItem = (item: SidebarItem): void => {\n\t\titems.push(item);\n\t\tupdateCb();\n\t};\n\n\tconst unregisterSidebarItem = (i18nLabel: SidebarItem['i18nLabel']): void => {\n\t\tconst index = items.findIndex((item) => item.i18nLabel === i18nLabel);\n\t\tdelete items[index];\n\t\tupdateCb();\n\t};\n\n\treturn {\n\t\tregisterSidebarItem,\n\t\tunregisterSidebarItem,\n\t\titemsSubscription,\n\t};\n};\n","import { IUser } from '../../definition/IUser';\n\nexport const getUserDisplayName = (name: IUser['name'], username: IUser['username'], useRealName: boolean): string | undefined =>\n\tuseRealName ? name || username : username;\n","import { Emitter } from '@rocket.chat/emitter';\nimport { ComponentType } from 'react';\n\ntype ReactModalDescriptor<TProps extends {}> = {\n\tcomponent: ComponentType<TProps>;\n\tprops?: TProps;\n};\n\ntype ModalDescriptor = ReactModalDescriptor<{}> | null;\n\nclass ImperativeModalEmmiter extends Emitter<{ update: ModalDescriptor }> {\n\tupdate(descriptor: ModalDescriptor): void {\n\t\tthis.emit('update', descriptor);\n\t}\n\n\topen = <TProps extends {}>(descriptor: ReactModalDescriptor<TProps> | null): void => {\n\t\t// There are some TS shenanigans causing errors if this is not asserted\n\t\t// Since this method is for internal use only, it's ok to use this here\n\t\t// This will not affect prop types inference when using the method.\n\t\tthis.update(descriptor as ModalDescriptor);\n\t};\n\n\tclose = (): void => {\n\t\tthis.update(null);\n\t};\n}\n\nexport const imperativeModal = new ImperativeModalEmmiter();\n","import { DDPCommon } from 'meteor/ddp-common';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { APIClient } from '../../app/utils/client';\n\nconst bypassMethods: string[] = ['setUserStatus', 'logout'];\n\nfunction shouldBypass({ method, params }: Meteor.IDDPMessage): boolean {\n\tif (method === 'login' && params[0]?.resume) {\n\t\treturn true;\n\t}\n\n\tif (method.startsWith('UserPresence:') || bypassMethods.includes(method)) {\n\t\treturn true;\n\t}\n\n\tif (method.startsWith('stream-')) {\n\t\treturn true;\n\t}\n\n\treturn false;\n}\n\nfunction wrapMeteorDDPCalls(): void {\n\tconst { _send } = Meteor.connection;\n\n\tMeteor.connection._send = function _DDPSendOverREST(message): void {\n\t\tif (message.msg !== 'method' || shouldBypass(message)) {\n\t\t\treturn _send.call(Meteor.connection, message);\n\t\t}\n\n\t\tconst endpoint = Tracker.nonreactive(() => (!Meteor.userId() ? 'method.callAnon' : 'method.call'));\n\n\t\tconst restParams = {\n\t\t\tmessage: DDPCommon.stringifyDDP({ ...message }),\n\t\t};\n\n\t\tconst processResult = (_message: any): void => {\n\t\t\tMeteor.connection._livedata_data({\n\t\t\t\tmsg: 'updated',\n\t\t\t\tmethods: [message.id],\n\t\t\t});\n\t\t\tMeteor.connection.onMessage(_message);\n\t\t};\n\n\t\tAPIClient.v1\n\t\t\t.post(`${endpoint}/${encodeURIComponent(message.method.replace(/\\//g, ':'))}`, restParams)\n\t\t\t.then(({ message: _message }) => {\n\t\t\t\tprocessResult(_message);\n\t\t\t\tif (message.method === 'login') {\n\t\t\t\t\tconst parsedMessage = DDPCommon.parseDDP(_message) as { result?: { token?: string } };\n\t\t\t\t\tif (parsedMessage.result?.token) {\n\t\t\t\t\t\tMeteor.loginWithToken(parsedMessage.result.token);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error(error);\n\t\t\t});\n\t};\n}\n\nwindow.USE_REST_FOR_DDP_CALLS && wrapMeteorDDPCalls();\n","import type { IMessage } from '../../definition/IMessage';\nimport { createAsyncTransformChain } from '../../lib/transforms';\n\nexport const onClientBeforeSendMessage = createAsyncTransformChain<IMessage>();\n","import type { IMessage } from '../../definition/IMessage';\nimport { createAsyncTransformChain } from '../../lib/transforms';\n\nexport const onClientMessageReceived = createAsyncTransformChain<IMessage>();\n","import { Emitter, EventHandlerOf } from '@rocket.chat/emitter';\nimport { Meteor } from 'meteor/meteor';\n\nimport { APIClient } from '../../app/utils/client';\nimport { IUser } from '../../definition/IUser';\nimport { UserStatus } from '../../definition/UserStatus';\n\nexport const STATUS_MAP = [UserStatus.OFFLINE, UserStatus.ONLINE, UserStatus.AWAY, UserStatus.BUSY];\n\ntype InternalEvents = {\n\tremove: IUser['_id'];\n\treset: undefined;\n\trestart: undefined;\n};\n\ntype ExternalEvents = {\n\t[key: string]: UserPresence | undefined;\n};\n\ntype Events = InternalEvents & ExternalEvents;\n\nconst emitter = new Emitter<Events>();\n\nconst store = new Map<string, UserPresence>();\n\nexport type UserPresence = Pick<IUser, '_id' | 'username' | 'name' | 'status' | 'utcOffset' | 'statusText' | 'avatarETag'>;\n\ntype UsersPresencePayload = {\n\tusers: UserPresence[];\n\tfull: boolean;\n};\n\nconst isUid = (eventType: keyof Events): eventType is UserPresence['_id'] =>\n\tBoolean(eventType) && typeof eventType === 'string' && !['reset', 'restart', 'remove'].includes(eventType);\n\nconst uids = new Set<UserPresence['_id']>();\n\nconst update: EventHandlerOf<ExternalEvents, string> = (update) => {\n\tif (update?._id) {\n\t\tstore.set(update._id, update);\n\t\tuids.delete(update._id);\n\t}\n};\n\nconst notify = (presence: UserPresence): void => {\n\tif (presence._id) {\n\t\tupdate(presence);\n\t\temitter.emit(presence._id, presence);\n\t}\n};\n\nconst getPresence = ((): ((uid: UserPresence['_id']) => void) => {\n\tlet timer: ReturnType<typeof setTimeout>;\n\n\tconst deletedUids = new Set<UserPresence['_id']>();\n\n\tconst fetch = (delay = 500): void => {\n\t\ttimer && clearTimeout(timer);\n\t\ttimer = setTimeout(async () => {\n\t\t\tconst currentUids = new Set(uids);\n\t\t\tuids.clear();\n\n\t\t\tconst ids = Array.from(currentUids);\n\t\t\tconst removed = Array.from(deletedUids);\n\n\t\t\tMeteor.subscribe('stream-user-presence', '', {\n\t\t\t\t...(ids.length > 0 && { added: Array.from(currentUids) }),\n\t\t\t\t...(removed.length && { removed: Array.from(deletedUids) }),\n\t\t\t});\n\n\t\t\tdeletedUids.clear();\n\n\t\t\tif (ids.length === 0) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\tconst params = {\n\t\t\t\t\tids: [...currentUids],\n\t\t\t\t};\n\n\t\t\t\tconst { users } = (await APIClient.v1.get('users.presence', params)) as UsersPresencePayload;\n\n\t\t\t\tusers.forEach((user) => {\n\t\t\t\t\tif (!store.has(user._id)) {\n\t\t\t\t\t\tnotify(user);\n\t\t\t\t\t}\n\t\t\t\t\tcurrentUids.delete(user._id);\n\t\t\t\t});\n\n\t\t\t\tcurrentUids.forEach((uid) => {\n\t\t\t\t\tnotify({ _id: uid, status: UserStatus.OFFLINE });\n\t\t\t\t});\n\n\t\t\t\tcurrentUids.clear();\n\t\t\t} catch {\n\t\t\t\tfetch(delay + delay);\n\t\t\t} finally {\n\t\t\t\tcurrentUids.forEach((item) => uids.add(item));\n\t\t\t}\n\t\t}, delay);\n\t};\n\n\tconst get = (uid: UserPresence['_id']): void => {\n\t\tuids.add(uid);\n\t\tfetch();\n\t};\n\tconst stop = (uid: UserPresence['_id']): void => {\n\t\tdeletedUids.add(uid);\n\t\tfetch();\n\t};\n\temitter.on('remove', (uid) => {\n\t\tif (emitter.has(uid)) {\n\t\t\treturn;\n\t\t}\n\n\t\tstore.delete(uid);\n\t\tstop(uid);\n\t});\n\n\temitter.on('reset', () => {\n\t\temitter\n\t\t\t.events()\n\t\t\t.filter(isUid)\n\t\t\t.forEach((uid) => {\n\t\t\t\temitter.emit(uid, undefined);\n\t\t\t});\n\t\temitter.once('restart', () => {\n\t\t\temitter.events().filter(isUid).forEach(get);\n\t\t});\n\t});\n\n\treturn get;\n})();\n\nconst listen = (uid: UserPresence['_id'], handler: EventHandlerOf<ExternalEvents, UserPresence['_id']> | (() => void)): void => {\n\tif (!uid) {\n\t\treturn;\n\t}\n\temitter.on(uid, handler);\n\n\tconst user = store.has(uid) && store.get(uid);\n\tif (user) {\n\t\treturn;\n\t}\n\n\tgetPresence(uid);\n};\n\nconst stop = (uid: UserPresence['_id'], handler: EventHandlerOf<ExternalEvents, UserPresence['_id']> | (() => void)): void => {\n\tsetTimeout(() => {\n\t\temitter.off(uid, handler);\n\t\temitter.emit('remove', uid);\n\t}, 5000);\n};\n\nconst reset = (): void => {\n\tstore.clear();\n\temitter.emit('reset');\n};\n\nconst restart = (): void => {\n\temitter.emit('restart');\n};\n\nconst get = async (uid: UserPresence['_id']): Promise<UserPresence | undefined> =>\n\tnew Promise((resolve) => {\n\t\tconst user = store.has(uid) && store.get(uid);\n\t\tif (user) {\n\t\t\treturn resolve(user);\n\t\t}\n\n\t\tconst callback: EventHandlerOf<ExternalEvents, UserPresence['_id']> = (args): void => {\n\t\t\tresolve(args);\n\t\t\tstop(uid, callback);\n\t\t};\n\t\tlisten(uid, callback);\n\t});\n\nexport const Presence = {\n\tlisten,\n\tstop,\n\treset,\n\trestart,\n\tnotify,\n\tstore,\n\tget,\n};\n","import { QueryClient } from 'react-query';\n\nexport const queryClient = new QueryClient();\n","import { Emitter } from '@rocket.chat/emitter';\n\nexport type ToastMessagePayload = {\n\ttype: 'success' | 'info' | 'warning' | 'error';\n\tmessage: string | Error;\n\ttitle?: string;\n\toptions?: object;\n};\n\nconst emitter = new Emitter<{\n\tnotify: ToastMessagePayload;\n}>();\n\nexport const dispatchToastMessage = (payload: ToastMessagePayload): void => {\n\t// TODO: buffer it if there is no subscriber\n\temitter.emit('notify', payload);\n};\n\nexport const subscribeToToastMessages = (callback: (payload: ToastMessagePayload) => void): (() => void) => emitter.on('notify', callback);\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\n\nimport { Users } from '../../app/models/client';\nimport { Notifications } from '../../app/notifications/client';\nimport { APIClient } from '../../app/utils/client';\nimport type { IUser, IUserDataEvent } from '../../definition/IUser';\nimport { Serialized } from '../../definition/Serialized';\n\nexport const isSyncReady = new ReactiveVar(false);\n\ntype RawUserData = Serialized<\n\tPick<\n\t\tIUser,\n\t\t| '_id'\n\t\t| 'type'\n\t\t| 'name'\n\t\t| 'username'\n\t\t| 'emails'\n\t\t| 'status'\n\t\t| 'statusDefault'\n\t\t| 'statusText'\n\t\t| 'statusConnection'\n\t\t| 'avatarOrigin'\n\t\t| 'utcOffset'\n\t\t| 'language'\n\t\t| 'settings'\n\t\t| 'roles'\n\t\t| 'active'\n\t\t| 'defaultRoom'\n\t\t| 'customFields'\n\t\t| 'statusLivechat'\n\t\t| 'oauth'\n\t\t| 'createdAt'\n\t\t| '_updatedAt'\n\t\t| 'avatarETag'\n\t>\n>;\n\nconst updateUser = (userData: IUser): void => {\n\tconst user: IUser = Users.findOne({ _id: userData._id });\n\n\tif (!user || !user._updatedAt || user._updatedAt.getTime() < userData._updatedAt.getTime()) {\n\t\tMeteor.users.upsert({ _id: userData._id }, userData);\n\t\treturn;\n\t}\n\n\t// delete data already on user's collection as those are newer\n\tObject.keys(user).forEach((key) => {\n\t\tdelete userData[key as keyof IUser];\n\t});\n\tMeteor.users.update({ _id: user._id }, { $set: userData });\n};\n\nlet cancel: undefined | (() => void);\nexport const synchronizeUserData = async (uid: Meteor.User['_id']): Promise<RawUserData | void> => {\n\tif (!uid) {\n\t\treturn;\n\t}\n\n\t// Remove data from any other user that we may have retained\n\tMeteor.users.remove({ _id: { $ne: uid } });\n\n\tcancel?.();\n\n\tcancel = await Notifications.onUser('userData', (data: IUserDataEvent) => {\n\t\tswitch (data.type) {\n\t\t\tcase 'inserted':\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/no-unused-vars\n\t\t\t\tconst { type, id, ...user } = data;\n\t\t\t\tMeteor.users.insert(user);\n\t\t\t\tbreak;\n\n\t\t\tcase 'updated':\n\t\t\t\tMeteor.users.upsert({ _id: uid }, { $set: data.diff, $unset: data.unset });\n\t\t\t\tbreak;\n\n\t\t\tcase 'removed':\n\t\t\t\tMeteor.users.remove({ _id: uid });\n\t\t\t\tbreak;\n\t\t}\n\t});\n\n\tconst userData: RawUserData = await APIClient.v1.get('me');\n\tif (userData) {\n\t\tupdateUser({\n\t\t\t...userData,\n\t\t\tcreatedAt: new Date(userData.createdAt),\n\t\t\t_updatedAt: new Date(userData._updatedAt),\n\t\t});\n\t}\n\tisSyncReady.set(true);\n\n\treturn userData;\n};\n\nexport const removeLocalUserData = (): number => Meteor.users.remove({});\n","import { createContext, useCallback, useContext, useMemo } from 'react';\n\nimport type { IServerInfo } from '../../../definition/IServerInfo';\nimport type { Serialized } from '../../../definition/Serialized';\nimport type { Method, PathFor, OperationParams, MatchPathPattern, OperationResult, PathPattern } from '../../../definition/rest';\nimport { ServerMethodFunction, ServerMethodName, ServerMethodParameters, ServerMethodReturn, ServerMethods } from './methods';\n\ntype ServerContextValue = {\n\tinfo?: IServerInfo;\n\tabsoluteUrl: (path: string) => string;\n\tcallMethod?: <MethodName extends ServerMethodName>(\n\t\tmethodName: MethodName,\n\t\t...args: ServerMethodParameters<MethodName>\n\t) => Promise<ServerMethodReturn<MethodName>>;\n\tcallEndpoint: <TMethod extends Method, TPath extends PathFor<TMethod>>(\n\t\tmethod: TMethod,\n\t\tpath: TPath,\n\t\tparams: Serialized<OperationParams<TMethod, MatchPathPattern<TPath>>>,\n\t) => Promise<Serialized<OperationResult<TMethod, MatchPathPattern<TPath>>>>;\n\tuploadToEndpoint: (endpoint: string, params: any, formData: any) => Promise<void>;\n\tgetStream: (streamName: string, options?: {}) => <T>(eventName: string, callback: (data: T) => void) => () => void;\n};\n\nexport const ServerContext = createContext<ServerContextValue>({\n\tinfo: undefined,\n\tabsoluteUrl: (path) => path,\n\tcallEndpoint: () => {\n\t\tthrow new Error('not implemented');\n\t},\n\tuploadToEndpoint: async () => undefined,\n\tgetStream: () => () => (): void => undefined,\n});\n\nexport const useServerInformation = (): IServerInfo => {\n\tconst { info } = useContext(ServerContext);\n\tif (!info) {\n\t\tthrow new Error('useServerInformation: no info available');\n\t}\n\treturn info;\n};\n\nexport const useAbsoluteUrl = (): ((path: string) => string) => useContext(ServerContext).absoluteUrl;\n\nexport const useMethod = <MethodName extends keyof ServerMethods>(methodName: MethodName): ServerMethodFunction<MethodName> => {\n\tconst { callMethod } = useContext(ServerContext);\n\n\treturn useCallback(\n\t\t(...args: ServerMethodParameters<MethodName>) => {\n\t\t\tif (!callMethod) {\n\t\t\t\tthrow new Error(`cannot use useMethod(${methodName}) hook without a wrapping ServerContext`);\n\t\t\t}\n\n\t\t\treturn callMethod(methodName, ...args);\n\t\t},\n\t\t[callMethod, methodName],\n\t);\n};\n\ntype EndpointFunction<TMethod extends Method, TPathPattern extends PathPattern> = (\n\tparams: void extends OperationParams<TMethod, TPathPattern> ? void : Serialized<OperationParams<TMethod, TPathPattern>>,\n) => Promise<Serialized<OperationResult<TMethod, TPathPattern>>>;\n\nexport const useEndpoint = <TMethod extends Method, TPath extends PathFor<TMethod>>(\n\tmethod: TMethod,\n\tpath: TPath,\n): EndpointFunction<TMethod, MatchPathPattern<TPath>> => {\n\tconst { callEndpoint } = useContext(ServerContext);\n\n\treturn useCallback((params) => callEndpoint(method, path, params), [callEndpoint, path, method]);\n};\n\nexport const useUpload = (endpoint: string): ((params: any, formData: any) => Promise<void>) => {\n\tconst { uploadToEndpoint } = useContext(ServerContext);\n\treturn useCallback((params, formData: any) => uploadToEndpoint(endpoint, params, formData), [endpoint, uploadToEndpoint]);\n};\n\nexport const useStream = (streamName: string, options?: {}): (<T>(eventName: string, callback: (data: T) => void) => () => void) => {\n\tconst { getStream } = useContext(ServerContext);\n\treturn useMemo(() => getStream(streamName, options), [getStream, streamName, options]);\n};\n","export * from './ServerContext';\nexport * from './methods';\n","import { Emitter } from '@rocket.chat/emitter';\nimport { createContext, useContext, useMemo, useCallback } from 'react';\nimport { useSubscription, Subscription, Unsubscribe } from 'use-subscription';\n\nimport { IRole } from '../../definition/IUser';\n\ntype IRoles = { [_id: string]: IRole };\n\nexport class RoleStore extends Emitter<{\n\tchange: IRoles;\n}> {\n\troles: IRoles = {};\n}\n\nexport type AuthorizationContextValue = {\n\tqueryPermission(permission: string | Mongo.ObjectID, scope?: string | Mongo.ObjectID): Subscription<boolean>;\n\tqueryAtLeastOnePermission(permission: (string | Mongo.ObjectID)[], scope?: string | Mongo.ObjectID): Subscription<boolean>;\n\tqueryAllPermissions(permission: (string | Mongo.ObjectID)[], scope?: string | Mongo.ObjectID): Subscription<boolean>;\n\tqueryRole(role: string | Mongo.ObjectID): Subscription<boolean>;\n\troleStore: RoleStore;\n};\n\nexport const AuthorizationContext = createContext<AuthorizationContextValue>({\n\tqueryPermission: () => ({\n\t\tgetCurrentValue: (): boolean => false,\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n\tqueryAtLeastOnePermission: () => ({\n\t\tgetCurrentValue: (): boolean => false,\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n\tqueryAllPermissions: () => ({\n\t\tgetCurrentValue: (): boolean => false,\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n\tqueryRole: () => ({\n\t\tgetCurrentValue: (): boolean => false,\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n\troleStore: new RoleStore(),\n});\n\nexport const usePermission = (permission: string | Mongo.ObjectID, scope?: string | Mongo.ObjectID): boolean => {\n\tconst { queryPermission } = useContext(AuthorizationContext);\n\tconst subscription = useMemo(() => queryPermission(permission, scope), [queryPermission, permission, scope]);\n\treturn useSubscription(subscription);\n};\n\nexport const useAtLeastOnePermission = (permissions: (string | Mongo.ObjectID)[], scope?: string | Mongo.ObjectID): boolean => {\n\tconst { queryAtLeastOnePermission } = useContext(AuthorizationContext);\n\tconst subscription = useMemo(() => queryAtLeastOnePermission(permissions, scope), [queryAtLeastOnePermission, permissions, scope]);\n\treturn useSubscription(subscription);\n};\n\nexport const useAllPermissions = (permissions: (string | Mongo.ObjectID)[], scope?: string | Mongo.ObjectID): boolean => {\n\tconst { queryAllPermissions } = useContext(AuthorizationContext);\n\tconst subscription = useMemo(() => queryAllPermissions(permissions, scope), [queryAllPermissions, permissions, scope]);\n\treturn useSubscription(subscription);\n};\n\nexport const useRolesDescription = (): ((ids: Array<string>) => [string]) => {\n\tconst { roleStore } = useContext(AuthorizationContext);\n\n\tconst subscription = useMemo(\n\t\t() => ({\n\t\t\tgetCurrentValue: (): IRoles => roleStore.roles,\n\t\t\tsubscribe: (callback: () => void): (() => void) => {\n\t\t\t\troleStore.on('change', callback);\n\t\t\t\treturn (): void => {\n\t\t\t\t\troleStore.off('change', callback);\n\t\t\t\t};\n\t\t\t},\n\t\t}),\n\t\t[roleStore],\n\t);\n\n\tconst roles = useSubscription<IRoles>(subscription);\n\n\treturn useCallback((values) => values.map((role: string) => (roles[role] && roles[role].description) || role), [roles]) as (\n\t\tids: Array<string>,\n\t) => [string];\n};\n\nexport const useRole = (role: string | Mongo.ObjectID): boolean => {\n\tconst { queryRole } = useContext(AuthorizationContext);\n\tconst subscription = useMemo(() => queryRole(role), [queryRole, role]);\n\treturn useSubscription(subscription);\n};\n","import { createContext, useContext } from 'react';\n\nconst dummy = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQYV2Oora39DwAFaQJ3y3rKeAAAAABJRU5ErkJggg==';\n\ntype AvatarContextValue = {\n\tgetUserPathAvatar: (uid: string, etag?: string) => string;\n\tgetRoomPathAvatar: (...args: any) => string;\n};\nconst AvatarUrlContextValueDefault: AvatarContextValue = {\n\tgetUserPathAvatar: () => dummy,\n\tgetRoomPathAvatar: () => dummy,\n};\n\nexport const AvatarUrlContext = createContext<AvatarContextValue>(AvatarUrlContextValueDefault);\n\nexport const useRoomAvatarPath = (): ((uid: string, etag?: string) => string) => useContext(AvatarUrlContext).getRoomPathAvatar;\n\nexport const useUserAvatarPath = (): ((...args: any) => string) => useContext(AvatarUrlContext).getUserPathAvatar;\n","import { createContext, useContext } from 'react';\n\nexport type SizeLayout = {\n\tsidebar: string;\n\tcontextualBar: string;\n};\n\nexport type LayoutContextValue = {\n\tisEmbedded: boolean;\n\tshowTopNavbarEmbeddedLayout: boolean;\n\tisMobile: boolean;\n\tsidebar: any;\n\tsize: SizeLayout;\n\tcontextualBarExpanded: boolean;\n\tcontextualBarPosition: 'absolute' | 'relative' | 'fixed';\n};\n\nexport const LayoutContext = createContext<LayoutContextValue>({\n\tisEmbedded: false,\n\tshowTopNavbarEmbeddedLayout: false,\n\tisMobile: false,\n\tsidebar: {},\n\tsize: {\n\t\tsidebar: '380px',\n\t\tcontextualBar: '380px',\n\t},\n\tcontextualBarPosition: 'relative',\n\tcontextualBarExpanded: false,\n});\n\nexport const useLayout = (): LayoutContextValue => useContext(LayoutContext);\n","import { createContext, useContext, useMemo } from 'react';\nimport { useSubscription, Subscription } from 'use-subscription';\n\ntype RouteName = string;\n\ntype RouteParameters = Record<string, string>;\n\ntype QueryStringParameters = Record<string, string>;\n\ntype RouteGroupName = string;\n\nexport type RouterContextValue = {\n\tqueryRoutePath: (\n\t\tname: RouteName,\n\t\tparameters: RouteParameters | undefined,\n\t\tqueryStringParameters: QueryStringParameters | undefined,\n\t) => Subscription<string | undefined>;\n\tqueryRouteUrl: (\n\t\tname: RouteName,\n\t\tparameters: RouteParameters | undefined,\n\t\tqueryStringParameters: QueryStringParameters | undefined,\n\t) => Subscription<string | undefined>;\n\tpushRoute: (name: RouteName, parameters: RouteParameters | undefined, queryStringParameters: QueryStringParameters | undefined) => void;\n\treplaceRoute: (\n\t\tname: RouteName,\n\t\tparameters: RouteParameters | undefined,\n\t\tqueryStringParameters: QueryStringParameters | undefined,\n\t) => void;\n\tqueryRouteParameter: (name: string) => Subscription<string | undefined>;\n\tqueryQueryStringParameter: (name: string) => Subscription<string | undefined>;\n\tqueryCurrentRoute: () => Subscription<[RouteName?, RouteParameters?, QueryStringParameters?, RouteGroupName?]>;\n};\n\nexport const RouterContext = createContext<RouterContextValue>({\n\tqueryRoutePath: () => ({\n\t\tgetCurrentValue: (): undefined => undefined,\n\t\tsubscribe: () => (): void => undefined,\n\t}),\n\tqueryRouteUrl: () => ({\n\t\tgetCurrentValue: (): undefined => undefined,\n\t\tsubscribe: () => (): void => undefined,\n\t}),\n\tpushRoute: () => undefined,\n\treplaceRoute: () => undefined,\n\tqueryRouteParameter: () => ({\n\t\tgetCurrentValue: (): undefined => undefined,\n\t\tsubscribe: () => (): void => undefined,\n\t}),\n\tqueryQueryStringParameter: () => ({\n\t\tgetCurrentValue: (): undefined => undefined,\n\t\tsubscribe: () => (): void => undefined,\n\t}),\n\tqueryCurrentRoute: () => ({\n\t\tgetCurrentValue: (): [undefined, {}, {}, undefined] => [undefined, {}, {}, undefined],\n\t\tsubscribe: () => (): void => undefined,\n\t}),\n});\n\ntype Route = {\n\tgetPath: (parameters?: RouteParameters, queryStringParameters?: QueryStringParameters) => string | undefined;\n\tgetUrl: (parameters?: RouteParameters, queryStringParameters?: QueryStringParameters) => string | undefined;\n\tpush: (parameters?: RouteParameters, queryStringParameters?: QueryStringParameters) => void;\n\treplace: (parameters?: RouteParameters, queryStringParameters?: QueryStringParameters) => void;\n};\n\nexport const useRoute = (name: string): Route => {\n\tconst { queryRoutePath, queryRouteUrl, pushRoute, replaceRoute } = useContext(RouterContext);\n\n\treturn useMemo<Route>(\n\t\t() => ({\n\t\t\tgetPath: (parameters, queryStringParameters): string | undefined =>\n\t\t\t\tqueryRoutePath(name, parameters, queryStringParameters).getCurrentValue(),\n\t\t\tgetUrl: (parameters, queryStringParameters): ReturnType<Route['getUrl']> =>\n\t\t\t\tqueryRouteUrl(name, parameters, queryStringParameters).getCurrentValue(),\n\t\t\tpush: (parameters, queryStringParameters): ReturnType<Route['push']> => pushRoute(name, parameters, queryStringParameters),\n\t\t\treplace: (parameters, queryStringParameters): ReturnType<Route['replace']> => replaceRoute(name, parameters, queryStringParameters),\n\t\t}),\n\t\t[queryRoutePath, queryRouteUrl, name, pushRoute, replaceRoute],\n\t);\n};\n\nexport const useRoutePath = (\n\tname: string,\n\tparameters?: RouteParameters,\n\tqueryStringParameters?: QueryStringParameters,\n): string | undefined => {\n\tconst { queryRoutePath } = useContext(RouterContext);\n\n\treturn useSubscription(\n\t\tuseMemo(() => queryRoutePath(name, parameters, queryStringParameters), [queryRoutePath, name, parameters, queryStringParameters]),\n\t);\n};\n\nexport const useRouteUrl = (\n\tname: string,\n\tparameters?: RouteParameters,\n\tqueryStringParameters?: QueryStringParameters,\n): string | undefined => {\n\tconst { queryRouteUrl } = useContext(RouterContext);\n\n\treturn useSubscription(\n\t\tuseMemo(() => queryRouteUrl(name, parameters, queryStringParameters), [queryRouteUrl, name, parameters, queryStringParameters]),\n\t);\n};\n\nexport const useRouteParameter = (name: string): string | undefined => {\n\tconst { queryRouteParameter } = useContext(RouterContext);\n\n\treturn useSubscription(useMemo(() => queryRouteParameter(name), [queryRouteParameter, name]));\n};\n\nexport const useQueryStringParameter = (name: string): string | undefined => {\n\tconst { queryQueryStringParameter } = useContext(RouterContext);\n\n\treturn useSubscription(useMemo(() => queryQueryStringParameter(name), [queryQueryStringParameter, name]));\n};\n\nexport const useCurrentRoute = (): [RouteName?, RouteParameters?, QueryStringParameters?, RouteGroupName?] => {\n\tconst { queryCurrentRoute } = useContext(RouterContext);\n\n\treturn useSubscription(useMemo(() => queryCurrentRoute(), [queryCurrentRoute]));\n};\n","import { createContext, useCallback, useContext, useMemo } from 'react';\nimport { useSubscription, Subscription, Unsubscribe } from 'use-subscription';\n\nimport { SettingId, ISetting, GroupId, SectionName, TabId } from '../../definition/ISetting';\n\nexport type SettingsContextQuery = {\n\treadonly _id?: SettingId[];\n\treadonly group?: GroupId;\n\treadonly section?: SectionName;\n\treadonly tab?: TabId;\n};\n\nexport type SettingsContextValue = {\n\treadonly hasPrivateAccess: boolean;\n\treadonly isLoading: boolean;\n\treadonly querySetting: (_id: SettingId) => Subscription<ISetting | undefined>;\n\treadonly querySettings: (query: SettingsContextQuery) => Subscription<ISetting[]>;\n\treadonly dispatch: (changes: Partial<ISetting>[]) => Promise<void>;\n};\n\nexport const SettingsContext = createContext<SettingsContextValue>({\n\thasPrivateAccess: false,\n\tisLoading: false,\n\tquerySetting: () => ({\n\t\tgetCurrentValue: (): undefined => undefined,\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n\tquerySettings: () => ({\n\t\tgetCurrentValue: (): ISetting[] => [],\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n\tdispatch: async () => undefined,\n});\n\nexport const useIsPrivilegedSettingsContext = (): boolean => useContext(SettingsContext).hasPrivateAccess;\n\nexport const useIsSettingsContextLoading = (): boolean => useContext(SettingsContext).isLoading;\n\nexport const useSettingStructure = (_id: SettingId): ISetting | undefined => {\n\tconst { querySetting } = useContext(SettingsContext);\n\tconst subscription = useMemo(() => querySetting(_id), [querySetting, _id]);\n\treturn useSubscription(subscription);\n};\n\nexport const useSetting = (_id: SettingId): unknown | undefined => useSettingStructure(_id)?.value;\n\nexport const useSettings = (query?: SettingsContextQuery): ISetting[] => {\n\tconst { querySettings } = useContext(SettingsContext);\n\tconst subscription = useMemo(() => querySettings(query ?? {}), [querySettings, query]);\n\treturn useSubscription(subscription);\n};\n\nexport const useSettingsDispatch = (): ((changes: Partial<ISetting>[]) => Promise<void>) => useContext(SettingsContext).dispatch;\n\nexport const useSettingSetValue = <T extends ISetting['value']>(_id: SettingId): ((value: T) => Promise<void>) => {\n\tconst dispatch = useSettingsDispatch();\n\treturn useCallback((value: T) => dispatch([{ _id, value }]), [dispatch, _id]);\n};\n","import { createContext, useContext } from 'react';\n\ntype ToastMessagePayload = {\n\ttype: 'success' | 'info' | 'warning' | 'error';\n\tmessage: string | Error;\n\ttitle?: string;\n\toptions?: object;\n};\n\ntype ToastMessagesContextValue = {\n\tdispatch: (payload: ToastMessagePayload) => void;\n};\n\nexport const ToastMessagesContext = createContext<ToastMessagesContextValue>({\n\tdispatch: () => undefined,\n});\n\nexport const useToastMessageDispatch = (): ToastMessagesContextValue['dispatch'] => useContext(ToastMessagesContext).dispatch;\n","import { createContext, useContext } from 'react';\n\nimport type keys from '../../packages/rocketchat-i18n/i18n/en.i18n.json';\n\nexport type TranslationLanguage = {\n\tname: string;\n\ten: string;\n\tkey: string;\n};\n\nexport type TranslationKey = keyof typeof keys;\n\nexport type TranslationContextValue = {\n\tlanguages: TranslationLanguage[];\n\tlanguage: TranslationLanguage['key'];\n\tloadLanguage: (language: TranslationLanguage['key']) => Promise<void>;\n\ttranslate: {\n\t\t(key: TranslationKey, ...replaces: unknown[]): string;\n\t\thas: (key: TranslationKey) => boolean;\n\t};\n};\n\nexport const TranslationContext = createContext<TranslationContextValue>({\n\tlanguages: [\n\t\t{\n\t\t\tname: 'Default',\n\t\t\ten: 'Default',\n\t\t\tkey: '',\n\t\t},\n\t],\n\tlanguage: '',\n\tloadLanguage: async () => undefined,\n\ttranslate: Object.assign((key: string) => key, {\n\t\thas: () => true,\n\t}),\n});\n\nexport const useLanguages = (): TranslationContextValue['languages'] => useContext(TranslationContext).languages;\n\nexport const useLanguage = (): TranslationContextValue['language'] => useContext(TranslationContext).language;\n\nexport const useLoadLanguage = (): TranslationContextValue['loadLanguage'] => useContext(TranslationContext).loadLanguage;\n\nexport const useTranslation = (): TranslationContextValue['translate'] => useContext(TranslationContext).translate;\n","import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { FilterQuery } from 'mongodb';\nimport { createContext, useContext, useMemo } from 'react';\nimport { useSubscription, Subscription, Unsubscribe } from 'use-subscription';\n\nimport { IRoom } from '../../definition/IRoom';\nimport { ISubscription } from '../../definition/ISubscription';\nimport { IUser } from '../../definition/IUser';\nimport { useRoute } from './RouterContext';\n\ntype SubscriptionQuery =\n\t| {\n\t\t\trid: string | Mongo.ObjectID;\n\t  }\n\t| {\n\t\t\tname: string;\n\t  }\n\t| {\n\t\t\topen: boolean;\n\t  }\n\t| object;\n\ntype Fields = {\n\t[key: string]: boolean;\n};\n\ntype Sort = {\n\t[key: string]: -1 | 1 | number;\n};\n\ntype FindOptions = {\n\tfields?: Fields;\n\tsort?: Sort;\n};\n\ntype UserContextValue = {\n\tuserId: string | null;\n\tuser: IUser | null;\n\tloginWithPassword: (user: string | object, password: string) => Promise<void>;\n\tlogout: () => Promise<void>;\n\tqueryPreference: <T>(key: string | Mongo.ObjectID, defaultValue?: T) => Subscription<T | undefined>;\n\tquerySubscription: (query: FilterQuery<ISubscription>, fields?: Fields, sort?: Sort) => Subscription<ISubscription | undefined>;\n\tqueryRoom: (query: FilterQuery<IRoom>, fields?: Fields, sort?: Sort) => Subscription<IRoom | undefined>;\n\tquerySubscriptions: (query: SubscriptionQuery, options?: FindOptions) => Subscription<Array<ISubscription> | []>;\n};\n\nexport const UserContext = createContext<UserContextValue>({\n\tuserId: null,\n\tuser: null,\n\tloginWithPassword: async () => undefined,\n\tlogout: () => Promise.resolve(),\n\tqueryPreference: () => ({\n\t\tgetCurrentValue: (): undefined => undefined,\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n\tquerySubscription: () => ({\n\t\tgetCurrentValue: (): undefined => undefined,\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n\tqueryRoom: () => ({\n\t\tgetCurrentValue: (): undefined => undefined,\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n\tquerySubscriptions: () => ({\n\t\tgetCurrentValue: (): [] => [],\n\t\tsubscribe: (): Unsubscribe => (): void => undefined,\n\t}),\n});\n\nexport const useUserId = (): string | null => useContext(UserContext).userId;\n\n// TODO: Use IUser instead\nexport const useUser = (): IUser | null => useContext(UserContext).user;\n\nexport const useLoginWithPassword = (): ((user: string | object, password: string) => Promise<void>) =>\n\tuseContext(UserContext).loginWithPassword;\n\nexport const useLogout = (): (() => void) => {\n\tconst router = useRoute('home');\n\tconst { logout } = useContext(UserContext);\n\n\tconst handleLogout = useMutableCallback(() => {\n\t\tlogout();\n\t\trouter.push({});\n\t});\n\n\treturn handleLogout;\n};\n\nexport const useUserPreference = <T>(key: string, defaultValue?: T): T | undefined => {\n\tconst { queryPreference } = useContext(UserContext);\n\tconst subscription = useMemo(() => queryPreference(key, defaultValue), [queryPreference, key, defaultValue]);\n\treturn useSubscription(subscription);\n};\n\nexport const useUserSubscription = (rid: string, fields?: Fields): ISubscription | undefined => {\n\tconst { querySubscription } = useContext(UserContext);\n\tconst subscription = useMemo(() => querySubscription({ rid }, fields), [querySubscription, rid, fields]);\n\treturn useSubscription(subscription);\n};\n\nexport const useUserRoom = (rid: string, fields?: Fields): IRoom | undefined => {\n\tconst { queryRoom } = useContext(UserContext);\n\tconst subscription = useMemo(() => queryRoom({ _id: rid }, fields), [queryRoom, rid, fields]);\n\treturn useSubscription(subscription);\n};\n\nexport const useUserSubscriptions = (query: SubscriptionQuery, options?: FindOptions): Array<ISubscription> | [] => {\n\tconst { querySubscriptions } = useContext(UserContext);\n\tconst subscription = useMemo(() => querySubscriptions(query, options), [querySubscriptions, query, options]);\n\treturn useSubscription(subscription);\n};\n\nexport const useUserSubscriptionByName = (name: string, fields: Fields, sort?: Sort): ISubscription | undefined => {\n\tconst { querySubscription } = useContext(UserContext);\n\tconst subscription = useMemo(() => querySubscription({ name }, fields, sort), [querySubscription, name, fields, sort]);\n\treturn useSubscription(subscription);\n};\n","import { useSafely } from '@rocket.chat/fuselage-hooks';\nimport { useCallback, useMemo, useState } from 'react';\n\nimport { AsyncStatePhase, AsyncState, asyncState } from '../lib/asyncState';\n\ntype AsyncStateObject<T> = AsyncState<T> & {\n\tresolve: (value: T | ((prev: T | undefined) => T)) => void;\n\treject: (error: Error) => void;\n\treset: () => void;\n\tupdate: () => void;\n};\n\nexport const useAsyncState = <T>(initialValue?: T | (() => T)): AsyncStateObject<T> => {\n\tconst [state, setState] = useSafely(\n\t\tuseState<AsyncState<T>>(() => {\n\t\t\tif (typeof initialValue === 'undefined') {\n\t\t\t\treturn asyncState.loading<T>();\n\t\t\t}\n\n\t\t\treturn asyncState.resolved<T>(typeof initialValue === 'function' ? (initialValue as () => T)() : initialValue);\n\t\t}),\n\t);\n\n\tconst resolve = useCallback(\n\t\t(value: T | ((prev: T | undefined) => T)) => {\n\t\t\tsetState((state) => {\n\t\t\t\tif (typeof value === 'function') {\n\t\t\t\t\treturn asyncState.resolve(state, (value as (prev: T | undefined) => T)(state.value));\n\t\t\t\t}\n\n\t\t\t\treturn asyncState.resolve(state, value);\n\t\t\t});\n\t\t},\n\t\t[setState],\n\t);\n\n\tconst reject = useCallback(\n\t\t(error: Error) => {\n\t\t\tsetState((state) => asyncState.reject(state, error));\n\t\t},\n\t\t[setState],\n\t);\n\n\tconst update = useCallback(() => {\n\t\tsetState((state) => asyncState.update(state));\n\t}, [setState]);\n\n\tconst reset = useCallback(() => {\n\t\tsetState((state) => asyncState.reload(state));\n\t}, [setState]);\n\n\treturn useMemo(\n\t\t() => ({\n\t\t\t...state,\n\t\t\tresolve,\n\t\t\treject,\n\t\t\treset,\n\t\t\tupdate,\n\t\t}),\n\t\t[state, resolve, reject, reset, update],\n\t);\n};\n\nexport { AsyncStatePhase, AsyncState };\n","import { useCallback } from 'react';\n\nimport { Serialized } from '../../definition/Serialized';\nimport { MatchPathPattern, Method, OperationParams, OperationResult, PathFor } from '../../definition/rest';\nimport { useEndpoint } from '../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../contexts/ToastMessagesContext';\n\nexport const useEndpointActionExperimental = <TMethod extends Method, TPath extends PathFor<TMethod>>(\n\tmethod: TMethod,\n\tpath: TPath,\n\tsuccessMessage?: string,\n): ((\n\tparams: Serialized<OperationParams<TMethod, MatchPathPattern<TPath>>>,\n) => Promise<Serialized<OperationResult<TMethod, MatchPathPattern<TPath>>>>) => {\n\tconst sendData = useEndpoint(method, path);\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\treturn useCallback(\n\t\tasync (params) => {\n\t\t\ttry {\n\t\t\t\tconst data = await sendData(params);\n\n\t\t\t\tif (successMessage) {\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: successMessage });\n\t\t\t\t}\n\n\t\t\t\treturn data;\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t// return { success: false };\n\t\t\t\tthrow error;\n\t\t\t}\n\t\t},\n\t\t[dispatchToastMessage, sendData, successMessage],\n\t);\n};\n","import { useCallback, useEffect } from 'react';\n\nimport { Serialized } from '../../definition/Serialized';\nimport { MatchPathPattern, OperationParams, OperationResult, PathFor } from '../../definition/rest';\nimport { useEndpoint } from '../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../contexts/ToastMessagesContext';\nimport { AsyncState, useAsyncState } from './useAsyncState';\n\nexport const useEndpointData = <TPath extends PathFor<'GET'>>(\n\tendpoint: TPath,\n\tparams: void extends OperationParams<'GET', MatchPathPattern<TPath>>\n\t\t? void\n\t\t: Serialized<OperationParams<'GET', MatchPathPattern<TPath>>> = undefined as void extends OperationParams<\n\t\t'GET',\n\t\tMatchPathPattern<TPath>\n\t>\n\t\t? void\n\t\t: Serialized<OperationParams<'GET', MatchPathPattern<TPath>>>,\n\tinitialValue?:\n\t\t| Serialized<OperationResult<'GET', MatchPathPattern<TPath>>>\n\t\t| (() => Serialized<OperationResult<'GET', MatchPathPattern<TPath>>>),\n): AsyncState<Serialized<OperationResult<'GET', MatchPathPattern<TPath>>>> & {\n\treload: () => void;\n} => {\n\tconst { resolve, reject, reset, ...state } = useAsyncState(initialValue);\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst getData = useEndpoint('GET', endpoint);\n\n\tconst fetchData = useCallback(() => {\n\t\treset();\n\t\tgetData(params)\n\t\t\t.then(resolve)\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error(error);\n\t\t\t\tdispatchToastMessage({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tmessage: error,\n\t\t\t\t});\n\t\t\t\treject(error);\n\t\t\t});\n\t}, [reset, getData, params, resolve, dispatchToastMessage, reject]);\n\n\tuseEffect(() => {\n\t\tfetchData();\n\t}, [fetchData]);\n\n\treturn {\n\t\t...state,\n\t\treload: fetchData,\n\t};\n};\n","import { capitalize } from '@rocket.chat/string-helpers';\nimport { useCallback, useReducer, useMemo, ChangeEvent } from 'react';\n\ntype Field = {\n\tname: string;\n\tcurrentValue: unknown;\n\tinitialValue: unknown;\n\tchanged: boolean;\n};\n\ntype FormState<Values extends Record<string, unknown>> = {\n\tfields: Field[];\n\tvalues: Values;\n\thasUnsavedChanges: boolean;\n};\n\ntype FormAction<Values extends Record<string, unknown>> = {\n\t(prevState: FormState<Values>): FormState<Values>;\n};\n\nconst reduceForm = <Values extends Record<string, unknown>>(state: FormState<Values>, action: FormAction<Values>): FormState<Values> =>\n\taction(state);\n\nconst initForm = <Values extends Record<string, unknown>>(initialValues: Values): FormState<Values> => {\n\tconst fields = [];\n\n\tfor (const [fieldName, initialValue] of Object.entries(initialValues)) {\n\t\tfields.push({\n\t\t\tname: fieldName,\n\t\t\tcurrentValue: initialValue,\n\t\t\tinitialValue,\n\t\t\tchanged: false,\n\t\t});\n\t}\n\n\treturn {\n\t\tfields,\n\t\tvalues: { ...initialValues },\n\t\thasUnsavedChanges: false,\n\t};\n};\n\nconst valueChanged =\n\t<Values extends Record<string, unknown>>(fieldName: string, newValue: unknown): FormAction<Values> =>\n\t(state: FormState<Values>): FormState<Values> => {\n\t\tlet { fields } = state;\n\t\tconst field = fields.find(({ name }) => name === fieldName);\n\n\t\tif (!field || field.currentValue === newValue) {\n\t\t\treturn state;\n\t\t}\n\n\t\tconst newField = {\n\t\t\t...field,\n\t\t\tcurrentValue: newValue,\n\t\t\tchanged: JSON.stringify(newValue) !== JSON.stringify(field.initialValue),\n\t\t};\n\n\t\tfields = state.fields.map((field) => {\n\t\t\tif (field.name === fieldName) {\n\t\t\t\treturn newField;\n\t\t\t}\n\n\t\t\treturn field;\n\t\t});\n\n\t\treturn {\n\t\t\t...state,\n\t\t\tfields,\n\t\t\tvalues: {\n\t\t\t\t...state.values,\n\t\t\t\t[newField.name]: newField.currentValue,\n\t\t\t},\n\t\t\thasUnsavedChanges: newField.changed || fields.some((field) => field.changed),\n\t\t};\n\t};\n\nconst formCommitted =\n\t<Values extends Record<string, unknown>>(): FormAction<Values> =>\n\t(state: FormState<Values>): FormState<Values> => ({\n\t\t...state,\n\t\tfields: state.fields.map((field) => ({\n\t\t\t...field,\n\t\t\tinitialValue: field.currentValue,\n\t\t\tchanged: false,\n\t\t})),\n\t\thasUnsavedChanges: false,\n\t});\n\nconst formReset =\n\t<Values extends Record<string, unknown>>(): FormAction<Values> =>\n\t(state: FormState<Values>): FormState<Values> => ({\n\t\t...state,\n\t\tfields: state.fields.map((field) => ({\n\t\t\t...field,\n\t\t\tcurrentValue: field.initialValue,\n\t\t\tchanged: false,\n\t\t})),\n\t\tvalues: state.fields.reduce(\n\t\t\t(values, field) => ({\n\t\t\t\t...values,\n\t\t\t\t[field.name]: field.initialValue,\n\t\t\t}),\n\t\t\t{} as Values,\n\t\t),\n\t\thasUnsavedChanges: false,\n\t});\n\nconst isChangeEvent = (x: any): x is ChangeEvent =>\n\t(typeof x === 'object' || typeof x === 'function') && typeof x?.currentTarget !== 'undefined';\n\nconst getValue = (eventOrValue: ChangeEvent | unknown): unknown => {\n\tif (!isChangeEvent(eventOrValue)) {\n\t\treturn eventOrValue;\n\t}\n\n\tconst target = eventOrValue.currentTarget;\n\n\tif (target instanceof HTMLTextAreaElement) {\n\t\treturn target.value;\n\t}\n\n\tif (target instanceof HTMLSelectElement) {\n\t\treturn target.value;\n\t}\n\n\tif (!(target instanceof HTMLInputElement)) {\n\t\treturn undefined;\n\t}\n\n\tif (target.type === 'checkbox' || target.type === 'radio') {\n\t\treturn target.checked;\n\t}\n\n\treturn target.value;\n};\n\n/**\n * @deprecated prefer react-hook-form's `useForm`\n */\nexport const useForm = <\n\tReducer extends (\n\t\tstate: FormState<Record<string, unknown>>,\n\t\taction: FormAction<Record<string, unknown>>,\n\t) => FormState<Record<string, unknown>>,\n>(\n\tinitialValues: Parameters<Reducer>[0]['values'],\n\tonChange: (...args: unknown[]) => void = (): void => undefined,\n): {\n\tvalues: Parameters<Reducer>[0]['values'];\n\thandlers: Record<string, (eventOrValue: ChangeEvent | unknown) => void>;\n\thasUnsavedChanges: boolean;\n\tcommit: () => void;\n\treset: () => void;\n} => {\n\tconst [state, dispatch] = useReducer(reduceForm, initialValues, initForm);\n\n\tconst commit = useCallback(() => {\n\t\tdispatch(formCommitted());\n\t}, []);\n\n\tconst reset = useCallback(() => {\n\t\tdispatch(formReset());\n\t}, []);\n\n\tconst handlers = useMemo<Record<string, (eventOrValue: ChangeEvent | unknown) => void>>(\n\t\t() =>\n\t\t\tstate.fields.reduce(\n\t\t\t\t(handlers, { name, initialValue }) => ({\n\t\t\t\t\t...handlers,\n\t\t\t\t\t[`handle${capitalize(name)}`]: (eventOrValue: ChangeEvent | unknown): void => {\n\t\t\t\t\t\tconst newValue = getValue(eventOrValue);\n\t\t\t\t\t\tdispatch(valueChanged(name, newValue));\n\t\t\t\t\t\tonChange({\n\t\t\t\t\t\t\tinitialValue,\n\t\t\t\t\t\t\tvalue: newValue,\n\t\t\t\t\t\t\tkey: name,\n\t\t\t\t\t\t\tvalues: state.values,\n\t\t\t\t\t\t});\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t\t{},\n\t\t\t),\n\t\t[onChange, state.fields, state.values],\n\t);\n\n\treturn {\n\t\thandlers,\n\t\tvalues: state.values,\n\t\thasUnsavedChanges: state.hasUnsavedChanges,\n\t\tcommit,\n\t\treset,\n\t};\n};\n","import moment from 'moment';\nimport { useCallback } from 'react';\n\nimport { useSetting } from '../contexts/SettingsContext';\nimport { useUserPreference } from '../contexts/UserContext';\n\nexport const useFormatDateAndTime = () => {\n\tconst clockMode = useUserPreference('clockMode', false);\n\tconst format = useSetting('Message_TimeAndDateFormat');\n\n\treturn useCallback(\n\t\t(time) => {\n\t\t\tswitch (clockMode) {\n\t\t\t\tcase 1:\n\t\t\t\t\treturn moment(time).format('MMMM D, Y h:mm A');\n\t\t\t\tcase 2:\n\t\t\t\t\treturn moment(time).format('MMMM D, Y H:mm');\n\t\t\t\tdefault:\n\t\t\t\t\treturn moment(time).format(format);\n\t\t\t}\n\t\t},\n\t\t[clockMode, format],\n\t);\n};\n","import { useCallback, useEffect } from 'react';\n\nimport { ServerMethods, useMethod } from '../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../contexts/ToastMessagesContext';\nimport { AsyncState, useAsyncState } from './useAsyncState';\n\nconst defaultArgs: unknown[] = [];\n\nexport const useMethodData = <T>(\n\tmethodName: keyof ServerMethods,\n\targs: any[] = defaultArgs,\n\tinitialValue?: T | (() => T),\n): AsyncState<T> & { reload: () => void } => {\n\tconst { resolve, reject, reset, ...state } = useAsyncState<T>(initialValue);\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst getData: (...args: unknown[]) => Promise<T> = useMethod(methodName);\n\n\tconst fetchData = useCallback(() => {\n\t\treset();\n\t\tgetData(...args)\n\t\t\t.then(resolve)\n\t\t\t.catch((error) => {\n\t\t\t\tconsole.error(error);\n\t\t\t\tdispatchToastMessage({\n\t\t\t\t\ttype: 'error',\n\t\t\t\t\tmessage: error,\n\t\t\t\t});\n\t\t\t\treject(error);\n\t\t\t});\n\t}, [reset, getData, args, resolve, dispatchToastMessage, reject]);\n\n\tuseEffect(() => {\n\t\tfetchData();\n\t}, [fetchData]);\n\n\treturn {\n\t\t...state,\n\t\treload: fetchData,\n\t};\n};\n","import { Tracker } from 'meteor/tracker';\nimport { useMemo } from 'react';\nimport { Subscription, Unsubscribe, useSubscription } from 'use-subscription';\n\nexport const useReactiveValue = <T>(computeCurrentValue: () => T): T => {\n\tconst subscription: Subscription<T> = useMemo(() => {\n\t\tconst callbacks = new Set<Unsubscribe>();\n\n\t\tlet currentValue: T;\n\n\t\tconst computation = Tracker.autorun(() => {\n\t\t\tcurrentValue = computeCurrentValue();\n\t\t\tcallbacks.forEach((callback) => {\n\t\t\t\tcallback();\n\t\t\t});\n\t\t});\n\n\t\treturn {\n\t\t\tgetCurrentValue: (): T => currentValue,\n\t\t\tsubscribe: (callback): Unsubscribe => {\n\t\t\t\tcallbacks.add(callback);\n\n\t\t\t\treturn (): void => {\n\t\t\t\t\tcallbacks.delete(callback);\n\n\t\t\t\t\tif (callbacks.size === 0) {\n\t\t\t\t\t\tcomputation.stop();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t},\n\t\t};\n\t}, [computeCurrentValue]);\n\n\treturn useSubscription(subscription);\n};\n","import { IUser } from '../../definition/IUser';\nimport { useSetting } from '../contexts/SettingsContext';\nimport { getUserDisplayName } from '../lib/getUserDisplayName';\n\nexport const useUserDisplayName = ({ name, username }: Pick<IUser, 'name' | 'username'>): string | undefined => {\n\tconst useRealName = useSetting('UI_Use_Real_Name');\n\n\treturn getUserDisplayName(name, username, !!useRealName);\n};\n","import { Meteor } from 'meteor/meteor';\n\nimport { callbacks } from '../../../lib/callbacks';\nimport { fireGlobalEvent } from '../../lib/utils/fireGlobalEvent';\n\nMeteor.startup(() => {\n\tcallbacks.add('afterLogoutCleanUp', () => fireGlobalEvent('Custom_Script_On_Logout'), callbacks.priority.LOW, 'custom-script-on-logout');\n});\n","import './customScriptOnLogout';\n","import { useMemo, lazy, LazyExoticComponent, FC } from 'react';\n\nimport { usePermission } from '../../contexts/AuthorizationContext';\nimport { addAction } from '../../views/room/lib/Toolbox';\n\naddAction('export-messages', ({ room }) => {\n\tconst hasPermission = usePermission('mail-messages', room._id);\n\treturn useMemo(\n\t\t() =>\n\t\t\thasPermission\n\t\t\t\t? {\n\t\t\t\t\t\tgroups: ['channel', 'group', 'direct', 'direct_multiple', 'team'],\n\t\t\t\t\t\tid: 'export-messages',\n\t\t\t\t\t\tanonymous: true,\n\t\t\t\t\t\ttitle: 'Export_Messages',\n\t\t\t\t\t\ticon: 'mail',\n\t\t\t\t\t\ttemplate: lazy(() => import('../../views/room/contextualBar/ExportMessages')) as LazyExoticComponent<FC>,\n\t\t\t\t\t\tfull: true,\n\t\t\t\t\t\torder: 12,\n\t\t\t\t  }\n\t\t\t\t: null,\n\t\t[hasPermission],\n\t);\n});\n","import './exportMessages';\n","import './konchatNotifications';\nimport './updateAvatar';\nimport './usersNameChanged';\n","import { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport { Tracker } from 'meteor/tracker';\n\nimport { CachedChatSubscription } from '../../../app/models/client';\nimport { Notifications } from '../../../app/notifications/client';\nimport { readMessage } from '../../../app/ui-utils/client';\nimport { KonchatNotification } from '../../../app/ui/client';\nimport { getUserPreference } from '../../../app/utils/client';\nimport { IMessage } from '../../../definition/IMessage';\nimport { IRoom } from '../../../definition/IRoom';\nimport { ISubscription } from '../../../definition/ISubscription';\nimport { fireGlobalEvent } from '../../lib/utils/fireGlobalEvent';\nimport { isLayoutEmbedded } from '../../lib/utils/isLayoutEmbedded';\n\nconst notifyNewRoom = (sub: ISubscription): void => {\n\tif (Session.equals(`user_${Meteor.userId()}_status`, 'busy')) {\n\t\treturn;\n\t}\n\n\tif ((!FlowRouter.getParam('name') || FlowRouter.getParam('name') !== sub.name) && !sub.ls && sub.alert === true) {\n\t\tKonchatNotification.newRoom(sub.rid);\n\t}\n};\n\ntype NotificationEvent = {\n\ttitle: string;\n\ttext: string;\n\tduration: number;\n\tpayload: {\n\t\t_id: IMessage['_id'];\n\t\trid: IMessage['rid'];\n\t\ttmid: IMessage['_id'];\n\t\tsender: IMessage['u'];\n\t\ttype: IRoom['t'];\n\t\tname: IRoom['name'];\n\t\tmessage: {\n\t\t\tmsg: IMessage['msg'];\n\t\t\tt: string;\n\t\t};\n\t};\n};\n\nfunction notifyNewMessageAudio(rid: string): void {\n\tconst openedRoomId = Session.get('openedRoom');\n\n\t// This logic is duplicated in /client/startup/unread.coffee.\n\tconst hasFocus = readMessage.isEnable();\n\tconst messageIsInOpenedRoom = openedRoomId === rid;\n\tconst muteFocusedConversations = getUserPreference(Meteor.userId(), 'muteFocusedConversations');\n\n\tif (isLayoutEmbedded()) {\n\t\tif (!hasFocus && messageIsInOpenedRoom) {\n\t\t\t// Play a notification sound\n\t\t\tKonchatNotification.newMessage(rid);\n\t\t}\n\t} else if (!hasFocus || !messageIsInOpenedRoom || !muteFocusedConversations) {\n\t\t// Play a notification sound\n\t\tKonchatNotification.newMessage(rid);\n\t}\n}\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn;\n\t\t}\n\n\t\tNotifications.onUser('notification', (notification: NotificationEvent) => {\n\t\t\tlet openedRoomId = undefined;\n\t\t\tif (['channel', 'group', 'direct'].includes(FlowRouter.getRouteName())) {\n\t\t\t\topenedRoomId = Session.get('openedRoom');\n\t\t\t}\n\n\t\t\t// This logic is duplicated in /client/startup/unread.coffee.\n\t\t\tconst hasFocus = readMessage.isEnable();\n\t\t\tconst messageIsInOpenedRoom = openedRoomId === notification.payload.rid;\n\n\t\t\tfireGlobalEvent('notification', {\n\t\t\t\tnotification,\n\t\t\t\tfromOpenedRoom: messageIsInOpenedRoom,\n\t\t\t\thasFocus,\n\t\t\t});\n\n\t\t\tif (isLayoutEmbedded()) {\n\t\t\t\tif (!hasFocus && messageIsInOpenedRoom) {\n\t\t\t\t\t// Show a notification.\n\t\t\t\t\tKonchatNotification.showDesktop(notification);\n\t\t\t\t}\n\t\t\t} else if (!hasFocus || !messageIsInOpenedRoom) {\n\t\t\t\t// Show a notification.\n\t\t\t\tKonchatNotification.showDesktop(notification);\n\t\t\t}\n\n\t\t\tnotifyNewMessageAudio(notification.payload.rid);\n\t\t});\n\n\t\tCachedChatSubscription.onSyncData = ((action: 'changed' | 'removed', sub: ISubscription): void => {\n\t\t\tif (action !== 'removed') {\n\t\t\t\tnotifyNewRoom(sub);\n\t\t\t}\n\t\t}) as () => void;\n\n\t\tNotifications.onUser('subscriptions-changed', (_action: 'changed' | 'removed', sub: ISubscription) => {\n\t\t\tnotifyNewRoom(sub);\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { Notifications } from '../../../app/notifications/client';\nimport { IUser } from '../../../definition/IUser';\n\ntype UpdateAvatarEvent = {\n\tusername: IUser['username'];\n\tetag: IUser['avatarETag'];\n};\n\nMeteor.startup(() => {\n\tNotifications.onLogged('updateAvatar', (data: UpdateAvatarEvent) => {\n\t\tconst { username, etag } = data;\n\t\tusername && Meteor.users.update({ username }, { $set: { avatarETag: etag } });\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { Messages, RoomRoles, Subscriptions } from '../../../app/models/client';\nimport { Notifications } from '../../../app/notifications/client';\nimport { IUser } from '../../../definition/IUser';\n\ntype UsersNameChangedEvent = Partial<IUser>;\n\nMeteor.startup(() => {\n\tNotifications.onLogged('Users:NameChanged', ({ _id, name, username }: UsersNameChangedEvent) => {\n\t\tMessages.update(\n\t\t\t{\n\t\t\t\t'u._id': _id,\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\t'u.username': username,\n\t\t\t\t\t'u.name': name,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tmulti: true,\n\t\t\t},\n\t\t);\n\n\t\tMessages.update(\n\t\t\t{\n\t\t\t\tmentions: {\n\t\t\t\t\t$elemMatch: { _id },\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\t'mentions.$.username': username,\n\t\t\t\t\t'mentions.$.name': name,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tmulti: true,\n\t\t\t},\n\t\t);\n\n\t\tSubscriptions.update(\n\t\t\t{\n\t\t\t\tname: username,\n\t\t\t\tt: 'd',\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\tfname: name,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\n\t\tRoomRoles.update(\n\t\t\t{\n\t\t\t\t'u._id': _id,\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\t'u.name': name,\n\t\t\t\t},\n\t\t\t},\n\t\t\t{\n\t\t\t\tmulti: true,\n\t\t\t},\n\t\t);\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../../app/settings/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst isEnabled = settings.get('AutoLinker') === true;\n\n\t\tif (!isEnabled) {\n\t\t\tcallbacks.remove('renderMessage', 'autolinker');\n\t\t\treturn;\n\t\t}\n\n\t\tconst options = {\n\t\t\tstripPrefix: settings.get('AutoLinker_StripPrefix'),\n\t\t\turls: {\n\t\t\t\tschemeMatches: settings.get('AutoLinker_Urls_Scheme'),\n\t\t\t\twwwMatches: settings.get('AutoLinker_Urls_www'),\n\t\t\t\ttldMatches: settings.get('AutoLinker_Urls_TLD'),\n\t\t\t},\n\t\t\temail: settings.get('AutoLinker_Email'),\n\t\t\tphone: settings.get('AutoLinker_Phone'),\n\t\t};\n\n\t\timport('../../../app/autolinker/client').then(({ createAutolinkerMessageRenderer }) => {\n\t\t\tconst renderMessage = createAutolinkerMessageRenderer(options);\n\t\t\tcallbacks.remove('renderMessage', 'autolinker');\n\t\t\tcallbacks.add('renderMessage', renderMessage, callbacks.priority.MEDIUM, 'autolinker');\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { hasPermission } from '../../../app/authorization/client';\nimport { settings } from '../../../app/settings/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst isEnabled = settings.get('AutoTranslate_Enabled') && hasPermission('auto-translate');\n\n\t\tif (!isEnabled) {\n\t\t\tcallbacks.remove('renderMessage', 'autotranslate');\n\t\t\treturn;\n\t\t}\n\n\t\timport('../../../app/autotranslate/client').then(({ createAutoTranslateMessageRenderer }) => {\n\t\t\tconst renderMessage = createAutoTranslateMessageRenderer();\n\t\t\tcallbacks.remove('renderMessage', 'autotranslate');\n\t\t\tcallbacks.add('renderMessage', renderMessage, callbacks.priority.HIGH - 3, 'autotranslate');\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { getUserPreference } from '../../../app/utils/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst isEnabled = getUserPreference(Meteor.userId(), 'useEmojis');\n\n\t\tif (!isEnabled) {\n\t\t\tcallbacks.remove('renderMessage', 'emoji');\n\t\t\treturn;\n\t\t}\n\n\t\timport('../../../app/emoji/client').then(({ createEmojiMessageRenderer }) => {\n\t\t\tconst renderMessage = createEmojiMessageRenderer();\n\t\t\tcallbacks.remove('renderMessage', 'emoji');\n\t\t\tcallbacks.add('renderMessage', renderMessage, callbacks.priority.LOW, 'emoji');\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../../app/settings/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst isEnabled = settings.get('HexColorPreview_Enabled') === true;\n\n\t\tif (!isEnabled) {\n\t\t\tcallbacks.remove('renderMessage', 'hexcolor');\n\t\t\treturn;\n\t\t}\n\n\t\timport('../../../app/colors/client').then(({ createHexColorPreviewMessageRenderer }) => {\n\t\t\tconst renderMessage = createHexColorPreviewMessageRenderer();\n\t\t\tcallbacks.remove('renderMessage', 'hexcolor');\n\t\t\tcallbacks.add('renderMessage', renderMessage, callbacks.priority.MEDIUM, 'hexcolor');\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { getUserPreference } from '../../../app/utils/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst highlights: (string | undefined)[] | undefined = getUserPreference(Meteor.userId(), 'highlights');\n\t\tconst isEnabled = highlights?.some((highlight) => highlight?.trim()) ?? false;\n\n\t\tif (!isEnabled) {\n\t\t\tcallbacks.remove('renderMessage', 'highlight-words');\n\t\t\treturn;\n\t\t}\n\n\t\tconst options = {\n\t\t\twordsToHighlight: highlights?.filter((highlight) => highlight?.trim()),\n\t\t};\n\n\t\timport('../../../app/highlight-words').then(({ createHighlightWordsMessageRenderer }) => {\n\t\t\tconst renderMessage = createHighlightWordsMessageRenderer(options);\n\t\t\tcallbacks.remove('renderMessage', 'highlight-words');\n\t\t\tcallbacks.add('renderMessage', renderMessage, callbacks.priority.MEDIUM + 1, 'highlight-words');\n\t\t});\n\t});\n});\n","import './autolinker';\nimport './autotranslate';\nimport './emoji';\nimport './hexcolor';\nimport './highlightWords';\nimport './issuelink';\nimport './katex';\nimport './markdown';\nimport './mentionsMessage';\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../../app/settings/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst isEnabled = settings.get('IssueLinks_Enabled');\n\n\t\tif (!isEnabled) {\n\t\t\tcallbacks.remove('renderMessage', 'issuelink');\n\t\t\treturn;\n\t\t}\n\n\t\tconst options = {\n\t\t\ttemplate: settings.get('IssueLinks_Template'),\n\t\t};\n\n\t\timport('../../../app/issuelinks/client').then(({ createIssueLinksMessageRenderer }) => {\n\t\t\tconst renderMessage = createIssueLinksMessageRenderer(options);\n\t\t\tcallbacks.remove('renderMessage', 'issuelink');\n\t\t\tcallbacks.add('renderMessage', renderMessage, callbacks.priority.MEDIUM, 'issuelink');\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../../app/settings/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst isEnabled = settings.get('Katex_Enabled');\n\n\t\tif (!isEnabled) {\n\t\t\tcallbacks.remove('renderMessage', 'katex');\n\t\t\treturn;\n\t\t}\n\n\t\tconst options = {\n\t\t\tdollarSyntax: settings.get('Katex_Dollar_Syntax'),\n\t\t\tparenthesisSyntax: settings.get('Katex_Parenthesis_Syntax'),\n\t\t};\n\n\t\timport('../../../app/katex/client').then(({ createKatexMessageRendering }) => {\n\t\t\tconst renderMessage = createKatexMessageRendering(options);\n\t\t\tcallbacks.remove('renderMessage', 'katex');\n\t\t\tcallbacks.add('renderMessage', renderMessage, callbacks.priority.HIGH + 1, 'katex');\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../../app/settings/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst options = {\n\t\t\tparser: settings.get('Markdown_Parser'),\n\t\t\tsupportSchemesForLink: settings.get('Markdown_SupportSchemesForLink'),\n\t\t\theaders: settings.get('Markdown_Headers'),\n\t\t\trootUrl: Meteor.absoluteUrl(),\n\t\t\tmarked: {\n\t\t\t\tgfm: settings.get('Markdown_Marked_GFM'),\n\t\t\t\ttables: settings.get('Markdown_Marked_Tables'),\n\t\t\t\tbreaks: settings.get('Markdown_Marked_Breaks'),\n\t\t\t\tpedantic: settings.get('Markdown_Marked_Pedantic'),\n\t\t\t\tsmartLists: settings.get('Markdown_Marked_SmartLists'),\n\t\t\t\tsmartypants: settings.get('Markdown_Marked_Smartypants'),\n\t\t\t},\n\t\t};\n\n\t\timport('../../../app/markdown/client').then(({ createMarkdownMessageRenderer }) => {\n\t\t\tconst renderMessage = createMarkdownMessageRenderer(options);\n\t\t\tcallbacks.remove('renderMessage', 'markdown');\n\t\t\tcallbacks.add('renderMessage', renderMessage, callbacks.priority.HIGH, 'markdown');\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { Users } from '../../../app/models/client';\nimport { settings } from '../../../app/settings/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst uid = Meteor.userId();\n\t\tconst options = {\n\t\t\tme: uid && (Users.findOne(uid, { fields: { username: 1 } }) || {}).username,\n\t\t\tpattern: settings.get('UTF8_User_Names_Validation'),\n\t\t\tuseRealName: settings.get('UI_Use_Real_Name'),\n\t\t};\n\n\t\timport('../../../app/mentions/client').then(({ createMentionsMessageRenderer }) => {\n\t\t\tconst renderMessage = createMentionsMessageRenderer(options);\n\t\t\tcallbacks.remove('renderMessage', 'mentions-message');\n\t\t\tcallbacks.add('renderMessage', renderMessage, callbacks.priority.MEDIUM, 'mentions-message');\n\t\t});\n\t});\n});\n","import './markdown';\n","import { Meteor } from 'meteor/meteor';\n\nimport { settings } from '../../../app/settings/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tconst options = {\n\t\tsupportSchemesForLink: settings.get('Markdown_SupportSchemesForLink'),\n\t};\n\n\timport('../../../app/markdown/client').then(({ createMarkdownNotificationRenderer }) => {\n\t\tconst renderNotification = createMarkdownNotificationRenderer(options);\n\t\tcallbacks.remove('renderNotification', 'filter-markdown');\n\t\tcallbacks.add('renderNotification', renderNotification, callbacks.priority.HIGH, 'filter-markdown');\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { hasPermission } from '../../../app/authorization/client';\nimport { settings } from '../../../app/settings/client';\nimport { callbacks } from '../../../lib/callbacks';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst isEnabled = settings.get('AutoTranslate_Enabled') && hasPermission('auto-translate');\n\n\t\tif (!isEnabled) {\n\t\t\tcallbacks.remove('streamMessage', 'autotranslate-stream');\n\t\t\treturn;\n\t\t}\n\n\t\timport('../../../app/autotranslate/client').then(({ createAutoTranslateMessageStreamHandler }) => {\n\t\t\tconst streamMessage = createAutoTranslateMessageStreamHandler();\n\t\t\tcallbacks.remove('streamMessage', 'autotranslate-stream');\n\t\t\tcallbacks.add('streamMessage', streamMessage, callbacks.priority.HIGH - 3, 'autotranslate-stream');\n\t\t});\n\t});\n});\n","import './autotranslate';\n","import { Meteor } from 'meteor/meteor';\n\nimport { ChatMessage } from '../../app/models/client';\nimport { Notifications } from '../../app/notifications/client';\nimport { IUser } from '../../definition/IUser';\n\nMeteor.startup(() => {\n\tNotifications.onLogged('Users:Deleted', ({ userId }: { userId: IUser['_id'] }) => {\n\t\tChatMessage.remove({\n\t\t\t'u._id': userId,\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { baseURI } from '../lib/baseURI';\n\nMeteor.absoluteUrl.defaultOptions.rootUrl = baseURI;\n","import { Meteor } from 'meteor/meteor';\nimport React from 'react';\nimport { render } from 'react-dom';\n\nimport AppRoot from '../views/root/AppRoot';\n\nconst createContainer = (): Element => {\n\tconst container = document.getElementById('react-root');\n\n\tif (!container) {\n\t\tthrow new Error('could not find the element #react-root on DOM tree');\n\t}\n\n\tdocument.body.insertBefore(container, document.body.firstChild);\n\n\treturn container;\n};\n\nMeteor.startup(() => {\n\tconst container = createContainer();\n\trender(<AppRoot />, container);\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { Notifications } from '../../app/notifications/client';\nimport { APIClient } from '../../app/utils/client';\nimport { IBanner, BannerPlatform } from '../../definition/IBanner';\nimport { Serialized } from '../../definition/Serialized';\nimport * as banners from '../lib/banners';\n\nconst fetchInitialBanners = async (): Promise<void> => {\n\tconst response: Serialized<{\n\t\tbanners: IBanner[];\n\t}> = await APIClient.get('v1/banners', {\n\t\tplatform: BannerPlatform.Web,\n\t});\n\n\tfor (const banner of response.banners) {\n\t\tbanners.open({\n\t\t\t...banner.view,\n\t\t\tviewId: banner.view.viewId || banner._id,\n\t\t});\n\t}\n};\n\nconst handleBanner = async (event: { bannerId: string }): Promise<void> => {\n\tconst response: Serialized<{\n\t\tbanners: IBanner[];\n\t}> = await APIClient.get(`v1/banners/${event.bannerId}`, {\n\t\tplatform: BannerPlatform.Web,\n\t});\n\n\tif (!response.banners.length) {\n\t\treturn banners.closeById(event.bannerId);\n\t}\n\n\tfor (const banner of response.banners) {\n\t\tbanners.open({\n\t\t\t...banner.view,\n\t\t\tviewId: banner.view.viewId || banner._id,\n\t\t});\n\t}\n};\n\nconst watchBanners = (): (() => void) => {\n\tfetchInitialBanners();\n\n\tNotifications.onLogged('banner-changed', handleBanner);\n\n\treturn (): void => {\n\t\tNotifications.unLogged(handleBanner);\n\t\tbanners.clear();\n\t};\n};\n\nMeteor.startup(() => {\n\tlet unwatchBanners: () => void | undefined;\n\n\tTracker.autorun(() => {\n\t\tunwatchBanners?.();\n\n\t\tif (!Meteor.userId()) {\n\t\t\treturn;\n\t\t}\n\n\t\tunwatchBanners = Tracker.nonreactive(watchBanners);\n\t});\n});\n","import { performance } from 'universal-perf-hooks';\n\nimport { callbacks } from '../../lib/callbacks';\nimport { getConfig } from '../lib/utils/getConfig';\n\nif ([getConfig('debug'), getConfig('timed-callbacks')].includes('true')) {\n\tcallbacks.setMetricsTrackers({\n\t\ttrackCallback: ({ hook, id, stack }) => {\n\t\t\tconst start = performance.now();\n\n\t\t\treturn (): void => {\n\t\t\t\tconst end = performance.now();\n\t\t\t\tconsole.log(String(end - start), hook, id, stack?.split('\\n')?.[2]?.match(/\\(.+\\)/)?.[0]);\n\t\t\t};\n\t\t},\n\t\ttrackHook: ({ hook }) => {\n\t\t\tconst start = performance.now();\n\n\t\t\treturn (): void => {\n\t\t\t\tconst end = performance.now();\n\t\t\t\tconsole.log(`${hook}:`, end - start);\n\t\t\t};\n\t\t},\n\t});\n}\n","import { Meteor } from 'meteor/meteor';\nimport { ServiceConfiguration } from 'meteor/service-configuration';\n\nimport { CustomOAuth } from '../../app/custom-oauth/client/custom_oauth_client';\nimport { isOauthCustomConfiguration } from '../../definition/rest/v1/settings';\n\nMeteor.startup(() => {\n\tServiceConfiguration.configurations\n\t\t.find({\n\t\t\tcustom: true,\n\t\t})\n\t\t.observe({\n\t\t\tadded(record) {\n\t\t\t\tif (!isOauthCustomConfiguration(record)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tnew CustomOAuth(record.service, {\n\t\t\t\t\tserverURL: record.serverURL,\n\t\t\t\t\tauthorizePath: record.authorizePath,\n\t\t\t\t\tscope: record.scope,\n\t\t\t\t});\n\t\t\t},\n\t\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { Session } from 'meteor/session';\nimport { Tracker } from 'meteor/tracker';\n\nimport { applyCustomTranslations } from '../lib/utils/applyCustomTranslations';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\t// Re apply translations if tap language was changed\n\t\tSession.get(TAPi18n._loaded_lang_session_key);\n\t\tapplyCustomTranslations();\n\t});\n});\n","import { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { e2e } from '../../app/e2e/client/rocketchat.e2e';\nimport { Subscriptions, Rooms } from '../../app/models/client';\nimport { Notifications } from '../../app/notifications/client';\nimport { settings } from '../../app/settings/client';\nimport { IMessage } from '../../definition/IMessage';\nimport { IRoom } from '../../definition/IRoom';\nimport { ISubscription } from '../../definition/ISubscription';\nimport { onClientBeforeSendMessage } from '../lib/onClientBeforeSendMessage';\nimport { onClientMessageReceived } from '../lib/onClientMessageReceived';\nimport { isLayoutEmbedded } from '../lib/utils/isLayoutEmbedded';\nimport { waitUntilFind } from '../lib/utils/waitUntilFind';\n\nconst handle = async (roomId: IRoom['_id'], keyId: string): Promise<void> => {\n\tconst e2eRoom = await e2e.getInstanceByRoomId(roomId);\n\tif (!e2eRoom) {\n\t\treturn;\n\t}\n\n\te2eRoom.provideKeyToUser(keyId);\n};\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst adminEmbedded = isLayoutEmbedded() && FlowRouter.current().path.startsWith('/admin');\n\n\t\tif (!adminEmbedded && settings.get('E2E_Enable') && window.crypto) {\n\t\t\te2e.startClient();\n\t\t\te2e.enabled.set(true);\n\t\t} else {\n\t\t\te2e.enabled.set(false);\n\t\t\te2e.closeAlert();\n\t\t}\n\t});\n\n\tlet observable: Meteor.LiveQueryHandle | null = null;\n\tlet offClientMessageReceived: undefined | (() => void);\n\tlet offClientBeforeSendMessage: undefined | (() => void);\n\tTracker.autorun(() => {\n\t\tif (!e2e.isReady()) {\n\t\t\toffClientMessageReceived?.();\n\t\t\tNotifications.unUser('e2ekeyRequest', handle);\n\t\t\tobservable?.stop();\n\t\t\toffClientBeforeSendMessage?.();\n\t\t\treturn;\n\t\t}\n\n\t\tNotifications.onUser('e2ekeyRequest', handle);\n\n\t\tobservable = Subscriptions.find().observe({\n\t\t\tchanged: async (doc: ISubscription) => {\n\t\t\t\tif (!doc.encrypted && !doc.E2EKey) {\n\t\t\t\t\te2e.removeInstanceByRoomId(doc.rid);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tconst e2eRoom = await e2e.getInstanceByRoomId(doc.rid);\n\t\t\t\tif (!e2eRoom) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tdoc.encrypted ? e2eRoom.resume() : e2eRoom.pause();\n\n\t\t\t\t// Cover private groups and direct messages\n\t\t\t\tif (!e2eRoom.isSupportedRoomType(doc.t)) {\n\t\t\t\t\te2eRoom.disable();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (doc.E2EKey && e2eRoom.isWaitingKeys()) {\n\t\t\t\t\te2eRoom.keyReceived();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!e2eRoom.isReady()) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\te2eRoom.decryptSubscription();\n\t\t\t},\n\t\t\tadded: async (doc: ISubscription) => {\n\t\t\t\tif (!doc.encrypted && !doc.E2EKey) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\treturn e2e.getInstanceByRoomId(doc.rid);\n\t\t\t},\n\t\t\tremoved: (doc: ISubscription) => {\n\t\t\t\te2e.removeInstanceByRoomId(doc.rid);\n\t\t\t},\n\t\t});\n\n\t\toffClientMessageReceived = onClientMessageReceived.use(async (msg: IMessage) => {\n\t\t\tconst e2eRoom = await e2e.getInstanceByRoomId(msg.rid);\n\t\t\tif (!e2eRoom || !e2eRoom.shouldConvertReceivedMessages()) {\n\t\t\t\treturn msg;\n\t\t\t}\n\t\t\treturn e2e.decryptMessage(msg);\n\t\t});\n\n\t\t// Encrypt messages before sending\n\t\toffClientBeforeSendMessage = onClientBeforeSendMessage.use(async (message: IMessage) => {\n\t\t\tconst e2eRoom = await e2e.getInstanceByRoomId(message.rid);\n\n\t\t\tif (!e2eRoom) {\n\t\t\t\treturn message;\n\t\t\t}\n\n\t\t\tconst subscription = await waitUntilFind(() => Rooms.findOne({ _id: message.rid }));\n\n\t\t\tsubscription.encrypted ? e2eRoom.resume() : e2eRoom.pause();\n\n\t\t\tif (!(await e2eRoom.shouldConvertSentMessages())) {\n\t\t\t\treturn message;\n\t\t\t}\n\n\t\t\t// Should encrypt this message.\n\t\t\tconst msg = await e2eRoom.encrypt(message);\n\n\t\t\tmessage.msg = msg;\n\t\t\tmessage.t = 'e2e';\n\t\t\tmessage.e2e = 'pending';\n\t\t\treturn message;\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { Session } from 'meteor/session';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../app/settings/client';\nimport { dispatchToastMessage } from '../lib/toast';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst user = Meteor.user();\n\t\tif (\n\t\t\tuser?.emails?.[0] &&\n\t\t\tuser.emails[0].verified !== true &&\n\t\t\tsettings.get('Accounts_EmailVerification') === true &&\n\t\t\t!Session.get('Accounts_EmailVerification_Warning')\n\t\t) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'warning',\n\t\t\t\tmessage: TAPi18n.__('You_have_not_verified_your_email'),\n\t\t\t});\n\t\t\tSession.set('Accounts_EmailVerification_Warning', true);\n\t\t}\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { ReactiveVar } from 'meteor/reactive-var';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { Tracker } from 'meteor/tracker';\nimport moment from 'moment';\n\nimport { Users } from '../../app/models/client';\nimport { settings } from '../../app/settings/client';\nimport { isRtl } from '../../app/utils/client';\nimport { filterLanguage } from '../lib/utils/filterLanguage';\n\nconst currentLanguage = new ReactiveVar<string | null>(null);\n\nMeteor.startup(() => {\n\t// eslint-disable-next-line @typescript-eslint/camelcase\n\tTAPi18n.conf.i18n_files_route = Meteor._relativeToSiteRootUrl('/tap-i18n');\n\tcurrentLanguage.set(Meteor._localStorage.getItem('userLanguage'));\n\n\tconst availableLanguages = TAPi18n.getLanguages();\n\n\tconst getBrowserLanguage = (): string => filterLanguage(window.navigator.userLanguage ?? window.navigator.language);\n\n\tconst loadMomentLocale = (language: string): Promise<string> =>\n\t\tnew Promise((resolve, reject) => {\n\t\t\tif (moment.locales().includes(language.toLowerCase())) {\n\t\t\t\tresolve(language);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tMeteor.call('loadLocale', language, (error: unknown, localeSrc: string) => {\n\t\t\t\tif (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tFunction(localeSrc).call({ moment });\n\t\t\t\tresolve(language);\n\t\t\t});\n\t\t});\n\n\tconst applyLanguage = (language: string | undefined = 'en'): void => {\n\t\tlanguage = filterLanguage(language);\n\n\t\tif (!availableLanguages[language]) {\n\t\t\tlanguage = language.split('-').shift();\n\t\t}\n\n\t\tif (!language) {\n\t\t\treturn;\n\t\t}\n\t\tdocument.documentElement.classList[isRtl(language) ? 'add' : 'remove']('rtl');\n\t\tdocument.documentElement.setAttribute('dir', isRtl(language) ? 'rtl' : 'ltr');\n\t\tdocument.documentElement.lang = language;\n\n\t\tTAPi18n.setLanguage(language);\n\t\tloadMomentLocale(language)\n\t\t\t.then((locale) => moment.locale(locale))\n\t\t\t.catch((error) => {\n\t\t\t\tmoment.locale('en');\n\t\t\t\tconsole.error('Error loading moment locale:', error);\n\t\t\t});\n\t};\n\n\tconst setLanguage = (language: string): void => {\n\t\tconst lang = filterLanguage(language);\n\t\tcurrentLanguage.set(lang);\n\t\tMeteor._localStorage.setItem('userLanguage', lang);\n\t};\n\twindow.setLanguage = setLanguage;\n\n\tconst defaultUserLanguage = (): string => settings.get('Language') || getBrowserLanguage() || 'en';\n\twindow.defaultUserLanguage = defaultUserLanguage;\n\n\tTracker.autorun(() => {\n\t\tconst user = Users.findOne(Meteor.userId(), { fields: { language: 1 } });\n\n\t\tsetLanguage(user?.language || defaultUserLanguage());\n\t});\n\n\tTracker.autorun(() => {\n\t\tconst language = currentLanguage.get();\n\t\tif (language) {\n\t\t\tapplyLanguage(language);\n\t\t}\n\t});\n});\n","import './absoluteUrl';\nimport './afterLogoutCleanUp';\nimport './appRoot';\nimport './banners';\nimport './callbacks';\nimport './contextualBar';\nimport './customOAuth';\nimport './customTranslations';\nimport './e2e';\nimport './emailVerification';\nimport './i18n';\nimport './ldap';\nimport './loginViaQuery';\nimport './messageTypes';\nimport './notifications';\nimport './oauth';\nimport './readReceipt';\nimport './renderMessage';\nimport './renderNotification';\nimport './roomObserve';\nimport './rootUrlChange';\nimport './routes';\nimport './setupWizard';\nimport './slashCommands';\nimport './startup';\nimport './streamMessage';\nimport './theme';\nimport './unread';\nimport './UserDeleted';\nimport './userRoles';\nimport './userSetUtcOffset';\nimport './usersObserve';\nimport './userStatusManuallySet';\n","import { Accounts } from 'meteor/accounts-base';\nimport { Meteor } from 'meteor/meteor';\n\n(Meteor as any).loginWithLDAP = function (username: string, password: string, callback?: (err?: any) => void): void {\n\tAccounts.callLoginMethod({\n\t\tmethodArguments: [\n\t\t\t{\n\t\t\t\tldap: true,\n\t\t\t\tusername,\n\t\t\t\tldapPass: password,\n\t\t\t\tldapOptions: {},\n\t\t\t},\n\t\t],\n\t\tuserCallback: callback,\n\t});\n};\n","import { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nMeteor.startup(() => {\n\tTracker.afterFlush(() => {\n\t\tconst resumeToken = FlowRouter.getQueryParam('resumeToken');\n\t\tif (!resumeToken) {\n\t\t\treturn;\n\t\t}\n\n\t\tMeteor.loginWithToken(resumeToken, () => {\n\t\t\tif (FlowRouter.getRouteName()) {\n\t\t\t\tFlowRouter.setQueryParams({ resumeToken: null, userId: null });\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tFlowRouter.go('/home');\n\t\t});\n\t});\n});\n","import { escapeHTML } from '@rocket.chat/string-helpers';\nimport { Meteor } from 'meteor/meteor';\n\nimport { MessageTypes } from '../../app/ui-utils/client';\nimport { t } from '../../app/utils/client';\nimport { IMessage } from '../../definition/IMessage';\n\nMeteor.startup(() => {\n\tMessageTypes.registerType({\n\t\tid: 'room_changed_privacy',\n\t\tsystem: true,\n\t\tmessage: 'room_changed_privacy',\n\t\tdata(message: IMessage) {\n\t\t\treturn {\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\tuser_by: message.u && message.u.username,\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\troom_type: t(message.msg),\n\t\t\t};\n\t\t},\n\t});\n\n\tMessageTypes.registerType({\n\t\tid: 'room_changed_topic',\n\t\tsystem: true,\n\t\tmessage: 'room_changed_topic',\n\t\tdata(message: IMessage) {\n\t\t\treturn {\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\tuser_by: message.u && message.u.username,\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\troom_topic: escapeHTML(message.msg || `(${t('None').toLowerCase()})`),\n\t\t\t};\n\t\t},\n\t});\n\n\tMessageTypes.registerType({\n\t\tid: 'room_changed_avatar',\n\t\tsystem: true,\n\t\tmessage: 'room_changed_avatar',\n\t\tdata(message: IMessage) {\n\t\t\treturn {\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\tuser_by: message.u && message.u.username,\n\t\t\t};\n\t\t},\n\t});\n\n\tMessageTypes.registerType({\n\t\tid: 'room_changed_announcement',\n\t\tsystem: true,\n\t\tmessage: 'room_changed_announcement',\n\t\tdata(message: IMessage) {\n\t\t\treturn {\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\tuser_by: message.u && message.u.username,\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\troom_announcement: escapeHTML(message.msg || `(${t('None').toLowerCase()})`),\n\t\t\t};\n\t\t},\n\t});\n\n\tMessageTypes.registerType({\n\t\tid: 'room_changed_description',\n\t\tsystem: true,\n\t\tmessage: 'room_changed_description',\n\t\tdata(message: IMessage) {\n\t\t\treturn {\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\tuser_by: message.u && message.u.username,\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\troom_description: escapeHTML(message.msg || `(${t('None').toLowerCase()})`),\n\t\t\t};\n\t\t},\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\n// @ts-ignore #ToDo: Add definitions for meteor/oauth\nimport { OAuth } from 'meteor/oauth';\n\n// OAuth._retrieveCredentialSecret is a meteor method modified to also check the global localStorage\n// This was necessary because of the \"Forget User Session on Window Close\" setting.\n// The setting changes Meteor._localStorage to use the browser's session storage instead, but that doesn't happen on the Oauth's popup code.\n\nMeteor.startup(() => {\n\tconst meteorOAuthRetrieveCredentialSecret = OAuth._retrieveCredentialSecret;\n\tOAuth._retrieveCredentialSecret = (credentialToken: string): string | undefined => {\n\t\tlet secret = meteorOAuthRetrieveCredentialSecret.call(OAuth, credentialToken);\n\t\tif (!secret) {\n\t\t\tconst localStorageKey = `${OAuth._storageTokenPrefix}${credentialToken}`;\n\t\t\tsecret = localStorage.getItem(localStorageKey);\n\t\t\tlocalStorage.removeItem(localStorageKey);\n\t\t}\n\n\t\treturn secret;\n\t};\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { settings } from '../../app/settings/client';\nimport { MessageAction, messageArgs } from '../../app/ui-utils/client';\nimport { imperativeModal } from '../lib/imperativeModal';\nimport ReadReceiptsModal from '../views/room/modals/ReadReceiptsModal';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst enabled = settings.get('Message_Read_Receipt_Store_Users');\n\n\t\tif (!enabled) {\n\t\t\treturn MessageAction.removeButton('receipt-detail');\n\t\t}\n\n\t\tMessageAction.addButton({\n\t\t\tid: 'receipt-detail',\n\t\t\ticon: 'info-circled',\n\t\t\tlabel: 'Info',\n\t\t\tcontext: ['starred', 'message', 'message-mobile', 'threads'],\n\t\t\taction() {\n\t\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\t\timperativeModal.open({\n\t\t\t\t\tcomponent: ReadReceiptsModal,\n\t\t\t\t\tprops: { messageId: message._id, onClose: imperativeModal.close },\n\t\t\t\t});\n\t\t\t},\n\t\t\torder: 10,\n\t\t\tgroup: 'menu',\n\t\t});\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport { ChatRoom } from '../../app/models/client';\n\nMeteor.startup(() => {\n\tChatRoom.find().observe({\n\t\tadded(data) {\n\t\t\tSession.set(`roomData${data._id}`, data);\n\t\t},\n\t\tchanged(data) {\n\t\t\tSession.set(`roomData${data._id}`, data);\n\t\t},\n\t\tremoved(data) {\n\t\t\tSession.set(`roomData${data._id}`, undefined);\n\t\t},\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { hasRole } from '../../app/authorization/client';\nimport { Roles } from '../../app/models/client';\nimport { settings } from '../../app/settings/client';\nimport { t } from '../../app/utils/client';\nimport UrlChangeModal from '../components/UrlChangeModal';\nimport { imperativeModal } from '../lib/imperativeModal';\nimport { dispatchToastMessage } from '../lib/toast';\nimport { isSyncReady } from '../lib/userData';\n\nMeteor.startup(() => {\n\tTracker.autorun((c) => {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Roles.ready.get() || !isSyncReady.get()) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (hasRole(Meteor.userId(), 'admin') === false) {\n\t\t\treturn c.stop();\n\t\t}\n\n\t\tconst siteUrl = settings.get('Site_Url');\n\t\tif (!siteUrl) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst currentUrl = location.origin + window.__meteor_runtime_config__.ROOT_URL_PATH_PREFIX;\n\t\tif (window.__meteor_runtime_config__.ROOT_URL.replace(/\\/$/, '') !== currentUrl) {\n\t\t\tconst confirm = (): void => {\n\t\t\t\timperativeModal.close();\n\t\t\t\tMeteor.call('saveSetting', 'Site_Url', currentUrl, () => {\n\t\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Saved') });\n\t\t\t\t});\n\t\t\t};\n\t\t\timperativeModal.open({\n\t\t\t\tcomponent: UrlChangeModal,\n\t\t\t\tprops: {\n\t\t\t\t\tonConfirm: confirm,\n\t\t\t\t\tsiteUrl,\n\t\t\t\t\tcurrentUrl,\n\t\t\t\t\tonClose: imperativeModal.close,\n\t\t\t\t},\n\t\t\t});\n\t\t}\n\n\t\tconst documentDomain = settings.get('Document_Domain');\n\t\tif (documentDomain) {\n\t\t\twindow.document.domain = documentDomain;\n\t\t}\n\n\t\treturn c.stop();\n\t});\n});\n","import { Accounts } from 'meteor/accounts-base';\nimport { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Meteor } from 'meteor/meteor';\nimport { TAPi18n } from 'meteor/rocketchat:tap-i18n';\nimport { Session } from 'meteor/session';\nimport { Tracker } from 'meteor/tracker';\nimport React, { lazy } from 'react';\nimport toastr from 'toastr';\n\nimport { KonchatNotification } from '../../app/ui/client';\nimport { APIClient } from '../../app/utils/client';\nimport { IUser } from '../../definition/IUser';\nimport { appLayout } from '../lib/appLayout';\nimport { createTemplateForComponent } from '../lib/portals/createTemplateForComponent';\nimport { dispatchToastMessage } from '../lib/toast';\nimport { handleError } from '../lib/utils/handleError';\n\nconst InvitePage = lazy(() => import('../views/invite/InvitePage'));\nconst SecretURLPage = lazy(() => import('../views/invite/SecretURLPage'));\nconst CMSPage = lazy(() => import('../views/root/CMSPage'));\nconst ResetPasswordPage = lazy(() => import('../views/login/ResetPassword/ResetPassword'));\nconst SetupWizardRoute = lazy(() => import('../views/setupWizard/SetupWizardRoute'));\nconst MailerUnsubscriptionPage = lazy(() => import('../views/mailer/MailerUnsubscriptionPage'));\nconst NotFoundPage = lazy(() => import('../views/notFound/NotFoundPage'));\nconst MeetPage = lazy(() => import('../views/meet/MeetPage'));\n\nFlowRouter.wait();\n\nFlowRouter.route('/', {\n\tname: 'index',\n\taction() {\n\t\tappLayout.renderMainLayout({ center: 'loading' });\n\t\tif (!Meteor.userId()) {\n\t\t\treturn FlowRouter.go('home');\n\t\t}\n\n\t\tTracker.autorun((c) => {\n\t\t\tif (FlowRouter.subsReady() === true) {\n\t\t\t\tMeteor.defer(() => {\n\t\t\t\t\tconst user = Meteor.user() as IUser | null;\n\t\t\t\t\tif (user?.defaultRoom) {\n\t\t\t\t\t\tconst room = user.defaultRoom.split('/');\n\t\t\t\t\t\tFlowRouter.go(room[0], { name: room[1] }, FlowRouter.current().queryParams);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tFlowRouter.go('home');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tc.stop();\n\t\t\t}\n\t\t});\n\t},\n});\n\nFlowRouter.route('/login', {\n\tname: 'login',\n\n\taction() {\n\t\tFlowRouter.go('home');\n\t},\n});\n\nFlowRouter.route('/meet/:rid', {\n\tname: 'meet',\n\n\tasync action(_params, queryParams) {\n\t\tif (queryParams?.token !== undefined) {\n\t\t\t// visitor login\n\t\t\tconst visitor = await APIClient.v1.get(`livechat/visitor/${queryParams?.token}`);\n\t\t\tif (visitor?.visitor) {\n\t\t\t\tappLayout.render(<MeetPage />);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\ttoastr.error(TAPi18n.__('Visitor_does_not_exist'));\n\t\t\treturn;\n\t\t}\n\n\t\tif (!Meteor.userId()) {\n\t\t\tFlowRouter.go('home');\n\t\t\treturn;\n\t\t}\n\n\t\tappLayout.render(<MeetPage />);\n\t},\n});\n\nFlowRouter.route('/home', {\n\tname: 'home',\n\n\taction(_params, queryParams) {\n\t\tKonchatNotification.getDesktopPermission();\n\t\tif (queryParams?.saml_idp_credentialToken !== undefined) {\n\t\t\tconst token = queryParams.saml_idp_credentialToken;\n\t\t\tFlowRouter.setQueryParams({\n\t\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\t\tsaml_idp_credentialToken: null,\n\t\t\t});\n\t\t\t(Meteor as any).loginWithSamlToken(token, (error?: any) => {\n\t\t\t\tif (error) {\n\t\t\t\t\tif (error.reason) {\n\t\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error.reason });\n\t\t\t\t\t} else {\n\t\t\t\t\t\thandleError(error);\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tappLayout.renderMainLayout({ center: 'home' });\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tappLayout.renderMainLayout({ center: 'home' });\n\t},\n});\n\nFlowRouter.route('/directory/:tab?', {\n\tname: 'directory',\n\taction: () => {\n\t\tconst DirectoryPage = createTemplateForComponent('DirectoryPage', () => import('../views/directory/DirectoryPage'), {\n\t\t\tattachment: 'at-parent',\n\t\t});\n\t\tappLayout.renderMainLayout({ center: DirectoryPage });\n\t},\n});\n\nFlowRouter.route('/omnichannel-directory/:page?/:bar?/:id?/:tab?/:context?', {\n\tname: 'omnichannel-directory',\n\taction: () => {\n\t\tconst OmnichannelDirectoryPage = createTemplateForComponent(\n\t\t\t'OmnichannelDirectoryPage',\n\t\t\t() => import('../views/omnichannel/directory/OmnichannelDirectoryPage'),\n\t\t\t{ attachment: 'at-parent' },\n\t\t);\n\t\tappLayout.renderMainLayout({ center: OmnichannelDirectoryPage });\n\t},\n});\n\nFlowRouter.route('/livechat-queue', {\n\tname: 'livechat-queue',\n\taction: () => {\n\t\tconst OmnichannelQueueList = createTemplateForComponent('QueueList', () => import('../views/omnichannel/queueList'), {\n\t\t\tattachment: 'at-parent',\n\t\t});\n\t\tappLayout.renderMainLayout({ center: OmnichannelQueueList });\n\t},\n});\n\nFlowRouter.route('/account/:group?', {\n\tname: 'account',\n\taction: () => {\n\t\tconst AccountRoute = createTemplateForComponent('AccountRoute', () => import('../views/account/AccountRoute'), {\n\t\t\tattachment: 'at-parent',\n\t\t});\n\t\tappLayout.renderMainLayout({ center: AccountRoute });\n\t},\n});\n\nFlowRouter.route('/terms-of-service', {\n\tname: 'terms-of-service',\n\taction: () => {\n\t\tappLayout.render(<CMSPage page='Layout_Terms_of_Service' />);\n\t},\n});\n\nFlowRouter.route('/privacy-policy', {\n\tname: 'privacy-policy',\n\taction: () => {\n\t\tappLayout.render(<CMSPage page='Layout_Privacy_Policy' />);\n\t},\n});\n\nFlowRouter.route('/legal-notice', {\n\tname: 'legal-notice',\n\taction: () => {\n\t\tappLayout.render(<CMSPage page='Layout_Legal_Notice' />);\n\t},\n});\n\nFlowRouter.route('/room-not-found/:type/:name', {\n\tname: 'room-not-found',\n\taction: ({ type, name } = {}) => {\n\t\tSession.set('roomNotFound', { type, name });\n\t\tappLayout.renderMainLayout({ center: 'roomNotFound' });\n\t},\n});\n\nFlowRouter.route('/register/:hash', {\n\tname: 'register-secret-url',\n\taction: () => {\n\t\tappLayout.render(<SecretURLPage />);\n\t},\n});\n\nFlowRouter.route('/invite/:hash', {\n\tname: 'invite',\n\taction: () => {\n\t\tappLayout.render(<InvitePage />);\n\t},\n});\n\nFlowRouter.route('/setup-wizard/:step?', {\n\tname: 'setup-wizard',\n\taction: () => {\n\t\tappLayout.render(<SetupWizardRoute />);\n\t},\n});\n\nFlowRouter.route('/mailer/unsubscribe/:_id/:createdAt', {\n\tname: 'mailer-unsubscribe',\n\taction: () => {\n\t\tappLayout.render(<MailerUnsubscriptionPage />);\n\t},\n});\n\nFlowRouter.route('/login-token/:token', {\n\tname: 'tokenLogin',\n\taction(params) {\n\t\tAccounts.callLoginMethod({\n\t\t\tmethodArguments: [\n\t\t\t\t{\n\t\t\t\t\tloginToken: params?.token,\n\t\t\t\t},\n\t\t\t],\n\t\t\tuserCallback(error) {\n\t\t\t\tconsole.error(error);\n\t\t\t\tFlowRouter.go('/');\n\t\t\t},\n\t\t});\n\t},\n});\n\nFlowRouter.route('/reset-password/:token', {\n\tname: 'resetPassword',\n\taction() {\n\t\tappLayout.render(<ResetPasswordPage />);\n\t},\n});\n\nFlowRouter.route('/snippet/:snippetId/:snippetName', {\n\tname: 'snippetView',\n\taction() {\n\t\tappLayout.renderMainLayout({ center: 'snippetPage' });\n\t},\n});\n\nFlowRouter.route('/oauth/authorize', {\n\tname: 'oauth/authorize',\n\taction(_params, queryParams) {\n\t\tappLayout.renderMainLayout({\n\t\t\tcenter: 'authorize',\n\t\t\tmodal: true,\n\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\tclient_id: queryParams?.client_id,\n\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\tredirect_uri: queryParams?.redirect_uri,\n\t\t\t// eslint-disable-next-line @typescript-eslint/camelcase\n\t\t\tresponse_type: queryParams?.response_type,\n\t\t\tstate: queryParams?.state,\n\t\t});\n\t},\n});\n\nFlowRouter.route('/oauth/error/:error', {\n\tname: 'oauth/error',\n\taction(params) {\n\t\tappLayout.renderMainLayout({\n\t\t\tcenter: 'oauth404',\n\t\t\tmodal: true,\n\t\t\terror: params?.error,\n\t\t});\n\t},\n});\n\nFlowRouter.notFound = {\n\taction: (): void => {\n\t\tappLayout.render(<NotFoundPage />);\n\t},\n};\n\nMeteor.startup(() => {\n\tFlowRouter.initialize();\n});\n","import { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { hasRole } from '../../app/authorization/client';\nimport { settings } from '../../app/settings/client';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst userId = Meteor.userId();\n\t\tconst setupWizardState = settings.get('Show_Setup_Wizard');\n\n\t\tconst mustRedirect =\n\t\t\t(!userId && setupWizardState === 'pending') || (!!userId && !!hasRole(userId, 'admin') && setupWizardState === 'in_progress');\n\n\t\tif (mustRedirect) {\n\t\t\tFlowRouter.go('setup-wizard');\n\t\t}\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { slashCommands, APIClient } from '../../app/utils/client';\nimport { IUser } from '../../definition/IUser';\n\nlet oldUserId: IUser['_id'] | null = null;\n\nTracker.autorun(() => {\n\tconst newUserId = Meteor.userId();\n\tif (oldUserId === null && newUserId) {\n\t\tAPIClient.v1.get('commands.list').then((result) => {\n\t\t\tresult.commands.forEach((command: { command: string }) => {\n\t\t\t\tslashCommands.commands[command.command] = command;\n\t\t\t});\n\t\t});\n\t}\n\n\toldUserId = Meteor.userId();\n});\n","import { Accounts } from 'meteor/accounts-base';\nimport { UserPresence } from 'meteor/konecty:user-presence';\nimport { Meteor } from 'meteor/meteor';\nimport { TimeSync } from 'meteor/mizzao:timesync';\nimport { Session } from 'meteor/session';\nimport { Tracker } from 'meteor/tracker';\nimport toastr from 'toastr';\n\nimport { hasPermission } from '../../app/authorization/client';\nimport { register } from '../../app/markdown/lib/hljs';\nimport { settings } from '../../app/settings/client';\nimport { getUserPreference, t } from '../../app/utils/client';\nimport 'highlight.js/styles/github.css';\nimport { UserStatus } from '../../definition/UserStatus';\nimport * as banners from '../lib/banners';\nimport { synchronizeUserData, removeLocalUserData } from '../lib/userData';\nimport { fireGlobalEvent } from '../lib/utils/fireGlobalEvent';\n\nif (window.DISABLE_ANIMATION) {\n\ttoastr.options.timeOut = 1;\n\ttoastr.options.showDuration = 0;\n\ttoastr.options.hideDuration = 0;\n\ttoastr.options.extendedTimeOut = 0;\n}\n\nMeteor.startup(() => {\n\tfireGlobalEvent('startup', true);\n\n\tAccounts.onLogout(() => Session.set('openedRoom', null));\n\n\tTimeSync.loggingEnabled = false;\n\n\tSession.setDefault('AvatarRandom', 0);\n\n\twindow.lastMessageWindow = {};\n\twindow.lastMessageWindowHistory = {};\n\n\tlet status: UserStatus | undefined = undefined;\n\tTracker.autorun(async () => {\n\t\tconst uid = Meteor.userId();\n\t\tif (!uid) {\n\t\t\tremoveLocalUserData();\n\t\t\treturn;\n\t\t}\n\t\tif (!Meteor.status().connected) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst user = await synchronizeUserData(uid);\n\n\t\tif (!user) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (getUserPreference(user, 'enableAutoAway')) {\n\t\t\tconst idleTimeLimit = getUserPreference(user, 'idleTimeLimit') || 300;\n\t\t\tUserPresence.awayTime = idleTimeLimit * 1000;\n\t\t} else {\n\t\t\tdelete UserPresence.awayTime;\n\t\t\tUserPresence.stopTimer();\n\t\t}\n\n\t\tUserPresence.start();\n\n\t\tif (user.status !== status) {\n\t\t\tstatus = user.status;\n\t\t\tfireGlobalEvent('status-changed', status);\n\t\t}\n\t});\n\n\tTracker.autorun(async (c) => {\n\t\tconst uid = Meteor.userId();\n\t\tif (!uid) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!hasPermission('manage-cloud')) {\n\t\t\treturn;\n\t\t}\n\n\t\tMeteor.call('cloud:checkRegisterStatus', (err: unknown, data: { connectToCloud?: boolean; workspaceRegistered?: boolean }) => {\n\t\t\tif (err) {\n\t\t\t\tconsole.log(err);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tc.stop();\n\t\t\tconst { connectToCloud = false, workspaceRegistered = false } = data;\n\t\t\tif (connectToCloud === true && workspaceRegistered !== true) {\n\t\t\t\tbanners.open({\n\t\t\t\t\tid: 'cloud-registration',\n\t\t\t\t\ttitle: t('Cloud_registration_pending_title'),\n\t\t\t\t\thtml: t('Cloud_registration_pending_html'),\n\t\t\t\t\tmodifiers: ['large', 'danger'],\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t});\n});\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst code = settings.get('Message_Code_highlight') as string | undefined;\n\t\tcode?.split(',').forEach((language: string) => {\n\t\t\tlanguage.trim() && register(language.trim());\n\t\t});\n\t});\n});\n","import createLess from 'less/browser';\nimport { Meteor } from 'meteor/meteor';\nimport _ from 'underscore';\n\nimport { settings } from '../../app/settings/client';\nimport { ISetting, ISettingColor } from '../../definition/ISetting';\n\nconst variables = new Map();\nconst lessExpressions = new Map([\n\t['default-action-color', 'darken(@secondary-background-color, 15%)'],\n\t['default-action-contrast', 'contrast(@default-action-color, #444444)'],\n\t['primary-background-contrast', 'contrast(@primary-background-color, #444444)'],\n\t['primary-action-contrast', 'contrast(@primary-action-color, #444444)'],\n\t['secondary-background-contrast', 'contrast(@secondary-background-color, #444444)'],\n\t['secondary-action-contrast', 'contrast(@secondary-action-color, #444444)'],\n\t['selection-background', 'lighten(@selection-color, 30%)'],\n\t['success-background', 'lighten(@success-color, 45%)'],\n\t['success-border', 'lighten(@success-color, 30%)'],\n\t['error-background', 'lighten(@error-color, 45%)'],\n\t['error-border', 'lighten(@error-color, 30%)'],\n\t['error-contrast', 'contrast(@error-color)'],\n\t['pending-background', 'lighten(@pending-color, 45%)'],\n\t['pending-border', 'lighten(@pending-color, 30%)'],\n\t['transparent-darkest', 'rgba(17, 12, 12, 0.5)'],\n\t['transparent-darker', 'rgba(0, 0, 0, 0.15)'],\n\t['transparent-dark', 'rgba(15, 34, 0, 0.05)'],\n\t['transparent-light', 'rgba(255, 255, 255, 0.1)'],\n\t['transparent-lighter', 'rgba(255, 255, 255, 0.3)'],\n\t['transparent-lightest', 'rgba(255, 255, 255, 0.6)'],\n]);\n\nconst less = createLess(window, {});\n\nconst compileLess = async (): Promise<string> => {\n\tif (lessExpressions.size === 0) {\n\t\treturn '';\n\t}\n\n\tconst lessCode = [\n\t\t...Array.from(variables.entries(), ([name, value]) => `@${name}: ${value};`),\n\t\t...Array.from(lessExpressions.entries(), ([name, expression]) => `@${name}: ${expression};`),\n\t\t':root {',\n\t\t...Array.from(lessExpressions.entries(), ([name]) => `--${name}: @${name};`),\n\t\t'}',\n\t].join('\\n');\n\n\ttry {\n\t\tconst { css } = await less.render(lessCode);\n\t\treturn css;\n\t} catch (error) {\n\t\tconsole.error(error);\n\t\treturn '';\n\t}\n};\n\nlet cssVariablesElement: HTMLStyleElement | null = null;\n\nconst updateCssVariables = _.debounce(async () => {\n\tif (!cssVariablesElement) {\n\t\tcssVariablesElement = document.querySelector('#css-variables');\n\t}\n\n\tif (!cssVariablesElement) {\n\t\treturn;\n\t}\n\n\tcssVariablesElement.innerHTML = [\n\t\t':root {',\n\t\t...Array.from(variables.entries(), ([name, value]) => `--${name}: ${value};`),\n\t\t'}',\n\t\tawait compileLess(),\n\t].join('\\n');\n}, 50);\n\nconst handleThemeColorChanged = ({ _id, value, editor }: ISettingColor): void => {\n\tif (typeof value !== 'string') {\n\t\treturn;\n\t}\n\ttry {\n\t\tconst name = /^theme-color-(.*)$/.exec(_id)?.[1];\n\n\t\tif (!name) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst legacy = name.slice(0, 3) !== 'rc-';\n\n\t\tif (editor === 'color') {\n\t\t\tvariables.set(name, value);\n\t\t\treturn;\n\t\t}\n\n\t\tif (legacy) {\n\t\t\tlessExpressions.set(name, value);\n\t\t\treturn;\n\t\t}\n\n\t\tvariables.set(name, `var(--${value})`);\n\t} finally {\n\t\tupdateCssVariables();\n\t}\n};\n\nconst handleThemeFontChanged = ({ _id, value }: ISetting & { value: string }): void => {\n\ttry {\n\t\tconst name = /^theme-font-(.*)$/.exec(_id)?.[1];\n\t\tif (!name) {\n\t\t\treturn;\n\t\t}\n\n\t\tvariables.set(name, value);\n\t} finally {\n\t\tupdateCssVariables();\n\t}\n};\n\nMeteor.startup(() => {\n\tsettings.collection.find({ _id: /^theme-color-/i }, { fields: { value: 1, editor: 1 } }).observe({\n\t\tadded: handleThemeColorChanged,\n\t\tchanged: handleThemeColorChanged,\n\t});\n\n\tsettings.collection.find({ _id: /^theme-font-/i }, { fields: { value: 1 } }).observe({\n\t\tadded: handleThemeFontChanged,\n\t\tchanged: handleThemeFontChanged,\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\nimport { Tracker } from 'meteor/tracker';\n\nimport { Favico } from '../../app/favico/client';\nimport { ChatSubscription, ChatRoom } from '../../app/models/client';\nimport { settings } from '../../app/settings/client';\nimport { menu } from '../../app/ui-utils/client';\nimport { getUserPreference } from '../../app/utils/client';\nimport { ISubscription } from '../../definition/ISubscription';\nimport { fireGlobalEvent } from '../lib/utils/fireGlobalEvent';\n\nconst fetchSubscriptions = (): ISubscription[] =>\n\tChatSubscription.find(\n\t\t{\n\t\t\topen: true,\n\t\t\thideUnreadStatus: { $ne: true },\n\t\t\tarchived: { $ne: true },\n\t\t},\n\t\t{\n\t\t\tfields: {\n\t\t\t\tunread: 1,\n\t\t\t\talert: 1,\n\t\t\t\trid: 1,\n\t\t\t\tt: 1,\n\t\t\t\tname: 1,\n\t\t\t\tls: 1,\n\t\t\t\tunreadAlert: 1,\n\t\t\t\tfname: 1,\n\t\t\t\tprid: 1,\n\t\t\t},\n\t\t},\n\t).fetch();\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst userUnreadAlert = getUserPreference(Meteor.userId(), 'unreadAlert');\n\n\t\tlet unreadAlert: false | '•' = false;\n\n\t\tconst unreadCount = fetchSubscriptions().reduce(\n\t\t\t(ret, subscription) =>\n\t\t\t\tTracker.nonreactive(() => {\n\t\t\t\t\tconst room = ChatRoom.findOne({ _id: subscription.rid }, { fields: { usersCount: 1 } });\n\t\t\t\t\tfireGlobalEvent('unread-changed-by-subscription', {\n\t\t\t\t\t\t...subscription,\n\t\t\t\t\t\tusersCount: room?.usersCount,\n\t\t\t\t\t});\n\n\t\t\t\t\tif (subscription.alert || subscription.unread > 0) {\n\t\t\t\t\t\t// Increment the total unread count.\n\t\t\t\t\t\tif (subscription.alert === true && subscription.unreadAlert !== 'nothing') {\n\t\t\t\t\t\t\tif (subscription.unreadAlert === 'all' || userUnreadAlert !== false) {\n\t\t\t\t\t\t\t\tunreadAlert = '•';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn ret + subscription.unread;\n\t\t\t\t\t}\n\t\t\t\t\treturn ret;\n\t\t\t\t}),\n\t\t\t0,\n\t\t);\n\n\t\tmenu.updateUnreadBars();\n\n\t\tif (unreadCount > 0) {\n\t\t\tif (unreadCount > 999) {\n\t\t\t\tSession.set('unread', '999+');\n\t\t\t} else {\n\t\t\t\tSession.set('unread', unreadCount);\n\t\t\t}\n\t\t} else if (unreadAlert !== false) {\n\t\t\tSession.set('unread', unreadAlert);\n\t\t} else {\n\t\t\tSession.set('unread', '');\n\t\t}\n\t});\n});\n\nMeteor.startup(() => {\n\tconst favicon = new (Favico as any)({\n\t\tposition: 'up',\n\t\tanimation: 'none',\n\t});\n\n\twindow.favico = favicon;\n\n\tTracker.autorun(() => {\n\t\tconst siteName = settings.get('Site_Name') ?? '';\n\n\t\tconst unread = Session.get('unread');\n\t\tfireGlobalEvent('unread-changed', unread);\n\n\t\tif (favicon) {\n\t\t\tfavicon.badge(unread, {\n\t\t\t\tbgColor: typeof unread !== 'number' ? '#3d8a3a' : '#ac1b1b',\n\t\t\t});\n\t\t}\n\n\t\tdocument.title = unread === '' ? siteName : `(${unread}) ${siteName}`;\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\n\nimport { UserRoles, RoomRoles, ChatMessage } from '../../app/models/client';\nimport { Notifications } from '../../app/notifications/client';\nimport { IRocketChatRecord } from '../../definition/IRocketChatRecord';\nimport { IRole, IUser } from '../../definition/IUser';\nimport { handleError } from '../lib/utils/handleError';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tif (Meteor.userId()) {\n\t\t\tMeteor.call('getUserRoles', (error: Error, results: IRocketChatRecord[]) => {\n\t\t\t\tif (error) {\n\t\t\t\t\treturn handleError(error);\n\t\t\t\t}\n\n\t\t\t\tfor (const record of results) {\n\t\t\t\t\tUserRoles.upsert({ _id: record._id }, record);\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tNotifications.onLogged(\n\t\t\t\t'roles-change',\n\t\t\t\t(role: { type: 'added' | 'removed' | 'changed'; _id: IRole['_id']; u: Partial<IUser>; scope: IRole['scope'] }) => {\n\t\t\t\t\tif (role.type === 'added') {\n\t\t\t\t\t\tif (role.scope) {\n\t\t\t\t\t\t\tRoomRoles.upsert({ 'rid': role.scope, 'u._id': role.u._id }, { $setOnInsert: { u: role.u }, $addToSet: { roles: role._id } });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tUserRoles.upsert({ _id: role.u._id }, { $addToSet: { roles: role._id }, $set: { username: role.u.username } });\n\t\t\t\t\t\t\tChatMessage.update({ 'u._id': role.u._id }, { $addToSet: { roles: role._id } }, { multi: true });\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (role.type === 'removed') {\n\t\t\t\t\t\tif (role.scope) {\n\t\t\t\t\t\t\tRoomRoles.update({ 'rid': role.scope, 'u._id': role.u._id }, { $pull: { roles: role._id } });\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tUserRoles.update({ _id: role.u._id }, { $pull: { roles: role._id } });\n\t\t\t\t\t\t\tChatMessage.update({ 'u._id': role.u._id }, { $pull: { roles: role._id } }, { multi: true });\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (role.type === 'changed') {\n\t\t\t\t\t\tChatMessage.update({ roles: role._id }, { $inc: { rerender: 1 } }, { multi: true });\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t);\n\t\t}\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Tracker } from 'meteor/tracker';\nimport moment from 'moment';\n\nimport { Users } from '../../app/models/client';\n\nMeteor.startup(() => {\n\tTracker.autorun(() => {\n\t\tconst user = Users.findOne({ _id: Meteor.userId() }, { fields: { statusConnection: 1, utcOffset: 1 } });\n\t\tif (user && user.statusConnection === 'online') {\n\t\t\tconst utcOffset = moment().utcOffset() / 60;\n\t\t\tif (user.utcOffset !== utcOffset) {\n\t\t\t\tMeteor.call('userSetUtcOffset', utcOffset);\n\t\t\t}\n\t\t}\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { UserStatus } from '../../definition/UserStatus';\nimport { callbacks } from '../../lib/callbacks';\nimport { fireGlobalEvent } from '../lib/utils/fireGlobalEvent';\n\n/* fire user state change globally, to listen on desktop electron client */\nMeteor.startup(() => {\n\tcallbacks.add('userStatusManuallySet', (status: UserStatus) => {\n\t\tfireGlobalEvent('user-status-manually-set', status);\n\t});\n});\n","import { Meteor } from 'meteor/meteor';\nimport { Session } from 'meteor/session';\n\nimport { RoomManager } from '../../app/ui-utils/client';\nimport { IUser } from '../../definition/IUser';\n\nMeteor.startup(() => {\n\tMeteor.users\n\t\t.find(\n\t\t\t{},\n\t\t\t{\n\t\t\t\tfields: {\n\t\t\t\t\tname: 1,\n\t\t\t\t\tusername: 1,\n\t\t\t\t\tstatus: 1,\n\t\t\t\t\tutcOffset: 1,\n\t\t\t\t\tstatusText: 1,\n\t\t\t\t},\n\t\t\t},\n\t\t)\n\t\t.observe({\n\t\t\tadded(user: IUser) {\n\t\t\t\tSession.set(`user_${user.username}_status`, user.status);\n\t\t\t\tSession.set(`user_${user.username}_status_text`, user.statusText);\n\t\t\t\tRoomManager.updateUserStatus(user, user.status, user.utcOffset);\n\t\t\t},\n\t\t\tchanged(user: IUser) {\n\t\t\t\tSession.set(`user_${user.username}_status`, user.status);\n\t\t\t\tif (user.statusText !== undefined) {\n\t\t\t\t\tSession.set(`user_${user.username}_status_text`, user.statusText);\n\t\t\t\t}\n\t\t\t\tRoomManager.updateUserStatus(user, user.status, user.utcOffset);\n\t\t\t},\n\t\t\tremoved(user) {\n\t\t\t\tSession.set(`user_${user.username}_status`, null);\n\t\t\t\tSession.set(`user_${user.username}_status_text`, null);\n\t\t\t\tRoomManager.updateUserStatus(user, 'offline', null);\n\t\t\t},\n\t\t});\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { ChatMessage } from '../../app/models/client';\nimport { canDeleteMessage } from '../lib/utils/canDeleteMessage';\n\nMeteor.methods({\n\tdeleteMessage(msg) {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn false;\n\t\t}\n\n\t\t// We're now only passed in the `_id` property to lower the amount of data sent to the server\n\t\tconst message = ChatMessage.findOne({ _id: msg._id });\n\n\t\tif (\n\t\t\t!canDeleteMessage({\n\t\t\t\trid: message.rid,\n\t\t\t\tts: message.ts,\n\t\t\t\tuid: message.u._id,\n\t\t\t})\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\tChatMessage.remove({\n\t\t\t'_id': message._id,\n\t\t\t'u._id': Meteor.userId(),\n\t\t});\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { ChatSubscription } from '../../app/models/client';\n\nMeteor.methods({\n\thideRoom(rid) {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tChatSubscription.update(\n\t\t\t{\n\t\t\t\trid,\n\t\t\t\t'u._id': Meteor.userId(),\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\talert: false,\n\t\t\t\t\topen: false,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { ChatSubscription } from '../../app/models/client';\n\nMeteor.methods({\n\topenRoom(rid) {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tChatSubscription.update(\n\t\t\t{\n\t\t\t\trid,\n\t\t\t\t'u._id': Meteor.userId(),\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\topen: true,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\n\nMeteor.methods({\n\tsetUserActiveStatus(userId, active) {\n\t\tMeteor.users.update(userId, { $set: { active } });\n\t\treturn true;\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\n\nimport { ChatSubscription } from '../../app/models/client';\n\nMeteor.methods({\n\ttoggleFavorite(rid, f) {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tChatSubscription.update(\n\t\t\t{\n\t\t\t\trid,\n\t\t\t\t'u._id': Meteor.userId(),\n\t\t\t},\n\t\t\t{\n\t\t\t\t$set: {\n\t\t\t\t\tf,\n\t\t\t\t},\n\t\t\t},\n\t\t);\n\t},\n});\n","import { Meteor } from 'meteor/meteor';\nimport { TimeSync } from 'meteor/mizzao:timesync';\nimport { Tracker } from 'meteor/tracker';\nimport moment from 'moment';\nimport _ from 'underscore';\n\nimport { hasAtLeastOnePermission } from '../../app/authorization/client';\nimport { ChatMessage } from '../../app/models/client';\nimport { settings } from '../../app/settings/client';\nimport { t } from '../../app/utils/client';\nimport { callbacks } from '../../lib/callbacks';\nimport { dispatchToastMessage } from '../lib/toast';\n\nMeteor.methods({\n\tupdateMessage(message) {\n\t\tif (!Meteor.userId()) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst originalMessage = ChatMessage.findOne(message._id);\n\n\t\tconst hasPermission = hasAtLeastOnePermission('edit-message', message.rid);\n\t\tconst editAllowed = settings.get('Message_AllowEditing');\n\t\tlet editOwn = false;\n\t\tif (originalMessage.msg === message.msg) {\n\t\t\treturn;\n\t\t}\n\t\tif (originalMessage && originalMessage.u && originalMessage.u._id) {\n\t\t\teditOwn = originalMessage.u._id === Meteor.userId();\n\t\t}\n\n\t\tconst me = Meteor.users.findOne(Meteor.userId());\n\n\t\tif (!(hasPermission || (editAllowed && editOwn))) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: t('error-action-not-allowed', { action: t('Message_editing') }),\n\t\t\t});\n\t\t\treturn false;\n\t\t}\n\n\t\tconst blockEditInMinutes = settings.get('Message_AllowEditing_BlockEditInMinutes');\n\t\tif (_.isNumber(blockEditInMinutes) && blockEditInMinutes !== 0) {\n\t\t\tif (originalMessage.ts) {\n\t\t\t\tconst msgTs = moment(originalMessage.ts);\n\t\t\t\tif (msgTs) {\n\t\t\t\t\tconst currentTsDiff = moment().diff(msgTs, 'minutes');\n\t\t\t\t\tif (currentTsDiff > blockEditInMinutes) {\n\t\t\t\t\t\tdispatchToastMessage({ type: 'error', message: t('error-message-editing-blocked') });\n\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tTracker.nonreactive(() => {\n\t\t\tif (isNaN(TimeSync.serverOffset())) {\n\t\t\t\tmessage.editedAt = new Date();\n\t\t\t} else {\n\t\t\t\tmessage.editedAt = new Date(Date.now() + TimeSync.serverOffset());\n\t\t\t}\n\n\t\t\tmessage.editedBy = {\n\t\t\t\t_id: Meteor.userId(),\n\t\t\t\tusername: me.username,\n\t\t\t};\n\n\t\t\tmessage = callbacks.run('beforeSaveMessage', message);\n\t\t\tconst messageObject = {\n\t\t\t\teditedAt: message.editedAt,\n\t\t\t\teditedBy: message.editedBy,\n\t\t\t\tmsg: message.msg,\n\t\t\t};\n\n\t\t\tif (originalMessage.attachments) {\n\t\t\t\tif (originalMessage.attachments[0].description !== undefined) {\n\t\t\t\t\tdelete messageObject.msg;\n\t\t\t\t}\n\t\t\t}\n\t\t\tChatMessage.update(\n\t\t\t\t{\n\t\t\t\t\t'_id': message._id,\n\t\t\t\t\t'u._id': Meteor.userId(),\n\t\t\t\t},\n\t\t\t\t{ $set: messageObject },\n\t\t\t);\n\t\t});\n\t},\n});\n","(function (arr): void {\n\tarr.forEach((item) => {\n\t\tif (item.hasOwnProperty('remove')) {\n\t\t\treturn;\n\t\t}\n\n\t\tObject.defineProperty(item, 'remove', {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\twritable: true,\n\t\t\tvalue: function remove() {\n\t\t\t\tthis.parentNode.removeChild(this);\n\t\t\t},\n\t\t});\n\t});\n})([Element.prototype, CharacterData.prototype, DocumentType.prototype]);\n","import _ from 'underscore';\n\ntype Variables = {\n\t[name: string]: (variables: Variables) => string;\n};\n\nconst findDeclarations = (code: string): [string, Variables[keyof Variables]][] =>\n\t(code.match(/(--[^:; ]+:..*?;)/g) ?? []).map((declaration) => {\n\t\tconst matches = /(.*?):\\s*(.*?)\\s*;/.exec(declaration);\n\n\t\tif (matches === null) {\n\t\t\tthrow new Error();\n\t\t}\n\n\t\tconst [, name, value] = matches;\n\t\treturn [\n\t\t\tname,\n\t\t\tvalue.indexOf('var(') >= 0\n\t\t\t\t? (variables: Variables): string => value.replace(/var\\((--.*?)\\)/gm, (_, name) => variables[name]?.call(null, variables))\n\t\t\t\t: (): string => value,\n\t\t];\n\t});\n\nconst replaceReferences = (code: string, variables: Variables): string =>\n\tcode.replace(/var\\((--.*?)\\)/gm, (_, name) => variables[name]?.call(null, variables));\n\nlet cssVariablesElement: HTMLElement;\nconst originalCodes = new Map();\n\nconst update = _.debounce(() => {\n\tconst declarations = ([] as [string, Variables[keyof Variables]][]).concat(\n\t\t...Array.from(originalCodes.values(), findDeclarations),\n\t\tfindDeclarations(cssVariablesElement.innerHTML),\n\t);\n\n\tconst variables = Object.fromEntries(declarations);\n\n\toriginalCodes.forEach((originalCode, element) => {\n\t\tconst patchedCode = replaceReferences(originalCode, variables);\n\n\t\tlet patchedElement = element.nextElementSibling;\n\t\tif (!patchedElement || !patchedElement.classList.contains('patched-css-variables')) {\n\t\t\tpatchedElement = document.createElement('style');\n\t\t\tpatchedElement.type = 'text/css';\n\t\t\tpatchedElement.classList.add('patched-css-variables');\n\t\t\telement.insertAdjacentElement('afterend', patchedElement);\n\t\t}\n\n\t\tconst { sheet } = patchedElement;\n\t\twhile (sheet.cssRules.length > 0) {\n\t\t\tsheet.deleteRule(0);\n\t\t}\n\t\tsheet.insertRule(`@media all {${patchedCode}}`, 0);\n\t});\n}, 100);\n\nconst findAndPatchFromLinkElements = (): void => {\n\tArray.from(document.querySelectorAll('link[type=\"text/css\"].__meteor-css__')).forEach(async (linkElement) => {\n\t\tconst url = linkElement.getAttribute('href');\n\n\t\tif (url === null) {\n\t\t\treturn;\n\t\t}\n\n\t\ttry {\n\t\t\tconst response = await fetch(url);\n\t\t\tconst code = await response.text();\n\t\t\toriginalCodes.set(linkElement, code);\n\t\t} catch (error) {\n\t\t\tconsole.warn(error);\n\t\t} finally {\n\t\t\tupdate();\n\t\t}\n\t});\n};\n\nconst waitAndInitialize = (): void => {\n\tif (document.readyState !== 'complete') {\n\t\trequestAnimationFrame(waitAndInitialize);\n\t\treturn;\n\t}\n\n\tconst element = document.getElementById('css-variables');\n\n\tif (element === null) {\n\t\trequestAnimationFrame(waitAndInitialize);\n\t\treturn;\n\t}\n\n\tcssVariablesElement = element;\n\n\tconst cssVariablesElementObserver = new MutationObserver(() => {\n\t\tupdate();\n\t});\n\n\tcssVariablesElementObserver.observe(cssVariablesElement, { childList: true });\n\n\tfindAndPatchFromLinkElements();\n};\n\n((): void => {\n\tif (window.CSS && window.CSS.supports && window.CSS.supports('(--foo: red)')) {\n\t\treturn;\n\t}\n\n\twaitAndInitialize();\n})();\n","((): void => {\n\tif (typeof window.CustomEvent === 'function') {\n\t\treturn;\n\t}\n\n\tconst CustomEvent = function <T>(\n\t\ttype: string,\n\t\t{ bubbles = false, cancelable = false, detail = null as unknown as T }: CustomEventInit<T> = {},\n\t): CustomEvent<T> {\n\t\tconst evt = document.createEvent('CustomEvent') as CustomEvent<T>;\n\t\tevt.initCustomEvent(type, bubbles, cancelable, detail);\n\t\treturn evt;\n\t} as unknown as {\n\t\tprototype: CustomEvent;\n\t\tnew <T>(typeArg: string, eventInitDict?: CustomEventInit<T>): CustomEvent<T>;\n\t};\n\n\twindow.CustomEvent = CustomEvent;\n})();\n","import * as domEvents from '../lib/utils/domEvents';\nimport { isIOsDevice } from '../lib/utils/isIOsDevice';\n\n((): void => {\n\tif (!isIOsDevice || !window.matchMedia('(hover: none)').matches) {\n\t\treturn;\n\t}\n\n\tdomEvents.delegate({\n\t\tparent: document.body,\n\t\teventName: 'touchend',\n\t\telementSelector: 'a:hover',\n\t\tlistener: (_, element): void => {\n\t\t\tdomEvents.triggerClick(element);\n\t\t},\n\t});\n})();\n","import '@rocket.chat/fuselage-polyfills';\nimport 'url-polyfill';\nimport './childNodeRemove';\nimport './cssVars';\nimport './customEventPolyfill';\nimport './hoverTouchClick';\nimport './objectFromEntries';\n","Object.fromEntries =\n\tObject.fromEntries ||\n\tfunction fromEntries<T>(entries: Iterable<readonly [PropertyKey, T]>): { [k: string]: T } {\n\t\treturn [...entries].reduce((obj, { 0: key, 1: val }) => Object.assign(obj, { [key]: val }), {});\n\t};\n","import { Template } from 'meteor/templating';\n\nimport { getUserAvatarURL } from '../../app/utils/lib/getUserAvatarURL';\n\nTemplate.registerHelper('avatarUrlFromUsername', getUserAvatarURL);\n","import { Template } from 'meteor/templating';\n\nimport { getEmojiUrlFromName } from '../../app/emoji-custom/client/lib/emojiCustom';\n\nTemplate.registerHelper('emojiUrlFromName', getEmojiUrlFromName);\n","import { Template } from 'meteor/templating';\n\nimport { hasAtLeastOnePermission } from '../../app/authorization/client';\n\nTemplate.registerHelper('hasPermission', hasAtLeastOnePermission);\n","import './log';\nimport './renderEmoji';\nimport './avatarUrlFromUsername';\nimport './emojiUrlFromName';\nimport './nrrargs';\nimport './hasPermission';\nimport './userHasAllPermission';\n","import { Template } from 'meteor/templating';\n\nTemplate.registerHelper('log', (...args: unknown[]) => {\n\tconsole.log(...args);\n});\n","import { Template } from 'meteor/templating';\n\nTemplate.registerHelper('nrrargs', <T extends any[]>(...args: T) => ({\n\t_arguments: args,\n}));\n","import { Template } from 'meteor/templating';\n\nimport { renderEmoji } from '../lib/utils/renderEmoji';\n\nTemplate.registerHelper('renderEmoji', renderEmoji);\n","import { Template } from 'meteor/templating';\n\nimport { userHasAllPermission } from '../../app/authorization/client';\nimport { IPermission } from '../../definition/IPermission';\nimport { IRole, IUser } from '../../definition/IUser';\n\nTemplate.registerHelper(\n\t'userHasAllPermission',\n\t(userId: IUser['_id'] | null, permission: IPermission['_id'] | IPermission['_id'][], scope: IRole['scope']) =>\n\t\tuserHasAllPermission(permission, scope, userId),\n);\n","import '../app/cors/client';\nimport '../app/2fa/client';\nimport '../app/analytics/client';\nimport '../app/authorization';\nimport '../app/autotranslate/client';\nimport '../app/cas/client';\nimport '../app/channel-settings';\nimport '../app/crowd/client';\nimport '../app/custom-oauth';\nimport '../app/custom-sounds/client';\nimport '../app/dolphin/client';\nimport '../app/drupal/client';\nimport '../app/emoji/client';\nimport '../app/emoji-emojione/client';\nimport '../app/emoji-custom/client';\nimport '../app/favico';\nimport '../app/file-upload';\nimport '../app/github-enterprise/client';\nimport '../app/gitlab/client';\nimport '../app/iframe-login/client';\nimport '../app/importer/client';\nimport '../app/importer-csv/client';\nimport '../app/importer-hipchat-enterprise/client';\nimport '../app/importer-slack/client';\nimport '../app/importer-slack-users/client';\nimport '../app/integrations/client/startup';\nimport '../app/lib/client';\nimport '../app/livestream/client';\nimport '../app/logger/client';\nimport '../app/markdown/client';\nimport '../app/mentions-flextab/client';\nimport '../app/message-attachments/client';\nimport '../app/message-mark-as-unread/client';\nimport '../app/message-pin/client';\nimport '../app/message-snippet/client';\nimport '../app/message-star/client';\nimport '../app/nextcloud/client';\nimport '../app/oauth2-server-config/client';\nimport '../app/oembed/client';\nimport '../app/otr/client';\nimport '../app/push-notifications/client';\nimport '../app/apps/client';\nimport '../app/slackbridge/client';\nimport '../app/slashcommands-archiveroom/client';\nimport '../app/slashcommand-asciiarts/client';\nimport '../app/slashcommands-create/client';\nimport '../app/slashcommands-hide/client';\nimport '../app/slashcommands-invite/client';\nimport '../app/slashcommands-inviteall/client';\nimport '../app/slashcommands-join/client';\nimport '../app/slashcommands-kick/client';\nimport '../app/slashcommands-open/client';\nimport '../app/slashcommands-topic/client';\nimport '../app/slashcommands-unarchiveroom/client';\nimport '../app/tokenpass/client';\nimport '../app/ui/client';\nimport '../app/ui-account/client';\nimport '../app/ui-clean-history/client';\nimport '../app/ui-login/client';\nimport '../app/ui-master/client';\nimport '../app/ui-message/client';\nimport '../app/ui-sidenav/client';\nimport '../app/ui-vrecord/client';\nimport '../app/videobridge/client';\nimport '../app/webdav/client';\nimport '../app/webrtc/client';\nimport '../app/wordpress/client';\nimport '../app/nrr/client';\nimport '../app/meteor-accounts-saml/client';\nimport '../app/e2e/client';\nimport '../app/blockstack/client';\nimport '../app/version-check/client';\nimport '../app/search/client';\nimport '../app/chatpal-search/client';\nimport '../app/lazy-load/client';\nimport '../app/discussion/client';\nimport '../app/threads/client';\nimport '../app/mail-messages/client';\nimport '../app/user-status/client';\nimport '../app/utils/client';\nimport '../app/settings/client';\nimport '../app/models/client';\nimport '../app/notifications/client';\nimport '../app/ui-utils/client';\nimport '../app/ui-cached-collection/client';\nimport '../app/action-links/client';\nimport '../app/reactions/client';\nimport '../app/livechat/client';\nimport '../app/meteor-autocomplete/client';\nimport '../app/theme/client';\nimport '../app/custom/client';\n","import { HTML } from 'meteor/htmljs';\n\nimport { createTemplateForComponent } from './lib/portals/createTemplateForComponent';\n\ncreateTemplateForComponent('MessageActions', () => import('./components/Message/Actions'));\n\ncreateTemplateForComponent('reactAttachments', () => import('./components/Message/Attachments'));\n\ncreateTemplateForComponent('ThreadMetric', () => import('./components/Message/Metrics/Thread'), {\n\trenderContainerView: () =>\n\t\tHTML.DIV({\n\t\t\tstyle: 'min-height: 36px;',\n\t\t}),\n});\n\ncreateTemplateForComponent('DiscussionMetric', () => import('./components/Message/Metrics/Discussion'), {\n\trenderContainerView: () =>\n\t\tHTML.DIV({\n\t\t\tstyle: 'min-height: 36px;',\n\t\t}),\n});\n\ncreateTemplateForComponent('MessageBody', () => import('./components/Message/Body'));\n\ncreateTemplateForComponent('BroadCastMetric', () => import('./components/Message/Metrics/Broadcast'));\n\ncreateTemplateForComponent(\n\t'Checkbox',\n\tasync (): Promise<{ default: typeof import('@rocket.chat/fuselage').CheckBox }> => {\n\t\tconst { CheckBox } = await import('@rocket.chat/fuselage');\n\t\treturn { default: CheckBox };\n\t},\n\t{\n\t\tattachment: 'at-parent',\n\t},\n);\n\ncreateTemplateForComponent('RoomForeword', () => import('./components/RoomForeword'), {\n\tattachment: 'at-parent',\n});\n\ncreateTemplateForComponent('messageLocation', () => import('./views/location/MessageLocation'));\n\ncreateTemplateForComponent('sidebarHeader', () => import('./sidebar/header'));\n\ncreateTemplateForComponent('sidebarChats', () => import('./sidebar/RoomList/index'), {\n\trenderContainerView: () =>\n\t\tHTML.DIV({\n\t\t\tstyle: 'display: flex; flex: 1 1 100%;',\n\t\t}),\n});\n\ncreateTemplateForComponent('omnichannelFlex', () => import('./views/omnichannel/sidebar/OmnichannelSidebar'), {\n\trenderContainerView: () => HTML.DIV({ style: 'height: 100%; position: relative;' }),\n});\n\ncreateTemplateForComponent('auditPage', () => import('../ee/client/audit/AuditPage'), {\n\tattachment: 'at-parent',\n});\n\ncreateTemplateForComponent('auditLogPage', () => import('../ee/client/audit/AuditLogPage'), {\n\tattachment: 'at-parent',\n});\n\ncreateTemplateForComponent('DiscussionMessageList', () => import('./views/room/contextualBar/Discussions'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('ThreadsList', () => import('./views/room/contextualBar/Threads'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('ExportMessages', () => import('./views/room/contextualBar/ExportMessages'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('KeyboardShortcuts', () => import('./views/room/contextualBar/KeyboardShortcuts'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('room', () => import('./views/room/Room'), {\n\trenderContainerView: () => HTML.DIV({ style: 'height: 100%; position: relative;' }),\n});\n\ncreateTemplateForComponent('AutoTranslate', () => import('./views/room/contextualBar/AutoTranslate'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('NotificationsPreferences', () => import('./views/room/contextualBar/NotificationPreferences'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('InviteUsers', () => import('./views/room/contextualBar/RoomMembers/InviteUsers'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('EditInvite', () => import('./views/room/contextualBar/RoomMembers/EditInvite'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('AddUsers', () => import('./views/room/contextualBar/RoomMembers/AddUsers'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('membersList', () => import('./views/room/contextualBar/RoomMembers'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('OTR', () => import('./views/room/contextualBar/OTR'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('EditRoomInfo', () => import('./views/room/contextualBar/Info/EditRoomInfo'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('RoomInfo', () => import('./views/room/contextualBar/Info/RoomInfo'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('UserInfoWithData', () => import('./views/room/contextualBar/UserInfo'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('channelFilesList', () => import('./views/room/contextualBar/RoomFiles'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('RoomAnnouncement', () => import('./views/room/Announcement'));\n\ncreateTemplateForComponent('PruneMessages', () => import('./views/room/contextualBar/PruneMessages'), {\n\trenderContainerView: () => HTML.DIV({ class: 'contextual-bar' }),\n});\n\ncreateTemplateForComponent('Burger', () => import('./components/BurgerMenu'));\n\ncreateTemplateForComponent('loginLayoutHeader', () => import('./views/login/LoginLayout/Header'));\n\ncreateTemplateForComponent('loginLayoutFooter', () => import('./views/login/LoginLayout/Footer'));\n\ncreateTemplateForComponent('ModalBlock', () => import('./views/blocks/ConnectedModalBlock'), {\n\trenderContainerView: () => HTML.DIV({ style: 'display: flex; width: 100%; height: 100%;' }),\n});\n\ncreateTemplateForComponent('Blocks', () => import('./views/blocks/MessageBlock'));\n\ncreateTemplateForComponent('adminFlex', () => import('./views/admin/sidebar/AdminSidebar'), {\n\trenderContainerView: () => HTML.DIV({ style: 'height: 100%; position: relative;' }),\n});\n\ncreateTemplateForComponent('accountFlex', () => import('./views/account/AccountSidebar'), {\n\trenderContainerView: () => HTML.DIV({ style: 'height: 100%; position: relative;' }),\n});\n\ncreateTemplateForComponent('SortList', () => import('./components/SortList'));\n\ncreateTemplateForComponent('CreateRoomList', () => import('./sidebar/header/actions/CreateRoomList'));\n\ncreateTemplateForComponent('AppleOauthButton', () => import('./views/login/AppleOauth/AppleOauthButton'), {\n\trenderContainerView: () => HTML.DIV({ style: 'display: flex; justify-content: center;' }),\n});\n\ncreateTemplateForComponent('UserDropdown', () => import('./sidebar/header/UserDropdown'));\n\ncreateTemplateForComponent('sidebarFooter', () => import('./sidebar/footer'));\n\ncreateTemplateForComponent('roomNotFound', () => import('./views/room/Room/RoomNotFound'), {\n\trenderContainerView: () => HTML.DIV({ style: 'height: 100%;' }),\n});\n","import '../ee/client/ecdh';\nimport './polyfills';\n\nimport './lib/meteorCallWrapper';\nimport './importPackages';\n\nimport '../ee/client';\nimport './templateHelpers';\nimport './methods/deleteMessage';\nimport './methods/hideRoom';\nimport './methods/openRoom';\nimport './methods/setUserActiveStatus';\nimport './methods/toggleFavorite';\nimport './methods/updateMessage';\nimport './startup';\nimport './views/admin';\nimport './views/teams';\nimport './templates';\n","import { Meteor } from 'meteor/meteor';\nimport { FilterQuery } from 'mongodb';\n\nimport type { IBusinessHourBehavior } from '../app/livechat/server/business-hour/AbstractBusinessHour';\nimport type { Logger } from '../app/logger/server';\nimport type { IMessage } from '../definition/IMessage';\nimport type { IRoom } from '../definition/IRoom';\nimport type { IUser } from '../definition/IUser';\nimport type { ILivechatDepartmentRecord } from '../definition/ILivechatDepartmentRecord';\nimport type { ILivechatAgent } from '../definition/ILivechatAgent';\nimport type { OmnichannelAgentStatus } from '../definition/IOmnichannelAgent';\nimport type { ILivechatInquiryRecord } from '../definition/IInquiry';\nimport type { ILivechatVisitor } from '../definition/ILivechatVisitor';\nimport { getRandomId } from './random';\n\nenum CallbackPriority {\n\tHIGH = -1000,\n\tMEDIUM = 0,\n\tLOW = 1000,\n}\n\n/**\n * Callbacks returning void, like event listeners.\n *\n * TODO: move those to event-based systems\n */\ntype EventLikeCallbackSignatures = {\n\t'afterActivateUser': (user: IUser) => void;\n\t'afterCreateChannel': (owner: IUser, room: IRoom) => void;\n\t'afterCreatePrivateGroup': (owner: IUser, room: IRoom) => void;\n\t'afterDeactivateUser': (user: IUser) => void;\n\t'afterDeleteMessage': (message: IMessage, room: IRoom) => void;\n\t'validateUserRoles': (userData: Partial<IUser>) => void;\n\t'workspaceLicenseChanged': (license: string) => void;\n\t'afterReadMessages': (rid: IRoom['_id'], params: { uid: IUser['_id']; lastSeen: Date }) => void;\n\t'beforeReadMessages': (rid: IRoom['_id'], uid: IUser['_id']) => void;\n\t'afterDeleteUser': (user: IUser) => void;\n\t'afterFileUpload': (params: { user: IUser; room: IRoom; message: IMessage }) => void;\n\t'afterSaveMessage': (message: IMessage, room: IRoom) => void;\n\t'livechat.removeAgentDepartment': (params: { departmentId: ILivechatDepartmentRecord['_id']; agentsId: ILivechatAgent['_id'][] }) => void;\n\t'livechat.saveAgentDepartment': (params: { departmentId: ILivechatDepartmentRecord['_id']; agentsId: ILivechatAgent['_id'][] }) => void;\n\t'livechat.closeRoom': (room: IRoom) => void;\n\t'livechat.saveRoom': (room: IRoom) => void;\n\t'livechat:afterReturnRoomAsInquiry': (params: { room: IRoom }) => void;\n\t'livechat.setUserStatusLivechat': (params: { userId: IUser['_id']; status: OmnichannelAgentStatus }) => void;\n\t'livechat.agentStatusChanged': (params: { userId: IUser['_id']; status: OmnichannelAgentStatus }) => void;\n\t'livechat.afterTakeInquiry': (inq: ILivechatInquiryRecord, agent: ILivechatAgent) => void;\n};\n\n/**\n * Callbacks that are supposed to be composed like a chain.\n *\n * TODO: develop a middleware alternative and grant independence of execution order\n */\ntype ChainedCallbackSignatures = {\n\t'afterCreateUser': (user: IUser) => IUser;\n\t'afterDeleteRoom': (rid: IRoom['_id']) => IRoom['_id'];\n\t'livechat:afterOnHold': (room: IRoom) => IRoom;\n\t'livechat:afterOnHoldChatResumed': (room: IRoom) => IRoom;\n\t'livechat:onTransferFailure': (params: { room: IRoom; guest: ILivechatVisitor; transferData: { [k: string]: string | any } }) => {\n\t\troom: IRoom;\n\t\tguest: ILivechatVisitor;\n\t\ttransferData: { [k: string]: string | any };\n\t};\n\t'livechat.afterForwardChatToAgent': (params: { rid: IRoom['_id']; servedBy: unknown; oldServedBy: unknown }) => {\n\t\trid: IRoom['_id'];\n\t\tservedBy: unknown;\n\t\toldServedBy: unknown;\n\t};\n\t'livechat.afterForwardChatToDepartment': (params: {\n\t\trid: IRoom['_id'];\n\t\tnewDepartmentId: ILivechatDepartmentRecord['_id'];\n\t\toldDepartmentId: ILivechatDepartmentRecord['_id'];\n\t}) => {\n\t\trid: IRoom['_id'];\n\t\tnewDepartmentId: ILivechatDepartmentRecord['_id'];\n\t\toldDepartmentId: ILivechatDepartmentRecord['_id'];\n\t};\n\t'livechat.afterInquiryQueued': (inquiry: ILivechatInquiryRecord) => ILivechatInquiryRecord;\n\t'livechat.afterRemoveDepartment': (params: { departmentId: ILivechatDepartmentRecord['_id']; agentsId: ILivechatAgent['_id'][] }) => {\n\t\tdepartmentId: ILivechatDepartmentRecord['_id'];\n\t\tagentsId: ILivechatAgent['_id'][];\n\t};\n\t'livechat.applySimultaneousChatRestrictions': (_: undefined, params: { departmentId?: ILivechatDepartmentRecord['_id'] }) => undefined;\n\t'livechat.beforeCloseRoom': (params: { room: IRoom; options: unknown }) => { room: IRoom; options: unknown };\n\t'livechat.beforeDelegateAgent': (agent: ILivechatAgent, params: { department?: ILivechatDepartmentRecord }) => ILivechatAgent;\n\t'livechat.applyDepartmentRestrictions': (\n\t\tquery: FilterQuery<ILivechatDepartmentRecord>,\n\t\tparams: { userId: IUser['_id'] },\n\t) => FilterQuery<ILivechatDepartmentRecord>;\n\t'livechat.onMaxNumberSimultaneousChatsReached': (inquiry: ILivechatInquiryRecord) => ILivechatInquiryRecord;\n\t'on-business-hour-start': (params: { BusinessHourBehaviorClass: { new (): IBusinessHourBehavior } }) => {\n\t\tBusinessHourBehaviorClass: { new (): IBusinessHourBehavior };\n\t};\n};\n\ntype Hook =\n\t| keyof EventLikeCallbackSignatures\n\t| keyof ChainedCallbackSignatures\n\t| 'afterJoinRoom'\n\t| 'afterLeaveRoom'\n\t| 'afterLogoutCleanUp'\n\t| 'afterProcessOAuthUser'\n\t| 'afterRemoveFromRoom'\n\t| 'afterRoomArchived'\n\t| 'afterRoomNameChange'\n\t| 'afterSaveUser'\n\t| 'afterValidateLogin'\n\t| 'afterValidateNewOAuthUser'\n\t| 'archiveRoom'\n\t| 'beforeActivateUser'\n\t| 'beforeCreateRoom'\n\t| 'beforeCreateUser'\n\t| 'beforeGetMentions'\n\t| 'beforeJoinRoom'\n\t| 'beforeLeaveRoom'\n\t| 'beforeReadMessages'\n\t| 'beforeRemoveFromRoom'\n\t| 'beforeSaveMessage'\n\t| 'beforeSendMessageNotifications'\n\t| 'beforeValidateLogin'\n\t| 'cachedCollection-loadFromServer-rooms'\n\t| 'cachedCollection-loadFromServer-subscriptions'\n\t| 'cachedCollection-received-rooms'\n\t| 'cachedCollection-received-subscriptions'\n\t| 'cachedCollection-sync-rooms'\n\t| 'cachedCollection-sync-subscriptions'\n\t| 'enter-room'\n\t| 'livechat.beforeForwardRoomToDepartment'\n\t| 'livechat.beforeInquiry'\n\t| 'livechat.beforeListTags'\n\t| 'livechat.beforeRoom'\n\t| 'livechat.beforeRouteChat'\n\t| 'livechat.chatQueued'\n\t| 'livechat.checkAgentBeforeTakeInquiry'\n\t| 'livechat.checkDefaultAgentOnNewRoom'\n\t| 'livechat.closeRoom'\n\t| 'livechat.leadCapture'\n\t| 'livechat.newRoom'\n\t| 'livechat.offlineMessage'\n\t| 'livechat.onAgentAssignmentFailed'\n\t| 'livechat.onCheckRoomApiParams'\n\t| 'livechat.onLoadConfigApi'\n\t| 'livechat.onLoadForwardDepartmentRestrictions'\n\t| 'livechat.saveInfo'\n\t| 'loginPageStateChange'\n\t| 'mapLDAPUserData'\n\t| 'oembed:afterParseContent'\n\t| 'oembed:beforeGetUrlContent'\n\t| 'onCreateUser'\n\t| 'onLDAPLogin'\n\t| 'onValidateLogin'\n\t| 'openBroadcast'\n\t| 'renderMessage'\n\t| 'renderNotification'\n\t| 'roomAnnouncementChanged'\n\t| 'roomAvatarChanged'\n\t| 'roomNameChanged'\n\t| 'roomTopicChanged'\n\t| 'roomTypeChanged'\n\t| 'setReaction'\n\t| 'streamMessage'\n\t| 'streamNewMessage'\n\t| 'unarchiveRoom'\n\t| 'unsetReaction'\n\t| 'userAvatarSet'\n\t| 'userConfirmationEmailRequested'\n\t| 'userForgotPasswordEmailRequested'\n\t| 'usernameSet'\n\t| 'userPasswordReset'\n\t| 'userRegistered'\n\t| 'userStatusManuallySet';\n\ntype Callback = {\n\t(item: unknown, constant?: unknown): unknown;\n\thook: Hook;\n\tid: string;\n\tpriority: CallbackPriority;\n\tstack: string;\n};\n\ntype CallbackTracker = (callback: Callback) => () => void;\n\ntype HookTracker = (params: { hook: Hook; length: number }) => () => void;\n\nclass Callbacks {\n\tprivate logger: Logger | undefined = undefined;\n\n\tprivate trackCallback: CallbackTracker | undefined = undefined;\n\n\tprivate trackHook: HookTracker | undefined = undefined;\n\n\tprivate callbacks = new Map<Hook, Callback[]>();\n\n\tprivate sequentialRunners = new Map<Hook, (item: unknown, constant?: unknown) => unknown>();\n\n\tprivate asyncRunners = new Map<Hook, (item: unknown, constant?: unknown) => unknown>();\n\n\treadonly priority = CallbackPriority;\n\n\tsetLogger(logger: Logger): void {\n\t\tthis.logger = logger;\n\t}\n\n\tsetMetricsTrackers({ trackCallback, trackHook }: { trackCallback?: CallbackTracker; trackHook?: HookTracker }): void {\n\t\tthis.trackCallback = trackCallback;\n\t\tthis.trackHook = trackHook;\n\t}\n\n\tprivate runOne(callback: Callback, item: unknown, constant: unknown): unknown {\n\t\tconst stopTracking = this.trackCallback?.(callback);\n\n\t\ttry {\n\t\t\treturn callback(item, constant);\n\t\t} finally {\n\t\t\tstopTracking?.();\n\t\t}\n\t}\n\n\tprivate createSequentialRunner(hook: Hook, callbacks: Callback[]): (item: unknown, constant?: unknown) => unknown {\n\t\tconst wrapCallback =\n\t\t\t(callback: Callback) =>\n\t\t\t(item: unknown, constant?: unknown): unknown => {\n\t\t\t\tthis.logger?.debug(`Executing callback with id ${callback.id} for hook ${callback.hook}`);\n\n\t\t\t\treturn this.runOne(callback, item, constant) ?? item;\n\t\t\t};\n\n\t\tconst identity = <TItem>(item: TItem): TItem => item;\n\n\t\tconst pipe =\n\t\t\t(curr: (item: unknown, constant?: unknown) => unknown, next: (item: unknown, constant?: unknown) => unknown) =>\n\t\t\t(item: unknown, constant?: unknown): unknown =>\n\t\t\t\tnext(curr(item, constant), constant);\n\n\t\tconst fn = callbacks.map(wrapCallback).reduce(pipe, identity);\n\n\t\treturn (item: unknown, constant?: unknown): unknown => {\n\t\t\tconst stopTracking = this.trackHook?.({ hook, length: callbacks.length });\n\n\t\t\ttry {\n\t\t\t\treturn fn(item, constant);\n\t\t\t} finally {\n\t\t\t\tstopTracking?.();\n\t\t\t}\n\t\t};\n\t}\n\n\tprivate createAsyncRunner(_: Hook, callbacks: Callback[]) {\n\t\treturn (item: unknown, constant?: unknown): unknown => {\n\t\t\tif (typeof window !== 'undefined') {\n\t\t\t\tthrow new Error('callbacks.runAsync on client server not allowed');\n\t\t\t}\n\n\t\t\tfor (const callback of callbacks) {\n\t\t\t\tMeteor.defer(() => {\n\t\t\t\t\tthis.runOne(callback, item, constant);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\treturn item;\n\t\t};\n\t}\n\n\tgetCallbacks(hook: Hook): Callback[] {\n\t\treturn this.callbacks.get(hook) ?? [];\n\t}\n\n\tsetCallbacks(hook: Hook, callbacks: Callback[]): void {\n\t\tthis.callbacks.set(hook, callbacks);\n\t\tthis.sequentialRunners.set(hook, this.createSequentialRunner(hook, callbacks));\n\t\tthis.asyncRunners.set(hook, this.createAsyncRunner(hook, callbacks));\n\t}\n\n\t/**\n\t * Add a callback function to a hook\n\t *\n\t * @param hook the name of the hook\n\t * @param callback the callback function\n\t * @param priority the callback run priority (order)\n\t * @param id human friendly name for this callback\n\t */\n\tadd<THook extends keyof EventLikeCallbackSignatures>(\n\t\thook: THook,\n\t\tcallback: EventLikeCallbackSignatures[THook],\n\t\tpriority?: CallbackPriority,\n\t\tid?: string,\n\t): void;\n\n\tadd<THook extends keyof ChainedCallbackSignatures>(\n\t\thook: THook,\n\t\tcallback: ChainedCallbackSignatures[THook],\n\t\tpriority?: CallbackPriority,\n\t\tid?: string,\n\t): void;\n\n\tadd<TItem, TConstant, TNextItem = TItem>(\n\t\thook: Hook,\n\t\tcallback: (item: TItem, constant?: TConstant) => TNextItem,\n\t\tpriority?: CallbackPriority,\n\t\tid?: string,\n\t): void;\n\n\tadd(hook: Hook, callback: (item: unknown, constant?: unknown) => unknown, priority = this.priority.MEDIUM, id = getRandomId()): void {\n\t\tconst callbacks = this.getCallbacks(hook);\n\n\t\tif (callbacks.some((cb) => cb.id === id)) {\n\t\t\treturn;\n\t\t}\n\n\t\tcallbacks.push(\n\t\t\tObject.assign(callback as Callback, {\n\t\t\t\thook,\n\t\t\t\tpriority,\n\t\t\t\tid,\n\t\t\t\tstack: new Error().stack,\n\t\t\t}),\n\t\t);\n\t\tconst rank = (callback: Callback): number => callback.priority ?? this.priority.MEDIUM;\n\t\tcallbacks.sort((a, b) => rank(a) - rank(b));\n\n\t\tthis.setCallbacks(hook, callbacks);\n\t}\n\n\t/**\n\t * Remove a callback from a hook\n\t *\n\t * @param hook the name of the hook\n\t * @param id the callback's id\n\t */\n\tremove(hook: Hook, id: string): void {\n\t\tconst hooks = this.getCallbacks(hook).filter((callback) => callback.id !== id);\n\t\tthis.setCallbacks(hook, hooks);\n\t}\n\n\t/**\n\t * Successively run all of a hook's callbacks on an item\n\t *\n\t * @param hook the name of the hook\n\t * @param item the post, comment, modifier, etc. on which to run the callbacks\n\t * @param constant an optional constant that will be passed along to each callback\n\t * @returns returns the item after it's been through all the callbacks for this hook\n\t */\n\trun<THook extends keyof EventLikeCallbackSignatures>(hook: THook, ...args: Parameters<EventLikeCallbackSignatures[THook]>): void;\n\n\trun<THook extends keyof ChainedCallbackSignatures>(\n\t\thook: THook,\n\t\t...args: Parameters<ChainedCallbackSignatures[THook]>\n\t): ReturnType<ChainedCallbackSignatures[THook]>;\n\n\trun<TItem, TConstant, TNextItem = TItem>(hook: Hook, item: TItem, constant?: TConstant): TNextItem;\n\n\trun(hook: Hook, item: unknown, constant?: unknown): unknown {\n\t\tconst runner = this.sequentialRunners.get(hook) ?? ((item: unknown, _constant?: unknown): unknown => item);\n\t\treturn runner(item, constant);\n\t}\n\n\t/**\n\t * Successively run all of a hook's callbacks on an item, in async mode (only works on server)\n\t *\n\t * @param hook the name of the hook\n\t * @param item the post, comment, modifier, etc. on which to run the callbacks\n\t * @param constant an optional constant that will be passed along to each callback\n\t * @returns the post, comment, modifier, etc. on which to run the callbacks\n\t */\n\trunAsync<THook extends keyof EventLikeCallbackSignatures>(hook: THook, ...args: Parameters<EventLikeCallbackSignatures[THook]>): void;\n\n\trunAsync(hook: Hook, item: unknown, constant?: unknown): unknown {\n\t\tconst runner = this.asyncRunners.get(hook) ?? ((item: unknown, _constant?: unknown): unknown => item);\n\t\treturn runner(item, constant);\n\t}\n}\n\n/**\n * Callback hooks provide an easy way to add extra steps to common operations.\n * @deprecated\n */\nexport const callbacks = new Callbacks();\n","export const validateEmail = (email: string, options: { style: string } = { style: 'basic' }): boolean => {\n\tconst basicEmailRegex = /^[^@]+@[^@]+$/;\n\tconst rfcEmailRegex =\n\t\t/^[a-zA-Z0-9.!#$%&'*+\\/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;\n\n\tswitch (options.style) {\n\t\tcase 'rfc':\n\t\t\treturn rfcEmailRegex.test(email);\n\t\tcase 'basic':\n\t\tdefault:\n\t\t\treturn basicEmailRegex.test(email);\n\t}\n};\n","const extensionsMap: Record<string, string> = {\n\t'image/apng': 'apng',\n\t'image/avif': 'avif',\n\t'image/gif': 'gif',\n\t'image/jpeg': 'jpg',\n\t'image/png': 'png',\n\t'image/svg+xml': 'svg',\n\t'image/webp': 'webp',\n\t'image/bmp': 'bmp',\n\t'image/x-icon': 'ico',\n\t'image/tiff': 'tif',\n};\n\nexport const getImageExtensionFromMime = (mime: string): string | undefined => extensionsMap[mime];\n","import { Random } from 'meteor/random';\n\n/**\n * Facade for Meteor's `Random.id` function\n *\n * @param length length of the identifier in characters\n * @returns a unique identifier, such as `\"Jjwjg6gouWLXhMGKW\"`, that is likely to be unique in the whole world\n */\nexport const getRandomId = (length?: number): string => Random.id(length);\n","type Transform<T, U extends T | Promise<T>> = (x: T) => U;\n\ntype TransformChain<T, U extends T | Promise<T>> = {\n\t(x: T): U;\n\tuse(transform: Transform<T, U>): () => void;\n};\n\nexport const createTransformChain = <T>(...transforms: Transform<T, T>[]): TransformChain<T, T> => {\n\tlet chain = transforms;\n\n\tconst call = (x: T): T => chain.reduce((x, transform) => transform(x), x);\n\n\tconst use = (transform: Transform<T, T>): (() => void) => {\n\t\tchain.push(transform);\n\n\t\treturn (): void => {\n\t\t\tchain = chain.filter((t) => t !== transform);\n\t\t};\n\t};\n\n\treturn Object.assign(call, { use });\n};\n\nexport const createAsyncTransformChain = <T>(...transforms: Transform<T, Promise<T>>[]): TransformChain<T, Promise<T>> => {\n\tlet chain = transforms;\n\n\tconst call = (x: T): Promise<T> => chain.reduce((x, transform) => x.then(transform), Promise.resolve(x));\n\n\tconst use = (transform: Transform<T, Promise<T>>): (() => void) => {\n\t\tchain.push(transform);\n\n\t\treturn (): void => {\n\t\t\tchain = chain.filter((t) => t !== transform);\n\t\t};\n\t};\n\n\treturn Object.assign(call, { use });\n};\n","import { ISetting, ISettingColor } from '../../ISetting';\nimport { PaginatedResult } from '../helpers/PaginatedResult';\n\ntype SettingsUpdateProps = SettingsUpdatePropDefault | SettingsUpdatePropsActions | SettingsUpdatePropsColor;\n\ntype SettingsUpdatePropsActions = {\n\texecute: boolean;\n};\n\nexport type OauthCustomConfiguration = {\n\t_id: string;\n\tclientId?: string;\n\tcustom: unknown;\n\tservice?: string;\n\tserverURL: unknown;\n\ttokenPath: unknown;\n\tidentityPath: unknown;\n\tauthorizePath: unknown;\n\tscope: unknown;\n\tloginStyle: 'popup' | 'redirect';\n\ttokenSentVia: unknown;\n\tidentityTokenSentVia: unknown;\n\tkeyField: unknown;\n\tusernameField: unknown;\n\temailField: unknown;\n\tnameField: unknown;\n\tavatarField: unknown;\n\trolesClaim: unknown;\n\tgroupsClaim: unknown;\n\tmapChannels: unknown;\n\tchannelsMap: unknown;\n\tchannelsAdmin: unknown;\n\tmergeUsers: unknown;\n\tmergeRoles: unknown;\n\taccessTokenParam: unknown;\n\tshowButton: unknown;\n\n\tappId: unknown;\n\tconsumerKey?: string;\n\n\tclientConfig: unknown;\n\tbuttonLabelText: unknown;\n\tbuttonLabelColor: unknown;\n\tbuttonColor: unknown;\n};\n\nexport const isOauthCustomConfiguration = (config: any): config is OauthCustomConfiguration => Boolean(config);\n\nexport const isSettingsUpdatePropsActions = (props: Partial<SettingsUpdateProps>): props is SettingsUpdatePropsActions =>\n\t'execute' in props;\n\ntype SettingsUpdatePropsColor = {\n\teditor: ISettingColor['editor'];\n\tvalue: ISetting['value'];\n};\n\nexport const isSettingsUpdatePropsColor = (props: Partial<SettingsUpdateProps>): props is SettingsUpdatePropsColor =>\n\t'editor' in props && 'value' in props;\n\ntype SettingsUpdatePropDefault = {\n\tvalue: ISetting['value'];\n};\n\nexport const isSettingsUpdatePropDefault = (props: Partial<SettingsUpdateProps>): props is SettingsUpdatePropDefault => 'value' in props;\n\nexport type SettingsEndpoints = {\n\t'settings.public': {\n\t\tGET: () => PaginatedResult & {\n\t\t\tsettings: Array<ISetting>;\n\t\t};\n\t};\n\n\t'settings.oauth': {\n\t\tGET: () => {\n\t\t\tservices: Partial<OauthCustomConfiguration>[];\n\t\t};\n\t};\n\n\t'settings.addCustomOAuth': {\n\t\tPOST: (params: { name: string }) => void;\n\t};\n\n\t'settings': {\n\t\tGET: () => {\n\t\t\tsettings: ISetting[];\n\t\t};\n\t};\n\n\t'settings/:_id': {\n\t\tGET: () => Pick<ISetting, '_id' | 'value'>;\n\t\tPOST: (params: SettingsUpdateProps) => void;\n\t};\n\n\t'service.configurations': {\n\t\tGET: () => {\n\t\t\tconfigurations: Array<{\n\t\t\t\tappId: string;\n\t\t\t\tsecret: string;\n\t\t\t}>;\n\t\t};\n\t};\n};\n","import { IRocketChatRecord } from './IRocketChatRecord';\nimport { IUser } from './IUser';\nimport { UiKitBannerPayload } from './UIKit';\n\nexport enum BannerPlatform {\n\tWeb = 'web',\n\tMobile = 'mobile',\n}\nexport interface IBanner extends IRocketChatRecord {\n\tplatform: BannerPlatform[]; // pĺatforms a banner could be shown\n\texpireAt: Date; // date when banner should not be shown anymore\n\tstartAt: Date; // start date a banner should be presented\n\troles?: string[]; // only show the banner to this roles\n\tcreatedBy: Pick<IUser, '_id' | 'username'>;\n\tcreatedAt: Date;\n\tview: UiKitBannerPayload;\n\tactive?: boolean;\n\tinactivedAt?: Date;\n\tsnapshot?: string;\n}\n\nexport type InactiveBanner = IBanner & {\n\tactive: false;\n\tinactivedAt: Date;\n};\n\nexport const isInactiveBanner = (banner: IBanner): banner is InactiveBanner => banner.active === false;\n\nexport interface IBannerDismiss extends IRocketChatRecord {\n\tuserId: IUser['_id']; // user receiving the banner dismissed\n\tbannerId: IBanner['_id']; // banner dismissed\n\tdismissedAt: Date; // when is was dismissed\n\tdismissedBy: Pick<IUser, '_id' | 'username'>; // who dismissed (usually the same as userId)\n}\n","import { ILivechatDepartment } from './ILivechatDepartment';\n\nexport enum LivechatBusinessHourTypes {\n\tDEFAULT = 'default',\n\tCUSTOM = 'custom',\n}\n\nexport enum LivechatBusinessHourBehaviors {\n\tSINGLE = 'Single',\n\tMULTIPLE = 'Multiple',\n}\n\ninterface IBusinessHourTime {\n\ttime: string;\n\tutc: { dayOfWeek: string; time: string };\n\tcron: { dayOfWeek: string; time: string };\n}\n\nexport interface IBusinessHourWorkHour {\n\tday: string;\n\tstart: IBusinessHourTime;\n\tfinish: IBusinessHourTime;\n\topen: boolean;\n\tcode: unknown;\n}\n\nexport interface IBusinessHourTimezone {\n\tname: string;\n\tutc: string;\n}\n\nexport interface ILivechatBusinessHour {\n\t_id: string;\n\tname: string;\n\tactive: boolean;\n\ttype: LivechatBusinessHourTypes;\n\ttimezone: IBusinessHourTimezone;\n\tts: Date;\n\tworkHours: IBusinessHourWorkHour[];\n\t_updatedAt?: Date;\n\tdepartments?: ILivechatDepartment[];\n}\n","import { IRocketChatRecord } from './IRocketChatRecord';\nimport { IMessage } from './IMessage';\nimport { IUser, Username } from './IUser';\n\nexport type RoomType = 'c' | 'd' | 'p' | 'l';\ntype CallStatus = 'ringing' | 'ended' | 'declined' | 'ongoing';\n\nexport type RoomID = string;\nexport type ChannelName = string;\ninterface IRequestTranscript {\n\temail: string;\n\trequestedAt: Date;\n\trequestedBy: IUser;\n\tsubject: string;\n}\n\nexport interface IRoom extends IRocketChatRecord {\n\t_id: RoomID;\n\tt: RoomType;\n\tname?: string;\n\tfname: string;\n\tmsgs: number;\n\tdefault?: true;\n\tbroadcast?: true;\n\tfeatured?: true;\n\tencrypted?: boolean;\n\ttopic: any;\n\n\tu: Pick<IUser, '_id' | 'username' | 'name'>;\n\tuids: Array<string>;\n\n\tlastMessage?: IMessage;\n\tlm?: Date;\n\tusersCount: number;\n\tjitsiTimeout: Date;\n\tcallStatus?: CallStatus;\n\twebRtcCallStartTime?: Date;\n\tservedBy?: {\n\t\t_id: string;\n\t};\n\n\tstreamingOptions?: {\n\t\tid?: string;\n\t\ttype: string;\n\t};\n\n\tprid?: string;\n\tavatarETag?: string;\n\ttokenpass?: {\n\t\trequire: string;\n\t\ttokens: {\n\t\t\ttoken: string;\n\t\t\tbalance: number;\n\t\t}[];\n\t};\n\n\tteamMain?: boolean;\n\tteamId?: string;\n\tteamDefault?: boolean;\n\topen?: boolean;\n\n\tautoTranslateLanguage: string;\n\tautoTranslate?: boolean;\n\tunread?: number;\n\talert?: boolean;\n\thideUnreadStatus?: boolean;\n\n\tsysMes?: string[];\n\tmuted?: string[];\n\n\tusernames?: string[];\n\tts?: Date;\n}\n\nexport interface ICreatedRoom extends IRoom {\n\trid: string;\n}\n\nexport interface ITeamRoom extends IRoom {\n\tteamMain: boolean;\n\tteamId: string;\n}\n\nexport const isTeamRoom = (room: Partial<IRoom>): room is ITeamRoom => !!room.teamMain;\nexport const isPrivateTeamRoom = (room: Partial<IRoom>): room is ITeamRoom => isTeamRoom(room) && room.t === 'p';\nexport const isPublicTeamRoom = (room: Partial<IRoom>): room is ITeamRoom => isTeamRoom(room) && room.t === 'c';\n\nexport const isDiscussion = (room: Partial<IRoom>): room is IRoom => !!room.prid;\nexport const isPrivateDiscussion = (room: Partial<IRoom>): room is IRoom => isDiscussion(room) && room.t === 'p';\nexport const isPublicDiscussion = (room: Partial<IRoom>): room is IRoom => isDiscussion(room) && room.t === 'c';\n\nexport interface IDirectMessageRoom extends Omit<IRoom, 'default' | 'featured' | 'u' | 'name'> {\n\tt: 'd';\n\tuids: Array<string>;\n\tusernames: Array<Username>;\n}\n\nexport const isDirectMessageRoom = (room: Partial<IRoom>): room is IDirectMessageRoom => room.t === 'd';\nexport const isMultipleDirectMessageRoom = (room: Partial<IRoom>): room is IDirectMessageRoom =>\n\tisDirectMessageRoom(room) && room.uids.length > 2;\n\nexport enum OmnichannelSourceType {\n\tWIDGET = 'widget',\n\tEMAIL = 'email',\n\tSMS = 'sms',\n\tAPP = 'app',\n\tAPI = 'api',\n\tOTHER = 'other', // catch-all source type\n}\n\nexport interface IOmnichannelRoom extends Omit<IRoom, 'default' | 'featured' | 'broadcast' | ''> {\n\tt: 'l';\n\tv: {\n\t\t_id?: string;\n\t\ttoken?: string;\n\t\tstatus: 'online' | 'busy' | 'away' | 'offline';\n\t};\n\temail?: {\n\t\t// Data used when the room is created from an email, via email Integration.\n\t\tinbox: string;\n\t\tthread: string;\n\t\treplyTo: string;\n\t\tsubject: string;\n\t};\n\tsource: {\n\t\t// TODO: looks like this is not so required as the definition suggests\n\t\t// The source, or client, which created the Omnichannel room\n\t\ttype: OmnichannelSourceType;\n\t\t// An optional identification of external sources, such as an App\n\t\tid?: string;\n\t\t// A human readable alias that goes with the ID, for post analytical purposes\n\t\talias?: string;\n\t\t// A label to be shown in the room info\n\t\tlabel?: string;\n\t\t// The sidebar icon\n\t\tsidebarIcon?: string;\n\t\t// The default sidebar icon\n\t\tdefaultIcon?: string;\n\t};\n\ttranscriptRequest?: IRequestTranscript;\n\tservedBy?: {\n\t\t_id: string;\n\t\tts: Date;\n\t\tusername: IUser['username'];\n\t};\n\tonHold?: boolean;\n\tdepartmentId?: string;\n\n\tlastMessage?: IMessage & { token?: string };\n\n\ttags: any;\n\tclosedAt: any;\n\tmetrics: any;\n\twaitingResponse: any;\n\tresponseBy: any;\n\tpriorityId: any;\n\tlivechatData: any;\n\tqueuedAt?: Date;\n\n\tts: Date;\n\tlabel?: string;\n\tcrmData?: unknown;\n}\n\nexport interface IOmnichannelRoomFromAppSource extends IOmnichannelRoom {\n\tsource: {\n\t\ttype: OmnichannelSourceType.APP;\n\t\tid: string;\n\t\talias?: string;\n\t\tsidebarIcon?: string;\n\t\tdefaultIcon?: string;\n\t};\n}\n\nexport const isOmnichannelRoom = (room: IRoom): room is IOmnichannelRoom & IRoom => room.t === 'l';\n\nexport const isOmnichannelRoomFromAppSource = (room: IRoom): room is IOmnichannelRoomFromAppSource => {\n\tif (!isOmnichannelRoom(room)) {\n\t\treturn false;\n\t}\n\n\treturn room.source?.type === OmnichannelSourceType.APP;\n};\n","import { UIKitInteractionType as UIKitInteractionTypeApi } from '@rocket.chat/apps-engine/definition/uikit';\nimport {\n\tIDividerBlock,\n\tISectionBlock,\n\tIActionsBlock,\n\tIContextBlock,\n\tIInputBlock,\n} from '@rocket.chat/apps-engine/definition/uikit/blocks/Blocks';\n\nenum UIKitInteractionTypeExtended {\n\tBANNER_OPEN = 'banner.open',\n\tBANNER_UPDATE = 'banner.update',\n\tBANNER_CLOSE = 'banner.close',\n}\n\nexport type UIKitInteractionType = UIKitInteractionTypeApi | UIKitInteractionTypeExtended;\n\nexport const UIKitInteractionTypes = {\n\t...UIKitInteractionTypeApi,\n\t...UIKitInteractionTypeExtended,\n};\n\nexport type UiKitPayload = {\n\tviewId: string;\n\tappId: string;\n\tblocks: (IDividerBlock | ISectionBlock | IActionsBlock | IContextBlock | IInputBlock)[];\n};\n\nexport type UiKitBannerPayload = UiKitPayload & {\n\tinline?: boolean;\n\tvariant?: 'neutral' | 'info' | 'success' | 'warning' | 'danger';\n\ticon?: string;\n\ttitle?: string;\n};\n\nexport type UIKitUserInteraction = {\n\ttype: UIKitInteractionType;\n} & UiKitPayload;\n\nexport type UiKitBannerProps = {\n\tpayload: UiKitBannerPayload;\n};\n\nexport type UIKitUserInteractionResult = UIKitUserInteractionResultError | UIKitUserInteraction;\n\ntype UIKitUserInteractionResultError = UIKitUserInteraction & {\n\ttype: UIKitInteractionTypeApi.ERRORS;\n\terrors?: Array<{ [key: string]: string }>;\n};\n\nexport const isErrorType = (result: UIKitUserInteractionResult): result is UIKitUserInteractionResultError =>\n\tresult.type === UIKitInteractionTypeApi.ERRORS;\n\nexport type UIKitActionEvent = {\n\tblockId: string;\n\tvalue?: unknown;\n\tappId: string;\n\tactionId: string;\n\tviewId: string;\n};\n","export enum UserStatus {\n\tONLINE = 'online',\n\tAWAY = 'away',\n\tOFFLINE = 'offline',\n\tBUSY = 'busy',\n}\n"]}