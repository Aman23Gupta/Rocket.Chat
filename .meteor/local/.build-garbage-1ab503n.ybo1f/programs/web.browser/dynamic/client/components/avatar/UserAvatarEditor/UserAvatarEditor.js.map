{"version":3,"sources":["meteor://ðŸ’»app/client/components/avatar/UserAvatarEditor/UserAvatarEditor.js"],"names":["Box","Button","Icon","TextInput","Margins","Avatar","module","link","v","React","useState","useCallback","default","useTranslation","useFileInput","UserAvatar","UserAvatarSuggestions","UserAvatarEditor","currentUsername","username","setAvatarObj","suggestions","disabled","etag","t","avatarFromUrl","setAvatarFromUrl","newAvatarSource","setNewAvatarSource","urlEmpty","setUrlEmpty","toDataURL","file","callback","reader","FileReader","onload","e","target","result","readAsDataURL","setUploadedPreview","avatarObj","dataurl","clickUpload","clickUrl","avatarUrl","clickReset","url","handleAvatarFromUrlChange","event","currentTarget","value","objectFit","exportDefault"],"mappings":"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","file":"dynamic/client/components/avatar/UserAvatarEditor/UserAvatarEditor.js","sourcesContent":["import { Box, Button, Icon, TextInput, Margins, Avatar } from '@rocket.chat/fuselage';\nimport React, { useState, useCallback } from 'react';\n\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { useFileInput } from '../../../hooks/useFileInput';\nimport UserAvatar from '../UserAvatar';\nimport UserAvatarSuggestions from './UserAvatarSuggestions';\n\nfunction UserAvatarEditor({ currentUsername, username, setAvatarObj, suggestions, disabled, etag }) {\n\tconst t = useTranslation();\n\tconst [avatarFromUrl, setAvatarFromUrl] = useState('');\n\tconst [newAvatarSource, setNewAvatarSource] = useState();\n\tconst [urlEmpty, setUrlEmpty] = useState(true);\n\n\tconst toDataURL = (file, callback) => {\n\t\tconst reader = new FileReader();\n\t\treader.onload = function (e) {\n\t\t\tcallback(e.target.result);\n\t\t};\n\t\treader.readAsDataURL(file);\n\t};\n\n\tconst setUploadedPreview = useCallback(\n\t\tasync (file, avatarObj) => {\n\t\t\tsetAvatarObj(avatarObj);\n\t\t\ttoDataURL(file, (dataurl) => {\n\t\t\t\tsetNewAvatarSource(dataurl);\n\t\t\t});\n\t\t},\n\t\t[setAvatarObj],\n\t);\n\n\tconst [clickUpload] = useFileInput(setUploadedPreview);\n\n\tconst clickUrl = () => {\n\t\tif (avatarFromUrl === '') {\n\t\t\treturn;\n\t\t}\n\t\tsetNewAvatarSource(avatarFromUrl);\n\t\tsetAvatarObj({ avatarUrl: avatarFromUrl });\n\t};\n\tconst clickReset = () => {\n\t\tsetNewAvatarSource(`/avatar/%40${username}`);\n\t\tsetAvatarObj('reset');\n\t};\n\n\tconst url = newAvatarSource;\n\n\tconst handleAvatarFromUrlChange = (event) => {\n\t\tevent.currentTarget.value !== '' ? setUrlEmpty(false) : setUrlEmpty(true);\n\t\tsetAvatarFromUrl(event.currentTarget.value);\n\t};\n\n\treturn (\n\t\t<Box display='flex' flexDirection='column' fontScale='p2m'>\n\t\t\t{t('Profile_picture')}\n\t\t\t<Box display='flex' flexDirection='row' mbs='x4'>\n\t\t\t\t<UserAvatar size='x124' url={url} username={currentUsername} etag={etag} style={{ objectFit: 'contain' }} mie='x4' />\n\t\t\t\t<Box display='flex' flexDirection='column' flexGrow='1' justifyContent='space-between' mis='x4'>\n\t\t\t\t\t<Box display='flex' flexDirection='row' mbs='none'>\n\t\t\t\t\t\t<Margins inline='x4'>\n\t\t\t\t\t\t\t<Button square mis='none' onClick={clickReset} disabled={disabled} mie='x4' title={t('Accounts_SetDefaultAvatar')}>\n\t\t\t\t\t\t\t\t<Avatar url={`/avatar/%40${username}`} />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button square onClick={clickUpload} disabled={disabled} title={t('Upload')}>\n\t\t\t\t\t\t\t\t<Icon name='upload' size='x20' />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button square mie='none' onClick={clickUrl} disabled={disabled || urlEmpty} title={t('Add URL')}>\n\t\t\t\t\t\t\t\t<Icon name='permalink' size='x20' />\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t{suggestions && (\n\t\t\t\t\t\t\t\t<UserAvatarSuggestions\n\t\t\t\t\t\t\t\t\tsuggestions={suggestions}\n\t\t\t\t\t\t\t\t\tsetAvatarObj={setAvatarObj}\n\t\t\t\t\t\t\t\t\tsetNewAvatarSource={setNewAvatarSource}\n\t\t\t\t\t\t\t\t\tdisabled={disabled}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</Margins>\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Margins inlineStart='x4'>\n\t\t\t\t\t\t<Box>{t('Use_url_for_avatar')}</Box>\n\t\t\t\t\t\t<TextInput flexGrow={0} placeholder={t('Use_url_for_avatar')} value={avatarFromUrl} onChange={handleAvatarFromUrlChange} />\n\t\t\t\t\t</Margins>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t</Box>\n\t);\n}\n\nexport default UserAvatarEditor;\n"]}