{"version":3,"sources":["meteor://ğŸ’»app/client/components/UserStatusMenu.js"],"names":["_extends","module","link","default","v","_objectWithoutProperties","Button","PositionAnimated","Options","useCursor","Box","React","useRef","useCallback","useState","useMemo","useEffect","useSetting","useTranslation","UserStatus","UserStatusMenu","onChange","optionWidth","undefined","initialStatus","placement","props","t","status","setStatus","allowInvisibleStatus","options","renderOption","label","statuses","push","cursor","handleKeyDown","handleKeyUp","reset","visible","hide","show","selected","ref","onClick","current","focus","classList","add","handleSelection","exportDefault"],"mappings":"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","file":"dynamic/client/components/UserStatusMenu.js","sourcesContent":["import { Button, PositionAnimated, Options, useCursor, Box } from '@rocket.chat/fuselage';\nimport React, { useRef, useCallback, useState, useMemo, useEffect } from 'react';\n\nimport { useSetting } from '../contexts/SettingsContext';\nimport { useTranslation } from '../contexts/TranslationContext';\nimport { UserStatus } from './UserStatus';\n\nconst UserStatusMenu = ({ onChange, optionWidth = undefined, initialStatus = 'offline', placement = 'bottom-end', ...props }) => {\n\tconst t = useTranslation();\n\tconst [status, setStatus] = useState(initialStatus);\n\tconst allowInvisibleStatus = useSetting('Accounts_AllowInvisibleStatusOption');\n\n\tconst options = useMemo(() => {\n\t\tconst renderOption = (status, label) => (\n\t\t\t<Box display='flex' flexDirection='row' alignItems='center'>\n\t\t\t\t<Box marginInlineEnd='x8'>\n\t\t\t\t\t<UserStatus status={status} />\n\t\t\t\t</Box>\n\t\t\t\t{label}\n\t\t\t</Box>\n\t\t);\n\n\t\tconst statuses = [\n\t\t\t['online', renderOption('online', t('Online'))],\n\t\t\t['away', renderOption('away', t('Away'))],\n\t\t\t['busy', renderOption('busy', t('Busy'))],\n\t\t];\n\n\t\tif (allowInvisibleStatus) {\n\t\t\tstatuses.push(['offline', renderOption('offline', t('Invisible'))]);\n\t\t}\n\n\t\treturn statuses;\n\t}, [t, allowInvisibleStatus]);\n\n\tconst [cursor, handleKeyDown, handleKeyUp, reset, [visible, hide, show]] = useCursor(-1, options, ([selected], [, hide]) => {\n\t\tsetStatus(selected);\n\t\treset();\n\t\thide();\n\t});\n\n\tconst ref = useRef();\n\tconst onClick = useCallback(() => {\n\t\tref.current.focus() & show();\n\t\tref.current.classList.add('focus-visible');\n\t}, [show]);\n\n\tconst handleSelection = useCallback(\n\t\t([selected]) => {\n\t\t\tsetStatus(selected);\n\t\t\treset();\n\t\t\thide();\n\t\t},\n\t\t[hide, reset],\n\t);\n\n\tuseEffect(() => onChange(status), [status, onChange]);\n\n\treturn (\n\t\t<>\n\t\t\t<Button ref={ref} small square ghost onClick={onClick} onBlur={hide} onKeyUp={handleKeyUp} onKeyDown={handleKeyDown} {...props}>\n\t\t\t\t<UserStatus status={status} />\n\t\t\t</Button>\n\t\t\t<PositionAnimated width='auto' visible={visible} anchor={ref} placement={placement}>\n\t\t\t\t<Options width={optionWidth} onSelect={handleSelection} options={options} cursor={cursor} />\n\t\t\t</PositionAnimated>\n\t\t</>\n\t);\n};\n\nexport default UserStatusMenu;\n"]}