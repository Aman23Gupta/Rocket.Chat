{"version":3,"sources":["meteor://ðŸ’»app/client/hooks/lists/useRecordList.ts"],"names":[],"mappings":";;;;;;;;AAAA;;AAAkB,MAAE,KAAF,CAAY,sCAAZ,EAA0B;AAAA;AAAA;AAAA;;AAAA,CAA1B,EAA0B,CAA1B;AAAlB,OAAO,MAAP,CAAS;AAAA,eAAmB,QAAE;AAArB,CAAT;AAA4C;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;;AAarC,MAAM,aAAa,GAAiC,UAA9B,IAA+E;AAC3G,QAAM,CAAC,KAAD,EAAQ,QAAR,IAAoB,QAAQ,CAAqB,OAAO;AAC7D,SAAK,EAAE,UAAU,CAAC,KAD2C;AAE7D,SAAK,EAAE,UAAU,CAAC,KAF2C;AAG7D,aAAS,EAAE,UAAU,CAAC,SAHuC;AAI7D,SAAK,EAAE;AAJsD,GAAP,CAArB,CAAlC;AAOA,WAAS,CAAC,MAAK;AACd,UAAM,uBAAuB,GAAG,UAAU,CAAC,EAAX,CAAc,UAAd,EAA0B,MAAK;AAC9D,cAAQ,CAAC,OAAO;AACf,aAAK,EAAE,UAAU,CAAC,KADH;AAEf,aAAK,EAAE,UAAU,CAAC,KAFH;AAGf,iBAAS,EAAE,UAAU,CAAC,SAHP;AAIf,aAAK,EAAE;AAJQ,OAAP,CAAD,CAAR;AAMA,KAP+B,CAAhC;AASA,UAAM,sBAAsB,GAAG,UAAU,CAAC,EAAX,CAAc,SAAd,EAAyB,MAAK;AAC5D,cAAQ,CAAE,SAAD,KAAgB;AACxB,aAAK,EAAE,UAAU,CAAC,KADM;AAExB,aAAK,EAAE,UAAU,CAAC,KAFM;AAGxB,iBAAS,EAAE,UAAU,CAAC,SAHE;AAIxB,aAAK,EAAE,SAAS,CAAC;AAJO,OAAhB,CAAD,CAAR;AAMA,KAP8B,CAA/B;AASA,UAAM,sBAAsB,GAAG,UAAU,CAAC,EAAX,CAAc,SAAd,EAAyB,MAAK;AAC5D,cAAQ,CAAC,OAAO;AACf,aAAK,EAAE,UAAU,CAAC,KADH;AAEf,aAAK,EAAE,UAAU,CAAC,KAFH;AAGf,iBAAS,EAAE,UAAU,CAAC,SAHP;AAIf,aAAK,EAAE;AAJQ,OAAP,CAAD,CAAR;AAMA,KAP8B,CAA/B;AASA,UAAM,sBAAsB,GAAG,UAAU,CAAC,EAAX,CAAc,SAAd,EAA0B,KAAD,IAAU;AACjE,cAAQ,CAAE,KAAD,oCAAiB,KAAjB;AAAwB;AAAxB,QAAD,CAAR;AACA,KAF8B,CAA/B;AAIA,WAAO,MAAW;AACjB,6BAAuB;AACvB,4BAAsB;AACtB,4BAAsB;AACtB,4BAAsB;AACtB,KALD;AAMA,GAtCQ,EAsCN,CAAC,UAAD,CAtCM,CAAT;AAwCA,SAAO,KAAP;AACA,CAjDM,C","file":"dynamic/client/hooks/lists/useRecordList.ts","sourcesContent":["import { useEffect, useState } from 'react';\n\nimport { IRocketChatRecord } from '../../../definition/IRocketChatRecord';\nimport { AsyncStatePhase } from '../../lib/asyncState';\nimport { RecordList } from '../../lib/lists/RecordList';\n\ntype RecordListValue<T> = {\n\tphase: AsyncStatePhase;\n\titems: T[];\n\titemCount: number;\n\terror: Error | undefined;\n};\n\nexport const useRecordList = <T extends IRocketChatRecord>(recordList: RecordList<T>): RecordListValue<T> => {\n\tconst [state, setState] = useState<RecordListValue<T>>(() => ({\n\t\tphase: recordList.phase,\n\t\titems: recordList.items,\n\t\titemCount: recordList.itemCount,\n\t\terror: undefined,\n\t}));\n\n\tuseEffect(() => {\n\t\tconst disconnectMutatingEvent = recordList.on('mutating', () => {\n\t\t\tsetState(() => ({\n\t\t\t\tphase: recordList.phase,\n\t\t\t\titems: recordList.items,\n\t\t\t\titemCount: recordList.itemCount,\n\t\t\t\terror: undefined,\n\t\t\t}));\n\t\t});\n\n\t\tconst disconnectMutatedEvent = recordList.on('mutated', () => {\n\t\t\tsetState((prevState) => ({\n\t\t\t\tphase: recordList.phase,\n\t\t\t\titems: recordList.items,\n\t\t\t\titemCount: recordList.itemCount,\n\t\t\t\terror: prevState.error,\n\t\t\t}));\n\t\t});\n\n\t\tconst disconnectClearedEvent = recordList.on('cleared', () => {\n\t\t\tsetState(() => ({\n\t\t\t\tphase: recordList.phase,\n\t\t\t\titems: recordList.items,\n\t\t\t\titemCount: recordList.itemCount,\n\t\t\t\terror: undefined,\n\t\t\t}));\n\t\t});\n\n\t\tconst disconnectErroredEvent = recordList.on('errored', (error) => {\n\t\t\tsetState((state) => ({ ...state, error }));\n\t\t});\n\n\t\treturn (): void => {\n\t\t\tdisconnectMutatingEvent();\n\t\t\tdisconnectMutatedEvent();\n\t\t\tdisconnectClearedEvent();\n\t\t\tdisconnectErroredEvent();\n\t\t};\n\t}, [recordList]);\n\n\treturn state;\n};\n"]}