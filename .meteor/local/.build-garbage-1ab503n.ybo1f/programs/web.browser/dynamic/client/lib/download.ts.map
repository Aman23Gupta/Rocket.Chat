{"version":3,"sources":["meteor://ðŸ’»app/client/lib/download.ts"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAAqC,MAAE,KAAF,CAA0B,gDAA1B,EAA4B;AAAA;AAAA;AAAA;;AAAA,CAA5B,EAA4B,CAA5B;AAArC,MAAM,CAAC,MAAP,CAAa;AAAA,UAAQ,EAAG,MAAC,QAAZ;AAA0B,YAA0B,kBAApD;AAAoD,sCAApD;AAAoD;AAApD,CAAb;;AAAO,MAAM,QAAQ,GAAG,CAAC,IAAD,EAAe,QAAf,KAAyC;AAChE,QAAM,aAAa,GAAG,QAAQ,CAAC,aAAT,CAAuB,GAAvB,CAAtB;AACA,eAAa,CAAC,QAAd,GAAyB,QAAzB;AACA,eAAa,CAAC,IAAd,GAAqB,IAArB;AACA,eAAa,CAAC,MAAd,GAAuB,QAAvB;AACA,UAAQ,CAAC,IAAT,CAAc,WAAd,CAA0B,aAA1B;AACA,eAAa,CAAC,KAAd;AACA,UAAQ,CAAC,IAAT,CAAc,WAAd,CAA0B,aAA1B;AACA,CARM;;AAUA,MAAM,UAAU,GAAG,OAA+D,QAA/D,KAAyF;AAAA;;AAAA,MAAxF;AAAE;AAAF,GAAwF;AAAA,MAA7E,OAA6E;;AAClH,QAAM,IAAI,GAAG,IAAI,IAAJ,CAAS,IAAT,EAAe,OAAf,CAAb;;AAEA,MAAI,SAAS,CAAC,gBAAd,EAAgC;AAC/B,aAAS,CAAC,gBAAV,CAA2B,IAA3B;AACA;AACA;;AAED,QAAM,GAAG,wBAAG,MAAM,CAAC,SAAV,iEAAuB,MAAM,CAAC,GAAvC;AACA,QAAM,OAAO,GAAG,GAAG,CAAC,eAAJ,CAAoB,IAApB,CAAhB;AAEA,UAAQ,CAAC,OAAD,EAAU,QAAV,CAAR;AAEA,KAAG,CAAC,eAAJ,CAAoB,OAApB;AACA,CAdM;;AAgBA,MAAM,cAAc,GAAG,CAAC,UAAD,EAAsB,QAAtB,KAAgD;AAC7E,YAAU,CACT;AACC,QAAI,EAAE,CAAC,kBAAkB,CAAC,SAAS,CAAC,IAAI,CAAC,SAAL,CAAe,UAAf,EAA2B,IAA3B,EAAiC,CAAjC,CAAD,CAAV,CAAnB,CADP;AAEC,QAAI,EAAE;AAFP,GADS,YAKN,QALM,WAAV;AAOA,CARM;;AAUA,MAAM,aAAa,GAAG,CAAC,OAAD,EAA2C,QAA3C,KAAqE;AACjG,QAAM,UAAU,GAAI,IAAD,gBAA+B,MAAM,CAAC,IAAD,CAAN,CAAa,OAAb,CAAqB,IAArB,EAA2B,IAA3B,CAA/B,OAAnB;;AACA,QAAM,OAAO,GAAG,OAAO,CAAC,MAAR,CAAe,CAAC,OAAD,EAAU,GAAV,eAAqB,OAAO,GAAG,GAAG,CAAC,GAAJ,CAAQ,UAAR,EAAoB,IAApB,CAAyB,GAAzB,CAA/B,OAAf,EAAiF,EAAjF,CAAhB;AAEA,YAAU,CACT;AACC,QAAI,EAAE,CAAC,kBAAkB,CAAC,SAAS,CAAC,OAAD,CAAV,CAAnB,CADP;AAEC,QAAI,EAAE,wBAFP;AAGC,WAAO,EAAE;AAHV,GADS,YAMN,QANM,UAAV;AAQA,CAZM,C","file":"dynamic/client/lib/download.ts","sourcesContent":["export const download = (href: string, filename: string): void => {\n\tconst anchorElement = document.createElement('a');\n\tanchorElement.download = filename;\n\tanchorElement.href = href;\n\tanchorElement.target = '_blank';\n\tdocument.body.appendChild(anchorElement);\n\tanchorElement.click();\n\tdocument.body.removeChild(anchorElement);\n};\n\nexport const downloadAs = ({ data, ...options }: { data: BlobPart[] } & BlobPropertyBag, filename: string): void => {\n\tconst blob = new Blob(data, options);\n\n\tif (navigator.msSaveOrOpenBlob) {\n\t\tnavigator.msSaveOrOpenBlob(blob);\n\t\treturn;\n\t}\n\n\tconst URL = window.webkitURL ?? window.URL;\n\tconst blobUrl = URL.createObjectURL(blob);\n\n\tdownload(blobUrl, filename);\n\n\tURL.revokeObjectURL(blobUrl);\n};\n\nexport const downloadJsonAs = (jsonObject: unknown, basename: string): void => {\n\tdownloadAs(\n\t\t{\n\t\t\tdata: [decodeURIComponent(encodeURI(JSON.stringify(jsonObject, null, 2)))],\n\t\t\ttype: 'application/json;charset=utf-8',\n\t\t},\n\t\t`${basename}.json`,\n\t);\n};\n\nexport const downloadCsvAs = (csvData: readonly (readonly unknown[])[], basename: string): void => {\n\tconst escapeCell = (cell: unknown): string => `\"${String(cell).replace(/\"/g, '\"\"')}\"`;\n\tconst content = csvData.reduce((content, row) => `${content + row.map(escapeCell).join(';')}\\n`, '');\n\n\tdownloadAs(\n\t\t{\n\t\t\tdata: [decodeURIComponent(encodeURI(content))],\n\t\t\ttype: 'text/csv;charset=utf-8',\n\t\t\tendings: 'native',\n\t\t},\n\t\t`${basename}.csv`,\n\t);\n};\n"]}