{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/ExportMessages/FileExport.js"],"names":["_objectSpread","module","link","default","v","Field","TextInput","Select","ButtonGroup","Button","FieldGroup","React","useMemo","useEndpoint","useToastMessageDispatch","useTranslation","useForm","FileExport","onCancel","rid","t","values","handlers","dateFrom","dateTo","format","handleDateFrom","handleDateTo","handleFormat","outputOptions","roomsExport","dispatchToastMessage","handleSubmit","type","Date","message","error","exportDefault"],"mappings":"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","file":"dynamic/client/views/room/contextualBar/ExportMessages/FileExport.js","sourcesContent":["import { Field, TextInput, Select, ButtonGroup, Button, FieldGroup } from '@rocket.chat/fuselage';\nimport React, { useMemo } from 'react';\n\nimport { useEndpoint } from '../../../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../../contexts/TranslationContext';\nimport { useForm } from '../../../../hooks/useForm';\n\nconst FileExport = ({ onCancel, rid }) => {\n\tconst t = useTranslation();\n\n\tconst { values, handlers } = useForm({\n\t\tdateFrom: '',\n\t\tdateTo: '',\n\t\tformat: 'html',\n\t});\n\n\tconst { dateFrom, dateTo, format } = values;\n\n\tconst { handleDateFrom, handleDateTo, handleFormat } = handlers;\n\n\tconst outputOptions = useMemo(\n\t\t() => [\n\t\t\t['html', t('HTML')],\n\t\t\t['json', t('JSON')],\n\t\t],\n\t\t[t],\n\t);\n\n\tconst roomsExport = useEndpoint('POST', 'rooms.export');\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst handleSubmit = async () => {\n\t\ttry {\n\t\t\tawait roomsExport({\n\t\t\t\trid,\n\t\t\t\ttype: 'file',\n\t\t\t\t...(dateFrom && { dateFrom: new Date(dateFrom) }),\n\t\t\t\t...(dateTo && { dateTo: new Date(dateTo) }),\n\t\t\t\tformat,\n\t\t\t});\n\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: t('Your_email_has_been_queued_for_sending'),\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'error',\n\t\t\t\tmessage: error,\n\t\t\t});\n\t\t}\n\t};\n\n\treturn (\n\t\t<FieldGroup>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Date_From')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<TextInput type='date' value={dateFrom} onChange={handleDateFrom} />\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Date_to')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<TextInput type='date' value={dateTo} onChange={handleDateTo} />\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Output_format')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<Select value={format} onChange={handleFormat} placeholder={t('Format')} options={outputOptions} />\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<ButtonGroup stretch mb='x12'>\n\t\t\t\t<Button onClick={onCancel}>{t('Cancel')}</Button>\n\t\t\t\t<Button primary onClick={() => handleSubmit()}>\n\t\t\t\t\t{t('Export')}\n\t\t\t\t</Button>\n\t\t\t</ButtonGroup>\n\t\t</FieldGroup>\n\t);\n};\n\nexport default FileExport;\n"]}