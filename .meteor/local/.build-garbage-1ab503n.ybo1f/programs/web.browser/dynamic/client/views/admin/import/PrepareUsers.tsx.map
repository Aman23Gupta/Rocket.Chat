{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/import/PrepareUsers.tsx"],"names":[],"mappings":"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","file":"dynamic/client/views/admin/import/PrepareUsers.tsx","sourcesContent":["/* eslint-disable @typescript-eslint/camelcase */\nimport { CheckBox, Table, Tag, Pagination } from '@rocket.chat/fuselage';\nimport React, { useState, useCallback, FC, Dispatch, SetStateAction, ChangeEvent } from 'react';\n\nimport { useTranslation } from '../../../contexts/TranslationContext';\n\ntype UserDescriptor = {\n\tuser_id: string;\n\tusername: string;\n\temail: string;\n\tis_deleted: boolean;\n\tdo_import: boolean;\n};\n\ntype PrepareUsersProps = {\n\tusersCount: number;\n\tusers: UserDescriptor[];\n\tsetUsers: Dispatch<SetStateAction<UserDescriptor[]>>;\n};\n\nconst PrepareUsers: FC<PrepareUsersProps> = ({ usersCount, users, setUsers }) => {\n\tconst t = useTranslation();\n\tconst [current, setCurrent] = useState(0);\n\tconst [itemsPerPage, setItemsPerPage] = useState<25 | 50 | 100>(25);\n\tconst showingResultsLabel = useCallback(\n\t\t({ count, current, itemsPerPage }) => t('Showing_results_of', current + 1, Math.min(current + itemsPerPage, count), count),\n\t\t[t],\n\t);\n\tconst itemsPerPageLabel = useCallback(() => t('Items_per_page:'), [t]);\n\n\treturn (\n\t\t<>\n\t\t\t<Table>\n\t\t\t\t<Table.Head>\n\t\t\t\t\t<Table.Row>\n\t\t\t\t\t\t<Table.Cell width='x36'>\n\t\t\t\t\t\t\t<CheckBox\n\t\t\t\t\t\t\t\tchecked={usersCount > 0}\n\t\t\t\t\t\t\t\tindeterminate={usersCount > 0 && usersCount !== users.length}\n\t\t\t\t\t\t\t\tonChange={(): void => {\n\t\t\t\t\t\t\t\t\tsetUsers((users) => {\n\t\t\t\t\t\t\t\t\t\tconst hasCheckedDeletedUsers = users.some(({ is_deleted, do_import }) => is_deleted && do_import);\n\t\t\t\t\t\t\t\t\t\tconst isChecking = usersCount === 0;\n\n\t\t\t\t\t\t\t\t\t\tif (isChecking) {\n\t\t\t\t\t\t\t\t\t\t\treturn users.map((user) => ({ ...user, do_import: true }));\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tif (hasCheckedDeletedUsers) {\n\t\t\t\t\t\t\t\t\t\t\treturn users.map((user) => (user.is_deleted ? { ...user, do_import: false } : user));\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\treturn users.map((user) => ({ ...user, do_import: false }));\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Table.Cell>\n\t\t\t\t\t\t<Table.Cell is='th'>{t('Username')}</Table.Cell>\n\t\t\t\t\t\t<Table.Cell is='th'>{t('Email')}</Table.Cell>\n\t\t\t\t\t\t<Table.Cell is='th'></Table.Cell>\n\t\t\t\t\t</Table.Row>\n\t\t\t\t</Table.Head>\n\t\t\t\t<Table.Body>\n\t\t\t\t\t{users.slice(current, current + itemsPerPage).map((user) => (\n\t\t\t\t\t\t<Table.Row key={user.user_id}>\n\t\t\t\t\t\t\t<Table.Cell width='x36'>\n\t\t\t\t\t\t\t\t<CheckBox\n\t\t\t\t\t\t\t\t\tchecked={user.do_import}\n\t\t\t\t\t\t\t\t\tonChange={(event: ChangeEvent<HTMLInputElement>): void => {\n\t\t\t\t\t\t\t\t\t\tconst { checked } = event.currentTarget;\n\t\t\t\t\t\t\t\t\t\tsetUsers((users) => users.map((_user) => (_user === user ? { ..._user, do_import: checked } : _user)));\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</Table.Cell>\n\t\t\t\t\t\t\t<Table.Cell>{user.username}</Table.Cell>\n\t\t\t\t\t\t\t<Table.Cell>{user.email}</Table.Cell>\n\t\t\t\t\t\t\t<Table.Cell align='end'>{user.is_deleted && <Tag variant='danger'>{t('Deleted')}</Tag>}</Table.Cell>\n\t\t\t\t\t\t</Table.Row>\n\t\t\t\t\t))}\n\t\t\t\t</Table.Body>\n\t\t\t</Table>\n\t\t\t<Pagination\n\t\t\t\tcurrent={current}\n\t\t\t\titemsPerPage={itemsPerPage}\n\t\t\t\tcount={users.length || 0}\n\t\t\t\tonSetItemsPerPage={setItemsPerPage}\n\t\t\t\tonSetCurrent={setCurrent}\n\t\t\t\titemsPerPageLabel={itemsPerPageLabel}\n\t\t\t\tshowingResultsLabel={showingResultsLabel}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport default PrepareUsers;\n"]}