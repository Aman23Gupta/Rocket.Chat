{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/apps/IframeModal.js"],"names":["_extends","module","link","default","v","_objectWithoutProperties","Box","Modal","React","useEffect","iframeMsgListener","confirm","cancel","e","data","JSON","parse","result","IframeModal","url","props","listener","window","addEventListener","removeEventListener","border","height","width","exportDefault"],"mappings":";;;;;;;;;;AAAA,IAAIA,QAAJ;;AAAaC,MAAM,CAACC,IAAP,CAAY,gCAAZ,EAA6C;AAACC,SAAO,CAACC,CAAD,EAAG;AAACJ,YAAQ,GAACI,CAAT;AAAW;;AAAvB,CAA7C,EAAsE,CAAtE;;AAAyE,IAAIC,wBAAJ;;AAA6BJ,MAAM,CAACC,IAAP,CAAY,gDAAZ,EAA6D;AAACC,SAAO,CAACC,CAAD,EAAG;AAACC,4BAAwB,GAACD,CAAzB;AAA2B;;AAAvC,CAA7D,EAAsG,CAAtG;AAAnH,IAAIE,GAAJ,EAAQC,KAAR;AAAcN,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAoC;AAACI,KAAG,CAACF,CAAD,EAAG;AAACE,OAAG,GAACF,CAAJ;AAAM,GAAd;;AAAeG,OAAK,CAACH,CAAD,EAAG;AAACG,SAAK,GAACH,CAAN;AAAQ;;AAAhC,CAApC,EAAsE,CAAtE;AAAyE,IAAII,KAAJ,EAAUC,SAAV;AAAoBR,MAAM,CAACC,IAAP,CAAY,OAAZ,EAAoB;AAACC,SAAO,CAACC,CAAD,EAAG;AAACI,SAAK,GAACJ,CAAN;AAAQ,GAApB;;AAAqBK,WAAS,CAACL,CAAD,EAAG;AAACK,aAAS,GAACL,CAAV;AAAY;;AAA9C,CAApB,EAAoE,CAApE;;AAG3G,MAAMM,iBAAiB,GAAG,CAACC,OAAD,EAAUC,MAAV,KAAsBC,CAAD,IAAO;AACrD,MAAIC,IAAJ;;AACA,MAAI;AACHA,QAAI,GAAGC,IAAI,CAACC,KAAL,CAAWH,CAAC,CAACC,IAAb,CAAP;AACA,GAFD,CAEE,OAAOD,CAAP,EAAU;AACX;AACA;;AAEDC,MAAI,CAACG,MAAL,GAAcN,OAAO,CAACG,IAAD,CAArB,GAA8BF,MAAM,EAApC;AACA,CATD;;AAWA,MAAMM,WAAW,GAAG,QAAwC;AAAA,MAAvC;AAAEC,OAAF;AAAOR,WAAP;AAAgBC;AAAhB,GAAuC;AAAA,MAAZQ,KAAY;;AAC3DX,WAAS,CAAC,MAAM;AACf,UAAMY,QAAQ,GAAGX,iBAAiB,CAACC,OAAD,EAAUC,MAAV,CAAlC;AAEAU,UAAM,CAACC,gBAAP,CAAwB,SAAxB,EAAmCF,QAAnC;AAEA,WAAO,MAAM;AACZC,YAAM,CAACE,mBAAP,CAA2B,SAA3B,EAAsCH,QAAtC;AACA,KAFD;AAGA,GARQ,EAQN,CAACV,OAAD,EAAUC,MAAV,CARM,CAAT;AAUA,sBACC,oBAAC,KAAD;AAAO,UAAM,EAAC;AAAd,KAAyBQ,KAAzB,gBACC,oBAAC,GAAD;AAAK,WAAO,EAAC,KAAb;AAAmB,KAAC,EAAC,MAArB;AAA4B,KAAC,EAAC,MAA9B;AAAqC,YAAQ,EAAE;AAA/C,kBACC;AAAQ,SAAK,EAAE;AAAEK,YAAM,EAAE,MAAV;AAAkBC,YAAM,EAAE,MAA1B;AAAkCC,WAAK,EAAE;AAAzC,KAAf;AAAkE,OAAG,EAAER;AAAvE,IADD,CADD,CADD;AAOA,CAlBD;;AAdAlB,MAAM,CAAC2B,aAAP,CAkCeV,WAlCf,E","file":"dynamic/client/views/admin/apps/IframeModal.js","sourcesContent":["import { Box, Modal } from '@rocket.chat/fuselage';\nimport React, { useEffect } from 'react';\n\nconst iframeMsgListener = (confirm, cancel) => (e) => {\n\tlet data;\n\ttry {\n\t\tdata = JSON.parse(e.data);\n\t} catch (e) {\n\t\treturn;\n\t}\n\n\tdata.result ? confirm(data) : cancel();\n};\n\nconst IframeModal = ({ url, confirm, cancel, ...props }) => {\n\tuseEffect(() => {\n\t\tconst listener = iframeMsgListener(confirm, cancel);\n\n\t\twindow.addEventListener('message', listener);\n\n\t\treturn () => {\n\t\t\twindow.removeEventListener('message', listener);\n\t\t};\n\t}, [confirm, cancel]);\n\n\treturn (\n\t\t<Modal height='x360' {...props}>\n\t\t\t<Box padding='x12' w='full' h='full' flexGrow={1}>\n\t\t\t\t<iframe style={{ border: 'none', height: '100%', width: '100%' }} src={url} />\n\t\t\t</Box>\n\t\t</Modal>\n\t);\n};\n\nexport default IframeModal;\n"]}