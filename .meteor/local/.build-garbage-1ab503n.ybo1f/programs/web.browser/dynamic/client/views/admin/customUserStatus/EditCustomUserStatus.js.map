{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/customUserStatus/EditCustomUserStatus.js"],"names":["_objectWithoutProperties","module","link","default","v","export","EditCustomUserStatus","Button","ButtonGroup","TextInput","Field","Select","Icon","React","useCallback","useState","useMemo","useEffect","GenericModal","VerticalBar","useSetModal","useMethod","useToastMessageDispatch","useTranslation","close","onChange","data","props","t","dispatchToastMessage","setModal","_id","name","previousName","statusType","previousStatusType","setName","setStatusType","saveStatus","deleteStatus","hasUnsavedChanges","handleSave","type","message","error","handleDeleteButtonClick","handleClose","handleDelete","handleCancel","presenceOptions","e","currentTarget","value","exportDefault"],"mappings":"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","file":"dynamic/client/views/admin/customUserStatus/EditCustomUserStatus.js","sourcesContent":["import { Button, ButtonGroup, TextInput, Field, Select, Icon } from '@rocket.chat/fuselage';\nimport React, { useCallback, useState, useMemo, useEffect } from 'react';\n\nimport GenericModal from '../../../components/GenericModal';\nimport VerticalBar from '../../../components/VerticalBar';\nimport { useSetModal } from '../../../contexts/ModalContext';\nimport { useMethod } from '../../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\n\nexport function EditCustomUserStatus({ close, onChange, data, ...props }) {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst setModal = useSetModal();\n\n\tconst { _id, name: previousName, statusType: previousStatusType } = data || {};\n\n\tconst [name, setName] = useState(() => data?.name ?? '');\n\tconst [statusType, setStatusType] = useState(() => data?.statusType ?? '');\n\n\tuseEffect(() => {\n\t\tsetName(previousName || '');\n\t\tsetStatusType(previousStatusType || '');\n\t}, [previousName, previousStatusType, _id]);\n\n\tconst saveStatus = useMethod('insertOrUpdateUserStatus');\n\tconst deleteStatus = useMethod('deleteCustomUserStatus');\n\n\tconst hasUnsavedChanges = useMemo(\n\t\t() => previousName !== name || previousStatusType !== statusType,\n\t\t[name, previousName, previousStatusType, statusType],\n\t);\n\tconst handleSave = useCallback(async () => {\n\t\ttry {\n\t\t\tawait saveStatus({\n\t\t\t\t_id,\n\t\t\t\tpreviousName,\n\t\t\t\tpreviousStatusType,\n\t\t\t\tname,\n\t\t\t\tstatusType,\n\t\t\t});\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: t('Custom_User_Status_Updated_Successfully'),\n\t\t\t});\n\t\t\tonChange();\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t}, [saveStatus, _id, previousName, previousStatusType, name, statusType, dispatchToastMessage, t, onChange]);\n\n\tconst handleDeleteButtonClick = useCallback(() => {\n\t\tconst handleClose = () => {\n\t\t\tsetModal(null);\n\t\t\tclose();\n\t\t\tonChange();\n\t\t};\n\n\t\tconst handleDelete = async () => {\n\t\t\ttry {\n\t\t\t\tawait deleteStatus(_id);\n\t\t\t\tsetModal(() => (\n\t\t\t\t\t<GenericModal variant='success' onClose={handleClose} onConfirm={handleClose}>\n\t\t\t\t\t\t{t('Custom_User_Status_Has_Been_Deleted')}\n\t\t\t\t\t</GenericModal>\n\t\t\t\t));\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\tonChange();\n\t\t\t}\n\t\t};\n\n\t\tconst handleCancel = () => {\n\t\t\tsetModal(null);\n\t\t};\n\n\t\tsetModal(() => (\n\t\t\t<GenericModal variant='danger' onConfirm={handleDelete} onCancel={handleCancel} confirmText={t('Delete')}>\n\t\t\t\t{t('Custom_User_Status_Delete_Warning')}\n\t\t\t</GenericModal>\n\t\t));\n\t}, [_id, close, deleteStatus, dispatchToastMessage, onChange, setModal, t]);\n\n\tconst presenceOptions = [\n\t\t['online', t('Online')],\n\t\t['busy', t('Busy')],\n\t\t['away', t('Away')],\n\t\t['offline', t('Offline')],\n\t];\n\n\treturn (\n\t\t<VerticalBar.ScrollableContent {...props}>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Name')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<TextInput value={name} onChange={(e) => setName(e.currentTarget.value)} placeholder={t('Name')} />\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Label>{t('Presence')}</Field.Label>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<Select value={statusType} onChange={(value) => setStatusType(value)} placeholder={t('Presence')} options={presenceOptions} />\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<ButtonGroup stretch w='full'>\n\t\t\t\t\t\t<Button onClick={close}>{t('Cancel')}</Button>\n\t\t\t\t\t\t<Button primary onClick={handleSave} disabled={!hasUnsavedChanges}>\n\t\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t\t<Field>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<ButtonGroup stretch w='full'>\n\t\t\t\t\t\t<Button primary danger onClick={handleDeleteButtonClick}>\n\t\t\t\t\t\t\t<Icon name='trash' mie='x4' />\n\t\t\t\t\t\t\t{t('Delete')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t</VerticalBar.ScrollableContent>\n\t);\n}\n\nexport default EditCustomUserStatus;\n"]}