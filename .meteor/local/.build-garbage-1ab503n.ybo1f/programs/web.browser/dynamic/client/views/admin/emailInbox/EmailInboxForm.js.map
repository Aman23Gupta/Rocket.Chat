{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/emailInbox/EmailInboxForm.js"],"names":["Accordion","Button","ButtonGroup","TextInput","TextAreaInput","Field","ToggleSwitch","FieldGroup","Box","Margins","module","link","v","useMutableCallback","React","useCallback","useState","default","validateEmail","AutoCompleteDepartment","GenericModal","Page","useSetModal","useRoute","useEndpoint","useToastMessageDispatch","useTranslation","useComponentDidUpdate","useForm","initialValues","active","name","email","description","senderInfo","department","smtpServer","smtpPort","smtpUsername","smtpPassword","smtpSecure","imapServer","imapPort","imapUsername","imapPassword","imapSecure","getInitialValues","data","smtp","imap","server","port","username","password","secure","EmailInboxForm","id","t","dispatchToastMessage","setModal","emailError","setEmailError","values","handlers","hasUnsavedChanges","handleActive","handleName","handleEmail","handleDescription","handleSenderInfo","handleDepartment","handleSmtpServer","handleSmtpPort","handleSmtpUsername","handleSmtpPassword","handleSmtpSecure","handleImapServer","handleImapPort","handleImapUsername","handleImapPassword","handleImapSecure","router","close","push","saveEmailInbox","deleteAction","emailAlreadyExistsAction","handleRemoveClick","result","success","handleDelete","e","stopPropagation","onDeleteManager","type","message","error","handleSave","parseInt","departmentValue","value","payload","_id","checkEmailExists","emailInbox","canSave","exportDefault"],"mappings":"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","file":"dynamic/client/views/admin/emailInbox/EmailInboxForm.js","sourcesContent":["import {\n\tAccordion,\n\tButton,\n\tButtonGroup,\n\tTextInput,\n\tTextAreaInput,\n\tField,\n\tToggleSwitch,\n\tFieldGroup,\n\tBox,\n\tMargins,\n} from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useCallback, useState } from 'react';\n\nimport { validateEmail } from '../../../../lib/emailValidator';\nimport AutoCompleteDepartment from '../../../components/AutoCompleteDepartment';\nimport GenericModal from '../../../components/GenericModal';\nimport Page from '../../../components/Page';\nimport { useSetModal } from '../../../contexts/ModalContext';\nimport { useRoute } from '../../../contexts/RouterContext';\nimport { useEndpoint } from '../../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { useComponentDidUpdate } from '../../../hooks/useComponentDidUpdate';\nimport { useForm } from '../../../hooks/useForm';\n\nconst initialValues = {\n\tactive: true,\n\tname: '',\n\temail: '',\n\tdescription: '',\n\tsenderInfo: '',\n\tdepartment: '',\n\t// SMTP\n\tsmtpServer: '',\n\tsmtpPort: 587,\n\tsmtpUsername: '',\n\tsmtpPassword: '',\n\tsmtpSecure: false,\n\t// IMAP\n\timapServer: '',\n\timapPort: 993,\n\timapUsername: '',\n\timapPassword: '',\n\timapSecure: false,\n};\n\nconst getInitialValues = (data) => {\n\tif (!data) {\n\t\treturn initialValues;\n\t}\n\n\tconst { active, name, email, description, senderInfo, department, smtp, imap } = data;\n\n\treturn {\n\t\tactive: active ?? true,\n\t\tname: name ?? '',\n\t\temail: email ?? '',\n\t\tdescription: description ?? '',\n\t\tsenderInfo: senderInfo ?? '',\n\t\tdepartment: department ?? '',\n\t\t// SMTP\n\t\tsmtpServer: smtp.server ?? '',\n\t\tsmtpPort: smtp.port ?? 587,\n\t\tsmtpUsername: smtp.username ?? '',\n\t\tsmtpPassword: smtp.password ?? '',\n\t\tsmtpSecure: smtp.secure ?? false,\n\t\t// IMAP\n\t\timapServer: imap.server ?? '',\n\t\timapPort: imap.port ?? 993,\n\t\timapUsername: imap.username ?? '',\n\t\timapPassword: imap.password ?? '',\n\t\timapSecure: imap.secure ?? false,\n\t};\n};\n\nfunction EmailInboxForm({ id, data }) {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst setModal = useSetModal();\n\tconst [emailError, setEmailError] = useState();\n\tconst { values, handlers, hasUnsavedChanges } = useForm(getInitialValues(data));\n\n\tconst {\n\t\thandleActive,\n\t\thandleName,\n\t\thandleEmail,\n\t\thandleDescription,\n\t\thandleSenderInfo,\n\t\thandleDepartment,\n\t\t// SMTP\n\t\thandleSmtpServer,\n\t\thandleSmtpPort,\n\t\thandleSmtpUsername,\n\t\thandleSmtpPassword,\n\t\thandleSmtpSecure,\n\t\t// IMAP\n\t\thandleImapServer,\n\t\thandleImapPort,\n\t\thandleImapUsername,\n\t\thandleImapPassword,\n\t\thandleImapSecure,\n\t} = handlers;\n\tconst {\n\t\tactive,\n\t\tname,\n\t\temail,\n\t\tdescription,\n\t\tsenderInfo,\n\t\tdepartment,\n\t\t// SMTP\n\t\tsmtpServer,\n\t\tsmtpPort,\n\t\tsmtpUsername,\n\t\tsmtpPassword,\n\t\tsmtpSecure,\n\t\t// IMAP\n\t\timapServer,\n\t\timapPort,\n\t\timapUsername,\n\t\timapPassword,\n\t\timapSecure,\n\t} = values;\n\n\tconst router = useRoute('admin-email-inboxes');\n\n\tconst close = useCallback(() => router.push({}), [router]);\n\n\tconst saveEmailInbox = useEndpoint('POST', 'email-inbox');\n\tconst deleteAction = useEndpoint('DELETE', `email-inbox/${id}`);\n\tconst emailAlreadyExistsAction = useEndpoint('GET', `email-inbox.search?email=${email}`);\n\n\tuseComponentDidUpdate(() => {\n\t\tsetEmailError(!validateEmail(email) ? t('Validate_email_address') : null);\n\t}, [t, email]);\n\tuseComponentDidUpdate(() => {\n\t\t!email && setEmailError(null);\n\t}, [email]);\n\n\tconst handleRemoveClick = useMutableCallback(async () => {\n\t\tconst result = await deleteAction();\n\t\tif (result.success === true) {\n\t\t\tclose();\n\t\t}\n\t});\n\n\tconst handleDelete = useMutableCallback((e) => {\n\t\te.stopPropagation();\n\t\tconst onDeleteManager = async () => {\n\t\t\ttry {\n\t\t\t\tawait handleRemoveClick();\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Removed') });\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t\tsetModal();\n\t\t};\n\n\t\tsetModal(\n\t\t\t<GenericModal variant='danger' onConfirm={onDeleteManager} onCancel={() => setModal()} confirmText={t('Delete')}>\n\t\t\t\t{t('You_will_not_be_able_to_recover_email_inbox')}\n\t\t\t</GenericModal>,\n\t\t);\n\t});\n\n\tconst handleSave = useMutableCallback(async () => {\n\t\tconst smtp = {\n\t\t\tserver: smtpServer,\n\t\t\tport: parseInt(smtpPort),\n\t\t\tusername: smtpUsername,\n\t\t\tpassword: smtpPassword,\n\t\t\tsecure: smtpSecure,\n\t\t};\n\t\tconst imap = {\n\t\t\tserver: imapServer,\n\t\t\tport: parseInt(imapPort),\n\t\t\tusername: imapUsername,\n\t\t\tpassword: imapPassword,\n\t\t\tsecure: imapSecure,\n\t\t};\n\t\tconst departmentValue = department.value;\n\t\tconst payload = {\n\t\t\tactive,\n\t\t\tname,\n\t\t\temail,\n\t\t\tdescription,\n\t\t\tsenderInfo,\n\t\t\tdepartment: departmentValue,\n\t\t\tsmtp,\n\t\t\timap,\n\t\t};\n\t\tif (id) {\n\t\t\tpayload._id = id;\n\t\t}\n\t\ttry {\n\t\t\tawait saveEmailInbox(payload);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Saved') });\n\t\t\tclose();\n\t\t} catch (e) {\n\t\t\tdispatchToastMessage({ type: 'error', message: e });\n\t\t}\n\t});\n\n\tconst checkEmailExists = useMutableCallback(async () => {\n\t\tif (!email && !validateEmail(email)) {\n\t\t\treturn;\n\t\t}\n\t\tconst { emailInbox } = await emailAlreadyExistsAction();\n\n\t\tif (!emailInbox || (id && emailInbox._id === id)) {\n\t\t\treturn;\n\t\t}\n\t\tsetEmailError(t('Email_already_exists'));\n\t});\n\tconst canSave =\n\t\thasUnsavedChanges &&\n\t\tname &&\n\t\temail &&\n\t\tvalidateEmail(email) &&\n\t\t!emailError &&\n\t\tsmtpServer &&\n\t\tsmtpPort &&\n\t\tsmtpUsername &&\n\t\tsmtpPassword &&\n\t\timapServer &&\n\t\timapPort &&\n\t\timapUsername &&\n\t\timapPassword;\n\n\treturn (\n\t\t<Page.ScrollableContentWithShadow>\n\t\t\t<Box maxWidth='x600' w='full' alignSelf='center'>\n\t\t\t\t<Accordion>\n\t\t\t\t\t<Accordion.Item defaultExpanded title={t('Inbox_Info')}>\n\t\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label display='flex' justifyContent='space-between' w='full'>\n\t\t\t\t\t\t\t\t\t{t('Active')}\n\t\t\t\t\t\t\t\t\t<ToggleSwitch checked={active} onChange={handleActive} />\n\t\t\t\t\t\t\t\t</Field.Label>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Name')}*</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput value={name} onChange={handleName} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Email')}*</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput onBlur={checkEmailExists} error={emailError} value={email} onChange={handleEmail} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t\t<Field.Error>{t(emailError)}</Field.Error>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Description')}</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextAreaInput value={description} rows={4} onChange={handleDescription} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Sender_Info')}</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput value={senderInfo} onChange={handleSenderInfo} placeholder={t('Optional')} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t\t<Field.Hint>{t('Will_Appear_In_From')}</Field.Hint>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Department')}</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<AutoCompleteDepartment value={department} onChange={handleDepartment} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t\t<Field.Hint>{t('Only_Members_Selected_Department_Can_View_Channel')}</Field.Hint>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t</FieldGroup>\n\t\t\t\t\t</Accordion.Item>\n\t\t\t\t\t<Accordion.Item title={t('Configure_Outgoing_Mail_SMTP')}>\n\t\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Server')}*</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput value={smtpServer} onChange={handleSmtpServer} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Port')}*</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput type='number' value={smtpPort} onChange={handleSmtpPort} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Username')}*</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput value={smtpUsername} onChange={handleSmtpUsername} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Password')}*</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput type='password' value={smtpPassword} onChange={handleSmtpPassword} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label display='flex' justifyContent='space-between' w='full'>\n\t\t\t\t\t\t\t\t\t{t('Connect_SSL_TLS')}\n\t\t\t\t\t\t\t\t\t<ToggleSwitch checked={smtpSecure} onChange={handleSmtpSecure} />\n\t\t\t\t\t\t\t\t</Field.Label>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t</FieldGroup>\n\t\t\t\t\t</Accordion.Item>\n\t\t\t\t\t<Accordion.Item title={t('Configure_Incoming_Mail_IMAP')}>\n\t\t\t\t\t\t<FieldGroup>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Server')}*</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput value={imapServer} onChange={handleImapServer} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Port')}*</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput type='number' value={imapPort} onChange={handleImapPort} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Username')}*</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput value={imapUsername} onChange={handleImapUsername} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label>{t('Password')}*</Field.Label>\n\t\t\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t\t\t<TextInput type='password' value={imapPassword} onChange={handleImapPassword} />\n\t\t\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t\t<Field>\n\t\t\t\t\t\t\t\t<Field.Label display='flex' justifyContent='space-between' w='full'>\n\t\t\t\t\t\t\t\t\t{t('Connect_SSL_TLS')}\n\t\t\t\t\t\t\t\t\t<ToggleSwitch checked={imapSecure} onChange={handleImapSecure} />\n\t\t\t\t\t\t\t\t</Field.Label>\n\t\t\t\t\t\t\t</Field>\n\t\t\t\t\t\t</FieldGroup>\n\t\t\t\t\t</Accordion.Item>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<ButtonGroup stretch w='full'>\n\t\t\t\t\t\t\t\t<Button onClick={close}>{t('Cancel')}</Button>\n\t\t\t\t\t\t\t\t<Button disabled={!canSave} primary onClick={handleSave}>\n\t\t\t\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<Margins blockStart='x16'>\n\t\t\t\t\t\t\t\t<ButtonGroup stretch w='full'>\n\t\t\t\t\t\t\t\t\t{id && (\n\t\t\t\t\t\t\t\t\t\t<Button primary danger onClick={handleDelete}>\n\t\t\t\t\t\t\t\t\t\t\t{t('Delete')}\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t</ButtonGroup>\n\t\t\t\t\t\t\t</Margins>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t</Field>\n\t\t\t\t</Accordion>\n\t\t\t</Box>\n\t\t</Page.ScrollableContentWithShadow>\n\t);\n}\n\nexport default EmailInboxForm;\n"]}