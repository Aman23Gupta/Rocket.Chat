{"version":3,"sources":["meteor://ðŸ’»app/client/views/teams/contextualBar/members/RemoveUsersModal/BaseRemoveUsersModal.js"],"names":["_objectSpread","module","link","default","v","useMutableCallback","React","useState","useCallback","usePermission","RemoveUsersFirstStep","RemoveUsersSecondStep","STEPS","LIST_ROOMS","CONFIRM_DELETE","BaseRemoveUsersModal","onClose","onCancel","onConfirm","rooms","currentStep","length","username","step","setStep","selectedRooms","setSelectedRooms","onContinue","onReturn","canViewUserRooms","eligibleRooms","filter","isLastOwner","onChangeRoomSelection","room","_id","onToggleAllRooms","Object","values","Boolean","fromEntries","map","exportDefault"],"mappings":"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","file":"dynamic/client/views/teams/contextualBar/members/RemoveUsersModal/BaseRemoveUsersModal.js","sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useState, useCallback } from 'react';\n\nimport { usePermission } from '../../../../../contexts/AuthorizationContext';\nimport RemoveUsersFirstStep from './RemoveUsersFirstStep';\nimport RemoveUsersSecondStep from './RemoveUsersSecondStep';\n\nconst STEPS = {\n\tLIST_ROOMS: 'LIST_ROOMS',\n\tCONFIRM_DELETE: 'CONFIRM_DELETE',\n};\n\nconst BaseRemoveUsersModal = ({\n\tonClose,\n\tonCancel,\n\tonConfirm,\n\trooms,\n\tcurrentStep = rooms?.length === 0 ? STEPS.CONFIRM_DELETE : STEPS.LIST_ROOMS,\n\tusername,\n}) => {\n\tconst [step, setStep] = useState(currentStep);\n\n\tconst [selectedRooms, setSelectedRooms] = useState({});\n\n\tconst onContinue = useMutableCallback(() => setStep(STEPS.CONFIRM_DELETE));\n\tconst onReturn = useMutableCallback(() => setStep(STEPS.LIST_ROOMS));\n\n\tconst canViewUserRooms = usePermission('view-all-team-channels');\n\n\tconst eligibleRooms = rooms.filter(({ isLastOwner }) => !isLastOwner);\n\n\tconst onChangeRoomSelection = useCallback((room) => {\n\t\tsetSelectedRooms((selectedRooms) => {\n\t\t\tif (selectedRooms[room._id]) {\n\t\t\t\tdelete selectedRooms[room._id];\n\t\t\t\treturn { ...selectedRooms };\n\t\t\t}\n\t\t\treturn { ...selectedRooms, [room._id]: room };\n\t\t});\n\t}, []);\n\n\tconst onToggleAllRooms = useMutableCallback(() => {\n\t\tif (Object.values(selectedRooms).filter(Boolean).length === 0) {\n\t\t\treturn setSelectedRooms(Object.fromEntries(eligibleRooms.map((room) => [room._id, room])));\n\t\t}\n\t\tsetSelectedRooms({});\n\t});\n\n\tif (step === STEPS.CONFIRM_DELETE || !canViewUserRooms) {\n\t\treturn (\n\t\t\t<RemoveUsersSecondStep\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tonClose={onClose}\n\t\t\t\tonCancel={rooms?.length > 0 ? onReturn : onCancel}\n\t\t\t\tdeletedRooms={selectedRooms}\n\t\t\t\trooms={rooms}\n\t\t\t\tusername={username}\n\t\t\t/>\n\t\t);\n\t}\n\n\treturn (\n\t\t<RemoveUsersFirstStep\n\t\t\tonConfirm={onContinue}\n\t\t\tonClose={onClose}\n\t\t\tonCancel={onCancel}\n\t\t\trooms={rooms}\n\t\t\tparams={{}}\n\t\t\tselectedRooms={selectedRooms}\n\t\t\tonToggleAllRooms={onToggleAllRooms}\n\t\t\t// onChangeParams={(...args) => console.log(args)}\n\t\t\tonChangeRoomSelection={onChangeRoomSelection}\n\t\t\teligibleRoomsLength={eligibleRooms.length}\n\t\t/>\n\t);\n};\n\nexport default BaseRemoveUsersModal;\n"]}