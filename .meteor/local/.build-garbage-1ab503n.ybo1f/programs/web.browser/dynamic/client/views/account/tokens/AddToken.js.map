{"version":3,"sources":["meteor://ðŸ’»app/client/views/account/tokens/AddToken.js"],"names":["_extends","module","link","default","v","_objectWithoutProperties","Box","TextInput","Button","Field","FieldGroup","Margins","CheckBox","useUniqueId","React","useCallback","useSetModal","useMethod","useToastMessageDispatch","useTranslation","useUserId","useForm","InfoModal","initialValues","name","bypassTwoFactor","AddToken","onDidAddToken","props","t","createTokenFn","dispatchToastMessage","setModal","userId","values","handlers","reset","handleName","handleBypassTwoFactor","closeModal","handleAdd","token","tokenName","__html","error","type","message","bypassTwoFactorCheckboxId","length","exportDefault"],"mappings":"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","file":"dynamic/client/views/account/tokens/AddToken.js","sourcesContent":["import { Box, TextInput, Button, Field, FieldGroup, Margins, CheckBox } from '@rocket.chat/fuselage';\nimport { useUniqueId } from '@rocket.chat/fuselage-hooks';\nimport React, { useCallback } from 'react';\n\nimport { useSetModal } from '../../../contexts/ModalContext';\nimport { useMethod } from '../../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { useUserId } from '../../../contexts/UserContext';\nimport { useForm } from '../../../hooks/useForm';\nimport InfoModal from './InfoModal';\n\nconst initialValues = {\n\tname: '',\n\tbypassTwoFactor: false,\n};\n\nconst AddToken = ({ onDidAddToken, ...props }) => {\n\tconst t = useTranslation();\n\tconst createTokenFn = useMethod('personalAccessTokens:generateToken');\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst setModal = useSetModal();\n\n\tconst userId = useUserId();\n\n\tconst { values, handlers, reset } = useForm(initialValues);\n\n\tconst { name, bypassTwoFactor } = values;\n\tconst { handleName, handleBypassTwoFactor } = handlers;\n\n\tconst closeModal = useCallback(() => setModal(null), [setModal]);\n\n\tconst handleAdd = useCallback(async () => {\n\t\ttry {\n\t\t\tconst token = await createTokenFn({ tokenName: name, bypassTwoFactor });\n\n\t\t\tsetModal(\n\t\t\t\t<InfoModal\n\t\t\t\t\ttitle={t('API_Personal_Access_Token_Generated')}\n\t\t\t\t\tcontent={\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tdangerouslySetInnerHTML={{\n\t\t\t\t\t\t\t\t__html: t('API_Personal_Access_Token_Generated_Text_Token_s_UserId_s', {\n\t\t\t\t\t\t\t\t\ttoken,\n\t\t\t\t\t\t\t\t\tuserId,\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t}\n\t\t\t\t\tconfirmText={t('ok')}\n\t\t\t\t\tonConfirm={closeModal}\n\t\t\t\t/>,\n\t\t\t);\n\t\t\treset();\n\t\t\tonDidAddToken();\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t}, [bypassTwoFactor, closeModal, createTokenFn, dispatchToastMessage, name, onDidAddToken, reset, setModal, t, userId]);\n\n\tconst bypassTwoFactorCheckboxId = useUniqueId();\n\n\treturn (\n\t\t<FieldGroup is='form' marginBlock='x8' {...props}>\n\t\t\t<Field>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<Margins inlineEnd='x4'>\n\t\t\t\t\t\t<TextInput value={name} onChange={handleName} placeholder={t('API_Add_Personal_Access_Token')} />\n\t\t\t\t\t</Margins>\n\t\t\t\t\t<Button primary disabled={name.length === 0} onClick={handleAdd}>\n\t\t\t\t\t\t{t('Add')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Field.Row>\n\t\t\t\t<Field.Row>\n\t\t\t\t\t<CheckBox id={bypassTwoFactorCheckboxId} checked={bypassTwoFactor} onChange={handleBypassTwoFactor} />\n\t\t\t\t\t<Field.Label htmlFor={bypassTwoFactorCheckboxId}>\n\t\t\t\t\t\t{t('Ignore')} {t('Two Factor Authentication')}\n\t\t\t\t\t</Field.Label>\n\t\t\t\t</Field.Row>\n\t\t\t</Field>\n\t\t</FieldGroup>\n\t);\n};\n\nexport default AddToken;\n"]}