{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/agents/AgentInfo.js"],"names":["_extends","module","link","default","v","_objectWithoutProperties","export","AgentInfo","Box","Margins","ButtonGroup","React","memo","useSubscription","FormSkeleton","UserStatus","VerticalBar","useTranslation","AsyncStatePhase","useEndpointData","UserInfo","formsSubscription","AgentInfoAction","uid","children","props","t","value","data","phase","state","error","eeForms","useMaxChatsPerAgentDisplay","MaxChats","LOADING","user","username","statusLivechat","status","userStatus","exportDefault","Object","assign","Action"],"mappings":";;;;;;;;;;AAAA,IAAIA,QAAJ;;AAAaC,MAAM,CAACC,IAAP,CAAY,gCAAZ,EAA6C;AAACC,SAAO,CAACC,CAAD,EAAG;AAACJ,YAAQ,GAACI,CAAT;AAAW;;AAAvB,CAA7C,EAAsE,CAAtE;;AAAyE,IAAIC,wBAAJ;;AAA6BJ,MAAM,CAACC,IAAP,CAAY,gDAAZ,EAA6D;AAACC,SAAO,CAACC,CAAD,EAAG;AAACC,4BAAwB,GAACD,CAAzB;AAA2B;;AAAvC,CAA7D,EAAsG,CAAtG;AAAnHH,MAAM,CAACK,MAAP,CAAc;AAACC,WAAS,EAAC,MAAIA;AAAf,CAAd;AAAyC,IAAIC,GAAJ,EAAQC,OAAR,EAAgBC,WAAhB;AAA4BT,MAAM,CAACC,IAAP,CAAY,uBAAZ,EAAoC;AAACM,KAAG,CAACJ,CAAD,EAAG;AAACI,OAAG,GAACJ,CAAJ;AAAM,GAAd;;AAAeK,SAAO,CAACL,CAAD,EAAG;AAACK,WAAO,GAACL,CAAR;AAAU,GAApC;;AAAqCM,aAAW,CAACN,CAAD,EAAG;AAACM,eAAW,GAACN,CAAZ;AAAc;;AAAlE,CAApC,EAAwG,CAAxG;AAA2G,IAAIO,KAAJ,EAAUC,IAAV;AAAeX,MAAM,CAACC,IAAP,CAAY,OAAZ,EAAoB;AAACC,SAAO,CAACC,CAAD,EAAG;AAACO,SAAK,GAACP,CAAN;AAAQ,GAApB;;AAAqBQ,MAAI,CAACR,CAAD,EAAG;AAACQ,QAAI,GAACR,CAAL;AAAO;;AAApC,CAApB,EAA0D,CAA1D;AAA6D,IAAIS,eAAJ;AAAoBZ,MAAM,CAACC,IAAP,CAAY,kBAAZ,EAA+B;AAACW,iBAAe,CAACT,CAAD,EAAG;AAACS,mBAAe,GAACT,CAAhB;AAAkB;;AAAtC,CAA/B,EAAuE,CAAvE;AAA0E,IAAIU,YAAJ;AAAiBb,MAAM,CAACC,IAAP,CAAY,8BAAZ,EAA2C;AAACY,cAAY,CAACV,CAAD,EAAG;AAACU,gBAAY,GAACV,CAAb;AAAe;;AAAhC,CAA3C,EAA6E,CAA7E;AAAgF,IAAIW,UAAJ;AAAed,MAAM,CAACC,IAAP,CAAY,gCAAZ,EAA6C;AAACa,YAAU,CAACX,CAAD,EAAG;AAACW,cAAU,GAACX,CAAX;AAAa;;AAA5B,CAA7C,EAA2E,CAA3E;AAA8E,IAAIY,WAAJ;AAAgBf,MAAM,CAACC,IAAP,CAAY,iCAAZ,EAA8C;AAACC,SAAO,CAACC,CAAD,EAAG;AAACY,eAAW,GAACZ,CAAZ;AAAc;;AAA1B,CAA9C,EAA0E,CAA1E;AAA6E,IAAIa,cAAJ;AAAmBhB,MAAM,CAACC,IAAP,CAAY,sCAAZ,EAAmD;AAACe,gBAAc,CAACb,CAAD,EAAG;AAACa,kBAAc,GAACb,CAAf;AAAiB;;AAApC,CAAnD,EAAyF,CAAzF;AAA4F,IAAIc,eAAJ;AAAoBjB,MAAM,CAACC,IAAP,CAAY,8BAAZ,EAA2C;AAACgB,iBAAe,CAACd,CAAD,EAAG;AAACc,mBAAe,GAACd,CAAhB;AAAkB;;AAAtC,CAA3C,EAAmF,CAAnF;AAAsF,IAAIe,eAAJ;AAAoBlB,MAAM,CAACC,IAAP,CAAY,gCAAZ,EAA6C;AAACiB,iBAAe,CAACf,CAAD,EAAG;AAACe,mBAAe,GAACf,CAAhB;AAAkB;;AAAtC,CAA7C,EAAqF,CAArF;AAAwF,IAAIgB,QAAJ;AAAanB,MAAM,CAACC,IAAP,CAAY,mCAAZ,EAAgD;AAACC,SAAO,CAACC,CAAD,EAAG;AAACgB,YAAQ,GAAChB,CAAT;AAAW;;AAAvB,CAAhD,EAAyE,CAAzE;AAA4E,IAAIiB,iBAAJ;AAAsBpB,MAAM,CAACC,IAAP,CAAY,oBAAZ,EAAiC;AAACmB,mBAAiB,CAACjB,CAAD,EAAG;AAACiB,qBAAiB,GAACjB,CAAlB;AAAoB;;AAA1C,CAAjC,EAA6E,EAA7E;AAAiF,IAAIkB,eAAJ;AAAoBrB,MAAM,CAACC,IAAP,CAAY,mBAAZ,EAAgC;AAACC,SAAO,CAACC,CAAD,EAAG;AAACkB,mBAAe,GAAClB,CAAhB;AAAkB;;AAA9B,CAAhC,EAAgE,EAAhE;AAcvoC,MAAMG,SAAS,gBAAGK,IAAI,CAAC,SAASL,SAAT,OAAgD;AAAA,MAA7B;AAAEgB,OAAF;AAAOC;AAAP,GAA6B;AAAA,MAATC,KAAS;;AAC7E,QAAMC,CAAC,GAAGT,cAAc,EAAxB;AACA,QAAM;AAAEU,SAAK,EAAEC,IAAT;AAAeC,SAAK,EAAEC,KAAtB;AAA6BC;AAA7B,MAAuCZ,eAAe,gCAAyBI,GAAzB,EAA5D;AACA,QAAMS,OAAO,GAAGnB,eAAe,CAACQ,iBAAD,CAA/B;AAEA,QAAM;AAAEY,8BAA0B,GAAG,MAAM,CAAE;AAAvC,MAA4CD,OAAlD;AAEA,QAAME,QAAQ,GAAGD,0BAA0B,EAA3C;;AAEA,MAAIH,KAAK,KAAKZ,eAAe,CAACiB,OAA9B,EAAuC;AACtC,wBAAO,oBAAC,YAAD,OAAP;AACA;;AAED,MAAIJ,KAAK,IAAI,CAACH,IAAV,IAAkB,CAACA,IAAI,CAACQ,IAA5B,EAAkC;AACjC,wBAAO,oBAAC,GAAD;AAAK,SAAG,EAAC;AAAT,OAAgBV,CAAC,CAAC,gBAAD,CAAjB,CAAP;AACA;;AAED,QAAM;AAAEU;AAAF,MAAWR,IAAjB;AACA,QAAM;AAAES,YAAF;AAAYC,kBAAZ;AAA4BC,UAAM,EAAEC;AAApC,MAAmDJ,IAAzD;AAEA,sBACC,oBAAC,WAAD,CAAa,iBAAb;AAA+B,KAAC,EAAC;AAAjC,KAA2CX,KAA3C,gBACC,oBAAC,GAAD;AAAK,aAAS,EAAC;AAAf,kBACC,oBAAC,QAAD,CAAU,MAAV;AAAiB,QAAI,EAAE,MAAvB;AAA+B,YAAQ,EAAEY;AAAzC,IADD,CADD,eAKC,oBAAC,WAAD;AAAa,MAAE,EAAC,QAAhB;AAAyB,cAAU,EAAE,CAArC;AAAwC,YAAQ,EAAC,QAAjD;AAA0D,qBAAiB,MAA3E;AAA4E,kBAAc,EAAC,QAA3F;AAAoG,cAAU,EAAE;AAAhH,KACEb,QADF,CALD,eASC,oBAAC,OAAD;AAAS,SAAK,EAAC;AAAf,kBACC,oBAAC,GAAD;AAAK,MAAE,EAAC;AAAR,kBACC,oBAAC,QAAD,CAAU,QAAV;AAAmB,QAAI,EAAEa,QAAzB;AAAmC,UAAM,eAAE,oBAAC,UAAD;AAAY,YAAM,EAAEG;AAApB;AAA3C,IADD,CADD,EAKEF,cAAc,iBACd,uDACC,oBAAC,QAAD,CAAU,KAAV,QAAiBZ,CAAC,CAAC,iBAAD,CAAlB,CADD,eAEC,oBAAC,QAAD,CAAU,IAAV,QAAgBA,CAAC,CAACY,cAAc,KAAK,WAAnB,GAAiC,WAAjC,GAA+C,eAAhD,CAAjB,CAFD,CANF,EAYEJ,QAAQ,iBAAI,oBAAC,QAAD;AAAU,QAAI,EAAEE;AAAhB,IAZd,CATD,CADD;AA0BA,CA9C4B,CAAtB;AAdPnC,MAAM,CAACwC,aAAP,CA8DeC,MAAM,CAACC,MAAP,CAAcpC,SAAd,EAAyB;AACvCqC,QAAM,EAAEtB;AAD+B,CAAzB,CA9Df,E","file":"dynamic/client/views/omnichannel/agents/AgentInfo.js","sourcesContent":["import { Box, Margins, ButtonGroup } from '@rocket.chat/fuselage';\nimport React, { memo } from 'react';\nimport { useSubscription } from 'use-subscription';\n\nimport { FormSkeleton } from '../../../components/Skeleton';\nimport { UserStatus } from '../../../components/UserStatus';\nimport VerticalBar from '../../../components/VerticalBar';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { AsyncStatePhase } from '../../../hooks/useAsyncState';\nimport { useEndpointData } from '../../../hooks/useEndpointData';\nimport UserInfo from '../../room/contextualBar/UserInfo';\nimport { formsSubscription } from '../additionalForms';\nimport AgentInfoAction from './AgentInfoAction';\n\nexport const AgentInfo = memo(function AgentInfo({ uid, children, ...props }) {\n\tconst t = useTranslation();\n\tconst { value: data, phase: state, error } = useEndpointData(`livechat/users/agent/${uid}`);\n\tconst eeForms = useSubscription(formsSubscription);\n\n\tconst { useMaxChatsPerAgentDisplay = () => {} } = eeForms;\n\n\tconst MaxChats = useMaxChatsPerAgentDisplay();\n\n\tif (state === AsyncStatePhase.LOADING) {\n\t\treturn <FormSkeleton />;\n\t}\n\n\tif (error || !data || !data.user) {\n\t\treturn <Box mbs='x16'>{t('User_not_found')}</Box>;\n\t}\n\n\tconst { user } = data;\n\tconst { username, statusLivechat, status: userStatus } = user;\n\n\treturn (\n\t\t<VerticalBar.ScrollableContent p='x24' {...props}>\n\t\t\t<Box alignSelf='center'>\n\t\t\t\t<UserInfo.Avatar size={'x332'} username={username} />\n\t\t\t</Box>\n\n\t\t\t<ButtonGroup mi='neg-x4' flexShrink={0} flexWrap='nowrap' withTruncatedText justifyContent='center' flexShrink={0}>\n\t\t\t\t{children}\n\t\t\t</ButtonGroup>\n\n\t\t\t<Margins block='x4'>\n\t\t\t\t<Box mb='x2'>\n\t\t\t\t\t<UserInfo.Username name={username} status={<UserStatus status={userStatus} />} />\n\t\t\t\t</Box>\n\n\t\t\t\t{statusLivechat && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<UserInfo.Label>{t('Livechat_status')}</UserInfo.Label>\n\t\t\t\t\t\t<UserInfo.Info>{t(statusLivechat === 'available' ? 'Available' : 'Not_Available')}</UserInfo.Info>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\n\t\t\t\t{MaxChats && <MaxChats data={user} />}\n\t\t\t</Margins>\n\t\t</VerticalBar.ScrollableContent>\n\t);\n});\n\nexport default Object.assign(AgentInfo, {\n\tAction: AgentInfoAction,\n});\n"]}