{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/customSounds/AdminSoundsRoute.js"],"names":["_objectSpread","module","link","default","v","Button","Icon","useDebouncedValue","React","useMemo","useState","useCallback","NotAuthorizedPage","Page","VerticalBar","usePermission","useRoute","useRouteParameter","useTranslation","useEndpointData","AddCustomSound","AdminSounds","EditCustomSound","CustomSoundsRoute","route","context","id","canManageCustomSounds","t","params","setParams","text","current","itemsPerPage","sort","setSort","column","direction","query","JSON","stringify","name","$regex","$options","count","offset","value","data","reload","handleItemClick","_id","push","handleHeaderClick","sortBy","sortDirection","handleNewButtonClick","handleClose","handleChange","exportDefault"],"mappings":"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","file":"dynamic/client/views/admin/customSounds/AdminSoundsRoute.js","sourcesContent":["import { Button, Icon } from '@rocket.chat/fuselage';\nimport { useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport React, { useMemo, useState, useCallback } from 'react';\n\nimport NotAuthorizedPage from '../../../components/NotAuthorizedPage';\nimport Page from '../../../components/Page';\nimport VerticalBar from '../../../components/VerticalBar';\nimport { usePermission } from '../../../contexts/AuthorizationContext';\nimport { useRoute, useRouteParameter } from '../../../contexts/RouterContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { useEndpointData } from '../../../hooks/useEndpointData';\nimport AddCustomSound from './AddCustomSound';\nimport AdminSounds from './AdminSounds';\nimport EditCustomSound from './EditCustomSound';\n\nfunction CustomSoundsRoute() {\n\tconst route = useRoute('custom-sounds');\n\tconst context = useRouteParameter('context');\n\tconst id = useRouteParameter('id');\n\tconst canManageCustomSounds = usePermission('manage-sounds');\n\n\tconst t = useTranslation();\n\n\tconst [params, setParams] = useState(() => ({ text: '', current: 0, itemsPerPage: 25 }));\n\tconst [sort, setSort] = useState(() => ['name', 'asc']);\n\n\tconst { text, itemsPerPage, current } = useDebouncedValue(params, 500);\n\tconst [column, direction] = useDebouncedValue(sort, 500);\n\tconst query = useMemo(\n\t\t() => ({\n\t\t\tquery: JSON.stringify({ name: { $regex: text || '', $options: 'i' } }),\n\t\t\tsort: JSON.stringify({ [column]: direction === 'asc' ? 1 : -1 }),\n\t\t\t...(itemsPerPage && { count: itemsPerPage }),\n\t\t\t...(current && { offset: current }),\n\t\t}),\n\t\t[text, itemsPerPage, current, column, direction],\n\t);\n\n\tconst { value: data, reload } = useEndpointData('custom-sounds.list', query);\n\n\tconst handleItemClick = useCallback(\n\t\t(_id) => () => {\n\t\t\troute.push({\n\t\t\t\tcontext: 'edit',\n\t\t\t\tid: _id,\n\t\t\t});\n\t\t},\n\t\t[route],\n\t);\n\n\tconst handleHeaderClick = (id) => {\n\t\tsetSort(([sortBy, sortDirection]) => {\n\t\t\tif (sortBy === id) {\n\t\t\t\treturn [id, sortDirection === 'asc' ? 'desc' : 'asc'];\n\t\t\t}\n\n\t\t\treturn [id, 'asc'];\n\t\t});\n\t};\n\n\tconst handleNewButtonClick = useCallback(() => {\n\t\troute.push({ context: 'new' });\n\t}, [route]);\n\n\tconst handleClose = useCallback(() => {\n\t\troute.push({});\n\t}, [route]);\n\n\tconst handleChange = useCallback(() => {\n\t\treload();\n\t}, [reload]);\n\n\tif (!canManageCustomSounds) {\n\t\treturn <NotAuthorizedPage />;\n\t}\n\n\treturn (\n\t\t<Page flexDirection='row'>\n\t\t\t<Page name='admin-custom-sounds'>\n\t\t\t\t<Page.Header title={t('Custom_Sounds')}>\n\t\t\t\t\t<Button primary onClick={handleNewButtonClick} aria-label={t('New')}>\n\t\t\t\t\t\t<Icon name='plus' /> {t('New')}\n\t\t\t\t\t</Button>\n\t\t\t\t</Page.Header>\n\t\t\t\t<Page.Content>\n\t\t\t\t\t<AdminSounds\n\t\t\t\t\t\tsetParams={setParams}\n\t\t\t\t\t\tparams={params}\n\t\t\t\t\t\tonHeaderClick={handleHeaderClick}\n\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\tonClick={handleItemClick}\n\t\t\t\t\t\tsort={sort}\n\t\t\t\t\t/>\n\t\t\t\t</Page.Content>\n\t\t\t</Page>\n\t\t\t{context && (\n\t\t\t\t<VerticalBar flexShrink={0}>\n\t\t\t\t\t<VerticalBar.Header>\n\t\t\t\t\t\t{context === 'edit' && t('Custom_Sound_Edit')}\n\t\t\t\t\t\t{context === 'new' && t('Custom_Sound_Add')}\n\t\t\t\t\t\t<VerticalBar.Close onClick={handleClose} />\n\t\t\t\t\t</VerticalBar.Header>\n\t\t\t\t\t{context === 'edit' && <EditCustomSound _id={id} close={handleClose} onChange={handleChange} />}\n\t\t\t\t\t{context === 'new' && <AddCustomSound goToNew={handleItemClick} close={handleClose} onChange={handleChange} />}\n\t\t\t\t</VerticalBar>\n\t\t\t)}\n\t\t</Page>\n\t);\n}\n\nexport default CustomSoundsRoute;\n"]}