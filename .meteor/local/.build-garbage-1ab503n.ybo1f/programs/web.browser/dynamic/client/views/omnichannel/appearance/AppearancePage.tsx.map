{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/appearance/AppearancePage.tsx"],"names":[],"mappings":"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","file":"dynamic/client/views/omnichannel/appearance/AppearancePage.tsx","sourcesContent":["import { ButtonGroup, Button, Box } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { FC } from 'react';\n\nimport { ISetting } from '../../../../definition/ISetting';\nimport { Serialized } from '../../../../definition/Serialized';\nimport Page from '../../../components/Page';\nimport { useMethod } from '../../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { useForm } from '../../../hooks/useForm';\nimport AppearanceForm from './AppearanceForm';\n\ntype LivechatAppearanceSettings = {\n\tLivechat_title: string;\n\tLivechat_title_color: string;\n\tLivechat_show_agent_info: boolean;\n\tLivechat_show_agent_email: boolean;\n\tLivechat_display_offline_form: boolean;\n\tLivechat_offline_form_unavailable: string;\n\tLivechat_offline_message: string;\n\tLivechat_offline_title: string;\n\tLivechat_offline_title_color: string;\n\tLivechat_offline_email: string;\n\tLivechat_offline_success_message: string;\n\tLivechat_registration_form: boolean;\n\tLivechat_name_field_registration_form: boolean;\n\tLivechat_email_field_registration_form: boolean;\n\tLivechat_registration_form_message: string;\n\tLivechat_conversation_finished_message: string;\n\tLivechat_conversation_finished_text: string;\n\tLivechat_enable_message_character_limit: boolean;\n\tLivechat_message_character_limit: number;\n};\n\ntype AppearanceSettings = Partial<LivechatAppearanceSettings>;\n\nconst reduceAppearance = (settings: Serialized<ISetting>[]): AppearanceSettings =>\n\tsettings.reduce<Partial<LivechatAppearanceSettings>>((acc, { _id, value }) => {\n\t\tacc = { ...acc, [_id]: value };\n\t\treturn acc;\n\t}, {});\n\ntype AppearancePageProps = {\n\tsettings: Serialized<ISetting>[];\n};\n\nconst AppearancePage: FC<AppearancePageProps> = ({ settings }) => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst save: (settings: Pick<ISetting, '_id'>[] & { value: unknown }[]) => Promise<void> = useMethod('livechat:saveAppearance');\n\n\tconst { values, handlers, commit, reset, hasUnsavedChanges } = useForm(reduceAppearance(settings));\n\n\tconst handleSave = useMutableCallback(async () => {\n\t\tconst mappedAppearance = Object.entries(values).map(([_id, value]) => ({ _id, value }));\n\n\t\ttry {\n\t\t\tawait save(mappedAppearance);\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Settings_updated') });\n\t\t\tcommit();\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'success', message: error });\n\t\t}\n\t});\n\n\tconst handleResetButtonClick = (): void => {\n\t\treset();\n\t};\n\n\treturn (\n\t\t<Page>\n\t\t\t<Page.Header title={t('Appearance')}>\n\t\t\t\t<ButtonGroup align='end'>\n\t\t\t\t\t<Button onClick={handleResetButtonClick}>{t('Reset')}</Button>\n\t\t\t\t\t<Button primary onClick={handleSave} disabled={!hasUnsavedChanges}>\n\t\t\t\t\t\t{t('Save')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Page.Header>\n\t\t\t<Page.ScrollableContentWithShadow>\n\t\t\t\t<Box maxWidth='x600' w='full' alignSelf='center'>\n\t\t\t\t\t<AppearanceForm values={values} handlers={handlers} />\n\t\t\t\t</Box>\n\t\t\t</Page.ScrollableContentWithShadow>\n\t\t</Page>\n\t);\n};\n\nexport default AppearancePage;\n"]}