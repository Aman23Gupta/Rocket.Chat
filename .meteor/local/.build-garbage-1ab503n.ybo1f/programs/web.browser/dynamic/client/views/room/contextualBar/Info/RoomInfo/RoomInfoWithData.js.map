{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/Info/RoomInfo/RoomInfoWithData.js"],"names":["useMutableCallback","module","link","v","React","default","RoomManager","roomTypes","UiTextContext","GenericModal","usePermission","useSetModal","useRoute","useEndpoint","useMethod","useSetting","useToastMessageDispatch","useTranslation","useUserRoom","useEndpointActionExperimental","WarningModal","useTabBarClose","ChannelToTeamModal","RoomInfo","retentionPolicyMaxAge","c","p","d","retentionPolicyAppliesTo","RoomInfoWithData","rid","openEditing","onClickBack","onEnterRoom","resetState","onClickClose","t","room","type","fname","prid","joined","retentionPolicyEnabled","retentionPolicy","maxAgeDefault","retentionEnabledDefault","excludePinnedDefault","filesOnlyDefault","dispatchToastMessage","setModal","closeModal","deleteRoom","hideRoom","leaveRoom","router","moveChannelToTeam","convertRoomToTeam","canDelete","canEdit","canConvertRoomToTeam","canLeave","cl","handleDelete","onConfirm","roomId","message","push","error","handleLeave","leave","close","warnText","getConfig","getUiText","LEAVE_WARNING","handleHide","hide","HIDE_WARNING","onMoveToTeam","teamId","rooms","onConvertToTeam","data","channelId","onClickEnterRoom","allowConvertToTeam","exportDefault"],"mappings":"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","file":"dynamic/client/views/room/contextualBar/Info/RoomInfo/RoomInfoWithData.js","sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React from 'react';\n\nimport { RoomManager } from '../../../../../../app/ui-utils/client/lib/RoomManager';\nimport { roomTypes, UiTextContext } from '../../../../../../app/utils/client';\nimport GenericModal from '../../../../../components/GenericModal';\nimport { usePermission } from '../../../../../contexts/AuthorizationContext';\nimport { useSetModal } from '../../../../../contexts/ModalContext';\nimport { useRoute } from '../../../../../contexts/RouterContext';\nimport { useEndpoint, useMethod } from '../../../../../contexts/ServerContext';\nimport { useSetting } from '../../../../../contexts/SettingsContext';\nimport { useToastMessageDispatch } from '../../../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../../../contexts/TranslationContext';\nimport { useUserRoom } from '../../../../../contexts/UserContext';\nimport { useEndpointActionExperimental } from '../../../../../hooks/useEndpointActionExperimental';\nimport WarningModal from '../../../../admin/apps/WarningModal';\nimport { useTabBarClose } from '../../../providers/ToolboxProvider';\nimport ChannelToTeamModal from '../ChannelToTeamModal/ChannelToTeamModal';\nimport RoomInfo from './RoomInfo';\n\nconst retentionPolicyMaxAge = {\n\tc: 'RetentionPolicy_MaxAge_Channels',\n\tp: 'RetentionPolicy_MaxAge_Groups',\n\td: 'RetentionPolicy_MaxAge_DMs',\n};\n\nconst retentionPolicyAppliesTo = {\n\tc: 'RetentionPolicy_AppliesToChannels',\n\tp: 'RetentionPolicy_AppliesToGroups',\n\td: 'RetentionPolicy_AppliesToDMs',\n};\n\nconst RoomInfoWithData = ({ rid, openEditing, onClickBack, onEnterRoom, resetState }) => {\n\tconst onClickClose = useTabBarClose();\n\tconst t = useTranslation();\n\n\tconst room = useUserRoom(rid);\n\troom.type = room.t;\n\troom.rid = rid;\n\n\tconst { type, fname, prid, joined = true } = room; // TODO implement joined\n\n\tconst retentionPolicyEnabled = useSetting('RetentionPolicy_Enabled');\n\tconst retentionPolicy = {\n\t\tretentionPolicyEnabled,\n\t\tmaxAgeDefault: useSetting(retentionPolicyMaxAge[room.t]) || 30,\n\t\tretentionEnabledDefault: useSetting(retentionPolicyAppliesTo[room.t]),\n\t\texcludePinnedDefault: useSetting('RetentionPolicy_DoNotPrunePinned'),\n\t\tfilesOnlyDefault: useSetting('RetentionPolicy_FilesOnly'),\n\t};\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst setModal = useSetModal();\n\tconst closeModal = useMutableCallback(() => setModal());\n\tconst deleteRoom = useEndpoint('POST', room.t === 'c' ? 'channels.delete' : 'groups.delete');\n\tconst hideRoom = useMethod('hideRoom');\n\tconst leaveRoom = useMethod('leaveRoom');\n\tconst router = useRoute('home');\n\n\tconst moveChannelToTeam = useEndpointActionExperimental('POST', 'teams.addRooms', t('Success'));\n\tconst convertRoomToTeam = useEndpointActionExperimental(\n\t\t'POST',\n\t\ttype === 'c' ? 'channels.convertToTeam' : 'groups.convertToTeam',\n\t\tt('Success'),\n\t);\n\n\tconst canDelete = usePermission(type === 'c' ? 'delete-c' : 'delete-p', rid);\n\tconst canEdit = usePermission('edit-room', rid);\n\tconst canConvertRoomToTeam = usePermission('create-team');\n\tconst canLeave = usePermission(type === 'c' ? 'leave-c' : 'leave-p') && room.cl !== false && joined;\n\n\tconst handleDelete = useMutableCallback(() => {\n\t\tconst onConfirm = async () => {\n\t\t\ttry {\n\t\t\t\tresetState && resetState({});\n\t\t\t\tawait deleteRoom({ roomId: rid });\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Room_has_been_deleted') });\n\t\t\t\t!resetState && router.push({});\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t\tcloseModal();\n\t\t};\n\n\t\tsetModal(\n\t\t\t<GenericModal variant='danger' onConfirm={onConfirm} onCancel={closeModal} confirmText={t('Yes_delete_it')}>\n\t\t\t\t{t('Delete_Room_Warning')}\n\t\t\t</GenericModal>,\n\t\t);\n\t});\n\n\tconst handleLeave = useMutableCallback(() => {\n\t\tconst leave = async () => {\n\t\t\ttry {\n\t\t\t\tawait leaveRoom(rid);\n\t\t\t\trouter.push({});\n\t\t\t\tRoomManager.close(rid);\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t\tcloseModal();\n\t\t};\n\n\t\tconst warnText = roomTypes.getConfig(type).getUiText(UiTextContext.LEAVE_WARNING);\n\n\t\tsetModal(\n\t\t\t<WarningModal\n\t\t\t\ttext={t(warnText, fname)}\n\t\t\t\tconfirmText={t('Leave_room')}\n\t\t\t\tclose={closeModal}\n\t\t\t\tcancel={closeModal}\n\t\t\t\tcancelText={t('Cancel')}\n\t\t\t\tconfirm={leave}\n\t\t\t/>,\n\t\t);\n\t});\n\n\tconst handleHide = useMutableCallback(async () => {\n\t\tconst hide = async () => {\n\t\t\ttry {\n\t\t\t\tawait hideRoom(rid);\n\t\t\t\trouter.push({});\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t\tcloseModal();\n\t\t};\n\n\t\tconst warnText = roomTypes.getConfig(type).getUiText(UiTextContext.HIDE_WARNING);\n\n\t\tsetModal(\n\t\t\t<WarningModal\n\t\t\t\ttext={t(warnText, fname)}\n\t\t\t\tconfirmText={t('Yes_hide_it')}\n\t\t\t\tclose={closeModal}\n\t\t\t\tcancel={closeModal}\n\t\t\t\tcancelText={t('Cancel')}\n\t\t\t\tconfirm={hide}\n\t\t\t/>,\n\t\t);\n\t});\n\n\tconst onMoveToTeam = useMutableCallback(async () => {\n\t\tconst onConfirm = async (teamId) => {\n\t\t\ttry {\n\t\t\t\tawait moveChannelToTeam({ rooms: [rid], teamId });\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tcloseModal();\n\t\t\t}\n\t\t};\n\n\t\tsetModal(<ChannelToTeamModal rid={rid} onClose={closeModal} onCancel={closeModal} onConfirm={onConfirm} />);\n\t});\n\n\tconst onConvertToTeam = useMutableCallback(async () => {\n\t\tconst data = type === 'c' ? { channelId: rid } : { roomId: rid };\n\t\tconst onConfirm = async () => {\n\t\t\ttry {\n\t\t\t\tawait convertRoomToTeam(data);\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t} finally {\n\t\t\t\tcloseModal();\n\t\t\t}\n\t\t};\n\n\t\tsetModal(\n\t\t\t<GenericModal\n\t\t\t\ttitle={t('Confirmation')}\n\t\t\t\tvariant='warning'\n\t\t\t\tonClose={closeModal}\n\t\t\t\tonCancel={closeModal}\n\t\t\t\tonConfirm={onConfirm}\n\t\t\t\tconfirmText={t('Convert')}\n\t\t\t>\n\t\t\t\t{t('Converting_channel_to_a_team')}\n\t\t\t</GenericModal>,\n\t\t);\n\t});\n\n\tconst onClickEnterRoom = useMutableCallback(() => onEnterRoom(room));\n\tconst allowConvertToTeam = !room.teamId && !prid && canConvertRoomToTeam && canEdit;\n\n\treturn (\n\t\t<RoomInfo\n\t\t\troom={room}\n\t\t\ticon={room.t === 'p' ? 'lock' : 'hashtag'}\n\t\t\tretentionPolicy={retentionPolicyEnabled && retentionPolicy}\n\t\t\tonClickBack={onClickBack}\n\t\t\tonClickEdit={canEdit && openEditing}\n\t\t\tonClickClose={onClickClose}\n\t\t\tonClickDelete={canDelete && handleDelete}\n\t\t\tonClickLeave={canLeave && handleLeave}\n\t\t\tonClickHide={joined && handleHide}\n\t\t\tonClickMoveToTeam={!room.teamId && !prid && canEdit && onMoveToTeam}\n\t\t\tonClickConvertToTeam={allowConvertToTeam && onConvertToTeam}\n\t\t\tonClickEnterRoom={onEnterRoom && onClickEnterRoom}\n\t\t/>\n\t);\n};\n\nexport default RoomInfoWithData;\n"]}