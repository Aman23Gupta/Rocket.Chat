{"version":3,"sources":["meteor://ðŸ’»app/client/views/mailer/MailerUnsubscriptionPage.tsx"],"names":[],"mappings":"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","file":"dynamic/client/views/mailer/MailerUnsubscriptionPage.tsx","sourcesContent":["import { Box, Callout, Throbber } from '@rocket.chat/fuselage';\nimport React, { FC, useEffect } from 'react';\n\nimport { useRouteParameter } from '../../contexts/RouterContext';\nimport { useAbsoluteUrl, useMethod } from '../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../contexts/TranslationContext';\nimport { AsyncState, AsyncStatePhase, useAsyncState } from '../../hooks/useAsyncState';\n\nconst useMailerUnsubscriptionState = (): AsyncState<boolean> => {\n\tconst { resolve, reject, ...unsubscribedState } = useAsyncState<boolean>();\n\n\tconst unsubscribe = useMethod('Mailer:unsubscribe');\n\tconst _id = useRouteParameter('_id');\n\tconst createdAt = useRouteParameter('createdAt');\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tuseEffect(() => {\n\t\tconst doUnsubscribe = async (_id: string, createdAt: string): Promise<void> => {\n\t\t\ttry {\n\t\t\t\tawait unsubscribe(_id, createdAt);\n\t\t\t\tresolve(true);\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\treject(error);\n\t\t\t}\n\t\t};\n\n\t\tif (!_id || !createdAt) {\n\t\t\treturn;\n\t\t}\n\n\t\tdoUnsubscribe(_id, createdAt);\n\t}, [resolve, reject, unsubscribe, _id, createdAt, dispatchToastMessage]);\n\n\treturn unsubscribedState;\n};\n\nconst MailerUnsubscriptionPage: FC = () => {\n\tconst { phase, error } = useMailerUnsubscriptionState();\n\n\tconst t = useTranslation();\n\tconst absoluteUrl = useAbsoluteUrl();\n\n\treturn (\n\t\t<section className='rc-old full-page color-tertiary-font-color'>\n\t\t\t<div className='wrapper'>\n\t\t\t\t<header>\n\t\t\t\t\t<a className='logo' href={absoluteUrl('/')}>\n\t\t\t\t\t\t<img src={absoluteUrl('/images/logo/logo.svg')} />\n\t\t\t\t\t</a>\n\t\t\t\t</header>\n\t\t\t\t<Box color='default' marginInline='auto' marginBlock={16} maxWidth={800}>\n\t\t\t\t\t{(phase === AsyncStatePhase.LOADING && <Throbber disabled />) ||\n\t\t\t\t\t\t(phase === AsyncStatePhase.REJECTED && <Callout type='danger' title={error?.message} />) ||\n\t\t\t\t\t\t(phase === AsyncStatePhase.RESOLVED && <Callout type='success' title={t('You_have_successfully_unsubscribed')} />)}\n\t\t\t\t</Box>\n\t\t\t</div>\n\t\t</section>\n\t);\n};\n\nexport default MailerUnsubscriptionPage;\n"]}