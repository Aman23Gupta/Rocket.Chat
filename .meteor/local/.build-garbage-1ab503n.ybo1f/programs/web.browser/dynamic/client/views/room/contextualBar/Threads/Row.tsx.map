{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/Threads/Row.tsx"],"names":[],"mappings":";;;;;;;;AAAA,WAAO,IAAP;AAAc,MAAU,CAAc,IAAxB,CAAwB,OAAxB,EAAqC;AAAC;AAAA;AAAA,GAAD;;AAAC;AAAA;AAAA;;AAAD,CAArC,EAAsC,CAAtC;AAAsC;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAWpD,MAAM,MAAM,gBAAG,IAAI,CAAC,QAAQ,CAAC,aAAa,CAAC,iBAAD,CAAd,CAAT,CAAnB;;AAEA,MAAM,kBAAkB,GAAG,CAAC,CAAD,EAA6B,QAA7B,KAAuD;AACjF,GAAC,CAAC,cAAF;AACA,GAAC,CAAC,eAAF;AACA,QAAM;AAAE;AAAF,MAAgB,CAAC,CAAC,aAAF,CAAgB,OAAtC;AAEA,WAAS,IACR,qBAAqB,CAAC,CAAC,CAAC,IAAD,EAAO,MAAP,EAAe,QAAf,CAAwB,SAAxB,CAAD,GAAsC,eAAtC,GAAwD,iBAAzD,EAA4E;AAChG,OAAG,EAAE;AAD2F,GAA5E,CADtB;AAIA,CATD;;AAqBA,MAAM,GAAG,gBAAuB,IAAI,CAAC,SAAS,GAAT,OAAwF;AAAA,MAA3E;AAAE,UAAF;AAAU,iBAAV;AAAyB,UAAzB;AAAiC,cAAjC;AAA6C,eAA7C;AAA0D,UAA1D;AAAkE;AAAlE,GAA2E;AAC5H,QAAM,CAAC,GAAG,cAAc,EAAxB;AACA,QAAM,UAAU,GAAG,UAAU,EAA7B;AAEA,QAAM,GAAG,GAAG,sBAAsB,CAAC,MAAD,CAAlC;AAEA,QAAM;AAAE,QAAI,GAAG,MAAM,CAAC,CAAP,CAAS;AAAlB,MAA+B,MAAM,CAAC,CAA5C;AAEA,sBACC,oBAAC,MAAD;AACC,UAAM,EAAE,MAAM,CAAC,MADhB;AAEC,OAAG,EAAE,MAAM,CAAC,GAFb;AAGC,MAAE,EAAE,MAAM,CAAC,EAHZ;AAIC,KAAC,EAAE,MAAM,CAAC,CAJX;AAKC,WAAO,EAAE,MAAM,CAAC,OALjB;AAMC,QAAI,EAAE,aAAa,GAAG,IAAH,GAAU,MAAM,CAAC,CAAP,CAAS,QANvC;AAOC,YAAQ,EAAE,MAAM,CAAC,CAAP,CAAS,QAPpB;AAQC,UAAM,EAAE,MAAM,CAAC,QAAP,CAAgB,MAAM,CAAC,GAAvB,CART;AASC,WAAO,EAAE,UAAU,CAAC,QAAX,CAAoB,MAAM,CAAC,GAA3B,CATV;AAUC,OAAG,EAAE,WAAW,CAAC,QAAZ,CAAqB,MAAM,CAAC,GAA5B,CAVN;AAWC,aAAS,EAAE,MAAM,CAAC,OAAP,IAAkB,MAAM,CAAC,OAAP,CAAe,QAAf,CAAwB,MAAxB,CAX9B;AAYC,eAAS,MAAM,CAAC,GAZjB;AAaC,OAAG,EAAE,GAbN;AAcC,KAAC,EAAE,CAdJ;AAeC,cAAU,EAAE,UAfb;AAgBC,sBAAkB,EAAG,CAAD,IAAyC,kBAAkB,CAAC,CAAD,EAAI,MAAM,CAAC,GAAX,CAhBhF;AAiBC,WAAO,EAAE;AAjBV,IADD;AAqBA,CA7BmC,CAApC;AAlCA,OAAO,aAAP,CAiEe,GAjEf,E","file":"dynamic/client/views/room/contextualBar/Threads/Row.tsx","sourcesContent":["import React, { FC, memo, MouseEvent } from 'react';\n\nimport { IMessage } from '../../../../../definition/IMessage';\nimport { useTranslation } from '../../../../contexts/TranslationContext';\nimport { useTimeAgo } from '../../../../hooks/useTimeAgo';\nimport { clickableItem } from '../../../../lib/clickableItem';\nimport { callWithErrorHandling } from '../../../../lib/utils/callWithErrorHandling';\nimport ThreadListMessage from './components/Message';\nimport { mapProps } from './mapProps';\nimport { normalizeThreadMessage } from './normalizeThreadMessage';\n\nconst Thread = memo(mapProps(clickableItem(ThreadListMessage)));\n\nconst handleFollowButton = (e: MouseEvent<HTMLElement>, threadId: string): void => {\n\te.preventDefault();\n\te.stopPropagation();\n\tconst { following } = e.currentTarget.dataset;\n\n\tfollowing &&\n\t\tcallWithErrorHandling(![true, 'true'].includes(following) ? 'followMessage' : 'unfollowMessage', {\n\t\t\tmid: threadId,\n\t\t});\n};\n\ntype ThreadRowProps = {\n\tthread: IMessage;\n\tshowRealNames: boolean;\n\tunread: string[];\n\tunreadUser: string[];\n\tunreadGroup: string[];\n\tuserId: string;\n\tonClick: (threadId: string) => void;\n};\n\nconst Row: FC<ThreadRowProps> = memo(function Row({ thread, showRealNames, unread, unreadUser, unreadGroup, userId, onClick }) {\n\tconst t = useTranslation();\n\tconst formatDate = useTimeAgo();\n\n\tconst msg = normalizeThreadMessage(thread);\n\n\tconst { name = thread.u.username } = thread.u;\n\n\treturn (\n\t\t<Thread\n\t\t\ttcount={thread.tcount}\n\t\t\ttlm={thread.tlm}\n\t\t\tts={thread.ts}\n\t\t\tu={thread.u}\n\t\t\treplies={thread.replies}\n\t\t\tname={showRealNames ? name : thread.u.username}\n\t\t\tusername={thread.u.username}\n\t\t\tunread={unread.includes(thread._id)}\n\t\t\tmention={unreadUser.includes(thread._id)}\n\t\t\tall={unreadGroup.includes(thread._id)}\n\t\t\tfollowing={thread.replies && thread.replies.includes(userId)}\n\t\t\tdata-id={thread._id}\n\t\t\tmsg={msg}\n\t\t\tt={t}\n\t\t\tformatDate={formatDate}\n\t\t\thandleFollowButton={(e: MouseEvent<HTMLElement>): unknown => handleFollowButton(e, thread._id)}\n\t\t\tonClick={onClick}\n\t\t/>\n\t);\n});\n\nexport default Row;\n"]}