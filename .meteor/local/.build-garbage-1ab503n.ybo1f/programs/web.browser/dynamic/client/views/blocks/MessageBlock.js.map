{"version":3,"sources":["meteor://ðŸ’»app/client/views/blocks/MessageBlock.js"],"names":["UIKitIncomingInteractionContainerType","module","link","v","UiKitMessage","UiKitComponent","kitContext","messageParser","React","default","ActionManager","useBlockRendered","renderMessageBody","mrkdwn","text","__html","msg","MessageBlock","mid","_mid","rid","blocks","appId","ref","className","context","action","actionId","value","blockId","triggerBlockAction","container","type","MESSAGE","id","exportDefault"],"mappings":"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","file":"dynamic/client/views/blocks/MessageBlock.js","sourcesContent":["import { UIKitIncomingInteractionContainerType } from '@rocket.chat/apps-engine/definition/uikit/UIKitIncomingInteractionContainer';\nimport { UiKitMessage, UiKitComponent, kitContext, messageParser } from '@rocket.chat/fuselage-ui-kit';\nimport React from 'react';\n\nimport * as ActionManager from '../../../app/ui-message/client/ActionManager';\nimport { useBlockRendered } from '../../components/Message/hooks/useBlockRendered';\nimport { renderMessageBody } from '../../lib/utils/renderMessageBody';\nimport './textParsers';\n\n// TODO: move this to fuselage-ui-kit itself\nconst mrkdwn = ({ text } = {}) => text && <span dangerouslySetInnerHTML={{ __html: renderMessageBody({ msg: text }) }} />;\n\nmessageParser.mrkdwn = mrkdwn;\nfunction MessageBlock({ mid: _mid, rid, blocks, appId }) {\n\tconst { ref, className } = useBlockRendered();\n\tconst context = {\n\t\taction: ({ actionId, value, blockId, mid = _mid }) => {\n\t\t\tActionManager.triggerBlockAction({\n\t\t\t\tblockId,\n\t\t\t\tactionId,\n\t\t\t\tvalue,\n\t\t\t\tmid,\n\t\t\t\trid,\n\t\t\t\tappId: blocks[0].appId,\n\t\t\t\tcontainer: {\n\t\t\t\t\ttype: UIKitIncomingInteractionContainerType.MESSAGE,\n\t\t\t\t\tid: mid,\n\t\t\t\t},\n\t\t\t});\n\t\t},\n\t\tappId,\n\t\trid,\n\t};\n\n\treturn (\n\t\t<kitContext.Provider value={context}>\n\t\t\t<div className={className} ref={ref} />\n\t\t\t<UiKitComponent render={UiKitMessage} blocks={blocks} />\n\t\t</kitContext.Provider>\n\t);\n}\n\nexport default MessageBlock;\n"]}