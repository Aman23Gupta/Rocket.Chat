{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/mailer/Mailer.js"],"names":["module","export","Mailer","TextInput","TextAreaInput","Field","FieldGroup","CheckBox","Button","Icon","ButtonGroup","link","v","React","useState","useCallback","default","validateEmail","isJSON","Page","useTranslation","sendMail","t","fromEmail","setFromEmail","value","dryRun","setDryRun","query","setQuery","subject","setSubject","emailBody","setEmailBody","e","preventDefault","error","currentTarget","undefined","__html"],"mappings":";;;;;;;;AAAAA,MAAM,CAACC,MAAP,CAAc;AAACC,QAAM,EAAC,MAAIA;AAAZ,CAAd;AAAmC,IAAIC,SAAJ,EAAcC,aAAd,EAA4BC,KAA5B,EAAkCC,UAAlC,EAA6CC,QAA7C,EAAsDC,MAAtD,EAA6DC,IAA7D,EAAkEC,WAAlE;AAA8EV,MAAM,CAACW,IAAP,CAAY,uBAAZ,EAAoC;AAACR,WAAS,CAACS,CAAD,EAAG;AAACT,aAAS,GAACS,CAAV;AAAY,GAA1B;;AAA2BR,eAAa,CAACQ,CAAD,EAAG;AAACR,iBAAa,GAACQ,CAAd;AAAgB,GAA5D;;AAA6DP,OAAK,CAACO,CAAD,EAAG;AAACP,SAAK,GAACO,CAAN;AAAQ,GAA9E;;AAA+EN,YAAU,CAACM,CAAD,EAAG;AAACN,cAAU,GAACM,CAAX;AAAa,GAA1G;;AAA2GL,UAAQ,CAACK,CAAD,EAAG;AAACL,YAAQ,GAACK,CAAT;AAAW,GAAlI;;AAAmIJ,QAAM,CAACI,CAAD,EAAG;AAACJ,UAAM,GAACI,CAAP;AAAS,GAAtJ;;AAAuJH,MAAI,CAACG,CAAD,EAAG;AAACH,QAAI,GAACG,CAAL;AAAO,GAAtK;;AAAuKF,aAAW,CAACE,CAAD,EAAG;AAACF,eAAW,GAACE,CAAZ;AAAc;;AAApM,CAApC,EAA0O,CAA1O;AAA6O,IAAIC,KAAJ,EAAUC,QAAV,EAAmBC,WAAnB;AAA+Bf,MAAM,CAACW,IAAP,CAAY,OAAZ,EAAoB;AAACK,SAAO,CAACJ,CAAD,EAAG;AAACC,SAAK,GAACD,CAAN;AAAQ,GAApB;;AAAqBE,UAAQ,CAACF,CAAD,EAAG;AAACE,YAAQ,GAACF,CAAT;AAAW,GAA5C;;AAA6CG,aAAW,CAACH,CAAD,EAAG;AAACG,eAAW,GAACH,CAAZ;AAAc;;AAA1E,CAApB,EAAgG,CAAhG;AAAmG,IAAIK,aAAJ;AAAkBjB,MAAM,CAACW,IAAP,CAAY,gCAAZ,EAA6C;AAACM,eAAa,CAACL,CAAD,EAAG;AAACK,iBAAa,GAACL,CAAd;AAAgB;;AAAlC,CAA7C,EAAiF,CAAjF;AAAoF,IAAIM,MAAJ;AAAWlB,MAAM,CAACW,IAAP,CAAY,8BAAZ,EAA2C;AAACO,QAAM,CAACN,CAAD,EAAG;AAACM,UAAM,GAACN,CAAP;AAAS;;AAApB,CAA3C,EAAiE,CAAjE;AAAoE,IAAIO,IAAJ;AAASnB,MAAM,CAACW,IAAP,CAAY,0BAAZ,EAAuC;AAACK,SAAO,CAACJ,CAAD,EAAG;AAACO,QAAI,GAACP,CAAL;AAAO;;AAAnB,CAAvC,EAA4D,CAA5D;AAA+D,IAAIQ,cAAJ;AAAmBpB,MAAM,CAACW,IAAP,CAAY,sCAAZ,EAAmD;AAACS,gBAAc,CAACR,CAAD,EAAG;AAACQ,kBAAc,GAACR,CAAf;AAAiB;;AAApC,CAAnD,EAAyF,CAAzF;;AAQzuB,SAASV,MAAT,OAAyC;AAAA,MAAzB;AAAEmB,YAAQ,GAAG,MAAM,CAAE;AAArB,GAAyB;AAC/C,QAAMC,CAAC,GAAGF,cAAc,EAAxB;AAEA,QAAM,CAACG,SAAD,EAAYC,YAAZ,IAA4BV,QAAQ,CAAC;AAAEW,SAAK,EAAE;AAAT,GAAD,CAA1C;AACA,QAAM,CAACC,MAAD,EAASC,SAAT,IAAsBb,QAAQ,CAAC,KAAD,CAApC;AACA,QAAM,CAACc,KAAD,EAAQC,QAAR,IAAoBf,QAAQ,CAAC;AAAEW,SAAK,EAAE;AAAT,GAAD,CAAlC;AACA,QAAM,CAACK,OAAD,EAAUC,UAAV,IAAwBjB,QAAQ,CAAC,EAAD,CAAtC;AACA,QAAM,CAACkB,SAAD,EAAYC,YAAZ,IAA4BnB,QAAQ,CAAC,EAAD,CAA1C;AAEA,sBACC,oBAAC,IAAD,qBACC,oBAAC,IAAD,CAAM,MAAN;AAAa,SAAK,EAAEQ,CAAC,CAAC,QAAD;AAArB,kBACC,oBAAC,WAAD;AAAa,SAAK,EAAC;AAAnB,kBACC,oBAAC,MAAD;AACC,WAAO,MADR;AAEC,WAAO,EAAE,MAAM;AACdD,cAAQ,CAAC;AAAEE,iBAAF;AAAaG,cAAb;AAAqBE,aAArB;AAA4BE,eAA5B;AAAqCE;AAArC,OAAD,CAAR;AACA;AAJF,kBAMC,oBAAC,IAAD;AAAM,QAAI,EAAC,MAAX;AAAkB,QAAI,EAAC,KAAvB;AAA6B,OAAG,EAAC;AAAjC,IAND,EAOEV,CAAC,CAAC,YAAD,CAPH,CADD,CADD,CADD,eAcC,oBAAC,IAAD,CAAM,2BAAN;AAAkC,aAAS,EAAC,QAA5C;AAAqD,KAAC,EAAC,MAAvD;AAA8D,WAAO,EAAC,MAAtE;AAA6E,iBAAa,EAAC,QAA3F;AAAoG,cAAU,EAAC;AAA/G,kBACC,oBAAC,UAAD;AAAY,YAAQ,EAAC,MAArB;AAA4B,MAAE,EAAC,MAA/B;AAAsC,YAAQ,EAAEP,WAAW,CAAEmB,CAAD,IAAOA,CAAC,CAACC,cAAF,EAAR,EAA4B,EAA5B,CAA3D;AAA4F,UAAM,EAAC;AAAnG,kBACC,oBAAC,KAAD,qBACC,oBAAC,KAAD,CAAO,KAAP,QAAcb,CAAC,CAAC,MAAD,CAAf,CADD,eAEC,oBAAC,KAAD,CAAO,GAAP,qBACC,oBAAC,SAAD;AACC,MAAE,EAAC,WADJ;AAEC,eAAW,EAAEA,CAAC,CAAC,iBAAD,CAFf;AAGC,SAAK,EAAEC,SAAS,CAACE,KAHlB;AAIC,SAAK,EAAEF,SAAS,CAACa,KAJlB;AAKC,YAAQ,EAAGF,CAAD,IAAO;AAChBV,kBAAY,CAAC;AACZC,aAAK,EAAES,CAAC,CAACG,aAAF,CAAgBZ,KADX;AAEZW,aAAK,EAAE,CAACnB,aAAa,CAACiB,CAAC,CAACG,aAAF,CAAgBZ,KAAjB,CAAd,GAAwCH,CAAC,CAAC,eAAD,CAAzC,GAA6DgB;AAFxD,OAAD,CAAZ;AAIA;AAVF,IADD,CAFD,CADD,eAkBC,oBAAC,KAAD,qBACC,oBAAC,KAAD,CAAO,GAAP,qBACC,oBAAC,QAAD;AAAU,MAAE,EAAC,QAAb;AAAsB,WAAO,EAAEZ,MAA/B;AAAuC,YAAQ,EAAE,MAAMC,SAAS,CAAC,CAACD,MAAF;AAAhE,IADD,eAEC,oBAAC,KAAD,CAAO,KAAP;AAAa,WAAO,EAAC;AAArB,KAAgCJ,CAAC,CAAC,SAAD,CAAjC,CAFD,CADD,eAKC,oBAAC,KAAD,CAAO,IAAP,QAAaA,CAAC,CAAC,qBAAD,CAAd,CALD,CAlBD,eAyBC,oBAAC,KAAD,qBACC,oBAAC,KAAD,CAAO,KAAP,QAAcA,CAAC,CAAC,OAAD,CAAf,CADD,eAEC,oBAAC,KAAD,CAAO,GAAP,qBACC,oBAAC,SAAD;AACC,MAAE,EAAC,OADJ;AAEC,SAAK,EAAEM,KAAK,CAACH,KAFd;AAGC,SAAK,EAAEG,KAAK,CAACQ,KAHd;AAIC,YAAQ,EAAGF,CAAD,IAAO;AAChBL,cAAQ,CAAC;AACRJ,aAAK,EAAES,CAAC,CAACG,aAAF,CAAgBZ,KADf;AAERW,aAAK,EAAEF,CAAC,CAACG,aAAF,CAAgBZ,KAAhB,IAAyB,CAACP,MAAM,CAACgB,CAAC,CAACG,aAAF,CAAgBZ,KAAjB,CAAhC,GAA0DH,CAAC,CAAC,cAAD,CAA3D,GAA8EgB;AAF7E,OAAD,CAAR;AAIA;AATF,IADD,CAFD,eAeC,oBAAC,KAAD,CAAO,IAAP,QAAahB,CAAC,CAAC,mBAAD,CAAd,CAfD,CAzBD,eA0CC,oBAAC,KAAD,qBACC,oBAAC,KAAD,CAAO,KAAP,QAAcA,CAAC,CAAC,SAAD,CAAf,CADD,eAEC,oBAAC,KAAD,CAAO,GAAP,qBACC,oBAAC,SAAD;AACC,MAAE,EAAC,SADJ;AAEC,SAAK,EAAEQ,OAAO,CAACL,KAFhB;AAGC,SAAK,EAAEK,OAAO,CAACM,KAHhB;AAIC,YAAQ,EAAGF,CAAD,IAAO;AAChBH,gBAAU,CAACG,CAAC,CAACG,aAAF,CAAgBZ,KAAjB,CAAV;AACA;AANF,IADD,CAFD,CA1CD,eAuDC,oBAAC,KAAD,qBACC,oBAAC,KAAD,CAAO,KAAP,QAAcH,CAAC,CAAC,YAAD,CAAf,CADD,eAEC,oBAAC,KAAD,CAAO,GAAP,qBACC,oBAAC,aAAD;AAAe,MAAE,EAAC,WAAlB;AAA8B,QAAI,EAAE,EAApC;AAAwC,SAAK,EAAEU,SAA/C;AAA0D,YAAQ,EAAGE,CAAD,IAAOD,YAAY,CAACC,CAAC,CAACG,aAAF,CAAgBZ,KAAjB;AAAvF,IADD,CAFD,eAKC,oBAAC,KAAD,CAAO,IAAP;AAAY,2BAAuB,EAAE;AAAEc,YAAM,EAAEjB,CAAC,CAAC,kBAAD;AAAX;AAArC,IALD,CAvDD,CADD,CAdD,CADD;AAkFA,C","file":"dynamic/client/views/admin/mailer/Mailer.js","sourcesContent":["import { TextInput, TextAreaInput, Field, FieldGroup, CheckBox, Button, Icon, ButtonGroup } from '@rocket.chat/fuselage';\nimport React, { useState, useCallback } from 'react';\n\nimport { validateEmail } from '../../../../lib/emailValidator';\nimport { isJSON } from '../../../../lib/utils/isJSON';\nimport Page from '../../../components/Page';\nimport { useTranslation } from '../../../contexts/TranslationContext';\n\nexport function Mailer({ sendMail = () => {} }) {\n\tconst t = useTranslation();\n\n\tconst [fromEmail, setFromEmail] = useState({ value: '' });\n\tconst [dryRun, setDryRun] = useState(false);\n\tconst [query, setQuery] = useState({ value: '' });\n\tconst [subject, setSubject] = useState('');\n\tconst [emailBody, setEmailBody] = useState('');\n\n\treturn (\n\t\t<Page>\n\t\t\t<Page.Header title={t('Mailer')}>\n\t\t\t\t<ButtonGroup align='end'>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tprimary\n\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\tsendMail({ fromEmail, dryRun, query, subject, emailBody });\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<Icon name='send' size='x20' mie='x8' />\n\t\t\t\t\t\t{t('Send_email')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Page.Header>\n\t\t\t<Page.ScrollableContentWithShadow alignSelf='center' w='100%' display='flex' flexDirection='column' alignItems='center'>\n\t\t\t\t<FieldGroup maxWidth='x600' is='form' onSubmit={useCallback((e) => e.preventDefault(), [])} method='post'>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('From')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tid='fromEmail'\n\t\t\t\t\t\t\t\tplaceholder={t('Type_your_email')}\n\t\t\t\t\t\t\t\tvalue={fromEmail.value}\n\t\t\t\t\t\t\t\terror={fromEmail.error}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetFromEmail({\n\t\t\t\t\t\t\t\t\t\tvalue: e.currentTarget.value,\n\t\t\t\t\t\t\t\t\t\terror: !validateEmail(e.currentTarget.value) ? t('Invalid_Email') : undefined,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<CheckBox id='dryRun' checked={dryRun} onChange={() => setDryRun(!dryRun)} />\n\t\t\t\t\t\t\t<Field.Label htmlFor='dry-run'>{t('Dry_run')}</Field.Label>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t<Field.Hint>{t('Dry_run_description')}</Field.Hint>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('Query')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tid='query'\n\t\t\t\t\t\t\t\tvalue={query.value}\n\t\t\t\t\t\t\t\terror={query.error}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetQuery({\n\t\t\t\t\t\t\t\t\t\tvalue: e.currentTarget.value,\n\t\t\t\t\t\t\t\t\t\terror: e.currentTarget.value && !isJSON(e.currentTarget.value) ? t('Invalid_JSON') : undefined,\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t<Field.Hint>{t('Query_description')}</Field.Hint>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('Subject')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tid='subject'\n\t\t\t\t\t\t\t\tvalue={subject.value}\n\t\t\t\t\t\t\t\terror={subject.error}\n\t\t\t\t\t\t\t\tonChange={(e) => {\n\t\t\t\t\t\t\t\t\tsetSubject(e.currentTarget.value);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t</Field>\n\t\t\t\t\t<Field>\n\t\t\t\t\t\t<Field.Label>{t('Email_body')}</Field.Label>\n\t\t\t\t\t\t<Field.Row>\n\t\t\t\t\t\t\t<TextAreaInput id='emailBody' rows={10} value={emailBody} onChange={(e) => setEmailBody(e.currentTarget.value)} />\n\t\t\t\t\t\t</Field.Row>\n\t\t\t\t\t\t<Field.Hint dangerouslySetInnerHTML={{ __html: t('Mailer_body_tags') }} />\n\t\t\t\t\t</Field>\n\t\t\t\t</FieldGroup>\n\t\t\t</Page.ScrollableContentWithShadow>\n\t\t</Page>\n\t);\n}\n"]}