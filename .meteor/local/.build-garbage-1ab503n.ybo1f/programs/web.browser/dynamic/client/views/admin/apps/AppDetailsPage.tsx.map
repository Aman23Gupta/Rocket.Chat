{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/apps/AppDetailsPage.tsx"],"names":[],"mappings":"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","file":"dynamic/client/views/admin/apps/AppDetailsPage.tsx","sourcesContent":["import { ISetting } from '@rocket.chat/apps-engine/definition/settings';\nimport { Button, ButtonGroup, Icon, Box, Throbber } from '@rocket.chat/fuselage';\nimport React, { useState, useCallback, useRef, FC } from 'react';\n\nimport { Apps } from '../../../../app/apps/client/orchestrator';\nimport Page from '../../../components/Page';\nimport { useRoute, useCurrentRoute } from '../../../contexts/RouterContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport APIsDisplay from './APIsDisplay';\nimport AppDetailsPageContent from './AppDetailsPageContent';\nimport LoadingDetails from './LoadingDetails';\nimport SettingsDisplay from './SettingsDisplay';\nimport { handleAPIError } from './helpers';\nimport { useAppInfo } from './hooks/useAppInfo';\n\nconst AppDetailsPage: FC<{ id: string }> = function AppDetailsPage({ id }) {\n\tconst t = useTranslation();\n\n\tconst [hasUnsavedChanges, setHasUnsavedChanges] = useState(false);\n\tconst [isSaving, setIsSaving] = useState(false);\n\tconst settingsRef = useRef<Record<string, ISetting['value']>>({});\n\n\tconst data = useAppInfo(id);\n\n\tconst [currentRouteName] = useCurrentRoute();\n\tif (!currentRouteName) {\n\t\tthrow new Error('No current route name');\n\t}\n\tconst router = useRoute(currentRouteName);\n\tconst handleReturn = (): void => router.push({});\n\n\tconst { settings, apis } = { settings: {}, apis: [], ...data };\n\n\tconst showSettings = Object.values(settings).length;\n\tconst showApis = apis.length;\n\n\tconst saveAppSettings = useCallback(async () => {\n\t\tconst { current } = settingsRef;\n\t\tsetIsSaving(true);\n\t\ttry {\n\t\t\tawait Apps.setAppSettings(\n\t\t\t\tid,\n\t\t\t\tObject.values(settings).map((value) => ({ ...value, value: current?.[value.id] })),\n\t\t\t);\n\t\t} catch (e) {\n\t\t\thandleAPIError(e);\n\t\t}\n\t\tsetIsSaving(false);\n\t}, [id, settings]);\n\n\treturn (\n\t\t<Page flexDirection='column'>\n\t\t\t<Page.Header title={t('App_Details')}>\n\t\t\t\t<ButtonGroup>\n\t\t\t\t\t<Button primary disabled={!hasUnsavedChanges || isSaving} onClick={saveAppSettings}>\n\t\t\t\t\t\t{!isSaving && t('Save_changes')}\n\t\t\t\t\t\t{isSaving && <Throbber inheritColor />}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button onClick={handleReturn}>\n\t\t\t\t\t\t<Icon name='back' />\n\t\t\t\t\t\t{t('Back')}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Page.Header>\n\t\t\t<Page.ScrollableContentWithShadow>\n\t\t\t\t<Box maxWidth='x600' w='full' alignSelf='center'>\n\t\t\t\t\t{!data && <LoadingDetails />}\n\t\t\t\t\t{data && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<AppDetailsPageContent app={data} />\n\t\t\t\t\t\t\t{!!showApis && <APIsDisplay apis={apis} />}\n\t\t\t\t\t\t\t{!!showSettings && (\n\t\t\t\t\t\t\t\t<SettingsDisplay settings={settings} setHasUnsavedChanges={setHasUnsavedChanges} settingsRef={settingsRef} />\n\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\t\t\t\t</Box>\n\t\t\t</Page.ScrollableContentWithShadow>\n\t\t</Page>\n\t);\n};\n\nexport default AppDetailsPage;\n"]}