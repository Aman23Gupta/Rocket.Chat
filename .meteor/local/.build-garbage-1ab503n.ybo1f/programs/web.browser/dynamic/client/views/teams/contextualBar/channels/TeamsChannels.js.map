{"version":3,"sources":["meteor://ðŸ’»app/client/views/teams/contextualBar/channels/TeamsChannels.js"],"names":["_extends","module","link","default","v","useMutableCallback","useLocalStorage","useDebouncedValue","React","useCallback","useMemo","useState","roomTypes","usePermission","useSetModal","useRecordList","AsyncStatePhase","CreateChannelWithData","RoomInfo","useTabBarClose","AddExistingModal","BaseTeamsChannels","useTeamsChannelList","useReactModal","Component","props","setModal","e","preventDefault","handleClose","TeamsChannels","teamId","rid","state","setState","onClickClose","type","setType","text","setText","debouncedText","teamsChannelList","loadMoreItems","reload","phase","items","itemCount","total","handleTextChange","event","currentTarget","value","canAddExistingTeam","addExisting","createNew","goToRoom","room","openRouteLink","t","handleBack","viewRoom","tab","LOADING","exportDefault"],"mappings":"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","file":"dynamic/client/views/teams/contextualBar/channels/TeamsChannels.js","sourcesContent":["import { useMutableCallback, useLocalStorage, useDebouncedValue } from '@rocket.chat/fuselage-hooks';\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport { roomTypes } from '../../../../../app/utils/client';\nimport { usePermission } from '../../../../contexts/AuthorizationContext';\nimport { useSetModal } from '../../../../contexts/ModalContext';\nimport { useRecordList } from '../../../../hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../../../../lib/asyncState';\nimport CreateChannelWithData from '../../../../sidebar/header/CreateChannelWithData';\nimport RoomInfo from '../../../room/contextualBar/Info';\nimport { useTabBarClose } from '../../../room/providers/ToolboxProvider';\nimport AddExistingModal from './AddExistingModal';\nimport BaseTeamsChannels from './BaseTeamsChannels';\nimport { useTeamsChannelList } from './hooks/useTeamsChannelList';\n\nconst useReactModal = (Component, props) => {\n\tconst setModal = useSetModal();\n\n\treturn useMutableCallback((e) => {\n\t\te.preventDefault();\n\n\t\tconst handleClose = () => {\n\t\t\tsetModal(null);\n\t\t};\n\n\t\tsetModal(() => <Component onClose={handleClose} {...props} />);\n\t});\n};\n\nconst TeamsChannels = ({ teamId, rid }) => {\n\tconst [state, setState] = useState({});\n\tconst onClickClose = useTabBarClose();\n\n\tconst [type, setType] = useLocalStorage('channels-list-type', 'all');\n\tconst [text, setText] = useState('');\n\n\tconst debouncedText = useDebouncedValue(text, 800);\n\n\tconst { teamsChannelList, loadMoreItems, reload } = useTeamsChannelList(\n\t\tuseMemo(() => ({ teamId, text: debouncedText, type }), [teamId, debouncedText, type]),\n\t);\n\n\tconst { phase, items, itemCount: total } = useRecordList(teamsChannelList);\n\n\tconst handleTextChange = useCallback((event) => {\n\t\tsetText(event.currentTarget.value);\n\t}, []);\n\n\tconst canAddExistingTeam = usePermission('add-team-channel', rid);\n\tconst addExisting = useReactModal(AddExistingModal, { teamId, reload });\n\tconst createNew = useReactModal(CreateChannelWithData, { teamId, reload });\n\n\tconst goToRoom = useCallback((room) => roomTypes.openRouteLink(room.t, room), []);\n\tconst handleBack = useCallback(() => setState({}), [setState]);\n\tconst viewRoom = useMutableCallback((room) => {\n\t\tgoToRoom(room);\n\t});\n\n\tif (state.tab === 'RoomInfo') {\n\t\treturn <RoomInfo rid={state.rid} onClickClose={onClickClose} onClickBack={handleBack} onEnterRoom={goToRoom} resetState={setState} />;\n\t}\n\n\treturn (\n\t\t<BaseTeamsChannels\n\t\t\tloading={phase === AsyncStatePhase.LOADING}\n\t\t\ttype={type}\n\t\t\ttext={text}\n\t\t\tsetType={setType}\n\t\t\tsetText={handleTextChange}\n\t\t\tchannels={items}\n\t\t\ttotal={total}\n\t\t\tonClickClose={onClickClose}\n\t\t\tonClickAddExisting={canAddExistingTeam && addExisting}\n\t\t\tonClickCreateNew={canAddExistingTeam && createNew}\n\t\t\tonClickView={viewRoom}\n\t\t\tloadMoreItems={loadMoreItems}\n\t\t\treload={reload}\n\t\t/>\n\t);\n};\n\nexport default TeamsChannels;\n"]}