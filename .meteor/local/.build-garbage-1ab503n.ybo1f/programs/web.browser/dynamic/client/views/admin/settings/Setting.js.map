{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/settings/Setting.js"],"names":["_extends","module","link","default","v","_objectSpread","useDebouncedCallback","React","useEffect","useMemo","useState","useCallback","MarkdownText","useEditableSetting","useEditableSettingsDispatch","useSettingStructure","useTranslation","MemoizedSetting","SettingSkeleton","Setting","className","settingId","sectionChanged","setting","persistedSetting","dispatch","update","value","editor","_id","undefined","changed","JSON","stringify","t","setValue","setEditor","onChangeValue","onChangeEditor","onResetButtonClick","packageValue","packageEditor","disabled","disableReset","readonly","type","i18nLabel","i18nDescription","alert","invisible","label","hint","has","callout","__html","hasResetButton","exportDefault","Object","assign","Memoized","Skeleton"],"mappings":"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","file":"dynamic/client/views/admin/settings/Setting.js","sourcesContent":["import { useDebouncedCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useEffect, useMemo, useState, useCallback } from 'react';\n\nimport MarkdownText from '../../../components/MarkdownText';\nimport { useEditableSetting, useEditableSettingsDispatch } from '../../../contexts/EditableSettingsContext';\nimport { useSettingStructure } from '../../../contexts/SettingsContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport MemoizedSetting from './MemoizedSetting';\nimport SettingSkeleton from './SettingSkeleton';\n\nfunction Setting({ className, settingId, sectionChanged }) {\n\tconst setting = useEditableSetting(settingId);\n\n\tconst persistedSetting = useSettingStructure(settingId);\n\tconst dispatch = useEditableSettingsDispatch();\n\n\tconst update = useDebouncedCallback(\n\t\t({ value, editor }) => {\n\t\t\tif (!persistedSetting) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tdispatch([\n\t\t\t\t{\n\t\t\t\t\t_id: persistedSetting._id,\n\t\t\t\t\t...(value !== undefined && { value }),\n\t\t\t\t\t...(editor !== undefined && { editor }),\n\t\t\t\t\tchanged:\n\t\t\t\t\t\tJSON.stringify(persistedSetting.value) !== JSON.stringify(value) ||\n\t\t\t\t\t\tJSON.stringify(persistedSetting.editor) !== JSON.stringify(editor),\n\t\t\t\t},\n\t\t\t]);\n\t\t},\n\t\t230,\n\t\t[persistedSetting, dispatch],\n\t);\n\n\tconst t = useTranslation();\n\n\tconst [value, setValue] = useState(setting.value);\n\tconst [editor, setEditor] = useState(setting.editor);\n\n\tuseEffect(() => {\n\t\tsetValue(setting.value);\n\t}, [setting.value]);\n\n\tuseEffect(() => {\n\t\tsetEditor(setting.editor);\n\t}, [setting.editor]);\n\n\tconst onChangeValue = useCallback(\n\t\t(value) => {\n\t\t\tsetValue(value);\n\t\t\tupdate({ value });\n\t\t},\n\t\t[update],\n\t);\n\n\tconst onChangeEditor = useCallback(\n\t\t(editor) => {\n\t\t\tsetEditor(editor);\n\t\t\tupdate({ editor });\n\t\t},\n\t\t[update],\n\t);\n\n\tconst onResetButtonClick = useCallback(() => {\n\t\tsetValue(setting.value);\n\t\tsetEditor(setting.editor);\n\t\tupdate({\n\t\t\tvalue: persistedSetting.packageValue,\n\t\t\teditor: persistedSetting.packageEditor,\n\t\t});\n\t}, [setting.value, setting.editor, update, persistedSetting]);\n\n\tconst { _id, disabled, disableReset, readonly, type, packageEditor, packageValue, i18nLabel, i18nDescription, alert, invisible } =\n\t\tsetting;\n\n\tconst label = (i18nLabel && t(i18nLabel)) || _id || t(_id);\n\tconst hint = useMemo(\n\t\t() => t.has(i18nDescription) && <MarkdownText preserveHtml={true} content={t(i18nDescription)} />,\n\t\t[i18nDescription, t],\n\t);\n\tconst callout = useMemo(() => alert && <span dangerouslySetInnerHTML={{ __html: t(alert) }} />, [alert, t]);\n\tconst hasResetButton =\n\t\t!disableReset &&\n\t\t!readonly &&\n\t\ttype !== 'asset' &&\n\t\t(JSON.stringify(packageEditor) !== JSON.stringify(editor) || JSON.stringify(value) !== JSON.stringify(packageValue)) &&\n\t\t!disabled;\n\n\treturn (\n\t\t<MemoizedSetting\n\t\t\tclassName={className}\n\t\t\ttype={type}\n\t\t\tlabel={label}\n\t\t\thint={hint}\n\t\t\tcallout={callout}\n\t\t\tsectionChanged={sectionChanged}\n\t\t\t{...setting}\n\t\t\tvalue={value}\n\t\t\teditor={editor}\n\t\t\thasResetButton={hasResetButton}\n\t\t\tonChangeValue={onChangeValue}\n\t\t\tonChangeEditor={onChangeEditor}\n\t\t\tonResetButtonClick={onResetButtonClick}\n\t\t\tinvisible={invisible}\n\t\t/>\n\t);\n}\n\nexport default Object.assign(Setting, {\n\tMemoized: MemoizedSetting,\n\tSkeleton: SettingSkeleton,\n});\n"]}