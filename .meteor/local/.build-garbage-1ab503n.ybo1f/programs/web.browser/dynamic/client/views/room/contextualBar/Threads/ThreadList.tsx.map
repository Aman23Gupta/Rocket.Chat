{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/contextualBar/Threads/ThreadList.tsx"],"names":[],"mappings":";;;;;;;;AAAA;;AAAkB,MAAE,KAAF,CAAW,sCAAX,EAAiD;AAAA,SAAM;AAAA;AAAwB;;AAA9B,CAAjD,EAA+E,CAA/E;AAAlB,OAAO,MAAP,CAAc;AAAA,YAAM,QAAS;AAAf,CAAd;AAAuC,IAAO,GAAP,EAAS,IAAT,EAAgB,SAAhB,EAA0B,MAA1B,EAAkC,OAAlC,EAAkC,OAAlC,EAAkC,QAAlC;AAA0D;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;;AA0C1F,MAAM,UAAU,GAAwB,SAAS,UAAT,OAgB9C;AAAA,MAhBkE;AAClE,SAAK,GAAG,EAD0D;AAElE,WAAO,GAAG,EAFwD;AAGlE,QAHkE;AAIlE,UAAM,GAAG,EAJyD;AAKlE,cAAU,GAAG,EALqD;AAMlE,eAAW,GAAG,EANoD;AAOlE,QAPkE;AAQlE,QARkE;AASlE,WATkE;AAUlE,iBAVkE;AAWlE,WAXkE;AAYlE,WAZkE;AAalE,SAbkE;AAclE,UAAM,GAAG,EAdyD;AAelE;AAfkE,GAgBlE;AACA,QAAM,aAAa,GAAG,OAAO,CAAC,UAAU,CAAC,kBAAD,CAAX,CAA7B;AAEA,QAAM,CAAC,GAAG,cAAc,EAAxB;AACA,QAAM,QAAQ,GAAG,YAAY,CAAC,IAAD,CAA7B;AACA,QAAM,CAAC,IAAD,IAAS,eAAe,EAA9B;;AAEA,MAAI,CAAC,IAAL,EAAW;AACV,UAAM,IAAI,KAAJ,CAAU,eAAV,CAAN;AACA;;AAED,QAAM,YAAY,GAAG,QAAQ,CAAC,IAAD,CAA7B;AACA,QAAM,OAAO,GAAG,kBAAkB,CAAE,CAAD,IAAM;AACxC,UAAM;AAAE,QAAE,EAAE;AAAN,QAAkB,CAAC,CAAC,aAAF,CAAgB,OAAxC;AACA,gBAAY,CAAC,IAAb;AACC,SAAG,EAAE,QADN;AAEC,aAFD;AAGC,SAAG,EAAE,IAAI,CAAC;AAHX,OAIK,IAAI,CAAC,IAAL,IAAa;AAAE,UAAI,EAAE,IAAI,CAAC;AAAb,KAJlB;AAMA,GARiC,CAAlC;AAUA,QAAM,OAAO,GAAuB,OAAO,CAC1C,MAAM,CACL,CAAC,KAAD,EAAQ,CAAC,CAAC,KAAD,CAAT,CADK,EAEL,CAAC,WAAD,EAAc,CAAC,CAAC,WAAD,CAAf,CAFK,EAGL,CAAC,QAAD,EAAW,CAAC,CAAC,QAAD,CAAZ,CAHK,CADoC,EAM1C,CAAC,CAAD,CAN0C,CAA3C;AASA,QAAM;AAAE,OAAF;AAAO,kBAAc,EAAE;AAAE,gBAAU,GAAG,GAAf;AAAoB,eAAS,GAAG;AAAhC,QAAsC;AAA7D,MAAoE,iBAAiB,CAAc;AACxG,iBAAa,EAAE;AADyF,GAAd,CAA3F;AAIA,QAAM,GAAG,GAAG,aAAa,EAAzB;AACA,QAAM,IAAI,GAAG,uBAAuB,CAAC,MAAD,CAApC;AAEA,sBACC,uDACC,oBAAC,WAAD,CAAa,MAAb,qBACC,oBAAC,WAAD,CAAa,IAAb;AAAkB,QAAI,EAAC;AAAvB,IADD,eAEC,oBAAC,WAAD,CAAa,IAAb,QAAmB,CAAC,CAAC,SAAD,CAApB,CAFD,eAGC,oBAAC,WAAD,CAAa,KAAb;AAAmB,WAAO,EAAE;AAA5B,IAHD,CADD,eAOC,oBAAC,WAAD,CAAa,OAAb;AAAqB,iBAAa,EAAE,CAApC;AAAuC,OAAG,EAAE;AAA5C,kBACC,oBAAC,GAAD;AACC,WAAO,EAAC,MADT;AAEC,iBAAa,EAAC,KAFf;AAGC,KAAC,EAAC,KAHH;AAIC,uBAAmB,EAAC,IAJrB;AAKC,uBAAmB,EAAC,OALrB;AAMC,uBAAmB,EAAC,aANrB;AAOC,cAAU,EAAE;AAPb,kBASC,oBAAC,GAAD;AAAK,WAAO,EAAC,MAAb;AAAoB,iBAAa,EAAC,KAAlC;AAAwC,YAAQ,EAAE,CAAlD;AAAqD,MAAE,EAAC;AAAxD,kBACC,oBAAC,OAAD;AAAS,UAAM,EAAC;AAAhB,kBACC,oBAAC,SAAD;AACC,eAAW,EAAE,CAAC,CAAC,iBAAD,CADf;AAEC,SAAK,EAAE,IAFR;AAGC,YAAQ,EAAE,OAHX;AAIC,SAAK,eAAE,oBAAC,IAAD;AAAM,UAAI,EAAC,WAAX;AAAuB,UAAI,EAAC;AAA5B,MAJR;AAKC,OAAG,EAAE;AALN,IADD,eAQC,oBAAC,MAAD;AAAQ,YAAQ,EAAE,CAAlB;AAAqB,SAAK,EAAC,OAA3B;AAAmC,YAAQ,EAAE,OAA7C;AAAsD,SAAK,EAAE,IAA7D;AAAmE,WAAO,EAAE;AAA5E,IARD,CADD,CATD,CADD,EAwBE,OAAO,iBACP,oBAAC,GAAD;AAAK,MAAE,EAAC,KAAR;AAAc,MAAE,EAAC;AAAjB,kBACC,oBAAC,QAAD;AAAU,QAAI,EAAC;AAAf,IADD,CAzBF,EA8BE,KAAK,iBACL,oBAAC,OAAD;AAAS,MAAE,EAAC,KAAZ;AAAkB,QAAI,EAAC;AAAvB,KACE,KAAK,CAAC,QAAN,EADF,CA/BF,EAoCE,CAAC,OAAD,IAAY,KAAK,KAAK,CAAtB,iBACA,oBAAC,GAAD;AAAK,KAAC,EAAC,KAAP;AAAa,SAAK,EAAC,aAAnB;AAAiC,aAAS,EAAC,QAA3C;AAAoD,SAAK,EAAC;AAA1D,KACE,CAAC,CAAC,YAAD,CADH,CArCF,eA0CC,oBAAC,GAAD;AAAK,YAAQ,EAAE,CAAf;AAAkB,cAAU,EAAE,CAA9B;AAAiC,YAAQ,EAAC,QAA1C;AAAmD,WAAO,EAAC;AAA3D,KACE,CAAC,KAAD,IAAU,KAAK,GAAG,CAAlB,IAAuB,OAAO,CAAC,MAAR,GAAiB,CAAxC,iBACA,oBAAC,QAAD;AACC,SAAK,EAAE;AACN,YAAM,EAAE,SADF;AAEN,WAAK,EAAE;AAFD,KADR;AAKC,cAAU,EAAE,KALb;AAMC,cAAU,EAAE,OAAO,GAAG,MAAY,SAAf,GAA4B,KAAD,IAAoB,aAAa,CAAC,KAAD,EAAQ,IAAI,CAAC,GAAL,CAAS,EAAT,EAAa,KAAK,GAAG,KAArB,CAAR,CANhF;AAOC,YAAQ,EAAE,EAPX;AAQC,QAAI,EAAE,OARP;AASC,cAAU,EAAE;AAAE,cAAQ,EAAE;AAAZ,KATb;AAUC,eAAW,EAAE,CAAC,MAAD,EAAS,IAAT,kBAEX,oBAAC,GAAD;AACC,YAAM,EAAE,IADT;AAEC,mBAAa,EAAE,aAFhB;AAGC,YAAM,EAAE,MAHT;AAIC,gBAAU,EAAE,UAJb;AAKC,iBAAW,EAAE,WALd;AAMC,YAAM,EAAE,MAAM,IAAI,EANnB;AAOC,aAAO,EAAE;AAPV;AAZH,IAFF,CA1CD,CAPD,EA+EE,OAAO,GAAP,KAAe,QAAf,iBACA,oBAAC,WAAD,CAAa,YAAb,qBACC,oBAAC,eAAD;AAAiB,eAAW,EAAE,OAA9B;AAAuC,OAAG,EAAE,GAA5C;AAAiD,QAAI,EAAE,IAAvD;AAA6D,QAAI,EAAE;AAAnE,IADD,CAhFF,CADD;AAuFA,CA7IM;;AA1CP,OAAO,aAAP,CAyLe,QAAQ,CAAC,UAAD,CAzLvB,E","file":"dynamic/client/views/room/contextualBar/Threads/ThreadList.tsx","sourcesContent":["import { Box, Icon, TextInput, Select, Margins, Callout, Throbber } from '@rocket.chat/fuselage';\nimport { useResizeObserver, useMutableCallback, useAutoFocus } from '@rocket.chat/fuselage-hooks';\nimport React, { FC, useMemo } from 'react';\nimport { Virtuoso } from 'react-virtuoso';\n\nimport { IMessage } from '../../../../../definition/IMessage';\nimport { IRoom } from '../../../../../definition/IRoom';\nimport { IUser } from '../../../../../definition/IUser';\nimport ScrollableContentWrapper from '../../../../components/ScrollableContentWrapper';\nimport VerticalBar from '../../../../components/VerticalBar';\nimport { useRoute, useCurrentRoute, useQueryStringParameter } from '../../../../contexts/RouterContext';\nimport { useSetting } from '../../../../contexts/SettingsContext';\nimport { useTranslation } from '../../../../contexts/TranslationContext';\nimport { useTabContext } from '../../providers/ToolboxProvider';\nimport ThreadComponent from '../../threads/ThreadComponent';\nimport Row from './Row';\nimport { withData } from './withData';\n\nexport type ThreadListProps = {\n\ttotal: number;\n\tthreads: IMessage[];\n\troom: IRoom;\n\tunread?: string[];\n\tunreadUser?: string[];\n\tunreadGroup?: string[];\n\tuserId?: IUser['_id'] | null;\n\n\ttype: 'all' | 'following' | 'unread';\n\tsetType: (type: string) => void;\n\n\tloading: boolean;\n\n\terror?: Error;\n\n\ttext: string;\n\tsetText: (text: string) => void;\n\n\tonClose: () => void;\n\n\tloadMoreItems: (min: number, max: number) => void;\n};\n\nexport const ThreadList: FC<ThreadListProps> = function ThreadList({\n\ttotal = 10,\n\tthreads = [],\n\troom,\n\tunread = [],\n\tunreadUser = [],\n\tunreadGroup = [],\n\ttext,\n\ttype,\n\tsetType,\n\tloadMoreItems,\n\tloading,\n\tonClose,\n\terror,\n\tuserId = '',\n\tsetText,\n}) {\n\tconst showRealNames = Boolean(useSetting('UI_Use_Real_Name'));\n\n\tconst t = useTranslation();\n\tconst inputRef = useAutoFocus(true);\n\tconst [name] = useCurrentRoute();\n\n\tif (!name) {\n\t\tthrow new Error('No route name');\n\t}\n\n\tconst channelRoute = useRoute(name);\n\tconst onClick = useMutableCallback((e) => {\n\t\tconst { id: context } = e.currentTarget.dataset;\n\t\tchannelRoute.push({\n\t\t\ttab: 'thread',\n\t\t\tcontext,\n\t\t\trid: room._id,\n\t\t\t...(room.name && { name: room.name }),\n\t\t});\n\t});\n\n\tconst options: [string, string][] = useMemo(\n\t\t() => [\n\t\t\t['all', t('All')],\n\t\t\t['following', t('Following')],\n\t\t\t['unread', t('Unread')],\n\t\t],\n\t\t[t],\n\t);\n\n\tconst { ref, contentBoxSize: { inlineSize = 378, blockSize = 1 } = {} } = useResizeObserver<HTMLElement>({\n\t\tdebounceDelay: 200,\n\t});\n\n\tconst mid = useTabContext();\n\tconst jump = useQueryStringParameter('jump');\n\n\treturn (\n\t\t<>\n\t\t\t<VerticalBar.Header>\n\t\t\t\t<VerticalBar.Icon name='thread' />\n\t\t\t\t<VerticalBar.Text>{t('Threads')}</VerticalBar.Text>\n\t\t\t\t<VerticalBar.Close onClick={onClose} />\n\t\t\t</VerticalBar.Header>\n\n\t\t\t<VerticalBar.Content paddingInline={0} ref={ref}>\n\t\t\t\t<Box\n\t\t\t\t\tdisplay='flex'\n\t\t\t\t\tflexDirection='row'\n\t\t\t\t\tp='x24'\n\t\t\t\t\tborderBlockEndWidth='x2'\n\t\t\t\t\tborderBlockEndStyle='solid'\n\t\t\t\t\tborderBlockEndColor='neutral-200'\n\t\t\t\t\tflexShrink={0}\n\t\t\t\t>\n\t\t\t\t\t<Box display='flex' flexDirection='row' flexGrow={1} mi='neg-x4'>\n\t\t\t\t\t\t<Margins inline='x4'>\n\t\t\t\t\t\t\t<TextInput\n\t\t\t\t\t\t\t\tplaceholder={t('Search_Messages')}\n\t\t\t\t\t\t\t\tvalue={text}\n\t\t\t\t\t\t\t\tonChange={setText as any}\n\t\t\t\t\t\t\t\taddon={<Icon name='magnifier' size='x20' />}\n\t\t\t\t\t\t\t\tref={inputRef}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Select flexGrow={0} width='110px' onChange={setType} value={type} options={options} />\n\t\t\t\t\t\t</Margins>\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\n\t\t\t\t{loading && (\n\t\t\t\t\t<Box pi='x24' pb='x12'>\n\t\t\t\t\t\t<Throbber size='x12' />\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\n\t\t\t\t{error && (\n\t\t\t\t\t<Callout mi='x24' type='danger'>\n\t\t\t\t\t\t{error.toString()}\n\t\t\t\t\t</Callout>\n\t\t\t\t)}\n\n\t\t\t\t{!loading && total === 0 && (\n\t\t\t\t\t<Box p='x24' color='neutral-600' textAlign='center' width='full'>\n\t\t\t\t\t\t{t('No_Threads')}\n\t\t\t\t\t</Box>\n\t\t\t\t)}\n\n\t\t\t\t<Box flexGrow={1} flexShrink={1} overflow='hidden' display='flex'>\n\t\t\t\t\t{!error && total > 0 && threads.length > 0 && (\n\t\t\t\t\t\t<Virtuoso\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\theight: blockSize,\n\t\t\t\t\t\t\t\twidth: inlineSize,\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\ttotalCount={total}\n\t\t\t\t\t\t\tendReached={loading ? (): void => undefined : (start): unknown => loadMoreItems(start, Math.min(50, total - start))}\n\t\t\t\t\t\t\toverscan={25}\n\t\t\t\t\t\t\tdata={threads}\n\t\t\t\t\t\t\tcomponents={{ Scroller: ScrollableContentWrapper as any }}\n\t\t\t\t\t\t\titemContent={(_index, data: IMessage): FC<IMessage> =>\n\t\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\t\t<Row\n\t\t\t\t\t\t\t\t\t\tthread={data}\n\t\t\t\t\t\t\t\t\t\tshowRealNames={showRealNames}\n\t\t\t\t\t\t\t\t\t\tunread={unread}\n\t\t\t\t\t\t\t\t\t\tunreadUser={unreadUser}\n\t\t\t\t\t\t\t\t\t\tunreadGroup={unreadGroup}\n\t\t\t\t\t\t\t\t\t\tuserId={userId || ''}\n\t\t\t\t\t\t\t\t\t\tonClick={onClick}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) as unknown as FC<IMessage>\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Box>\n\t\t\t</VerticalBar.Content>\n\n\t\t\t{typeof mid === 'string' && (\n\t\t\t\t<VerticalBar.InnerContent>\n\t\t\t\t\t<ThreadComponent onClickBack={onClick} mid={mid} jump={jump} room={room} />\n\t\t\t\t</VerticalBar.InnerContent>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default withData(ThreadList);\n"]}