{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/cloud/TroubleshootingSection.js"],"names":["_extends","module","link","default","v","_objectWithoutProperties","Box","Button","ButtonGroup","Throbber","useSafely","React","useState","Subtitle","useMethod","useToastMessageDispatch","useTranslation","statusPageUrl","TroubleshootingSection","onRegisterStatusChange","props","t","dispatchToastMessage","isSyncing","setSyncing","syncWorkspace","handleSyncButtonClick","isSynced","Error","type","message","error","exportDefault"],"mappings":"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","file":"dynamic/client/views/admin/cloud/TroubleshootingSection.js","sourcesContent":["import { Box, Button, ButtonGroup, Throbber } from '@rocket.chat/fuselage';\nimport { useSafely } from '@rocket.chat/fuselage-hooks';\nimport React, { useState } from 'react';\n\nimport Subtitle from '../../../components/Subtitle';\nimport { useMethod } from '../../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { statusPageUrl } from './constants';\n\nfunction TroubleshootingSection({ onRegisterStatusChange, ...props }) {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\n\tconst [isSyncing, setSyncing] = useSafely(useState(false));\n\n\tconst syncWorkspace = useMethod('cloud:syncWorkspace');\n\n\tconst handleSyncButtonClick = async () => {\n\t\tsetSyncing(true);\n\n\t\ttry {\n\t\t\tconst isSynced = await syncWorkspace();\n\n\t\t\tif (!isSynced) {\n\t\t\t\tthrow Error(t('An error occured syncing'));\n\t\t\t}\n\n\t\t\tdispatchToastMessage({ type: 'success', message: t('Sync Complete') });\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t} finally {\n\t\t\tawait (onRegisterStatusChange && onRegisterStatusChange());\n\t\t\tsetSyncing(false);\n\t\t}\n\t};\n\n\treturn (\n\t\t<Box is='section' {...props}>\n\t\t\t<Subtitle>{t('Cloud_troubleshooting')}</Subtitle>\n\n\t\t\t<Box withRichContent color='neutral-800'>\n\t\t\t\t<p>{t('Cloud_workspace_support')}</p>\n\t\t\t</Box>\n\n\t\t\t<ButtonGroup>\n\t\t\t\t<Button disabled={isSyncing} minHeight='x40' onClick={handleSyncButtonClick}>\n\t\t\t\t\t{isSyncing ? <Throbber is='span' inheritColor /> : t('Sync')}\n\t\t\t\t</Button>\n\t\t\t</ButtonGroup>\n\n\t\t\t<Box withRichContent color='neutral-800'>\n\t\t\t\t<p>\n\t\t\t\t\t{t('Cloud_status_page_description')}:{' '}\n\t\t\t\t\t<a href={statusPageUrl} target='_blank' rel='noopener noreferrer'>\n\t\t\t\t\t\t{statusPageUrl}\n\t\t\t\t\t</a>\n\t\t\t\t</p>\n\t\t\t</Box>\n\t\t</Box>\n\t);\n}\n\nexport default TroubleshootingSection;\n"]}