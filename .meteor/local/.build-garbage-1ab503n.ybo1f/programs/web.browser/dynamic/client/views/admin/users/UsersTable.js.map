{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/users/UsersTable.js"],"names":["_extends","module","link","default","v","_objectWithoutProperties","useMediaQuery","React","useCallback","FilterByText","GenericTable","useRoute","useTranslation","UserRow","UsersTable","params","onChangeParams","sort","onChangeSort","props","t","usersRoute","onClick","username","push","context","id","onHeaderClick","preparedSort","sortBy","sortDirection","mediaQuery","users","total","onChange","_id","exportDefault"],"mappings":"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","file":"dynamic/client/views/admin/users/UsersTable.js","sourcesContent":["import { useMediaQuery } from '@rocket.chat/fuselage-hooks';\nimport React, { useCallback } from 'react';\n\nimport FilterByText from '../../../components/FilterByText';\nimport GenericTable from '../../../components/GenericTable';\nimport { useRoute } from '../../../contexts/RouterContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport UserRow from './UserRow';\n\nfunction UsersTable({ params, onChangeParams, sort, onChangeSort, ...props }) {\n\tconst t = useTranslation();\n\n\tconst usersRoute = useRoute('admin-users');\n\n\tconst onClick = useCallback(\n\t\t(username) => () =>\n\t\t\tusersRoute.push({\n\t\t\t\tcontext: 'info',\n\t\t\t\tid: username,\n\t\t\t}),\n\t\t[usersRoute],\n\t);\n\n\tconst onHeaderClick = useCallback(\n\t\t(id) => {\n\t\t\tconst preparedSort = [];\n\n\t\t\tconst [[sortBy, sortDirection]] = sort;\n\n\t\t\tif (sortBy === id) {\n\t\t\t\tpreparedSort.push([id, sortDirection === 'asc' ? 'desc' : 'asc']);\n\t\t\t} else {\n\t\t\t\tpreparedSort.push([id, 'asc']);\n\t\t\t}\n\n\t\t\t//\n\t\t\t// Special cases\n\n\t\t\t// If the sortable field is `name`, we should also add `usernames`\n\t\t\tif (id === 'name') {\n\t\t\t\tpreparedSort.push(['usernames', sortDirection]);\n\t\t\t}\n\n\t\t\t// If the sortable field is `name`, we should also add `usernames`\n\t\t\tif (id === 'status') {\n\t\t\t\tpreparedSort.push(['active', sortDirection === 'asc' ? 'desc' : 'asc']);\n\t\t\t}\n\n\t\t\tonChangeSort(preparedSort);\n\t\t},\n\t\t[onChangeSort, sort],\n\t);\n\n\tconst mediaQuery = useMediaQuery('(min-width: 1024px)');\n\n\treturn (\n\t\t<GenericTable\n\t\t\theader={\n\t\t\t\t<>\n\t\t\t\t\t<GenericTable.HeaderCell\n\t\t\t\t\t\tkey={'name'}\n\t\t\t\t\t\tdirection={sort[0][1]}\n\t\t\t\t\t\tactive={sort[0][0] === 'name'}\n\t\t\t\t\t\tonClick={onHeaderClick}\n\t\t\t\t\t\tsort='name'\n\t\t\t\t\t\tw='x200'\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('Name')}\n\t\t\t\t\t</GenericTable.HeaderCell>\n\t\t\t\t\t{mediaQuery && (\n\t\t\t\t\t\t<GenericTable.HeaderCell\n\t\t\t\t\t\t\tkey={'username'}\n\t\t\t\t\t\t\tdirection={sort[0][1]}\n\t\t\t\t\t\t\tactive={sort[0][0] === 'username'}\n\t\t\t\t\t\t\tonClick={onHeaderClick}\n\t\t\t\t\t\t\tsort='username'\n\t\t\t\t\t\t\tw='x140'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('Username')}\n\t\t\t\t\t\t</GenericTable.HeaderCell>\n\t\t\t\t\t)}\n\t\t\t\t\t<GenericTable.HeaderCell\n\t\t\t\t\t\tkey={'email'}\n\t\t\t\t\t\tdirection={sort[0][1]}\n\t\t\t\t\t\tactive={sort[0][0] === 'emails.adress'}\n\t\t\t\t\t\tonClick={onHeaderClick}\n\t\t\t\t\t\tsort='emails.address'\n\t\t\t\t\t\tw='x120'\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('Email')}\n\t\t\t\t\t</GenericTable.HeaderCell>\n\t\t\t\t\t{mediaQuery && (\n\t\t\t\t\t\t<GenericTable.HeaderCell\n\t\t\t\t\t\t\tkey={'roles'}\n\t\t\t\t\t\t\tdirection={sort[0][1]}\n\t\t\t\t\t\t\tactive={sort[0][0] === 'roles'}\n\t\t\t\t\t\t\tonClick={onHeaderClick}\n\t\t\t\t\t\t\tsort='roles'\n\t\t\t\t\t\t\tw='x120'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{t('Roles')}\n\t\t\t\t\t\t</GenericTable.HeaderCell>\n\t\t\t\t\t)}\n\t\t\t\t\t<GenericTable.HeaderCell\n\t\t\t\t\t\tkey={'status'}\n\t\t\t\t\t\tdirection={sort[0][1]}\n\t\t\t\t\t\tactive={sort[0][0] === 'status'}\n\t\t\t\t\t\tonClick={onHeaderClick}\n\t\t\t\t\t\tsort='status'\n\t\t\t\t\t\tw='x100'\n\t\t\t\t\t>\n\t\t\t\t\t\t{t('Status')}\n\t\t\t\t\t</GenericTable.HeaderCell>\n\t\t\t\t</>\n\t\t\t}\n\t\t\tresults={props.users}\n\t\t\ttotal={props.total}\n\t\t\tsetParams={onChangeParams}\n\t\t\tparams={params}\n\t\t\trenderFilter={({ onChange, ...props }) => <FilterByText placeholder={t('Search_Users')} onChange={onChange} {...props} />}\n\t\t>\n\t\t\t{(props) => <UserRow key={props._id} onClick={onClick} mediaQuery={mediaQuery} {...props} />}\n\t\t</GenericTable>\n\t);\n}\n\nexport default UsersTable;\n"]}