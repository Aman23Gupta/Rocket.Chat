{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/analytics/Overview.js"],"names":["_objectSpread","module","link","default","v","Box","Skeleton","React","useEffect","useState","useMemo","useMethod","useTranslation","CounterItem","CounterRow","initialData","Array","from","length","map","title","value","conversationsInitialData","productivityInitialData","Overview","type","dateRange","departmentId","t","start","end","params","analyticsOptions","name","daterange","to","loadData","displayData","setDisplayData","fetchData","slice","items","i","exportDefault"],"mappings":"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","file":"dynamic/client/views/omnichannel/analytics/Overview.js","sourcesContent":["import { Box, Skeleton } from '@rocket.chat/fuselage';\nimport React, { useEffect, useState, useMemo } from 'react';\n\nimport { useMethod } from '../../../contexts/ServerContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport CounterItem from '../realTimeMonitoring/counter/CounterItem';\nimport CounterRow from '../realTimeMonitoring/counter/CounterRow';\n\nconst initialData = Array.from({ length: 3 }).map(() => ({ title: '', value: '' }));\n\nconst conversationsInitialData = [initialData, initialData];\nconst productivityInitialData = [initialData];\n\nconst Overview = ({ type, dateRange, departmentId }) => {\n\tconst t = useTranslation();\n\n\tconst { start, end } = dateRange;\n\n\tconst params = useMemo(\n\t\t() => ({\n\t\t\tanalyticsOptions: { name: type },\n\t\t\tdaterange: { from: start, to: end },\n\t\t\t...(departmentId && { departmentId }),\n\t\t}),\n\t\t[departmentId, end, start, type],\n\t);\n\n\tconst loadData = useMethod('livechat:getAnalyticsOverviewData');\n\n\tconst [displayData, setDisplayData] = useState(conversationsInitialData);\n\n\tuseEffect(() => {\n\t\tsetDisplayData(type === 'Conversations' ? conversationsInitialData : productivityInitialData);\n\t}, [type]);\n\n\tuseEffect(() => {\n\t\tasync function fetchData() {\n\t\t\tif (!start || !end) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst value = await loadData(params);\n\t\t\tif (!value) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif (value.length > 3) {\n\t\t\t\treturn setDisplayData([value.slice(0, 3), value.slice(3)]);\n\t\t\t}\n\n\t\t\tsetDisplayData([value]);\n\t\t}\n\t\tfetchData();\n\t}, [start, end, loadData, params]);\n\n\treturn (\n\t\t<Box pb='x28' flexDirection='column'>\n\t\t\t{displayData.map((items = [], i) => (\n\t\t\t\t<CounterRow key={i} border='0' pb='none'>\n\t\t\t\t\t{items.map(({ title, value }, i) => (\n\t\t\t\t\t\t<CounterItem\n\t\t\t\t\t\t\tflexShrink={1}\n\t\t\t\t\t\t\tpb='x8'\n\t\t\t\t\t\t\tflexBasis='100%'\n\t\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\t\ttitle={title ? t(title) : <Skeleton width='x60' />}\n\t\t\t\t\t\t\tcount={value}\n\t\t\t\t\t\t/>\n\t\t\t\t\t))}\n\t\t\t\t</CounterRow>\n\t\t\t))}\n\t\t</Box>\n\t);\n};\n\nexport default Overview;\n"]}