{"version":3,"sources":["meteor://ðŸ’»app/client/views/meet/CallPage.tsx"],"names":[],"mappings":"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","file":"dynamic/client/views/meet/CallPage.tsx","sourcesContent":["import { Box, Flex, ButtonGroup, Button, Icon } from '@rocket.chat/fuselage';\nimport moment from 'moment';\nimport React, { FC, useEffect, useState } from 'react';\n\nimport { Notifications } from '../../../app/notifications/client';\nimport { WebRTC } from '../../../app/webrtc/client';\nimport { WEB_RTC_EVENTS } from '../../../app/webrtc/index';\nimport UserAvatar from '../../components/avatar/UserAvatar';\nimport { useTranslation } from '../../contexts/TranslationContext';\nimport OngoingCallDuration from './OngoingCallDuration';\nimport './styles.css';\n\ntype CallPageProps = {\n\troomId: any;\n\tvisitorToken: any;\n\tvisitorId: any;\n\tstatus: any;\n\tsetStatus: any;\n\tlayout: any;\n\tvisitorName: any;\n\tagentName: any;\n\tcallStartTime: any;\n};\n\nconst CallPage: FC<CallPageProps> = ({\n\troomId,\n\tvisitorToken,\n\tvisitorId,\n\tstatus,\n\tsetStatus,\n\tlayout,\n\tvisitorName,\n\tagentName,\n\tcallStartTime,\n}) => {\n\tconst [isAgentActive, setIsAgentActive] = useState(false);\n\tconst [isMicOn, setIsMicOn] = useState(false);\n\tconst [isCameraOn, setIsCameraOn] = useState(false);\n\tconst [isRemoteMobileDevice, setIsRemoteMobileDevice] = useState(false);\n\tconst [callInIframe, setCallInIframe] = useState(false);\n\tconst [isRemoteCameraOn, setIsRemoteCameraOn] = useState(false);\n\tconst [isLocalMobileDevice, setIsLocalMobileDevice] = useState(false);\n\n\tlet iconSize = 'x21';\n\tlet buttonSize = 'x40';\n\tconst avatarSize = 'x48';\n\tif (layout === 'embedded') {\n\t\ticonSize = 'x19';\n\t\tbuttonSize = 'x35';\n\t}\n\n\tconst t = useTranslation();\n\tuseEffect(() => {\n\t\tif (visitorToken) {\n\t\t\tconst webrtcInstance = WebRTC.getInstanceByRoomId(roomId, visitorId);\n\t\t\tconst isMobileDevice = (): boolean => {\n\t\t\t\tif (layout === 'embedded') {\n\t\t\t\t\tsetCallInIframe(true);\n\t\t\t\t}\n\t\t\t\tif (window.innerWidth <= 450 && window.innerHeight >= 629 && window.innerHeight <= 900) {\n\t\t\t\t\tsetIsLocalMobileDevice(true);\n\t\t\t\t\twebrtcInstance.media = {\n\t\t\t\t\t\taudio: true,\n\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\twidth: { ideal: 440 },\n\t\t\t\t\t\t\theight: { ideal: 580 },\n\t\t\t\t\t\t},\n\t\t\t\t\t};\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t};\n\t\t\tNotifications.onUser(\n\t\t\t\tWEB_RTC_EVENTS.WEB_RTC,\n\t\t\t\t(type: any, data: any) => {\n\t\t\t\t\tif (data.room == null) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\twebrtcInstance.onUserStream(type, data);\n\t\t\t\t},\n\t\t\t\tvisitorId,\n\t\t\t);\n\t\t\tNotifications.onRoom(roomId, 'webrtc', (type: any, data: any) => {\n\t\t\t\tif (type === 'callStatus' && data.callStatus === 'ended') {\n\t\t\t\t\twebrtcInstance.stop();\n\t\t\t\t\tsetStatus(data.callStatus);\n\t\t\t\t} else if (type === 'getDeviceType') {\n\t\t\t\t\tNotifications.notifyRoom(roomId, 'webrtc', 'deviceType', {\n\t\t\t\t\t\tisMobileDevice: isMobileDevice(),\n\t\t\t\t\t});\n\t\t\t\t} else if (type === 'cameraStatus') {\n\t\t\t\t\tsetIsRemoteCameraOn(data.isCameraOn);\n\t\t\t\t}\n\t\t\t});\n\t\t\tNotifications.notifyRoom(roomId, 'webrtc', 'deviceType', {\n\t\t\t\tisMobileDevice: isMobileDevice(),\n\t\t\t});\n\t\t\tNotifications.notifyRoom(roomId, 'webrtc', 'callStatus', { callStatus: 'inProgress' });\n\t\t} else if (!isAgentActive) {\n\t\t\tconst webrtcInstance = WebRTC.getInstanceByRoomId(roomId);\n\t\t\tif (status === 'inProgress') {\n\t\t\t\tNotifications.notifyRoom(roomId, 'webrtc', 'getDeviceType');\n\t\t\t\twebrtcInstance.startCall({\n\t\t\t\t\taudio: true,\n\t\t\t\t\tvideo: {\n\t\t\t\t\t\twidth: { ideal: 1920 },\n\t\t\t\t\t\theight: { ideal: 1080 },\n\t\t\t\t\t},\n\t\t\t\t});\n\t\t\t}\n\t\t\tNotifications.onRoom(roomId, 'webrtc', (type: any, data: any) => {\n\t\t\t\tif (type === 'callStatus') {\n\t\t\t\t\tswitch (data.callStatus) {\n\t\t\t\t\t\tcase 'ended':\n\t\t\t\t\t\t\twebrtcInstance.stop();\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 'inProgress':\n\t\t\t\t\t\t\twebrtcInstance.startCall({\n\t\t\t\t\t\t\t\taudio: true,\n\t\t\t\t\t\t\t\tvideo: {\n\t\t\t\t\t\t\t\t\twidth: { ideal: 1920 },\n\t\t\t\t\t\t\t\t\theight: { ideal: 1080 },\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\tsetStatus(data.callStatus);\n\t\t\t\t} else if (type === 'deviceType' && data.isMobileDevice) {\n\t\t\t\t\tsetIsRemoteMobileDevice(true);\n\t\t\t\t} else if (type === 'cameraStatus') {\n\t\t\t\t\tsetIsRemoteCameraOn(data.isCameraOn);\n\t\t\t\t}\n\t\t\t});\n\t\t\tsetIsAgentActive(true);\n\t\t}\n\t}, [isAgentActive, status, setStatus, visitorId, roomId, visitorToken, layout]);\n\n\tconst toggleButton = (control: any): any => {\n\t\tif (control === 'mic') {\n\t\t\tWebRTC.getInstanceByRoomId(roomId, visitorToken).toggleAudio();\n\t\t\treturn setIsMicOn(!isMicOn);\n\t\t}\n\t\tWebRTC.getInstanceByRoomId(roomId, visitorToken).toggleVideo();\n\t\tsetIsCameraOn(!isCameraOn);\n\t\tNotifications.notifyRoom(roomId, 'webrtc', 'cameraStatus', { isCameraOn: !isCameraOn });\n\t};\n\n\tconst closeWindow = (): void => {\n\t\tif (layout === 'embedded') {\n\t\t\treturn (parent as any)?.handleIframeClose();\n\t\t}\n\t\treturn window.close();\n\t};\n\n\tconst getCallDuration = (callStartTime: any): any => moment.duration(moment(new Date()).diff(moment(callStartTime))).asSeconds();\n\n\tconst showCallPage = (localAvatar: any, remoteAvatar: any): any => (\n\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t<Box width='full' minHeight='sh' alignItems='center' backgroundColor='neutral-900' overflow='hidden' position='relative'>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\ttop: '5%',\n\t\t\t\t\t\tright: '2%',\n\t\t\t\t\t}}\n\t\t\t\t\tclassName='Self_Video'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tbackgroundColor='#2F343D'\n\t\t\t\t>\n\t\t\t\t\t<video\n\t\t\t\t\t\tid='localVideo'\n\t\t\t\t\t\tautoPlay\n\t\t\t\t\t\tplaysInline\n\t\t\t\t\t\tmuted\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: '100%',\n\t\t\t\t\t\t\ttransform: 'scaleX(-1)',\n\t\t\t\t\t\t\tdisplay: isCameraOn ? 'block' : 'none',\n\t\t\t\t\t\t}}\n\t\t\t\t\t></video>\n\t\t\t\t\t<UserAvatar\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: isCameraOn ? 'none' : 'block',\n\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tusername={localAvatar}\n\t\t\t\t\t\tclassName='rcx-message__avatar'\n\t\t\t\t\t\tsize={isLocalMobileDevice || callInIframe ? 'x32' : 'x48'}\n\t\t\t\t\t/>\n\t\t\t\t</Box>\n\t\t\t\t<ButtonGroup\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\tbottom: '5%',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tid='mic'\n\t\t\t\t\t\tsquare\n\t\t\t\t\t\tdata-title={isMicOn ? t('Mute_microphone') : t('Unmute_microphone')}\n\t\t\t\t\t\tonClick={(): any => toggleButton('mic')}\n\t\t\t\t\t\tclassName={isMicOn ? 'On' : 'Off'}\n\t\t\t\t\t\tsize={Number(buttonSize)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isMicOn ? <Icon name='mic' size={iconSize} /> : <Icon name='mic-off' size={iconSize} />}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tid='camera'\n\t\t\t\t\t\tsquare\n\t\t\t\t\t\tdata-title={isCameraOn ? t('Turn_off_video') : t('Turn_on_video')}\n\t\t\t\t\t\tonClick={(): void => toggleButton('camera')}\n\t\t\t\t\t\tclassName={isCameraOn ? 'On' : 'Off'}\n\t\t\t\t\t\tsize={parseInt(buttonSize)}\n\t\t\t\t\t>\n\t\t\t\t\t\t{isCameraOn ? <Icon name='video' size={iconSize} /> : <Icon name='video-off' size={iconSize} />}\n\t\t\t\t\t</Button>\n\t\t\t\t\t{layout === 'embedded' && (\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tsquare\n\t\t\t\t\t\t\tbackgroundColor='#2F343D'\n\t\t\t\t\t\t\tborderColor='#2F343D'\n\t\t\t\t\t\t\tdata-title={t('Expand_view')}\n\t\t\t\t\t\t\tonClick={(): void => (parent as any)?.expandCall()}\n\t\t\t\t\t\t\tsize={parseInt(buttonSize)}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<Icon name='arrow-expand' size={iconSize} color='white' />\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t)}\n\t\t\t\t\t<Button square primary danger data-title={t('End_call')} onClick={closeWindow} size={parseInt(buttonSize)}>\n\t\t\t\t\t\t<Icon name='phone-off' size={iconSize} color='white' />\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t\t<video\n\t\t\t\t\tid='remoteVideo'\n\t\t\t\t\tautoPlay\n\t\t\t\t\tplaysInline\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\twidth: isRemoteMobileDevice ? '45%' : '100%',\n\t\t\t\t\t\ttransform: 'scaleX(-1)',\n\t\t\t\t\t\tdisplay: isRemoteCameraOn ? 'block' : 'none',\n\t\t\t\t\t}}\n\t\t\t\t></video>\n\t\t\t\t<Box\n\t\t\t\t\tposition='absolute'\n\t\t\t\t\tzIndex={1}\n\t\t\t\t\tdisplay={isRemoteCameraOn ? 'none' : 'flex'}\n\t\t\t\t\tjustifyContent='center'\n\t\t\t\t\tflexDirection='column'\n\t\t\t\t\talignItems='center'\n\t\t\t\t\tstyle={{\n\t\t\t\t\t\ttop: isRemoteMobileDevice || isLocalMobileDevice ? '10%' : '30%',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\t<UserAvatar\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t}}\n\t\t\t\t\t\tusername={remoteAvatar}\n\t\t\t\t\t\tclassName='rcx-message__avatar'\n\t\t\t\t\t\tsize={!callInIframe ? 'x124' : avatarSize}\n\t\t\t\t\t/>\n\t\t\t\t\t<Box color='white' fontSize={callInIframe ? 12 : 18} textAlign='center' margin={3}>\n\t\t\t\t\t\t<OngoingCallDuration counter={getCallDuration(callStartTime)} />\n\t\t\t\t\t</Box>\n\t\t\t\t\t<Box\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\tfontSize: callInIframe ? 12 : 22,\n\t\t\t\t\t\t\tmargin: callInIframe ? 5 : 9,\n\t\t\t\t\t\t\t...(callInIframe && { marginTop: 0 }),\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t{remoteAvatar}\n\t\t\t\t\t</Box>\n\t\t\t\t</Box>\n\t\t\t</Box>\n\t\t</Flex.Container>\n\t);\n\n\treturn (\n\t\t<>\n\t\t\t{status === 'ringing' && (\n\t\t\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t\t\t<Box width='full' minHeight='sh' alignItems='center' backgroundColor='neutral-900' overflow='hidden' position='relative'>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\t\tzIndex={1}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttop: '5%',\n\t\t\t\t\t\t\t\tright: '2%',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\tclassName='Self_Video'\n\t\t\t\t\t\t\tbackgroundColor='#2F343D'\n\t\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<UserAvatar\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tusername={agentName}\n\t\t\t\t\t\t\t\tclassName='rcx-message__avatar'\n\t\t\t\t\t\t\t\tsize={isLocalMobileDevice ? 'x32' : 'x48'}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\tposition='absolute'\n\t\t\t\t\t\t\tzIndex={1}\n\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\ttop: '20%',\n\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t\tflexDirection: 'column',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\talignItems='center'\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<UserAvatar\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tdisplay: 'block',\n\t\t\t\t\t\t\t\t\tmargin: 'auto',\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\tusername={visitorName}\n\t\t\t\t\t\t\t\tclassName='rcx-message__avatar'\n\t\t\t\t\t\t\t\tsize='x124'\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t<Box color='white' fontSize={16} margin={15}>\n\t\t\t\t\t\t\t\t{'Calling...'}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t<Box\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\tcolor: 'white',\n\t\t\t\t\t\t\t\t\tfontSize: isLocalMobileDevice ? 15 : 22,\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t{visitorName}\n\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t</Box>\n\t\t\t\t\t</Box>\n\t\t\t\t</Flex.Container>\n\t\t\t)}\n\t\t\t{status === 'declined' && (\n\t\t\t\t<Box minHeight='90%' display='flex' justifyContent='center' alignItems='center' color='white' fontSize='s1'>\n\t\t\t\t\t{t('Call_declined')}\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t\t{status === 'inProgress' && (\n\t\t\t\t<Flex.Container direction='column' justifyContent='center'>\n\t\t\t\t\t{visitorToken ? showCallPage(visitorName, agentName) : showCallPage(agentName, visitorName)}\n\t\t\t\t</Flex.Container>\n\t\t\t)}\n\t\t</>\n\t);\n};\n\nexport default CallPage;\n"]}