{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/triggers/TriggersRow.js"],"names":["Table","Icon","Button","module","link","v","useMutableCallback","React","memo","default","GenericModal","useSetModal","useRoute","useMethod","useToastMessageDispatch","useTranslation","TriggersRow","props","_id","name","description","enabled","onDelete","dispatchToastMessage","t","setModal","bhRoute","deleteTrigger","handleClick","push","context","id","handleKeyDown","e","includes","nativeEvent","code","handleDelete","stopPropagation","onDeleteTrigger","type","message","error","exportDefault"],"mappings":"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","file":"dynamic/client/views/omnichannel/triggers/TriggersRow.js","sourcesContent":["import { Table, Icon, Button } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { memo } from 'react';\n\nimport GenericModal from '../../../components/GenericModal';\nimport { useSetModal } from '../../../contexts/ModalContext';\nimport { useRoute } from '../../../contexts/RouterContext';\nimport { useMethod } from '../../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\n\nconst TriggersRow = memo(function TriggersRow(props) {\n\tconst { _id, name, description, enabled, onDelete } = props;\n\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst t = useTranslation();\n\n\tconst setModal = useSetModal();\n\n\tconst bhRoute = useRoute('omnichannel-triggers');\n\n\tconst deleteTrigger = useMethod('livechat:removeTrigger');\n\n\tconst handleClick = useMutableCallback(() => {\n\t\tbhRoute.push({\n\t\t\tcontext: 'edit',\n\t\t\tid: _id,\n\t\t});\n\t});\n\n\tconst handleKeyDown = useMutableCallback((e) => {\n\t\tif (!['Enter', 'Space'].includes(e.nativeEvent.code)) {\n\t\t\treturn;\n\t\t}\n\n\t\thandleClick();\n\t});\n\n\tconst handleDelete = useMutableCallback((e) => {\n\t\te.stopPropagation();\n\t\tconst onDeleteTrigger = async () => {\n\t\t\ttry {\n\t\t\t\tawait deleteTrigger(_id);\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('Trigger_removed') });\n\t\t\t\tonDelete();\n\t\t\t} catch (error) {\n\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t}\n\t\t\tsetModal();\n\t\t};\n\n\t\tsetModal(<GenericModal variant='danger' onConfirm={onDeleteTrigger} onCancel={() => setModal()} confirmText={t('Delete')} />);\n\t});\n\n\treturn (\n\t\t<Table.Row key={_id} role='link' action tabIndex={0} onClick={handleClick} onKeyDown={handleKeyDown}>\n\t\t\t<Table.Cell withTruncatedText>{name}</Table.Cell>\n\t\t\t<Table.Cell withTruncatedText>{description}</Table.Cell>\n\t\t\t<Table.Cell withTruncatedText>{enabled ? t('Yes') : t('No')}</Table.Cell>\n\t\t\t<Table.Cell withTruncatedText>\n\t\t\t\t<Button small ghost title={t('Remove')} onClick={handleDelete}>\n\t\t\t\t\t<Icon name='trash' size='x16' />\n\t\t\t\t</Button>\n\t\t\t</Table.Cell>\n\t\t</Table.Row>\n\t);\n});\n\nexport default TriggersRow;\n"]}