{"version":3,"sources":["meteor://ğŸ’»app/client/views/room/contextualBar/RoomMembers/List/RoomMembersWithData.js"],"names":["useMutableCallback","useDebouncedValue","useLocalStorage","module","link","v","React","useCallback","useMemo","useState","default","useAtLeastOnePermission","useUserRoom","useRecordList","AsyncStatePhase","useMembersList","useTabBarClose","UserInfoWithData","AddUsers","InviteUsers","RoomMembers","RoomMembersWithData","rid","state","setState","onClickClose","room","isTeam","teamMain","isDirect","t","type","setType","text","setText","debouncedText","membersList","loadMoreItems","reload","limit","roomType","phase","items","itemCount","total","canAddUsers","handleTextChange","event","currentTarget","value","viewUser","e","username","dataset","tab","createInvite","addUser","handleBack","LOADING","exportDefault"],"mappings":"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","file":"dynamic/client/views/room/contextualBar/RoomMembers/List/RoomMembersWithData.js","sourcesContent":["import { useMutableCallback, useDebouncedValue, useLocalStorage } from '@rocket.chat/fuselage-hooks';\nimport React, { useCallback, useMemo, useState } from 'react';\n\nimport { useAtLeastOnePermission } from '../../../../../contexts/AuthorizationContext';\nimport { useUserRoom } from '../../../../../contexts/UserContext';\nimport { useRecordList } from '../../../../../hooks/lists/useRecordList';\nimport { AsyncStatePhase } from '../../../../../hooks/useAsyncState';\nimport { useMembersList } from '../../../../hooks/useMembersList';\nimport { useTabBarClose } from '../../../providers/ToolboxProvider';\nimport UserInfoWithData from '../../UserInfo';\nimport AddUsers from '../AddUsers';\nimport InviteUsers from '../InviteUsers';\nimport RoomMembers from './RoomMembers';\n\nconst RoomMembersWithData = ({ rid }) => {\n\tconst [state, setState] = useState({});\n\tconst onClickClose = useTabBarClose();\n\tconst room = useUserRoom(rid);\n\tconst isTeam = room.teamMain;\n\tconst isDirect = room.t === 'd';\n\n\troom.type = room.t;\n\troom.rid = rid;\n\n\tconst [type, setType] = useLocalStorage('members-list-type', 'online');\n\tconst [text, setText] = useState('');\n\n\tconst debouncedText = useDebouncedValue(text, 800);\n\n\tconst { membersList, loadMoreItems, reload } = useMembersList(\n\t\tuseMemo(() => ({ rid, type, limit: 50, debouncedText, roomType: room.t }), [rid, type, debouncedText, room.t]),\n\t);\n\n\tconst { phase, items, itemCount: total } = useRecordList(membersList);\n\n\tconst canAddUsers = useAtLeastOnePermission(\n\t\tuseMemo(() => [room.t === 'p' ? 'add-user-to-any-p-room' : 'add-user-to-any-c-room', 'add-user-to-joined-room'], [room.t]),\n\t\trid,\n\t);\n\n\tconst handleTextChange = useCallback((event) => {\n\t\tsetText(event.currentTarget.value);\n\t}, []);\n\n\tconst viewUser = useMutableCallback((e) => {\n\t\tconst { username } = e.currentTarget.dataset;\n\t\tsetState({\n\t\t\ttab: 'UserInfo',\n\t\t\tusername,\n\t\t});\n\t});\n\n\tconst createInvite = useMutableCallback(() => {\n\t\tsetState({ tab: 'InviteUsers' });\n\t});\n\n\tconst addUser = useMutableCallback(() => {\n\t\tsetState({ tab: 'AddUsers' });\n\t});\n\n\tconst handleBack = useCallback(() => {\n\t\tsetState({});\n\t\treload();\n\t}, [setState, reload]);\n\n\tif (state.tab === 'UserInfo') {\n\t\treturn <UserInfoWithData rid={rid} onClickClose={onClickClose} onClickBack={handleBack} username={state.username} />;\n\t}\n\n\tif (state.tab === 'InviteUsers') {\n\t\treturn <InviteUsers onClickClose={onClickClose} rid={rid} onClickBack={handleBack} />;\n\t}\n\n\tif (state.tab === 'AddUsers') {\n\t\treturn <AddUsers onClickClose={onClickClose} rid={rid} onClickBack={handleBack} reload={reload} />;\n\t}\n\n\treturn (\n\t\t<RoomMembers\n\t\t\trid={rid}\n\t\t\tisTeam={isTeam}\n\t\t\tisDirect={isDirect}\n\t\t\tloading={phase === AsyncStatePhase.LOADING}\n\t\t\ttype={type}\n\t\t\ttext={text}\n\t\t\tsetType={setType}\n\t\t\tsetText={handleTextChange}\n\t\t\tmembers={items}\n\t\t\ttotal={total}\n\t\t\tonClickClose={onClickClose}\n\t\t\tonClickView={viewUser}\n\t\t\tonClickAdd={canAddUsers && addUser}\n\t\t\tonClickInvite={canAddUsers && createInvite}\n\t\t\tloadMoreItems={loadMoreItems}\n\t\t\treload={reload}\n\t\t/>\n\t);\n};\n\nexport default RoomMembersWithData;\n"]}