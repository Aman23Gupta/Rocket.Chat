{"version":3,"sources":["meteor://ðŸ’»app/client/views/omnichannel/directory/ChatsContextualBar.js"],"names":["Box","module","link","v","React","default","VerticalBar","useRoute","useRouteParameter","useTranslation","AsyncStatePhase","useEndpointData","FormSkeleton","Chat","ChatInfoDirectory","RoomEditWithData","ChatsContextualBar","chatReload","directoryRoute","bar","id","t","openInRoom","push","page","handleChatsVerticalBarCloseButtonClick","handleChatsVerticalBarBackButtonClick","value","data","phase","state","error","reload","reloadInfo","LOADING","room","exportDefault"],"mappings":"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","file":"dynamic/client/views/omnichannel/directory/ChatsContextualBar.js","sourcesContent":["import { Box } from '@rocket.chat/fuselage';\nimport React from 'react';\n\nimport VerticalBar from '../../../components/VerticalBar';\nimport { useRoute, useRouteParameter } from '../../../contexts/RouterContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { AsyncStatePhase } from '../../../hooks/useAsyncState';\nimport { useEndpointData } from '../../../hooks/useEndpointData';\nimport { FormSkeleton } from './Skeleton';\nimport Chat from './chats/Chat';\nimport ChatInfoDirectory from './chats/contextualBar/ChatInfoDirectory';\nimport RoomEditWithData from './chats/contextualBar/RoomEditWithData';\n\nconst ChatsContextualBar = ({ chatReload }) => {\n\tconst directoryRoute = useRoute('omnichannel-directory');\n\n\tconst bar = useRouteParameter('bar') || 'info';\n\tconst id = useRouteParameter('id');\n\n\tconst t = useTranslation();\n\n\tconst openInRoom = () => {\n\t\tdirectoryRoute.push({ page: 'chats', id, bar: 'view' });\n\t};\n\n\tconst handleChatsVerticalBarCloseButtonClick = () => {\n\t\tdirectoryRoute.push({ page: 'chats' });\n\t};\n\n\tconst handleChatsVerticalBarBackButtonClick = () => {\n\t\tdirectoryRoute.push({ page: 'chats', id, bar: 'info' });\n\t};\n\n\tconst { value: data, phase: state, error, reload: reloadInfo } = useEndpointData(`rooms.info?roomId=${id}`);\n\n\tif (bar === 'view') {\n\t\treturn <Chat rid={id} />;\n\t}\n\n\tif (state === AsyncStatePhase.LOADING) {\n\t\treturn (\n\t\t\t<Box pi='x24'>\n\t\t\t\t<FormSkeleton />\n\t\t\t</Box>\n\t\t);\n\t}\n\n\tif (error || !data || !data.room) {\n\t\treturn <Box mbs='x16'>{t('Room_not_found')}</Box>;\n\t}\n\n\treturn (\n\t\t<VerticalBar className={'contextual-bar'}>\n\t\t\t<VerticalBar.Header>\n\t\t\t\t{bar === 'info' && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<VerticalBar.Icon name='info-circled' />\n\t\t\t\t\t\t<VerticalBar.Text>{t('Room_Info')}</VerticalBar.Text>\n\t\t\t\t\t\t<VerticalBar.Action title={t('View_full_conversation')} name={'new-window'} onClick={openInRoom} />\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t{bar === 'edit' && (\n\t\t\t\t\t<>\n\t\t\t\t\t\t<VerticalBar.Icon name='pencil' />\n\t\t\t\t\t\t<VerticalBar.Text>{t('edit-room')}</VerticalBar.Text>\n\t\t\t\t\t</>\n\t\t\t\t)}\n\t\t\t\t<VerticalBar.Close onClick={handleChatsVerticalBarCloseButtonClick} />\n\t\t\t</VerticalBar.Header>\n\t\t\t{bar === 'info' && <ChatInfoDirectory id={id} room={data.room} />}\n\t\t\t{bar === 'edit' && (\n\t\t\t\t<RoomEditWithData id={id} close={handleChatsVerticalBarBackButtonClick} reload={chatReload} reloadInfo={reloadInfo} />\n\t\t\t)}\n\t\t</VerticalBar>\n\t);\n};\n\nexport default ChatsContextualBar;\n"]}