{"version":3,"sources":["meteor://ðŸ’»app/client/views/admin/info/DeploymentCard.tsx"],"names":[],"mappings":"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","file":"dynamic/client/views/admin/info/DeploymentCard.tsx","sourcesContent":["import { ButtonGroup, Button } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { memo, ReactElement } from 'react';\n\nimport { IInstance } from '../../../../definition/IInstance';\nimport { IServerInfo } from '../../../../definition/IServerInfo';\nimport { IStats } from '../../../../definition/IStats';\nimport Card from '../../../components/Card';\nimport { useSetModal } from '../../../contexts/ModalContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { useFormatDateAndTime } from '../../../hooks/useFormatDateAndTime';\nimport InstancesModal from './InstancesModal';\n\ntype DeploymentCardProps = {\n\tinfo: IServerInfo;\n\tinstances: Array<IInstance>;\n\tstatistics: IStats;\n};\n\nconst DeploymentCard = ({ info, statistics, instances }: DeploymentCardProps): ReactElement => {\n\tconst t = useTranslation();\n\tconst formatDateAndTime = useFormatDateAndTime();\n\tconst setModal = useSetModal();\n\n\tconst { commit = {} } = info;\n\n\tconst appsEngineVersion = info?.marketplaceApiVersion;\n\n\tconst handleInstancesModal = useMutableCallback(() => {\n\t\tsetModal(<InstancesModal instances={instances} onClose={(): void => setModal()} />);\n\t});\n\n\treturn (\n\t\t<Card>\n\t\t\t<Card.Title>{t('Deployment')}</Card.Title>\n\t\t\t<Card.Body>\n\t\t\t\t<Card.Col>\n\t\t\t\t\t<Card.Col.Section>\n\t\t\t\t\t\t<Card.Col.Title>{t('Version')}</Card.Col.Title>\n\t\t\t\t\t\t{statistics.version}\n\t\t\t\t\t</Card.Col.Section>\n\t\t\t\t\t<Card.Col.Section>\n\t\t\t\t\t\t<Card.Col.Title>{t('Deployment_ID')}</Card.Col.Title>\n\t\t\t\t\t\t{statistics.uniqueId}\n\t\t\t\t\t</Card.Col.Section>\n\t\t\t\t\t{appsEngineVersion && (\n\t\t\t\t\t\t<Card.Col.Section>\n\t\t\t\t\t\t\t<Card.Col.Title>{t('Apps_Engine_Version')}</Card.Col.Title>\n\t\t\t\t\t\t\t{appsEngineVersion}\n\t\t\t\t\t\t</Card.Col.Section>\n\t\t\t\t\t)}\n\t\t\t\t\t<Card.Col.Section>\n\t\t\t\t\t\t<Card.Col.Title>{t('Node_version')}</Card.Col.Title>\n\t\t\t\t\t\t{statistics.process.nodeVersion}\n\t\t\t\t\t</Card.Col.Section>\n\t\t\t\t\t<Card.Col.Section>\n\t\t\t\t\t\t<Card.Col.Title>{t('DB_Migration')}</Card.Col.Title>\n\t\t\t\t\t\t{`${statistics.migration.version} (${formatDateAndTime(statistics.migration.lockedAt)})`}\n\t\t\t\t\t</Card.Col.Section>\n\t\t\t\t\t<Card.Col.Section>\n\t\t\t\t\t\t<Card.Col.Title>{t('MongoDB')}</Card.Col.Title>\n\t\t\t\t\t\t{`${statistics.mongoVersion} / ${statistics.mongoStorageEngine} (oplog ${\n\t\t\t\t\t\t\tstatistics.oplogEnabled ? t('Enabled') : t('Disabled')\n\t\t\t\t\t\t})`}\n\t\t\t\t\t</Card.Col.Section>\n\t\t\t\t\t<Card.Col.Section>\n\t\t\t\t\t\t<Card.Col.Title>{t('Commit_details')}</Card.Col.Title>\n\t\t\t\t\t\t{t('github_HEAD')}: ({commit.hash ? commit.hash.slice(0, 9) : ''}) <br />\n\t\t\t\t\t\t{t('Branch')}: {commit.branch}\n\t\t\t\t\t</Card.Col.Section>\n\t\t\t\t\t<Card.Col.Section>\n\t\t\t\t\t\t<Card.Col.Title>{t('PID')}</Card.Col.Title>\n\t\t\t\t\t\t{statistics.process.pid}\n\t\t\t\t\t</Card.Col.Section>\n\t\t\t\t</Card.Col>\n\t\t\t</Card.Body>\n\n\t\t\t{!!instances.length && (\n\t\t\t\t<Card.Footer>\n\t\t\t\t\t<ButtonGroup align='end'>\n\t\t\t\t\t\t<Button small onClick={handleInstancesModal}>\n\t\t\t\t\t\t\t{t('Instances')}\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</ButtonGroup>\n\t\t\t\t</Card.Footer>\n\t\t\t)}\n\t\t</Card>\n\t);\n};\n\nexport default memo(DeploymentCard);\n"]}