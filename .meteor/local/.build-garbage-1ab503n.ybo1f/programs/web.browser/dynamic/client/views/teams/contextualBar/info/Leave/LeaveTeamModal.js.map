{"version":3,"sources":["meteor://ðŸ’»app/client/views/teams/contextualBar/info/Leave/LeaveTeamModal.js"],"names":["_objectSpread","module","link","default","v","export","LeaveTeamModal","useMutableCallback","React","useState","useCallback","StepOne","StepTwo","STEPS","LIST_ROOMS","CONFIRM_LEAVE","onCancel","onConfirm","rooms","step","setStep","length","selectedRooms","setSelectedRooms","lastOwnerRooms","filter","isLastOwner","onContinue","onReturn","onChangeRoomSelection","room","_id","onToggleAllRooms","Object","values","Boolean","fromEntries","map","args","console","log","exportDefault"],"mappings":"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","file":"dynamic/client/views/teams/contextualBar/info/Leave/LeaveTeamModal.js","sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useState, useCallback } from 'react';\n\nimport { StepOne, StepTwo } from '.';\n\nconst STEPS = {\n\tLIST_ROOMS: 'LIST_ROOMS',\n\tCONFIRM_LEAVE: 'CONFIRM_LEAVE',\n};\n\nexport const LeaveTeamModal = ({ onCancel, onConfirm, rooms }) => {\n\tconst [step, setStep] = useState(() => {\n\t\tif (rooms.length === 0) {\n\t\t\treturn STEPS.CONFIRM_LEAVE;\n\t\t}\n\t\treturn STEPS.LIST_ROOMS;\n\t});\n\tconst [selectedRooms, setSelectedRooms] = useState({});\n\n\tconst lastOwnerRooms = rooms.filter(({ isLastOwner }) => isLastOwner);\n\n\tconst onContinue = useCallback(() => setStep(STEPS.CONFIRM_LEAVE), []);\n\n\tconst onReturn = useCallback(() => setStep(STEPS.LIST_ROOMS), []);\n\n\tconst onChangeRoomSelection = useCallback((room) => {\n\t\tsetSelectedRooms((selectedRooms) => {\n\t\t\tif (selectedRooms[room._id]) {\n\t\t\t\tdelete selectedRooms[room._id];\n\t\t\t\treturn { ...selectedRooms };\n\t\t\t}\n\t\t\treturn { ...selectedRooms, [room._id]: room };\n\t\t});\n\t}, []);\n\n\tconst onToggleAllRooms = useMutableCallback(() => {\n\t\tsetSelectedRooms((selectedRooms) => {\n\t\t\tif (Object.values(selectedRooms).filter(Boolean).length === 0) {\n\t\t\t\treturn Object.fromEntries(rooms.filter(({ isLastOwner }) => !isLastOwner).map((room) => [room._id, room]));\n\t\t\t}\n\n\t\t\treturn {};\n\t\t});\n\t});\n\n\tif (step === STEPS.CONFIRM_LEAVE) {\n\t\treturn <StepTwo onConfirm={onConfirm} onCancel={rooms.length > 0 && onReturn} onClose={onCancel} rooms={rooms} />;\n\t}\n\n\treturn (\n\t\t<StepOne\n\t\t\trooms={rooms}\n\t\t\tonCancel={onCancel}\n\t\t\tparams={{}}\n\t\t\teligibleRoomsLength={rooms.length - lastOwnerRooms.length}\n\t\t\tselectedRooms={selectedRooms}\n\t\t\tonToggleAllRooms={onToggleAllRooms}\n\t\t\tonChangeParams={(...args) => console.log(args)}\n\t\t\tonConfirm={onContinue}\n\t\t\tonChangeRoomSelection={onChangeRoomSelection}\n\t\t/>\n\t);\n};\n\nexport default LeaveTeamModal;\n"]}