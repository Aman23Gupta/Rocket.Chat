{"version":3,"sources":["meteor://ðŸ’»app/client/views/room/hooks/useUserInfoActions.js"],"names":["_objectSpread","module","link","default","v","_objectWithoutProperties","export","useUserInfoActions","Button","ButtonGroup","Icon","Modal","Box","useAutoFocus","useMutableCallback","escapeHTML","React","useCallback","useMemo","RoomRoles","roomTypes","RoomMemberActions","usePermission","useAllPermissions","useSetModal","useRoute","useMethod","useToastMessageDispatch","useTranslation","useUserId","useUserSubscription","useUserSubscriptionByName","useEndpointActionExperimental","useReactiveValue","RemoveUsersModal","useUserRoom","useWebRTC","useUserHasRoomRole","uid","rid","role","findOne","getShouldOpenDirectMessage","currentSubscription","usernameSubscription","canOpenDirectMessage","username","canOpenDm","directMessageIsNotAlreadyOpen","name","getUserIsMuted","room","user","userCanPostReadonly","ro","Array","isArray","unmuted","indexOf","muted","WarningModal","text","confirmText","close","confirm","props","refAutoFocus","t","reload","dispatchToastMessage","directRoute","setModal","_id","ownUserId","closeModal","isLeader","isModerator","isOwner","otherUserCanPostReadonly","isIgnored","ignored","isMuted","endpointPrefix","roomConfig","getConfig","roomCanSetOwner","roomCanSetLeader","roomCanSetModerator","roomCanIgnore","roomCanBlock","roomCanMute","roomCanRemove","allowMemberAction","SET_AS_OWNER","SET_AS_LEADER","SET_AS_MODERATOR","IGNORE","BLOCK","MUTE","REMOVE_USER","roomName","getRoomName","userCanSetOwner","userCanSetLeader","userCanSetModerator","userCanMute","userCanRemove","userCanDirectMessage","shouldAllowCalls","callInProgress","joinCall","startCall","shouldOpenDirectMessage","openDirectDm","push","openDirectMessageOption","label","icon","action","videoCallOption","handleJoinCall","audio","video","handleStartCall","audioCallOption","changeOwnerEndpoint","changeOwnerMessage","changeOwner","room_name","changeOwnerAction","roomId","userId","changeOwnerOption","changeLeaderEndpoint","changeLeaderMessage","changeLeader","changeLeaderAction","changeLeaderOption","changeModeratorEndpoint","changeModeratorMessage","changeModerator","changeModeratorAction","changeModeratorOption","ignoreUser","ignoreUserAction","ignore","type","message","error","ignoreUserOption","isUserBlocked","blocker","toggleBlock","toggleBlockUserAction","blocked","toggleBlockUserOption","muteFn","muteUserOption","onConfirm","removeFromTeam","removeUserAction","removeUserOptionAction","teamMain","teamId","rooms","roomKeys","Object","keys","length","removeUserOption","openDirectMessage","muteUser","removeUser"],"mappings":"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","file":"dynamic/client/views/room/hooks/useUserInfoActions.js","sourcesContent":["import { Button, ButtonGroup, Icon, Modal, Box } from '@rocket.chat/fuselage';\nimport { useAutoFocus, useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\nimport React, { useCallback, useMemo } from 'react';\n\nimport { RoomRoles } from '../../../../app/models/client';\nimport { roomTypes, RoomMemberActions } from '../../../../app/utils/client';\nimport { usePermission, useAllPermissions } from '../../../contexts/AuthorizationContext';\nimport { useSetModal } from '../../../contexts/ModalContext';\nimport { useRoute } from '../../../contexts/RouterContext';\nimport { useMethod } from '../../../contexts/ServerContext';\nimport { useToastMessageDispatch } from '../../../contexts/ToastMessagesContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport { useUserId, useUserSubscription, useUserSubscriptionByName } from '../../../contexts/UserContext';\nimport { useEndpointActionExperimental } from '../../../hooks/useEndpointActionExperimental';\nimport { useReactiveValue } from '../../../hooks/useReactiveValue';\nimport RemoveUsersModal from '../../teams/contextualBar/members/RemoveUsersModal';\nimport { useUserRoom } from './useUserRoom';\nimport { useWebRTC } from './useWebRTC';\n\nconst useUserHasRoomRole = (uid, rid, role) =>\n\tuseReactiveValue(useCallback(() => !!RoomRoles.findOne({ rid, 'u._id': uid, 'roles': role }), [uid, rid, role]));\n\nconst getShouldOpenDirectMessage = (currentSubscription, usernameSubscription, canOpenDirectMessage, username) => {\n\tconst canOpenDm = canOpenDirectMessage || usernameSubscription;\n\tconst directMessageIsNotAlreadyOpen = currentSubscription && currentSubscription.name !== username;\n\treturn canOpenDm && directMessageIsNotAlreadyOpen;\n};\n\nconst getUserIsMuted = (room, user, userCanPostReadonly) => {\n\tif (room && room.ro) {\n\t\tif (Array.isArray(room.unmuted) && room.unmuted.indexOf(user && user.username) !== -1) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (userCanPostReadonly) {\n\t\t\treturn Array.isArray(room.muted) && room.muted.indexOf(user && user.username) !== -1;\n\t\t}\n\n\t\treturn true;\n\t}\n\n\treturn room && Array.isArray(room.muted) && room.muted.indexOf(user && user.username) > -1;\n};\n\nconst WarningModal = ({ text, confirmText, close, confirm, ...props }) => {\n\tconst refAutoFocus = useAutoFocus(true);\n\tconst t = useTranslation();\n\treturn (\n\t\t<Modal {...props}>\n\t\t\t<Modal.Header>\n\t\t\t\t<Icon color='warning' name='modal-warning' size={20} />\n\t\t\t\t<Modal.Title>{t('Are_you_sure')}</Modal.Title>\n\t\t\t\t<Modal.Close onClick={close} />\n\t\t\t</Modal.Header>\n\t\t\t<Modal.Content fontScale='p2'>{text}</Modal.Content>\n\t\t\t<Modal.Footer>\n\t\t\t\t<ButtonGroup align='end'>\n\t\t\t\t\t<Button ghost onClick={close}>\n\t\t\t\t\t\t{t('Cancel')}\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button ref={refAutoFocus} primary danger onClick={confirm}>\n\t\t\t\t\t\t{confirmText}\n\t\t\t\t\t</Button>\n\t\t\t\t</ButtonGroup>\n\t\t\t</Modal.Footer>\n\t\t</Modal>\n\t);\n};\n\nexport const useUserInfoActions = (user = {}, rid, reload) => {\n\tconst t = useTranslation();\n\tconst dispatchToastMessage = useToastMessageDispatch();\n\tconst directRoute = useRoute('direct');\n\n\tconst setModal = useSetModal();\n\n\tconst { _id: uid } = user;\n\tconst ownUserId = useUserId();\n\n\tconst closeModal = useMutableCallback(() => setModal(null));\n\n\tconst room = useUserRoom(rid);\n\tconst currentSubscription = useUserSubscription(rid);\n\tconst usernameSubscription = useUserSubscriptionByName(user.username);\n\n\tconst isLeader = useUserHasRoomRole(uid, rid, 'leader');\n\tconst isModerator = useUserHasRoomRole(uid, rid, 'moderator');\n\tconst isOwner = useUserHasRoomRole(uid, rid, 'owner');\n\n\tconst otherUserCanPostReadonly = useAllPermissions('post-readonly', rid);\n\n\tconst isIgnored = currentSubscription && currentSubscription.ignored && currentSubscription.ignored.indexOf(uid) > -1;\n\tconst isMuted = getUserIsMuted(room, user, otherUserCanPostReadonly);\n\n\tconst endpointPrefix = room.t === 'p' ? 'groups' : 'channels';\n\n\tconst roomConfig = room && room.t && roomTypes.getConfig(room.t);\n\n\tconst [roomCanSetOwner, roomCanSetLeader, roomCanSetModerator, roomCanIgnore, roomCanBlock, roomCanMute, roomCanRemove] = [\n\t\t...(roomConfig && [\n\t\t\troomConfig.allowMemberAction(room, RoomMemberActions.SET_AS_OWNER),\n\t\t\troomConfig.allowMemberAction(room, RoomMemberActions.SET_AS_LEADER),\n\t\t\troomConfig.allowMemberAction(room, RoomMemberActions.SET_AS_MODERATOR),\n\t\t\troomConfig.allowMemberAction(room, RoomMemberActions.IGNORE),\n\t\t\troomConfig.allowMemberAction(room, RoomMemberActions.BLOCK),\n\t\t\troomConfig.allowMemberAction(room, RoomMemberActions.MUTE),\n\t\t\troomConfig.allowMemberAction(room, RoomMemberActions.REMOVE_USER),\n\t\t]),\n\t];\n\n\tconst roomName = room && room.t && escapeHTML(roomTypes.getRoomName(room.t, room));\n\n\tconst userCanSetOwner = usePermission('set-owner', rid);\n\tconst userCanSetLeader = usePermission('set-leader', rid);\n\tconst userCanSetModerator = usePermission('set-moderator', rid);\n\tconst userCanMute = usePermission('mute-user', rid);\n\tconst userCanRemove = usePermission('remove-user', rid);\n\tconst userCanDirectMessage = usePermission('create-d');\n\tconst { shouldAllowCalls, callInProgress, joinCall, startCall } = useWebRTC(rid);\n\n\tconst shouldOpenDirectMessage = getShouldOpenDirectMessage(\n\t\tcurrentSubscription,\n\t\tusernameSubscription,\n\t\tuserCanDirectMessage,\n\t\tuser.username,\n\t);\n\n\tconst openDirectDm = useMutableCallback(() =>\n\t\tdirectRoute.push({\n\t\t\trid: user.username,\n\t\t}),\n\t);\n\n\tconst openDirectMessageOption = useMemo(\n\t\t() =>\n\t\t\tshouldOpenDirectMessage && {\n\t\t\t\tlabel: t('Direct_Message'),\n\t\t\t\ticon: 'balloon',\n\t\t\t\taction: openDirectDm,\n\t\t\t},\n\t\t[openDirectDm, shouldOpenDirectMessage, t],\n\t);\n\n\tconst videoCallOption = useMemo(() => {\n\t\tconst handleJoinCall = () => {\n\t\t\tjoinCall({ audio: true, video: true });\n\t\t};\n\t\tconst handleStartCall = () => {\n\t\t\tstartCall({ audio: true, video: true });\n\t\t};\n\t\tconst action = callInProgress ? handleJoinCall : handleStartCall;\n\n\t\treturn (\n\t\t\tshouldAllowCalls && {\n\t\t\t\tlabel: t(callInProgress ? 'Join_video_call' : 'Start_video_call'),\n\t\t\t\ticon: 'video',\n\t\t\t\taction,\n\t\t\t}\n\t\t);\n\t}, [callInProgress, shouldAllowCalls, t, joinCall, startCall]);\n\n\tconst audioCallOption = useMemo(() => {\n\t\tconst handleJoinCall = () => {\n\t\t\tjoinCall({ audio: true, video: false });\n\t\t};\n\t\tconst handleStartCall = () => {\n\t\t\tstartCall({ audio: true, video: false });\n\t\t};\n\t\tconst action = callInProgress ? handleJoinCall : handleStartCall;\n\n\t\treturn (\n\t\t\tshouldAllowCalls && {\n\t\t\t\tlabel: t(callInProgress ? 'Join_audio_call' : 'Start_audio_call'),\n\t\t\t\ticon: 'mic',\n\t\t\t\taction,\n\t\t\t}\n\t\t);\n\t}, [callInProgress, shouldAllowCalls, t, joinCall, startCall]);\n\n\tconst changeOwnerEndpoint = isOwner ? 'removeOwner' : 'addOwner';\n\tconst changeOwnerMessage = isOwner ? 'User__username__removed_from__room_name__owners' : 'User__username__is_now_a_owner_of__room_name_';\n\tconst changeOwner = useEndpointActionExperimental(\n\t\t'POST',\n\t\t`${endpointPrefix}.${changeOwnerEndpoint}`,\n\t\tt(changeOwnerMessage, { username: user.username, room_name: roomName }),\n\t);\n\tconst changeOwnerAction = useMutableCallback(async () => changeOwner({ roomId: rid, userId: uid }));\n\tconst changeOwnerOption = useMemo(\n\t\t() =>\n\t\t\troomCanSetOwner &&\n\t\t\tuserCanSetOwner && {\n\t\t\t\tlabel: t(isOwner ? 'Remove_as_owner' : 'Set_as_owner'),\n\t\t\t\ticon: 'shield-check',\n\t\t\t\taction: changeOwnerAction,\n\t\t\t},\n\t\t[changeOwnerAction, isOwner, t, roomCanSetOwner, userCanSetOwner],\n\t);\n\n\tconst changeLeaderEndpoint = isLeader ? 'removeLeader' : 'addLeader';\n\tconst changeLeaderMessage = isLeader\n\t\t? 'User__username__removed_from__room_name__leaders'\n\t\t: 'User__username__is_now_a_leader_of__room_name_';\n\tconst changeLeader = useEndpointActionExperimental(\n\t\t'POST',\n\t\t`${endpointPrefix}.${changeLeaderEndpoint}`,\n\t\tt(changeLeaderMessage, { username: user.username, room_name: roomName }),\n\t);\n\tconst changeLeaderAction = useMutableCallback(() => changeLeader({ roomId: rid, userId: uid }));\n\tconst changeLeaderOption = useMemo(\n\t\t() =>\n\t\t\troomCanSetLeader &&\n\t\t\tuserCanSetLeader && {\n\t\t\t\tlabel: t(isLeader ? 'Remove_as_leader' : 'Set_as_leader'),\n\t\t\t\ticon: 'shield-alt',\n\t\t\t\taction: changeLeaderAction,\n\t\t\t},\n\t\t[isLeader, roomCanSetLeader, t, userCanSetLeader, changeLeaderAction],\n\t);\n\n\tconst changeModeratorEndpoint = isModerator ? 'removeModerator' : 'addModerator';\n\tconst changeModeratorMessage = isModerator\n\t\t? 'User__username__removed_from__room_name__moderators'\n\t\t: 'User__username__is_now_a_moderator_of__room_name_';\n\tconst changeModerator = useEndpointActionExperimental(\n\t\t'POST',\n\t\t`${endpointPrefix}.${changeModeratorEndpoint}`,\n\t\tt(changeModeratorMessage, { username: user.username, room_name: roomName }),\n\t);\n\tconst changeModeratorAction = useMutableCallback(() => changeModerator({ roomId: rid, userId: uid }));\n\tconst changeModeratorOption = useMemo(\n\t\t() =>\n\t\t\troomCanSetModerator &&\n\t\t\tuserCanSetModerator && {\n\t\t\t\tlabel: t(isModerator ? 'Remove_as_moderator' : 'Set_as_moderator'),\n\t\t\t\ticon: 'shield',\n\t\t\t\taction: changeModeratorAction,\n\t\t\t},\n\t\t[changeModeratorAction, isModerator, roomCanSetModerator, t, userCanSetModerator],\n\t);\n\n\tconst ignoreUser = useMethod('ignoreUser');\n\tconst ignoreUserAction = useMutableCallback(async () => {\n\t\ttry {\n\t\t\tawait ignoreUser({ rid, userId: uid, ignore: !isIgnored });\n\t\t\tif (isIgnored) {\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('User_has_been_unignored') });\n\t\t\t} else {\n\t\t\t\tdispatchToastMessage({ type: 'success', message: t('User_has_been_ignored') });\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t});\n\tconst ignoreUserOption = useMemo(\n\t\t() =>\n\t\t\troomCanIgnore &&\n\t\t\tuid !== ownUserId && {\n\t\t\t\tlabel: t(isIgnored ? 'Unignore' : 'Ignore'),\n\t\t\t\ticon: 'ban',\n\t\t\t\taction: ignoreUserAction,\n\t\t\t},\n\t\t[ignoreUserAction, isIgnored, ownUserId, roomCanIgnore, t, uid],\n\t);\n\n\tconst isUserBlocked = currentSubscription && currentSubscription.blocker;\n\tconst toggleBlock = useMethod(isUserBlocked ? 'unblockUser' : 'blockUser');\n\tconst toggleBlockUserAction = useMutableCallback(async () => {\n\t\ttry {\n\t\t\tawait toggleBlock({ rid, blocked: uid });\n\t\t\tdispatchToastMessage({\n\t\t\t\ttype: 'success',\n\t\t\t\tmessage: t(isUserBlocked ? 'User_is_unblocked' : 'User_is_blocked'),\n\t\t\t});\n\t\t} catch (error) {\n\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t}\n\t});\n\tconst toggleBlockUserOption = useMemo(\n\t\t() =>\n\t\t\troomCanBlock &&\n\t\t\tuid !== ownUserId && {\n\t\t\t\tlabel: t(isUserBlocked ? 'Unblock' : 'Block'),\n\t\t\t\ticon: 'ban',\n\t\t\t\taction: toggleBlockUserAction,\n\t\t\t},\n\t\t[isUserBlocked, ownUserId, roomCanBlock, t, toggleBlockUserAction, uid],\n\t);\n\n\tconst muteFn = useMethod(isMuted ? 'unmuteUserInRoom' : 'muteUserInRoom');\n\tconst muteUserOption = useMemo(() => {\n\t\tconst action = () => {\n\t\t\tconst onConfirm = async () => {\n\t\t\t\ttry {\n\t\t\t\t\tawait muteFn({ rid, username: user.username });\n\t\t\t\t\tcloseModal();\n\t\t\t\t\tdispatchToastMessage({\n\t\t\t\t\t\ttype: 'success',\n\t\t\t\t\t\tmessage: t(isMuted ? 'User__username__unmuted_in_room__roomName__' : 'User__username__muted_in_room__roomName__', {\n\t\t\t\t\t\t\tusername: user.username,\n\t\t\t\t\t\t\troomName,\n\t\t\t\t\t\t}),\n\t\t\t\t\t});\n\t\t\t\t} catch (error) {\n\t\t\t\t\tdispatchToastMessage({ type: 'error', message: error });\n\t\t\t\t}\n\t\t\t};\n\n\t\t\tif (isMuted) {\n\t\t\t\treturn onConfirm();\n\t\t\t}\n\n\t\t\tsetModal(\n\t\t\t\t<WarningModal\n\t\t\t\t\ttext={t('The_user_wont_be_able_to_type_in_s', roomName)}\n\t\t\t\t\tclose={closeModal}\n\t\t\t\t\tconfirmText={t('Yes_mute_user')}\n\t\t\t\t\tconfirm={onConfirm}\n\t\t\t\t/>,\n\t\t\t);\n\t\t};\n\n\t\treturn (\n\t\t\troomCanMute &&\n\t\t\tuserCanMute && {\n\t\t\t\tlabel: t(isMuted ? 'Unmute_user' : 'Mute_user'),\n\t\t\t\ticon: isMuted ? 'mic' : 'mic-off',\n\t\t\t\taction,\n\t\t\t}\n\t\t);\n\t}, [closeModal, dispatchToastMessage, isMuted, muteFn, rid, roomCanMute, roomName, setModal, t, user.username, userCanMute]);\n\n\tconst removeFromTeam = useEndpointActionExperimental('POST', 'teams.removeMember', t('User_has_been_removed_from_team'));\n\n\tconst removeUserAction = useEndpointActionExperimental('POST', `${endpointPrefix}.kick`, t('User_has_been_removed_from_s', roomName));\n\tconst removeUserOptionAction = useMutableCallback(() => {\n\t\tif (room.teamMain && room.teamId) {\n\t\t\treturn setModal(\n\t\t\t\t<RemoveUsersModal\n\t\t\t\t\tteamId={room?.teamId}\n\t\t\t\t\tuserId={uid}\n\t\t\t\t\tonClose={closeModal}\n\t\t\t\t\tonCancel={closeModal}\n\t\t\t\t\tonConfirm={async (rooms) => {\n\t\t\t\t\t\tconst roomKeys = Object.keys(rooms);\n\t\t\t\t\t\tawait removeFromTeam({\n\t\t\t\t\t\t\tteamId: room.teamId,\n\t\t\t\t\t\t\tuserId: uid,\n\t\t\t\t\t\t\t...(roomKeys.length && { rooms: roomKeys }),\n\t\t\t\t\t\t});\n\t\t\t\t\t\tcloseModal();\n\t\t\t\t\t\treload && reload();\n\t\t\t\t\t}}\n\t\t\t\t/>,\n\t\t\t);\n\t\t}\n\n\t\tsetModal(\n\t\t\t<WarningModal\n\t\t\t\ttext={t('The_user_will_be_removed_from_s', roomName)}\n\t\t\t\tclose={closeModal}\n\t\t\t\tconfirmText={t('Yes_remove_user')}\n\t\t\t\tconfirm={async () => {\n\t\t\t\t\tawait removeUserAction({ roomId: rid, userId: uid });\n\t\t\t\t\tcloseModal();\n\t\t\t\t\treload && reload();\n\t\t\t\t}}\n\t\t\t/>,\n\t\t);\n\t});\n\n\tconst removeUserOption = useMemo(\n\t\t() =>\n\t\t\troomCanRemove &&\n\t\t\tuserCanRemove && {\n\t\t\t\tlabel: <Box color='danger'>{room.teamMain ? t('Remove_from_team') : t('Remove_from_room')}</Box>,\n\t\t\t\ticon: 'sign-out',\n\t\t\t\taction: removeUserOptionAction,\n\t\t\t},\n\t\t[room, roomCanRemove, userCanRemove, removeUserOptionAction, t],\n\t);\n\n\treturn useMemo(\n\t\t() => ({\n\t\t\t...(openDirectMessageOption && { openDirectMessage: openDirectMessageOption }),\n\t\t\t...(videoCallOption && { video: videoCallOption }),\n\t\t\t...(audioCallOption && { audio: audioCallOption }),\n\t\t\t...(changeOwnerOption && { changeOwner: changeOwnerOption }),\n\t\t\t...(changeLeaderOption && { changeLeader: changeLeaderOption }),\n\t\t\t...(changeModeratorOption && { changeModerator: changeModeratorOption }),\n\t\t\t...(ignoreUserOption && { ignoreUser: ignoreUserOption }),\n\t\t\t...(muteUserOption && { muteUser: muteUserOption }),\n\t\t\t...(removeUserOption && { removeUser: removeUserOption }),\n\t\t\t...(toggleBlockUserOption && { toggleBlock: toggleBlockUserOption }),\n\t\t}),\n\t\t[\n\t\t\taudioCallOption,\n\t\t\tchangeLeaderOption,\n\t\t\tchangeModeratorOption,\n\t\t\tchangeOwnerOption,\n\t\t\tignoreUserOption,\n\t\t\tmuteUserOption,\n\t\t\topenDirectMessageOption,\n\t\t\tremoveUserOption,\n\t\t\tvideoCallOption,\n\t\t\ttoggleBlockUserOption,\n\t\t],\n\t);\n};\n"]}