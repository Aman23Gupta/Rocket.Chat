{"version":3,"sources":["meteor://ðŸ’»app/client/sidebar/header/actions/CreateRoomList.js"],"names":["OptionTitle","module","link","v","useMutableCallback","React","default","popover","CreateDiscussion","ListItem","useAtLeastOnePermission","useSetModal","useSetting","useTranslation","CreateTeamModal","CreateChannelWithData","CreateDirectMessage","CREATE_CHANNEL_PERMISSIONS","CREATE_TEAM_PERMISSIONS","CREATE_DIRECT_PERMISSIONS","CREATE_DISCUSSION_PERMISSIONS","style","textTransform","useReactModal","Component","setModal","e","close","preventDefault","handleClose","CreateRoomList","closeList","t","canCreateChannel","canCreateTeam","canCreateDirectMessages","canCreateDiscussion","createChannel","createTeam","createDiscussion","createDirectMessage","discussionEnabled","exportDefault"],"mappings":"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","file":"dynamic/client/sidebar/header/actions/CreateRoomList.js","sourcesContent":["import { OptionTitle } from '@rocket.chat/fuselage';\nimport { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React from 'react';\n\nimport { popover } from '../../../../app/ui-utils/client';\nimport CreateDiscussion from '../../../components/CreateDiscussion';\nimport ListItem from '../../../components/Sidebar/ListItem';\nimport { useAtLeastOnePermission } from '../../../contexts/AuthorizationContext';\nimport { useSetModal } from '../../../contexts/ModalContext';\nimport { useSetting } from '../../../contexts/SettingsContext';\nimport { useTranslation } from '../../../contexts/TranslationContext';\nimport CreateTeamModal from '../../../views/teams/CreateTeamModal';\nimport CreateChannelWithData from '../CreateChannelWithData';\nimport CreateDirectMessage from '../CreateDirectMessage';\n\nconst CREATE_CHANNEL_PERMISSIONS = ['create-c', 'create-p'];\nconst CREATE_TEAM_PERMISSIONS = ['create-team'];\nconst CREATE_DIRECT_PERMISSIONS = ['create-d'];\nconst CREATE_DISCUSSION_PERMISSIONS = ['start-discussion', 'start-discussion-other-user'];\n\nconst style = {\n\ttextTransform: 'uppercase',\n};\n\nconst useReactModal = (Component) => {\n\tconst setModal = useSetModal();\n\n\treturn useMutableCallback((e) => {\n\t\tpopover.close();\n\n\t\te.preventDefault();\n\n\t\tconst handleClose = () => {\n\t\t\tsetModal(null);\n\t\t};\n\n\t\tsetModal(() => <Component onClose={handleClose} />);\n\t});\n};\n\nfunction CreateRoomList({ closeList }) {\n\tconst t = useTranslation();\n\n\tconst canCreateChannel = useAtLeastOnePermission(CREATE_CHANNEL_PERMISSIONS);\n\tconst canCreateTeam = useAtLeastOnePermission(CREATE_TEAM_PERMISSIONS);\n\tconst canCreateDirectMessages = useAtLeastOnePermission(CREATE_DIRECT_PERMISSIONS);\n\tconst canCreateDiscussion = useAtLeastOnePermission(CREATE_DISCUSSION_PERMISSIONS);\n\n\tconst createChannel = useReactModal(CreateChannelWithData);\n\tconst createTeam = useReactModal(CreateTeamModal);\n\tconst createDiscussion = useReactModal(CreateDiscussion);\n\tconst createDirectMessage = useReactModal(CreateDirectMessage);\n\n\tconst discussionEnabled = useSetting('Discussion_enabled');\n\n\treturn (\n\t\t<>\n\t\t\t<OptionTitle pb='x8' style={style}>\n\t\t\t\t{t('Create_new')}\n\t\t\t</OptionTitle>\n\t\t\t<ul className='rc-popover__list'>\n\t\t\t\t{canCreateChannel && (\n\t\t\t\t\t<ListItem\n\t\t\t\t\t\ticon='hashtag'\n\t\t\t\t\t\ttext={t('Channel')}\n\t\t\t\t\t\taction={(e) => {\n\t\t\t\t\t\t\tcreateChannel(e);\n\t\t\t\t\t\t\tcloseList();\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{canCreateTeam && (\n\t\t\t\t\t<ListItem\n\t\t\t\t\t\ticon='team'\n\t\t\t\t\t\ttext={t('Team')}\n\t\t\t\t\t\taction={(e) => {\n\t\t\t\t\t\t\tcreateTeam(e);\n\t\t\t\t\t\t\tcloseList();\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{canCreateDirectMessages && (\n\t\t\t\t\t<ListItem\n\t\t\t\t\t\ticon='balloon'\n\t\t\t\t\t\ttext={t('Direct_Messages')}\n\t\t\t\t\t\taction={(e) => {\n\t\t\t\t\t\t\tcreateDirectMessage(e);\n\t\t\t\t\t\t\tcloseList();\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t\t{discussionEnabled && canCreateDiscussion && (\n\t\t\t\t\t<ListItem\n\t\t\t\t\t\ticon='discussion'\n\t\t\t\t\t\ttext={t('Discussion')}\n\t\t\t\t\t\taction={(e) => {\n\t\t\t\t\t\t\tcreateDiscussion(e);\n\t\t\t\t\t\t\tcloseList();\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t)}\n\t\t\t</ul>\n\t\t</>\n\t);\n}\n\nexport default CreateRoomList;\n"]}