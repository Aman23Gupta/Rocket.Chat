{"version":3,"sources":["meteor://ðŸ’»app/ee/app/ecdh/client/ClientSession.ts"],"names":[],"mappings":";;;;;;;;AAAA,OAAO,MAAP,CAAS;AAAA,eAAe;AAAf,CAAT;AAAqC;AAAA;AAAA;AAAA;AAAA;;AAAA;;AAE/B,MAAO,aAAP,SAA6B,OAA7B,CAAoC;AAC/B,QAAJ,IAAI;AACT,UAAM,MAAM,GAAG,MAAM,KAAK,MAAL,EAArB;AAEA,UAAM,aAAa,GAAG,MAAM,MAAM,CAAC,kBAAP,EAA5B;AACA,SAAK,SAAL,GAAiB,MAAM,MAAM,CAAC,oBAAP,CAA4B,aAA5B,CAAvB;AACA,SAAK,SAAL,GAAiB,MAAM,MAAM,CAAC,oBAAP,CAA4B,aAA5B,CAAvB;AAEA,WAAO,KAAK,SAAL,CAAe,QAAf,CAAwB,KAAK,eAA7B,CAAP;AACA;;AAEiB,QAAZ,YAAY,CAAC,YAAD,EAAqB;AACtC,UAAM,MAAM,GAAG,MAAM,KAAK,MAAL,EAArB;AAEA,UAAM,CAAC,UAAD,EAAa,UAAb,IAA2B,MAAM,MAAM,CAAC,6BAAP,CACtC,KAAK,SADiC,EAEtC,KAAK,SAFiC,EAGtC,KAAK,mBAAL,CAAyB,YAAzB,CAHsC,CAAvC;AAMA,SAAK,UAAL,GAAkB,UAAlB;AACA,SAAK,UAAL,GAAkB,UAAlB;AACA;;AAtBwC,C","file":"dynamic/ee/app/ecdh/client/ClientSession.ts","sourcesContent":["import { Session } from '../Session';\n\nexport class ClientSession extends Session {\n\tasync init(): Promise<string> {\n\t\tconst sodium = await this.sodium();\n\n\t\tconst clientKeypair = await sodium.crypto_box_keypair();\n\t\tthis.secretKey = await sodium.crypto_box_secretkey(clientKeypair);\n\t\tthis.publicKey = await sodium.crypto_box_publickey(clientKeypair);\n\n\t\treturn this.publicKey.toString(this.stringFormatKey);\n\t}\n\n\tasync setServerKey(serverPublic: string): Promise<void> {\n\t\tconst sodium = await this.sodium();\n\n\t\tconst [decryptKey, encryptKey] = await sodium.crypto_kx_client_session_keys(\n\t\t\tthis.publicKey,\n\t\t\tthis.secretKey,\n\t\t\tthis.publicKeyFromString(serverPublic),\n\t\t);\n\n\t\tthis.decryptKey = decryptKey;\n\t\tthis.encryptKey = encryptKey;\n\t}\n}\n"]}