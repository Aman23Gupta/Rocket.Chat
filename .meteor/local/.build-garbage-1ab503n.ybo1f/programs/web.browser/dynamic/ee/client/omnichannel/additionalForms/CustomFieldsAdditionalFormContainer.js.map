{"version":3,"sources":["meteor://ðŸ’»app/ee/client/omnichannel/additionalForms/CustomFieldsAdditionalFormContainer.js"],"names":["React","useMemo","useEffect","module","link","default","v","useTranslation","useForm","CustomFieldsAdditionalForm","getInitialValues","data","type","required","defaultValue","options","public","checkInvalidOptions","value","trim","split","every","test","CustomFieldsAdditionalFormContainer","state","onChange","className","t","values","handlers","hasUnsavedChanges","errors","optionsError","undefined","hasError","Object","filter","Boolean","length","exportDefault"],"mappings":"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","file":"dynamic/ee/client/omnichannel/additionalForms/CustomFieldsAdditionalFormContainer.js","sourcesContent":["import React, { useMemo, useEffect } from 'react';\n\nimport { useTranslation } from '../../../../client/contexts/TranslationContext';\nimport { useForm } from '../../../../client/hooks/useForm';\nimport CustomFieldsAdditionalForm from './CustomFieldsAdditionalForm';\n\nconst getInitialValues = (data) => ({\n\ttype: data.type || 'input',\n\trequired: !!data.required,\n\tdefaultValue: data.defaultValue ?? '',\n\toptions: data.options || '',\n\tpublic: !!data.public,\n});\n\nconst checkInvalidOptions = (value) => {\n\tif (!value || value.trim() === '') {\n\t\treturn false;\n\t}\n\n\treturn value.split(',').every((v) => /^[a-zA-Z0-9-_ ]+$/.test(v));\n};\n\nconst CustomFieldsAdditionalFormContainer = ({ data = {}, state, onChange, className }) => {\n\tconst t = useTranslation();\n\n\tconst { values, handlers, hasUnsavedChanges } = useForm(getInitialValues(data));\n\n\tconst errors = useMemo(\n\t\t() => ({\n\t\t\toptionsError: checkInvalidOptions(values.options) ? t('error-invalid-value') : undefined,\n\t\t}),\n\t\t[t, values.options],\n\t);\n\n\tconst hasError = useMemo(() => !!Object.values(errors).filter(Boolean).length, [errors]);\n\n\tuseEffect(() => {\n\t\tonChange({ data: values, hasError, hasUnsavedChanges });\n\t}, [hasError, hasUnsavedChanges, onChange, values]);\n\n\treturn <CustomFieldsAdditionalForm values={values} handlers={handlers} state={state} className={className} errors={errors} />;\n};\n\nexport default CustomFieldsAdditionalFormContainer;\n"]}