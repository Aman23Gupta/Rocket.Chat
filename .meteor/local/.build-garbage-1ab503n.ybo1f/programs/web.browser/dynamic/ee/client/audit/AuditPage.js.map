{"version":3,"sources":["meteor://ðŸ’»app/ee/client/audit/AuditPage.js"],"names":["useMutableCallback","module","link","v","React","useRef","useState","default","useTranslation","useForm","AuditPageBase","initialValues","msg","type","dateRange","start","end","visitor","agent","rid","users","AuditPage","t","values","handlers","setData","errors","setErrors","startDate","endDate","handleMsg","handleType","handleVisitor","handleAgent","handleUsers","handleRid","handleDateRange","onChangeUsers","value","action","includes","filter","current","apply","length","Date","exportDefault"],"mappings":"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","file":"dynamic/ee/client/audit/AuditPage.js","sourcesContent":["import { useMutableCallback } from '@rocket.chat/fuselage-hooks';\nimport React, { useRef, useState } from 'react';\n\nimport { useTranslation } from '../../../client/contexts/TranslationContext';\nimport { useForm } from '../../../client/hooks/useForm';\nimport { AuditPageBase } from './AuditPageBase';\n\nconst initialValues = {\n\tmsg: '',\n\ttype: '',\n\tdateRange: {\n\t\tstart: '',\n\t\tend: '',\n\t},\n\tvisitor: '',\n\tagent: 'all',\n\trid: '',\n\tusers: [],\n};\n\nconst AuditPage = () => {\n\tconst t = useTranslation();\n\n\tconst { values, handlers } = useForm(initialValues);\n\tconst setData = useRef(() => {});\n\n\tconst [errors, setErrors] = useState({});\n\n\tconst {\n\t\tmsg,\n\t\ttype,\n\t\tdateRange: { start: startDate, end: endDate },\n\t\tvisitor,\n\t\tagent,\n\t\tusers,\n\t\trid,\n\t} = values;\n\n\tconst { handleMsg, handleType, handleVisitor, handleAgent, handleUsers, handleRid, handleDateRange } = handlers;\n\n\tconst onChangeUsers = useMutableCallback((value, action) => {\n\t\tif (!action) {\n\t\t\tif (users.includes(value)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn handleUsers([...users, value]);\n\t\t}\n\t\thandleUsers(users.filter((current) => current !== value));\n\t});\n\n\tconst apply = useMutableCallback(() => {\n\t\tif (!rid && type === '') {\n\t\t\treturn setErrors({\n\t\t\t\trid: t('The_field_is_required', t('Channel_name')),\n\t\t\t});\n\t\t}\n\n\t\tif (users.length < 2 && type === 'd') {\n\t\t\treturn setErrors({\n\t\t\t\tusers: t('Select_at_least_two_users'),\n\t\t\t});\n\t\t}\n\n\t\tif (type === 'l') {\n\t\t\tconst errors = {};\n\n\t\t\tif (agent === '') {\n\t\t\t\terrors.agent = t('The_field_is_required', t('Agent'));\n\t\t\t}\n\n\t\t\tif (visitor === '') {\n\t\t\t\terrors.visitor = t('The_field_is_required', t('Visitor'));\n\t\t\t}\n\n\t\t\tif (errors.visitor || errors.agent) {\n\t\t\t\treturn setErrors(errors);\n\t\t\t}\n\t\t}\n\n\t\tsetErrors({});\n\n\t\tsetData.current({\n\t\t\tmsg,\n\t\t\ttype,\n\t\t\tstartDate: new Date(startDate),\n\t\t\tendDate: new Date(`${endDate}T23:59:00`),\n\t\t\tvisitor,\n\t\t\tagent,\n\t\t\tusers,\n\t\t\trid,\n\t\t});\n\t});\n\n\treturn (\n\t\t<AuditPageBase\n\t\t\ttype={type}\n\t\t\thandleType={handleType}\n\t\t\tmsg={msg}\n\t\t\thandleMsg={handleMsg}\n\t\t\thandleDateRange={handleDateRange}\n\t\t\terrors={errors}\n\t\t\trid={rid}\n\t\t\thandleRid={handleRid}\n\t\t\tusers={users}\n\t\t\thandleUsers={handleUsers}\n\t\t\tonChangeUsers={onChangeUsers}\n\t\t\tvisitor={visitor}\n\t\t\thandleVisitor={handleVisitor}\n\t\t\tagent={agent}\n\t\t\thandleAgent={handleAgent}\n\t\t\tapply={apply}\n\t\t\tsetData={setData}\n\t\t/>\n\t);\n};\n\nexport default AuditPage;\n"]}