{"version":3,"sources":["meteor://ðŸ’»app/app/webdav/client/actionButton.js"],"names":["Meteor","module","link","v","t","getURL","WebdavAccounts","settings","MessageAction","modal","messageArgs","startup","addButton","id","icon","label","condition","msg","message","subscription","findOne","file","get","action","attachment","attachments","url","title_link","full","open","data","title","content","showCancelButton","showConfirmButton","closeOnCancel","html","order","group"],"mappings":"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","file":"dynamic/app/webdav/client/actionButton.js","sourcesContent":["import { Meteor } from 'meteor/meteor';\n\nimport { t, getURL } from '../../utils';\nimport { WebdavAccounts } from '../../models/client';\nimport { settings } from '../../settings';\nimport { MessageAction, modal } from '../../ui-utils';\nimport { messageArgs } from '../../ui-utils/client/lib/messageArgs';\n\nMeteor.startup(function () {\n\tMessageAction.addButton({\n\t\tid: 'webdav-upload',\n\t\ticon: 'upload',\n\t\tlabel: t('Save_To_Webdav'),\n\t\tcondition: ({ msg: message, subscription }) => {\n\t\t\tif (subscription == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (WebdavAccounts.findOne() == null) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tif (!message.file) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn settings.get('Webdav_Integration_Enabled');\n\t\t},\n\t\taction() {\n\t\t\tconst { msg: message } = messageArgs(this);\n\t\t\tconst [attachment] = message.attachments;\n\t\t\tconst { file } = message;\n\t\t\tconst url = getURL(attachment.title_link, { full: true });\n\t\t\tmodal.open({\n\t\t\t\tdata: {\n\t\t\t\t\tmessage,\n\t\t\t\t\tattachment,\n\t\t\t\t\tfile,\n\t\t\t\t\turl,\n\t\t\t\t},\n\t\t\t\ttitle: t('Save_To_Webdav'),\n\t\t\t\tcontent: 'selectWebdavAccount',\n\t\t\t\tshowCancelButton: true,\n\t\t\t\tshowConfirmButton: false,\n\t\t\t\tcloseOnCancel: true,\n\t\t\t\thtml: true,\n\t\t\t});\n\t\t},\n\t\torder: 100,\n\t\tgroup: 'menu',\n\t});\n});\n"]}