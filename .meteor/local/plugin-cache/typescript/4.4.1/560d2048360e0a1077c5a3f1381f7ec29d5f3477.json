{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/app/ui-master/server/scripts.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.arm64"},"sourceFileName":"app/ui-master/server/scripts.ts","filename":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/app/ui-master/server/scripts.ts","inputSourceMap":{"version":3,"file":"app/ui-master/server/scripts.ts","sourceRoot":"","sources":["app/ui-master/server/scripts.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,QAAQ,EAAE,MAAM,uBAAuB,CAAC;AACjD,OAAO,EAAE,SAAS,EAAE,MAAM,UAAU,CAAC;AAErC,MAAM,UAAU,GAAG,GAAW,EAAE,CAAC;EAC/B,OAAO,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAC,CAAC,oCAAoC,CAAC,CAAC,CAAC,EAAE;;EAEzE,QAAQ,CAAC,GAAG,CAAC,4BAA4B,CAAC,CAAC,CAAC,CAAC,yCAAyC,CAAC,CAAC,CAAC,EAAE;EAC3F,QAAQ,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC,CAAC,CAAC,+BAA+B,CAAC,CAAC,CAAC,EAAE;;;GAGlE,QAAQ,CAAC,GAAG,CAAC,0BAA0B,CAAC;;;;;;GAMxC,QAAQ,CAAC,GAAG,CAAC,yBAAyB,CAAC;;;;;;GAMvC,QAAQ,CAAC,GAAG,CAAC,yBAAyB,CAAC;;;EAIzC,QAAQ,CAAC,GAAG,CAAC,yCAAyC,CAAC;IACtD,CAAC,CAAC;;;;;;;;;;CAUH;IACC,CAAC,CAAC,EACJ,EAAE,CAAC;AAEH,QAAQ,CAAC,aAAa,CACrB;IACC,4BAA4B;IAC5B,0BAA0B;IAC1B,yBAAyB;IACzB,yBAAyB;IACzB,yCAAyC;IACzC,cAAc;CACd,EACD,GAAG,EAAE;IACJ,MAAM,OAAO,GAAG,UAAU,EAAE,CAAC;IAC7B,SAAS,CAAC,SAAS,EAAE,OAAO,CAAC,CAAC;AAC/B,CAAC,CACD,CAAC","sourcesContent":["import { settings } from '../../settings/server';\nimport { addScript } from './inject';\n\nconst getContent = (): string => `\n${process.env.DISABLE_ANIMATION ? 'window.DISABLE_ANIMATION = true;\\n' : ''}\n\n${settings.get('API_Use_REST_For_DDP_Calls') ? 'window.USE_REST_FOR_DDP_CALLS = true;\\n' : ''}\n${settings.get('ECDH_Enabled') ? 'window.ECDH_Enabled = true;\\n' : ''}\n// Custom_Script_Logged_Out\nwindow.addEventListener('Custom_Script_Logged_Out', function() {\n\t${settings.get('Custom_Script_Logged_Out')}\n})\n\n\n// Custom_Script_Logged_In\nwindow.addEventListener('Custom_Script_Logged_In', function() {\n\t${settings.get('Custom_Script_Logged_In')}\n})\n\n\n// Custom_Script_On_Logout\nwindow.addEventListener('Custom_Script_On_Logout', function() {\n\t${settings.get('Custom_Script_On_Logout')}\n})\n\n${\n\tsettings.get('Accounts_ForgetUserSessionOnWindowClose')\n\t\t? `\nwindow.addEventListener('load', function() {\n\tif (window.localStorage) {\n\t\tObject.keys(window.localStorage).forEach(function(key) {\n\t\t\twindow.sessionStorage.setItem(key, window.localStorage.getItem(key));\n\t\t});\n\t\twindow.localStorage.clear();\n\t\tMeteor._localStorage = window.sessionStorage;\n\t}\n});\n`\n\t\t: ''\n}`;\n\nsettings.watchMultiple(\n\t[\n\t\t'API_Use_REST_For_DDP_Calls',\n\t\t'Custom_Script_Logged_Out',\n\t\t'Custom_Script_Logged_In',\n\t\t'Custom_Script_On_Logout',\n\t\t'Accounts_ForgetUserSessionOnWindowClose',\n\t\t'ECDH_Enabled',\n\t],\n\t() => {\n\t\tconst content = getContent();\n\t\taddScript('scripts', content);\n\t},\n);\n"]},"targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/amangupta/Documents/Open-Source/Rocket.Chat","root":"/Users/amangupta/Documents/Open-Source/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/app/ui-master/server/scripts.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/ui-master/server/scripts.ts"}},"code":"let settings;\nmodule.link(\"../../settings/server\", {\n  settings(v) {\n    settings = v;\n  }\n\n}, 0);\nlet addScript;\nmodule.link(\"./inject\", {\n  addScript(v) {\n    addScript = v;\n  }\n\n}, 1);\n\nconst getContent = () => \"\\n\".concat(process.env.DISABLE_ANIMATION ? 'window.DISABLE_ANIMATION = true;\\n' : '', \"\\n\\n\").concat(settings.get('API_Use_REST_For_DDP_Calls') ? 'window.USE_REST_FOR_DDP_CALLS = true;\\n' : '', \"\\n\").concat(settings.get('ECDH_Enabled') ? 'window.ECDH_Enabled = true;\\n' : '', \"\\n// Custom_Script_Logged_Out\\nwindow.addEventListener('Custom_Script_Logged_Out', function() {\\n\\t\").concat(settings.get('Custom_Script_Logged_Out'), \"\\n})\\n\\n\\n// Custom_Script_Logged_In\\nwindow.addEventListener('Custom_Script_Logged_In', function() {\\n\\t\").concat(settings.get('Custom_Script_Logged_In'), \"\\n})\\n\\n\\n// Custom_Script_On_Logout\\nwindow.addEventListener('Custom_Script_On_Logout', function() {\\n\\t\").concat(settings.get('Custom_Script_On_Logout'), \"\\n})\\n\\n\").concat(settings.get('Accounts_ForgetUserSessionOnWindowClose') ? \"\\nwindow.addEventListener('load', function() {\\n\\tif (window.localStorage) {\\n\\t\\tObject.keys(window.localStorage).forEach(function(key) {\\n\\t\\t\\twindow.sessionStorage.setItem(key, window.localStorage.getItem(key));\\n\\t\\t});\\n\\t\\twindow.localStorage.clear();\\n\\t\\tMeteor._localStorage = window.sessionStorage;\\n\\t}\\n});\\n\" : '');\n\nsettings.watchMultiple(['API_Use_REST_For_DDP_Calls', 'Custom_Script_Logged_Out', 'Custom_Script_Logged_In', 'Custom_Script_On_Logout', 'Accounts_ForgetUserSessionOnWindowClose', 'ECDH_Enabled'], () => {\n  const content = getContent();\n  addScript('scripts', content);\n});","map":{"version":3,"sources":["app/ui-master/server/scripts.ts"],"names":[],"mappings":"AAAA,IAAA,QAAA;AAAS,MAAU,CAAA,IAAV,CAAgB,uBAAhB,EAAwC;AAAA,EAAA,QAAA,CAAA,CAAA,EAAA;AAAA,IAAA,QAAA,GAAA,CAAA;AAAA;;AAAA,CAAxC,EAAwC,CAAxC;AAAwC,IAAA,SAAA;AAAA,MAAA,CAAA,IAAA,CAAA,UAAA,EAAA;AAAA,EAAA,SAAA,CAAA,CAAA,EAAA;AAAA,IAAA,SAAA,GAAA,CAAA;AAAA;;AAAA,CAAA,EAAA,CAAA;;AAGjD,MAAM,UAAU,GAAG,kBACjB,OAAO,CAAC,GAAR,CAAY,iBAAZ,GAAgC,oCAAhC,GAAuE,EADtD,iBAGjB,QAAQ,CAAC,GAAT,CAAa,4BAAb,IAA6C,yCAA7C,GAAyF,EAHxE,eAIjB,QAAQ,CAAC,GAAT,CAAa,cAAb,IAA+B,+BAA/B,GAAiE,EAJhD,gHAOhB,QAAQ,CAAC,GAAT,CAAa,0BAAb,CAPgB,sHAahB,QAAQ,CAAC,GAAT,CAAa,yBAAb,CAbgB,sHAmBhB,QAAQ,CAAC,GAAT,CAAa,yBAAb,CAnBgB,qBAuBlB,QAAQ,CAAC,GAAT,CAAa,yCAAb,0UAYG,EAnCe,CAAnB;;AAsCA,QAAQ,CAAC,aAAT,CACC,CACC,4BADD,EAEC,0BAFD,EAGC,yBAHD,EAIC,yBAJD,EAKC,yCALD,EAMC,cAND,CADD,EASC,MAAK;AACJ,QAAM,OAAO,GAAG,UAAU,EAA1B;AACA,EAAA,SAAS,CAAC,SAAD,EAAY,OAAZ,CAAT;AACA,CAZF","sourcesContent":["import { settings } from '../../settings/server';\nimport { addScript } from './inject';\n\nconst getContent = (): string => `\n${process.env.DISABLE_ANIMATION ? 'window.DISABLE_ANIMATION = true;\\n' : ''}\n\n${settings.get('API_Use_REST_For_DDP_Calls') ? 'window.USE_REST_FOR_DDP_CALLS = true;\\n' : ''}\n${settings.get('ECDH_Enabled') ? 'window.ECDH_Enabled = true;\\n' : ''}\n// Custom_Script_Logged_Out\nwindow.addEventListener('Custom_Script_Logged_Out', function() {\n\t${settings.get('Custom_Script_Logged_Out')}\n})\n\n\n// Custom_Script_Logged_In\nwindow.addEventListener('Custom_Script_Logged_In', function() {\n\t${settings.get('Custom_Script_Logged_In')}\n})\n\n\n// Custom_Script_On_Logout\nwindow.addEventListener('Custom_Script_On_Logout', function() {\n\t${settings.get('Custom_Script_On_Logout')}\n})\n\n${\n\tsettings.get('Accounts_ForgetUserSessionOnWindowClose')\n\t\t? `\nwindow.addEventListener('load', function() {\n\tif (window.localStorage) {\n\t\tObject.keys(window.localStorage).forEach(function(key) {\n\t\t\twindow.sessionStorage.setItem(key, window.localStorage.getItem(key));\n\t\t});\n\t\twindow.localStorage.clear();\n\t\tMeteor._localStorage = window.sessionStorage;\n\t}\n});\n`\n\t\t: ''\n}`;\n\nsettings.watchMultiple(\n\t[\n\t\t'API_Use_REST_For_DDP_Calls',\n\t\t'Custom_Script_Logged_Out',\n\t\t'Custom_Script_Logged_In',\n\t\t'Custom_Script_On_Logout',\n\t\t'Accounts_ForgetUserSessionOnWindowClose',\n\t\t'ECDH_Enabled',\n\t],\n\t() => {\n\t\tconst content = getContent();\n\t\taddScript('scripts', content);\n\t},\n);\n"],"sourceRoot":""},"sourceType":"module","hash":"560d2048360e0a1077c5a3f1381f7ec29d5f3477"}
