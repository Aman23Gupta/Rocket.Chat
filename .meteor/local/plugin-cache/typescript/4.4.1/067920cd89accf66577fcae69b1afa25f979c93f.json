{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/server/settings/ldap.ts","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.arm64"},"sourceFileName":"server/settings/ldap.ts","filename":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/server/settings/ldap.ts","inputSourceMap":{"version":3,"file":"server/settings/ldap.ts","sourceRoot":"","sources":["server/settings/ldap.ts"],"names":[],"mappings":"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","sourcesContent":["import { settingsRegistry } from '../../app/settings/server';\n\nsettingsRegistry.addGroup('LDAP', function () {\n\tconst enableQuery = { _id: 'LDAP_Enable', value: true };\n\tconst adOnly = { _id: 'LDAP_Server_Type', value: 'ad' };\n\tconst ldapOnly = { _id: 'LDAP_Server_Type', value: '' };\n\n\tthis.with({ tab: 'LDAP_Connection' }, function () {\n\t\tthis.add('LDAP_Enable', false, { type: 'boolean', public: true });\n\n\t\tthis.add('LDAP_Server_Type', 'ad', {\n\t\t\ttype: 'select',\n\t\t\tpublic: true,\n\t\t\tenableQuery,\n\t\t\tvalues: [\n\t\t\t\t{ key: 'ad', i18nLabel: 'LDAP_Server_Type_AD' },\n\t\t\t\t{ key: '', i18nLabel: 'LDAP_Server_Type_Other' },\n\t\t\t],\n\t\t});\n\n\t\tthis.add('LDAP_Host', '', { type: 'string', enableQuery });\n\t\tthis.add('LDAP_Port', '389', { type: 'int', enableQuery });\n\t\tthis.add('LDAP_Reconnect', false, { type: 'boolean', enableQuery });\n\n\t\tthis.add('LDAP_Login_Fallback', false, { type: 'boolean', enableQuery });\n\n\t\tthis.section('LDAP_Connection_Authentication', function () {\n\t\t\tconst enableAuthentication = [enableQuery, { _id: 'LDAP_Authentication', value: true }];\n\n\t\t\tthis.add('LDAP_Authentication', false, { type: 'boolean', enableQuery, invalidValue: false });\n\t\t\tthis.add('LDAP_Authentication_UserDN', '', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery: enableAuthentication,\n\t\t\t\tsecret: true,\n\t\t\t\tinvalidValue: '',\n\t\t\t});\n\t\t\tthis.add('LDAP_Authentication_Password', '', {\n\t\t\t\ttype: 'password',\n\t\t\t\tenableQuery: enableAuthentication,\n\t\t\t\tsecret: true,\n\t\t\t\tinvalidValue: '',\n\t\t\t});\n\t\t});\n\n\t\tthis.section('LDAP_Connection_Encryption', function () {\n\t\t\tthis.add('LDAP_Encryption', 'plain', {\n\t\t\t\ttype: 'select',\n\t\t\t\tvalues: [\n\t\t\t\t\t{ key: 'plain', i18nLabel: 'No_Encryption' },\n\t\t\t\t\t{ key: 'tls', i18nLabel: 'StartTLS' },\n\t\t\t\t\t{ key: 'ssl', i18nLabel: 'SSL/LDAPS' },\n\t\t\t\t],\n\t\t\t\tenableQuery,\n\t\t\t});\n\n\t\t\tconst enableTLSQuery = [enableQuery, { _id: 'LDAP_Encryption', value: { $in: ['tls', 'ssl'] } }];\n\n\t\t\tthis.add('LDAP_CA_Cert', '', {\n\t\t\t\ttype: 'string',\n\t\t\t\tmultiline: true,\n\t\t\t\tenableQuery: enableTLSQuery,\n\t\t\t\tsecret: true,\n\t\t\t});\n\t\t\tthis.add('LDAP_Reject_Unauthorized', true, { type: 'boolean', enableQuery: enableTLSQuery });\n\t\t});\n\n\t\tthis.section('LDAP_Connection_Timeouts', function () {\n\t\t\tthis.add('LDAP_Timeout', 60000, { type: 'int', enableQuery });\n\t\t\tthis.add('LDAP_Connect_Timeout', 1000, { type: 'int', enableQuery });\n\t\t\tthis.add('LDAP_Idle_Timeout', 1000, { type: 'int', enableQuery });\n\t\t});\n\t});\n\n\tthis.with({ tab: 'LDAP_UserSearch' }, function () {\n\t\tthis.add('LDAP_Find_User_After_Login', true, { type: 'boolean', enableQuery });\n\n\t\tthis.section('LDAP_UserSearch_Filter', function () {\n\t\t\tthis.add('LDAP_BaseDN', '', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t});\n\n\t\t\tthis.add('LDAP_User_Search_Filter', '(objectclass=*)', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t});\n\n\t\t\tthis.add('LDAP_User_Search_Scope', 'sub', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t});\n\n\t\t\tthis.add('LDAP_AD_User_Search_Field', 'sAMAccountName', {\n\t\t\t\ti18nLabel: 'LDAP_User_Search_Field',\n\t\t\t\ti18nDescription: 'LDAP_User_Search_Field_Description',\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t\tdisplayQuery: adOnly,\n\t\t\t});\n\t\t\tthis.add('LDAP_User_Search_Field', 'uid', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t\tdisplayQuery: ldapOnly,\n\t\t\t});\n\t\t\tthis.add('LDAP_Search_Page_Size', 250, {\n\t\t\t\ttype: 'int',\n\t\t\t\tenableQuery,\n\t\t\t});\n\n\t\t\tthis.add('LDAP_Search_Size_Limit', 1000, {\n\t\t\t\ttype: 'int',\n\t\t\t\tenableQuery,\n\t\t\t});\n\t\t});\n\n\t\tthis.section('LDAP_UserSearch_GroupFilter', function () {\n\t\t\tconst groupFilterQuery = [enableQuery, { _id: 'LDAP_Group_Filter_Enable', value: true }];\n\n\t\t\tthis.add('LDAP_Group_Filter_Enable', false, { type: 'boolean', enableQuery });\n\t\t\tthis.add('LDAP_Group_Filter_ObjectClass', 'groupOfUniqueNames', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery: groupFilterQuery,\n\t\t\t});\n\t\t\tthis.add('LDAP_Group_Filter_Group_Id_Attribute', 'cn', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery: groupFilterQuery,\n\t\t\t});\n\t\t\tthis.add('LDAP_Group_Filter_Group_Member_Attribute', 'uniqueMember', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery: groupFilterQuery,\n\t\t\t});\n\t\t\tthis.add('LDAP_Group_Filter_Group_Member_Format', '', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery: groupFilterQuery,\n\t\t\t});\n\t\t\tthis.add('LDAP_Group_Filter_Group_Name', 'ROCKET_CHAT', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery: groupFilterQuery,\n\t\t\t});\n\t\t});\n\t});\n\n\tthis.with({ tab: 'LDAP_DataSync' }, function () {\n\t\tthis.add('LDAP_Unique_Identifier_Field', 'objectGUID,ibm-entryUUID,GUID,dominoUNID,nsuniqueId,uidNumber,uid', {\n\t\t\ttype: 'string',\n\t\t\tenableQuery,\n\t\t});\n\n\t\tthis.add('LDAP_Merge_Existing_Users', false, {\n\t\t\ttype: 'boolean',\n\t\t\tenableQuery,\n\t\t});\n\n\t\tthis.add('LDAP_Update_Data_On_Login', true, {\n\t\t\ttype: 'boolean',\n\t\t\tenableQuery,\n\t\t});\n\n\t\tthis.add('LDAP_Default_Domain', '', {\n\t\t\ttype: 'string',\n\t\t\tenableQuery,\n\t\t});\n\n\t\tthis.section('LDAP_DataSync_DataMap', function () {\n\t\t\tthis.add('LDAP_AD_Username_Field', 'sAMAccountName', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t\ti18nLabel: 'LDAP_Username_Field',\n\t\t\t\ti18nDescription: 'LDAP_Username_Field_Description',\n\t\t\t\tdisplayQuery: adOnly,\n\t\t\t});\n\n\t\t\tthis.add('LDAP_Username_Field', 'uid', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t\tdisplayQuery: ldapOnly,\n\t\t\t});\n\n\t\t\tthis.add('LDAP_AD_Email_Field', 'mail', {\n\t\t\t\ti18nLabel: 'LDAP_Email_Field',\n\t\t\t\ti18nDescription: 'LDAP_Email_Field_Description',\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t\tdisplayQuery: adOnly,\n\t\t\t});\n\n\t\t\tthis.add('LDAP_Email_Field', 'mail', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t\tdisplayQuery: ldapOnly,\n\t\t\t});\n\n\t\t\tthis.add('LDAP_AD_Name_Field', 'cn', {\n\t\t\t\ti18nLabel: 'LDAP_Name_Field',\n\t\t\t\ti18nDescription: 'LDAP_Name_Field_Description',\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t\tdisplayQuery: adOnly,\n\t\t\t});\n\n\t\t\tthis.add('LDAP_Name_Field', 'cn', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t\tdisplayQuery: ldapOnly,\n\t\t\t});\n\t\t});\n\n\t\tthis.section('LDAP_DataSync_Avatar', function () {\n\t\t\tthis.add('LDAP_Sync_User_Avatar', true, {\n\t\t\t\ttype: 'boolean',\n\t\t\t\tenableQuery,\n\t\t\t});\n\n\t\t\tthis.add('LDAP_Avatar_Field', '', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t});\n\t\t});\n\t});\n});\n"]},"targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/amangupta/Documents/Open-Source/Rocket.Chat","root":"/Users/amangupta/Documents/Open-Source/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/server/settings/ldap.ts","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"server/settings/ldap.ts"}},"code":"let settingsRegistry;\nmodule.link(\"../../app/settings/server\", {\n  settingsRegistry(v) {\n    settingsRegistry = v;\n  }\n\n}, 0);\nsettingsRegistry.addGroup('LDAP', function () {\n  const enableQuery = {\n    _id: 'LDAP_Enable',\n    value: true\n  };\n  const adOnly = {\n    _id: 'LDAP_Server_Type',\n    value: 'ad'\n  };\n  const ldapOnly = {\n    _id: 'LDAP_Server_Type',\n    value: ''\n  };\n  this.with({\n    tab: 'LDAP_Connection'\n  }, function () {\n    this.add('LDAP_Enable', false, {\n      type: 'boolean',\n      public: true\n    });\n    this.add('LDAP_Server_Type', 'ad', {\n      type: 'select',\n      public: true,\n      enableQuery,\n      values: [{\n        key: 'ad',\n        i18nLabel: 'LDAP_Server_Type_AD'\n      }, {\n        key: '',\n        i18nLabel: 'LDAP_Server_Type_Other'\n      }]\n    });\n    this.add('LDAP_Host', '', {\n      type: 'string',\n      enableQuery\n    });\n    this.add('LDAP_Port', '389', {\n      type: 'int',\n      enableQuery\n    });\n    this.add('LDAP_Reconnect', false, {\n      type: 'boolean',\n      enableQuery\n    });\n    this.add('LDAP_Login_Fallback', false, {\n      type: 'boolean',\n      enableQuery\n    });\n    this.section('LDAP_Connection_Authentication', function () {\n      const enableAuthentication = [enableQuery, {\n        _id: 'LDAP_Authentication',\n        value: true\n      }];\n      this.add('LDAP_Authentication', false, {\n        type: 'boolean',\n        enableQuery,\n        invalidValue: false\n      });\n      this.add('LDAP_Authentication_UserDN', '', {\n        type: 'string',\n        enableQuery: enableAuthentication,\n        secret: true,\n        invalidValue: ''\n      });\n      this.add('LDAP_Authentication_Password', '', {\n        type: 'password',\n        enableQuery: enableAuthentication,\n        secret: true,\n        invalidValue: ''\n      });\n    });\n    this.section('LDAP_Connection_Encryption', function () {\n      this.add('LDAP_Encryption', 'plain', {\n        type: 'select',\n        values: [{\n          key: 'plain',\n          i18nLabel: 'No_Encryption'\n        }, {\n          key: 'tls',\n          i18nLabel: 'StartTLS'\n        }, {\n          key: 'ssl',\n          i18nLabel: 'SSL/LDAPS'\n        }],\n        enableQuery\n      });\n      const enableTLSQuery = [enableQuery, {\n        _id: 'LDAP_Encryption',\n        value: {\n          $in: ['tls', 'ssl']\n        }\n      }];\n      this.add('LDAP_CA_Cert', '', {\n        type: 'string',\n        multiline: true,\n        enableQuery: enableTLSQuery,\n        secret: true\n      });\n      this.add('LDAP_Reject_Unauthorized', true, {\n        type: 'boolean',\n        enableQuery: enableTLSQuery\n      });\n    });\n    this.section('LDAP_Connection_Timeouts', function () {\n      this.add('LDAP_Timeout', 60000, {\n        type: 'int',\n        enableQuery\n      });\n      this.add('LDAP_Connect_Timeout', 1000, {\n        type: 'int',\n        enableQuery\n      });\n      this.add('LDAP_Idle_Timeout', 1000, {\n        type: 'int',\n        enableQuery\n      });\n    });\n  });\n  this.with({\n    tab: 'LDAP_UserSearch'\n  }, function () {\n    this.add('LDAP_Find_User_After_Login', true, {\n      type: 'boolean',\n      enableQuery\n    });\n    this.section('LDAP_UserSearch_Filter', function () {\n      this.add('LDAP_BaseDN', '', {\n        type: 'string',\n        enableQuery\n      });\n      this.add('LDAP_User_Search_Filter', '(objectclass=*)', {\n        type: 'string',\n        enableQuery\n      });\n      this.add('LDAP_User_Search_Scope', 'sub', {\n        type: 'string',\n        enableQuery\n      });\n      this.add('LDAP_AD_User_Search_Field', 'sAMAccountName', {\n        i18nLabel: 'LDAP_User_Search_Field',\n        i18nDescription: 'LDAP_User_Search_Field_Description',\n        type: 'string',\n        enableQuery,\n        displayQuery: adOnly\n      });\n      this.add('LDAP_User_Search_Field', 'uid', {\n        type: 'string',\n        enableQuery,\n        displayQuery: ldapOnly\n      });\n      this.add('LDAP_Search_Page_Size', 250, {\n        type: 'int',\n        enableQuery\n      });\n      this.add('LDAP_Search_Size_Limit', 1000, {\n        type: 'int',\n        enableQuery\n      });\n    });\n    this.section('LDAP_UserSearch_GroupFilter', function () {\n      const groupFilterQuery = [enableQuery, {\n        _id: 'LDAP_Group_Filter_Enable',\n        value: true\n      }];\n      this.add('LDAP_Group_Filter_Enable', false, {\n        type: 'boolean',\n        enableQuery\n      });\n      this.add('LDAP_Group_Filter_ObjectClass', 'groupOfUniqueNames', {\n        type: 'string',\n        enableQuery: groupFilterQuery\n      });\n      this.add('LDAP_Group_Filter_Group_Id_Attribute', 'cn', {\n        type: 'string',\n        enableQuery: groupFilterQuery\n      });\n      this.add('LDAP_Group_Filter_Group_Member_Attribute', 'uniqueMember', {\n        type: 'string',\n        enableQuery: groupFilterQuery\n      });\n      this.add('LDAP_Group_Filter_Group_Member_Format', '', {\n        type: 'string',\n        enableQuery: groupFilterQuery\n      });\n      this.add('LDAP_Group_Filter_Group_Name', 'ROCKET_CHAT', {\n        type: 'string',\n        enableQuery: groupFilterQuery\n      });\n    });\n  });\n  this.with({\n    tab: 'LDAP_DataSync'\n  }, function () {\n    this.add('LDAP_Unique_Identifier_Field', 'objectGUID,ibm-entryUUID,GUID,dominoUNID,nsuniqueId,uidNumber,uid', {\n      type: 'string',\n      enableQuery\n    });\n    this.add('LDAP_Merge_Existing_Users', false, {\n      type: 'boolean',\n      enableQuery\n    });\n    this.add('LDAP_Update_Data_On_Login', true, {\n      type: 'boolean',\n      enableQuery\n    });\n    this.add('LDAP_Default_Domain', '', {\n      type: 'string',\n      enableQuery\n    });\n    this.section('LDAP_DataSync_DataMap', function () {\n      this.add('LDAP_AD_Username_Field', 'sAMAccountName', {\n        type: 'string',\n        enableQuery,\n        i18nLabel: 'LDAP_Username_Field',\n        i18nDescription: 'LDAP_Username_Field_Description',\n        displayQuery: adOnly\n      });\n      this.add('LDAP_Username_Field', 'uid', {\n        type: 'string',\n        enableQuery,\n        displayQuery: ldapOnly\n      });\n      this.add('LDAP_AD_Email_Field', 'mail', {\n        i18nLabel: 'LDAP_Email_Field',\n        i18nDescription: 'LDAP_Email_Field_Description',\n        type: 'string',\n        enableQuery,\n        displayQuery: adOnly\n      });\n      this.add('LDAP_Email_Field', 'mail', {\n        type: 'string',\n        enableQuery,\n        displayQuery: ldapOnly\n      });\n      this.add('LDAP_AD_Name_Field', 'cn', {\n        i18nLabel: 'LDAP_Name_Field',\n        i18nDescription: 'LDAP_Name_Field_Description',\n        type: 'string',\n        enableQuery,\n        displayQuery: adOnly\n      });\n      this.add('LDAP_Name_Field', 'cn', {\n        type: 'string',\n        enableQuery,\n        displayQuery: ldapOnly\n      });\n    });\n    this.section('LDAP_DataSync_Avatar', function () {\n      this.add('LDAP_Sync_User_Avatar', true, {\n        type: 'boolean',\n        enableQuery\n      });\n      this.add('LDAP_Avatar_Field', '', {\n        type: 'string',\n        enableQuery\n      });\n    });\n  });\n});","map":{"version":3,"sources":["server/settings/ldap.ts"],"names":[],"mappings":"AAAA,IAAA,gBAAA;AAAS,MAAkB,CAAA,IAAlB,CAAwB,2BAAxB,EAAoD;AAAA,EAAA,gBAAA,CAAA,CAAA,EAAA;AAAA,IAAA,gBAAA,GAAA,CAAA;AAAA;;AAAA,CAApD,EAAoD,CAApD;AAET,gBAAgB,CAAC,QAAjB,CAA0B,MAA1B,EAAkC,YAAA;AACjC,QAAM,WAAW,GAAG;AAAE,IAAA,GAAG,EAAE,aAAP;AAAsB,IAAA,KAAK,EAAE;AAA7B,GAApB;AACA,QAAM,MAAM,GAAG;AAAE,IAAA,GAAG,EAAE,kBAAP;AAA2B,IAAA,KAAK,EAAE;AAAlC,GAAf;AACA,QAAM,QAAQ,GAAG;AAAE,IAAA,GAAG,EAAE,kBAAP;AAA2B,IAAA,KAAK,EAAE;AAAlC,GAAjB;AAEA,OAAK,IAAL,CAAU;AAAE,IAAA,GAAG,EAAE;AAAP,GAAV,EAAsC,YAAA;AACrC,SAAK,GAAL,CAAS,aAAT,EAAwB,KAAxB,EAA+B;AAAE,MAAA,IAAI,EAAE,SAAR;AAAmB,MAAA,MAAM,EAAE;AAA3B,KAA/B;AAEA,SAAK,GAAL,CAAS,kBAAT,EAA6B,IAA7B,EAAmC;AAClC,MAAA,IAAI,EAAE,QAD4B;AAElC,MAAA,MAAM,EAAE,IAF0B;AAGlC,MAAA,WAHkC;AAIlC,MAAA,MAAM,EAAE,CACP;AAAE,QAAA,GAAG,EAAE,IAAP;AAAa,QAAA,SAAS,EAAE;AAAxB,OADO,EAEP;AAAE,QAAA,GAAG,EAAE,EAAP;AAAW,QAAA,SAAS,EAAE;AAAtB,OAFO;AAJ0B,KAAnC;AAUA,SAAK,GAAL,CAAS,WAAT,EAAsB,EAAtB,EAA0B;AAAE,MAAA,IAAI,EAAE,QAAR;AAAkB,MAAA;AAAlB,KAA1B;AACA,SAAK,GAAL,CAAS,WAAT,EAAsB,KAAtB,EAA6B;AAAE,MAAA,IAAI,EAAE,KAAR;AAAe,MAAA;AAAf,KAA7B;AACA,SAAK,GAAL,CAAS,gBAAT,EAA2B,KAA3B,EAAkC;AAAE,MAAA,IAAI,EAAE,SAAR;AAAmB,MAAA;AAAnB,KAAlC;AAEA,SAAK,GAAL,CAAS,qBAAT,EAAgC,KAAhC,EAAuC;AAAE,MAAA,IAAI,EAAE,SAAR;AAAmB,MAAA;AAAnB,KAAvC;AAEA,SAAK,OAAL,CAAa,gCAAb,EAA+C,YAAA;AAC9C,YAAM,oBAAoB,GAAG,CAAC,WAAD,EAAc;AAAE,QAAA,GAAG,EAAE,qBAAP;AAA8B,QAAA,KAAK,EAAE;AAArC,OAAd,CAA7B;AAEA,WAAK,GAAL,CAAS,qBAAT,EAAgC,KAAhC,EAAuC;AAAE,QAAA,IAAI,EAAE,SAAR;AAAmB,QAAA,WAAnB;AAAgC,QAAA,YAAY,EAAE;AAA9C,OAAvC;AACA,WAAK,GAAL,CAAS,4BAAT,EAAuC,EAAvC,EAA2C;AAC1C,QAAA,IAAI,EAAE,QADoC;AAE1C,QAAA,WAAW,EAAE,oBAF6B;AAG1C,QAAA,MAAM,EAAE,IAHkC;AAI1C,QAAA,YAAY,EAAE;AAJ4B,OAA3C;AAMA,WAAK,GAAL,CAAS,8BAAT,EAAyC,EAAzC,EAA6C;AAC5C,QAAA,IAAI,EAAE,UADsC;AAE5C,QAAA,WAAW,EAAE,oBAF+B;AAG5C,QAAA,MAAM,EAAE,IAHoC;AAI5C,QAAA,YAAY,EAAE;AAJ8B,OAA7C;AAMA,KAhBD;AAkBA,SAAK,OAAL,CAAa,4BAAb,EAA2C,YAAA;AAC1C,WAAK,GAAL,CAAS,iBAAT,EAA4B,OAA5B,EAAqC;AACpC,QAAA,IAAI,EAAE,QAD8B;AAEpC,QAAA,MAAM,EAAE,CACP;AAAE,UAAA,GAAG,EAAE,OAAP;AAAgB,UAAA,SAAS,EAAE;AAA3B,SADO,EAEP;AAAE,UAAA,GAAG,EAAE,KAAP;AAAc,UAAA,SAAS,EAAE;AAAzB,SAFO,EAGP;AAAE,UAAA,GAAG,EAAE,KAAP;AAAc,UAAA,SAAS,EAAE;AAAzB,SAHO,CAF4B;AAOpC,QAAA;AAPoC,OAArC;AAUA,YAAM,cAAc,GAAG,CAAC,WAAD,EAAc;AAAE,QAAA,GAAG,EAAE,iBAAP;AAA0B,QAAA,KAAK,EAAE;AAAE,UAAA,GAAG,EAAE,CAAC,KAAD,EAAQ,KAAR;AAAP;AAAjC,OAAd,CAAvB;AAEA,WAAK,GAAL,CAAS,cAAT,EAAyB,EAAzB,EAA6B;AAC5B,QAAA,IAAI,EAAE,QADsB;AAE5B,QAAA,SAAS,EAAE,IAFiB;AAG5B,QAAA,WAAW,EAAE,cAHe;AAI5B,QAAA,MAAM,EAAE;AAJoB,OAA7B;AAMA,WAAK,GAAL,CAAS,0BAAT,EAAqC,IAArC,EAA2C;AAAE,QAAA,IAAI,EAAE,SAAR;AAAmB,QAAA,WAAW,EAAE;AAAhC,OAA3C;AACA,KApBD;AAsBA,SAAK,OAAL,CAAa,0BAAb,EAAyC,YAAA;AACxC,WAAK,GAAL,CAAS,cAAT,EAAyB,KAAzB,EAAgC;AAAE,QAAA,IAAI,EAAE,KAAR;AAAe,QAAA;AAAf,OAAhC;AACA,WAAK,GAAL,CAAS,sBAAT,EAAiC,IAAjC,EAAuC;AAAE,QAAA,IAAI,EAAE,KAAR;AAAe,QAAA;AAAf,OAAvC;AACA,WAAK,GAAL,CAAS,mBAAT,EAA8B,IAA9B,EAAoC;AAAE,QAAA,IAAI,EAAE,KAAR;AAAe,QAAA;AAAf,OAApC;AACA,KAJD;AAKA,GAhED;AAkEA,OAAK,IAAL,CAAU;AAAE,IAAA,GAAG,EAAE;AAAP,GAAV,EAAsC,YAAA;AACrC,SAAK,GAAL,CAAS,4BAAT,EAAuC,IAAvC,EAA6C;AAAE,MAAA,IAAI,EAAE,SAAR;AAAmB,MAAA;AAAnB,KAA7C;AAEA,SAAK,OAAL,CAAa,wBAAb,EAAuC,YAAA;AACtC,WAAK,GAAL,CAAS,aAAT,EAAwB,EAAxB,EAA4B;AAC3B,QAAA,IAAI,EAAE,QADqB;AAE3B,QAAA;AAF2B,OAA5B;AAKA,WAAK,GAAL,CAAS,yBAAT,EAAoC,iBAApC,EAAuD;AACtD,QAAA,IAAI,EAAE,QADgD;AAEtD,QAAA;AAFsD,OAAvD;AAKA,WAAK,GAAL,CAAS,wBAAT,EAAmC,KAAnC,EAA0C;AACzC,QAAA,IAAI,EAAE,QADmC;AAEzC,QAAA;AAFyC,OAA1C;AAKA,WAAK,GAAL,CAAS,2BAAT,EAAsC,gBAAtC,EAAwD;AACvD,QAAA,SAAS,EAAE,wBAD4C;AAEvD,QAAA,eAAe,EAAE,oCAFsC;AAGvD,QAAA,IAAI,EAAE,QAHiD;AAIvD,QAAA,WAJuD;AAKvD,QAAA,YAAY,EAAE;AALyC,OAAxD;AAOA,WAAK,GAAL,CAAS,wBAAT,EAAmC,KAAnC,EAA0C;AACzC,QAAA,IAAI,EAAE,QADmC;AAEzC,QAAA,WAFyC;AAGzC,QAAA,YAAY,EAAE;AAH2B,OAA1C;AAKA,WAAK,GAAL,CAAS,uBAAT,EAAkC,GAAlC,EAAuC;AACtC,QAAA,IAAI,EAAE,KADgC;AAEtC,QAAA;AAFsC,OAAvC;AAKA,WAAK,GAAL,CAAS,wBAAT,EAAmC,IAAnC,EAAyC;AACxC,QAAA,IAAI,EAAE,KADkC;AAExC,QAAA;AAFwC,OAAzC;AAIA,KArCD;AAuCA,SAAK,OAAL,CAAa,6BAAb,EAA4C,YAAA;AAC3C,YAAM,gBAAgB,GAAG,CAAC,WAAD,EAAc;AAAE,QAAA,GAAG,EAAE,0BAAP;AAAmC,QAAA,KAAK,EAAE;AAA1C,OAAd,CAAzB;AAEA,WAAK,GAAL,CAAS,0BAAT,EAAqC,KAArC,EAA4C;AAAE,QAAA,IAAI,EAAE,SAAR;AAAmB,QAAA;AAAnB,OAA5C;AACA,WAAK,GAAL,CAAS,+BAAT,EAA0C,oBAA1C,EAAgE;AAC/D,QAAA,IAAI,EAAE,QADyD;AAE/D,QAAA,WAAW,EAAE;AAFkD,OAAhE;AAIA,WAAK,GAAL,CAAS,sCAAT,EAAiD,IAAjD,EAAuD;AACtD,QAAA,IAAI,EAAE,QADgD;AAEtD,QAAA,WAAW,EAAE;AAFyC,OAAvD;AAIA,WAAK,GAAL,CAAS,0CAAT,EAAqD,cAArD,EAAqE;AACpE,QAAA,IAAI,EAAE,QAD8D;AAEpE,QAAA,WAAW,EAAE;AAFuD,OAArE;AAIA,WAAK,GAAL,CAAS,uCAAT,EAAkD,EAAlD,EAAsD;AACrD,QAAA,IAAI,EAAE,QAD+C;AAErD,QAAA,WAAW,EAAE;AAFwC,OAAtD;AAIA,WAAK,GAAL,CAAS,8BAAT,EAAyC,aAAzC,EAAwD;AACvD,QAAA,IAAI,EAAE,QADiD;AAEvD,QAAA,WAAW,EAAE;AAF0C,OAAxD;AAIA,KAxBD;AAyBA,GAnED;AAqEA,OAAK,IAAL,CAAU;AAAE,IAAA,GAAG,EAAE;AAAP,GAAV,EAAoC,YAAA;AACnC,SAAK,GAAL,CAAS,8BAAT,EAAyC,mEAAzC,EAA8G;AAC7G,MAAA,IAAI,EAAE,QADuG;AAE7G,MAAA;AAF6G,KAA9G;AAKA,SAAK,GAAL,CAAS,2BAAT,EAAsC,KAAtC,EAA6C;AAC5C,MAAA,IAAI,EAAE,SADsC;AAE5C,MAAA;AAF4C,KAA7C;AAKA,SAAK,GAAL,CAAS,2BAAT,EAAsC,IAAtC,EAA4C;AAC3C,MAAA,IAAI,EAAE,SADqC;AAE3C,MAAA;AAF2C,KAA5C;AAKA,SAAK,GAAL,CAAS,qBAAT,EAAgC,EAAhC,EAAoC;AACnC,MAAA,IAAI,EAAE,QAD6B;AAEnC,MAAA;AAFmC,KAApC;AAKA,SAAK,OAAL,CAAa,uBAAb,EAAsC,YAAA;AACrC,WAAK,GAAL,CAAS,wBAAT,EAAmC,gBAAnC,EAAqD;AACpD,QAAA,IAAI,EAAE,QAD8C;AAEpD,QAAA,WAFoD;AAGpD,QAAA,SAAS,EAAE,qBAHyC;AAIpD,QAAA,eAAe,EAAE,iCAJmC;AAKpD,QAAA,YAAY,EAAE;AALsC,OAArD;AAQA,WAAK,GAAL,CAAS,qBAAT,EAAgC,KAAhC,EAAuC;AACtC,QAAA,IAAI,EAAE,QADgC;AAEtC,QAAA,WAFsC;AAGtC,QAAA,YAAY,EAAE;AAHwB,OAAvC;AAMA,WAAK,GAAL,CAAS,qBAAT,EAAgC,MAAhC,EAAwC;AACvC,QAAA,SAAS,EAAE,kBAD4B;AAEvC,QAAA,eAAe,EAAE,8BAFsB;AAGvC,QAAA,IAAI,EAAE,QAHiC;AAIvC,QAAA,WAJuC;AAKvC,QAAA,YAAY,EAAE;AALyB,OAAxC;AAQA,WAAK,GAAL,CAAS,kBAAT,EAA6B,MAA7B,EAAqC;AACpC,QAAA,IAAI,EAAE,QAD8B;AAEpC,QAAA,WAFoC;AAGpC,QAAA,YAAY,EAAE;AAHsB,OAArC;AAMA,WAAK,GAAL,CAAS,oBAAT,EAA+B,IAA/B,EAAqC;AACpC,QAAA,SAAS,EAAE,iBADyB;AAEpC,QAAA,eAAe,EAAE,6BAFmB;AAGpC,QAAA,IAAI,EAAE,QAH8B;AAIpC,QAAA,WAJoC;AAKpC,QAAA,YAAY,EAAE;AALsB,OAArC;AAQA,WAAK,GAAL,CAAS,iBAAT,EAA4B,IAA5B,EAAkC;AACjC,QAAA,IAAI,EAAE,QAD2B;AAEjC,QAAA,WAFiC;AAGjC,QAAA,YAAY,EAAE;AAHmB,OAAlC;AAKA,KA1CD;AA4CA,SAAK,OAAL,CAAa,sBAAb,EAAqC,YAAA;AACpC,WAAK,GAAL,CAAS,uBAAT,EAAkC,IAAlC,EAAwC;AACvC,QAAA,IAAI,EAAE,SADiC;AAEvC,QAAA;AAFuC,OAAxC;AAKA,WAAK,GAAL,CAAS,mBAAT,EAA8B,EAA9B,EAAkC;AACjC,QAAA,IAAI,EAAE,QAD2B;AAEjC,QAAA;AAFiC,OAAlC;AAIA,KAVD;AAWA,GA5ED;AA6EA,CAzND","sourcesContent":["import { settingsRegistry } from '../../app/settings/server';\n\nsettingsRegistry.addGroup('LDAP', function () {\n\tconst enableQuery = { _id: 'LDAP_Enable', value: true };\n\tconst adOnly = { _id: 'LDAP_Server_Type', value: 'ad' };\n\tconst ldapOnly = { _id: 'LDAP_Server_Type', value: '' };\n\n\tthis.with({ tab: 'LDAP_Connection' }, function () {\n\t\tthis.add('LDAP_Enable', false, { type: 'boolean', public: true });\n\n\t\tthis.add('LDAP_Server_Type', 'ad', {\n\t\t\ttype: 'select',\n\t\t\tpublic: true,\n\t\t\tenableQuery,\n\t\t\tvalues: [\n\t\t\t\t{ key: 'ad', i18nLabel: 'LDAP_Server_Type_AD' },\n\t\t\t\t{ key: '', i18nLabel: 'LDAP_Server_Type_Other' },\n\t\t\t],\n\t\t});\n\n\t\tthis.add('LDAP_Host', '', { type: 'string', enableQuery });\n\t\tthis.add('LDAP_Port', '389', { type: 'int', enableQuery });\n\t\tthis.add('LDAP_Reconnect', false, { type: 'boolean', enableQuery });\n\n\t\tthis.add('LDAP_Login_Fallback', false, { type: 'boolean', enableQuery });\n\n\t\tthis.section('LDAP_Connection_Authentication', function () {\n\t\t\tconst enableAuthentication = [enableQuery, { _id: 'LDAP_Authentication', value: true }];\n\n\t\t\tthis.add('LDAP_Authentication', false, { type: 'boolean', enableQuery, invalidValue: false });\n\t\t\tthis.add('LDAP_Authentication_UserDN', '', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery: enableAuthentication,\n\t\t\t\tsecret: true,\n\t\t\t\tinvalidValue: '',\n\t\t\t});\n\t\t\tthis.add('LDAP_Authentication_Password', '', {\n\t\t\t\ttype: 'password',\n\t\t\t\tenableQuery: enableAuthentication,\n\t\t\t\tsecret: true,\n\t\t\t\tinvalidValue: '',\n\t\t\t});\n\t\t});\n\n\t\tthis.section('LDAP_Connection_Encryption', function () {\n\t\t\tthis.add('LDAP_Encryption', 'plain', {\n\t\t\t\ttype: 'select',\n\t\t\t\tvalues: [\n\t\t\t\t\t{ key: 'plain', i18nLabel: 'No_Encryption' },\n\t\t\t\t\t{ key: 'tls', i18nLabel: 'StartTLS' },\n\t\t\t\t\t{ key: 'ssl', i18nLabel: 'SSL/LDAPS' },\n\t\t\t\t],\n\t\t\t\tenableQuery,\n\t\t\t});\n\n\t\t\tconst enableTLSQuery = [enableQuery, { _id: 'LDAP_Encryption', value: { $in: ['tls', 'ssl'] } }];\n\n\t\t\tthis.add('LDAP_CA_Cert', '', {\n\t\t\t\ttype: 'string',\n\t\t\t\tmultiline: true,\n\t\t\t\tenableQuery: enableTLSQuery,\n\t\t\t\tsecret: true,\n\t\t\t});\n\t\t\tthis.add('LDAP_Reject_Unauthorized', true, { type: 'boolean', enableQuery: enableTLSQuery });\n\t\t});\n\n\t\tthis.section('LDAP_Connection_Timeouts', function () {\n\t\t\tthis.add('LDAP_Timeout', 60000, { type: 'int', enableQuery });\n\t\t\tthis.add('LDAP_Connect_Timeout', 1000, { type: 'int', enableQuery });\n\t\t\tthis.add('LDAP_Idle_Timeout', 1000, { type: 'int', enableQuery });\n\t\t});\n\t});\n\n\tthis.with({ tab: 'LDAP_UserSearch' }, function () {\n\t\tthis.add('LDAP_Find_User_After_Login', true, { type: 'boolean', enableQuery });\n\n\t\tthis.section('LDAP_UserSearch_Filter', function () {\n\t\t\tthis.add('LDAP_BaseDN', '', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t});\n\n\t\t\tthis.add('LDAP_User_Search_Filter', '(objectclass=*)', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t});\n\n\t\t\tthis.add('LDAP_User_Search_Scope', 'sub', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t});\n\n\t\t\tthis.add('LDAP_AD_User_Search_Field', 'sAMAccountName', {\n\t\t\t\ti18nLabel: 'LDAP_User_Search_Field',\n\t\t\t\ti18nDescription: 'LDAP_User_Search_Field_Description',\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t\tdisplayQuery: adOnly,\n\t\t\t});\n\t\t\tthis.add('LDAP_User_Search_Field', 'uid', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t\tdisplayQuery: ldapOnly,\n\t\t\t});\n\t\t\tthis.add('LDAP_Search_Page_Size', 250, {\n\t\t\t\ttype: 'int',\n\t\t\t\tenableQuery,\n\t\t\t});\n\n\t\t\tthis.add('LDAP_Search_Size_Limit', 1000, {\n\t\t\t\ttype: 'int',\n\t\t\t\tenableQuery,\n\t\t\t});\n\t\t});\n\n\t\tthis.section('LDAP_UserSearch_GroupFilter', function () {\n\t\t\tconst groupFilterQuery = [enableQuery, { _id: 'LDAP_Group_Filter_Enable', value: true }];\n\n\t\t\tthis.add('LDAP_Group_Filter_Enable', false, { type: 'boolean', enableQuery });\n\t\t\tthis.add('LDAP_Group_Filter_ObjectClass', 'groupOfUniqueNames', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery: groupFilterQuery,\n\t\t\t});\n\t\t\tthis.add('LDAP_Group_Filter_Group_Id_Attribute', 'cn', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery: groupFilterQuery,\n\t\t\t});\n\t\t\tthis.add('LDAP_Group_Filter_Group_Member_Attribute', 'uniqueMember', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery: groupFilterQuery,\n\t\t\t});\n\t\t\tthis.add('LDAP_Group_Filter_Group_Member_Format', '', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery: groupFilterQuery,\n\t\t\t});\n\t\t\tthis.add('LDAP_Group_Filter_Group_Name', 'ROCKET_CHAT', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery: groupFilterQuery,\n\t\t\t});\n\t\t});\n\t});\n\n\tthis.with({ tab: 'LDAP_DataSync' }, function () {\n\t\tthis.add('LDAP_Unique_Identifier_Field', 'objectGUID,ibm-entryUUID,GUID,dominoUNID,nsuniqueId,uidNumber,uid', {\n\t\t\ttype: 'string',\n\t\t\tenableQuery,\n\t\t});\n\n\t\tthis.add('LDAP_Merge_Existing_Users', false, {\n\t\t\ttype: 'boolean',\n\t\t\tenableQuery,\n\t\t});\n\n\t\tthis.add('LDAP_Update_Data_On_Login', true, {\n\t\t\ttype: 'boolean',\n\t\t\tenableQuery,\n\t\t});\n\n\t\tthis.add('LDAP_Default_Domain', '', {\n\t\t\ttype: 'string',\n\t\t\tenableQuery,\n\t\t});\n\n\t\tthis.section('LDAP_DataSync_DataMap', function () {\n\t\t\tthis.add('LDAP_AD_Username_Field', 'sAMAccountName', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t\ti18nLabel: 'LDAP_Username_Field',\n\t\t\t\ti18nDescription: 'LDAP_Username_Field_Description',\n\t\t\t\tdisplayQuery: adOnly,\n\t\t\t});\n\n\t\t\tthis.add('LDAP_Username_Field', 'uid', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t\tdisplayQuery: ldapOnly,\n\t\t\t});\n\n\t\t\tthis.add('LDAP_AD_Email_Field', 'mail', {\n\t\t\t\ti18nLabel: 'LDAP_Email_Field',\n\t\t\t\ti18nDescription: 'LDAP_Email_Field_Description',\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t\tdisplayQuery: adOnly,\n\t\t\t});\n\n\t\t\tthis.add('LDAP_Email_Field', 'mail', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t\tdisplayQuery: ldapOnly,\n\t\t\t});\n\n\t\t\tthis.add('LDAP_AD_Name_Field', 'cn', {\n\t\t\t\ti18nLabel: 'LDAP_Name_Field',\n\t\t\t\ti18nDescription: 'LDAP_Name_Field_Description',\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t\tdisplayQuery: adOnly,\n\t\t\t});\n\n\t\t\tthis.add('LDAP_Name_Field', 'cn', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t\tdisplayQuery: ldapOnly,\n\t\t\t});\n\t\t});\n\n\t\tthis.section('LDAP_DataSync_Avatar', function () {\n\t\t\tthis.add('LDAP_Sync_User_Avatar', true, {\n\t\t\t\ttype: 'boolean',\n\t\t\t\tenableQuery,\n\t\t\t});\n\n\t\t\tthis.add('LDAP_Avatar_Field', '', {\n\t\t\t\ttype: 'string',\n\t\t\t\tenableQuery,\n\t\t\t});\n\t\t});\n\t});\n});\n"],"sourceRoot":""},"sourceType":"module","hash":"067920cd89accf66577fcae69b1afa25f979c93f"}
