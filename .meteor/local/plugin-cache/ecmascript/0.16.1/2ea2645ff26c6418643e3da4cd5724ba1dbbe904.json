{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/ee/app/api-enterprise/server/canned-responses.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.arm64"},"sourceFileName":"ee/app/api-enterprise/server/canned-responses.js","filename":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/ee/app/api-enterprise/server/canned-responses.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/amangupta/Documents/Open-Source/Rocket.Chat","root":"/Users/amangupta/Documents/Open-Source/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/ee/app/api-enterprise/server/canned-responses.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"ee/app/api-enterprise/server/canned-responses.js"}},"code":"let _objectSpread;\n\nmodule.link(\"@babel/runtime/helpers/objectSpread2\", {\n  default(v) {\n    _objectSpread = v;\n  }\n\n}, 0);\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet Match, check;\nmodule.link(\"meteor/check\", {\n  Match(v) {\n    Match = v;\n  },\n\n  check(v) {\n    check = v;\n  }\n\n}, 1);\nlet API;\nmodule.link(\"../../../../app/api/server\", {\n  API(v) {\n    API = v;\n  }\n\n}, 2);\nlet findAllCannedResponses, findAllCannedResponsesFilter, findOneCannedResponse;\nmodule.link(\"./lib/canned-responses\", {\n  findAllCannedResponses(v) {\n    findAllCannedResponses = v;\n  },\n\n  findAllCannedResponsesFilter(v) {\n    findAllCannedResponsesFilter = v;\n  },\n\n  findOneCannedResponse(v) {\n    findOneCannedResponse = v;\n  }\n\n}, 3);\nAPI.v1.addRoute('canned-responses.get', {\n  authRequired: true\n}, {\n  get() {\n    return API.v1.success({\n      responses: Promise.await(findAllCannedResponses({\n        userId: this.userId\n      }))\n    });\n  }\n\n});\nAPI.v1.addRoute('canned-responses', {\n  authRequired: true\n}, {\n  get() {\n    const {\n      offset,\n      count\n    } = this.getPaginationItems();\n    const {\n      sort,\n      fields\n    } = this.parseJsonQuery();\n    const {\n      shortcut,\n      text,\n      scope,\n      tags,\n      departmentId,\n      createdBy\n    } = this.requestParams();\n    check(shortcut, Match.Maybe(String));\n    check(text, Match.Maybe(String));\n    check(tags, Match.Maybe([String]));\n    const {\n      cannedResponses,\n      total\n    } = Promise.await(findAllCannedResponsesFilter({\n      shortcut,\n      text,\n      scope,\n      tags,\n      departmentId,\n      userId: this.userId,\n      createdBy,\n      options: {\n        sort,\n        offset,\n        count,\n        fields\n      }\n    }));\n    return API.v1.success({\n      cannedResponses,\n      count: cannedResponses.length,\n      offset,\n      total\n    });\n  },\n\n  post() {\n    check(this.bodyParams, {\n      _id: Match.Maybe(String),\n      shortcut: String,\n      text: String,\n      scope: String,\n      tags: Match.Maybe([String]),\n      departmentId: Match.Maybe(String)\n    });\n    const {\n      _id,\n      shortcut,\n      text,\n      scope,\n      departmentId,\n      tags\n    } = this.bodyParams;\n    Meteor.runAsUser(this.userId, () => {\n      Meteor.call('saveCannedResponse', _id, _objectSpread(_objectSpread({\n        shortcut,\n        text,\n        scope\n      }, tags && {\n        tags\n      }), departmentId && {\n        departmentId\n      }));\n    });\n    return API.v1.success();\n  },\n\n  delete() {\n    const {\n      _id\n    } = this.requestParams();\n    check(_id, String);\n    Meteor.runAsUser(this.userId, () => {\n      Meteor.call('removeCannedResponse', _id);\n    });\n    return API.v1.success();\n  }\n\n});\nAPI.v1.addRoute('canned-responses/:_id', {\n  authRequired: true\n}, {\n  get() {\n    const {\n      _id\n    } = this.urlParams;\n    check(_id, String);\n    const cannedResponse = Promise.await(findOneCannedResponse({\n      userId: this.userId,\n      _id\n    }));\n    return API.v1.success({\n      cannedResponse\n    });\n  }\n\n});","map":{"version":3,"sources":["ee/app/api-enterprise/server/canned-responses.js"],"names":["_objectSpread","module","link","default","v","Meteor","Match","check","API","findAllCannedResponses","findAllCannedResponsesFilter","findOneCannedResponse","v1","addRoute","authRequired","get","success","responses","Promise","await","userId","offset","count","getPaginationItems","sort","fields","parseJsonQuery","shortcut","text","scope","tags","departmentId","createdBy","requestParams","Maybe","String","cannedResponses","total","options","length","post","bodyParams","_id","runAsUser","call","delete","urlParams","cannedResponse"],"mappings":"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","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { Match, check } from 'meteor/check';\n\nimport { API } from '../../../../app/api/server';\nimport { findAllCannedResponses, findAllCannedResponsesFilter, findOneCannedResponse } from './lib/canned-responses';\n\nAPI.v1.addRoute(\n\t'canned-responses.get',\n\t{ authRequired: true },\n\t{\n\t\tget() {\n\t\t\treturn API.v1.success({\n\t\t\t\tresponses: Promise.await(findAllCannedResponses({ userId: this.userId })),\n\t\t\t});\n\t\t},\n\t},\n);\n\nAPI.v1.addRoute(\n\t'canned-responses',\n\t{ authRequired: true },\n\t{\n\t\tget() {\n\t\t\tconst { offset, count } = this.getPaginationItems();\n\t\t\tconst { sort, fields } = this.parseJsonQuery();\n\t\t\tconst { shortcut, text, scope, tags, departmentId, createdBy } = this.requestParams();\n\t\t\tcheck(shortcut, Match.Maybe(String));\n\t\t\tcheck(text, Match.Maybe(String));\n\t\t\tcheck(tags, Match.Maybe([String]));\n\t\t\tconst { cannedResponses, total } = Promise.await(\n\t\t\t\tfindAllCannedResponsesFilter({\n\t\t\t\t\tshortcut,\n\t\t\t\t\ttext,\n\t\t\t\t\tscope,\n\t\t\t\t\ttags,\n\t\t\t\t\tdepartmentId,\n\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\tcreatedBy,\n\t\t\t\t\toptions: {\n\t\t\t\t\t\tsort,\n\t\t\t\t\t\toffset,\n\t\t\t\t\t\tcount,\n\t\t\t\t\t\tfields,\n\t\t\t\t\t},\n\t\t\t\t}),\n\t\t\t);\n\t\t\treturn API.v1.success({\n\t\t\t\tcannedResponses,\n\t\t\t\tcount: cannedResponses.length,\n\t\t\t\toffset,\n\t\t\t\ttotal,\n\t\t\t});\n\t\t},\n\t\tpost() {\n\t\t\tcheck(this.bodyParams, {\n\t\t\t\t_id: Match.Maybe(String),\n\t\t\t\tshortcut: String,\n\t\t\t\ttext: String,\n\t\t\t\tscope: String,\n\t\t\t\ttags: Match.Maybe([String]),\n\t\t\t\tdepartmentId: Match.Maybe(String),\n\t\t\t});\n\t\t\tconst { _id, shortcut, text, scope, departmentId, tags } = this.bodyParams;\n\t\t\tMeteor.runAsUser(this.userId, () => {\n\t\t\t\tMeteor.call('saveCannedResponse', _id, {\n\t\t\t\t\tshortcut,\n\t\t\t\t\ttext,\n\t\t\t\t\tscope,\n\t\t\t\t\t...(tags && { tags }),\n\t\t\t\t\t...(departmentId && { departmentId }),\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn API.v1.success();\n\t\t},\n\t\tdelete() {\n\t\t\tconst { _id } = this.requestParams();\n\t\t\tcheck(_id, String);\n\t\t\tMeteor.runAsUser(this.userId, () => {\n\t\t\t\tMeteor.call('removeCannedResponse', _id);\n\t\t\t});\n\t\t\treturn API.v1.success();\n\t\t},\n\t},\n);\n\nAPI.v1.addRoute(\n\t'canned-responses/:_id',\n\t{ authRequired: true },\n\t{\n\t\tget() {\n\t\t\tconst { _id } = this.urlParams;\n\t\t\tcheck(_id, String);\n\n\t\t\tconst cannedResponse = Promise.await(\n\t\t\t\tfindOneCannedResponse({\n\t\t\t\t\tuserId: this.userId,\n\t\t\t\t\t_id,\n\t\t\t\t}),\n\t\t\t);\n\n\t\t\treturn API.v1.success({ cannedResponse });\n\t\t},\n\t},\n);\n"]},"sourceType":"module","hash":"2ea2645ff26c6418643e3da4cd5724ba1dbbe904"}
