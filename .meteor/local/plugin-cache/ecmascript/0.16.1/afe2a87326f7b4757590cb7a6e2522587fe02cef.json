{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/app/ui-utils/client/lib/SideNav.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"app/ui-utils/client/lib/SideNav.js","filename":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/app/ui-utils/client/lib/SideNav.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/amangupta/Documents/Open-Source/Rocket.Chat","root":"/Users/amangupta/Documents/Open-Source/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/app/ui-utils/client/lib/SideNav.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/ui-utils/client/lib/SideNav.js"}},"code":"module.export({\n  SideNav: function () {\n    return SideNav;\n  }\n});\nvar FlowRouter;\nmodule.link(\"meteor/kadira:flow-router\", {\n  FlowRouter: function (v) {\n    FlowRouter = v;\n  }\n}, 0);\nvar Session;\nmodule.link(\"meteor/session\", {\n  Session: function (v) {\n    Session = v;\n  }\n}, 1);\nvar AccountBox;\nmodule.link(\"./AccountBox\", {\n  AccountBox: function (v) {\n    AccountBox = v;\n  }\n}, 2);\nvar roomTypes;\nmodule.link(\"../../../utils/client/lib/roomTypes\", {\n  roomTypes: function (v) {\n    roomTypes = v;\n  }\n}, 3);\nvar Subscriptions;\nmodule.link(\"../../../models\", {\n  Subscriptions: function (v) {\n    Subscriptions = v;\n  }\n}, 4);\nvar RoomManager;\nmodule.link(\"../../../../client/lib/RoomManager\", {\n  RoomManager: function (v) {\n    RoomManager = v;\n  }\n}, 5);\nvar SideNav = new ( /*#__PURE__*/function () {\n  function _class() {\n    this.initiated = false;\n    this.sideNav = {};\n    this.flexNav = {};\n    this.animating = false;\n    this.openQueue = [];\n  }\n\n  var _proto = _class.prototype;\n\n  _proto.toggleFlex = function () {\n    function toggleFlex(status, callback) {\n      var _this = this;\n\n      if (this.animating === true) {\n        return;\n      }\n\n      this.animating = true;\n\n      if (status === -1 || status !== 1 && this.flexNav.opened) {\n        this.flexNav.opened = false;\n        this.flexNav.addClass('animated-hidden');\n      } else {\n        this.flexNav.opened = true;\n\n        if (window.DISABLE_ANIMATION === true) {\n          this.flexNav.removeClass('animated-hidden');\n        } else {\n          setTimeout(function () {\n            return _this.flexNav.removeClass('animated-hidden');\n          }, 50);\n        }\n      }\n\n      if (window.DISABLE_ANIMATION === true) {\n        !this.flexNav.opened && this.setFlex();\n        this.animating = false;\n        return typeof callback === 'function' && callback();\n      }\n\n      return setTimeout(function () {\n        !_this.flexNav.opened && _this.setFlex();\n        _this.animating = false;\n        return typeof callback === 'function' && callback();\n      }, 500);\n    }\n\n    return toggleFlex;\n  }();\n\n  _proto.closeFlex = function () {\n    function closeFlex() {\n      var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n      var routesNamesForRooms = roomTypes.getTypes().filter(function (i) {\n        return i.route;\n      }).map(function (i) {\n        return i.route.name;\n      });\n\n      if (!routesNamesForRooms.includes(FlowRouter.current().route.name)) {\n        var subscription = Subscriptions.findOne({\n          rid: RoomManager.lastRid\n        });\n\n        if (subscription) {\n          roomTypes.openRouteLink(subscription.t, subscription, FlowRouter.current().queryParams);\n        } else {\n          FlowRouter.go('home');\n        }\n      }\n\n      if (this.animating === true) {\n        return;\n      }\n\n      this.toggleFlex(-1, callback);\n    }\n\n    return closeFlex;\n  }();\n\n  _proto.flexStatus = function () {\n    function flexStatus() {\n      return this.flexNav.opened;\n    }\n\n    return flexStatus;\n  }();\n\n  _proto.setFlex = function () {\n    function setFlex(template) {\n      var data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      Session.set('flex-nav-template', template);\n      return Session.set('flex-nav-data', data);\n    }\n\n    return setFlex;\n  }();\n\n  _proto.getFlex = function () {\n    function getFlex() {\n      return {\n        template: Session.get('flex-nav-template'),\n        data: Session.get('flex-nav-data')\n      };\n    }\n\n    return getFlex;\n  }();\n\n  _proto.toggleCurrent = function () {\n    function toggleCurrent() {\n      if (this.flexNav && this.flexNav.opened) {\n        return this.closeFlex();\n      }\n\n      return AccountBox.toggle();\n    }\n\n    return toggleCurrent;\n  }();\n\n  _proto.validate = function () {\n    function validate() {\n      var invalid = [];\n      this.sideNav.find('input.required').each(function () {\n        if (!this.value.length) {\n          return invalid.push($(this).prev('label').html());\n        }\n      });\n\n      if (invalid.length) {\n        return invalid;\n      }\n\n      return false;\n    }\n\n    return validate;\n  }();\n\n  _proto.openFlex = function () {\n    function openFlex() {\n      var callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : function () {};\n\n      if (!this.initiated) {\n        return this.openQueue.push({\n          config: this.getFlex(),\n          callback: callback\n        });\n      }\n\n      if (this.animating === true) {\n        return;\n      }\n\n      this.toggleFlex(1, callback);\n    }\n\n    return openFlex;\n  }();\n\n  _proto.init = function () {\n    function init() {\n      var _this2 = this;\n\n      this.sideNav = $('.sidebar');\n      this.flexNav = this.sideNav.find('.flex-nav');\n      this.setFlex('');\n      this.initiated = true;\n\n      if (this.openQueue.length > 0) {\n        this.openQueue.forEach(function (item) {\n          _this2.setFlex(item.config.template, item.config.data);\n\n          return _this2.openFlex(item.callback);\n        });\n        this.openQueue = [];\n      }\n    }\n\n    return init;\n  }();\n\n  return _class;\n}())();","map":{"version":3,"sources":["app/ui-utils/client/lib/SideNav.js"],"names":["module","export","SideNav","FlowRouter","link","v","Session","AccountBox","roomTypes","Subscriptions","RoomManager","initiated","sideNav","flexNav","animating","openQueue","toggleFlex","status","callback","opened","addClass","window","DISABLE_ANIMATION","removeClass","setTimeout","setFlex","closeFlex","routesNamesForRooms","getTypes","filter","i","route","map","name","includes","current","subscription","findOne","rid","lastRid","openRouteLink","t","queryParams","go","flexStatus","template","data","set","getFlex","get","toggleCurrent","toggle","validate","invalid","find","each","value","length","push","$","prev","html","openFlex","config","init","forEach","item"],"mappings":"AAAAA,MAAM,CAACC,MAAP,CAAc;AAACC,EAAAA,OAAO,EAAC,YAAU;AAAC,WAAOA,OAAP;AAAe;AAAnC,CAAd;AAAoD,IAAIC,UAAJ;AAAeH,MAAM,CAACI,IAAP,CAAY,2BAAZ,EAAwC;AAACD,EAAAA,UAAU,EAAC,UAASE,CAAT,EAAW;AAACF,IAAAA,UAAU,GAACE,CAAX;AAAa;AAArC,CAAxC,EAA+E,CAA/E;AAAkF,IAAIC,OAAJ;AAAYN,MAAM,CAACI,IAAP,CAAY,gBAAZ,EAA6B;AAACE,EAAAA,OAAO,EAAC,UAASD,CAAT,EAAW;AAACC,IAAAA,OAAO,GAACD,CAAR;AAAU;AAA/B,CAA7B,EAA8D,CAA9D;AAAiE,IAAIE,UAAJ;AAAeP,MAAM,CAACI,IAAP,CAAY,cAAZ,EAA2B;AAACG,EAAAA,UAAU,EAAC,UAASF,CAAT,EAAW;AAACE,IAAAA,UAAU,GAACF,CAAX;AAAa;AAArC,CAA3B,EAAkE,CAAlE;AAAqE,IAAIG,SAAJ;AAAcR,MAAM,CAACI,IAAP,CAAY,qCAAZ,EAAkD;AAACI,EAAAA,SAAS,EAAC,UAASH,CAAT,EAAW;AAACG,IAAAA,SAAS,GAACH,CAAV;AAAY;AAAnC,CAAlD,EAAuF,CAAvF;AAA0F,IAAII,aAAJ;AAAkBT,MAAM,CAACI,IAAP,CAAY,iBAAZ,EAA8B;AAACK,EAAAA,aAAa,EAAC,UAASJ,CAAT,EAAW;AAACI,IAAAA,aAAa,GAACJ,CAAd;AAAgB;AAA3C,CAA9B,EAA2E,CAA3E;AAA8E,IAAIK,WAAJ;AAAgBV,MAAM,CAACI,IAAP,CAAY,oCAAZ,EAAiD;AAACM,EAAAA,WAAW,EAAC,UAASL,CAAT,EAAW;AAACK,IAAAA,WAAW,GAACL,CAAZ;AAAc;AAAvC,CAAjD,EAA0F,CAA1F;AAQvgB,IAAMH,OAAO,GAAG;AACtB,oBAAc;AACb,SAAKS,SAAL,GAAiB,KAAjB;AACA,SAAKC,OAAL,GAAe,EAAf;AACA,SAAKC,OAAL,GAAe,EAAf;AACA,SAAKC,SAAL,GAAiB,KAAjB;AACA,SAAKC,SAAL,GAAiB,EAAjB;AACA;;AAPqB;;AAAA,SAStBC,UATsB;AAStB,wBAAWC,MAAX,EAAmBC,QAAnB,EAA6B;AAAA;;AAC5B,UAAI,KAAKJ,SAAL,KAAmB,IAAvB,EAA6B;AAC5B;AACA;;AACD,WAAKA,SAAL,GAAiB,IAAjB;;AACA,UAAIG,MAAM,KAAK,CAAC,CAAZ,IAAkBA,MAAM,KAAK,CAAX,IAAgB,KAAKJ,OAAL,CAAaM,MAAnD,EAA4D;AAC3D,aAAKN,OAAL,CAAaM,MAAb,GAAsB,KAAtB;AACA,aAAKN,OAAL,CAAaO,QAAb,CAAsB,iBAAtB;AACA,OAHD,MAGO;AACN,aAAKP,OAAL,CAAaM,MAAb,GAAsB,IAAtB;;AACA,YAAIE,MAAM,CAACC,iBAAP,KAA6B,IAAjC,EAAuC;AACtC,eAAKT,OAAL,CAAaU,WAAb,CAAyB,iBAAzB;AACA,SAFD,MAEO;AACNC,UAAAA,UAAU,CAAC;AAAA,mBAAM,KAAI,CAACX,OAAL,CAAaU,WAAb,CAAyB,iBAAzB,CAAN;AAAA,WAAD,EAAoD,EAApD,CAAV;AACA;AACD;;AAED,UAAIF,MAAM,CAACC,iBAAP,KAA6B,IAAjC,EAAuC;AACtC,SAAC,KAAKT,OAAL,CAAaM,MAAd,IAAwB,KAAKM,OAAL,EAAxB;AACA,aAAKX,SAAL,GAAiB,KAAjB;AACA,eAAO,OAAOI,QAAP,KAAoB,UAApB,IAAkCA,QAAQ,EAAjD;AACA;;AAED,aAAOM,UAAU,CAAC,YAAM;AACvB,SAAC,KAAI,CAACX,OAAL,CAAaM,MAAd,IAAwB,KAAI,CAACM,OAAL,EAAxB;AACA,QAAA,KAAI,CAACX,SAAL,GAAiB,KAAjB;AACA,eAAO,OAAOI,QAAP,KAAoB,UAApB,IAAkCA,QAAQ,EAAjD;AACA,OAJgB,EAId,GAJc,CAAjB;AAKA;;AArCqB;AAAA;;AAAA,SAuCtBQ,SAvCsB;AAuCtB,yBAA2B;AAAA,UAAjBR,QAAiB,uEAAN,IAAM;AAC1B,UAAMS,mBAAmB,GAAGnB,SAAS,CACnCoB,QAD0B,GAE1BC,MAF0B,CAEnB,UAACC,CAAD;AAAA,eAAOA,CAAC,CAACC,KAAT;AAAA,OAFmB,EAG1BC,GAH0B,CAGtB,UAACF,CAAD;AAAA,eAAOA,CAAC,CAACC,KAAF,CAAQE,IAAf;AAAA,OAHsB,CAA5B;;AAIA,UAAI,CAACN,mBAAmB,CAACO,QAApB,CAA6B/B,UAAU,CAACgC,OAAX,GAAqBJ,KAArB,CAA2BE,IAAxD,CAAL,EAAoE;AACnE,YAAMG,YAAY,GAAG3B,aAAa,CAAC4B,OAAd,CAAsB;AAAEC,UAAAA,GAAG,EAAE5B,WAAW,CAAC6B;AAAnB,SAAtB,CAArB;;AACA,YAAIH,YAAJ,EAAkB;AACjB5B,UAAAA,SAAS,CAACgC,aAAV,CAAwBJ,YAAY,CAACK,CAArC,EAAwCL,YAAxC,EAAsDjC,UAAU,CAACgC,OAAX,GAAqBO,WAA3E;AACA,SAFD,MAEO;AACNvC,UAAAA,UAAU,CAACwC,EAAX,CAAc,MAAd;AACA;AACD;;AACD,UAAI,KAAK7B,SAAL,KAAmB,IAAvB,EAA6B;AAC5B;AACA;;AACD,WAAKE,UAAL,CAAgB,CAAC,CAAjB,EAAoBE,QAApB;AACA;;AAxDqB;AAAA;;AAAA,SA0DtB0B,UA1DsB;AA0DtB,0BAAa;AACZ,aAAO,KAAK/B,OAAL,CAAaM,MAApB;AACA;;AA5DqB;AAAA;;AAAA,SA8DtBM,OA9DsB;AA8DtB,qBAAQoB,QAAR,EAA6B;AAAA,UAAXC,IAAW,uEAAJ,EAAI;AAC5BxC,MAAAA,OAAO,CAACyC,GAAR,CAAY,mBAAZ,EAAiCF,QAAjC;AACA,aAAOvC,OAAO,CAACyC,GAAR,CAAY,eAAZ,EAA6BD,IAA7B,CAAP;AACA;;AAjEqB;AAAA;;AAAA,SAmEtBE,OAnEsB;AAmEtB,uBAAU;AACT,aAAO;AACNH,QAAAA,QAAQ,EAAEvC,OAAO,CAAC2C,GAAR,CAAY,mBAAZ,CADJ;AAENH,QAAAA,IAAI,EAAExC,OAAO,CAAC2C,GAAR,CAAY,eAAZ;AAFA,OAAP;AAIA;;AAxEqB;AAAA;;AAAA,SA0EtBC,aA1EsB;AA0EtB,6BAAgB;AACf,UAAI,KAAKrC,OAAL,IAAgB,KAAKA,OAAL,CAAaM,MAAjC,EAAyC;AACxC,eAAO,KAAKO,SAAL,EAAP;AACA;;AACD,aAAOnB,UAAU,CAAC4C,MAAX,EAAP;AACA;;AA/EqB;AAAA;;AAAA,SAiFtBC,QAjFsB;AAiFtB,wBAAW;AACV,UAAMC,OAAO,GAAG,EAAhB;AACA,WAAKzC,OAAL,CAAa0C,IAAb,CAAkB,gBAAlB,EAAoCC,IAApC,CAAyC,YAAY;AACpD,YAAI,CAAC,KAAKC,KAAL,CAAWC,MAAhB,EAAwB;AACvB,iBAAOJ,OAAO,CAACK,IAAR,CAAaC,CAAC,CAAC,IAAD,CAAD,CAAQC,IAAR,CAAa,OAAb,EAAsBC,IAAtB,EAAb,CAAP;AACA;AACD,OAJD;;AAKA,UAAIR,OAAO,CAACI,MAAZ,EAAoB;AACnB,eAAOJ,OAAP;AACA;;AACD,aAAO,KAAP;AACA;;AA5FqB;AAAA;;AAAA,SA8FtBS,QA9FsB;AA8FtB,wBAA8B;AAAA,UAArB5C,QAAqB,uEAAV,YAAM,CAAE,CAAE;;AAC7B,UAAI,CAAC,KAAKP,SAAV,EAAqB;AACpB,eAAO,KAAKI,SAAL,CAAe2C,IAAf,CAAoB;AAC1BK,UAAAA,MAAM,EAAE,KAAKf,OAAL,EADkB;AAE1B9B,UAAAA,QAAQ,EAARA;AAF0B,SAApB,CAAP;AAIA;;AACD,UAAI,KAAKJ,SAAL,KAAmB,IAAvB,EAA6B;AAC5B;AACA;;AACD,WAAKE,UAAL,CAAgB,CAAhB,EAAmBE,QAAnB;AACA;;AAzGqB;AAAA;;AAAA,SA2GtB8C,IA3GsB;AA2GtB,oBAAO;AAAA;;AACN,WAAKpD,OAAL,GAAe+C,CAAC,CAAC,UAAD,CAAhB;AACA,WAAK9C,OAAL,GAAe,KAAKD,OAAL,CAAa0C,IAAb,CAAkB,WAAlB,CAAf;AACA,WAAK7B,OAAL,CAAa,EAAb;AACA,WAAKd,SAAL,GAAiB,IAAjB;;AACA,UAAI,KAAKI,SAAL,CAAe0C,MAAf,GAAwB,CAA5B,EAA+B;AAC9B,aAAK1C,SAAL,CAAekD,OAAf,CAAuB,UAACC,IAAD,EAAU;AAChC,UAAA,MAAI,CAACzC,OAAL,CAAayC,IAAI,CAACH,MAAL,CAAYlB,QAAzB,EAAmCqB,IAAI,CAACH,MAAL,CAAYjB,IAA/C;;AACA,iBAAO,MAAI,CAACgB,QAAL,CAAcI,IAAI,CAAChD,QAAnB,CAAP;AACA,SAHD;AAIA,aAAKH,SAAL,GAAiB,EAAjB;AACA;AACD;;AAvHqB;AAAA;;AAAA;AAAA,MAAhB","sourcesContent":["import { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Session } from 'meteor/session';\n\nimport { AccountBox } from './AccountBox';\nimport { roomTypes } from '../../../utils/client/lib/roomTypes';\nimport { Subscriptions } from '../../../models';\nimport { RoomManager } from '../../../../client/lib/RoomManager';\n\nexport const SideNav = new (class {\n\tconstructor() {\n\t\tthis.initiated = false;\n\t\tthis.sideNav = {};\n\t\tthis.flexNav = {};\n\t\tthis.animating = false;\n\t\tthis.openQueue = [];\n\t}\n\n\ttoggleFlex(status, callback) {\n\t\tif (this.animating === true) {\n\t\t\treturn;\n\t\t}\n\t\tthis.animating = true;\n\t\tif (status === -1 || (status !== 1 && this.flexNav.opened)) {\n\t\t\tthis.flexNav.opened = false;\n\t\t\tthis.flexNav.addClass('animated-hidden');\n\t\t} else {\n\t\t\tthis.flexNav.opened = true;\n\t\t\tif (window.DISABLE_ANIMATION === true) {\n\t\t\t\tthis.flexNav.removeClass('animated-hidden');\n\t\t\t} else {\n\t\t\t\tsetTimeout(() => this.flexNav.removeClass('animated-hidden'), 50);\n\t\t\t}\n\t\t}\n\n\t\tif (window.DISABLE_ANIMATION === true) {\n\t\t\t!this.flexNav.opened && this.setFlex();\n\t\t\tthis.animating = false;\n\t\t\treturn typeof callback === 'function' && callback();\n\t\t}\n\n\t\treturn setTimeout(() => {\n\t\t\t!this.flexNav.opened && this.setFlex();\n\t\t\tthis.animating = false;\n\t\t\treturn typeof callback === 'function' && callback();\n\t\t}, 500);\n\t}\n\n\tcloseFlex(callback = null) {\n\t\tconst routesNamesForRooms = roomTypes\n\t\t\t.getTypes()\n\t\t\t.filter((i) => i.route)\n\t\t\t.map((i) => i.route.name);\n\t\tif (!routesNamesForRooms.includes(FlowRouter.current().route.name)) {\n\t\t\tconst subscription = Subscriptions.findOne({ rid: RoomManager.lastRid });\n\t\t\tif (subscription) {\n\t\t\t\troomTypes.openRouteLink(subscription.t, subscription, FlowRouter.current().queryParams);\n\t\t\t} else {\n\t\t\t\tFlowRouter.go('home');\n\t\t\t}\n\t\t}\n\t\tif (this.animating === true) {\n\t\t\treturn;\n\t\t}\n\t\tthis.toggleFlex(-1, callback);\n\t}\n\n\tflexStatus() {\n\t\treturn this.flexNav.opened;\n\t}\n\n\tsetFlex(template, data = {}) {\n\t\tSession.set('flex-nav-template', template);\n\t\treturn Session.set('flex-nav-data', data);\n\t}\n\n\tgetFlex() {\n\t\treturn {\n\t\t\ttemplate: Session.get('flex-nav-template'),\n\t\t\tdata: Session.get('flex-nav-data'),\n\t\t};\n\t}\n\n\ttoggleCurrent() {\n\t\tif (this.flexNav && this.flexNav.opened) {\n\t\t\treturn this.closeFlex();\n\t\t}\n\t\treturn AccountBox.toggle();\n\t}\n\n\tvalidate() {\n\t\tconst invalid = [];\n\t\tthis.sideNav.find('input.required').each(function () {\n\t\t\tif (!this.value.length) {\n\t\t\t\treturn invalid.push($(this).prev('label').html());\n\t\t\t}\n\t\t});\n\t\tif (invalid.length) {\n\t\t\treturn invalid;\n\t\t}\n\t\treturn false;\n\t}\n\n\topenFlex(callback = () => {}) {\n\t\tif (!this.initiated) {\n\t\t\treturn this.openQueue.push({\n\t\t\t\tconfig: this.getFlex(),\n\t\t\t\tcallback,\n\t\t\t});\n\t\t}\n\t\tif (this.animating === true) {\n\t\t\treturn;\n\t\t}\n\t\tthis.toggleFlex(1, callback);\n\t}\n\n\tinit() {\n\t\tthis.sideNav = $('.sidebar');\n\t\tthis.flexNav = this.sideNav.find('.flex-nav');\n\t\tthis.setFlex('');\n\t\tthis.initiated = true;\n\t\tif (this.openQueue.length > 0) {\n\t\t\tthis.openQueue.forEach((item) => {\n\t\t\t\tthis.setFlex(item.config.template, item.config.data);\n\t\t\t\treturn this.openFlex(item.callback);\n\t\t\t});\n\t\t\tthis.openQueue = [];\n\t\t}\n\t}\n})();\n"]},"sourceType":"module","hash":"afe2a87326f7b4757590cb7a6e2522587fe02cef"}
