{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/app/api/server/v1/invites.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.arm64"},"sourceFileName":"app/api/server/v1/invites.js","filename":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/app/api/server/v1/invites.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/amangupta/Documents/Open-Source/Rocket.Chat","root":"/Users/amangupta/Documents/Open-Source/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/app/api/server/v1/invites.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/api/server/v1/invites.js"}},"code":"let API;\nmodule.link(\"../api\", {\n  API(v) {\n    API = v;\n  }\n\n}, 0);\nlet findOrCreateInvite;\nmodule.link(\"../../../invites/server/functions/findOrCreateInvite\", {\n  findOrCreateInvite(v) {\n    findOrCreateInvite = v;\n  }\n\n}, 1);\nlet removeInvite;\nmodule.link(\"../../../invites/server/functions/removeInvite\", {\n  removeInvite(v) {\n    removeInvite = v;\n  }\n\n}, 2);\nlet listInvites;\nmodule.link(\"../../../invites/server/functions/listInvites\", {\n  listInvites(v) {\n    listInvites = v;\n  }\n\n}, 3);\nlet useInviteToken;\nmodule.link(\"../../../invites/server/functions/useInviteToken\", {\n  useInviteToken(v) {\n    useInviteToken = v;\n  }\n\n}, 4);\nlet validateInviteToken;\nmodule.link(\"../../../invites/server/functions/validateInviteToken\", {\n  validateInviteToken(v) {\n    validateInviteToken = v;\n  }\n\n}, 5);\nAPI.v1.addRoute('listInvites', {\n  authRequired: true\n}, {\n  get() {\n    const result = Promise.await(listInvites(this.userId));\n    return API.v1.success(result);\n  }\n\n});\nAPI.v1.addRoute('findOrCreateInvite', {\n  authRequired: true\n}, {\n  post() {\n    const {\n      rid,\n      days,\n      maxUses\n    } = this.bodyParams;\n    const result = Promise.await(findOrCreateInvite(this.userId, {\n      rid,\n      days,\n      maxUses\n    }));\n    return API.v1.success(result);\n  }\n\n});\nAPI.v1.addRoute('removeInvite/:_id', {\n  authRequired: true\n}, {\n  delete() {\n    const {\n      _id\n    } = this.urlParams;\n    const result = Promise.await(removeInvite(this.userId, {\n      _id\n    }));\n    return API.v1.success(result);\n  }\n\n});\nAPI.v1.addRoute('useInviteToken', {\n  authRequired: true\n}, {\n  post() {\n    const {\n      token\n    } = this.bodyParams; // eslint-disable-next-line react-hooks/rules-of-hooks\n\n    const result = Promise.await(useInviteToken(this.userId, token));\n    return API.v1.success(result);\n  }\n\n});\nAPI.v1.addRoute('validateInviteToken', {\n  authRequired: false\n}, {\n  post() {\n    const {\n      token\n    } = this.bodyParams;\n    let valid = true;\n\n    try {\n      Promise.await(validateInviteToken(token));\n    } catch (e) {\n      valid = false;\n    }\n\n    return API.v1.success({\n      valid\n    });\n  }\n\n});","map":{"version":3,"sources":["app/api/server/v1/invites.js"],"names":["API","module","link","v","findOrCreateInvite","removeInvite","listInvites","useInviteToken","validateInviteToken","v1","addRoute","authRequired","get","result","Promise","await","userId","success","post","rid","days","maxUses","bodyParams","delete","_id","urlParams","token","valid","e"],"mappings":"AAAA,IAAIA,GAAJ;AAAQC,MAAM,CAACC,IAAP,CAAY,QAAZ,EAAqB;AAACF,EAAAA,GAAG,CAACG,CAAD,EAAG;AAACH,IAAAA,GAAG,GAACG,CAAJ;AAAM;;AAAd,CAArB,EAAqC,CAArC;AAAwC,IAAIC,kBAAJ;AAAuBH,MAAM,CAACC,IAAP,CAAY,sDAAZ,EAAmE;AAACE,EAAAA,kBAAkB,CAACD,CAAD,EAAG;AAACC,IAAAA,kBAAkB,GAACD,CAAnB;AAAqB;;AAA5C,CAAnE,EAAiH,CAAjH;AAAoH,IAAIE,YAAJ;AAAiBJ,MAAM,CAACC,IAAP,CAAY,gDAAZ,EAA6D;AAACG,EAAAA,YAAY,CAACF,CAAD,EAAG;AAACE,IAAAA,YAAY,GAACF,CAAb;AAAe;;AAAhC,CAA7D,EAA+F,CAA/F;AAAkG,IAAIG,WAAJ;AAAgBL,MAAM,CAACC,IAAP,CAAY,+CAAZ,EAA4D;AAACI,EAAAA,WAAW,CAACH,CAAD,EAAG;AAACG,IAAAA,WAAW,GAACH,CAAZ;AAAc;;AAA9B,CAA5D,EAA4F,CAA5F;AAA+F,IAAII,cAAJ;AAAmBN,MAAM,CAACC,IAAP,CAAY,kDAAZ,EAA+D;AAACK,EAAAA,cAAc,CAACJ,CAAD,EAAG;AAACI,IAAAA,cAAc,GAACJ,CAAf;AAAiB;;AAApC,CAA/D,EAAqG,CAArG;AAAwG,IAAIK,mBAAJ;AAAwBP,MAAM,CAACC,IAAP,CAAY,uDAAZ,EAAoE;AAACM,EAAAA,mBAAmB,CAACL,CAAD,EAAG;AAACK,IAAAA,mBAAmB,GAACL,CAApB;AAAsB;;AAA9C,CAApE,EAAoH,CAApH;AAOhjBH,GAAG,CAACS,EAAJ,CAAOC,QAAP,CACC,aADD,EAEC;AAAEC,EAAAA,YAAY,EAAE;AAAhB,CAFD,EAGC;AACCC,EAAAA,GAAG,GAAG;AACL,UAAMC,MAAM,GAAGC,OAAO,CAACC,KAAR,CAAcT,WAAW,CAAC,KAAKU,MAAN,CAAzB,CAAf;AACA,WAAOhB,GAAG,CAACS,EAAJ,CAAOQ,OAAP,CAAeJ,MAAf,CAAP;AACA;;AAJF,CAHD;AAWAb,GAAG,CAACS,EAAJ,CAAOC,QAAP,CACC,oBADD,EAEC;AAAEC,EAAAA,YAAY,EAAE;AAAhB,CAFD,EAGC;AACCO,EAAAA,IAAI,GAAG;AACN,UAAM;AAAEC,MAAAA,GAAF;AAAOC,MAAAA,IAAP;AAAaC,MAAAA;AAAb,QAAyB,KAAKC,UAApC;AACA,UAAMT,MAAM,GAAGC,OAAO,CAACC,KAAR,CAAcX,kBAAkB,CAAC,KAAKY,MAAN,EAAc;AAAEG,MAAAA,GAAF;AAAOC,MAAAA,IAAP;AAAaC,MAAAA;AAAb,KAAd,CAAhC,CAAf;AAEA,WAAOrB,GAAG,CAACS,EAAJ,CAAOQ,OAAP,CAAeJ,MAAf,CAAP;AACA;;AANF,CAHD;AAaAb,GAAG,CAACS,EAAJ,CAAOC,QAAP,CACC,mBADD,EAEC;AAAEC,EAAAA,YAAY,EAAE;AAAhB,CAFD,EAGC;AACCY,EAAAA,MAAM,GAAG;AACR,UAAM;AAAEC,MAAAA;AAAF,QAAU,KAAKC,SAArB;AACA,UAAMZ,MAAM,GAAGC,OAAO,CAACC,KAAR,CAAcV,YAAY,CAAC,KAAKW,MAAN,EAAc;AAAEQ,MAAAA;AAAF,KAAd,CAA1B,CAAf;AAEA,WAAOxB,GAAG,CAACS,EAAJ,CAAOQ,OAAP,CAAeJ,MAAf,CAAP;AACA;;AANF,CAHD;AAaAb,GAAG,CAACS,EAAJ,CAAOC,QAAP,CACC,gBADD,EAEC;AAAEC,EAAAA,YAAY,EAAE;AAAhB,CAFD,EAGC;AACCO,EAAAA,IAAI,GAAG;AACN,UAAM;AAAEQ,MAAAA;AAAF,QAAY,KAAKJ,UAAvB,CADM,CAEN;;AACA,UAAMT,MAAM,GAAGC,OAAO,CAACC,KAAR,CAAcR,cAAc,CAAC,KAAKS,MAAN,EAAcU,KAAd,CAA5B,CAAf;AAEA,WAAO1B,GAAG,CAACS,EAAJ,CAAOQ,OAAP,CAAeJ,MAAf,CAAP;AACA;;AAPF,CAHD;AAcAb,GAAG,CAACS,EAAJ,CAAOC,QAAP,CACC,qBADD,EAEC;AAAEC,EAAAA,YAAY,EAAE;AAAhB,CAFD,EAGC;AACCO,EAAAA,IAAI,GAAG;AACN,UAAM;AAAEQ,MAAAA;AAAF,QAAY,KAAKJ,UAAvB;AAEA,QAAIK,KAAK,GAAG,IAAZ;;AACA,QAAI;AACHb,MAAAA,OAAO,CAACC,KAAR,CAAcP,mBAAmB,CAACkB,KAAD,CAAjC;AACA,KAFD,CAEE,OAAOE,CAAP,EAAU;AACXD,MAAAA,KAAK,GAAG,KAAR;AACA;;AAED,WAAO3B,GAAG,CAACS,EAAJ,CAAOQ,OAAP,CAAe;AAAEU,MAAAA;AAAF,KAAf,CAAP;AACA;;AAZF,CAHD","sourcesContent":["import { API } from '../api';\nimport { findOrCreateInvite } from '../../../invites/server/functions/findOrCreateInvite';\nimport { removeInvite } from '../../../invites/server/functions/removeInvite';\nimport { listInvites } from '../../../invites/server/functions/listInvites';\nimport { useInviteToken } from '../../../invites/server/functions/useInviteToken';\nimport { validateInviteToken } from '../../../invites/server/functions/validateInviteToken';\n\nAPI.v1.addRoute(\n\t'listInvites',\n\t{ authRequired: true },\n\t{\n\t\tget() {\n\t\t\tconst result = Promise.await(listInvites(this.userId));\n\t\t\treturn API.v1.success(result);\n\t\t},\n\t},\n);\n\nAPI.v1.addRoute(\n\t'findOrCreateInvite',\n\t{ authRequired: true },\n\t{\n\t\tpost() {\n\t\t\tconst { rid, days, maxUses } = this.bodyParams;\n\t\t\tconst result = Promise.await(findOrCreateInvite(this.userId, { rid, days, maxUses }));\n\n\t\t\treturn API.v1.success(result);\n\t\t},\n\t},\n);\n\nAPI.v1.addRoute(\n\t'removeInvite/:_id',\n\t{ authRequired: true },\n\t{\n\t\tdelete() {\n\t\t\tconst { _id } = this.urlParams;\n\t\t\tconst result = Promise.await(removeInvite(this.userId, { _id }));\n\n\t\t\treturn API.v1.success(result);\n\t\t},\n\t},\n);\n\nAPI.v1.addRoute(\n\t'useInviteToken',\n\t{ authRequired: true },\n\t{\n\t\tpost() {\n\t\t\tconst { token } = this.bodyParams;\n\t\t\t// eslint-disable-next-line react-hooks/rules-of-hooks\n\t\t\tconst result = Promise.await(useInviteToken(this.userId, token));\n\n\t\t\treturn API.v1.success(result);\n\t\t},\n\t},\n);\n\nAPI.v1.addRoute(\n\t'validateInviteToken',\n\t{ authRequired: false },\n\t{\n\t\tpost() {\n\t\t\tconst { token } = this.bodyParams;\n\n\t\t\tlet valid = true;\n\t\t\ttry {\n\t\t\t\tPromise.await(validateInviteToken(token));\n\t\t\t} catch (e) {\n\t\t\t\tvalid = false;\n\t\t\t}\n\n\t\t\treturn API.v1.success({ valid });\n\t\t},\n\t},\n);\n"]},"sourceType":"module","hash":"ed7ae85e605c528361b05111a08b44c02acb36cd"}
