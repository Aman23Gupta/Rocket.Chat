{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/app/lib/server/functions/setEmail.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.arm64"},"sourceFileName":"app/lib/server/functions/setEmail.js","filename":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/app/lib/server/functions/setEmail.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/amangupta/Documents/Open-Source/Rocket.Chat","root":"/Users/amangupta/Documents/Open-Source/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/app/lib/server/functions/setEmail.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/lib/server/functions/setEmail.js"}},"code":"module.export({\n  setEmail: () => setEmail\n});\nlet Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet s;\nmodule.link(\"underscore.string\", {\n  default(v) {\n    s = v;\n  }\n\n}, 1);\nlet escapeHTML;\nmodule.link(\"@rocket.chat/string-helpers\", {\n  escapeHTML(v) {\n    escapeHTML = v;\n  }\n\n}, 2);\nlet Users;\nmodule.link(\"../../../models\", {\n  Users(v) {\n    Users = v;\n  }\n\n}, 3);\nlet hasPermission;\nmodule.link(\"../../../authorization\", {\n  hasPermission(v) {\n    hasPermission = v;\n  }\n\n}, 4);\nlet RateLimiter, validateEmailDomain;\nmodule.link(\"../lib\", {\n  RateLimiter(v) {\n    RateLimiter = v;\n  },\n\n  validateEmailDomain(v) {\n    validateEmailDomain = v;\n  }\n\n}, 5);\nlet Mailer;\nmodule.link(\"../../../mailer\", {\n  \"*\"(v) {\n    Mailer = v;\n  }\n\n}, 6);\nlet settings;\nmodule.link(\"../../../settings\", {\n  settings(v) {\n    settings = v;\n  }\n\n}, 7);\nlet checkEmailAvailability;\nmodule.link(\".\", {\n  checkEmailAvailability(v) {\n    checkEmailAvailability = v;\n  }\n\n}, 8);\nlet html = '';\nMeteor.startup(() => {\n  Mailer.getTemplate('Email_Changed_Email', template => {\n    html = template;\n  });\n});\n\nconst _sendEmailChangeNotification = function (to, newEmail) {\n  const subject = settings.get('Email_Changed_Email_Subject');\n  const email = {\n    to,\n    from: settings.get('From_Email'),\n    subject,\n    html,\n    data: {\n      email: escapeHTML(newEmail)\n    }\n  };\n\n  try {\n    Mailer.send(email);\n  } catch (error) {\n    throw new Meteor.Error('error-email-send-failed', \"Error trying to send email: \".concat(error.message), {\n      function: 'setEmail',\n      message: error.message\n    });\n  }\n};\n\nconst _setEmail = function (userId, email) {\n  let shouldSendVerificationEmail = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  email = s.trim(email);\n\n  if (!userId) {\n    throw new Meteor.Error('error-invalid-user', 'Invalid user', {\n      function: '_setEmail'\n    });\n  }\n\n  if (!email) {\n    throw new Meteor.Error('error-invalid-email', 'Invalid email', {\n      function: '_setEmail'\n    });\n  }\n\n  validateEmailDomain(email);\n  const user = Users.findOneById(userId); // User already has desired username, return\n\n  if (user.emails && user.emails[0] && user.emails[0].address === email) {\n    return user;\n  } // Check email availability\n\n\n  if (!checkEmailAvailability(email)) {\n    throw new Meteor.Error('error-field-unavailable', \"\".concat(email, \" is already in use :(\"), {\n      function: '_setEmail',\n      field: email\n    });\n  }\n\n  const oldEmail = user.emails && user.emails[0];\n\n  if (oldEmail) {\n    _sendEmailChangeNotification(oldEmail.address, email);\n  } // Set new email\n\n\n  Users.setEmail(user._id, email);\n  user.email = email;\n\n  if (shouldSendVerificationEmail === true) {\n    Meteor.call('sendConfirmationEmail', user.email);\n  }\n\n  return user;\n};\n\nconst setEmail = RateLimiter.limitFunction(_setEmail, 1, 60000, {\n  0() {\n    return !Meteor.userId() || !hasPermission(Meteor.userId(), 'edit-other-user-info');\n  } // Administrators have permission to change others emails, so don't limit those\n\n\n});","map":{"version":3,"sources":["app/lib/server/functions/setEmail.js"],"names":["module","export","setEmail","Meteor","link","v","s","default","escapeHTML","Users","hasPermission","RateLimiter","validateEmailDomain","Mailer","settings","checkEmailAvailability","html","startup","getTemplate","template","_sendEmailChangeNotification","to","newEmail","subject","get","email","from","data","send","error","Error","message","function","_setEmail","userId","shouldSendVerificationEmail","trim","user","findOneById","emails","address","field","oldEmail","_id","call","limitFunction"],"mappings":"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","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport s from 'underscore.string';\nimport { escapeHTML } from '@rocket.chat/string-helpers';\n\nimport { Users } from '../../../models';\nimport { hasPermission } from '../../../authorization';\nimport { RateLimiter, validateEmailDomain } from '../lib';\nimport * as Mailer from '../../../mailer';\nimport { settings } from '../../../settings';\nimport { checkEmailAvailability } from '.';\n\nlet html = '';\nMeteor.startup(() => {\n\tMailer.getTemplate('Email_Changed_Email', (template) => {\n\t\thtml = template;\n\t});\n});\n\nconst _sendEmailChangeNotification = function (to, newEmail) {\n\tconst subject = settings.get('Email_Changed_Email_Subject');\n\tconst email = {\n\t\tto,\n\t\tfrom: settings.get('From_Email'),\n\t\tsubject,\n\t\thtml,\n\t\tdata: {\n\t\t\temail: escapeHTML(newEmail),\n\t\t},\n\t};\n\n\ttry {\n\t\tMailer.send(email);\n\t} catch (error) {\n\t\tthrow new Meteor.Error('error-email-send-failed', `Error trying to send email: ${error.message}`, {\n\t\t\tfunction: 'setEmail',\n\t\t\tmessage: error.message,\n\t\t});\n\t}\n};\n\nconst _setEmail = function (userId, email, shouldSendVerificationEmail = true) {\n\temail = s.trim(email);\n\tif (!userId) {\n\t\tthrow new Meteor.Error('error-invalid-user', 'Invalid user', { function: '_setEmail' });\n\t}\n\n\tif (!email) {\n\t\tthrow new Meteor.Error('error-invalid-email', 'Invalid email', { function: '_setEmail' });\n\t}\n\n\tvalidateEmailDomain(email);\n\n\tconst user = Users.findOneById(userId);\n\n\t// User already has desired username, return\n\tif (user.emails && user.emails[0] && user.emails[0].address === email) {\n\t\treturn user;\n\t}\n\n\t// Check email availability\n\tif (!checkEmailAvailability(email)) {\n\t\tthrow new Meteor.Error('error-field-unavailable', `${email} is already in use :(`, {\n\t\t\tfunction: '_setEmail',\n\t\t\tfield: email,\n\t\t});\n\t}\n\n\tconst oldEmail = user.emails && user.emails[0];\n\n\tif (oldEmail) {\n\t\t_sendEmailChangeNotification(oldEmail.address, email);\n\t}\n\n\t// Set new email\n\tUsers.setEmail(user._id, email);\n\tuser.email = email;\n\tif (shouldSendVerificationEmail === true) {\n\t\tMeteor.call('sendConfirmationEmail', user.email);\n\t}\n\treturn user;\n};\n\nexport const setEmail = RateLimiter.limitFunction(_setEmail, 1, 60000, {\n\t0() {\n\t\treturn !Meteor.userId() || !hasPermission(Meteor.userId(), 'edit-other-user-info');\n\t}, // Administrators have permission to change others emails, so don't limit those\n});\n"]},"sourceType":"module","hash":"64783ed09544c3a9d71fdac8a4de6cd343656b4a"}
