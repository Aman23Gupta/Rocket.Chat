{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/app/videobridge/server/methods/jitsiGenerateToken.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.arm64"},"sourceFileName":"app/videobridge/server/methods/jitsiGenerateToken.js","filename":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/app/videobridge/server/methods/jitsiGenerateToken.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/amangupta/Documents/Open-Source/Rocket.Chat","root":"/Users/amangupta/Documents/Open-Source/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/app/videobridge/server/methods/jitsiGenerateToken.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/videobridge/server/methods/jitsiGenerateToken.js"}},"code":"let Meteor;\nmodule.link(\"meteor/meteor\", {\n  Meteor(v) {\n    Meteor = v;\n  }\n\n}, 0);\nlet jws;\nmodule.link(\"jsrsasign\", {\n  jws(v) {\n    jws = v;\n  }\n\n}, 1);\nlet Rooms;\nmodule.link(\"../../../models\", {\n  Rooms(v) {\n    Rooms = v;\n  }\n\n}, 2);\nlet settings;\nmodule.link(\"../../../settings\", {\n  settings(v) {\n    settings = v;\n  }\n\n}, 3);\nlet canAccessRoom;\nmodule.link(\"../../../authorization/server/functions/canAccessRoom\", {\n  canAccessRoom(v) {\n    canAccessRoom = v;\n  }\n\n}, 4);\nlet getUserEmailAddress;\nmodule.link(\"../../../../lib/getUserEmailAddress\", {\n  getUserEmailAddress(v) {\n    getUserEmailAddress = v;\n  }\n\n}, 5);\nMeteor.methods({\n  'jitsi:generateAccessToken': rid => {\n    if (!Meteor.userId()) {\n      throw new Meteor.Error('error-invalid-user', 'Invalid user', {\n        method: 'jitsi:generateToken'\n      });\n    }\n\n    const room = Rooms.findOneById(rid);\n\n    if (!canAccessRoom(room, Meteor.user())) {\n      throw new Meteor.Error('error-not-allowed', 'not allowed', {\n        method: 'jitsi:generateToken'\n      });\n    }\n\n    let rname;\n\n    if (settings.get('Jitsi_URL_Room_Hash')) {\n      rname = settings.get('uniqueID') + rid;\n    } else {\n      rname = encodeURIComponent(room.t === 'd' ? room.usernames.join(' x ') : room.name);\n    }\n\n    const jitsiRoom = settings.get('Jitsi_URL_Room_Prefix') + rname + settings.get('Jitsi_URL_Room_Suffix');\n    const jitsiDomain = settings.get('Jitsi_Domain');\n    const jitsiApplicationId = settings.get('Jitsi_Application_ID');\n    const jitsiApplicationSecret = settings.get('Jitsi_Application_Secret');\n    const jitsiLimitTokenToRoom = settings.get('Jitsi_Limit_Token_To_Room');\n\n    function addUserContextToPayload(payload) {\n      const user = Meteor.user();\n      payload.context = {\n        user: {\n          name: user.name,\n          email: getUserEmailAddress(user),\n          avatar: Meteor.absoluteUrl(\"avatar/\".concat(user.username)),\n          id: user._id\n        }\n      };\n      return payload;\n    }\n\n    const JITSI_OPTIONS = {\n      jitsi_domain: jitsiDomain,\n      jitsi_lifetime_token: '1hour',\n      // only 1 hour (for security reasons)\n      jitsi_application_id: jitsiApplicationId,\n      jitsi_application_secret: jitsiApplicationSecret\n    };\n    const HEADER = {\n      typ: 'JWT',\n      alg: 'HS256'\n    };\n    const commonPayload = {\n      iss: JITSI_OPTIONS.jitsi_application_id,\n      sub: JITSI_OPTIONS.jitsi_domain,\n      iat: jws.IntDate.get('now'),\n      nbf: jws.IntDate.get('now'),\n      exp: jws.IntDate.get(\"now + \".concat(JITSI_OPTIONS.jitsi_lifetime_token)),\n      aud: 'RocketChat',\n      room: jitsiLimitTokenToRoom ? jitsiRoom : '*',\n      context: '' // first empty\n\n    };\n    const header = JSON.stringify(HEADER);\n    const payload = JSON.stringify(addUserContextToPayload(commonPayload));\n    return jws.JWS.sign(HEADER.alg, header, payload, {\n      rstr: JITSI_OPTIONS.jitsi_application_secret\n    });\n  }\n});","map":{"version":3,"sources":["app/videobridge/server/methods/jitsiGenerateToken.js"],"names":["Meteor","module","link","v","jws","Rooms","settings","canAccessRoom","getUserEmailAddress","methods","rid","userId","Error","method","room","findOneById","user","rname","get","encodeURIComponent","t","usernames","join","name","jitsiRoom","jitsiDomain","jitsiApplicationId","jitsiApplicationSecret","jitsiLimitTokenToRoom","addUserContextToPayload","payload","context","email","avatar","absoluteUrl","username","id","_id","JITSI_OPTIONS","jitsi_domain","jitsi_lifetime_token","jitsi_application_id","jitsi_application_secret","HEADER","typ","alg","commonPayload","iss","sub","iat","IntDate","nbf","exp","aud","header","JSON","stringify","JWS","sign","rstr"],"mappings":"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","sourcesContent":["import { Meteor } from 'meteor/meteor';\nimport { jws } from 'jsrsasign';\n\nimport { Rooms } from '../../../models';\nimport { settings } from '../../../settings';\nimport { canAccessRoom } from '../../../authorization/server/functions/canAccessRoom';\nimport { getUserEmailAddress } from '../../../../lib/getUserEmailAddress';\n\nMeteor.methods({\n\t'jitsi:generateAccessToken': (rid) => {\n\t\tif (!Meteor.userId()) {\n\t\t\tthrow new Meteor.Error('error-invalid-user', 'Invalid user', {\n\t\t\t\tmethod: 'jitsi:generateToken',\n\t\t\t});\n\t\t}\n\n\t\tconst room = Rooms.findOneById(rid);\n\n\t\tif (!canAccessRoom(room, Meteor.user())) {\n\t\t\tthrow new Meteor.Error('error-not-allowed', 'not allowed', { method: 'jitsi:generateToken' });\n\t\t}\n\n\t\tlet rname;\n\t\tif (settings.get('Jitsi_URL_Room_Hash')) {\n\t\t\trname = settings.get('uniqueID') + rid;\n\t\t} else {\n\t\t\trname = encodeURIComponent(room.t === 'd' ? room.usernames.join(' x ') : room.name);\n\t\t}\n\t\tconst jitsiRoom = settings.get('Jitsi_URL_Room_Prefix') + rname + settings.get('Jitsi_URL_Room_Suffix');\n\t\tconst jitsiDomain = settings.get('Jitsi_Domain');\n\t\tconst jitsiApplicationId = settings.get('Jitsi_Application_ID');\n\t\tconst jitsiApplicationSecret = settings.get('Jitsi_Application_Secret');\n\t\tconst jitsiLimitTokenToRoom = settings.get('Jitsi_Limit_Token_To_Room');\n\n\t\tfunction addUserContextToPayload(payload) {\n\t\t\tconst user = Meteor.user();\n\t\t\tpayload.context = {\n\t\t\t\tuser: {\n\t\t\t\t\tname: user.name,\n\t\t\t\t\temail: getUserEmailAddress(user),\n\t\t\t\t\tavatar: Meteor.absoluteUrl(`avatar/${user.username}`),\n\t\t\t\t\tid: user._id,\n\t\t\t\t},\n\t\t\t};\n\n\t\t\treturn payload;\n\t\t}\n\n\t\tconst JITSI_OPTIONS = {\n\t\t\tjitsi_domain: jitsiDomain,\n\t\t\tjitsi_lifetime_token: '1hour', // only 1 hour (for security reasons)\n\t\t\tjitsi_application_id: jitsiApplicationId,\n\t\t\tjitsi_application_secret: jitsiApplicationSecret,\n\t\t};\n\n\t\tconst HEADER = {\n\t\t\ttyp: 'JWT',\n\t\t\talg: 'HS256',\n\t\t};\n\n\t\tconst commonPayload = {\n\t\t\tiss: JITSI_OPTIONS.jitsi_application_id,\n\t\t\tsub: JITSI_OPTIONS.jitsi_domain,\n\t\t\tiat: jws.IntDate.get('now'),\n\t\t\tnbf: jws.IntDate.get('now'),\n\t\t\texp: jws.IntDate.get(`now + ${JITSI_OPTIONS.jitsi_lifetime_token}`),\n\t\t\taud: 'RocketChat',\n\t\t\troom: jitsiLimitTokenToRoom ? jitsiRoom : '*',\n\t\t\tcontext: '', // first empty\n\t\t};\n\n\t\tconst header = JSON.stringify(HEADER);\n\t\tconst payload = JSON.stringify(addUserContextToPayload(commonPayload));\n\n\t\treturn jws.JWS.sign(HEADER.alg, header, payload, {\n\t\t\trstr: JITSI_OPTIONS.jitsi_application_secret,\n\t\t});\n\t},\n});\n"]},"sourceType":"module","hash":"9a2c41549c60b9ec6f0091389607ac374e19e9cf"}
