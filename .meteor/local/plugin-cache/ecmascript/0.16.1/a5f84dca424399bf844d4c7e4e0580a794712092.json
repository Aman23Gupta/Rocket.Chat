{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/app/apps/server/converters/departments.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","objectRestSpread","asyncGenerators","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"os.osx.arm64"},"sourceFileName":"app/apps/server/converters/departments.js","filename":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/app/apps/server/converters/departments.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/amangupta/Documents/Open-Source/Rocket.Chat","root":"/Users/amangupta/Documents/Open-Source/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-meteor-async-await","visitor":{"AwaitExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ObjectMethod":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]},"ClassMethod":{"exit":[null]},"ClassPrivateMethod":{"exit":[null]}},"options":{"useNativeAsyncAwait":false}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/app/apps/server/converters/departments.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/apps/server/converters/departments.js"}},"code":"module.export({\n  AppDepartmentsConverter: () => AppDepartmentsConverter\n});\nlet LivechatDepartment;\nmodule.link(\"../../../models/server/models/LivechatDepartment\", {\n  default(v) {\n    LivechatDepartment = v;\n  }\n\n}, 0);\nlet transformMappedData;\nmodule.link(\"../../lib/misc/transformMappedData\", {\n  transformMappedData(v) {\n    transformMappedData = v;\n  }\n\n}, 1);\n\nclass AppDepartmentsConverter {\n  constructor(orch) {\n    this.orch = orch;\n  }\n\n  convertById(id) {\n    const department = LivechatDepartment.findOneById(id);\n    return this.convertDepartment(department);\n  }\n\n  convertDepartment(department) {\n    if (!department) {\n      return undefined;\n    }\n\n    const map = {\n      id: '_id',\n      name: 'name',\n      email: 'email',\n      updatedAt: '_updatedAt',\n      enabled: 'enabled',\n      numberOfAgents: 'numAgents',\n      showOnOfflineForm: 'showOnOfflineForm',\n      description: 'description',\n      offlineMessageChannelName: 'offlineMessageChannelName',\n      requestTagBeforeClosingChat: 'requestTagBeforeClosingChat',\n      chatClosingTags: 'chatClosingTags',\n      abandonedRoomsCloseCustomMessage: 'abandonedRoomsCloseCustomMessage',\n      waitingQueueMessage: 'waitingQueueMessage',\n      departmentsAllowedToForward: 'departmentsAllowedToForward',\n      showOnRegistration: 'showOnRegistration'\n    };\n    return transformMappedData(department, map);\n  }\n\n  convertAppDepartment(department) {\n    if (!department) {\n      return undefined;\n    }\n\n    const newDepartment = {\n      _id: department.id,\n      name: department.name,\n      email: department.email,\n      _updatedAt: department.updatedAt,\n      enabled: department.enabled,\n      numAgents: department.numberOfAgents,\n      showOnOfflineForm: department.showOnOfflineForm,\n      showOnRegistration: department.showOnRegistration,\n      description: department.description,\n      offlineMessageChannelName: department.offlineMessageChannelName,\n      requestTagBeforeClosingChat: department.requestTagBeforeClosingChat,\n      chatClosingTags: department.chatClosingTags,\n      abandonedRoomsCloseCustomMessage: department.abandonedRoomsCloseCustomMessage,\n      waitingQueueMessage: department.waitingQueueMessage,\n      departmentsAllowedToForward: department.departmentsAllowedToForward\n    };\n    return Object.assign(newDepartment, department._unmappedProperties_);\n  }\n\n}","map":{"version":3,"sources":["app/apps/server/converters/departments.js"],"names":["module","export","AppDepartmentsConverter","LivechatDepartment","link","default","v","transformMappedData","constructor","orch","convertById","id","department","findOneById","convertDepartment","undefined","map","name","email","updatedAt","enabled","numberOfAgents","showOnOfflineForm","description","offlineMessageChannelName","requestTagBeforeClosingChat","chatClosingTags","abandonedRoomsCloseCustomMessage","waitingQueueMessage","departmentsAllowedToForward","showOnRegistration","convertAppDepartment","newDepartment","_id","_updatedAt","numAgents","Object","assign","_unmappedProperties_"],"mappings":"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","sourcesContent":["import LivechatDepartment from '../../../models/server/models/LivechatDepartment';\nimport { transformMappedData } from '../../lib/misc/transformMappedData';\n\nexport class AppDepartmentsConverter {\n\tconstructor(orch) {\n\t\tthis.orch = orch;\n\t}\n\n\tconvertById(id) {\n\t\tconst department = LivechatDepartment.findOneById(id);\n\n\t\treturn this.convertDepartment(department);\n\t}\n\n\tconvertDepartment(department) {\n\t\tif (!department) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst map = {\n\t\t\tid: '_id',\n\t\t\tname: 'name',\n\t\t\temail: 'email',\n\t\t\tupdatedAt: '_updatedAt',\n\t\t\tenabled: 'enabled',\n\t\t\tnumberOfAgents: 'numAgents',\n\t\t\tshowOnOfflineForm: 'showOnOfflineForm',\n\t\t\tdescription: 'description',\n\t\t\tofflineMessageChannelName: 'offlineMessageChannelName',\n\t\t\trequestTagBeforeClosingChat: 'requestTagBeforeClosingChat',\n\t\t\tchatClosingTags: 'chatClosingTags',\n\t\t\tabandonedRoomsCloseCustomMessage: 'abandonedRoomsCloseCustomMessage',\n\t\t\twaitingQueueMessage: 'waitingQueueMessage',\n\t\t\tdepartmentsAllowedToForward: 'departmentsAllowedToForward',\n\t\t\tshowOnRegistration: 'showOnRegistration',\n\t\t};\n\n\t\treturn transformMappedData(department, map);\n\t}\n\n\tconvertAppDepartment(department) {\n\t\tif (!department) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tconst newDepartment = {\n\t\t\t_id: department.id,\n\t\t\tname: department.name,\n\t\t\temail: department.email,\n\t\t\t_updatedAt: department.updatedAt,\n\t\t\tenabled: department.enabled,\n\t\t\tnumAgents: department.numberOfAgents,\n\t\t\tshowOnOfflineForm: department.showOnOfflineForm,\n\t\t\tshowOnRegistration: department.showOnRegistration,\n\t\t\tdescription: department.description,\n\t\t\tofflineMessageChannelName: department.offlineMessageChannelName,\n\t\t\trequestTagBeforeClosingChat: department.requestTagBeforeClosingChat,\n\t\t\tchatClosingTags: department.chatClosingTags,\n\t\t\tabandonedRoomsCloseCustomMessage: department.abandonedRoomsCloseCustomMessage,\n\t\t\twaitingQueueMessage: department.waitingQueueMessage,\n\t\t\tdepartmentsAllowedToForward: department.departmentsAllowedToForward,\n\t\t};\n\n\t\treturn Object.assign(newDepartment, department._unmappedProperties_);\n\t}\n}\n"]},"sourceType":"module","hash":"a5f84dca424399bf844d4c7e4e0580a794712092"}
