{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/app/ui-utils/client/lib/SideNav.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser"},"sourceFileName":"app/ui-utils/client/lib/SideNav.js","filename":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/app/ui-utils/client/lib/SideNav.js","targets":{"android":"95.0.0","chrome":"95.0.0","edge":"95.0.0","firefox":"78.0.0","ie":"10.0.0","ios":"15.0.0","opera":"81.0.0","safari":"15.1.0","samsung":"14.0.0"},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/amangupta/Documents/Open-Source/Rocket.Chat","root":"/Users/amangupta/Documents/Open-Source/Rocket.Chat","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":false,"enforceStrictMode":false,"dynamicImport":true,"generateLetDeclarations":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.16.5","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/amangupta/Documents/Open-Source/Rocket.Chat/app/ui-utils/client/lib/SideNav.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"app/ui-utils/client/lib/SideNav.js"}},"code":"module.export({\n  SideNav: () => SideNav\n});\nlet FlowRouter;\nmodule.link(\"meteor/kadira:flow-router\", {\n  FlowRouter(v) {\n    FlowRouter = v;\n  }\n\n}, 0);\nlet Session;\nmodule.link(\"meteor/session\", {\n  Session(v) {\n    Session = v;\n  }\n\n}, 1);\nlet AccountBox;\nmodule.link(\"./AccountBox\", {\n  AccountBox(v) {\n    AccountBox = v;\n  }\n\n}, 2);\nlet roomTypes;\nmodule.link(\"../../../utils/client/lib/roomTypes\", {\n  roomTypes(v) {\n    roomTypes = v;\n  }\n\n}, 3);\nlet Subscriptions;\nmodule.link(\"../../../models\", {\n  Subscriptions(v) {\n    Subscriptions = v;\n  }\n\n}, 4);\nlet RoomManager;\nmodule.link(\"../../../../client/lib/RoomManager\", {\n  RoomManager(v) {\n    RoomManager = v;\n  }\n\n}, 5);\nconst SideNav = new class {\n  constructor() {\n    this.initiated = false;\n    this.sideNav = {};\n    this.flexNav = {};\n    this.animating = false;\n    this.openQueue = [];\n  }\n\n  toggleFlex(status, callback) {\n    if (this.animating === true) {\n      return;\n    }\n\n    this.animating = true;\n\n    if (status === -1 || status !== 1 && this.flexNav.opened) {\n      this.flexNav.opened = false;\n      this.flexNav.addClass('animated-hidden');\n    } else {\n      this.flexNav.opened = true;\n\n      if (window.DISABLE_ANIMATION === true) {\n        this.flexNav.removeClass('animated-hidden');\n      } else {\n        setTimeout(() => this.flexNav.removeClass('animated-hidden'), 50);\n      }\n    }\n\n    if (window.DISABLE_ANIMATION === true) {\n      !this.flexNav.opened && this.setFlex();\n      this.animating = false;\n      return typeof callback === 'function' && callback();\n    }\n\n    return setTimeout(() => {\n      !this.flexNav.opened && this.setFlex();\n      this.animating = false;\n      return typeof callback === 'function' && callback();\n    }, 500);\n  }\n\n  closeFlex() {\n    let callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    const routesNamesForRooms = roomTypes.getTypes().filter(i => i.route).map(i => i.route.name);\n\n    if (!routesNamesForRooms.includes(FlowRouter.current().route.name)) {\n      const subscription = Subscriptions.findOne({\n        rid: RoomManager.lastRid\n      });\n\n      if (subscription) {\n        roomTypes.openRouteLink(subscription.t, subscription, FlowRouter.current().queryParams);\n      } else {\n        FlowRouter.go('home');\n      }\n    }\n\n    if (this.animating === true) {\n      return;\n    }\n\n    this.toggleFlex(-1, callback);\n  }\n\n  flexStatus() {\n    return this.flexNav.opened;\n  }\n\n  setFlex(template) {\n    let data = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    Session.set('flex-nav-template', template);\n    return Session.set('flex-nav-data', data);\n  }\n\n  getFlex() {\n    return {\n      template: Session.get('flex-nav-template'),\n      data: Session.get('flex-nav-data')\n    };\n  }\n\n  toggleCurrent() {\n    if (this.flexNav && this.flexNav.opened) {\n      return this.closeFlex();\n    }\n\n    return AccountBox.toggle();\n  }\n\n  validate() {\n    const invalid = [];\n    this.sideNav.find('input.required').each(function () {\n      if (!this.value.length) {\n        return invalid.push($(this).prev('label').html());\n      }\n    });\n\n    if (invalid.length) {\n      return invalid;\n    }\n\n    return false;\n  }\n\n  openFlex() {\n    let callback = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : () => {};\n\n    if (!this.initiated) {\n      return this.openQueue.push({\n        config: this.getFlex(),\n        callback\n      });\n    }\n\n    if (this.animating === true) {\n      return;\n    }\n\n    this.toggleFlex(1, callback);\n  }\n\n  init() {\n    this.sideNav = $('.sidebar');\n    this.flexNav = this.sideNav.find('.flex-nav');\n    this.setFlex('');\n    this.initiated = true;\n\n    if (this.openQueue.length > 0) {\n      this.openQueue.forEach(item => {\n        this.setFlex(item.config.template, item.config.data);\n        return this.openFlex(item.callback);\n      });\n      this.openQueue = [];\n    }\n  }\n\n}();","map":{"version":3,"sources":["app/ui-utils/client/lib/SideNav.js"],"names":["module","export","SideNav","FlowRouter","link","v","Session","AccountBox","roomTypes","Subscriptions","RoomManager","constructor","initiated","sideNav","flexNav","animating","openQueue","toggleFlex","status","callback","opened","addClass","window","DISABLE_ANIMATION","removeClass","setTimeout","setFlex","closeFlex","routesNamesForRooms","getTypes","filter","i","route","map","name","includes","current","subscription","findOne","rid","lastRid","openRouteLink","t","queryParams","go","flexStatus","template","data","set","getFlex","get","toggleCurrent","toggle","validate","invalid","find","each","value","length","push","$","prev","html","openFlex","config","init","forEach","item"],"mappings":"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","sourcesContent":["import { FlowRouter } from 'meteor/kadira:flow-router';\nimport { Session } from 'meteor/session';\n\nimport { AccountBox } from './AccountBox';\nimport { roomTypes } from '../../../utils/client/lib/roomTypes';\nimport { Subscriptions } from '../../../models';\nimport { RoomManager } from '../../../../client/lib/RoomManager';\n\nexport const SideNav = new (class {\n\tconstructor() {\n\t\tthis.initiated = false;\n\t\tthis.sideNav = {};\n\t\tthis.flexNav = {};\n\t\tthis.animating = false;\n\t\tthis.openQueue = [];\n\t}\n\n\ttoggleFlex(status, callback) {\n\t\tif (this.animating === true) {\n\t\t\treturn;\n\t\t}\n\t\tthis.animating = true;\n\t\tif (status === -1 || (status !== 1 && this.flexNav.opened)) {\n\t\t\tthis.flexNav.opened = false;\n\t\t\tthis.flexNav.addClass('animated-hidden');\n\t\t} else {\n\t\t\tthis.flexNav.opened = true;\n\t\t\tif (window.DISABLE_ANIMATION === true) {\n\t\t\t\tthis.flexNav.removeClass('animated-hidden');\n\t\t\t} else {\n\t\t\t\tsetTimeout(() => this.flexNav.removeClass('animated-hidden'), 50);\n\t\t\t}\n\t\t}\n\n\t\tif (window.DISABLE_ANIMATION === true) {\n\t\t\t!this.flexNav.opened && this.setFlex();\n\t\t\tthis.animating = false;\n\t\t\treturn typeof callback === 'function' && callback();\n\t\t}\n\n\t\treturn setTimeout(() => {\n\t\t\t!this.flexNav.opened && this.setFlex();\n\t\t\tthis.animating = false;\n\t\t\treturn typeof callback === 'function' && callback();\n\t\t}, 500);\n\t}\n\n\tcloseFlex(callback = null) {\n\t\tconst routesNamesForRooms = roomTypes\n\t\t\t.getTypes()\n\t\t\t.filter((i) => i.route)\n\t\t\t.map((i) => i.route.name);\n\t\tif (!routesNamesForRooms.includes(FlowRouter.current().route.name)) {\n\t\t\tconst subscription = Subscriptions.findOne({ rid: RoomManager.lastRid });\n\t\t\tif (subscription) {\n\t\t\t\troomTypes.openRouteLink(subscription.t, subscription, FlowRouter.current().queryParams);\n\t\t\t} else {\n\t\t\t\tFlowRouter.go('home');\n\t\t\t}\n\t\t}\n\t\tif (this.animating === true) {\n\t\t\treturn;\n\t\t}\n\t\tthis.toggleFlex(-1, callback);\n\t}\n\n\tflexStatus() {\n\t\treturn this.flexNav.opened;\n\t}\n\n\tsetFlex(template, data = {}) {\n\t\tSession.set('flex-nav-template', template);\n\t\treturn Session.set('flex-nav-data', data);\n\t}\n\n\tgetFlex() {\n\t\treturn {\n\t\t\ttemplate: Session.get('flex-nav-template'),\n\t\t\tdata: Session.get('flex-nav-data'),\n\t\t};\n\t}\n\n\ttoggleCurrent() {\n\t\tif (this.flexNav && this.flexNav.opened) {\n\t\t\treturn this.closeFlex();\n\t\t}\n\t\treturn AccountBox.toggle();\n\t}\n\n\tvalidate() {\n\t\tconst invalid = [];\n\t\tthis.sideNav.find('input.required').each(function () {\n\t\t\tif (!this.value.length) {\n\t\t\t\treturn invalid.push($(this).prev('label').html());\n\t\t\t}\n\t\t});\n\t\tif (invalid.length) {\n\t\t\treturn invalid;\n\t\t}\n\t\treturn false;\n\t}\n\n\topenFlex(callback = () => {}) {\n\t\tif (!this.initiated) {\n\t\t\treturn this.openQueue.push({\n\t\t\t\tconfig: this.getFlex(),\n\t\t\t\tcallback,\n\t\t\t});\n\t\t}\n\t\tif (this.animating === true) {\n\t\t\treturn;\n\t\t}\n\t\tthis.toggleFlex(1, callback);\n\t}\n\n\tinit() {\n\t\tthis.sideNav = $('.sidebar');\n\t\tthis.flexNav = this.sideNav.find('.flex-nav');\n\t\tthis.setFlex('');\n\t\tthis.initiated = true;\n\t\tif (this.openQueue.length > 0) {\n\t\t\tthis.openQueue.forEach((item) => {\n\t\t\t\tthis.setFlex(item.config.template, item.config.data);\n\t\t\t\treturn this.openFlex(item.callback);\n\t\t\t});\n\t\t\tthis.openQueue = [];\n\t\t}\n\t}\n})();\n"]},"sourceType":"module","hash":"f9a3bd1b4612aaf963f6bb8b986af661399a4184"}
