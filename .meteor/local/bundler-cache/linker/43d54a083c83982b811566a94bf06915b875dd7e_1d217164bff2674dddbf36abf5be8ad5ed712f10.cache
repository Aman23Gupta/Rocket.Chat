[{"type":"js","data":"//////////////////////////////////////////////////////////////////////////\n//                                                                      //\n// This is a generated file. You can view the original                  //\n// source in your browser if your browser supports source maps.         //\n// Source maps are supported by all recent versions of Chrome, Safari,  //\n// and Firefox, and by Internet Explorer 11.                            //\n//                                                                      //\n//////////////////////////////////////////////////////////////////////////\n\n\n(function () {\n\n/* Imports */\nvar Meteor = Package.meteor.Meteor;\nvar global = Package.meteor.global;\nvar meteorEnv = Package.meteor.meteorEnv;\nvar Tracker = Package.tracker.Tracker;\nvar Deps = Package.tracker.Deps;\n\n/* Package-scope variables */\nvar ReactiveStore;\n\n(function(){\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                     //\n// packages/mrt_reactive-store/packages/mrt_reactive-store.js                                                          //\n//                                                                                                                     //\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                       //\n(function () {\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                //\n// packages/mrt:reactive-store/store.js/store.js                                                                  //\n//                                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                  //\n;(function(win){                                                                                                  // 1\n\tvar store = {},                                                                                                  // 2\n\t\tdoc = win.document,                                                                                             // 3\n\t\tlocalStorageName = 'localStorage',                                                                              // 4\n\t\tscriptTag = 'script',                                                                                           // 5\n\t\tstorage                                                                                                         // 6\n                                                                                                                  // 7\n\tstore.disabled = false                                                                                           // 8\n\tstore.set = function(key, value) {}                                                                              // 9\n\tstore.get = function(key) {}                                                                                     // 10\n\tstore.remove = function(key) {}                                                                                  // 11\n\tstore.clear = function() {}                                                                                      // 12\n\tstore.transact = function(key, defaultVal, transactionFn) {                                                      // 13\n\t\tvar val = store.get(key)                                                                                        // 14\n\t\tif (transactionFn == null) {                                                                                    // 15\n\t\t\ttransactionFn = defaultVal                                                                                     // 16\n\t\t\tdefaultVal = null                                                                                              // 17\n\t\t}                                                                                                               // 18\n\t\tif (typeof val == 'undefined') { val = defaultVal || {} }                                                       // 19\n\t\ttransactionFn(val)                                                                                              // 20\n\t\tstore.set(key, val)                                                                                             // 21\n\t}                                                                                                                // 22\n\tstore.getAll = function() {}                                                                                     // 23\n\tstore.forEach = function() {}                                                                                    // 24\n                                                                                                                  // 25\n\tstore.serialize = function(value) {                                                                              // 26\n\t\treturn JSON.stringify(value)                                                                                    // 27\n\t}                                                                                                                // 28\n\tstore.deserialize = function(value) {                                                                            // 29\n\t\tif (typeof value != 'string') { return undefined }                                                              // 30\n\t\ttry { return JSON.parse(value) }                                                                                // 31\n\t\tcatch(e) { return value || undefined }                                                                          // 32\n\t}                                                                                                                // 33\n                                                                                                                  // 34\n\t// Functions to encapsulate questionable FireFox 3.6.13 behavior                                                 // 35\n\t// when about.config::dom.storage.enabled === false                                                              // 36\n\t// See https://github.com/marcuswestin/store.js/issues#issue/13                                                  // 37\n\tfunction isLocalStorageNameSupported() {                                                                         // 38\n\t\ttry { return (localStorageName in win && win[localStorageName]) }                                               // 39\n\t\tcatch(err) { return false }                                                                                     // 40\n\t}                                                                                                                // 41\n                                                                                                                  // 42\n\tif (isLocalStorageNameSupported()) {                                                                             // 43\n\t\tstorage = win[localStorageName]                                                                                 // 44\n\t\tstore.set = function(key, val) {                                                                                // 45\n\t\t\tif (val === undefined) { return store.remove(key) }                                                            // 46\n\t\t\tstorage.setItem(key, store.serialize(val))                                                                     // 47\n\t\t\treturn val                                                                                                     // 48\n\t\t}                                                                                                               // 49\n\t\tstore.get = function(key) { return store.deserialize(storage.getItem(key)) }                                    // 50\n\t\tstore.remove = function(key) { storage.removeItem(key) }                                                        // 51\n\t\tstore.clear = function() { storage.clear() }                                                                    // 52\n\t\tstore.getAll = function() {                                                                                     // 53\n\t\t\tvar ret = {}                                                                                                   // 54\n\t\t\tstore.forEach(function(key, val) {                                                                             // 55\n\t\t\t\tret[key] = val                                                                                                // 56\n\t\t\t})                                                                                                             // 57\n\t\t\treturn ret                                                                                                     // 58\n\t\t}                                                                                                               // 59\n\t\tstore.forEach = function(callback) {                                                                            // 60\n\t\t\tfor (var i=0; i<storage.length; i++) {                                                                         // 61\n\t\t\t\tvar key = storage.key(i)                                                                                      // 62\n\t\t\t\tcallback(key, store.get(key))                                                                                 // 63\n\t\t\t}                                                                                                              // 64\n\t\t}                                                                                                               // 65\n\t} else if (doc.documentElement.addBehavior) {                                                                    // 66\n\t\tvar storageOwner,                                                                                               // 67\n\t\t\tstorageContainer                                                                                               // 68\n\t\t// Since #userData storage applies only to specific paths, we need to                                           // 69\n\t\t// somehow link our data to a specific path.  We choose /favicon.ico                                            // 70\n\t\t// as a pretty safe option, since all browsers already make a request to                                        // 71\n\t\t// this URL anyway and being a 404 will not hurt us here.  We wrap an                                           // 72\n\t\t// iframe pointing to the favicon in an ActiveXObject(htmlfile) object                                          // 73\n\t\t// (see: http://msdn.microsoft.com/en-us/library/aa752574(v=VS.85).aspx)                                        // 74\n\t\t// since the iframe access rules appear to allow direct access and                                              // 75\n\t\t// manipulation of the document element, even for a 404 page.  This                                             // 76\n\t\t// document can be used instead of the current document (which would                                            // 77\n\t\t// have been limited to the current path) to perform #userData storage.                                         // 78\n\t\ttry {                                                                                                           // 79\n\t\t\tstorageContainer = new ActiveXObject('htmlfile')                                                               // 80\n\t\t\tstorageContainer.open()                                                                                        // 81\n\t\t\tstorageContainer.write('<'+scriptTag+'>document.w=window</'+scriptTag+'><iframe src=\"/favicon.ico\"></iframe>') // 82\n\t\t\tstorageContainer.close()                                                                                       // 83\n\t\t\tstorageOwner = storageContainer.w.frames[0].document                                                           // 84\n\t\t\tstorage = storageOwner.createElement('div')                                                                    // 85\n\t\t} catch(e) {                                                                                                    // 86\n\t\t\t// somehow ActiveXObject instantiation failed (perhaps some special                                            // 87\n\t\t\t// security settings or otherwse), fall back to per-path storage                                               // 88\n\t\t\tstorage = doc.createElement('div')                                                                             // 89\n\t\t\tstorageOwner = doc.body                                                                                        // 90\n\t\t}                                                                                                               // 91\n\t\tfunction withIEStorage(storeFunction) {                                                                         // 92\n\t\t\treturn function() {                                                                                            // 93\n\t\t\t\tvar args = Array.prototype.slice.call(arguments, 0)                                                           // 94\n\t\t\t\targs.unshift(storage)                                                                                         // 95\n\t\t\t\t// See http://msdn.microsoft.com/en-us/library/ms531081(v=VS.85).aspx                                         // 96\n\t\t\t\t// and http://msdn.microsoft.com/en-us/library/ms531424(v=VS.85).aspx                                         // 97\n\t\t\t\tstorageOwner.appendChild(storage)                                                                             // 98\n\t\t\t\tstorage.addBehavior('#default#userData')                                                                      // 99\n\t\t\t\tstorage.load(localStorageName)                                                                                // 100\n\t\t\t\tvar result = storeFunction.apply(store, args)                                                                 // 101\n\t\t\t\tstorageOwner.removeChild(storage)                                                                             // 102\n\t\t\t\treturn result                                                                                                 // 103\n\t\t\t}                                                                                                              // 104\n\t\t}                                                                                                               // 105\n                                                                                                                  // 106\n\t\t// In IE7, keys cannot start with a digit or contain certain chars.                                             // 107\n\t\t// See https://github.com/marcuswestin/store.js/issues/40                                                       // 108\n\t\t// See https://github.com/marcuswestin/store.js/issues/83                                                       // 109\n\t\tvar forbiddenCharsRegex = new RegExp(\"[!\\\"#$%&'()*+,/\\\\\\\\:;<=>?@[\\\\]^`{|}~]\", \"g\")                              // 110\n\t\tfunction ieKeyFix(key) {                                                                                        // 111\n\t\t\treturn key.replace(/^d/, '___$&').replace(forbiddenCharsRegex, '___')                                          // 112\n\t\t}                                                                                                               // 113\n\t\tstore.set = withIEStorage(function(storage, key, val) {                                                         // 114\n\t\t\tkey = ieKeyFix(key)                                                                                            // 115\n\t\t\tif (val === undefined) { return store.remove(key) }                                                            // 116\n\t\t\tstorage.setAttribute(key, store.serialize(val))                                                                // 117\n\t\t\tstorage.save(localStorageName)                                                                                 // 118\n\t\t\treturn val                                                                                                     // 119\n\t\t})                                                                                                              // 120\n\t\tstore.get = withIEStorage(function(storage, key) {                                                              // 121\n\t\t\tkey = ieKeyFix(key)                                                                                            // 122\n\t\t\treturn store.deserialize(storage.getAttribute(key))                                                            // 123\n\t\t})                                                                                                              // 124\n\t\tstore.remove = withIEStorage(function(storage, key) {                                                           // 125\n\t\t\tkey = ieKeyFix(key)                                                                                            // 126\n\t\t\tstorage.removeAttribute(key)                                                                                   // 127\n\t\t\tstorage.save(localStorageName)                                                                                 // 128\n\t\t})                                                                                                              // 129\n\t\tstore.clear = withIEStorage(function(storage) {                                                                 // 130\n\t\t\tvar attributes = storage.XMLDocument.documentElement.attributes                                                // 131\n\t\t\tstorage.load(localStorageName)                                                                                 // 132\n\t\t\tfor (var i=0, attr; attr=attributes[i]; i++) {                                                                 // 133\n\t\t\t\tstorage.removeAttribute(attr.name)                                                                            // 134\n\t\t\t}                                                                                                              // 135\n\t\t\tstorage.save(localStorageName)                                                                                 // 136\n\t\t})                                                                                                              // 137\n\t\tstore.getAll = function(storage) {                                                                              // 138\n\t\t\tvar ret = {}                                                                                                   // 139\n\t\t\tstore.forEach(function(key, val) {                                                                             // 140\n\t\t\t\tret[key] = val                                                                                                // 141\n\t\t\t})                                                                                                             // 142\n\t\t\treturn ret                                                                                                     // 143\n\t\t}                                                                                                               // 144\n\t\tstore.forEach = withIEStorage(function(storage, callback) {                                                     // 145\n\t\t\tvar attributes = storage.XMLDocument.documentElement.attributes                                                // 146\n\t\t\tfor (var i=0, attr; attr=attributes[i]; ++i) {                                                                 // 147\n\t\t\t\tcallback(attr.name, store.deserialize(storage.getAttribute(attr.name)))                                       // 148\n\t\t\t}                                                                                                              // 149\n\t\t})                                                                                                              // 150\n\t}                                                                                                                // 151\n                                                                                                                  // 152\n\ttry {                                                                                                            // 153\n\t\tvar testKey = '__storejs__'                                                                                     // 154\n\t\tstore.set(testKey, testKey)                                                                                     // 155\n\t\tif (store.get(testKey) != testKey) { store.disabled = true }                                                    // 156\n\t\tstore.remove(testKey)                                                                                           // 157\n\t} catch(e) {                                                                                                     // 158\n\t\tstore.disabled = true                                                                                           // 159\n\t}                                                                                                                // 160\n\tstore.enabled = !store.disabled                                                                                  // 161\n                                                                                                                  // 162\n\tif (typeof module != 'undefined' && module.exports && this.module !== module) { module.exports = store }         // 163\n\telse if (typeof define === 'function' && define.amd) { define(store) }                                           // 164\n\telse { win.store = store }                                                                                       // 165\n                                                                                                                  // 166\n})(Function('return this')());                                                                                    // 167\n                                                                                                                  // 168\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n\n\n\n\n(function () {\n\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n//                                                                                                                //\n// packages/mrt:reactive-store/reactivestore.js                                                                   //\n//                                                                                                                //\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n                                                                                                                  //\nReactiveStore = {};                                                                                               // 1\n                                                                                                                  // 2\nReactiveStore._deps = {};                                                                                         // 3\nReactiveStore._dep = new Deps.Dependency();                                                                       // 4\n                                                                                                                  // 5\nReactiveStore.get = function(name) {                                                                              // 6\n  var _dep = ReactiveStore._deps[name];                                                                           // 7\n  if(!_dep) {                                                                                                     // 8\n    ReactiveStore._deps[name] = new Deps.Dependency();                                                            // 9\n    _dep = ReactiveStore._deps[name];                                                                             // 10\n  }                                                                                                               // 11\n  _dep.depend();                                                                                                  // 12\n                                                                                                                  // 13\n  return store.get(name)                                                                                          // 14\n};                                                                                                                // 15\n                                                                                                                  // 16\nReactiveStore.set = function(name, value) {                                                                       // 17\n                                                                                                                  // 18\n  store.set(name, value)                                                                                          // 19\n                                                                                                                  // 20\n  var _dep = ReactiveStore._deps[name];                                                                           // 21\n  if(!_dep) {                                                                                                     // 22\n    ReactiveStore._deps[name] = new Deps.Dependency();                                                            // 23\n    _dep = ReactiveStore._deps[name];                                                                             // 24\n  }                                                                                                               // 25\n  _dep.changed();                                                                                                 // 26\n  ReactiveStore._dep.changed();                                                                                   // 27\n};                                                                                                                // 28\n                                                                                                                  // 29\n                                                                                                                  // 30\nReactiveStore.getAll = function() {                                                                               // 31\n  ReactiveStore._dep.depend();                                                                                    // 32\n                                                                                                                  // 33\n  return store.getAll();                                                                                          // 34\n};                                                                                                                // 35\n                                                                                                                  // 36\n                                                                                                                  // 37\nReactiveStore.remove = function(name) {                                                                           // 38\n  store.remove(name)                                                                                              // 39\n};                                                                                                                // 40\n                                                                                                                  // 41\n                                                                                                                  // 42\nReactiveStore.clearAll = function() {                                                                             // 43\n  store.clearAll();                                                                                               // 44\n                                                                                                                  // 45\n  ReactiveStore._dep.changed();                                                                                   // 46\n};                                                                                                                // 47\n                                                                                                                  // 48\n                                                                                                                  // 49\n                                                                                                                  // 50\n                                                                                                                  // 51\n                                                                                                                  // 52\n                                                                                                                  // 53\n                                                                                                                  // 54\n////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////\n\n}).call(this);\n\n\n/* Exports */\nPackage._define(\"mrt:reactive-store\", {\n  ReactiveStore: ReactiveStore\n});\n\n})();\n","servePath":"/packages/mrt_reactive-store.js"}]